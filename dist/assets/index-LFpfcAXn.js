(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();function om(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var mf={exports:{}},yu={},pf={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg;function Yw(){if(Vg)return rt;Vg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),m=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),I=Symbol.iterator;function A(z){return z===null||typeof z!="object"?null:(z=I&&z[I]||z["@@iterator"],typeof z=="function"?z:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,ne={};function ee(z,J,ge){this.props=z,this.context=J,this.refs=ne,this.updater=ge||H}ee.prototype.isReactComponent={},ee.prototype.setState=function(z,J){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,J,"setState")},ee.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function be(){}be.prototype=ee.prototype;function pe(z,J,ge){this.props=z,this.context=J,this.refs=ne,this.updater=ge||H}var he=pe.prototype=new be;he.constructor=pe,Z(he,ee.prototype),he.isPureReactComponent=!0;var Me=Array.isArray,He=Object.prototype.hasOwnProperty,Ne={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function R(z,J,ge){var ye,Te={},ce=null,Ge=null;if(J!=null)for(ye in J.ref!==void 0&&(Ge=J.ref),J.key!==void 0&&(ce=""+J.key),J)He.call(J,ye)&&!j.hasOwnProperty(ye)&&(Te[ye]=J[ye]);var Ue=arguments.length-2;if(Ue===1)Te.children=ge;else if(1<Ue){for(var it=Array(Ue),Rt=0;Rt<Ue;Rt++)it[Rt]=arguments[Rt+2];Te.children=it}if(z&&z.defaultProps)for(ye in Ue=z.defaultProps,Ue)Te[ye]===void 0&&(Te[ye]=Ue[ye]);return{$$typeof:r,type:z,key:ce,ref:Ge,props:Te,_owner:Ne.current}}function D(z,J){return{$$typeof:r,type:z.type,key:J,ref:z.ref,props:z.props,_owner:z._owner}}function B(z){return typeof z=="object"&&z!==null&&z.$$typeof===r}function V(z){var J={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ge){return J[ge]})}var W=/\/+/g;function M(z,J){return typeof z=="object"&&z!==null&&z.key!=null?V(""+z.key):J.toString(36)}function Xe(z,J,ge,ye,Te){var ce=typeof z;(ce==="undefined"||ce==="boolean")&&(z=null);var Ge=!1;if(z===null)Ge=!0;else switch(ce){case"string":case"number":Ge=!0;break;case"object":switch(z.$$typeof){case r:case e:Ge=!0}}if(Ge)return Ge=z,Te=Te(Ge),z=ye===""?"."+M(Ge,0):ye,Me(Te)?(ge="",z!=null&&(ge=z.replace(W,"$&/")+"/"),Xe(Te,J,ge,"",function(Rt){return Rt})):Te!=null&&(B(Te)&&(Te=D(Te,ge+(!Te.key||Ge&&Ge.key===Te.key?"":(""+Te.key).replace(W,"$&/")+"/")+z)),J.push(Te)),1;if(Ge=0,ye=ye===""?".":ye+":",Me(z))for(var Ue=0;Ue<z.length;Ue++){ce=z[Ue];var it=ye+M(ce,Ue);Ge+=Xe(ce,J,ge,it,Te)}else if(it=A(z),typeof it=="function")for(z=it.call(z),Ue=0;!(ce=z.next()).done;)ce=ce.value,it=ye+M(ce,Ue++),Ge+=Xe(ce,J,ge,it,Te);else if(ce==="object")throw J=String(z),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return Ge}function nt(z,J,ge){if(z==null)return z;var ye=[],Te=0;return Xe(z,ye,"","",function(ce){return J.call(ge,ce,Te++)}),ye}function fe(z){if(z._status===-1){var J=z._result;J=J(),J.then(function(ge){(z._status===0||z._status===-1)&&(z._status=1,z._result=ge)},function(ge){(z._status===0||z._status===-1)&&(z._status=2,z._result=ge)}),z._status===-1&&(z._status=0,z._result=J)}if(z._status===1)return z._result.default;throw z._result}var Oe={current:null},te={transition:null},Ee={ReactCurrentDispatcher:Oe,ReactCurrentBatchConfig:te,ReactCurrentOwner:Ne};function re(){throw Error("act(...) is not supported in production builds of React.")}return rt.Children={map:nt,forEach:function(z,J,ge){nt(z,function(){J.apply(this,arguments)},ge)},count:function(z){var J=0;return nt(z,function(){J++}),J},toArray:function(z){return nt(z,function(J){return J})||[]},only:function(z){if(!B(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},rt.Component=ee,rt.Fragment=t,rt.Profiler=a,rt.PureComponent=pe,rt.StrictMode=s,rt.Suspense=E,rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ee,rt.act=re,rt.cloneElement=function(z,J,ge){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var ye=Z({},z.props),Te=z.key,ce=z.ref,Ge=z._owner;if(J!=null){if(J.ref!==void 0&&(ce=J.ref,Ge=Ne.current),J.key!==void 0&&(Te=""+J.key),z.type&&z.type.defaultProps)var Ue=z.type.defaultProps;for(it in J)He.call(J,it)&&!j.hasOwnProperty(it)&&(ye[it]=J[it]===void 0&&Ue!==void 0?Ue[it]:J[it])}var it=arguments.length-2;if(it===1)ye.children=ge;else if(1<it){Ue=Array(it);for(var Rt=0;Rt<it;Rt++)Ue[Rt]=arguments[Rt+2];ye.children=Ue}return{$$typeof:r,type:z.type,key:Te,ref:ce,props:ye,_owner:Ge}},rt.createContext=function(z){return z={$$typeof:m,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:c,_context:z},z.Consumer=z},rt.createElement=R,rt.createFactory=function(z){var J=R.bind(null,z);return J.type=z,J},rt.createRef=function(){return{current:null}},rt.forwardRef=function(z){return{$$typeof:v,render:z}},rt.isValidElement=B,rt.lazy=function(z){return{$$typeof:P,_payload:{_status:-1,_result:z},_init:fe}},rt.memo=function(z,J){return{$$typeof:x,type:z,compare:J===void 0?null:J}},rt.startTransition=function(z){var J=te.transition;te.transition={};try{z()}finally{te.transition=J}},rt.unstable_act=re,rt.useCallback=function(z,J){return Oe.current.useCallback(z,J)},rt.useContext=function(z){return Oe.current.useContext(z)},rt.useDebugValue=function(){},rt.useDeferredValue=function(z){return Oe.current.useDeferredValue(z)},rt.useEffect=function(z,J){return Oe.current.useEffect(z,J)},rt.useId=function(){return Oe.current.useId()},rt.useImperativeHandle=function(z,J,ge){return Oe.current.useImperativeHandle(z,J,ge)},rt.useInsertionEffect=function(z,J){return Oe.current.useInsertionEffect(z,J)},rt.useLayoutEffect=function(z,J){return Oe.current.useLayoutEffect(z,J)},rt.useMemo=function(z,J){return Oe.current.useMemo(z,J)},rt.useReducer=function(z,J,ge){return Oe.current.useReducer(z,J,ge)},rt.useRef=function(z){return Oe.current.useRef(z)},rt.useState=function(z){return Oe.current.useState(z)},rt.useSyncExternalStore=function(z,J,ge){return Oe.current.useSyncExternalStore(z,J,ge)},rt.useTransition=function(){return Oe.current.useTransition()},rt.version="18.3.1",rt}var zg;function am(){return zg||(zg=1,pf.exports=Yw()),pf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg;function Xw(){if(Fg)return yu;Fg=1;var r=am(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function m(v,E,x){var P,I={},A=null,H=null;x!==void 0&&(A=""+x),E.key!==void 0&&(A=""+E.key),E.ref!==void 0&&(H=E.ref);for(P in E)s.call(E,P)&&!c.hasOwnProperty(P)&&(I[P]=E[P]);if(v&&v.defaultProps)for(P in E=v.defaultProps,E)I[P]===void 0&&(I[P]=E[P]);return{$$typeof:e,type:v,key:A,ref:H,props:I,_owner:a.current}}return yu.Fragment=t,yu.jsx=m,yu.jsxs=m,yu}var jg;function Jw(){return jg||(jg=1,mf.exports=Xw()),mf.exports}var k=Jw(),Yc={},gf={exports:{}},Pr={},_f={exports:{}},yf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg;function eE(){return Bg||(Bg=1,(function(r){function e(te,Ee){var re=te.length;te.push(Ee);e:for(;0<re;){var z=re-1>>>1,J=te[z];if(0<a(J,Ee))te[z]=Ee,te[re]=J,re=z;else break e}}function t(te){return te.length===0?null:te[0]}function s(te){if(te.length===0)return null;var Ee=te[0],re=te.pop();if(re!==Ee){te[0]=re;e:for(var z=0,J=te.length,ge=J>>>1;z<ge;){var ye=2*(z+1)-1,Te=te[ye],ce=ye+1,Ge=te[ce];if(0>a(Te,re))ce<J&&0>a(Ge,Te)?(te[z]=Ge,te[ce]=re,z=ce):(te[z]=Te,te[ye]=re,z=ye);else if(ce<J&&0>a(Ge,re))te[z]=Ge,te[ce]=re,z=ce;else break e}}return Ee}function a(te,Ee){var re=te.sortIndex-Ee.sortIndex;return re!==0?re:te.id-Ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var m=Date,v=m.now();r.unstable_now=function(){return m.now()-v}}var E=[],x=[],P=1,I=null,A=3,H=!1,Z=!1,ne=!1,ee=typeof setTimeout=="function"?setTimeout:null,be=typeof clearTimeout=="function"?clearTimeout:null,pe=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function he(te){for(var Ee=t(x);Ee!==null;){if(Ee.callback===null)s(x);else if(Ee.startTime<=te)s(x),Ee.sortIndex=Ee.expirationTime,e(E,Ee);else break;Ee=t(x)}}function Me(te){if(ne=!1,he(te),!Z)if(t(E)!==null)Z=!0,fe(He);else{var Ee=t(x);Ee!==null&&Oe(Me,Ee.startTime-te)}}function He(te,Ee){Z=!1,ne&&(ne=!1,be(R),R=-1),H=!0;var re=A;try{for(he(Ee),I=t(E);I!==null&&(!(I.expirationTime>Ee)||te&&!V());){var z=I.callback;if(typeof z=="function"){I.callback=null,A=I.priorityLevel;var J=z(I.expirationTime<=Ee);Ee=r.unstable_now(),typeof J=="function"?I.callback=J:I===t(E)&&s(E),he(Ee)}else s(E);I=t(E)}if(I!==null)var ge=!0;else{var ye=t(x);ye!==null&&Oe(Me,ye.startTime-Ee),ge=!1}return ge}finally{I=null,A=re,H=!1}}var Ne=!1,j=null,R=-1,D=5,B=-1;function V(){return!(r.unstable_now()-B<D)}function W(){if(j!==null){var te=r.unstable_now();B=te;var Ee=!0;try{Ee=j(!0,te)}finally{Ee?M():(Ne=!1,j=null)}}else Ne=!1}var M;if(typeof pe=="function")M=function(){pe(W)};else if(typeof MessageChannel<"u"){var Xe=new MessageChannel,nt=Xe.port2;Xe.port1.onmessage=W,M=function(){nt.postMessage(null)}}else M=function(){ee(W,0)};function fe(te){j=te,Ne||(Ne=!0,M())}function Oe(te,Ee){R=ee(function(){te(r.unstable_now())},Ee)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(te){te.callback=null},r.unstable_continueExecution=function(){Z||H||(Z=!0,fe(He))},r.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<te?Math.floor(1e3/te):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_getFirstCallbackNode=function(){return t(E)},r.unstable_next=function(te){switch(A){case 1:case 2:case 3:var Ee=3;break;default:Ee=A}var re=A;A=Ee;try{return te()}finally{A=re}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(te,Ee){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var re=A;A=te;try{return Ee()}finally{A=re}},r.unstable_scheduleCallback=function(te,Ee,re){var z=r.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?z+re:z):re=z,te){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=re+J,te={id:P++,callback:Ee,priorityLevel:te,startTime:re,expirationTime:J,sortIndex:-1},re>z?(te.sortIndex=re,e(x,te),t(E)===null&&te===t(x)&&(ne?(be(R),R=-1):ne=!0,Oe(Me,re-z))):(te.sortIndex=J,e(E,te),Z||H||(Z=!0,fe(He))),te},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(te){var Ee=A;return function(){var re=A;A=Ee;try{return te.apply(this,arguments)}finally{A=re}}}})(yf)),yf}var Ug;function tE(){return Ug||(Ug=1,_f.exports=eE()),_f.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg;function nE(){if(Wg)return Pr;Wg=1;var r=am(),e=tE();function t(n){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+n,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(n,o){m(n,o),m(n+"Capture",o)}function m(n,o){for(a[n]=o,n=0;n<o.length;n++)s.add(o[n])}var v=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),E=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P={},I={};function A(n){return E.call(I,n)?!0:E.call(P,n)?!1:x.test(n)?I[n]=!0:(P[n]=!0,!1)}function H(n,o,u,f){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Z(n,o,u,f){if(o===null||typeof o>"u"||H(n,o,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function ne(n,o,u,f,g,_,S){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=n,this.type=o,this.sanitizeURL=_,this.removeEmptyString=S}var ee={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ee[n]=new ne(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var o=n[0];ee[o]=new ne(o,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){ee[n]=new ne(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ee[n]=new ne(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ee[n]=new ne(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){ee[n]=new ne(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){ee[n]=new ne(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){ee[n]=new ne(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){ee[n]=new ne(n,5,!1,n.toLowerCase(),null,!1,!1)});var be=/[\-:]([a-z])/g;function pe(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var o=n.replace(be,pe);ee[o]=new ne(o,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var o=n.replace(be,pe);ee[o]=new ne(o,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var o=n.replace(be,pe);ee[o]=new ne(o,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){ee[n]=new ne(n,1,!1,n.toLowerCase(),null,!1,!1)}),ee.xlinkHref=new ne("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){ee[n]=new ne(n,1,!1,n.toLowerCase(),null,!0,!0)});function he(n,o,u,f){var g=ee.hasOwnProperty(o)?ee[o]:null;(g!==null?g.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(Z(o,u,g,f)&&(u=null),f||g===null?A(o)&&(u===null?n.removeAttribute(o):n.setAttribute(o,""+u)):g.mustUseProperty?n[g.propertyName]=u===null?g.type===3?!1:"":u:(o=g.attributeName,f=g.attributeNamespace,u===null?n.removeAttribute(o):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?n.setAttributeNS(f,o,u):n.setAttribute(o,u))))}var Me=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,He=Symbol.for("react.element"),Ne=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),V=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),Xe=Symbol.for("react.suspense_list"),nt=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),Oe=Symbol.for("react.offscreen"),te=Symbol.iterator;function Ee(n){return n===null||typeof n!="object"?null:(n=te&&n[te]||n["@@iterator"],typeof n=="function"?n:null)}var re=Object.assign,z;function J(n){if(z===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);z=o&&o[1]||""}return`
`+z+n}var ge=!1;function ye(n,o){if(!n||ge)return"";ge=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(X){var f=X}Reflect.construct(n,[],o)}else{try{o.call()}catch(X){f=X}n.call(o.prototype)}else{try{throw Error()}catch(X){f=X}n()}}catch(X){if(X&&f&&typeof X.stack=="string"){for(var g=X.stack.split(`
`),_=f.stack.split(`
`),S=g.length-1,N=_.length-1;1<=S&&0<=N&&g[S]!==_[N];)N--;for(;1<=S&&0<=N;S--,N--)if(g[S]!==_[N]){if(S!==1||N!==1)do if(S--,N--,0>N||g[S]!==_[N]){var F=`
`+g[S].replace(" at new "," at ");return n.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",n.displayName)),F}while(1<=S&&0<=N);break}}}finally{ge=!1,Error.prepareStackTrace=u}return(n=n?n.displayName||n.name:"")?J(n):""}function Te(n){switch(n.tag){case 5:return J(n.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return n=ye(n.type,!1),n;case 11:return n=ye(n.type.render,!1),n;case 1:return n=ye(n.type,!0),n;default:return""}}function ce(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case j:return"Fragment";case Ne:return"Portal";case D:return"Profiler";case R:return"StrictMode";case M:return"Suspense";case Xe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case V:return(n.displayName||"Context")+".Consumer";case B:return(n._context.displayName||"Context")+".Provider";case W:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case nt:return o=n.displayName||null,o!==null?o:ce(n.type)||"Memo";case fe:o=n._payload,n=n._init;try{return ce(n(o))}catch{}}return null}function Ge(n){var o=n.type;switch(n.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=o.render,n=n.displayName||n.name||"",o.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(o);case 8:return o===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ue(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function it(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Rt(n){var o=it(n)?"checked":"value",u=Object.getOwnPropertyDescriptor(n.constructor.prototype,o),f=""+n[o];if(!n.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,_=u.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return g.call(this)},set:function(S){f=""+S,_.call(this,S)}}),Object.defineProperty(n,o,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function Ur(n){n._valueTracker||(n._valueTracker=Rt(n))}function or(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return n&&(f=it(n)?n.checked?"true":"false":n.value),n=f,n!==u?(o.setValue(n),!0):!1}function ar(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Wr(n,o){var u=o.checked;return re({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??n._wrapperState.initialChecked})}function cs(n,o){var u=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;u=Ue(o.value!=null?o.value:u),n._wrapperState={initialChecked:f,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Hr(n,o){o=o.checked,o!=null&&he(n,"checked",o,!1)}function _n(n,o){Hr(n,o);var u=Ue(o.value),f=o.type;if(u!=null)f==="number"?(u===0&&n.value===""||n.value!=u)&&(n.value=""+u):n.value!==""+u&&(n.value=""+u);else if(f==="submit"||f==="reset"){n.removeAttribute("value");return}o.hasOwnProperty("value")?ft(n,o.type,u):o.hasOwnProperty("defaultValue")&&ft(n,o.type,Ue(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(n.defaultChecked=!!o.defaultChecked)}function Ar(n,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+n._wrapperState.initialValue,u||o===n.value||(n.value=o),n.defaultValue=o}u=n.name,u!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,u!==""&&(n.name=u)}function ft(n,o,u){(o!=="number"||ar(n.ownerDocument)!==n)&&(u==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+u&&(n.defaultValue=""+u))}var St=Array.isArray;function yn(n,o,u,f){if(n=n.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<n.length;u++)g=o.hasOwnProperty("$"+n[u].value),n[u].selected!==g&&(n[u].selected=g),g&&f&&(n[u].defaultSelected=!0)}else{for(u=""+Ue(u),o=null,g=0;g<n.length;g++){if(n[g].value===u){n[g].selected=!0,f&&(n[g].defaultSelected=!0);return}o!==null||n[g].disabled||(o=n[g])}o!==null&&(o.selected=!0)}}function Wt(n,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return re({},o,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function $n(n,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(St(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}n._wrapperState={initialValue:Ue(u)}}function Zs(n,o){var u=Ue(o.value),f=Ue(o.defaultValue);u!=null&&(u=""+u,u!==n.value&&(n.value=u),o.defaultValue==null&&n.defaultValue!==u&&(n.defaultValue=u)),f!=null&&(n.defaultValue=""+f)}function qr(n){var o=n.textContent;o===n._wrapperState.initialValue&&o!==""&&o!==null&&(n.value=o)}function lr(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gi(n,o){return n==null||n==="http://www.w3.org/1999/xhtml"?lr(o):n==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ur,Mi=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,f,g){MSApp.execUnsafeLocalFunction(function(){return n(o,u,f,g)})}:n})(function(n,o){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=o;else{for(ur=ur||document.createElement("div"),ur.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=ur.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;o.firstChild;)n.appendChild(o.firstChild)}});function vn(n,o){if(o){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=o;return}}n.textContent=o}var cr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kr=["Webkit","ms","Moz","O"];Object.keys(cr).forEach(function(n){kr.forEach(function(o){o=o+n.charAt(0).toUpperCase()+n.substring(1),cr[o]=cr[n]})});function Rr(n,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||cr.hasOwnProperty(n)&&cr[n]?(""+o).trim():o+"px"}function $r(n,o){n=n.style;for(var u in o)if(o.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=Rr(u,o[u],f);u==="float"&&(u="cssFloat"),f?n.setProperty(u,g):n[u]=g}}var _i=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rn(n,o){if(o){if(_i[n]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function hr(n,o){if(n.indexOf("-")===-1)return typeof o.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dr=null;function wn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var fr=null,mr=null,Tt=null;function Di(n){if(n=ks(n)){if(typeof fr!="function")throw Error(t(280));var o=n.stateNode;o&&(o=tl(o),fr(n.stateNode,n.type,o))}}function je(n){mr?Tt?Tt.push(n):Tt=[n]:mr=n}function wt(){if(mr){var n=mr,o=Tt;if(Tt=mr=null,Di(n),o)for(n=0;n<o.length;n++)Di(o[n])}}function Ot(n,o){return n(o)}function Yt(){}var En=!1;function Pt(n,o,u){if(En)return n(o,u);En=!0;try{return Ot(n,o,u)}finally{En=!1,(mr!==null||Tt!==null)&&(Yt(),wt())}}function Ht(n,o){var u=n.stateNode;if(u===null)return null;var f=tl(u);if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(n=n.type,f=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!f;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var Gn=!1;if(v)try{var qt={};Object.defineProperty(qt,"passive",{get:function(){Gn=!0}}),window.addEventListener("test",qt,qt),window.removeEventListener("test",qt,qt)}catch{Gn=!1}function cn(n,o,u,f,g,_,S,N,F){var X=Array.prototype.slice.call(arguments,3);try{o.apply(u,X)}catch(le){this.onError(le)}}var Vt=!1,ve=null,Oi=!1,Zn=null,Xo={onError:function(n){Vt=!0,ve=n}};function Jo(n,o,u,f,g,_,S,N,F){Vt=!1,ve=null,cn.apply(Xo,arguments)}function hs(n,o,u,f,g,_,S,N,F){if(Jo.apply(this,arguments),Vt){if(Vt){var X=ve;Vt=!1,ve=null}else throw Error(t(198));Oi||(Oi=!0,Zn=X)}}function pr(n){var o=n,u=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,(o.flags&4098)!==0&&(u=o.return),n=o.return;while(n)}return o.tag===3?u:null}function Gr(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function ea(n){if(pr(n)!==n)throw Error(t(188))}function Ua(n){var o=n.alternate;if(!o){if(o=pr(n),o===null)throw Error(t(188));return o!==n?null:n}for(var u=n,f=o;;){var g=u.return;if(g===null)break;var _=g.alternate;if(_===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===u)return ea(g),n;if(_===f)return ea(g),o;_=_.sibling}throw Error(t(188))}if(u.return!==f.return)u=g,f=_;else{for(var S=!1,N=g.child;N;){if(N===u){S=!0,u=g,f=_;break}if(N===f){S=!0,f=g,u=_;break}N=N.sibling}if(!S){for(N=_.child;N;){if(N===u){S=!0,u=_,f=g;break}if(N===f){S=!0,f=_,u=g;break}N=N.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?n:o}function Wa(n){return n=Ua(n),n!==null?ds(n):null}function ds(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var o=ds(n);if(o!==null)return o;n=n.sibling}return null}var ta=e.unstable_scheduleCallback,fs=e.unstable_cancelCallback,ms=e.unstable_shouldYield,gr=e.unstable_requestPaint,It=e.unstable_now,ql=e.unstable_getCurrentPriorityLevel,Ks=e.unstable_ImmediatePriority,na=e.unstable_UserBlockingPriority,ps=e.unstable_NormalPriority,gs=e.unstable_LowPriority,Zr=e.unstable_IdlePriority,Vi=null,Nn=null;function zi(n){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(Vi,n,void 0,(n.current.flags&128)===128)}catch{}}var Ze=Math.clz32?Math.clz32:_r,ut=Math.log,Tn=Math.LN2;function _r(n){return n>>>=0,n===0?32:31-(ut(n)/Tn|0)|0}var xn=64,Kr=4194304;function xe(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function gt(n,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,g=n.suspendedLanes,_=n.pingedLanes,S=u&268435455;if(S!==0){var N=S&~g;N!==0?f=xe(N):(_&=S,_!==0&&(f=xe(_)))}else S=u&~g,S!==0?f=xe(S):_!==0&&(f=xe(_));if(f===0)return 0;if(o!==0&&o!==f&&(o&g)===0&&(g=f&-f,_=o&-o,g>=_||g===16&&(_&4194240)!==0))return o;if((f&4)!==0&&(f|=u&16),o=n.entangledLanes,o!==0)for(n=n.entanglements,o&=f;0<o;)u=31-Ze(o),g=1<<u,f|=n[u],o&=~g;return f}function yi(n,o){switch(n){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qr(n,o){for(var u=n.suspendedLanes,f=n.pingedLanes,g=n.expirationTimes,_=n.pendingLanes;0<_;){var S=31-Ze(_),N=1<<S,F=g[S];F===-1?((N&u)===0||(N&f)!==0)&&(g[S]=yi(N,o)):F<=o&&(n.expiredLanes|=N),_&=~N}}function hn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ra(){var n=xn;return xn<<=1,(xn&4194240)===0&&(xn=64),n}function Fi(n){for(var o=[],u=0;31>u;u++)o.push(n);return o}function Kn(n,o,u){n.pendingLanes|=o,o!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,o=31-Ze(o),n[o]=u}function Lt(n,o){var u=n.pendingLanes&~o;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=o,n.mutableReadLanes&=o,n.entangledLanes&=o,o=n.entanglements;var f=n.eventTimes;for(n=n.expirationTimes;0<u;){var g=31-Ze(u),_=1<<g;o[g]=0,f[g]=-1,n[g]=-1,u&=~_}}function Nr(n,o){var u=n.entangledLanes|=o;for(n=n.entanglements;u;){var f=31-Ze(u),g=1<<f;g&o|n[f]&o&&(n[f]|=o),u&=~g}}var et=0;function Ln(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var _s,Yr,ys,vs,ji,yr=!1,Bi=[],Qn=null,Lr=null,Gt=null,ws=new Map,Ve=new Map,Mt=[],_t="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vi(n,o){switch(n){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":Lr=null;break;case"mouseover":case"mouseout":Gt=null;break;case"pointerover":case"pointerout":ws.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ve.delete(o.pointerId)}}function Yn(n,o,u,f,g,_){return n===null||n.nativeEvent!==_?(n={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:_,targetContainers:[g]},o!==null&&(o=ks(o),o!==null&&Yr(o)),n):(n.eventSystemFlags|=f,o=n.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),n)}function Qs(n,o,u,f,g){switch(o){case"focusin":return Qn=Yn(Qn,n,o,u,f,g),!0;case"dragenter":return Lr=Yn(Lr,n,o,u,f,g),!0;case"mouseover":return Gt=Yn(Gt,n,o,u,f,g),!0;case"pointerover":var _=g.pointerId;return ws.set(_,Yn(ws.get(_)||null,n,o,u,f,g)),!0;case"gotpointercapture":return _=g.pointerId,Ve.set(_,Yn(Ve.get(_)||null,n,o,u,f,g)),!0}return!1}function Ui(n){var o=As(n.target);if(o!==null){var u=pr(o);if(u!==null){if(o=u.tag,o===13){if(o=Gr(u),o!==null){n.blockedOn=o,ji(n.priority,function(){ys(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function lt(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var u=xs(n.domEventName,n.eventSystemFlags,o[0],n.nativeEvent);if(u===null){u=n.nativeEvent;var f=new u.constructor(u.type,u);dr=f,u.target.dispatchEvent(f),dr=null}else return o=ks(u),o!==null&&Yr(o),n.blockedOn=u,!1;o.shift()}return!0}function Ys(n,o,u){lt(n)&&u.delete(o)}function Es(){yr=!1,Qn!==null&&lt(Qn)&&(Qn=null),Lr!==null&&lt(Lr)&&(Lr=null),Gt!==null&&lt(Gt)&&(Gt=null),ws.forEach(Ys),Ve.forEach(Ys)}function bt(n,o){n.blockedOn===o&&(n.blockedOn=null,yr||(yr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Es)))}function Mn(n){function o(g){return bt(g,n)}if(0<Bi.length){bt(Bi[0],n);for(var u=1;u<Bi.length;u++){var f=Bi[u];f.blockedOn===n&&(f.blockedOn=null)}}for(Qn!==null&&bt(Qn,n),Lr!==null&&bt(Lr,n),Gt!==null&&bt(Gt,n),ws.forEach(o),Ve.forEach(o),u=0;u<Mt.length;u++)f=Mt[u],f.blockedOn===n&&(f.blockedOn=null);for(;0<Mt.length&&(u=Mt[0],u.blockedOn===null);)Ui(u),u.blockedOn===null&&Mt.shift()}var Xr=Me.ReactCurrentBatchConfig,Jr=!0;function ei(n,o,u,f){var g=et,_=Xr.transition;Xr.transition=null;try{et=1,Ts(n,o,u,f)}finally{et=g,Xr.transition=_}}function ia(n,o,u,f){var g=et,_=Xr.transition;Xr.transition=null;try{et=4,Ts(n,o,u,f)}finally{et=g,Xr.transition=_}}function Ts(n,o,u,f){if(Jr){var g=xs(n,o,u,f);if(g===null)i(n,o,f,ti,u),vi(n,f);else if(Qs(g,n,o,u,f))f.stopPropagation();else if(vi(n,f),o&4&&-1<_t.indexOf(n)){for(;g!==null;){var _=ks(g);if(_!==null&&_s(_),_=xs(n,o,u,f),_===null&&i(n,o,f,ti,u),_===g)break;g=_}g!==null&&f.stopPropagation()}else i(n,o,f,null,u)}}var ti=null;function xs(n,o,u,f){if(ti=null,n=wn(f),n=As(n),n!==null)if(o=pr(n),o===null)n=null;else if(u=o.tag,u===13){if(n=Gr(o),n!==null)return n;n=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null);return ti=n,null}function tt(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ql()){case Ks:return 1;case na:return 4;case ps:case gs:return 16;case Zr:return 536870912;default:return 16}default:return 16}}var Xn=null,dn=null,Jn=null;function sa(){if(Jn)return Jn;var n,o=dn,u=o.length,f,g="value"in Xn?Xn.value:Xn.textContent,_=g.length;for(n=0;n<u&&o[n]===g[n];n++);var S=u-n;for(f=1;f<=S&&o[u-f]===g[_-f];f++);return Jn=g.slice(n,1<f?1-f:void 0)}function Is(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function vr(){return!0}function oa(){return!1}function sn(n){function o(u,f,g,_,S){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var N in n)n.hasOwnProperty(N)&&(u=n[N],this[N]=u?u(_):_[N]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?vr:oa,this.isPropagationStopped=oa,this}return re(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=vr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=vr)},persist:function(){},isPersistent:vr}),o}var ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ss=sn(ni),ri=re({},ni,{view:0,detail:0}),Xs=sn(ri),In,Js,Dn,On=re({},ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Be,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Dn&&(Dn&&n.type==="mousemove"?(In=n.screenX-Dn.screenX,Js=n.screenY-Dn.screenY):Js=In=0,Dn=n),In)},movementY:function(n){return"movementY"in n?n.movementY:Js}}),eo=sn(On),aa=re({},On,{dataTransfer:0}),to=sn(aa),no=re({},ri,{relatedTarget:0}),Xt=sn(no),la=re({},ni,{animationName:0,elapsedTime:0,pseudoElement:0}),Ha=sn(la),Wi=re({},ni,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),h=sn(Wi),y=re({},ni,{data:0}),T=sn(y),C={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function me(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=Q[n])?!!o[n]:!1}function Be(){return me}var ct=re({},ri,{key:function(n){if(n.key){var o=C[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=Is(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?q[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Be,charCode:function(n){return n.type==="keypress"?Is(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Is(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),mt=sn(ct),zt=re({},On,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),er=sn(zt),Mr=re({},ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Be}),wr=sn(Mr),ii=re({},ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),ro=sn(ii),io=re({},On,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),rd=sn(io),Dr=[9,13,27,32],Hi=v&&"CompositionEvent"in window,ua=null;v&&"documentMode"in document&&(ua=document.documentMode);var wi=v&&"TextEvent"in window&&!ua,ec=v&&(!Hi||ua&&8<ua&&11>=ua),Ps=" ",tc=!1;function so(n,o){switch(n){case"keyup":return Dr.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $l(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ei=!1;function id(n,o){switch(n){case"compositionend":return $l(o);case"keypress":return o.which!==32?null:(tc=!0,Ps);case"textInput":return n=o.data,n===Ps&&tc?null:n;default:return null}}function qi(n,o){if(Ei)return n==="compositionend"||!Hi&&so(n,o)?(n=sa(),Jn=dn=Xn=null,Ei=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ec&&o.locale!=="ko"?null:o.data;default:return null}}var qa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nc(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!qa[n.type]:o==="textarea"}function $a(n,o,u,f){je(f),o=d(o,"onChange"),0<o.length&&(u=new Ss("onChange","change",null,u,f),n.push({event:u,listeners:o}))}var ca=null,tr=null;function sd(n){tu(n,0)}function Ti(n){var o=Rs(n);if(or(o))return n}function od(n,o){if(n==="change")return o}var si=!1;if(v){var oo;if(v){var Ga="oninput"in document;if(!Ga){var Za=document.createElement("div");Za.setAttribute("oninput","return;"),Ga=typeof Za.oninput=="function"}oo=Ga}else oo=!1;si=oo&&(!document.documentMode||9<document.documentMode)}function ha(){ca&&(ca.detachEvent("onpropertychange",Ka),tr=ca=null)}function Ka(n){if(n.propertyName==="value"&&Ti(tr)){var o=[];$a(o,tr,n,wn(n)),Pt(sd,o)}}function Qa(n,o,u){n==="focusin"?(ha(),ca=o,tr=u,ca.attachEvent("onpropertychange",Ka)):n==="focusout"&&ha()}function ao(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ti(tr)}function Ya(n,o){if(n==="click")return Ti(o)}function Gl(n,o){if(n==="input"||n==="change")return Ti(o)}function rc(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var Or=typeof Object.is=="function"?Object.is:rc;function $i(n,o){if(Or(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var u=Object.keys(n),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!E.call(o,g)||!Or(n[g],o[g]))return!1}return!0}function ic(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Zl(n,o){var u=ic(n);n=0;for(var f;u;){if(u.nodeType===3){if(f=n+u.textContent.length,n<=o&&f>=o)return{node:u,offset:o-n};n=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=ic(u)}}function sc(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?sc(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function Kl(){for(var n=window,o=ar();o instanceof n.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)n=o.contentWindow;else break;o=ar(n.document)}return o}function Ql(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}function oi(n){var o=Kl(),u=n.focusedElem,f=n.selectionRange;if(o!==u&&u&&u.ownerDocument&&sc(u.ownerDocument.documentElement,u)){if(f!==null&&Ql(u)){if(o=f.start,n=f.end,n===void 0&&(n=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(n,u.value.length);else if(n=(o=u.ownerDocument||document)&&o.defaultView||window,n.getSelection){n=n.getSelection();var g=u.textContent.length,_=Math.min(f.start,g);f=f.end===void 0?_:Math.min(f.end,g),!n.extend&&_>f&&(g=f,f=_,_=g),g=Zl(u,_);var S=Zl(u,f);g&&S&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==S.node||n.focusOffset!==S.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),n.removeAllRanges(),_>f?(n.addRange(o),n.extend(S.node,S.offset)):(o.setEnd(S.node,S.offset),n.addRange(o)))}}for(o=[],n=u;n=n.parentNode;)n.nodeType===1&&o.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)n=o[u],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Xa=v&&"documentMode"in document&&11>=document.documentMode,lo=null,uo=null,da=null,Ja=!1;function oc(n,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Ja||lo==null||lo!==ar(f)||(f=lo,"selectionStart"in f&&Ql(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),da&&$i(da,f)||(da=f,f=d(uo,"onSelect"),0<f.length&&(o=new Ss("onSelect","select",null,o,u),n.push({event:o,listeners:f}),o.target=lo)))}function Gi(n,o){var u={};return u[n.toLowerCase()]=o.toLowerCase(),u["Webkit"+n]="webkit"+o,u["Moz"+n]="moz"+o,u}var co={animationend:Gi("Animation","AnimationEnd"),animationiteration:Gi("Animation","AnimationIteration"),animationstart:Gi("Animation","AnimationStart"),transitionend:Gi("Transition","TransitionEnd")},Zi={},Yl={};v&&(Yl=document.createElement("div").style,"AnimationEvent"in window||(delete co.animationend.animation,delete co.animationiteration.animation,delete co.animationstart.animation),"TransitionEvent"in window||delete co.transitionend.transition);function fa(n){if(Zi[n])return Zi[n];if(!co[n])return n;var o=co[n],u;for(u in o)if(o.hasOwnProperty(u)&&u in Yl)return Zi[n]=o[u];return n}var ac=fa("animationend"),ai=fa("animationiteration"),Xl=fa("animationstart"),Jl=fa("transitionend"),ho=new Map,lc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vr(n,o){ho.set(n,o),c(o,[n])}for(var bs=0;bs<lc.length;bs++){var el=lc[bs],uc=el.toLowerCase(),ad=el[0].toUpperCase()+el.slice(1);Vr(uc,"on"+ad)}Vr(ac,"onAnimationEnd"),Vr(ai,"onAnimationIteration"),Vr(Xl,"onAnimationStart"),Vr("dblclick","onDoubleClick"),Vr("focusin","onFocus"),Vr("focusout","onBlur"),Vr(Jl,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cc=new Set("cancel close invalid load scroll toggle".split(" ").concat(fo));function eu(n,o,u){var f=n.type||"unknown-event";n.currentTarget=u,hs(f,o,void 0,n),n.currentTarget=null}function tu(n,o){o=(o&4)!==0;for(var u=0;u<n.length;u++){var f=n[u],g=f.event;f=f.listeners;e:{var _=void 0;if(o)for(var S=f.length-1;0<=S;S--){var N=f[S],F=N.instance,X=N.currentTarget;if(N=N.listener,F!==_&&g.isPropagationStopped())break e;eu(g,N,X),_=F}else for(S=0;S<f.length;S++){if(N=f[S],F=N.instance,X=N.currentTarget,N=N.listener,F!==_&&g.isPropagationStopped())break e;eu(g,N,X),_=F}}}if(Oi)throw n=Zn,Oi=!1,Zn=null,n}function xt(n,o){var u=o[_o];u===void 0&&(u=o[_o]=new Set);var f=n+"__bubble";u.has(f)||(hc(o,n,2,!1),u.add(f))}function nu(n,o,u){var f=0;o&&(f|=4),hc(u,n,f,o)}var ma="_reactListening"+Math.random().toString(36).slice(2);function mo(n){if(!n[ma]){n[ma]=!0,s.forEach(function(u){u!=="selectionchange"&&(cc.has(u)||nu(u,!1,n),nu(u,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[ma]||(o[ma]=!0,nu("selectionchange",!1,o))}}function hc(n,o,u,f){switch(tt(o)){case 1:var g=ei;break;case 4:g=ia;break;default:g=Ts}u=g.bind(null,o,u,n),g=void 0,!Gn||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?n.addEventListener(o,u,{capture:!0,passive:g}):n.addEventListener(o,u,!0):g!==void 0?n.addEventListener(o,u,{passive:g}):n.addEventListener(o,u,!1)}function i(n,o,u,f,g){var _=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var N=f.stateNode.containerInfo;if(N===g||N.nodeType===8&&N.parentNode===g)break;if(S===4)for(S=f.return;S!==null;){var F=S.tag;if((F===3||F===4)&&(F=S.stateNode.containerInfo,F===g||F.nodeType===8&&F.parentNode===g))return;S=S.return}for(;N!==null;){if(S=As(N),S===null)return;if(F=S.tag,F===5||F===6){f=_=S;continue e}N=N.parentNode}}f=f.return}Pt(function(){var X=_,le=wn(u),ue=[];e:{var ae=ho.get(n);if(ae!==void 0){var Ie=Ss,Ae=n;switch(n){case"keypress":if(Is(u)===0)break e;case"keydown":case"keyup":Ie=mt;break;case"focusin":Ae="focus",Ie=Xt;break;case"focusout":Ae="blur",Ie=Xt;break;case"beforeblur":case"afterblur":Ie=Xt;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=eo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=to;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=wr;break;case ac:case ai:case Xl:Ie=Ha;break;case Jl:Ie=ro;break;case"scroll":Ie=Xs;break;case"wheel":Ie=rd;break;case"copy":case"cut":case"paste":Ie=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=er}var ke=(o&4)!==0,Zt=!ke&&n==="scroll",G=ke?ae!==null?ae+"Capture":null:ae;ke=[];for(var U=X,K;U!==null;){K=U;var de=K.stateNode;if(K.tag===5&&de!==null&&(K=de,G!==null&&(de=Ht(U,G),de!=null&&ke.push(l(U,de,K)))),Zt)break;U=U.return}0<ke.length&&(ae=new Ie(ae,Ae,null,u,le),ue.push({event:ae,listeners:ke}))}}if((o&7)===0){e:{if(ae=n==="mouseover"||n==="pointerover",Ie=n==="mouseout"||n==="pointerout",ae&&u!==dr&&(Ae=u.relatedTarget||u.fromElement)&&(As(Ae)||Ae[vt]))break e;if((Ie||ae)&&(ae=le.window===le?le:(ae=le.ownerDocument)?ae.defaultView||ae.parentWindow:window,Ie?(Ae=u.relatedTarget||u.toElement,Ie=X,Ae=Ae?As(Ae):null,Ae!==null&&(Zt=pr(Ae),Ae!==Zt||Ae.tag!==5&&Ae.tag!==6)&&(Ae=null)):(Ie=null,Ae=X),Ie!==Ae)){if(ke=eo,de="onMouseLeave",G="onMouseEnter",U="mouse",(n==="pointerout"||n==="pointerover")&&(ke=er,de="onPointerLeave",G="onPointerEnter",U="pointer"),Zt=Ie==null?ae:Rs(Ie),K=Ae==null?ae:Rs(Ae),ae=new ke(de,U+"leave",Ie,u,le),ae.target=Zt,ae.relatedTarget=K,de=null,As(le)===X&&(ke=new ke(G,U+"enter",Ae,u,le),ke.target=K,ke.relatedTarget=Zt,de=ke),Zt=de,Ie&&Ae)t:{for(ke=Ie,G=Ae,U=0,K=ke;K;K=p(K))U++;for(K=0,de=G;de;de=p(de))K++;for(;0<U-K;)ke=p(ke),U--;for(;0<K-U;)G=p(G),K--;for(;U--;){if(ke===G||G!==null&&ke===G.alternate)break t;ke=p(ke),G=p(G)}ke=null}else ke=null;Ie!==null&&w(ue,ae,Ie,ke,!1),Ae!==null&&Zt!==null&&w(ue,Zt,Ae,ke,!0)}}e:{if(ae=X?Rs(X):window,Ie=ae.nodeName&&ae.nodeName.toLowerCase(),Ie==="select"||Ie==="input"&&ae.type==="file")var Re=od;else if(nc(ae))if(si)Re=Gl;else{Re=ao;var ze=Qa}else(Ie=ae.nodeName)&&Ie.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(Re=Ya);if(Re&&(Re=Re(n,X))){$a(ue,Re,u,le);break e}ze&&ze(n,ae,X),n==="focusout"&&(ze=ae._wrapperState)&&ze.controlled&&ae.type==="number"&&ft(ae,"number",ae.value)}switch(ze=X?Rs(X):window,n){case"focusin":(nc(ze)||ze.contentEditable==="true")&&(lo=ze,uo=X,da=null);break;case"focusout":da=uo=lo=null;break;case"mousedown":Ja=!0;break;case"contextmenu":case"mouseup":case"dragend":Ja=!1,oc(ue,u,le);break;case"selectionchange":if(Xa)break;case"keydown":case"keyup":oc(ue,u,le)}var Fe;if(Hi)e:{switch(n){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else Ei?so(n,u)&&(qe="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(qe="onCompositionStart");qe&&(ec&&u.locale!=="ko"&&(Ei||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&Ei&&(Fe=sa()):(Xn=le,dn="value"in Xn?Xn.value:Xn.textContent,Ei=!0)),ze=d(X,qe),0<ze.length&&(qe=new T(qe,n,null,u,le),ue.push({event:qe,listeners:ze}),Fe?qe.data=Fe:(Fe=$l(u),Fe!==null&&(qe.data=Fe)))),(Fe=wi?id(n,u):qi(n,u))&&(X=d(X,"onBeforeInput"),0<X.length&&(le=new T("onBeforeInput","beforeinput",null,u,le),ue.push({event:le,listeners:X}),le.data=Fe))}tu(ue,o)})}function l(n,o,u){return{instance:n,listener:o,currentTarget:u}}function d(n,o){for(var u=o+"Capture",f=[];n!==null;){var g=n,_=g.stateNode;g.tag===5&&_!==null&&(g=_,_=Ht(n,u),_!=null&&f.unshift(l(n,_,g)),_=Ht(n,o),_!=null&&f.push(l(n,_,g))),n=n.return}return f}function p(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function w(n,o,u,f,g){for(var _=o._reactName,S=[];u!==null&&u!==f;){var N=u,F=N.alternate,X=N.stateNode;if(F!==null&&F===f)break;N.tag===5&&X!==null&&(N=X,g?(F=Ht(u,_),F!=null&&S.unshift(l(u,F,N))):g||(F=Ht(u,_),F!=null&&S.push(l(u,F,N)))),u=u.return}S.length!==0&&n.push({event:o,listeners:S})}var b=/\r\n?/g,O=/\u0000|\uFFFD/g;function $(n){return(typeof n=="string"?n:""+n).replace(b,`
`).replace(O,"")}function Y(n,o,u){if(o=$(o),$(n)!==o&&u)throw Error(t(425))}function oe(){}var we=null,De=null;function Je(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var on=typeof setTimeout=="function"?setTimeout:void 0,Jt=typeof clearTimeout=="function"?clearTimeout:void 0,nr=typeof Promise=="function"?Promise:void 0,Vn=typeof queueMicrotask=="function"?queueMicrotask:typeof nr<"u"?function(n){return nr.resolve(null).then(n).catch(po)}:on;function po(n){setTimeout(function(){throw n})}function ru(n,o){var u=o,f=0;do{var g=u.nextSibling;if(n.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){n.removeChild(g),Mn(o);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);Mn(o)}function Ki(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return n}function dc(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return n;o--}else u==="/$"&&o++}n=n.previousSibling}return null}var Cs=Math.random().toString(36).slice(2),li="__reactFiber$"+Cs,go="__reactProps$"+Cs,vt="__reactContainer$"+Cs,_o="__reactEvents$"+Cs,ld="__reactListeners$"+Cs,ud="__reactHandles$"+Cs;function As(n){var o=n[li];if(o)return o;for(var u=n.parentNode;u;){if(o=u[vt]||u[li]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(n=dc(n);n!==null;){if(u=n[li])return u;n=dc(n)}return o}n=u,u=n.parentNode}return null}function ks(n){return n=n[li]||n[vt],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Rs(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function tl(n){return n[go]||null}var cd=[],nl=-1;function yo(n){return{current:n}}function Nt(n){0>nl||(n.current=cd[nl],cd[nl]=null,nl--)}function Ct(n,o){nl++,cd[nl]=n.current,n.current=o}var vo={},zn=yo(vo),Er=yo(!1),pa=vo;function rl(n,o){var u=n.type.contextTypes;if(!u)return vo;var f=n.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var g={},_;for(_ in u)g[_]=o[_];return f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=o,n.__reactInternalMemoizedMaskedChildContext=g),g}function Tr(n){return n=n.childContextTypes,n!=null}function fc(){Nt(Er),Nt(zn)}function sp(n,o,u){if(zn.current!==vo)throw Error(t(168));Ct(zn,o),Ct(Er,u)}function op(n,o,u){var f=n.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in o))throw Error(t(108,Ge(n)||"Unknown",g));return re({},u,f)}function mc(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||vo,pa=zn.current,Ct(zn,n),Ct(Er,Er.current),!0}function ap(n,o,u){var f=n.stateNode;if(!f)throw Error(t(169));u?(n=op(n,o,pa),f.__reactInternalMemoizedMergedChildContext=n,Nt(Er),Nt(zn),Ct(zn,n)):Nt(Er),Ct(Er,u)}var Ns=null,pc=!1,hd=!1;function lp(n){Ns===null?Ns=[n]:Ns.push(n)}function gw(n){pc=!0,lp(n)}function wo(){if(!hd&&Ns!==null){hd=!0;var n=0,o=et;try{var u=Ns;for(et=1;n<u.length;n++){var f=u[n];do f=f(!0);while(f!==null)}Ns=null,pc=!1}catch(g){throw Ns!==null&&(Ns=Ns.slice(n+1)),ta(Ks,wo),g}finally{et=o,hd=!1}}return null}var il=[],sl=0,gc=null,_c=0,ui=[],ci=0,ga=null,Ls=1,Ms="";function _a(n,o){il[sl++]=_c,il[sl++]=gc,gc=n,_c=o}function up(n,o,u){ui[ci++]=Ls,ui[ci++]=Ms,ui[ci++]=ga,ga=n;var f=Ls;n=Ms;var g=32-Ze(f)-1;f&=~(1<<g),u+=1;var _=32-Ze(o)+g;if(30<_){var S=g-g%5;_=(f&(1<<S)-1).toString(32),f>>=S,g-=S,Ls=1<<32-Ze(o)+g|u<<g|f,Ms=_+n}else Ls=1<<_|u<<g|f,Ms=n}function dd(n){n.return!==null&&(_a(n,1),up(n,1,0))}function fd(n){for(;n===gc;)gc=il[--sl],il[sl]=null,_c=il[--sl],il[sl]=null;for(;n===ga;)ga=ui[--ci],ui[ci]=null,Ms=ui[--ci],ui[ci]=null,Ls=ui[--ci],ui[ci]=null}var zr=null,Fr=null,Dt=!1,xi=null;function cp(n,o){var u=mi(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=n,o=n.deletions,o===null?(n.deletions=[u],n.flags|=16):o.push(u)}function hp(n,o){switch(n.tag){case 5:var u=n.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(n.stateNode=o,zr=n,Fr=Ki(o.firstChild),!0):!1;case 6:return o=n.pendingProps===""||o.nodeType!==3?null:o,o!==null?(n.stateNode=o,zr=n,Fr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=ga!==null?{id:Ls,overflow:Ms}:null,n.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=mi(18,null,null,0),u.stateNode=o,u.return=n,n.child=u,zr=n,Fr=null,!0):!1;default:return!1}}function md(n){return(n.mode&1)!==0&&(n.flags&128)===0}function pd(n){if(Dt){var o=Fr;if(o){var u=o;if(!hp(n,o)){if(md(n))throw Error(t(418));o=Ki(u.nextSibling);var f=zr;o&&hp(n,o)?cp(f,u):(n.flags=n.flags&-4097|2,Dt=!1,zr=n)}}else{if(md(n))throw Error(t(418));n.flags=n.flags&-4097|2,Dt=!1,zr=n}}}function dp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;zr=n}function yc(n){if(n!==zr)return!1;if(!Dt)return dp(n),Dt=!0,!1;var o;if((o=n.tag!==3)&&!(o=n.tag!==5)&&(o=n.type,o=o!=="head"&&o!=="body"&&!Je(n.type,n.memoizedProps)),o&&(o=Fr)){if(md(n))throw fp(),Error(t(418));for(;o;)cp(n,o),o=Ki(o.nextSibling)}if(dp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,o=0;n;){if(n.nodeType===8){var u=n.data;if(u==="/$"){if(o===0){Fr=Ki(n.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}n=n.nextSibling}Fr=null}}else Fr=zr?Ki(n.stateNode.nextSibling):null;return!0}function fp(){for(var n=Fr;n;)n=Ki(n.nextSibling)}function ol(){Fr=zr=null,Dt=!1}function gd(n){xi===null?xi=[n]:xi.push(n)}var _w=Me.ReactCurrentBatchConfig;function iu(n,o,u){if(n=u.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,n));var g=f,_=""+n;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===_?o.ref:(o=function(S){var N=g.refs;S===null?delete N[_]:N[_]=S},o._stringRef=_,o)}if(typeof n!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,n))}return n}function vc(n,o){throw n=Object.prototype.toString.call(o),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n))}function mp(n){var o=n._init;return o(n._payload)}function pp(n){function o(G,U){if(n){var K=G.deletions;K===null?(G.deletions=[U],G.flags|=16):K.push(U)}}function u(G,U){if(!n)return null;for(;U!==null;)o(G,U),U=U.sibling;return null}function f(G,U){for(G=new Map;U!==null;)U.key!==null?G.set(U.key,U):G.set(U.index,U),U=U.sibling;return G}function g(G,U){return G=Co(G,U),G.index=0,G.sibling=null,G}function _(G,U,K){return G.index=K,n?(K=G.alternate,K!==null?(K=K.index,K<U?(G.flags|=2,U):K):(G.flags|=2,U)):(G.flags|=1048576,U)}function S(G){return n&&G.alternate===null&&(G.flags|=2),G}function N(G,U,K,de){return U===null||U.tag!==6?(U=lf(K,G.mode,de),U.return=G,U):(U=g(U,K),U.return=G,U)}function F(G,U,K,de){var Re=K.type;return Re===j?le(G,U,K.props.children,de,K.key):U!==null&&(U.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===fe&&mp(Re)===U.type)?(de=g(U,K.props),de.ref=iu(G,U,K),de.return=G,de):(de=Wc(K.type,K.key,K.props,null,G.mode,de),de.ref=iu(G,U,K),de.return=G,de)}function X(G,U,K,de){return U===null||U.tag!==4||U.stateNode.containerInfo!==K.containerInfo||U.stateNode.implementation!==K.implementation?(U=uf(K,G.mode,de),U.return=G,U):(U=g(U,K.children||[]),U.return=G,U)}function le(G,U,K,de,Re){return U===null||U.tag!==7?(U=Sa(K,G.mode,de,Re),U.return=G,U):(U=g(U,K),U.return=G,U)}function ue(G,U,K){if(typeof U=="string"&&U!==""||typeof U=="number")return U=lf(""+U,G.mode,K),U.return=G,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case He:return K=Wc(U.type,U.key,U.props,null,G.mode,K),K.ref=iu(G,null,U),K.return=G,K;case Ne:return U=uf(U,G.mode,K),U.return=G,U;case fe:var de=U._init;return ue(G,de(U._payload),K)}if(St(U)||Ee(U))return U=Sa(U,G.mode,K,null),U.return=G,U;vc(G,U)}return null}function ae(G,U,K,de){var Re=U!==null?U.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return Re!==null?null:N(G,U,""+K,de);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case He:return K.key===Re?F(G,U,K,de):null;case Ne:return K.key===Re?X(G,U,K,de):null;case fe:return Re=K._init,ae(G,U,Re(K._payload),de)}if(St(K)||Ee(K))return Re!==null?null:le(G,U,K,de,null);vc(G,K)}return null}function Ie(G,U,K,de,Re){if(typeof de=="string"&&de!==""||typeof de=="number")return G=G.get(K)||null,N(U,G,""+de,Re);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case He:return G=G.get(de.key===null?K:de.key)||null,F(U,G,de,Re);case Ne:return G=G.get(de.key===null?K:de.key)||null,X(U,G,de,Re);case fe:var ze=de._init;return Ie(G,U,K,ze(de._payload),Re)}if(St(de)||Ee(de))return G=G.get(K)||null,le(U,G,de,Re,null);vc(U,de)}return null}function Ae(G,U,K,de){for(var Re=null,ze=null,Fe=U,qe=U=0,pn=null;Fe!==null&&qe<K.length;qe++){Fe.index>qe?(pn=Fe,Fe=null):pn=Fe.sibling;var pt=ae(G,Fe,K[qe],de);if(pt===null){Fe===null&&(Fe=pn);break}n&&Fe&&pt.alternate===null&&o(G,Fe),U=_(pt,U,qe),ze===null?Re=pt:ze.sibling=pt,ze=pt,Fe=pn}if(qe===K.length)return u(G,Fe),Dt&&_a(G,qe),Re;if(Fe===null){for(;qe<K.length;qe++)Fe=ue(G,K[qe],de),Fe!==null&&(U=_(Fe,U,qe),ze===null?Re=Fe:ze.sibling=Fe,ze=Fe);return Dt&&_a(G,qe),Re}for(Fe=f(G,Fe);qe<K.length;qe++)pn=Ie(Fe,G,qe,K[qe],de),pn!==null&&(n&&pn.alternate!==null&&Fe.delete(pn.key===null?qe:pn.key),U=_(pn,U,qe),ze===null?Re=pn:ze.sibling=pn,ze=pn);return n&&Fe.forEach(function(Ao){return o(G,Ao)}),Dt&&_a(G,qe),Re}function ke(G,U,K,de){var Re=Ee(K);if(typeof Re!="function")throw Error(t(150));if(K=Re.call(K),K==null)throw Error(t(151));for(var ze=Re=null,Fe=U,qe=U=0,pn=null,pt=K.next();Fe!==null&&!pt.done;qe++,pt=K.next()){Fe.index>qe?(pn=Fe,Fe=null):pn=Fe.sibling;var Ao=ae(G,Fe,pt.value,de);if(Ao===null){Fe===null&&(Fe=pn);break}n&&Fe&&Ao.alternate===null&&o(G,Fe),U=_(Ao,U,qe),ze===null?Re=Ao:ze.sibling=Ao,ze=Ao,Fe=pn}if(pt.done)return u(G,Fe),Dt&&_a(G,qe),Re;if(Fe===null){for(;!pt.done;qe++,pt=K.next())pt=ue(G,pt.value,de),pt!==null&&(U=_(pt,U,qe),ze===null?Re=pt:ze.sibling=pt,ze=pt);return Dt&&_a(G,qe),Re}for(Fe=f(G,Fe);!pt.done;qe++,pt=K.next())pt=Ie(Fe,G,qe,pt.value,de),pt!==null&&(n&&pt.alternate!==null&&Fe.delete(pt.key===null?qe:pt.key),U=_(pt,U,qe),ze===null?Re=pt:ze.sibling=pt,ze=pt);return n&&Fe.forEach(function(Qw){return o(G,Qw)}),Dt&&_a(G,qe),Re}function Zt(G,U,K,de){if(typeof K=="object"&&K!==null&&K.type===j&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case He:e:{for(var Re=K.key,ze=U;ze!==null;){if(ze.key===Re){if(Re=K.type,Re===j){if(ze.tag===7){u(G,ze.sibling),U=g(ze,K.props.children),U.return=G,G=U;break e}}else if(ze.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===fe&&mp(Re)===ze.type){u(G,ze.sibling),U=g(ze,K.props),U.ref=iu(G,ze,K),U.return=G,G=U;break e}u(G,ze);break}else o(G,ze);ze=ze.sibling}K.type===j?(U=Sa(K.props.children,G.mode,de,K.key),U.return=G,G=U):(de=Wc(K.type,K.key,K.props,null,G.mode,de),de.ref=iu(G,U,K),de.return=G,G=de)}return S(G);case Ne:e:{for(ze=K.key;U!==null;){if(U.key===ze)if(U.tag===4&&U.stateNode.containerInfo===K.containerInfo&&U.stateNode.implementation===K.implementation){u(G,U.sibling),U=g(U,K.children||[]),U.return=G,G=U;break e}else{u(G,U);break}else o(G,U);U=U.sibling}U=uf(K,G.mode,de),U.return=G,G=U}return S(G);case fe:return ze=K._init,Zt(G,U,ze(K._payload),de)}if(St(K))return Ae(G,U,K,de);if(Ee(K))return ke(G,U,K,de);vc(G,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,U!==null&&U.tag===6?(u(G,U.sibling),U=g(U,K),U.return=G,G=U):(u(G,U),U=lf(K,G.mode,de),U.return=G,G=U),S(G)):u(G,U)}return Zt}var al=pp(!0),gp=pp(!1),wc=yo(null),Ec=null,ll=null,_d=null;function yd(){_d=ll=Ec=null}function vd(n){var o=wc.current;Nt(wc),n._currentValue=o}function wd(n,o,u){for(;n!==null;){var f=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),n===u)break;n=n.return}}function ul(n,o){Ec=n,_d=ll=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&o)!==0&&(xr=!0),n.firstContext=null)}function hi(n){var o=n._currentValue;if(_d!==n)if(n={context:n,memoizedValue:o,next:null},ll===null){if(Ec===null)throw Error(t(308));ll=n,Ec.dependencies={lanes:0,firstContext:n}}else ll=ll.next=n;return o}var ya=null;function Ed(n){ya===null?ya=[n]:ya.push(n)}function _p(n,o,u,f){var g=o.interleaved;return g===null?(u.next=u,Ed(o)):(u.next=g.next,g.next=u),o.interleaved=u,Ds(n,f)}function Ds(n,o){n.lanes|=o;var u=n.alternate;for(u!==null&&(u.lanes|=o),u=n,n=n.return;n!==null;)n.childLanes|=o,u=n.alternate,u!==null&&(u.childLanes|=o),u=n,n=n.return;return u.tag===3?u.stateNode:null}var Eo=!1;function Td(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yp(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Os(n,o){return{eventTime:n,lane:o,tag:0,payload:null,callback:null,next:null}}function To(n,o,u){var f=n.updateQueue;if(f===null)return null;if(f=f.shared,(dt&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,Ds(n,u)}return g=f.interleaved,g===null?(o.next=o,Ed(f)):(o.next=g.next,g.next=o),f.interleaved=o,Ds(n,u)}function Tc(n,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var f=o.lanes;f&=n.pendingLanes,u|=f,o.lanes=u,Nr(n,u)}}function vp(n,o){var u=n.updateQueue,f=n.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};_===null?g=_=S:_=_.next=S,u=u.next}while(u!==null);_===null?g=_=o:_=_.next=o}else g=_=o;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:f.shared,effects:f.effects},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=o:n.next=o,u.lastBaseUpdate=o}function xc(n,o,u,f){var g=n.updateQueue;Eo=!1;var _=g.firstBaseUpdate,S=g.lastBaseUpdate,N=g.shared.pending;if(N!==null){g.shared.pending=null;var F=N,X=F.next;F.next=null,S===null?_=X:S.next=X,S=F;var le=n.alternate;le!==null&&(le=le.updateQueue,N=le.lastBaseUpdate,N!==S&&(N===null?le.firstBaseUpdate=X:N.next=X,le.lastBaseUpdate=F))}if(_!==null){var ue=g.baseState;S=0,le=X=F=null,N=_;do{var ae=N.lane,Ie=N.eventTime;if((f&ae)===ae){le!==null&&(le=le.next={eventTime:Ie,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var Ae=n,ke=N;switch(ae=o,Ie=u,ke.tag){case 1:if(Ae=ke.payload,typeof Ae=="function"){ue=Ae.call(Ie,ue,ae);break e}ue=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=ke.payload,ae=typeof Ae=="function"?Ae.call(Ie,ue,ae):Ae,ae==null)break e;ue=re({},ue,ae);break e;case 2:Eo=!0}}N.callback!==null&&N.lane!==0&&(n.flags|=64,ae=g.effects,ae===null?g.effects=[N]:ae.push(N))}else Ie={eventTime:Ie,lane:ae,tag:N.tag,payload:N.payload,callback:N.callback,next:null},le===null?(X=le=Ie,F=ue):le=le.next=Ie,S|=ae;if(N=N.next,N===null){if(N=g.shared.pending,N===null)break;ae=N,N=ae.next,ae.next=null,g.lastBaseUpdate=ae,g.shared.pending=null}}while(!0);if(le===null&&(F=ue),g.baseState=F,g.firstBaseUpdate=X,g.lastBaseUpdate=le,o=g.shared.interleaved,o!==null){g=o;do S|=g.lane,g=g.next;while(g!==o)}else _===null&&(g.shared.lanes=0);Ea|=S,n.lanes=S,n.memoizedState=ue}}function wp(n,o,u){if(n=o.effects,o.effects=null,n!==null)for(o=0;o<n.length;o++){var f=n[o],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var su={},Qi=yo(su),ou=yo(su),au=yo(su);function va(n){if(n===su)throw Error(t(174));return n}function xd(n,o){switch(Ct(au,o),Ct(ou,n),Ct(Qi,su),n=o.nodeType,n){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:gi(null,"");break;default:n=n===8?o.parentNode:o,o=n.namespaceURI||null,n=n.tagName,o=gi(o,n)}Nt(Qi),Ct(Qi,o)}function cl(){Nt(Qi),Nt(ou),Nt(au)}function Ep(n){va(au.current);var o=va(Qi.current),u=gi(o,n.type);o!==u&&(Ct(ou,n),Ct(Qi,u))}function Id(n){ou.current===n&&(Nt(Qi),Nt(ou))}var Ft=yo(0);function Ic(n){for(var o=n;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Sd=[];function Pd(){for(var n=0;n<Sd.length;n++)Sd[n]._workInProgressVersionPrimary=null;Sd.length=0}var Sc=Me.ReactCurrentDispatcher,bd=Me.ReactCurrentBatchConfig,wa=0,jt=null,an=null,fn=null,Pc=!1,lu=!1,uu=0,yw=0;function Fn(){throw Error(t(321))}function Cd(n,o){if(o===null)return!1;for(var u=0;u<o.length&&u<n.length;u++)if(!Or(n[u],o[u]))return!1;return!0}function Ad(n,o,u,f,g,_){if(wa=_,jt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Sc.current=n===null||n.memoizedState===null?Tw:xw,n=u(f,g),lu){_=0;do{if(lu=!1,uu=0,25<=_)throw Error(t(301));_+=1,fn=an=null,o.updateQueue=null,Sc.current=Iw,n=u(f,g)}while(lu)}if(Sc.current=Ac,o=an!==null&&an.next!==null,wa=0,fn=an=jt=null,Pc=!1,o)throw Error(t(300));return n}function kd(){var n=uu!==0;return uu=0,n}function Yi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?jt.memoizedState=fn=n:fn=fn.next=n,fn}function di(){if(an===null){var n=jt.alternate;n=n!==null?n.memoizedState:null}else n=an.next;var o=fn===null?jt.memoizedState:fn.next;if(o!==null)fn=o,an=n;else{if(n===null)throw Error(t(310));an=n,n={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},fn===null?jt.memoizedState=fn=n:fn=fn.next=n}return fn}function cu(n,o){return typeof o=="function"?o(n):o}function Rd(n){var o=di(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var f=an,g=f.baseQueue,_=u.pending;if(_!==null){if(g!==null){var S=g.next;g.next=_.next,_.next=S}f.baseQueue=g=_,u.pending=null}if(g!==null){_=g.next,f=f.baseState;var N=S=null,F=null,X=_;do{var le=X.lane;if((wa&le)===le)F!==null&&(F=F.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),f=X.hasEagerState?X.eagerState:n(f,X.action);else{var ue={lane:le,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};F===null?(N=F=ue,S=f):F=F.next=ue,jt.lanes|=le,Ea|=le}X=X.next}while(X!==null&&X!==_);F===null?S=f:F.next=N,Or(f,o.memoizedState)||(xr=!0),o.memoizedState=f,o.baseState=S,o.baseQueue=F,u.lastRenderedState=f}if(n=u.interleaved,n!==null){g=n;do _=g.lane,jt.lanes|=_,Ea|=_,g=g.next;while(g!==n)}else g===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Nd(n){var o=di(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var f=u.dispatch,g=u.pending,_=o.memoizedState;if(g!==null){u.pending=null;var S=g=g.next;do _=n(_,S.action),S=S.next;while(S!==g);Or(_,o.memoizedState)||(xr=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),u.lastRenderedState=_}return[_,f]}function Tp(){}function xp(n,o){var u=jt,f=di(),g=o(),_=!Or(f.memoizedState,g);if(_&&(f.memoizedState=g,xr=!0),f=f.queue,Ld(Pp.bind(null,u,f,n),[n]),f.getSnapshot!==o||_||fn!==null&&fn.memoizedState.tag&1){if(u.flags|=2048,hu(9,Sp.bind(null,u,f,g,o),void 0,null),mn===null)throw Error(t(349));(wa&30)!==0||Ip(u,o,g)}return g}function Ip(n,o,u){n.flags|=16384,n={getSnapshot:o,value:u},o=jt.updateQueue,o===null?(o={lastEffect:null,stores:null},jt.updateQueue=o,o.stores=[n]):(u=o.stores,u===null?o.stores=[n]:u.push(n))}function Sp(n,o,u,f){o.value=u,o.getSnapshot=f,bp(o)&&Cp(n)}function Pp(n,o,u){return u(function(){bp(o)&&Cp(n)})}function bp(n){var o=n.getSnapshot;n=n.value;try{var u=o();return!Or(n,u)}catch{return!0}}function Cp(n){var o=Ds(n,1);o!==null&&bi(o,n,1,-1)}function Ap(n){var o=Yi();return typeof n=="function"&&(n=n()),o.memoizedState=o.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cu,lastRenderedState:n},o.queue=n,n=n.dispatch=Ew.bind(null,jt,n),[o.memoizedState,n]}function hu(n,o,u,f){return n={tag:n,create:o,destroy:u,deps:f,next:null},o=jt.updateQueue,o===null?(o={lastEffect:null,stores:null},jt.updateQueue=o,o.lastEffect=n.next=n):(u=o.lastEffect,u===null?o.lastEffect=n.next=n:(f=u.next,u.next=n,n.next=f,o.lastEffect=n)),n}function kp(){return di().memoizedState}function bc(n,o,u,f){var g=Yi();jt.flags|=n,g.memoizedState=hu(1|o,u,void 0,f===void 0?null:f)}function Cc(n,o,u,f){var g=di();f=f===void 0?null:f;var _=void 0;if(an!==null){var S=an.memoizedState;if(_=S.destroy,f!==null&&Cd(f,S.deps)){g.memoizedState=hu(o,u,_,f);return}}jt.flags|=n,g.memoizedState=hu(1|o,u,_,f)}function Rp(n,o){return bc(8390656,8,n,o)}function Ld(n,o){return Cc(2048,8,n,o)}function Np(n,o){return Cc(4,2,n,o)}function Lp(n,o){return Cc(4,4,n,o)}function Mp(n,o){if(typeof o=="function")return n=n(),o(n),function(){o(null)};if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function Dp(n,o,u){return u=u!=null?u.concat([n]):null,Cc(4,4,Mp.bind(null,o,n),u)}function Md(){}function Op(n,o){var u=di();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Cd(o,f[1])?f[0]:(u.memoizedState=[n,o],n)}function Vp(n,o){var u=di();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Cd(o,f[1])?f[0]:(n=n(),u.memoizedState=[n,o],n)}function zp(n,o,u){return(wa&21)===0?(n.baseState&&(n.baseState=!1,xr=!0),n.memoizedState=u):(Or(u,o)||(u=ra(),jt.lanes|=u,Ea|=u,n.baseState=!0),o)}function vw(n,o){var u=et;et=u!==0&&4>u?u:4,n(!0);var f=bd.transition;bd.transition={};try{n(!1),o()}finally{et=u,bd.transition=f}}function Fp(){return di().memoizedState}function ww(n,o,u){var f=Po(n);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},jp(n))Bp(o,u);else if(u=_p(n,o,u,f),u!==null){var g=ir();bi(u,n,f,g),Up(u,o,f)}}function Ew(n,o,u){var f=Po(n),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(jp(n))Bp(o,g);else{var _=n.alternate;if(n.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var S=o.lastRenderedState,N=_(S,u);if(g.hasEagerState=!0,g.eagerState=N,Or(N,S)){var F=o.interleaved;F===null?(g.next=g,Ed(o)):(g.next=F.next,F.next=g),o.interleaved=g;return}}catch{}finally{}u=_p(n,o,g,f),u!==null&&(g=ir(),bi(u,n,f,g),Up(u,o,f))}}function jp(n){var o=n.alternate;return n===jt||o!==null&&o===jt}function Bp(n,o){lu=Pc=!0;var u=n.pending;u===null?o.next=o:(o.next=u.next,u.next=o),n.pending=o}function Up(n,o,u){if((u&4194240)!==0){var f=o.lanes;f&=n.pendingLanes,u|=f,o.lanes=u,Nr(n,u)}}var Ac={readContext:hi,useCallback:Fn,useContext:Fn,useEffect:Fn,useImperativeHandle:Fn,useInsertionEffect:Fn,useLayoutEffect:Fn,useMemo:Fn,useReducer:Fn,useRef:Fn,useState:Fn,useDebugValue:Fn,useDeferredValue:Fn,useTransition:Fn,useMutableSource:Fn,useSyncExternalStore:Fn,useId:Fn,unstable_isNewReconciler:!1},Tw={readContext:hi,useCallback:function(n,o){return Yi().memoizedState=[n,o===void 0?null:o],n},useContext:hi,useEffect:Rp,useImperativeHandle:function(n,o,u){return u=u!=null?u.concat([n]):null,bc(4194308,4,Mp.bind(null,o,n),u)},useLayoutEffect:function(n,o){return bc(4194308,4,n,o)},useInsertionEffect:function(n,o){return bc(4,2,n,o)},useMemo:function(n,o){var u=Yi();return o=o===void 0?null:o,n=n(),u.memoizedState=[n,o],n},useReducer:function(n,o,u){var f=Yi();return o=u!==void 0?u(o):o,f.memoizedState=f.baseState=o,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:o},f.queue=n,n=n.dispatch=ww.bind(null,jt,n),[f.memoizedState,n]},useRef:function(n){var o=Yi();return n={current:n},o.memoizedState=n},useState:Ap,useDebugValue:Md,useDeferredValue:function(n){return Yi().memoizedState=n},useTransition:function(){var n=Ap(!1),o=n[0];return n=vw.bind(null,n[1]),Yi().memoizedState=n,[o,n]},useMutableSource:function(){},useSyncExternalStore:function(n,o,u){var f=jt,g=Yi();if(Dt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),mn===null)throw Error(t(349));(wa&30)!==0||Ip(f,o,u)}g.memoizedState=u;var _={value:u,getSnapshot:o};return g.queue=_,Rp(Pp.bind(null,f,_,n),[n]),f.flags|=2048,hu(9,Sp.bind(null,f,_,u,o),void 0,null),u},useId:function(){var n=Yi(),o=mn.identifierPrefix;if(Dt){var u=Ms,f=Ls;u=(f&~(1<<32-Ze(f)-1)).toString(32)+u,o=":"+o+"R"+u,u=uu++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=yw++,o=":"+o+"r"+u.toString(32)+":";return n.memoizedState=o},unstable_isNewReconciler:!1},xw={readContext:hi,useCallback:Op,useContext:hi,useEffect:Ld,useImperativeHandle:Dp,useInsertionEffect:Np,useLayoutEffect:Lp,useMemo:Vp,useReducer:Rd,useRef:kp,useState:function(){return Rd(cu)},useDebugValue:Md,useDeferredValue:function(n){var o=di();return zp(o,an.memoizedState,n)},useTransition:function(){var n=Rd(cu)[0],o=di().memoizedState;return[n,o]},useMutableSource:Tp,useSyncExternalStore:xp,useId:Fp,unstable_isNewReconciler:!1},Iw={readContext:hi,useCallback:Op,useContext:hi,useEffect:Ld,useImperativeHandle:Dp,useInsertionEffect:Np,useLayoutEffect:Lp,useMemo:Vp,useReducer:Nd,useRef:kp,useState:function(){return Nd(cu)},useDebugValue:Md,useDeferredValue:function(n){var o=di();return an===null?o.memoizedState=n:zp(o,an.memoizedState,n)},useTransition:function(){var n=Nd(cu)[0],o=di().memoizedState;return[n,o]},useMutableSource:Tp,useSyncExternalStore:xp,useId:Fp,unstable_isNewReconciler:!1};function Ii(n,o){if(n&&n.defaultProps){o=re({},o),n=n.defaultProps;for(var u in n)o[u]===void 0&&(o[u]=n[u]);return o}return o}function Dd(n,o,u,f){o=n.memoizedState,u=u(f,o),u=u==null?o:re({},o,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var kc={isMounted:function(n){return(n=n._reactInternals)?pr(n)===n:!1},enqueueSetState:function(n,o,u){n=n._reactInternals;var f=ir(),g=Po(n),_=Os(f,g);_.payload=o,u!=null&&(_.callback=u),o=To(n,_,g),o!==null&&(bi(o,n,g,f),Tc(o,n,g))},enqueueReplaceState:function(n,o,u){n=n._reactInternals;var f=ir(),g=Po(n),_=Os(f,g);_.tag=1,_.payload=o,u!=null&&(_.callback=u),o=To(n,_,g),o!==null&&(bi(o,n,g,f),Tc(o,n,g))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var u=ir(),f=Po(n),g=Os(u,f);g.tag=2,o!=null&&(g.callback=o),o=To(n,g,f),o!==null&&(bi(o,n,f,u),Tc(o,n,f))}};function Wp(n,o,u,f,g,_,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(f,_,S):o.prototype&&o.prototype.isPureReactComponent?!$i(u,f)||!$i(g,_):!0}function Hp(n,o,u){var f=!1,g=vo,_=o.contextType;return typeof _=="object"&&_!==null?_=hi(_):(g=Tr(o)?pa:zn.current,f=o.contextTypes,_=(f=f!=null)?rl(n,g):vo),o=new o(u,_),n.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=kc,n.stateNode=o,o._reactInternals=n,f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=_),o}function qp(n,o,u,f){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==n&&kc.enqueueReplaceState(o,o.state,null)}function Od(n,o,u,f){var g=n.stateNode;g.props=u,g.state=n.memoizedState,g.refs={},Td(n);var _=o.contextType;typeof _=="object"&&_!==null?g.context=hi(_):(_=Tr(o)?pa:zn.current,g.context=rl(n,_)),g.state=n.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Dd(n,o,_,u),g.state=n.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&kc.enqueueReplaceState(g,g.state,null),xc(n,u,g,f),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function hl(n,o){try{var u="",f=o;do u+=Te(f),f=f.return;while(f);var g=u}catch(_){g=`
Error generating stack: `+_.message+`
`+_.stack}return{value:n,source:o,stack:g,digest:null}}function Vd(n,o,u){return{value:n,source:null,stack:u??null,digest:o??null}}function zd(n,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var Sw=typeof WeakMap=="function"?WeakMap:Map;function $p(n,o,u){u=Os(-1,u),u.tag=3,u.payload={element:null};var f=o.value;return u.callback=function(){Vc||(Vc=!0,Jd=f),zd(n,o)},u}function Gp(n,o,u){u=Os(-1,u),u.tag=3;var f=n.type.getDerivedStateFromError;if(typeof f=="function"){var g=o.value;u.payload=function(){return f(g)},u.callback=function(){zd(n,o)}}var _=n.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(u.callback=function(){zd(n,o),typeof f!="function"&&(Io===null?Io=new Set([this]):Io.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})}),u}function Zp(n,o,u){var f=n.pingCache;if(f===null){f=n.pingCache=new Sw;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(u)||(g.add(u),n=Fw.bind(null,n,o,u),o.then(n,n))}function Kp(n){do{var o;if((o=n.tag===13)&&(o=n.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return n;n=n.return}while(n!==null);return null}function Qp(n,o,u,f,g){return(n.mode&1)===0?(n===o?n.flags|=65536:(n.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Os(-1,1),o.tag=2,To(u,o,1))),u.lanes|=1),n):(n.flags|=65536,n.lanes=g,n)}var Pw=Me.ReactCurrentOwner,xr=!1;function rr(n,o,u,f){o.child=n===null?gp(o,null,u,f):al(o,n.child,u,f)}function Yp(n,o,u,f,g){u=u.render;var _=o.ref;return ul(o,g),f=Ad(n,o,u,f,_,g),u=kd(),n!==null&&!xr?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~g,Vs(n,o,g)):(Dt&&u&&dd(o),o.flags|=1,rr(n,o,f,g),o.child)}function Xp(n,o,u,f,g){if(n===null){var _=u.type;return typeof _=="function"&&!af(_)&&_.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=_,Jp(n,o,_,f,g)):(n=Wc(u.type,null,f,o,o.mode,g),n.ref=o.ref,n.return=o,o.child=n)}if(_=n.child,(n.lanes&g)===0){var S=_.memoizedProps;if(u=u.compare,u=u!==null?u:$i,u(S,f)&&n.ref===o.ref)return Vs(n,o,g)}return o.flags|=1,n=Co(_,f),n.ref=o.ref,n.return=o,o.child=n}function Jp(n,o,u,f,g){if(n!==null){var _=n.memoizedProps;if($i(_,f)&&n.ref===o.ref)if(xr=!1,o.pendingProps=f=_,(n.lanes&g)!==0)(n.flags&131072)!==0&&(xr=!0);else return o.lanes=n.lanes,Vs(n,o,g)}return Fd(n,o,u,f,g)}function eg(n,o,u){var f=o.pendingProps,g=f.children,_=n!==null?n.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ct(fl,jr),jr|=u;else{if((u&1073741824)===0)return n=_!==null?_.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:n,cachePool:null,transitions:null},o.updateQueue=null,Ct(fl,jr),jr|=n,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=_!==null?_.baseLanes:u,Ct(fl,jr),jr|=f}else _!==null?(f=_.baseLanes|u,o.memoizedState=null):f=u,Ct(fl,jr),jr|=f;return rr(n,o,g,u),o.child}function tg(n,o){var u=o.ref;(n===null&&u!==null||n!==null&&n.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Fd(n,o,u,f,g){var _=Tr(u)?pa:zn.current;return _=rl(o,_),ul(o,g),u=Ad(n,o,u,f,_,g),f=kd(),n!==null&&!xr?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~g,Vs(n,o,g)):(Dt&&f&&dd(o),o.flags|=1,rr(n,o,u,g),o.child)}function ng(n,o,u,f,g){if(Tr(u)){var _=!0;mc(o)}else _=!1;if(ul(o,g),o.stateNode===null)Nc(n,o),Hp(o,u,f),Od(o,u,f,g),f=!0;else if(n===null){var S=o.stateNode,N=o.memoizedProps;S.props=N;var F=S.context,X=u.contextType;typeof X=="object"&&X!==null?X=hi(X):(X=Tr(u)?pa:zn.current,X=rl(o,X));var le=u.getDerivedStateFromProps,ue=typeof le=="function"||typeof S.getSnapshotBeforeUpdate=="function";ue||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(N!==f||F!==X)&&qp(o,S,f,X),Eo=!1;var ae=o.memoizedState;S.state=ae,xc(o,f,S,g),F=o.memoizedState,N!==f||ae!==F||Er.current||Eo?(typeof le=="function"&&(Dd(o,u,le,f),F=o.memoizedState),(N=Eo||Wp(o,u,N,f,ae,F,X))?(ue||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=F),S.props=f,S.state=F,S.context=X,f=N):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{S=o.stateNode,yp(n,o),N=o.memoizedProps,X=o.type===o.elementType?N:Ii(o.type,N),S.props=X,ue=o.pendingProps,ae=S.context,F=u.contextType,typeof F=="object"&&F!==null?F=hi(F):(F=Tr(u)?pa:zn.current,F=rl(o,F));var Ie=u.getDerivedStateFromProps;(le=typeof Ie=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(N!==ue||ae!==F)&&qp(o,S,f,F),Eo=!1,ae=o.memoizedState,S.state=ae,xc(o,f,S,g);var Ae=o.memoizedState;N!==ue||ae!==Ae||Er.current||Eo?(typeof Ie=="function"&&(Dd(o,u,Ie,f),Ae=o.memoizedState),(X=Eo||Wp(o,u,X,f,ae,Ae,F)||!1)?(le||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,Ae,F),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,Ae,F)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||N===n.memoizedProps&&ae===n.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||N===n.memoizedProps&&ae===n.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=Ae),S.props=f,S.state=Ae,S.context=F,f=X):(typeof S.componentDidUpdate!="function"||N===n.memoizedProps&&ae===n.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||N===n.memoizedProps&&ae===n.memoizedState||(o.flags|=1024),f=!1)}return jd(n,o,u,f,_,g)}function jd(n,o,u,f,g,_){tg(n,o);var S=(o.flags&128)!==0;if(!f&&!S)return g&&ap(o,u,!1),Vs(n,o,_);f=o.stateNode,Pw.current=o;var N=S&&typeof u.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,n!==null&&S?(o.child=al(o,n.child,null,_),o.child=al(o,null,N,_)):rr(n,o,N,_),o.memoizedState=f.state,g&&ap(o,u,!0),o.child}function rg(n){var o=n.stateNode;o.pendingContext?sp(n,o.pendingContext,o.pendingContext!==o.context):o.context&&sp(n,o.context,!1),xd(n,o.containerInfo)}function ig(n,o,u,f,g){return ol(),gd(g),o.flags|=256,rr(n,o,u,f),o.child}var Bd={dehydrated:null,treeContext:null,retryLane:0};function Ud(n){return{baseLanes:n,cachePool:null,transitions:null}}function sg(n,o,u){var f=o.pendingProps,g=Ft.current,_=!1,S=(o.flags&128)!==0,N;if((N=S)||(N=n!==null&&n.memoizedState===null?!1:(g&2)!==0),N?(_=!0,o.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),Ct(Ft,g&1),n===null)return pd(o),n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((o.mode&1)===0?o.lanes=1:n.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(S=f.children,n=f.fallback,_?(f=o.mode,_=o.child,S={mode:"hidden",children:S},(f&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=S):_=Hc(S,f,0,null),n=Sa(n,f,u,null),_.return=o,n.return=o,_.sibling=n,o.child=_,o.child.memoizedState=Ud(u),o.memoizedState=Bd,n):Wd(o,S));if(g=n.memoizedState,g!==null&&(N=g.dehydrated,N!==null))return bw(n,o,S,f,N,g,u);if(_){_=f.fallback,S=o.mode,g=n.child,N=g.sibling;var F={mode:"hidden",children:f.children};return(S&1)===0&&o.child!==g?(f=o.child,f.childLanes=0,f.pendingProps=F,o.deletions=null):(f=Co(g,F),f.subtreeFlags=g.subtreeFlags&14680064),N!==null?_=Co(N,_):(_=Sa(_,S,u,null),_.flags|=2),_.return=o,f.return=o,f.sibling=_,o.child=f,f=_,_=o.child,S=n.child.memoizedState,S=S===null?Ud(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},_.memoizedState=S,_.childLanes=n.childLanes&~u,o.memoizedState=Bd,f}return _=n.child,n=_.sibling,f=Co(_,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=u),f.return=o,f.sibling=null,n!==null&&(u=o.deletions,u===null?(o.deletions=[n],o.flags|=16):u.push(n)),o.child=f,o.memoizedState=null,f}function Wd(n,o){return o=Hc({mode:"visible",children:o},n.mode,0,null),o.return=n,n.child=o}function Rc(n,o,u,f){return f!==null&&gd(f),al(o,n.child,null,u),n=Wd(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function bw(n,o,u,f,g,_,S){if(u)return o.flags&256?(o.flags&=-257,f=Vd(Error(t(422))),Rc(n,o,S,f)):o.memoizedState!==null?(o.child=n.child,o.flags|=128,null):(_=f.fallback,g=o.mode,f=Hc({mode:"visible",children:f.children},g,0,null),_=Sa(_,g,S,null),_.flags|=2,f.return=o,_.return=o,f.sibling=_,o.child=f,(o.mode&1)!==0&&al(o,n.child,null,S),o.child.memoizedState=Ud(S),o.memoizedState=Bd,_);if((o.mode&1)===0)return Rc(n,o,S,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var N=f.dgst;return f=N,_=Error(t(419)),f=Vd(_,f,void 0),Rc(n,o,S,f)}if(N=(S&n.childLanes)!==0,xr||N){if(f=mn,f!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|S))!==0?0:g,g!==0&&g!==_.retryLane&&(_.retryLane=g,Ds(n,g),bi(f,n,g,-1))}return of(),f=Vd(Error(t(421))),Rc(n,o,S,f)}return g.data==="$?"?(o.flags|=128,o.child=n.child,o=jw.bind(null,n),g._reactRetry=o,null):(n=_.treeContext,Fr=Ki(g.nextSibling),zr=o,Dt=!0,xi=null,n!==null&&(ui[ci++]=Ls,ui[ci++]=Ms,ui[ci++]=ga,Ls=n.id,Ms=n.overflow,ga=o),o=Wd(o,f.children),o.flags|=4096,o)}function og(n,o,u){n.lanes|=o;var f=n.alternate;f!==null&&(f.lanes|=o),wd(n.return,o,u)}function Hd(n,o,u,f,g){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=u,_.tailMode=g)}function ag(n,o,u){var f=o.pendingProps,g=f.revealOrder,_=f.tail;if(rr(n,o,f.children,u),f=Ft.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&og(n,u,o);else if(n.tag===19)og(n,u,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}f&=1}if(Ct(Ft,f),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(u=o.child,g=null;u!==null;)n=u.alternate,n!==null&&Ic(n)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),Hd(o,!1,g,u,_);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(n=g.alternate,n!==null&&Ic(n)===null){o.child=g;break}n=g.sibling,g.sibling=u,u=g,g=n}Hd(o,!0,u,null,_);break;case"together":Hd(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Nc(n,o){(o.mode&1)===0&&n!==null&&(n.alternate=null,o.alternate=null,o.flags|=2)}function Vs(n,o,u){if(n!==null&&(o.dependencies=n.dependencies),Ea|=o.lanes,(u&o.childLanes)===0)return null;if(n!==null&&o.child!==n.child)throw Error(t(153));if(o.child!==null){for(n=o.child,u=Co(n,n.pendingProps),o.child=u,u.return=o;n.sibling!==null;)n=n.sibling,u=u.sibling=Co(n,n.pendingProps),u.return=o;u.sibling=null}return o.child}function Cw(n,o,u){switch(o.tag){case 3:rg(o),ol();break;case 5:Ep(o);break;case 1:Tr(o.type)&&mc(o);break;case 4:xd(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,g=o.memoizedProps.value;Ct(wc,f._currentValue),f._currentValue=g;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(Ct(Ft,Ft.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?sg(n,o,u):(Ct(Ft,Ft.current&1),n=Vs(n,o,u),n!==null?n.sibling:null);Ct(Ft,Ft.current&1);break;case 19:if(f=(u&o.childLanes)!==0,(n.flags&128)!==0){if(f)return ag(n,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Ct(Ft,Ft.current),f)break;return null;case 22:case 23:return o.lanes=0,eg(n,o,u)}return Vs(n,o,u)}var lg,qd,ug,cg;lg=function(n,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)n.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},qd=function(){},ug=function(n,o,u,f){var g=n.memoizedProps;if(g!==f){n=o.stateNode,va(Qi.current);var _=null;switch(u){case"input":g=Wr(n,g),f=Wr(n,f),_=[];break;case"select":g=re({},g,{value:void 0}),f=re({},f,{value:void 0}),_=[];break;case"textarea":g=Wt(n,g),f=Wt(n,f),_=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(n.onclick=oe)}Rn(u,f);var S;u=null;for(X in g)if(!f.hasOwnProperty(X)&&g.hasOwnProperty(X)&&g[X]!=null)if(X==="style"){var N=g[X];for(S in N)N.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(a.hasOwnProperty(X)?_||(_=[]):(_=_||[]).push(X,null));for(X in f){var F=f[X];if(N=g!=null?g[X]:void 0,f.hasOwnProperty(X)&&F!==N&&(F!=null||N!=null))if(X==="style")if(N){for(S in N)!N.hasOwnProperty(S)||F&&F.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in F)F.hasOwnProperty(S)&&N[S]!==F[S]&&(u||(u={}),u[S]=F[S])}else u||(_||(_=[]),_.push(X,u)),u=F;else X==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,N=N?N.__html:void 0,F!=null&&N!==F&&(_=_||[]).push(X,F)):X==="children"?typeof F!="string"&&typeof F!="number"||(_=_||[]).push(X,""+F):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(a.hasOwnProperty(X)?(F!=null&&X==="onScroll"&&xt("scroll",n),_||N===F||(_=[])):(_=_||[]).push(X,F))}u&&(_=_||[]).push("style",u);var X=_;(o.updateQueue=X)&&(o.flags|=4)}},cg=function(n,o,u,f){u!==f&&(o.flags|=4)};function du(n,o){if(!Dt)switch(n.tailMode){case"hidden":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:f.sibling=null}}function jn(n){var o=n.alternate!==null&&n.alternate.child===n.child,u=0,f=0;if(o)for(var g=n.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=f,n.childLanes=u,o}function Aw(n,o,u){var f=o.pendingProps;switch(fd(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jn(o),null;case 1:return Tr(o.type)&&fc(),jn(o),null;case 3:return f=o.stateNode,cl(),Nt(Er),Nt(zn),Pd(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(n===null||n.child===null)&&(yc(o)?o.flags|=4:n===null||n.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,xi!==null&&(nf(xi),xi=null))),qd(n,o),jn(o),null;case 5:Id(o);var g=va(au.current);if(u=o.type,n!==null&&o.stateNode!=null)ug(n,o,u,f,g),n.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(t(166));return jn(o),null}if(n=va(Qi.current),yc(o)){f=o.stateNode,u=o.type;var _=o.memoizedProps;switch(f[li]=o,f[go]=_,n=(o.mode&1)!==0,u){case"dialog":xt("cancel",f),xt("close",f);break;case"iframe":case"object":case"embed":xt("load",f);break;case"video":case"audio":for(g=0;g<fo.length;g++)xt(fo[g],f);break;case"source":xt("error",f);break;case"img":case"image":case"link":xt("error",f),xt("load",f);break;case"details":xt("toggle",f);break;case"input":cs(f,_),xt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!_.multiple},xt("invalid",f);break;case"textarea":$n(f,_),xt("invalid",f)}Rn(u,_),g=null;for(var S in _)if(_.hasOwnProperty(S)){var N=_[S];S==="children"?typeof N=="string"?f.textContent!==N&&(_.suppressHydrationWarning!==!0&&Y(f.textContent,N,n),g=["children",N]):typeof N=="number"&&f.textContent!==""+N&&(_.suppressHydrationWarning!==!0&&Y(f.textContent,N,n),g=["children",""+N]):a.hasOwnProperty(S)&&N!=null&&S==="onScroll"&&xt("scroll",f)}switch(u){case"input":Ur(f),Ar(f,_,!0);break;case"textarea":Ur(f),qr(f);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(f.onclick=oe)}f=g,o.updateQueue=f,f!==null&&(o.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=lr(u)),n==="http://www.w3.org/1999/xhtml"?u==="script"?(n=S.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof f.is=="string"?n=S.createElement(u,{is:f.is}):(n=S.createElement(u),u==="select"&&(S=n,f.multiple?S.multiple=!0:f.size&&(S.size=f.size))):n=S.createElementNS(n,u),n[li]=o,n[go]=f,lg(n,o,!1,!1),o.stateNode=n;e:{switch(S=hr(u,f),u){case"dialog":xt("cancel",n),xt("close",n),g=f;break;case"iframe":case"object":case"embed":xt("load",n),g=f;break;case"video":case"audio":for(g=0;g<fo.length;g++)xt(fo[g],n);g=f;break;case"source":xt("error",n),g=f;break;case"img":case"image":case"link":xt("error",n),xt("load",n),g=f;break;case"details":xt("toggle",n),g=f;break;case"input":cs(n,f),g=Wr(n,f),xt("invalid",n);break;case"option":g=f;break;case"select":n._wrapperState={wasMultiple:!!f.multiple},g=re({},f,{value:void 0}),xt("invalid",n);break;case"textarea":$n(n,f),g=Wt(n,f),xt("invalid",n);break;default:g=f}Rn(u,g),N=g;for(_ in N)if(N.hasOwnProperty(_)){var F=N[_];_==="style"?$r(n,F):_==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Mi(n,F)):_==="children"?typeof F=="string"?(u!=="textarea"||F!=="")&&vn(n,F):typeof F=="number"&&vn(n,""+F):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(a.hasOwnProperty(_)?F!=null&&_==="onScroll"&&xt("scroll",n):F!=null&&he(n,_,F,S))}switch(u){case"input":Ur(n),Ar(n,f,!1);break;case"textarea":Ur(n),qr(n);break;case"option":f.value!=null&&n.setAttribute("value",""+Ue(f.value));break;case"select":n.multiple=!!f.multiple,_=f.value,_!=null?yn(n,!!f.multiple,_,!1):f.defaultValue!=null&&yn(n,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=oe)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return jn(o),null;case 6:if(n&&o.stateNode!=null)cg(n,o,n.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(t(166));if(u=va(au.current),va(Qi.current),yc(o)){if(f=o.stateNode,u=o.memoizedProps,f[li]=o,(_=f.nodeValue!==u)&&(n=zr,n!==null))switch(n.tag){case 3:Y(f.nodeValue,u,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Y(f.nodeValue,u,(n.mode&1)!==0)}_&&(o.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[li]=o,o.stateNode=f}return jn(o),null;case 13:if(Nt(Ft),f=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Dt&&Fr!==null&&(o.mode&1)!==0&&(o.flags&128)===0)fp(),ol(),o.flags|=98560,_=!1;else if(_=yc(o),f!==null&&f.dehydrated!==null){if(n===null){if(!_)throw Error(t(318));if(_=o.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[li]=o}else ol(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;jn(o),_=!1}else xi!==null&&(nf(xi),xi=null),_=!0;if(!_)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(f=f!==null,f!==(n!==null&&n.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(n===null||(Ft.current&1)!==0?ln===0&&(ln=3):of())),o.updateQueue!==null&&(o.flags|=4),jn(o),null);case 4:return cl(),qd(n,o),n===null&&mo(o.stateNode.containerInfo),jn(o),null;case 10:return vd(o.type._context),jn(o),null;case 17:return Tr(o.type)&&fc(),jn(o),null;case 19:if(Nt(Ft),_=o.memoizedState,_===null)return jn(o),null;if(f=(o.flags&128)!==0,S=_.rendering,S===null)if(f)du(_,!1);else{if(ln!==0||n!==null&&(n.flags&128)!==0)for(n=o.child;n!==null;){if(S=Ic(n),S!==null){for(o.flags|=128,du(_,!1),f=S.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=u,u=o.child;u!==null;)_=u,n=f,_.flags&=14680066,S=_.alternate,S===null?(_.childLanes=0,_.lanes=n,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=S.childLanes,_.lanes=S.lanes,_.child=S.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=S.memoizedProps,_.memoizedState=S.memoizedState,_.updateQueue=S.updateQueue,_.type=S.type,n=S.dependencies,_.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),u=u.sibling;return Ct(Ft,Ft.current&1|2),o.child}n=n.sibling}_.tail!==null&&It()>ml&&(o.flags|=128,f=!0,du(_,!1),o.lanes=4194304)}else{if(!f)if(n=Ic(S),n!==null){if(o.flags|=128,f=!0,u=n.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),du(_,!0),_.tail===null&&_.tailMode==="hidden"&&!S.alternate&&!Dt)return jn(o),null}else 2*It()-_.renderingStartTime>ml&&u!==1073741824&&(o.flags|=128,f=!0,du(_,!1),o.lanes=4194304);_.isBackwards?(S.sibling=o.child,o.child=S):(u=_.last,u!==null?u.sibling=S:o.child=S,_.last=S)}return _.tail!==null?(o=_.tail,_.rendering=o,_.tail=o.sibling,_.renderingStartTime=It(),o.sibling=null,u=Ft.current,Ct(Ft,f?u&1|2:u&1),o):(jn(o),null);case 22:case 23:return sf(),f=o.memoizedState!==null,n!==null&&n.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(jr&1073741824)!==0&&(jn(o),o.subtreeFlags&6&&(o.flags|=8192)):jn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function kw(n,o){switch(fd(o),o.tag){case 1:return Tr(o.type)&&fc(),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return cl(),Nt(Er),Nt(zn),Pd(),n=o.flags,(n&65536)!==0&&(n&128)===0?(o.flags=n&-65537|128,o):null;case 5:return Id(o),null;case 13:if(Nt(Ft),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(t(340));ol()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return Nt(Ft),null;case 4:return cl(),null;case 10:return vd(o.type._context),null;case 22:case 23:return sf(),null;case 24:return null;default:return null}}var Lc=!1,Bn=!1,Rw=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function dl(n,o){var u=n.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){$t(n,o,f)}else u.current=null}function $d(n,o,u){try{u()}catch(f){$t(n,o,f)}}var hg=!1;function Nw(n,o){if(we=Jr,n=Kl(),Ql(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var S=0,N=-1,F=-1,X=0,le=0,ue=n,ae=null;t:for(;;){for(var Ie;ue!==u||g!==0&&ue.nodeType!==3||(N=S+g),ue!==_||f!==0&&ue.nodeType!==3||(F=S+f),ue.nodeType===3&&(S+=ue.nodeValue.length),(Ie=ue.firstChild)!==null;)ae=ue,ue=Ie;for(;;){if(ue===n)break t;if(ae===u&&++X===g&&(N=S),ae===_&&++le===f&&(F=S),(Ie=ue.nextSibling)!==null)break;ue=ae,ae=ue.parentNode}ue=Ie}u=N===-1||F===-1?null:{start:N,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(De={focusedElem:n,selectionRange:u},Jr=!1,Ce=o;Ce!==null;)if(o=Ce,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,Ce=n;else for(;Ce!==null;){o=Ce;try{var Ae=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Ae!==null){var ke=Ae.memoizedProps,Zt=Ae.memoizedState,G=o.stateNode,U=G.getSnapshotBeforeUpdate(o.elementType===o.type?ke:Ii(o.type,ke),Zt);G.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var K=o.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(de){$t(o,o.return,de)}if(n=o.sibling,n!==null){n.return=o.return,Ce=n;break}Ce=o.return}return Ae=hg,hg=!1,Ae}function fu(n,o,u){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&n)===n){var _=g.destroy;g.destroy=void 0,_!==void 0&&$d(o,u,_)}g=g.next}while(g!==f)}}function Mc(n,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&n)===n){var f=u.create;u.destroy=f()}u=u.next}while(u!==o)}}function Gd(n){var o=n.ref;if(o!==null){var u=n.stateNode;switch(n.tag){case 5:n=u;break;default:n=u}typeof o=="function"?o(n):o.current=n}}function dg(n){var o=n.alternate;o!==null&&(n.alternate=null,dg(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&(delete o[li],delete o[go],delete o[_o],delete o[ld],delete o[ud])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function fg(n){return n.tag===5||n.tag===3||n.tag===4}function mg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||fg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Zd(n,o,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(n,o):u.insertBefore(n,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(n,u)):(o=u,o.appendChild(n)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=oe));else if(f!==4&&(n=n.child,n!==null))for(Zd(n,o,u),n=n.sibling;n!==null;)Zd(n,o,u),n=n.sibling}function Kd(n,o,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,o?u.insertBefore(n,o):u.appendChild(n);else if(f!==4&&(n=n.child,n!==null))for(Kd(n,o,u),n=n.sibling;n!==null;)Kd(n,o,u),n=n.sibling}var Sn=null,Si=!1;function xo(n,o,u){for(u=u.child;u!==null;)pg(n,o,u),u=u.sibling}function pg(n,o,u){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(Vi,u)}catch{}switch(u.tag){case 5:Bn||dl(u,o);case 6:var f=Sn,g=Si;Sn=null,xo(n,o,u),Sn=f,Si=g,Sn!==null&&(Si?(n=Sn,u=u.stateNode,n.nodeType===8?n.parentNode.removeChild(u):n.removeChild(u)):Sn.removeChild(u.stateNode));break;case 18:Sn!==null&&(Si?(n=Sn,u=u.stateNode,n.nodeType===8?ru(n.parentNode,u):n.nodeType===1&&ru(n,u),Mn(n)):ru(Sn,u.stateNode));break;case 4:f=Sn,g=Si,Sn=u.stateNode.containerInfo,Si=!0,xo(n,o,u),Sn=f,Si=g;break;case 0:case 11:case 14:case 15:if(!Bn&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var _=g,S=_.destroy;_=_.tag,S!==void 0&&((_&2)!==0||(_&4)!==0)&&$d(u,o,S),g=g.next}while(g!==f)}xo(n,o,u);break;case 1:if(!Bn&&(dl(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(N){$t(u,o,N)}xo(n,o,u);break;case 21:xo(n,o,u);break;case 22:u.mode&1?(Bn=(f=Bn)||u.memoizedState!==null,xo(n,o,u),Bn=f):xo(n,o,u);break;default:xo(n,o,u)}}function gg(n){var o=n.updateQueue;if(o!==null){n.updateQueue=null;var u=n.stateNode;u===null&&(u=n.stateNode=new Rw),o.forEach(function(f){var g=Bw.bind(null,n,f);u.has(f)||(u.add(f),f.then(g,g))})}}function Pi(n,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var _=n,S=o,N=S;e:for(;N!==null;){switch(N.tag){case 5:Sn=N.stateNode,Si=!1;break e;case 3:Sn=N.stateNode.containerInfo,Si=!0;break e;case 4:Sn=N.stateNode.containerInfo,Si=!0;break e}N=N.return}if(Sn===null)throw Error(t(160));pg(_,S,g),Sn=null,Si=!1;var F=g.alternate;F!==null&&(F.return=null),g.return=null}catch(X){$t(g,o,X)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)_g(o,n),o=o.sibling}function _g(n,o){var u=n.alternate,f=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Pi(o,n),Xi(n),f&4){try{fu(3,n,n.return),Mc(3,n)}catch(ke){$t(n,n.return,ke)}try{fu(5,n,n.return)}catch(ke){$t(n,n.return,ke)}}break;case 1:Pi(o,n),Xi(n),f&512&&u!==null&&dl(u,u.return);break;case 5:if(Pi(o,n),Xi(n),f&512&&u!==null&&dl(u,u.return),n.flags&32){var g=n.stateNode;try{vn(g,"")}catch(ke){$t(n,n.return,ke)}}if(f&4&&(g=n.stateNode,g!=null)){var _=n.memoizedProps,S=u!==null?u.memoizedProps:_,N=n.type,F=n.updateQueue;if(n.updateQueue=null,F!==null)try{N==="input"&&_.type==="radio"&&_.name!=null&&Hr(g,_),hr(N,S);var X=hr(N,_);for(S=0;S<F.length;S+=2){var le=F[S],ue=F[S+1];le==="style"?$r(g,ue):le==="dangerouslySetInnerHTML"?Mi(g,ue):le==="children"?vn(g,ue):he(g,le,ue,X)}switch(N){case"input":_n(g,_);break;case"textarea":Zs(g,_);break;case"select":var ae=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!_.multiple;var Ie=_.value;Ie!=null?yn(g,!!_.multiple,Ie,!1):ae!==!!_.multiple&&(_.defaultValue!=null?yn(g,!!_.multiple,_.defaultValue,!0):yn(g,!!_.multiple,_.multiple?[]:"",!1))}g[go]=_}catch(ke){$t(n,n.return,ke)}}break;case 6:if(Pi(o,n),Xi(n),f&4){if(n.stateNode===null)throw Error(t(162));g=n.stateNode,_=n.memoizedProps;try{g.nodeValue=_}catch(ke){$t(n,n.return,ke)}}break;case 3:if(Pi(o,n),Xi(n),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Mn(o.containerInfo)}catch(ke){$t(n,n.return,ke)}break;case 4:Pi(o,n),Xi(n);break;case 13:Pi(o,n),Xi(n),g=n.child,g.flags&8192&&(_=g.memoizedState!==null,g.stateNode.isHidden=_,!_||g.alternate!==null&&g.alternate.memoizedState!==null||(Xd=It())),f&4&&gg(n);break;case 22:if(le=u!==null&&u.memoizedState!==null,n.mode&1?(Bn=(X=Bn)||le,Pi(o,n),Bn=X):Pi(o,n),Xi(n),f&8192){if(X=n.memoizedState!==null,(n.stateNode.isHidden=X)&&!le&&(n.mode&1)!==0)for(Ce=n,le=n.child;le!==null;){for(ue=Ce=le;Ce!==null;){switch(ae=Ce,Ie=ae.child,ae.tag){case 0:case 11:case 14:case 15:fu(4,ae,ae.return);break;case 1:dl(ae,ae.return);var Ae=ae.stateNode;if(typeof Ae.componentWillUnmount=="function"){f=ae,u=ae.return;try{o=f,Ae.props=o.memoizedProps,Ae.state=o.memoizedState,Ae.componentWillUnmount()}catch(ke){$t(f,u,ke)}}break;case 5:dl(ae,ae.return);break;case 22:if(ae.memoizedState!==null){wg(ue);continue}}Ie!==null?(Ie.return=ae,Ce=Ie):wg(ue)}le=le.sibling}e:for(le=null,ue=n;;){if(ue.tag===5){if(le===null){le=ue;try{g=ue.stateNode,X?(_=g.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(N=ue.stateNode,F=ue.memoizedProps.style,S=F!=null&&F.hasOwnProperty("display")?F.display:null,N.style.display=Rr("display",S))}catch(ke){$t(n,n.return,ke)}}}else if(ue.tag===6){if(le===null)try{ue.stateNode.nodeValue=X?"":ue.memoizedProps}catch(ke){$t(n,n.return,ke)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===n)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===n)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===n)break e;le===ue&&(le=null),ue=ue.return}le===ue&&(le=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:Pi(o,n),Xi(n),f&4&&gg(n);break;case 21:break;default:Pi(o,n),Xi(n)}}function Xi(n){var o=n.flags;if(o&2){try{e:{for(var u=n.return;u!==null;){if(fg(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(vn(g,""),f.flags&=-33);var _=mg(n);Kd(n,_,g);break;case 3:case 4:var S=f.stateNode.containerInfo,N=mg(n);Zd(n,N,S);break;default:throw Error(t(161))}}catch(F){$t(n,n.return,F)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function Lw(n,o,u){Ce=n,yg(n)}function yg(n,o,u){for(var f=(n.mode&1)!==0;Ce!==null;){var g=Ce,_=g.child;if(g.tag===22&&f){var S=g.memoizedState!==null||Lc;if(!S){var N=g.alternate,F=N!==null&&N.memoizedState!==null||Bn;N=Lc;var X=Bn;if(Lc=S,(Bn=F)&&!X)for(Ce=g;Ce!==null;)S=Ce,F=S.child,S.tag===22&&S.memoizedState!==null?Eg(g):F!==null?(F.return=S,Ce=F):Eg(g);for(;_!==null;)Ce=_,yg(_),_=_.sibling;Ce=g,Lc=N,Bn=X}vg(n)}else(g.subtreeFlags&8772)!==0&&_!==null?(_.return=g,Ce=_):vg(n)}}function vg(n){for(;Ce!==null;){var o=Ce;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Bn||Mc(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!Bn)if(u===null)f.componentDidMount();else{var g=o.elementType===o.type?u.memoizedProps:Ii(o.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var _=o.updateQueue;_!==null&&wp(o,_,f);break;case 3:var S=o.updateQueue;if(S!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}wp(o,S,u)}break;case 5:var N=o.stateNode;if(u===null&&o.flags&4){u=N;var F=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&u.focus();break;case"img":F.src&&(u.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var X=o.alternate;if(X!==null){var le=X.memoizedState;if(le!==null){var ue=le.dehydrated;ue!==null&&Mn(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Bn||o.flags&512&&Gd(o)}catch(ae){$t(o,o.return,ae)}}if(o===n){Ce=null;break}if(u=o.sibling,u!==null){u.return=o.return,Ce=u;break}Ce=o.return}}function wg(n){for(;Ce!==null;){var o=Ce;if(o===n){Ce=null;break}var u=o.sibling;if(u!==null){u.return=o.return,Ce=u;break}Ce=o.return}}function Eg(n){for(;Ce!==null;){var o=Ce;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Mc(4,o)}catch(F){$t(o,u,F)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var g=o.return;try{f.componentDidMount()}catch(F){$t(o,g,F)}}var _=o.return;try{Gd(o)}catch(F){$t(o,_,F)}break;case 5:var S=o.return;try{Gd(o)}catch(F){$t(o,S,F)}}}catch(F){$t(o,o.return,F)}if(o===n){Ce=null;break}var N=o.sibling;if(N!==null){N.return=o.return,Ce=N;break}Ce=o.return}}var Mw=Math.ceil,Dc=Me.ReactCurrentDispatcher,Qd=Me.ReactCurrentOwner,fi=Me.ReactCurrentBatchConfig,dt=0,mn=null,en=null,Pn=0,jr=0,fl=yo(0),ln=0,mu=null,Ea=0,Oc=0,Yd=0,pu=null,Ir=null,Xd=0,ml=1/0,zs=null,Vc=!1,Jd=null,Io=null,zc=!1,So=null,Fc=0,gu=0,ef=null,jc=-1,Bc=0;function ir(){return(dt&6)!==0?It():jc!==-1?jc:jc=It()}function Po(n){return(n.mode&1)===0?1:(dt&2)!==0&&Pn!==0?Pn&-Pn:_w.transition!==null?(Bc===0&&(Bc=ra()),Bc):(n=et,n!==0||(n=window.event,n=n===void 0?16:tt(n.type)),n)}function bi(n,o,u,f){if(50<gu)throw gu=0,ef=null,Error(t(185));Kn(n,u,f),((dt&2)===0||n!==mn)&&(n===mn&&((dt&2)===0&&(Oc|=u),ln===4&&bo(n,Pn)),Sr(n,f),u===1&&dt===0&&(o.mode&1)===0&&(ml=It()+500,pc&&wo()))}function Sr(n,o){var u=n.callbackNode;Qr(n,o);var f=gt(n,n===mn?Pn:0);if(f===0)u!==null&&fs(u),n.callbackNode=null,n.callbackPriority=0;else if(o=f&-f,n.callbackPriority!==o){if(u!=null&&fs(u),o===1)n.tag===0?gw(xg.bind(null,n)):lp(xg.bind(null,n)),Vn(function(){(dt&6)===0&&wo()}),u=null;else{switch(Ln(f)){case 1:u=Ks;break;case 4:u=na;break;case 16:u=ps;break;case 536870912:u=Zr;break;default:u=ps}u=Rg(u,Tg.bind(null,n))}n.callbackPriority=o,n.callbackNode=u}}function Tg(n,o){if(jc=-1,Bc=0,(dt&6)!==0)throw Error(t(327));var u=n.callbackNode;if(pl()&&n.callbackNode!==u)return null;var f=gt(n,n===mn?Pn:0);if(f===0)return null;if((f&30)!==0||(f&n.expiredLanes)!==0||o)o=Uc(n,f);else{o=f;var g=dt;dt|=2;var _=Sg();(mn!==n||Pn!==o)&&(zs=null,ml=It()+500,xa(n,o));do try{Vw();break}catch(N){Ig(n,N)}while(!0);yd(),Dc.current=_,dt=g,en!==null?o=0:(mn=null,Pn=0,o=ln)}if(o!==0){if(o===2&&(g=hn(n),g!==0&&(f=g,o=tf(n,g))),o===1)throw u=mu,xa(n,0),bo(n,f),Sr(n,It()),u;if(o===6)bo(n,f);else{if(g=n.current.alternate,(f&30)===0&&!Dw(g)&&(o=Uc(n,f),o===2&&(_=hn(n),_!==0&&(f=_,o=tf(n,_))),o===1))throw u=mu,xa(n,0),bo(n,f),Sr(n,It()),u;switch(n.finishedWork=g,n.finishedLanes=f,o){case 0:case 1:throw Error(t(345));case 2:Ia(n,Ir,zs);break;case 3:if(bo(n,f),(f&130023424)===f&&(o=Xd+500-It(),10<o)){if(gt(n,0)!==0)break;if(g=n.suspendedLanes,(g&f)!==f){ir(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=on(Ia.bind(null,n,Ir,zs),o);break}Ia(n,Ir,zs);break;case 4:if(bo(n,f),(f&4194240)===f)break;for(o=n.eventTimes,g=-1;0<f;){var S=31-Ze(f);_=1<<S,S=o[S],S>g&&(g=S),f&=~_}if(f=g,f=It()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*Mw(f/1960))-f,10<f){n.timeoutHandle=on(Ia.bind(null,n,Ir,zs),f);break}Ia(n,Ir,zs);break;case 5:Ia(n,Ir,zs);break;default:throw Error(t(329))}}}return Sr(n,It()),n.callbackNode===u?Tg.bind(null,n):null}function tf(n,o){var u=pu;return n.current.memoizedState.isDehydrated&&(xa(n,o).flags|=256),n=Uc(n,o),n!==2&&(o=Ir,Ir=u,o!==null&&nf(o)),n}function nf(n){Ir===null?Ir=n:Ir.push.apply(Ir,n)}function Dw(n){for(var o=n;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],_=g.getSnapshot;g=g.value;try{if(!Or(_(),g))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function bo(n,o){for(o&=~Yd,o&=~Oc,n.suspendedLanes|=o,n.pingedLanes&=~o,n=n.expirationTimes;0<o;){var u=31-Ze(o),f=1<<u;n[u]=-1,o&=~f}}function xg(n){if((dt&6)!==0)throw Error(t(327));pl();var o=gt(n,0);if((o&1)===0)return Sr(n,It()),null;var u=Uc(n,o);if(n.tag!==0&&u===2){var f=hn(n);f!==0&&(o=f,u=tf(n,f))}if(u===1)throw u=mu,xa(n,0),bo(n,o),Sr(n,It()),u;if(u===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=o,Ia(n,Ir,zs),Sr(n,It()),null}function rf(n,o){var u=dt;dt|=1;try{return n(o)}finally{dt=u,dt===0&&(ml=It()+500,pc&&wo())}}function Ta(n){So!==null&&So.tag===0&&(dt&6)===0&&pl();var o=dt;dt|=1;var u=fi.transition,f=et;try{if(fi.transition=null,et=1,n)return n()}finally{et=f,fi.transition=u,dt=o,(dt&6)===0&&wo()}}function sf(){jr=fl.current,Nt(fl)}function xa(n,o){n.finishedWork=null,n.finishedLanes=0;var u=n.timeoutHandle;if(u!==-1&&(n.timeoutHandle=-1,Jt(u)),en!==null)for(u=en.return;u!==null;){var f=u;switch(fd(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&fc();break;case 3:cl(),Nt(Er),Nt(zn),Pd();break;case 5:Id(f);break;case 4:cl();break;case 13:Nt(Ft);break;case 19:Nt(Ft);break;case 10:vd(f.type._context);break;case 22:case 23:sf()}u=u.return}if(mn=n,en=n=Co(n.current,null),Pn=jr=o,ln=0,mu=null,Yd=Oc=Ea=0,Ir=pu=null,ya!==null){for(o=0;o<ya.length;o++)if(u=ya[o],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,_=u.pending;if(_!==null){var S=_.next;_.next=g,f.next=S}u.pending=f}ya=null}return n}function Ig(n,o){do{var u=en;try{if(yd(),Sc.current=Ac,Pc){for(var f=jt.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}Pc=!1}if(wa=0,fn=an=jt=null,lu=!1,uu=0,Qd.current=null,u===null||u.return===null){ln=1,mu=o,en=null;break}e:{var _=n,S=u.return,N=u,F=o;if(o=Pn,N.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var X=F,le=N,ue=le.tag;if((le.mode&1)===0&&(ue===0||ue===11||ue===15)){var ae=le.alternate;ae?(le.updateQueue=ae.updateQueue,le.memoizedState=ae.memoizedState,le.lanes=ae.lanes):(le.updateQueue=null,le.memoizedState=null)}var Ie=Kp(S);if(Ie!==null){Ie.flags&=-257,Qp(Ie,S,N,_,o),Ie.mode&1&&Zp(_,X,o),o=Ie,F=X;var Ae=o.updateQueue;if(Ae===null){var ke=new Set;ke.add(F),o.updateQueue=ke}else Ae.add(F);break e}else{if((o&1)===0){Zp(_,X,o),of();break e}F=Error(t(426))}}else if(Dt&&N.mode&1){var Zt=Kp(S);if(Zt!==null){(Zt.flags&65536)===0&&(Zt.flags|=256),Qp(Zt,S,N,_,o),gd(hl(F,N));break e}}_=F=hl(F,N),ln!==4&&(ln=2),pu===null?pu=[_]:pu.push(_),_=S;do{switch(_.tag){case 3:_.flags|=65536,o&=-o,_.lanes|=o;var G=$p(_,F,o);vp(_,G);break e;case 1:N=F;var U=_.type,K=_.stateNode;if((_.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(Io===null||!Io.has(K)))){_.flags|=65536,o&=-o,_.lanes|=o;var de=Gp(_,N,o);vp(_,de);break e}}_=_.return}while(_!==null)}bg(u)}catch(Re){o=Re,en===u&&u!==null&&(en=u=u.return);continue}break}while(!0)}function Sg(){var n=Dc.current;return Dc.current=Ac,n===null?Ac:n}function of(){(ln===0||ln===3||ln===2)&&(ln=4),mn===null||(Ea&268435455)===0&&(Oc&268435455)===0||bo(mn,Pn)}function Uc(n,o){var u=dt;dt|=2;var f=Sg();(mn!==n||Pn!==o)&&(zs=null,xa(n,o));do try{Ow();break}catch(g){Ig(n,g)}while(!0);if(yd(),dt=u,Dc.current=f,en!==null)throw Error(t(261));return mn=null,Pn=0,ln}function Ow(){for(;en!==null;)Pg(en)}function Vw(){for(;en!==null&&!ms();)Pg(en)}function Pg(n){var o=kg(n.alternate,n,jr);n.memoizedProps=n.pendingProps,o===null?bg(n):en=o,Qd.current=null}function bg(n){var o=n;do{var u=o.alternate;if(n=o.return,(o.flags&32768)===0){if(u=Aw(u,o,jr),u!==null){en=u;return}}else{if(u=kw(u,o),u!==null){u.flags&=32767,en=u;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ln=6,en=null;return}}if(o=o.sibling,o!==null){en=o;return}en=o=n}while(o!==null);ln===0&&(ln=5)}function Ia(n,o,u){var f=et,g=fi.transition;try{fi.transition=null,et=1,zw(n,o,u,f)}finally{fi.transition=g,et=f}return null}function zw(n,o,u,f){do pl();while(So!==null);if((dt&6)!==0)throw Error(t(327));u=n.finishedWork;var g=n.finishedLanes;if(u===null)return null;if(n.finishedWork=null,n.finishedLanes=0,u===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var _=u.lanes|u.childLanes;if(Lt(n,_),n===mn&&(en=mn=null,Pn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||zc||(zc=!0,Rg(ps,function(){return pl(),null})),_=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||_){_=fi.transition,fi.transition=null;var S=et;et=1;var N=dt;dt|=4,Qd.current=null,Nw(n,u),_g(u,n),oi(De),Jr=!!we,De=we=null,n.current=u,Lw(u),gr(),dt=N,et=S,fi.transition=_}else n.current=u;if(zc&&(zc=!1,So=n,Fc=g),_=n.pendingLanes,_===0&&(Io=null),zi(u.stateNode),Sr(n,It()),o!==null)for(f=n.onRecoverableError,u=0;u<o.length;u++)g=o[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(Vc)throw Vc=!1,n=Jd,Jd=null,n;return(Fc&1)!==0&&n.tag!==0&&pl(),_=n.pendingLanes,(_&1)!==0?n===ef?gu++:(gu=0,ef=n):gu=0,wo(),null}function pl(){if(So!==null){var n=Ln(Fc),o=fi.transition,u=et;try{if(fi.transition=null,et=16>n?16:n,So===null)var f=!1;else{if(n=So,So=null,Fc=0,(dt&6)!==0)throw Error(t(331));var g=dt;for(dt|=4,Ce=n.current;Ce!==null;){var _=Ce,S=_.child;if((Ce.flags&16)!==0){var N=_.deletions;if(N!==null){for(var F=0;F<N.length;F++){var X=N[F];for(Ce=X;Ce!==null;){var le=Ce;switch(le.tag){case 0:case 11:case 15:fu(8,le,_)}var ue=le.child;if(ue!==null)ue.return=le,Ce=ue;else for(;Ce!==null;){le=Ce;var ae=le.sibling,Ie=le.return;if(dg(le),le===X){Ce=null;break}if(ae!==null){ae.return=Ie,Ce=ae;break}Ce=Ie}}}var Ae=_.alternate;if(Ae!==null){var ke=Ae.child;if(ke!==null){Ae.child=null;do{var Zt=ke.sibling;ke.sibling=null,ke=Zt}while(ke!==null)}}Ce=_}}if((_.subtreeFlags&2064)!==0&&S!==null)S.return=_,Ce=S;else e:for(;Ce!==null;){if(_=Ce,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:fu(9,_,_.return)}var G=_.sibling;if(G!==null){G.return=_.return,Ce=G;break e}Ce=_.return}}var U=n.current;for(Ce=U;Ce!==null;){S=Ce;var K=S.child;if((S.subtreeFlags&2064)!==0&&K!==null)K.return=S,Ce=K;else e:for(S=U;Ce!==null;){if(N=Ce,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:Mc(9,N)}}catch(Re){$t(N,N.return,Re)}if(N===S){Ce=null;break e}var de=N.sibling;if(de!==null){de.return=N.return,Ce=de;break e}Ce=N.return}}if(dt=g,wo(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(Vi,n)}catch{}f=!0}return f}finally{et=u,fi.transition=o}}return!1}function Cg(n,o,u){o=hl(u,o),o=$p(n,o,1),n=To(n,o,1),o=ir(),n!==null&&(Kn(n,1,o),Sr(n,o))}function $t(n,o,u){if(n.tag===3)Cg(n,n,u);else for(;o!==null;){if(o.tag===3){Cg(o,n,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Io===null||!Io.has(f))){n=hl(u,n),n=Gp(o,n,1),o=To(o,n,1),n=ir(),o!==null&&(Kn(o,1,n),Sr(o,n));break}}o=o.return}}function Fw(n,o,u){var f=n.pingCache;f!==null&&f.delete(o),o=ir(),n.pingedLanes|=n.suspendedLanes&u,mn===n&&(Pn&u)===u&&(ln===4||ln===3&&(Pn&130023424)===Pn&&500>It()-Xd?xa(n,0):Yd|=u),Sr(n,o)}function Ag(n,o){o===0&&((n.mode&1)===0?o=1:(o=Kr,Kr<<=1,(Kr&130023424)===0&&(Kr=4194304)));var u=ir();n=Ds(n,o),n!==null&&(Kn(n,o,u),Sr(n,u))}function jw(n){var o=n.memoizedState,u=0;o!==null&&(u=o.retryLane),Ag(n,u)}function Bw(n,o){var u=0;switch(n.tag){case 13:var f=n.stateNode,g=n.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=n.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(o),Ag(n,u)}var kg;kg=function(n,o,u){if(n!==null)if(n.memoizedProps!==o.pendingProps||Er.current)xr=!0;else{if((n.lanes&u)===0&&(o.flags&128)===0)return xr=!1,Cw(n,o,u);xr=(n.flags&131072)!==0}else xr=!1,Dt&&(o.flags&1048576)!==0&&up(o,_c,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;Nc(n,o),n=o.pendingProps;var g=rl(o,zn.current);ul(o,u),g=Ad(null,o,f,n,g,u);var _=kd();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Tr(f)?(_=!0,mc(o)):_=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Td(o),g.updater=kc,o.stateNode=g,g._reactInternals=o,Od(o,f,n,u),o=jd(null,o,f,!0,_,u)):(o.tag=0,Dt&&_&&dd(o),rr(null,o,g,u),o=o.child),o;case 16:f=o.elementType;e:{switch(Nc(n,o),n=o.pendingProps,g=f._init,f=g(f._payload),o.type=f,g=o.tag=Ww(f),n=Ii(f,n),g){case 0:o=Fd(null,o,f,n,u);break e;case 1:o=ng(null,o,f,n,u);break e;case 11:o=Yp(null,o,f,n,u);break e;case 14:o=Xp(null,o,f,Ii(f.type,n),u);break e}throw Error(t(306,f,""))}return o;case 0:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Ii(f,g),Fd(n,o,f,g,u);case 1:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Ii(f,g),ng(n,o,f,g,u);case 3:e:{if(rg(o),n===null)throw Error(t(387));f=o.pendingProps,_=o.memoizedState,g=_.element,yp(n,o),xc(o,f,null,u);var S=o.memoizedState;if(f=S.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){g=hl(Error(t(423)),o),o=ig(n,o,f,u,g);break e}else if(f!==g){g=hl(Error(t(424)),o),o=ig(n,o,f,u,g);break e}else for(Fr=Ki(o.stateNode.containerInfo.firstChild),zr=o,Dt=!0,xi=null,u=gp(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ol(),f===g){o=Vs(n,o,u);break e}rr(n,o,f,u)}o=o.child}return o;case 5:return Ep(o),n===null&&pd(o),f=o.type,g=o.pendingProps,_=n!==null?n.memoizedProps:null,S=g.children,Je(f,g)?S=null:_!==null&&Je(f,_)&&(o.flags|=32),tg(n,o),rr(n,o,S,u),o.child;case 6:return n===null&&pd(o),null;case 13:return sg(n,o,u);case 4:return xd(o,o.stateNode.containerInfo),f=o.pendingProps,n===null?o.child=al(o,null,f,u):rr(n,o,f,u),o.child;case 11:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Ii(f,g),Yp(n,o,f,g,u);case 7:return rr(n,o,o.pendingProps,u),o.child;case 8:return rr(n,o,o.pendingProps.children,u),o.child;case 12:return rr(n,o,o.pendingProps.children,u),o.child;case 10:e:{if(f=o.type._context,g=o.pendingProps,_=o.memoizedProps,S=g.value,Ct(wc,f._currentValue),f._currentValue=S,_!==null)if(Or(_.value,S)){if(_.children===g.children&&!Er.current){o=Vs(n,o,u);break e}}else for(_=o.child,_!==null&&(_.return=o);_!==null;){var N=_.dependencies;if(N!==null){S=_.child;for(var F=N.firstContext;F!==null;){if(F.context===f){if(_.tag===1){F=Os(-1,u&-u),F.tag=2;var X=_.updateQueue;if(X!==null){X=X.shared;var le=X.pending;le===null?F.next=F:(F.next=le.next,le.next=F),X.pending=F}}_.lanes|=u,F=_.alternate,F!==null&&(F.lanes|=u),wd(_.return,u,o),N.lanes|=u;break}F=F.next}}else if(_.tag===10)S=_.type===o.type?null:_.child;else if(_.tag===18){if(S=_.return,S===null)throw Error(t(341));S.lanes|=u,N=S.alternate,N!==null&&(N.lanes|=u),wd(S,u,o),S=_.sibling}else S=_.child;if(S!==null)S.return=_;else for(S=_;S!==null;){if(S===o){S=null;break}if(_=S.sibling,_!==null){_.return=S.return,S=_;break}S=S.return}_=S}rr(n,o,g.children,u),o=o.child}return o;case 9:return g=o.type,f=o.pendingProps.children,ul(o,u),g=hi(g),f=f(g),o.flags|=1,rr(n,o,f,u),o.child;case 14:return f=o.type,g=Ii(f,o.pendingProps),g=Ii(f.type,g),Xp(n,o,f,g,u);case 15:return Jp(n,o,o.type,o.pendingProps,u);case 17:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Ii(f,g),Nc(n,o),o.tag=1,Tr(f)?(n=!0,mc(o)):n=!1,ul(o,u),Hp(o,f,g),Od(o,f,g,u),jd(null,o,f,!0,n,u);case 19:return ag(n,o,u);case 22:return eg(n,o,u)}throw Error(t(156,o.tag))};function Rg(n,o){return ta(n,o)}function Uw(n,o,u,f){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(n,o,u,f){return new Uw(n,o,u,f)}function af(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ww(n){if(typeof n=="function")return af(n)?1:0;if(n!=null){if(n=n.$$typeof,n===W)return 11;if(n===nt)return 14}return 2}function Co(n,o){var u=n.alternate;return u===null?(u=mi(n.tag,o,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=o,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&14680064,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,o=n.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u}function Wc(n,o,u,f,g,_){var S=2;if(f=n,typeof n=="function")af(n)&&(S=1);else if(typeof n=="string")S=5;else e:switch(n){case j:return Sa(u.children,g,_,o);case R:S=8,g|=8;break;case D:return n=mi(12,u,o,g|2),n.elementType=D,n.lanes=_,n;case M:return n=mi(13,u,o,g),n.elementType=M,n.lanes=_,n;case Xe:return n=mi(19,u,o,g),n.elementType=Xe,n.lanes=_,n;case Oe:return Hc(u,g,_,o);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case B:S=10;break e;case V:S=9;break e;case W:S=11;break e;case nt:S=14;break e;case fe:S=16,f=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return o=mi(S,u,o,g),o.elementType=n,o.type=f,o.lanes=_,o}function Sa(n,o,u,f){return n=mi(7,n,f,o),n.lanes=u,n}function Hc(n,o,u,f){return n=mi(22,n,f,o),n.elementType=Oe,n.lanes=u,n.stateNode={isHidden:!1},n}function lf(n,o,u){return n=mi(6,n,null,o),n.lanes=u,n}function uf(n,o,u){return o=mi(4,n.children!==null?n.children:[],n.key,o),o.lanes=u,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}function Hw(n,o,u,f,g){this.tag=o,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fi(0),this.expirationTimes=Fi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fi(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function cf(n,o,u,f,g,_,S,N,F){return n=new Hw(n,o,u,N,F),o===1?(o=1,_===!0&&(o|=8)):o=0,_=mi(3,null,null,o),n.current=_,_.stateNode=n,_.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Td(_),n}function qw(n,o,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ne,key:f==null?null:""+f,children:n,containerInfo:o,implementation:u}}function Ng(n){if(!n)return vo;n=n._reactInternals;e:{if(pr(n)!==n||n.tag!==1)throw Error(t(170));var o=n;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Tr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(n.tag===1){var u=n.type;if(Tr(u))return op(n,u,o)}return o}function Lg(n,o,u,f,g,_,S,N,F){return n=cf(u,f,!0,n,g,_,S,N,F),n.context=Ng(null),u=n.current,f=ir(),g=Po(u),_=Os(f,g),_.callback=o??null,To(u,_,g),n.current.lanes=g,Kn(n,g,f),Sr(n,f),n}function qc(n,o,u,f){var g=o.current,_=ir(),S=Po(g);return u=Ng(u),o.context===null?o.context=u:o.pendingContext=u,o=Os(_,S),o.payload={element:n},f=f===void 0?null:f,f!==null&&(o.callback=f),n=To(g,o,S),n!==null&&(bi(n,g,S,_),Tc(n,g,S)),S}function $c(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Mg(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<o?u:o}}function hf(n,o){Mg(n,o),(n=n.alternate)&&Mg(n,o)}function $w(){return null}var Dg=typeof reportError=="function"?reportError:function(n){console.error(n)};function df(n){this._internalRoot=n}Gc.prototype.render=df.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(t(409));qc(n,o,null,null)},Gc.prototype.unmount=df.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;Ta(function(){qc(null,n,null,null)}),o[vt]=null}};function Gc(n){this._internalRoot=n}Gc.prototype.unstable_scheduleHydration=function(n){if(n){var o=vs();n={blockedOn:null,target:n,priority:o};for(var u=0;u<Mt.length&&o!==0&&o<Mt[u].priority;u++);Mt.splice(u,0,n),u===0&&Ui(n)}};function ff(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Zc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Og(){}function Gw(n,o,u,f,g){if(g){if(typeof f=="function"){var _=f;f=function(){var X=$c(S);_.call(X)}}var S=Lg(o,f,n,0,null,!1,!1,"",Og);return n._reactRootContainer=S,n[vt]=S.current,mo(n.nodeType===8?n.parentNode:n),Ta(),S}for(;g=n.lastChild;)n.removeChild(g);if(typeof f=="function"){var N=f;f=function(){var X=$c(F);N.call(X)}}var F=cf(n,0,!1,null,null,!1,!1,"",Og);return n._reactRootContainer=F,n[vt]=F.current,mo(n.nodeType===8?n.parentNode:n),Ta(function(){qc(o,F,u,f)}),F}function Kc(n,o,u,f,g){var _=u._reactRootContainer;if(_){var S=_;if(typeof g=="function"){var N=g;g=function(){var F=$c(S);N.call(F)}}qc(o,S,n,g)}else S=Gw(u,o,n,g,f);return $c(S)}_s=function(n){switch(n.tag){case 3:var o=n.stateNode;if(o.current.memoizedState.isDehydrated){var u=xe(o.pendingLanes);u!==0&&(Nr(o,u|1),Sr(o,It()),(dt&6)===0&&(ml=It()+500,wo()))}break;case 13:Ta(function(){var f=Ds(n,1);if(f!==null){var g=ir();bi(f,n,1,g)}}),hf(n,1)}},Yr=function(n){if(n.tag===13){var o=Ds(n,134217728);if(o!==null){var u=ir();bi(o,n,134217728,u)}hf(n,134217728)}},ys=function(n){if(n.tag===13){var o=Po(n),u=Ds(n,o);if(u!==null){var f=ir();bi(u,n,o,f)}hf(n,o)}},vs=function(){return et},ji=function(n,o){var u=et;try{return et=n,o()}finally{et=u}},fr=function(n,o,u){switch(o){case"input":if(_n(n,u),o=u.name,u.type==="radio"&&o!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==n&&f.form===n.form){var g=tl(f);if(!g)throw Error(t(90));or(f),_n(f,g)}}}break;case"textarea":Zs(n,u);break;case"select":o=u.value,o!=null&&yn(n,!!u.multiple,o,!1)}},Ot=rf,Yt=Ta;var Zw={usingClientEntryPoint:!1,Events:[ks,Rs,tl,je,wt,rf]},_u={findFiberByHostInstance:As,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kw={bundleType:_u.bundleType,version:_u.version,rendererPackageName:_u.rendererPackageName,rendererConfig:_u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Me.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Wa(n),n===null?null:n.stateNode},findFiberByHostInstance:_u.findFiberByHostInstance||$w,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qc.isDisabled&&Qc.supportsFiber)try{Vi=Qc.inject(Kw),Nn=Qc}catch{}}return Pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zw,Pr.createPortal=function(n,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ff(o))throw Error(t(200));return qw(n,o,null,u)},Pr.createRoot=function(n,o){if(!ff(n))throw Error(t(299));var u=!1,f="",g=Dg;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=cf(n,1,!1,null,null,u,!1,f,g),n[vt]=o.current,mo(n.nodeType===8?n.parentNode:n),new df(o)},Pr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Wa(o),n=n===null?null:n.stateNode,n},Pr.flushSync=function(n){return Ta(n)},Pr.hydrate=function(n,o,u){if(!Zc(o))throw Error(t(200));return Kc(null,n,o,!0,u)},Pr.hydrateRoot=function(n,o,u){if(!ff(n))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,g=!1,_="",S=Dg;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),o=Lg(o,null,n,1,u??null,g,!1,_,S),n[vt]=o.current,mo(n),f)for(n=0;n<f.length;n++)u=f[n],g=u._getVersion,g=g(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,g]:o.mutableSourceEagerHydrationData.push(u,g);return new Gc(o)},Pr.render=function(n,o,u){if(!Zc(o))throw Error(t(200));return Kc(null,n,o,!1,u)},Pr.unmountComponentAtNode=function(n){if(!Zc(n))throw Error(t(40));return n._reactRootContainer?(Ta(function(){Kc(null,null,n,!1,function(){n._reactRootContainer=null,n[vt]=null})}),!0):!1},Pr.unstable_batchedUpdates=rf,Pr.unstable_renderSubtreeIntoContainer=function(n,o,u,f){if(!Zc(u))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Kc(n,o,u,!1,f)},Pr.version="18.3.1-next-f1338f8080-20240426",Pr}var Hg;function Ny(){if(Hg)return gf.exports;Hg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),gf.exports=nE(),gf.exports}var qg;function rE(){if(qg)return Yc;qg=1;var r=Ny();return Yc.createRoot=r.createRoot,Yc.hydrateRoot=r.hydrateRoot,Yc}var iE=rE(),Ye=am();const _e=om(Ye);var wu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var sE=wu.exports,$g;function oE(){return $g||($g=1,(function(r,e){(function(t,s){s(e)})(sE,(function(t){var s="1.9.4";function a(i){var l,d,p,w;for(d=1,p=arguments.length;d<p;d++){w=arguments[d];for(l in w)i[l]=w[l]}return i}var c=Object.create||(function(){function i(){}return function(l){return i.prototype=l,new i}})();function m(i,l){var d=Array.prototype.slice;if(i.bind)return i.bind.apply(i,d.call(arguments,1));var p=d.call(arguments,2);return function(){return i.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var v=0;function E(i){return"_leaflet_id"in i||(i._leaflet_id=++v),i._leaflet_id}function x(i,l,d){var p,w,b,O;return O=function(){p=!1,w&&(b.apply(d,w),w=!1)},b=function(){p?w=arguments:(i.apply(d,arguments),setTimeout(O,l),p=!0)},b}function P(i,l,d){var p=l[1],w=l[0],b=p-w;return i===p&&d?i:((i-w)%b+b)%b+w}function I(){return!1}function A(i,l){if(l===!1)return i;var d=Math.pow(10,l===void 0?6:l);return Math.round(i*d)/d}function H(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function Z(i){return H(i).split(/\s+/)}function ne(i,l){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?c(i.options):{});for(var d in l)i.options[d]=l[d];return i.options}function ee(i,l,d){var p=[];for(var w in i)p.push(encodeURIComponent(d?w.toUpperCase():w)+"="+encodeURIComponent(i[w]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var be=/\{ *([\w_ -]+) *\}/g;function pe(i,l){return i.replace(be,function(d,p){var w=l[p];if(w===void 0)throw new Error("No value provided for variable "+d);return typeof w=="function"&&(w=w(l)),w})}var he=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function Me(i,l){for(var d=0;d<i.length;d++)if(i[d]===l)return d;return-1}var He="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Ne(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var j=0;function R(i){var l=+new Date,d=Math.max(0,16-(l-j));return j=l+d,window.setTimeout(i,d)}var D=window.requestAnimationFrame||Ne("RequestAnimationFrame")||R,B=window.cancelAnimationFrame||Ne("CancelAnimationFrame")||Ne("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function V(i,l,d){if(d&&D===R)i.call(l);else return D.call(window,m(i,l))}function W(i){i&&B.call(window,i)}var M={__proto__:null,extend:a,create:c,bind:m,get lastId(){return v},stamp:E,throttle:x,wrapNum:P,falseFn:I,formatNum:A,trim:H,splitWords:Z,setOptions:ne,getParamString:ee,template:pe,isArray:he,indexOf:Me,emptyImageUrl:He,requestFn:D,cancelFn:B,requestAnimFrame:V,cancelAnimFrame:W};function Xe(){}Xe.extend=function(i){var l=function(){ne(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=c(d);p.constructor=l,l.prototype=p;for(var w in this)Object.prototype.hasOwnProperty.call(this,w)&&w!=="prototype"&&w!=="__super__"&&(l[w]=this[w]);return i.statics&&a(l,i.statics),i.includes&&(nt(i.includes),a.apply(null,[p].concat(i.includes))),a(p,i),delete p.statics,delete p.includes,p.options&&(p.options=d.options?c(d.options):{},a(p.options,i.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var b=0,O=p._initHooks.length;b<O;b++)p._initHooks[b].call(this)}},l},Xe.include=function(i){var l=this.prototype.options;return a(this.prototype,i),i.options&&(this.prototype.options=l,this.mergeOptions(i.options)),this},Xe.mergeOptions=function(i){return a(this.prototype.options,i),this},Xe.addInitHook=function(i){var l=Array.prototype.slice.call(arguments,1),d=typeof i=="function"?i:function(){this[i].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function nt(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=he(i)?i:[i];for(var l=0;l<i.length;l++)i[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var fe={on:function(i,l,d){if(typeof i=="object")for(var p in i)this._on(p,i[p],l);else{i=Z(i);for(var w=0,b=i.length;w<b;w++)this._on(i[w],l,d)}return this},off:function(i,l,d){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var p in i)this._off(p,i[p],l);else{i=Z(i);for(var w=arguments.length===1,b=0,O=i.length;b<O;b++)w?this._off(i[b]):this._off(i[b],l,d)}return this},_on:function(i,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(i,l,d)===!1){d===this&&(d=void 0);var w={fn:l,ctx:d};p&&(w.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(w)}},_off:function(i,l,d){var p,w,b;if(this._events&&(p=this._events[i],!!p)){if(arguments.length===1){if(this._firingCount)for(w=0,b=p.length;w<b;w++)p[w].fn=I;delete this._events[i];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var O=this._listens(i,l,d);if(O!==!1){var $=p[O];this._firingCount&&($.fn=I,this._events[i]=p=p.slice()),p.splice(O,1)}}},fire:function(i,l,d){if(!this.listens(i,d))return this;var p=a({},l,{type:i,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var w=this._events[i];if(w){this._firingCount=this._firingCount+1||1;for(var b=0,O=w.length;b<O;b++){var $=w[b],Y=$.fn;$.once&&this.off(i,Y,$.ctx),Y.call($.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(i,l,d,p){typeof i!="string"&&console.warn('"string" type argument expected');var w=l;typeof l!="function"&&(p=!!l,w=void 0,d=void 0);var b=this._events&&this._events[i];if(b&&b.length&&this._listens(i,w,d)!==!1)return!0;if(p){for(var O in this._eventParents)if(this._eventParents[O].listens(i,l,d,p))return!0}return!1},_listens:function(i,l,d){if(!this._events)return!1;var p=this._events[i]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var w=0,b=p.length;w<b;w++)if(p[w].fn===l&&p[w].ctx===d)return w;return!1},once:function(i,l,d){if(typeof i=="object")for(var p in i)this._on(p,i[p],l,!0);else{i=Z(i);for(var w=0,b=i.length;w<b;w++)this._on(i[w],l,d,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[E(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[E(i)],this},_propagateEvent:function(i){for(var l in this._eventParents)this._eventParents[l].fire(i.type,a({layer:i.target,propagatedFrom:i.target},i),!0)}};fe.addEventListener=fe.on,fe.removeEventListener=fe.clearAllEventListeners=fe.off,fe.addOneTimeEventListener=fe.once,fe.fireEvent=fe.fire,fe.hasEventListeners=fe.listens;var Oe=Xe.extend(fe);function te(i,l,d){this.x=d?Math.round(i):i,this.y=d?Math.round(l):l}var Ee=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};te.prototype={clone:function(){return new te(this.x,this.y)},add:function(i){return this.clone()._add(re(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(re(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new te(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new te(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ee(this.x),this.y=Ee(this.y),this},distanceTo:function(i){i=re(i);var l=i.x-this.x,d=i.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(i){return i=re(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=re(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+A(this.x)+", "+A(this.y)+")"}};function re(i,l,d){return i instanceof te?i:he(i)?new te(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new te(i.x,i.y):new te(i,l,d)}function z(i,l){if(i)for(var d=l?[i,l]:i,p=0,w=d.length;p<w;p++)this.extend(d[p])}z.prototype={extend:function(i){var l,d;if(!i)return this;if(i instanceof te||typeof i[0]=="number"||"x"in i)l=d=re(i);else if(i=J(i),l=i.min,d=i.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(i){return re((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return re(this.min.x,this.max.y)},getTopRight:function(){return re(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var l,d;return typeof i[0]=="number"||i instanceof te?i=re(i):i=J(i),i instanceof z?(l=i.min,d=i.max):l=d=i,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(i){i=J(i);var l=this.min,d=this.max,p=i.min,w=i.max,b=w.x>=l.x&&p.x<=d.x,O=w.y>=l.y&&p.y<=d.y;return b&&O},overlaps:function(i){i=J(i);var l=this.min,d=this.max,p=i.min,w=i.max,b=w.x>l.x&&p.x<d.x,O=w.y>l.y&&p.y<d.y;return b&&O},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*i,w=Math.abs(l.y-d.y)*i;return J(re(l.x-p,l.y-w),re(d.x+p,d.y+w))},equals:function(i){return i?(i=J(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function J(i,l){return!i||i instanceof z?i:new z(i,l)}function ge(i,l){if(i)for(var d=l?[i,l]:i,p=0,w=d.length;p<w;p++)this.extend(d[p])}ge.prototype={extend:function(i){var l=this._southWest,d=this._northEast,p,w;if(i instanceof Te)p=i,w=i;else if(i instanceof ge){if(p=i._southWest,w=i._northEast,!p||!w)return this}else return i?this.extend(ce(i)||ye(i)):this;return!l&&!d?(this._southWest=new Te(p.lat,p.lng),this._northEast=new Te(w.lat,w.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(w.lat,d.lat),d.lng=Math.max(w.lng,d.lng)),this},pad:function(i){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*i,w=Math.abs(l.lng-d.lng)*i;return new ge(new Te(l.lat-p,l.lng-w),new Te(d.lat+p,d.lng+w))},getCenter:function(){return new Te((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Te(this.getNorth(),this.getWest())},getSouthEast:function(){return new Te(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof Te||"lat"in i?i=ce(i):i=ye(i);var l=this._southWest,d=this._northEast,p,w;return i instanceof ge?(p=i.getSouthWest(),w=i.getNorthEast()):p=w=i,p.lat>=l.lat&&w.lat<=d.lat&&p.lng>=l.lng&&w.lng<=d.lng},intersects:function(i){i=ye(i);var l=this._southWest,d=this._northEast,p=i.getSouthWest(),w=i.getNorthEast(),b=w.lat>=l.lat&&p.lat<=d.lat,O=w.lng>=l.lng&&p.lng<=d.lng;return b&&O},overlaps:function(i){i=ye(i);var l=this._southWest,d=this._northEast,p=i.getSouthWest(),w=i.getNorthEast(),b=w.lat>l.lat&&p.lat<d.lat,O=w.lng>l.lng&&p.lng<d.lng;return b&&O},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,l){return i?(i=ye(i),this._southWest.equals(i.getSouthWest(),l)&&this._northEast.equals(i.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ye(i,l){return i instanceof ge?i:new ge(i,l)}function Te(i,l,d){if(isNaN(i)||isNaN(l))throw new Error("Invalid LatLng object: ("+i+", "+l+")");this.lat=+i,this.lng=+l,d!==void 0&&(this.alt=+d)}Te.prototype={equals:function(i,l){if(!i)return!1;i=ce(i);var d=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return d<=(l===void 0?1e-9:l)},toString:function(i){return"LatLng("+A(this.lat,i)+", "+A(this.lng,i)+")"},distanceTo:function(i){return Ue.distance(this,ce(i))},wrap:function(){return Ue.wrapLatLng(this)},toBounds:function(i){var l=180*i/40075017,d=l/Math.cos(Math.PI/180*this.lat);return ye([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Te(this.lat,this.lng,this.alt)}};function ce(i,l,d){return i instanceof Te?i:he(i)&&typeof i[0]!="object"?i.length===3?new Te(i[0],i[1],i[2]):i.length===2?new Te(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new Te(i.lat,"lng"in i?i.lng:i.lon,i.alt):l===void 0?null:new Te(i,l,d)}var Ge={latLngToPoint:function(i,l){var d=this.projection.project(i),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(i,l){var d=this.scale(l),p=this.transformation.untransform(i,d);return this.projection.unproject(p)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(i),p=this.transformation.transform(l.min,d),w=this.transformation.transform(l.max,d);return new z(p,w)},infinite:!1,wrapLatLng:function(i){var l=this.wrapLng?P(i.lng,this.wrapLng,!0):i.lng,d=this.wrapLat?P(i.lat,this.wrapLat,!0):i.lat,p=i.alt;return new Te(d,l,p)},wrapLatLngBounds:function(i){var l=i.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,w=l.lng-d.lng;if(p===0&&w===0)return i;var b=i.getSouthWest(),O=i.getNorthEast(),$=new Te(b.lat-p,b.lng-w),Y=new Te(O.lat-p,O.lng-w);return new ge($,Y)}},Ue=a({},Ge,{wrapLng:[-180,180],R:6371e3,distance:function(i,l){var d=Math.PI/180,p=i.lat*d,w=l.lat*d,b=Math.sin((l.lat-i.lat)*d/2),O=Math.sin((l.lng-i.lng)*d/2),$=b*b+Math.cos(p)*Math.cos(w)*O*O,Y=2*Math.atan2(Math.sqrt($),Math.sqrt(1-$));return this.R*Y}}),it=6378137,Rt={R:it,MAX_LATITUDE:85.0511287798,project:function(i){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,i.lat),-d),w=Math.sin(p*l);return new te(this.R*i.lng*l,this.R*Math.log((1+w)/(1-w))/2)},unproject:function(i){var l=180/Math.PI;return new Te((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*l,i.x*l/this.R)},bounds:(function(){var i=it*Math.PI;return new z([-i,-i],[i,i])})()};function Ur(i,l,d,p){if(he(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=l,this._c=d,this._d=p}Ur.prototype={transform:function(i,l){return this._transform(i.clone(),l)},_transform:function(i,l){return l=l||1,i.x=l*(this._a*i.x+this._b),i.y=l*(this._c*i.y+this._d),i},untransform:function(i,l){return l=l||1,new te((i.x/l-this._b)/this._a,(i.y/l-this._d)/this._c)}};function or(i,l,d,p){return new Ur(i,l,d,p)}var ar=a({},Ue,{code:"EPSG:3857",projection:Rt,transformation:(function(){var i=.5/(Math.PI*Rt.R);return or(i,.5,-i,.5)})()}),Wr=a({},ar,{code:"EPSG:900913"});function cs(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Hr(i,l){var d="",p,w,b,O,$,Y;for(p=0,b=i.length;p<b;p++){for($=i[p],w=0,O=$.length;w<O;w++)Y=$[w],d+=(w?"L":"M")+Y.x+" "+Y.y;d+=l?ve.svg?"z":"x":""}return d||"M0 0"}var _n=document.documentElement.style,Ar="ActiveXObject"in window,ft=Ar&&!document.addEventListener,St="msLaunchUri"in navigator&&!("documentMode"in document),yn=Vt("webkit"),Wt=Vt("android"),$n=Vt("android 2")||Vt("android 3"),Zs=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),qr=Wt&&Vt("Google")&&Zs<537&&!("AudioNode"in window),lr=!!window.opera,gi=!St&&Vt("chrome"),ur=Vt("gecko")&&!yn&&!lr&&!Ar,Mi=!gi&&Vt("safari"),vn=Vt("phantom"),cr="OTransition"in _n,kr=navigator.platform.indexOf("Win")===0,Rr=Ar&&"transition"in _n,$r="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!$n,_i="MozPerspective"in _n,Rn=!window.L_DISABLE_3D&&(Rr||$r||_i)&&!cr&&!vn,hr=typeof orientation<"u"||Vt("mobile"),dr=hr&&yn,wn=hr&&$r,fr=!window.PointerEvent&&window.MSPointerEvent,mr=!!(window.PointerEvent||fr),Tt="ontouchstart"in window||!!window.TouchEvent,Di=!window.L_NO_TOUCH&&(Tt||mr),je=hr&&lr,wt=hr&&ur,Ot=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Yt=(function(){var i=!1;try{var l=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",I,l),window.removeEventListener("testPassiveEventSupport",I,l)}catch{}return i})(),En=(function(){return!!document.createElement("canvas").getContext})(),Pt=!!(document.createElementNS&&cs("svg").createSVGRect),Ht=!!Pt&&(function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Gn=!Pt&&(function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var l=i.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}})(),qt=navigator.platform.indexOf("Mac")===0,cn=navigator.platform.indexOf("Linux")===0;function Vt(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var ve={ie:Ar,ielt9:ft,edge:St,webkit:yn,android:Wt,android23:$n,androidStock:qr,opera:lr,chrome:gi,gecko:ur,safari:Mi,phantom:vn,opera12:cr,win:kr,ie3d:Rr,webkit3d:$r,gecko3d:_i,any3d:Rn,mobile:hr,mobileWebkit:dr,mobileWebkit3d:wn,msPointer:fr,pointer:mr,touch:Di,touchNative:Tt,mobileOpera:je,mobileGecko:wt,retina:Ot,passiveEvents:Yt,canvas:En,svg:Pt,vml:Gn,inlineSvg:Ht,mac:qt,linux:cn},Oi=ve.msPointer?"MSPointerDown":"pointerdown",Zn=ve.msPointer?"MSPointerMove":"pointermove",Xo=ve.msPointer?"MSPointerUp":"pointerup",Jo=ve.msPointer?"MSPointerCancel":"pointercancel",hs={touchstart:Oi,touchmove:Zn,touchend:Xo,touchcancel:Jo},pr={touchstart:It,touchmove:gr,touchend:gr,touchcancel:gr},Gr={},ea=!1;function Ua(i,l,d){return l==="touchstart"&&ms(),pr[l]?(d=pr[l].bind(this,d),i.addEventListener(hs[l],d,!1),d):(console.warn("wrong event specified:",l),I)}function Wa(i,l,d){if(!hs[l]){console.warn("wrong event specified:",l);return}i.removeEventListener(hs[l],d,!1)}function ds(i){Gr[i.pointerId]=i}function ta(i){Gr[i.pointerId]&&(Gr[i.pointerId]=i)}function fs(i){delete Gr[i.pointerId]}function ms(){ea||(document.addEventListener(Oi,ds,!0),document.addEventListener(Zn,ta,!0),document.addEventListener(Xo,fs,!0),document.addEventListener(Jo,fs,!0),ea=!0)}function gr(i,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Gr)l.touches.push(Gr[d]);l.changedTouches=[l],i(l)}}function It(i,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&bt(l),gr(i,l)}function ql(i){var l={},d,p;for(p in i)d=i[p],l[p]=d&&d.bind?d.bind(i):d;return i=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Ks=200;function na(i,l){i.addEventListener("dblclick",l);var d=0,p;function w(b){if(b.detail!==1){p=b.detail;return}if(!(b.pointerType==="mouse"||b.sourceCapabilities&&!b.sourceCapabilities.firesTouchEvents)){var O=Xr(b);if(!(O.some(function(Y){return Y instanceof HTMLLabelElement&&Y.attributes.for})&&!O.some(function(Y){return Y instanceof HTMLInputElement||Y instanceof HTMLSelectElement}))){var $=Date.now();$-d<=Ks?(p++,p===2&&l(ql(b))):p=1,d=$}}}return i.addEventListener("click",w),{dblclick:l,simDblclick:w}}function ps(i,l){i.removeEventListener("dblclick",l.dblclick),i.removeEventListener("click",l.simDblclick)}var gs=Fi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Zr=Fi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Vi=Zr==="webkitTransition"||Zr==="OTransition"?Zr+"End":"transitionend";function Nn(i){return typeof i=="string"?document.getElementById(i):i}function zi(i,l){var d=i.style[l]||i.currentStyle&&i.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(i,null);d=p?p[l]:null}return d==="auto"?null:d}function Ze(i,l,d){var p=document.createElement(i);return p.className=l||"",d&&d.appendChild(p),p}function ut(i){var l=i.parentNode;l&&l.removeChild(i)}function Tn(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function _r(i){var l=i.parentNode;l&&l.lastChild!==i&&l.appendChild(i)}function xn(i){var l=i.parentNode;l&&l.firstChild!==i&&l.insertBefore(i,l.firstChild)}function Kr(i,l){if(i.classList!==void 0)return i.classList.contains(l);var d=Qr(i);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function xe(i,l){if(i.classList!==void 0)for(var d=Z(l),p=0,w=d.length;p<w;p++)i.classList.add(d[p]);else if(!Kr(i,l)){var b=Qr(i);yi(i,(b?b+" ":"")+l)}}function gt(i,l){i.classList!==void 0?i.classList.remove(l):yi(i,H((" "+Qr(i)+" ").replace(" "+l+" "," ")))}function yi(i,l){i.className.baseVal===void 0?i.className=l:i.className.baseVal=l}function Qr(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function hn(i,l){"opacity"in i.style?i.style.opacity=l:"filter"in i.style&&ra(i,l)}function ra(i,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=i.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):i.style.filter+=" progid:"+p+"(opacity="+l+")"}function Fi(i){for(var l=document.documentElement.style,d=0;d<i.length;d++)if(i[d]in l)return i[d];return!1}function Kn(i,l,d){var p=l||new te(0,0);i.style[gs]=(ve.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function Lt(i,l){i._leaflet_pos=l,ve.any3d?Kn(i,l):(i.style.left=l.x+"px",i.style.top=l.y+"px")}function Nr(i){return i._leaflet_pos||new te(0,0)}var et,Ln,_s;if("onselectstart"in document)et=function(){Ve(window,"selectstart",bt)},Ln=function(){_t(window,"selectstart",bt)};else{var Yr=Fi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);et=function(){if(Yr){var i=document.documentElement.style;_s=i[Yr],i[Yr]="none"}},Ln=function(){Yr&&(document.documentElement.style[Yr]=_s,_s=void 0)}}function ys(){Ve(window,"dragstart",bt)}function vs(){_t(window,"dragstart",bt)}var ji,yr;function Bi(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Qn(),ji=i,yr=i.style.outlineStyle,i.style.outlineStyle="none",Ve(window,"keydown",Qn))}function Qn(){ji&&(ji.style.outlineStyle=yr,ji=void 0,yr=void 0,_t(window,"keydown",Qn))}function Lr(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Gt(i){var l=i.getBoundingClientRect();return{x:l.width/i.offsetWidth||1,y:l.height/i.offsetHeight||1,boundingClientRect:l}}var ws={__proto__:null,TRANSFORM:gs,TRANSITION:Zr,TRANSITION_END:Vi,get:Nn,getStyle:zi,create:Ze,remove:ut,empty:Tn,toFront:_r,toBack:xn,hasClass:Kr,addClass:xe,removeClass:gt,setClass:yi,getClass:Qr,setOpacity:hn,testProp:Fi,setTransform:Kn,setPosition:Lt,getPosition:Nr,get disableTextSelection(){return et},get enableTextSelection(){return Ln},disableImageDrag:ys,enableImageDrag:vs,preventOutline:Bi,restoreOutline:Qn,getSizedParentNode:Lr,getScale:Gt};function Ve(i,l,d,p){if(l&&typeof l=="object")for(var w in l)Qs(i,w,l[w],d);else{l=Z(l);for(var b=0,O=l.length;b<O;b++)Qs(i,l[b],d,p)}return this}var Mt="_leaflet_events";function _t(i,l,d,p){if(arguments.length===1)vi(i),delete i[Mt];else if(l&&typeof l=="object")for(var w in l)Ui(i,w,l[w],d);else if(l=Z(l),arguments.length===2)vi(i,function($){return Me(l,$)!==-1});else for(var b=0,O=l.length;b<O;b++)Ui(i,l[b],d,p);return this}function vi(i,l){for(var d in i[Mt]){var p=d.split(/\d/)[0];(!l||l(p))&&Ui(i,p,null,null,d)}}var Yn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Qs(i,l,d,p){var w=l+E(d)+(p?"_"+E(p):"");if(i[Mt]&&i[Mt][w])return this;var b=function($){return d.call(p||i,$||window.event)},O=b;!ve.touchNative&&ve.pointer&&l.indexOf("touch")===0?b=Ua(i,l,b):ve.touch&&l==="dblclick"?b=na(i,b):"addEventListener"in i?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?i.addEventListener(Yn[l]||l,b,ve.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(b=function($){$=$||window.event,Ts(i,$)&&O($)},i.addEventListener(Yn[l],b,!1)):i.addEventListener(l,O,!1):i.attachEvent("on"+l,b),i[Mt]=i[Mt]||{},i[Mt][w]=b}function Ui(i,l,d,p,w){w=w||l+E(d)+(p?"_"+E(p):"");var b=i[Mt]&&i[Mt][w];if(!b)return this;!ve.touchNative&&ve.pointer&&l.indexOf("touch")===0?Wa(i,l,b):ve.touch&&l==="dblclick"?ps(i,b):"removeEventListener"in i?i.removeEventListener(Yn[l]||l,b,!1):i.detachEvent("on"+l,b),i[Mt][w]=null}function lt(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Ys(i){return Qs(i,"wheel",lt),this}function Es(i){return Ve(i,"mousedown touchstart dblclick contextmenu",lt),i._leaflet_disable_click=!0,this}function bt(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Mn(i){return bt(i),lt(i),this}function Xr(i){if(i.composedPath)return i.composedPath();for(var l=[],d=i.target;d;)l.push(d),d=d.parentNode;return l}function Jr(i,l){if(!l)return new te(i.clientX,i.clientY);var d=Gt(l),p=d.boundingClientRect;return new te((i.clientX-p.left)/d.x-l.clientLeft,(i.clientY-p.top)/d.y-l.clientTop)}var ei=ve.linux&&ve.chrome?window.devicePixelRatio:ve.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ia(i){return ve.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/ei:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function Ts(i,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==i;)d=d.parentNode}catch{return!1}return d!==i}var ti={__proto__:null,on:Ve,off:_t,stopPropagation:lt,disableScrollPropagation:Ys,disableClickPropagation:Es,preventDefault:bt,stop:Mn,getPropagationPath:Xr,getMousePosition:Jr,getWheelDelta:ia,isExternalTarget:Ts,addListener:Ve,removeListener:_t},xs=Oe.extend({run:function(i,l,d,p){this.stop(),this._el=i,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Nr(i),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(i){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),i):(this._runFrame(1),this._complete())},_runFrame:function(i,l){var d=this._startPos.add(this._offset.multiplyBy(i));l&&d._round(),Lt(this._el,d),this.fire("step")},_complete:function(){W(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),tt=Oe.extend({options:{crs:ar,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,l){l=ne(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=m(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ce(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Zr&&ve.any3d&&!ve.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ve(this._proxy,Vi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),i=this._limitCenter(ce(i),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=a({animate:d.animate},d.zoom),d.pan=a({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,l,d.zoom):this._tryAnimatedPan(i,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(i,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(i,l){return this._loaded?this.setView(this.getCenter(),i,{zoom:l}):(this._zoom=i,this)},zoomIn:function(i,l){return i=i||(ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,l)},zoomOut:function(i,l){return i=i||(ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,l)},setZoomAround:function(i,l,d){var p=this.getZoomScale(l),w=this.getSize().divideBy(2),b=i instanceof te?i:this.latLngToContainerPoint(i),O=b.subtract(w).multiplyBy(1-1/p),$=this.containerPointToLatLng(w.add(O));return this.setView($,l,{zoom:d})},_getBoundsCenterZoom:function(i,l){l=l||{},i=i.getBounds?i.getBounds():ye(i);var d=re(l.paddingTopLeft||l.padding||[0,0]),p=re(l.paddingBottomRight||l.padding||[0,0]),w=this.getBoundsZoom(i,!1,d.add(p));if(w=typeof l.maxZoom=="number"?Math.min(l.maxZoom,w):w,w===1/0)return{center:i.getCenter(),zoom:w};var b=p.subtract(d).divideBy(2),O=this.project(i.getSouthWest(),w),$=this.project(i.getNorthEast(),w),Y=this.unproject(O.add($).divideBy(2).add(b),w);return{center:Y,zoom:w}},fitBounds:function(i,l){if(i=ye(i),!i.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(i,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,l){return this.setView(i,this._zoom,{pan:l})},panBy:function(i,l){if(i=re(i).round(),l=l||{},!i.x&&!i.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new xs,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){xe(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,l,d){if(d=d||{},d.animate===!1||!ve.any3d)return this.setView(i,l,d);this._stop();var p=this.project(this.getCenter()),w=this.project(i),b=this.getSize(),O=this._zoom;i=ce(i),l=l===void 0?O:l;var $=Math.max(b.x,b.y),Y=$*this.getZoomScale(O,l),oe=w.distanceTo(p)||1,we=1.42,De=we*we;function Je(vt){var _o=vt?-1:1,ld=vt?Y:$,ud=Y*Y-$*$+_o*De*De*oe*oe,As=2*ld*De*oe,ks=ud/As,Rs=Math.sqrt(ks*ks+1)-ks,tl=Rs<1e-9?-18:Math.log(Rs);return tl}function on(vt){return(Math.exp(vt)-Math.exp(-vt))/2}function Jt(vt){return(Math.exp(vt)+Math.exp(-vt))/2}function nr(vt){return on(vt)/Jt(vt)}var Vn=Je(0);function po(vt){return $*(Jt(Vn)/Jt(Vn+we*vt))}function ru(vt){return $*(Jt(Vn)*nr(Vn+we*vt)-on(Vn))/De}function Ki(vt){return 1-Math.pow(1-vt,1.5)}var dc=Date.now(),Cs=(Je(1)-Vn)/we,li=d.duration?1e3*d.duration:1e3*Cs*.8;function go(){var vt=(Date.now()-dc)/li,_o=Ki(vt)*Cs;vt<=1?(this._flyToFrame=V(go,this),this._move(this.unproject(p.add(w.subtract(p).multiplyBy(ru(_o)/oe)),O),this.getScaleZoom($/po(_o),O),{flyTo:!0})):this._move(i,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),go.call(this),this},flyToBounds:function(i,l){var d=this._getBoundsCenterZoom(i,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(i){return i=ye(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var l=this.options.minZoom;return this.options.minZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var l=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,ye(i));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(i,l){l=l||{};var d=re(l.paddingTopLeft||l.padding||[0,0]),p=re(l.paddingBottomRight||l.padding||[0,0]),w=this.project(this.getCenter()),b=this.project(i),O=this.getPixelBounds(),$=J([O.min.add(d),O.max.subtract(p)]),Y=$.getSize();if(!$.contains(b)){this._enforcingBounds=!0;var oe=b.subtract($.getCenter()),we=$.extend(b).getSize().subtract(Y);w.x+=oe.x<0?-we.x:we.x,w.y+=oe.y<0?-we.y:we.y,this.panTo(this.unproject(w),l),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=a({animate:!1,pan:!0},i===!0?{animate:!0}:i);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),w=d.divideBy(2).round(),b=p.subtract(w);return!b.x&&!b.y?this:(i.animate&&i.pan?this.panBy(b):(i.pan&&this._rawPanBy(b),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(m(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=a({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=m(this._handleGeolocationResponse,this),d=m(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,i):navigator.geolocation.getCurrentPosition(l,d,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var l=i.code,d=i.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var l=i.coords.latitude,d=i.coords.longitude,p=new Te(l,d),w=p.toBounds(i.coords.accuracy*2),b=this._locateOptions;if(b.setView){var O=this.getBoundsZoom(w);this.setView(p,b.maxZoom?Math.min(O,b.maxZoom):O)}var $={latlng:p,bounds:w,timestamp:i.timestamp};for(var Y in i.coords)typeof i.coords[Y]=="number"&&($[Y]=i.coords[Y]);this.fire("locationfound",$)}},addHandler:function(i,l){if(!l)return this;var d=this[i]=new l(this);return this._handlers.push(d),this.options[i]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ut(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(W(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)ut(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,l){var d="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),p=Ze("div",d,l||this._mapPane);return i&&(this._panes[i]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),l=this.unproject(i.getBottomLeft()),d=this.unproject(i.getTopRight());return new ge(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,l,d){i=ye(i),d=re(d||[0,0]);var p=this.getZoom()||0,w=this.getMinZoom(),b=this.getMaxZoom(),O=i.getNorthWest(),$=i.getSouthEast(),Y=this.getSize().subtract(d),oe=J(this.project($,p),this.project(O,p)).getSize(),we=ve.any3d?this.options.zoomSnap:1,De=Y.x/oe.x,Je=Y.y/oe.y,on=l?Math.max(De,Je):Math.min(De,Je);return p=this.getScaleZoom(on,p),we&&(p=Math.round(p/(we/100))*(we/100),p=l?Math.ceil(p/we)*we:Math.floor(p/we)*we),Math.max(w,Math.min(b,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new te(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,l){var d=this._getTopLeftPoint(i,l);return new z(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(i)/d.scale(l)},getScaleZoom:function(i,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(i*d.scale(l));return isNaN(p)?1/0:p},project:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ce(i),l)},unproject:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(re(i),l)},layerPointToLatLng:function(i){var l=re(i).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(i){var l=this.project(ce(i))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(ce(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(ye(i))},distance:function(i,l){return this.options.crs.distance(ce(i),ce(l))},containerPointToLayerPoint:function(i){return re(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return re(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var l=this.containerPointToLayerPoint(re(i));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(i)))},mouseEventToContainerPoint:function(i){return Jr(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var l=this._container=Nn(i);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ve(l,"scroll",this._onScroll,this),this._containerId=E(l)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&ve.any3d,xe(i,"leaflet-container"+(ve.touch?" leaflet-touch":"")+(ve.retina?" leaflet-retina":"")+(ve.ielt9?" leaflet-oldie":"")+(ve.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=zi(i,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Lt(this._mapPane,new te(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(xe(i.markerPane,"leaflet-zoom-hide"),xe(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,l,d){Lt(this._mapPane,new te(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var w=this._zoom!==l;this._moveStart(w,d)._move(i,l)._moveEnd(w),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(i,l){return i&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(i,l,d,p){l===void 0&&(l=this._zoom);var w=this._zoom!==l;return this._zoom=l,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),p?d&&d.pinch&&this.fire("zoom",d):((w||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return W(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){Lt(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[E(this._container)]=this;var l=i?_t:Ve;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ve.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){W(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,l){for(var d=[],p,w=l==="mouseout"||l==="mouseover",b=i.target||i.srcElement,O=!1;b;){if(p=this._targets[E(b)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){O=!0;break}if(p&&p.listens(l,!0)&&(w&&!Ts(b,i)||(d.push(p),w))||b===this._container)break;b=b.parentNode}return!d.length&&!O&&!w&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var l=i.target||i.srcElement;if(!(!this._loaded||l._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(l))){var d=i.type;d==="mousedown"&&Bi(l),this._fireDOMEvent(i,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,l,d){if(i.type==="click"){var p=a({},i);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var w=this._findEventTargets(i,l);if(d){for(var b=[],O=0;O<d.length;O++)d[O].listens(l,!0)&&b.push(d[O]);w=b.concat(w)}if(w.length){l==="contextmenu"&&bt(i);var $=w[0],Y={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var oe=$.getLatLng&&(!$._radius||$._radius<=10);Y.containerPoint=oe?this.latLngToContainerPoint($.getLatLng()):this.mouseEventToContainerPoint(i),Y.layerPoint=this.containerPointToLayerPoint(Y.containerPoint),Y.latlng=oe?$.getLatLng():this.layerPointToLatLng(Y.layerPoint)}for(O=0;O<w.length;O++)if(w[O].fire(l,Y,!0),Y.originalEvent._stopped||w[O].options.bubblingMouseEvents===!1&&Me(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,l=this._handlers.length;i<l;i++)this._handlers[i].disable()},whenReady:function(i,l){return this._loaded?i.call(l||this,{target:this}):this.on("load",i,l),this},_getMapPanePos:function(){return Nr(this._mapPane)||new te(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,l){var d=i&&l!==void 0?this._getNewPixelOrigin(i,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,l){var d=this.getSize()._divideBy(2);return this.project(i,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(i,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(i,l,d){var p=this._getNewPixelOrigin(d,l);return J([this.project(i.getSouthWest(),l)._subtract(p),this.project(i.getNorthWest(),l)._subtract(p),this.project(i.getSouthEast(),l)._subtract(p),this.project(i.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,l,d){if(!d)return i;var p=this.project(i,l),w=this.getSize().divideBy(2),b=new z(p.subtract(w),p.add(w)),O=this._getBoundsOffset(b,d,l);return Math.abs(O.x)<=1&&Math.abs(O.y)<=1?i:this.unproject(p.add(O),l)},_limitOffset:function(i,l){if(!l)return i;var d=this.getPixelBounds(),p=new z(d.min.add(i),d.max.add(i));return i.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(i,l,d){var p=J(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),w=p.min.subtract(i.min),b=p.max.subtract(i.max),O=this._rebound(w.x,-b.x),$=this._rebound(w.y,-b.y);return new te(O,$)},_rebound:function(i,l){return i+l>0?Math.round(i-l)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(l))},_limitZoom:function(i){var l=this.getMinZoom(),d=this.getMaxZoom(),p=ve.any3d?this.options.zoomSnap:1;return p&&(i=Math.round(i/p)*p),Math.max(l,Math.min(d,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){gt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,l){var d=this._getCenterOffset(i)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var i=this._proxy=Ze("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(l){var d=gs,p=this._proxy.style[d];Kn(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ut(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),l=this.getZoom();Kn(this._proxy,this.project(i,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),w=this._getCenterOffset(i)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(w)?!1:(V(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(i,l,!0)},this),!0)},_animateZoom:function(i,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=l,xe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(m(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&gt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Xn(i,l){return new tt(i,l)}var dn=Xe.extend({options:{position:"topright"},initialize:function(i){ne(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var l=this._map;return l&&l.removeControl(this),this.options.position=i,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var l=this._container=this.onAdd(i),d=this.getPosition(),p=i._controlCorners[d];return xe(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ut(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Jn=function(i){return new dn(i)};tt.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},l="leaflet-",d=this._controlContainer=Ze("div",l+"control-container",this._container);function p(w,b){var O=l+w+" "+l+b;i[w+b]=Ze("div",O,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)ut(this._controlCorners[i]);ut(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var sa=dn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(i,l,d){ne(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in i)this._addLayer(i[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return dn.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,l){return this._addLayer(i,l),this._map?this._update():this},addOverlay:function(i,l){return this._addLayer(i,l,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var l=this._getLayer(E(i));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){xe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(xe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):gt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return gt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",l=this._container=Ze("div",i),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Es(l),Ys(l);var p=this._section=Ze("section",i+"-list");d&&(this._map.on("click",this.collapse,this),Ve(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var w=this._layersLink=Ze("a",i+"-toggle",l);w.href="#",w.title="Layers",w.setAttribute("role","button"),Ve(w,{keydown:function(b){b.keyCode===13&&this._expandSafely()},click:function(b){bt(b),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Ze("div",i+"-base",p),this._separator=Ze("div",i+"-separator",p),this._overlaysList=Ze("div",i+"-overlays",p),l.appendChild(p)},_getLayer:function(i){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&E(this._layers[l].layer)===i)return this._layers[l]},_addLayer:function(i,l,d){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(m(function(p,w){return this.options.sortFunction(p.layer,w.layer,p.name,w.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Tn(this._baseLayersList),Tn(this._overlaysList),this._layerControlInputs=[];var i,l,d,p,w=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,i=i||!p.overlay,w+=p.overlay?0:1;return this.options.hideSingleBase&&(i=i&&w>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=l&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var l=this._getLayer(E(i.target)),d=l.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(i,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(i){var l=document.createElement("label"),d=this._map.hasLayer(i.layer),p;i.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+E(this),d),this._layerControlInputs.push(p),p.layerId=E(i.layer),Ve(p,"click",this._onInputClick,this);var w=document.createElement("span");w.innerHTML=" "+i.name;var b=document.createElement("span");l.appendChild(b),b.appendChild(p),b.appendChild(w);var O=i.overlay?this._overlaysList:this._baseLayersList;return O.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,l,d,p=[],w=[];this._handlingClick=!0;for(var b=i.length-1;b>=0;b--)l=i[b],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||w.push(d);for(b=0;b<w.length;b++)this._map.hasLayer(w[b])&&this._map.removeLayer(w[b]);for(b=0;b<p.length;b++)this._map.hasLayer(p[b])||this._map.addLayer(p[b]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,l,d,p=this._map.getZoom(),w=i.length-1;w>=0;w--)l=i[w],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,Ve(i,"click",bt),this.expand();var l=this;setTimeout(function(){_t(i,"click",bt),l._preventClick=!1})}}),Is=function(i,l,d){return new sa(i,l,d)},vr=dn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var l="leaflet-control-zoom",d=Ze("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,l,d,p,w){var b=Ze("a",d,p);return b.innerHTML=i,b.href="#",b.title=l,b.setAttribute("role","button"),b.setAttribute("aria-label",l),Es(b),Ve(b,"click",Mn),Ve(b,"click",w,this),Ve(b,"click",this._refocusOnMap,this),b},_updateDisabled:function(){var i=this._map,l="leaflet-disabled";gt(this._zoomInButton,l),gt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(xe(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(xe(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});tt.mergeOptions({zoomControl:!0}),tt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new vr,this.addControl(this.zoomControl))});var oa=function(i){return new vr(i)},sn=dn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var l="leaflet-control-scale",d=Ze("div",l),p=this.options;return this._addScales(p,l+"-line",d),i.on(p.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),d},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,l,d){i.metric&&(this._mScale=Ze("div",l,d)),i.imperial&&(this._iScale=Ze("div",l,d))},_update:function(){var i=this._map,l=i.getSize().y/2,d=i.distance(i.containerPointToLatLng([0,l]),i.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var l=this._getRoundNum(i),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/i)},_updateImperial:function(i){var l=i*3.2808399,d,p,w;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(w=this._getRoundNum(l),this._updateScale(this._iScale,w+" ft",w/l))},_updateScale:function(i,l,d){i.style.width=Math.round(this.options.maxWidth*d)+"px",i.innerHTML=l},_getRoundNum:function(i){var l=Math.pow(10,(Math.floor(i)+"").length-1),d=i/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),ni=function(i){return new sn(i)},Ss='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ri=dn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ve.inlineSvg?Ss+" ":"")+"Leaflet</a>"},initialize:function(i){ne(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Ze("div","leaflet-control-attribution"),Es(this._container);for(var l in i._layers)i._layers[l].getAttribution&&this.addAttribution(i._layers[l].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var l in this._attributions)this._attributions[l]&&i.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),i.length&&d.push(i.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});tt.mergeOptions({attributionControl:!0}),tt.addInitHook(function(){this.options.attributionControl&&new ri().addTo(this)});var Xs=function(i){return new ri(i)};dn.Layers=sa,dn.Zoom=vr,dn.Scale=sn,dn.Attribution=ri,Jn.layers=Is,Jn.zoom=oa,Jn.scale=ni,Jn.attribution=Xs;var In=Xe.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});In.addTo=function(i,l){return i.addHandler(l,this),this};var Js={Events:fe},Dn=ve.touch?"touchstart mousedown":"mousedown",On=Oe.extend({options:{clickTolerance:3},initialize:function(i,l,d,p){ne(this,p),this._element=i,this._dragStartTarget=l||i,this._preventOutline=d},enable:function(){this._enabled||(Ve(this._dragStartTarget,Dn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(On._dragging===this&&this.finishDrag(!0),_t(this._dragStartTarget,Dn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Kr(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){On._dragging===this&&this.finishDrag();return}if(!(On._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(On._dragging=this,this._preventOutline&&Bi(this._element),ys(),et(),!this._moving)){this.fire("down");var l=i.touches?i.touches[0]:i,d=Lr(this._element);this._startPoint=new te(l.clientX,l.clientY),this._startPos=Nr(this._element),this._parentScale=Gt(d);var p=i.type==="mousedown";Ve(document,p?"mousemove":"touchmove",this._onMove,this),Ve(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var l=i.touches&&i.touches.length===1?i.touches[0]:i,d=new te(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,bt(i),this._moved||(this.fire("dragstart"),this._moved=!0,xe(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),xe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),Lt(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){gt(document.body,"leaflet-dragging"),this._lastTarget&&(gt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),_t(document,"mousemove touchmove",this._onMove,this),_t(document,"mouseup touchend touchcancel",this._onUp,this),vs(),Ln();var l=this._moved&&this._moving;this._moving=!1,On._dragging=!1,l&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function eo(i,l,d){var p,w=[1,4,2,8],b,O,$,Y,oe,we,De,Je;for(b=0,we=i.length;b<we;b++)i[b]._code=Q(i[b],l);for($=0;$<4;$++){for(De=w[$],p=[],b=0,we=i.length,O=we-1;b<we;O=b++)Y=i[b],oe=i[O],Y._code&De?oe._code&De||(Je=q(oe,Y,De,l,d),Je._code=Q(Je,l),p.push(Je)):(oe._code&De&&(Je=q(oe,Y,De,l,d),Je._code=Q(Je,l),p.push(Je)),p.push(Y));i=p}return i}function aa(i,l){var d,p,w,b,O,$,Y,oe,we;if(!i||i.length===0)throw new Error("latlngs not passed");ct(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var De=ce([0,0]),Je=ye(i),on=Je.getNorthWest().distanceTo(Je.getSouthWest())*Je.getNorthEast().distanceTo(Je.getNorthWest());on<1700&&(De=to(i));var Jt=i.length,nr=[];for(d=0;d<Jt;d++){var Vn=ce(i[d]);nr.push(l.project(ce([Vn.lat-De.lat,Vn.lng-De.lng])))}for($=Y=oe=0,d=0,p=Jt-1;d<Jt;p=d++)w=nr[d],b=nr[p],O=w.y*b.x-b.y*w.x,Y+=(w.x+b.x)*O,oe+=(w.y+b.y)*O,$+=O*3;$===0?we=nr[0]:we=[Y/$,oe/$];var po=l.unproject(re(we));return ce([po.lat+De.lat,po.lng+De.lng])}function to(i){for(var l=0,d=0,p=0,w=0;w<i.length;w++){var b=ce(i[w]);l+=b.lat,d+=b.lng,p++}return ce([l/p,d/p])}var no={__proto__:null,clipPolygon:eo,polygonCenter:aa,centroid:to};function Xt(i,l){if(!l||!i.length)return i.slice();var d=l*l;return i=y(i,d),i=Wi(i,d),i}function la(i,l,d){return Math.sqrt(Be(i,l,d,!0))}function Ha(i,l,d){return Be(i,l,d)}function Wi(i,l){var d=i.length,p=typeof Uint8Array<"u"?Uint8Array:Array,w=new p(d);w[0]=w[d-1]=1,h(i,w,l,0,d-1);var b,O=[];for(b=0;b<d;b++)w[b]&&O.push(i[b]);return O}function h(i,l,d,p,w){var b=0,O,$,Y;for($=p+1;$<=w-1;$++)Y=Be(i[$],i[p],i[w],!0),Y>b&&(O=$,b=Y);b>d&&(l[O]=1,h(i,l,d,p,O),h(i,l,d,O,w))}function y(i,l){for(var d=[i[0]],p=1,w=0,b=i.length;p<b;p++)me(i[p],i[w])>l&&(d.push(i[p]),w=p);return w<b-1&&d.push(i[b-1]),d}var T;function C(i,l,d,p,w){var b=p?T:Q(i,d),O=Q(l,d),$,Y,oe;for(T=O;;){if(!(b|O))return[i,l];if(b&O)return!1;$=b||O,Y=q(i,l,$,d,w),oe=Q(Y,d),$===b?(i=Y,b=oe):(l=Y,O=oe)}}function q(i,l,d,p,w){var b=l.x-i.x,O=l.y-i.y,$=p.min,Y=p.max,oe,we;return d&8?(oe=i.x+b*(Y.y-i.y)/O,we=Y.y):d&4?(oe=i.x+b*($.y-i.y)/O,we=$.y):d&2?(oe=Y.x,we=i.y+O*(Y.x-i.x)/b):d&1&&(oe=$.x,we=i.y+O*($.x-i.x)/b),new te(oe,we,w)}function Q(i,l){var d=0;return i.x<l.min.x?d|=1:i.x>l.max.x&&(d|=2),i.y<l.min.y?d|=4:i.y>l.max.y&&(d|=8),d}function me(i,l){var d=l.x-i.x,p=l.y-i.y;return d*d+p*p}function Be(i,l,d,p){var w=l.x,b=l.y,O=d.x-w,$=d.y-b,Y=O*O+$*$,oe;return Y>0&&(oe=((i.x-w)*O+(i.y-b)*$)/Y,oe>1?(w=d.x,b=d.y):oe>0&&(w+=O*oe,b+=$*oe)),O=i.x-w,$=i.y-b,p?O*O+$*$:new te(w,b)}function ct(i){return!he(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function mt(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ct(i)}function zt(i,l){var d,p,w,b,O,$,Y,oe;if(!i||i.length===0)throw new Error("latlngs not passed");ct(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var we=ce([0,0]),De=ye(i),Je=De.getNorthWest().distanceTo(De.getSouthWest())*De.getNorthEast().distanceTo(De.getNorthWest());Je<1700&&(we=to(i));var on=i.length,Jt=[];for(d=0;d<on;d++){var nr=ce(i[d]);Jt.push(l.project(ce([nr.lat-we.lat,nr.lng-we.lng])))}for(d=0,p=0;d<on-1;d++)p+=Jt[d].distanceTo(Jt[d+1])/2;if(p===0)oe=Jt[0];else for(d=0,b=0;d<on-1;d++)if(O=Jt[d],$=Jt[d+1],w=O.distanceTo($),b+=w,b>p){Y=(b-p)/w,oe=[$.x-Y*($.x-O.x),$.y-Y*($.y-O.y)];break}var Vn=l.unproject(re(oe));return ce([Vn.lat+we.lat,Vn.lng+we.lng])}var er={__proto__:null,simplify:Xt,pointToSegmentDistance:la,closestPointOnSegment:Ha,clipSegment:C,_getEdgeIntersection:q,_getBitCode:Q,_sqClosestPointOnSegment:Be,isFlat:ct,_flat:mt,polylineCenter:zt},Mr={project:function(i){return new te(i.lng,i.lat)},unproject:function(i){return new Te(i.y,i.x)},bounds:new z([-180,-90],[180,90])},wr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new z([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var l=Math.PI/180,d=this.R,p=i.lat*l,w=this.R_MINOR/d,b=Math.sqrt(1-w*w),O=b*Math.sin(p),$=Math.tan(Math.PI/4-p/2)/Math.pow((1-O)/(1+O),b/2);return p=-d*Math.log(Math.max($,1e-10)),new te(i.lng*l*d,p)},unproject:function(i){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,w=Math.sqrt(1-p*p),b=Math.exp(-i.y/d),O=Math.PI/2-2*Math.atan(b),$=0,Y=.1,oe;$<15&&Math.abs(Y)>1e-7;$++)oe=w*Math.sin(O),oe=Math.pow((1-oe)/(1+oe),w/2),Y=Math.PI/2-2*Math.atan(b*oe)-O,O+=Y;return new Te(O*l,i.x*l/d)}},ii={__proto__:null,LonLat:Mr,Mercator:wr,SphericalMercator:Rt},ro=a({},Ue,{code:"EPSG:3395",projection:wr,transformation:(function(){var i=.5/(Math.PI*wr.R);return or(i,.5,-i,.5)})()}),io=a({},Ue,{code:"EPSG:4326",projection:Mr,transformation:or(1/180,1,-1/180,.5)}),rd=a({},Ge,{projection:Mr,transformation:or(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,l){var d=l.lng-i.lng,p=l.lat-i.lat;return Math.sqrt(d*d+p*p)},infinite:!0});Ge.Earth=Ue,Ge.EPSG3395=ro,Ge.EPSG3857=ar,Ge.EPSG900913=Wr,Ge.EPSG4326=io,Ge.Simple=rd;var Dr=Oe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[E(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[E(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var l=i.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});tt.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var l=E(i);return this._layers[l]?this:(this._layers[l]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var l=E(i);return this._layers[l]?(this._loaded&&i.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return E(i)in this._layers},eachLayer:function(i,l){for(var d in this._layers)i.call(l,this._layers[d]);return this},_addLayers:function(i){i=i?he(i)?i:[i]:[];for(var l=0,d=i.length;l<d;l++)this.addLayer(i[l])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[E(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var l=E(i);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var w=this._zoomBoundLayers[p].options;i=w.minZoom===void 0?i:Math.min(i,w.minZoom),l=w.maxZoom===void 0?l:Math.max(l,w.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=i===1/0?void 0:i,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Hi=Dr.extend({initialize:function(i,l){ne(this,l),this._layers={};var d,p;if(i)for(d=0,p=i.length;d<p;d++)this.addLayer(i[d])},addLayer:function(i){var l=this.getLayerId(i);return this._layers[l]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var l=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(i){var l=typeof i=="number"?i:this.getLayerId(i);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[i]&&p[i].apply(p,l);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,l){for(var d in this._layers)i.call(l,this._layers[d]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return E(i)}}),ua=function(i,l){return new Hi(i,l)},wi=Hi.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),Hi.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),Hi.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new ge;for(var l in this._layers){var d=this._layers[l];i.extend(d.getBounds?d.getBounds():d.getLatLng())}return i}}),ec=function(i,l){return new wi(i,l)},Ps=Xe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){ne(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,l){var d=this._getIconUrl(i);if(!d){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(i,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var w=re(p),b=re(l==="shadow"&&d.shadowAnchor||d.iconAnchor||w&&w.divideBy(2,!0));i.className="leaflet-marker-"+l+" "+(d.className||""),b&&(i.style.marginLeft=-b.x+"px",i.style.marginTop=-b.y+"px"),w&&(i.style.width=w.x+"px",i.style.height=w.y+"px")},_createImg:function(i,l){return l=l||document.createElement("img"),l.src=i,l},_getIconUrl:function(i){return ve.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function tc(i){return new Ps(i)}var so=Ps.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof so.imagePath!="string"&&(so.imagePath=this._detectIconPath()),(this.options.imagePath||so.imagePath)+Ps.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var l=function(d,p,w){var b=p.exec(d);return b&&b[w]};return i=l(i,/^url\((['"])?(.+)\1\)$/,2),i&&l(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=Ze("div","leaflet-default-icon-path",document.body),l=zi(i,"background-image")||zi(i,"backgroundImage");if(document.body.removeChild(i),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),$l=In.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new On(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),xe(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&gt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,w=this._marker.options.autoPanPadding,b=Nr(l._icon),O=d.getPixelBounds(),$=d.getPixelOrigin(),Y=J(O.min._subtract($).add(w),O.max._subtract($).subtract(w));if(!Y.contains(b)){var oe=re((Math.max(Y.max.x,b.x)-Y.max.x)/(O.max.x-Y.max.x)-(Math.min(Y.min.x,b.x)-Y.min.x)/(O.min.x-Y.min.x),(Math.max(Y.max.y,b.y)-Y.max.y)/(O.max.y-Y.max.y)-(Math.min(Y.min.y,b.y)-Y.min.y)/(O.min.y-Y.min.y)).multiplyBy(p);d.panBy(oe,{animate:!1}),this._draggable._newPos._add(oe),this._draggable._startPos._add(oe),Lt(l._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=V(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(W(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,i)))},_onDrag:function(i){var l=this._marker,d=l._shadow,p=Nr(l._icon),w=l._map.layerPointToLatLng(p);d&&Lt(d,p),l._latlng=w,i.latlng=w,i.oldLatLng=this._oldLatLng,l.fire("move",i).fire("drag",i)},_onDragEnd:function(i){W(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Ei=Dr.extend({options:{icon:new so,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,l){ne(this,l),this._latlng=ce(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var l=this._latlng;return this._latlng=ce(i),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=i.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,i.title&&(d.title=i.title),d.tagName==="IMG"&&(d.alt=i.alt||"")),xe(d,l),i.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ve(d,"focus",this._panOnFocus,this);var w=i.icon.createShadow(this._shadow),b=!1;w!==this._shadow&&(this._removeShadow(),b=!0),w&&(xe(w,l),w.alt=""),this._shadow=w,i.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),w&&b&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_t(this._icon,"focus",this._panOnFocus,this),ut(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ut(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&Lt(this._icon,i),this._shadow&&Lt(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(xe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),$l)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new $l(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&hn(this._icon,i),this._shadow&&hn(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var l=this.options.icon.options,d=l.iconSize?re(l.iconSize):re(0,0),p=l.iconAnchor?re(l.iconAnchor):re(0,0);i.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function id(i,l){return new Ei(i,l)}var qi=Dr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return ne(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),qa=qi.extend({options:{fill:!0,radius:10},initialize:function(i,l){ne(this,l),this._latlng=ce(i),this._radius=this.options.radius},setLatLng:function(i){var l=this._latlng;return this._latlng=ce(i),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var l=i&&i.radius||this._radius;return qi.prototype.setStyle.call(this,i),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,l=this._radiusY||i,d=this._clickTolerance(),p=[i+d,l+d];this._pxBounds=new z(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function nc(i,l){return new qa(i,l)}var $a=qa.extend({initialize:function(i,l,d){if(typeof l=="number"&&(l=a({},d,{radius:l})),ne(this,l),this._latlng=ce(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new ge(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:qi.prototype.setStyle,_project:function(){var i=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===Ue.distance){var w=Math.PI/180,b=this._mRadius/Ue.R/w,O=d.project([l+b,i]),$=d.project([l-b,i]),Y=O.add($).divideBy(2),oe=d.unproject(Y).lat,we=Math.acos((Math.cos(b*w)-Math.sin(l*w)*Math.sin(oe*w))/(Math.cos(l*w)*Math.cos(oe*w)))/w;(isNaN(we)||we===0)&&(we=b/Math.cos(Math.PI/180*l)),this._point=Y.subtract(d.getPixelOrigin()),this._radius=isNaN(we)?0:Y.x-d.project([oe,i-we]).x,this._radiusY=Y.y-O.y}else{var De=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(De).x}this._updateBounds()}});function ca(i,l,d){return new $a(i,l,d)}var tr=qi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,l){ne(this,l),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var l=1/0,d=null,p=Be,w,b,O=0,$=this._parts.length;O<$;O++)for(var Y=this._parts[O],oe=1,we=Y.length;oe<we;oe++){w=Y[oe-1],b=Y[oe];var De=p(i,w,b,!0);De<l&&(l=De,d=p(i,w,b))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,l){return l=l||this._defaultShape(),i=ce(i),l.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new ge,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return ct(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var l=[],d=ct(i),p=0,w=i.length;p<w;p++)d?(l[p]=ce(i[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(i[p]);return l},_project:function(){var i=new z;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),l=new te(i,i);this._rawPxBounds&&(this._pxBounds=new z([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(i,l,d){var p=i[0]instanceof Te,w=i.length,b,O;if(p){for(O=[],b=0;b<w;b++)O[b]=this._map.latLngToLayerPoint(i[b]),d.extend(O[b]);l.push(O)}else for(b=0;b<w;b++)this._projectLatlngs(i[b],l,d)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,w,b,O,$,Y;for(d=0,w=0,b=this._rings.length;d<b;d++)for(Y=this._rings[d],p=0,O=Y.length;p<O-1;p++)$=C(Y[p],Y[p+1],i,p,!0),$&&(l[w]=l[w]||[],l[w].push($[0]),($[1]!==Y[p+1]||p===O-2)&&(l[w].push($[1]),w++))}},_simplifyPoints:function(){for(var i=this._parts,l=this.options.smoothFactor,d=0,p=i.length;d<p;d++)i[d]=Xt(i[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,l){var d,p,w,b,O,$,Y=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(d=0,b=this._parts.length;d<b;d++)for($=this._parts[d],p=0,O=$.length,w=O-1;p<O;w=p++)if(!(!l&&p===0)&&la(i,$[w],$[p])<=Y)return!0;return!1}});function sd(i,l){return new tr(i,l)}tr._flat=mt;var Ti=tr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return aa(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var l=tr.prototype._convertLatLngs.call(this,i),d=l.length;return d>=2&&l[0]instanceof Te&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(i){tr.prototype._setLatLngs.call(this,i),ct(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ct(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,l=this.options.weight,d=new te(l,l);if(i=new z(i.min.subtract(d),i.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,w=this._rings.length,b;p<w;p++)b=eo(this._rings[p],i,!0),b.length&&this._parts.push(b)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var l=!1,d,p,w,b,O,$,Y,oe;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(b=0,Y=this._parts.length;b<Y;b++)for(d=this._parts[b],O=0,oe=d.length,$=oe-1;O<oe;$=O++)p=d[O],w=d[$],p.y>i.y!=w.y>i.y&&i.x<(w.x-p.x)*(i.y-p.y)/(w.y-p.y)+p.x&&(l=!l);return l||tr.prototype._containsPoint.call(this,i,!0)}});function od(i,l){return new Ti(i,l)}var si=wi.extend({initialize:function(i,l){ne(this,l),this._layers={},i&&this.addData(i)},addData:function(i){var l=he(i)?i:i.features,d,p,w;if(l){for(d=0,p=l.length;d<p;d++)w=l[d],(w.geometries||w.geometry||w.features||w.coordinates)&&this.addData(w);return this}var b=this.options;if(b.filter&&!b.filter(i))return this;var O=oo(i,b);return O?(O.feature=Ya(i),O.defaultOptions=O.options,this.resetStyle(O),b.onEachFeature&&b.onEachFeature(i,O),this.addLayer(O)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=a({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(l){this._setLayerStyle(l,i)},this)},_setLayerStyle:function(i,l){i.setStyle&&(typeof l=="function"&&(l=l(i.feature)),i.setStyle(l))}});function oo(i,l){var d=i.type==="Feature"?i.geometry:i,p=d?d.coordinates:null,w=[],b=l&&l.pointToLayer,O=l&&l.coordsToLatLng||Za,$,Y,oe,we;if(!p&&!d)return null;switch(d.type){case"Point":return $=O(p),Ga(b,i,$,l);case"MultiPoint":for(oe=0,we=p.length;oe<we;oe++)$=O(p[oe]),w.push(Ga(b,i,$,l));return new wi(w);case"LineString":case"MultiLineString":return Y=ha(p,d.type==="LineString"?0:1,O),new tr(Y,l);case"Polygon":case"MultiPolygon":return Y=ha(p,d.type==="Polygon"?1:2,O),new Ti(Y,l);case"GeometryCollection":for(oe=0,we=d.geometries.length;oe<we;oe++){var De=oo({geometry:d.geometries[oe],type:"Feature",properties:i.properties},l);De&&w.push(De)}return new wi(w);case"FeatureCollection":for(oe=0,we=d.features.length;oe<we;oe++){var Je=oo(d.features[oe],l);Je&&w.push(Je)}return new wi(w);default:throw new Error("Invalid GeoJSON object.")}}function Ga(i,l,d,p){return i?i(l,d):new Ei(d,p&&p.markersInheritOptions&&p)}function Za(i){return new Te(i[1],i[0],i[2])}function ha(i,l,d){for(var p=[],w=0,b=i.length,O;w<b;w++)O=l?ha(i[w],l-1,d):(d||Za)(i[w]),p.push(O);return p}function Ka(i,l){return i=ce(i),i.alt!==void 0?[A(i.lng,l),A(i.lat,l),A(i.alt,l)]:[A(i.lng,l),A(i.lat,l)]}function Qa(i,l,d,p){for(var w=[],b=0,O=i.length;b<O;b++)w.push(l?Qa(i[b],ct(i[b])?0:l-1,d,p):Ka(i[b],p));return!l&&d&&w.length>0&&w.push(w[0].slice()),w}function ao(i,l){return i.feature?a({},i.feature,{geometry:l}):Ya(l)}function Ya(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Gl={toGeoJSON:function(i){return ao(this,{type:"Point",coordinates:Ka(this.getLatLng(),i)})}};Ei.include(Gl),$a.include(Gl),qa.include(Gl),tr.include({toGeoJSON:function(i){var l=!ct(this._latlngs),d=Qa(this._latlngs,l?1:0,!1,i);return ao(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),Ti.include({toGeoJSON:function(i){var l=!ct(this._latlngs),d=l&&!ct(this._latlngs[0]),p=Qa(this._latlngs,d?2:l?1:0,!0,i);return l||(p=[p]),ao(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),Hi.include({toMultiPoint:function(i){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(i).geometry.coordinates)}),ao(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(i){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(i);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(w){if(w.toGeoJSON){var b=w.toGeoJSON(i);if(d)p.push(b.geometry);else{var O=Ya(b);O.type==="FeatureCollection"?p.push.apply(p,O.features):p.push(O)}}}),d?ao(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function rc(i,l){return new si(i,l)}var Or=rc,$i=Dr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,l,d){this._url=i,this._bounds=ye(l),ne(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(xe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ut(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&_r(this._image),this},bringToBack:function(){return this._map&&xn(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=ye(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",l=this._image=i?this._url:Ze("img");if(xe(l,"leaflet-image-layer"),this._zoomAnimated&&xe(l,"leaflet-zoom-animated"),this.options.className&&xe(l,this.options.className),l.onselectstart=I,l.onmousemove=I,l.onload=m(this.fire,this,"load"),l.onerror=m(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(i){var l=this._map.getZoomScale(i.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;Kn(this._image,d,l)},_reset:function(){var i=this._image,l=new z(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();Lt(i,l.min),i.style.width=d.x+"px",i.style.height=d.y+"px"},_updateOpacity:function(){hn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),ic=function(i,l,d){return new $i(i,l,d)},Zl=$i.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",l=this._image=i?this._url:Ze("video");if(xe(l,"leaflet-image-layer"),this._zoomAnimated&&xe(l,"leaflet-zoom-animated"),this.options.className&&xe(l,this.options.className),l.onselectstart=I,l.onmousemove=I,l.onloadeddata=m(this.fire,this,"load"),i){for(var d=l.getElementsByTagName("source"),p=[],w=0;w<d.length;w++)p.push(d[w].src);this._url=d.length>0?p:[l.src];return}he(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var b=0;b<this._url.length;b++){var O=Ze("source");O.src=this._url[b],l.appendChild(O)}}});function sc(i,l,d){return new Zl(i,l,d)}var Kl=$i.extend({_initImage:function(){var i=this._image=this._url;xe(i,"leaflet-image-layer"),this._zoomAnimated&&xe(i,"leaflet-zoom-animated"),this.options.className&&xe(i,this.options.className),i.onselectstart=I,i.onmousemove=I}});function Ql(i,l,d){return new Kl(i,l,d)}var oi=Dr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,l){i&&(i instanceof Te||he(i))?(this._latlng=ce(i),ne(this,l)):(ne(this,i),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&hn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&hn(this._container,1),this.bringToFront(),this.options.interactive&&(xe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(hn(this._container,0),this._removeTimeout=setTimeout(m(ut,void 0,this._container),200)):ut(this._container),this.options.interactive&&(gt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=ce(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&_r(this._container),this},bringToBack:function(){return this._map&&xn(this._container),this},_prepareOpen:function(i){var l=this._source;if(!l._map)return!1;if(l instanceof wi){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!i)if(l.getCenter)i=l.getCenter();else if(l.getLatLng)i=l.getLatLng();else if(l.getBounds)i=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")i.innerHTML=l;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),l=re(this.options.offset),d=this._getAnchor();this._zoomAnimated?Lt(this._container,i.add(d)):l=l.add(i).add(d);var p=this._containerBottom=-l.y,w=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=w+"px"}},_getAnchor:function(){return[0,0]}});tt.include({_initOverlay:function(i,l,d,p){var w=l;return w instanceof i||(w=new i(p).setContent(l)),d&&w.setLatLng(d),w}}),Dr.include({_initOverlay:function(i,l,d,p){var w=d;return w instanceof i?(ne(w,p),w._source=this):(w=l&&!p?l:new i(p,this),w.setContent(d)),w}});var Xa=oi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,oi.prototype.openOn.call(this,i)},onAdd:function(i){oi.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof qi||this._source.on("preclick",lt))},onRemove:function(i){oi.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof qi||this._source.off("preclick",lt))},getEvents:function(){var i=oi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",l=this._container=Ze("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Ze("div",i+"-content-wrapper",l);if(this._contentNode=Ze("div",i+"-content",d),Es(l),Ys(this._contentNode),Ve(l,"contextmenu",lt),this._tipContainer=Ze("div",i+"-tip-container",l),this._tip=Ze("div",i+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Ze("a",i+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Ve(p,"click",function(w){bt(w),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,l=i.style;l.width="",l.whiteSpace="nowrap";var d=i.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=i.offsetHeight,w=this.options.maxHeight,b="leaflet-popup-scrolled";w&&p>w?(l.height=w+"px",xe(i,b)):gt(i,b),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),d=this._getAnchor();Lt(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,l=parseInt(zi(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,w=new te(this._containerLeft,-d-this._containerBottom);w._add(Nr(this._container));var b=i.layerPointToContainerPoint(w),O=re(this.options.autoPanPadding),$=re(this.options.autoPanPaddingTopLeft||O),Y=re(this.options.autoPanPaddingBottomRight||O),oe=i.getSize(),we=0,De=0;b.x+p+Y.x>oe.x&&(we=b.x+p-oe.x+Y.x),b.x-we-$.x<0&&(we=b.x-$.x),b.y+d+Y.y>oe.y&&(De=b.y+d-oe.y+Y.y),b.y-De-$.y<0&&(De=b.y-$.y),(we||De)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([we,De]))}},_getAnchor:function(){return re(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),lo=function(i,l){return new Xa(i,l)};tt.mergeOptions({closePopupOnClick:!0}),tt.include({openPopup:function(i,l,d){return this._initOverlay(Xa,i,l,d).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Dr.include({bindPopup:function(i,l){return this._popup=this._initOverlay(Xa,this._popup,i,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof wi||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Mn(i);var l=i.layer||i.target;if(this._popup._source===l&&!(l instanceof qi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=l,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var uo=oi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){oi.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){oi.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=oi.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",l=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ze("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+E(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var l,d,p=this._map,w=this._container,b=p.latLngToContainerPoint(p.getCenter()),O=p.layerPointToContainerPoint(i),$=this.options.direction,Y=w.offsetWidth,oe=w.offsetHeight,we=re(this.options.offset),De=this._getAnchor();$==="top"?(l=Y/2,d=oe):$==="bottom"?(l=Y/2,d=0):$==="center"?(l=Y/2,d=oe/2):$==="right"?(l=0,d=oe/2):$==="left"?(l=Y,d=oe/2):O.x<b.x?($="right",l=0,d=oe/2):($="left",l=Y+(we.x+De.x)*2,d=oe/2),i=i.subtract(re(l,d,!0)).add(we).add(De),gt(w,"leaflet-tooltip-right"),gt(w,"leaflet-tooltip-left"),gt(w,"leaflet-tooltip-top"),gt(w,"leaflet-tooltip-bottom"),xe(w,"leaflet-tooltip-"+$),Lt(w,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&hn(this._container,i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(l)},_getAnchor:function(){return re(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),da=function(i,l){return new uo(i,l)};tt.include({openTooltip:function(i,l,d){return this._initOverlay(uo,i,l,d).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Dr.include({bindTooltip:function(i,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(uo,this._tooltip,i,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var l=i?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof wi||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&(Ve(l,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),Ve(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var l=i.latlng,d,p;this._tooltip.options.sticky&&i.originalEvent&&(d=this._map.mouseEventToContainerPoint(i.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var Ja=Ps.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var l=i&&i.tagName==="DIV"?i:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Tn(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=re(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function oc(i){return new Ja(i)}Ps.Default=so;var Gi=Dr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ve.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){ne(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),ut(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(_r(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(xn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=x(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof te?i:new te(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var l=this.getPane().children,d=-i(-1/0,1/0),p=0,w=l.length,b;p<w;p++)b=l[p].style.zIndex,l[p]!==this._container&&b&&(d=i(d,+b));isFinite(d)&&(this.options.zIndex=d+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ve.ielt9){hn(this._container,this.options.opacity);var i=+new Date,l=!1,d=!1;for(var p in this._tiles){var w=this._tiles[p];if(!(!w.current||!w.loaded)){var b=Math.min(1,(i-w.loaded)/200);hn(w.el,b),b<1?l=!0:(w.active?d=!0:this._onOpaqueTile(w),w.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(W(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:I,_initContainer:function(){this._container||(this._container=Ze("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,l=this.options.maxZoom;if(i!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===i?(this._levels[d].el.style.zIndex=l-Math.abs(i-d),this._onUpdateLevel(d)):(ut(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[i],w=this._map;return p||(p=this._levels[i]={},p.el=Ze("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=w.project(w.unproject(w.getPixelOrigin()),i).round(),p.zoom=i,this._setZoomTransform(p,w.getCenter(),w.getZoom()),I(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:I,_onRemoveLevel:I,_onCreateLevel:I,_pruneTiles:function(){if(this._map){var i,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)l=this._tiles[i],l.retain=l.current;for(i in this._tiles)if(l=this._tiles[i],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var l in this._tiles)this._tiles[l].coords.z===i&&this._removeTile(l)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)ut(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,l,d,p){var w=Math.floor(i/2),b=Math.floor(l/2),O=d-1,$=new te(+w,+b);$.z=+O;var Y=this._tileCoordsToKey($),oe=this._tiles[Y];return oe&&oe.active?(oe.retain=!0,!0):(oe&&oe.loaded&&(oe.retain=!0),O>p?this._retainParent(w,b,O,p):!1)},_retainChildren:function(i,l,d,p){for(var w=2*i;w<2*i+2;w++)for(var b=2*l;b<2*l+2;b++){var O=new te(w,b);O.z=d+1;var $=this._tileCoordsToKey(O),Y=this._tiles[$];if(Y&&Y.active){Y.retain=!0;continue}else Y&&Y.loaded&&(Y.retain=!0);d+1<p&&this._retainChildren(w,b,d+1,p)}},_resetView:function(i){var l=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var l=this.options;return l.minNativeZoom!==void 0&&i<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<i?l.maxNativeZoom:i},_setView:function(i,l,d,p){var w=Math.round(l);this.options.maxZoom!==void 0&&w>this.options.maxZoom||this.options.minZoom!==void 0&&w<this.options.minZoom?w=void 0:w=this._clampZoom(w);var b=this.options.updateWhenZooming&&w!==this._tileZoom;(!p||b)&&(this._tileZoom=w,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),w!==void 0&&this._update(i),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(i,l)},_setZoomTransforms:function(i,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],i,l)},_setZoomTransform:function(i,l,d){var p=this._map.getZoomScale(d,i.zoom),w=i.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();ve.any3d?Kn(i.el,w,p):Lt(i.el,w)},_resetGrid:function(){var i=this._map,l=i.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,w=this._map.getPixelWorldBounds(this._tileZoom);w&&(this._globalTileRange=this._pxBoundsToTileRange(w)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(i.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(i.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),w=l.project(i,this._tileZoom).floor(),b=l.getSize().divideBy(p*2);return new z(w.subtract(b),w.add(b))},_update:function(i){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(i===void 0&&(i=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(i),w=this._pxBoundsToTileRange(p),b=w.getCenter(),O=[],$=this.options.keepBuffer,Y=new z(w.getBottomLeft().subtract([$,-$]),w.getTopRight().add([$,-$]));if(!(isFinite(w.min.x)&&isFinite(w.min.y)&&isFinite(w.max.x)&&isFinite(w.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var oe in this._tiles){var we=this._tiles[oe].coords;(we.z!==this._tileZoom||!Y.contains(new te(we.x,we.y)))&&(this._tiles[oe].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(i,d);return}for(var De=w.min.y;De<=w.max.y;De++)for(var Je=w.min.x;Je<=w.max.x;Je++){var on=new te(Je,De);if(on.z=this._tileZoom,!!this._isValidTile(on)){var Jt=this._tiles[this._tileCoordsToKey(on)];Jt?Jt.current=!0:O.push(on)}}if(O.sort(function(Vn,po){return Vn.distanceTo(b)-po.distanceTo(b)}),O.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var nr=document.createDocumentFragment();for(Je=0;Je<O.length;Je++)this._addTile(O[Je],nr);this._level.el.appendChild(nr)}}}},_isValidTile:function(i){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(i.x<d.min.x||i.x>d.max.x)||!l.wrapLat&&(i.y<d.min.y||i.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(i);return ye(this.options.bounds).overlaps(p)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var l=this._map,d=this.getTileSize(),p=i.scaleBy(d),w=p.add(d),b=l.unproject(p,i.z),O=l.unproject(w,i.z);return[b,O]},_tileCoordsToBounds:function(i){var l=this._tileCoordsToNwSe(i),d=new ge(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var l=i.split(":"),d=new te(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(i){var l=this._tiles[i];l&&(ut(l.el),delete this._tiles[i],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){xe(i,"leaflet-tile");var l=this.getTileSize();i.style.width=l.x+"px",i.style.height=l.y+"px",i.onselectstart=I,i.onmousemove=I,ve.ielt9&&this.options.opacity<1&&hn(i,this.options.opacity)},_addTile:function(i,l){var d=this._getTilePos(i),p=this._tileCoordsToKey(i),w=this.createTile(this._wrapCoords(i),m(this._tileReady,this,i));this._initTile(w),this.createTile.length<2&&V(m(this._tileReady,this,i,null,w)),Lt(w,d),this._tiles[p]={el:w,coords:i,current:!0},l.appendChild(w),this.fire("tileloadstart",{tile:w,coords:i})},_tileReady:function(i,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:i});var p=this._tileCoordsToKey(i);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(hn(d.el,0),W(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(xe(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ve.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(m(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var l=new te(this._wrapX?P(i.x,this._wrapX):i.x,this._wrapY?P(i.y,this._wrapY):i.y);return l.z=i.z,l},_pxBoundsToTileRange:function(i){var l=this.getTileSize();return new z(i.min.unscaleBy(l).floor(),i.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function co(i){return new Gi(i)}var Zi=Gi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,l){this._url=i,l=ne(this,l),l.detectRetina&&ve.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,l){return this._url===i&&l===void 0&&(l=!0),this._url=i,l||this.redraw(),this},createTile:function(i,l){var d=document.createElement("img");return Ve(d,"load",m(this._tileOnLoad,this,l,d)),Ve(d,"error",m(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(i),d},getTileUrl:function(i){var l={r:ve.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-i.y;this.options.tms&&(l.y=d),l["-y"]=d}return pe(this._url,a(l,this.options))},_tileOnLoad:function(i,l){ve.ielt9?setTimeout(m(i,this,null,l),0):i(null,l)},_tileOnError:function(i,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),i(d,l)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(i=l-i),i+p},_getSubdomain:function(i){var l=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var i,l;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(l=this._tiles[i].el,l.onload=I,l.onerror=I,!l.complete)){l.src=He;var d=this._tiles[i].coords;ut(l),delete this._tiles[i],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(i){var l=this._tiles[i];if(l)return l.el.setAttribute("src",He),Gi.prototype._removeTile.call(this,i)},_tileReady:function(i,l,d){if(!(!this._map||d&&d.getAttribute("src")===He))return Gi.prototype._tileReady.call(this,i,l,d)}});function Yl(i,l){return new Zi(i,l)}var fa=Zi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,l){this._url=i;var d=a({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=ne(this,l);var w=l.detectRetina&&ve.retina?2:1,b=this.getTileSize();d.width=b.x*w,d.height=b.y*w,this.wmsParams=d},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Zi.prototype.onAdd.call(this,i)},getTileUrl:function(i){var l=this._tileCoordsToNwSe(i),d=this._crs,p=J(d.project(l[0]),d.project(l[1])),w=p.min,b=p.max,O=(this._wmsVersion>=1.3&&this._crs===io?[w.y,w.x,b.y,b.x]:[w.x,w.y,b.x,b.y]).join(","),$=Zi.prototype.getTileUrl.call(this,i);return $+ee(this.wmsParams,$,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+O},setParams:function(i,l){return a(this.wmsParams,i),l||this.redraw(),this}});function ac(i,l){return new fa(i,l)}Zi.WMS=fa,Yl.wms=ac;var ai=Dr.extend({options:{padding:.1},initialize:function(i){ne(this,i),E(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),xe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),w=this._map.project(this._center,l),b=p.multiplyBy(-d).add(w).subtract(this._map._getNewPixelOrigin(i,l));ve.any3d?Kn(this._container,b,d):Lt(this._container,b)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-i)).round();this._bounds=new z(d,d.add(l.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Xl=ai.extend({options:{tolerance:0},getEvents:function(){var i=ai.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ai.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");Ve(i,"mousemove",this._onMouseMove,this),Ve(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ve(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){W(this._redrawRequest),delete this._ctx,ut(this._container),_t(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var l in this._layers)i=this._layers[l],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ai.prototype._update.call(this);var i=this._bounds,l=this._container,d=i.getSize(),p=ve.retina?2:1;Lt(l,i.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",ve.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){ai.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[E(i)]=i;var l=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var l=i._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete i._order,delete this._layers[E(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var l=i.options.dashArray.split(/[, ]+/),d=[],p,w;for(w=0;w<l.length;w++){if(p=Number(l[w]),isNaN(p))return;d.push(p)}i.options._dashArray=d}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var l=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new z,this._redrawBounds.extend(i._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(i._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var l=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)i=p.layer,(!l||i._pxBounds&&i._pxBounds.intersects(l))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,l){if(this._drawing){var d,p,w,b,O=i._parts,$=O.length,Y=this._ctx;if($){for(Y.beginPath(),d=0;d<$;d++){for(p=0,w=O[d].length;p<w;p++)b=O[d][p],Y[p?"lineTo":"moveTo"](b.x,b.y);l&&Y.closePath()}this._fillStroke(Y,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var l=i._point,d=this._ctx,p=Math.max(Math.round(i._radius),1),w=(Math.max(Math.round(i._radiusY),1)||p)/p;w!==1&&(d.save(),d.scale(1,w)),d.beginPath(),d.arc(l.x,l.y/w,p,0,Math.PI*2,!1),w!==1&&d.restore(),this._fillStroke(d,i)}},_fillStroke:function(i,l){var d=l.options;d.fill&&(i.globalAlpha=d.fillOpacity,i.fillStyle=d.fillColor||d.color,i.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(i.setLineDash&&i.setLineDash(l.options&&l.options._dashArray||[]),i.globalAlpha=d.opacity,i.lineWidth=d.weight,i.strokeStyle=d.color,i.lineCap=d.lineCap,i.lineJoin=d.lineJoin,i.stroke())},_onClick:function(i){for(var l=this._map.mouseEventToLayerPoint(i),d,p,w=this._drawFirst;w;w=w.next)d=w.layer,d.options.interactive&&d._containsPoint(l)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,l)}},_handleMouseOut:function(i){var l=this._hoveredLayer;l&&(gt(this._container,"leaflet-interactive"),this._fireEvent([l],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,l){if(!this._mouseHoverThrottled){for(var d,p,w=this._drawFirst;w;w=w.next)d=w.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(i),p&&(xe(this._container,"leaflet-interactive"),this._fireEvent([p],i,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(m(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,l,d){this._map._fireDOMEvent(l,d||l.type,i)},_bringToFront:function(i){var l=i._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(i)}},_bringToBack:function(i){var l=i._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(i)}}});function Jl(i){return ve.canvas?new Xl(i):null}var ho=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),lc={_initContainer:function(){this._container=Ze("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ai.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var l=i._container=ho("shape");xe(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",i._path=ho("path"),l.appendChild(i._path),this._updateStyle(i),this._layers[E(i)]=i},_addPath:function(i){var l=i._container;this._container.appendChild(l),i.options.interactive&&i.addInteractiveTarget(l)},_removePath:function(i){var l=i._container;ut(l),i.removeInteractiveTarget(l),delete this._layers[E(i)]},_updateStyle:function(i){var l=i._stroke,d=i._fill,p=i.options,w=i._container;w.stroked=!!p.stroke,w.filled=!!p.fill,p.stroke?(l||(l=i._stroke=ho("stroke")),w.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=he(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(w.removeChild(l),i._stroke=null),p.fill?(d||(d=i._fill=ho("fill")),w.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(w.removeChild(d),i._fill=null)},_updateCircle:function(i){var l=i._point.round(),d=Math.round(i._radius),p=Math.round(i._radiusY||d);this._setPath(i,i._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(i,l){i._path.v=l},_bringToFront:function(i){_r(i._container)},_bringToBack:function(i){xn(i._container)}},Vr=ve.vml?ho:cs,bs=ai.extend({_initContainer:function(){this._container=Vr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Vr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ut(this._container),_t(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ai.prototype._update.call(this);var i=this._bounds,l=i.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),Lt(d,i.min),d.setAttribute("viewBox",[i.min.x,i.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(i){var l=i._path=Vr("path");i.options.className&&xe(l,i.options.className),i.options.interactive&&xe(l,"leaflet-interactive"),this._updateStyle(i),this._layers[E(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){ut(i._path),i.removeInteractiveTarget(i._path),delete this._layers[E(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var l=i._path,d=i.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(i,l){this._setPath(i,Hr(i._parts,l))},_updateCircle:function(i){var l=i._point,d=Math.max(Math.round(i._radius),1),p=Math.max(Math.round(i._radiusY),1)||d,w="a"+d+","+p+" 0 1,0 ",b=i._empty()?"M0 0":"M"+(l.x-d)+","+l.y+w+d*2+",0 "+w+-d*2+",0 ";this._setPath(i,b)},_setPath:function(i,l){i._path.setAttribute("d",l)},_bringToFront:function(i){_r(i._path)},_bringToBack:function(i){xn(i._path)}});ve.vml&&bs.include(lc);function el(i){return ve.svg||ve.vml?new bs(i):null}tt.include({getRenderer:function(i){var l=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var l=this._paneRenderers[i];return l===void 0&&(l=this._createRenderer({pane:i}),this._paneRenderers[i]=l),l},_createRenderer:function(i){return this.options.preferCanvas&&Jl(i)||el(i)}});var uc=Ti.extend({initialize:function(i,l){Ti.prototype.initialize.call(this,this._boundsToLatLngs(i),l)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=ye(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function ad(i,l){return new uc(i,l)}bs.create=Vr,bs.pointsToPath=Hr,si.geometryToLayer=oo,si.coordsToLatLng=Za,si.coordsToLatLngs=ha,si.latLngToCoords=Ka,si.latLngsToCoords=Qa,si.getFeature=ao,si.asFeature=Ya,tt.mergeOptions({boxZoom:!0});var fo=In.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){Ve(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){_t(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ut(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),et(),ys(),this._startPoint=this._map.mouseEventToContainerPoint(i),Ve(document,{contextmenu:Mn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Ze("div","leaflet-zoom-box",this._container),xe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var l=new z(this._point,this._startPoint),d=l.getSize();Lt(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(ut(this._box),gt(this._container,"leaflet-crosshair")),Ln(),vs(),_t(document,{contextmenu:Mn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(m(this._resetState,this),0);var l=new ge(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});tt.addInitHook("addHandler","boxZoom",fo),tt.mergeOptions({doubleClickZoom:!0});var cc=In.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,w=i.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(w):l.setZoomAround(i.containerPoint,w)}});tt.addInitHook("addHandler","doubleClickZoom",cc),tt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var eu=In.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new On(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}xe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){gt(this._map._container,"leaflet-grab"),gt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=ye(this._map.options.maxBounds);this._offsetLimit=J(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,l){return i-(i-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;i.x<l.min.x&&(i.x=this._viscousLimit(i.x,l.min.x)),i.y<l.min.y&&(i.y=this._viscousLimit(i.y,l.min.y)),i.x>l.max.x&&(i.x=this._viscousLimit(i.x,l.max.x)),i.y>l.max.y&&(i.y=this._viscousLimit(i.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,l=Math.round(i/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,w=(p-l+d)%i+l-d,b=(p+l+d)%i-l-d,O=Math.abs(w+d)<Math.abs(b+d)?w:b;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=O},_onDragEnd:function(i){var l=this._map,d=l.options,p=!d.inertia||i.noInertia||this._times.length<2;if(l.fire("dragend",i),p)l.fire("moveend");else{this._prunePositions(+new Date);var w=this._lastPos.subtract(this._positions[0]),b=(this._lastTime-this._times[0])/1e3,O=d.easeLinearity,$=w.multiplyBy(O/b),Y=$.distanceTo([0,0]),oe=Math.min(d.inertiaMaxSpeed,Y),we=$.multiplyBy(oe/Y),De=oe/(d.inertiaDeceleration*O),Je=we.multiplyBy(-De/2).round();!Je.x&&!Je.y?l.fire("moveend"):(Je=l._limitOffset(Je,l.options.maxBounds),V(function(){l.panBy(Je,{duration:De,easeLinearity:O,noMoveStart:!0,animate:!0})}))}}});tt.addInitHook("addHandler","dragging",eu),tt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var tu=In.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),Ve(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),_t(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,l=document.documentElement,d=i.scrollTop||l.scrollTop,p=i.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var l=this._panKeys={},d=this.keyCodes,p,w;for(p=0,w=d.left.length;p<w;p++)l[d.left[p]]=[-1*i,0];for(p=0,w=d.right.length;p<w;p++)l[d.right[p]]=[i,0];for(p=0,w=d.down.length;p<w;p++)l[d.down[p]]=[0,i];for(p=0,w=d.up.length;p<w;p++)l[d.up[p]]=[0,-1*i]},_setZoomDelta:function(i){var l=this._zoomKeys={},d=this.keyCodes,p,w;for(p=0,w=d.zoomIn.length;p<w;p++)l[d.zoomIn[p]]=i;for(p=0,w=d.zoomOut.length;p<w;p++)l[d.zoomOut[p]]=-i},_addHooks:function(){Ve(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){_t(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var l=i.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],i.shiftKey&&(p=re(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(re(p),d.options.maxBounds)),d.options.worldCopyJump){var w=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(w)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;Mn(i)}}});tt.addInitHook("addHandler","keyboard",tu),tt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xt=In.extend({addHooks:function(){Ve(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){_t(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var l=ia(i),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(m(this._performZoom,this),p),Mn(i)},_performZoom:function(){var i=this._map,l=i.getZoom(),d=this._map.options.zoomSnap||0;i._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),w=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,b=d?Math.ceil(w/d)*d:w,O=i._limitZoom(l+(this._delta>0?b:-b))-l;this._delta=0,this._startTime=null,O&&(i.options.scrollWheelZoom==="center"?i.setZoom(l+O):i.setZoomAround(this._lastMousePos,l+O))}});tt.addInitHook("addHandler","scrollWheelZoom",xt);var nu=600;tt.mergeOptions({tapHold:ve.touchNative&&ve.safari&&ve.mobile,tapTolerance:15});var ma=In.extend({addHooks:function(){Ve(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){_t(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var l=i.touches[0];this._startPos=this._newPos=new te(l.clientX,l.clientY),this._holdTimeout=setTimeout(m(function(){this._cancel(),this._isTapValid()&&(Ve(document,"touchend",bt),Ve(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),nu),Ve(document,"touchend touchcancel contextmenu",this._cancel,this),Ve(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){_t(document,"touchend",bt),_t(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),_t(document,"touchend touchcancel contextmenu",this._cancel,this),_t(document,"touchmove",this._onMove,this)},_onMove:function(i){var l=i.touches[0];this._newPos=new te(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,l){var d=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});tt.addInitHook("addHandler","tapHold",ma),tt.mergeOptions({touchZoom:ve.touch,bounceAtZoomLimits:!0});var mo=In.extend({addHooks:function(){xe(this._map._container,"leaflet-touch-zoom"),Ve(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){gt(this._map._container,"leaflet-touch-zoom"),_t(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var l=this._map;if(!(!i.touches||i.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(i.touches[0]),p=l.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Ve(document,"touchmove",this._onTouchMove,this),Ve(document,"touchend touchcancel",this._onTouchEnd,this),bt(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(i.touches[0]),p=l.mouseEventToContainerPoint(i.touches[1]),w=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(w,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&w<1||this._zoom>l.getMaxZoom()&&w>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,w===1)return}else{var b=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(w===1&&b.x===0&&b.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(b),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),W(this._animRequest);var O=m(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(O,this,!0),bt(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,W(this._animRequest),_t(document,"touchmove",this._onTouchMove,this),_t(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});tt.addInitHook("addHandler","touchZoom",mo),tt.BoxZoom=fo,tt.DoubleClickZoom=cc,tt.Drag=eu,tt.Keyboard=tu,tt.ScrollWheelZoom=xt,tt.TapHold=ma,tt.TouchZoom=mo,t.Bounds=z,t.Browser=ve,t.CRS=Ge,t.Canvas=Xl,t.Circle=$a,t.CircleMarker=qa,t.Class=Xe,t.Control=dn,t.DivIcon=Ja,t.DivOverlay=oi,t.DomEvent=ti,t.DomUtil=ws,t.Draggable=On,t.Evented=Oe,t.FeatureGroup=wi,t.GeoJSON=si,t.GridLayer=Gi,t.Handler=In,t.Icon=Ps,t.ImageOverlay=$i,t.LatLng=Te,t.LatLngBounds=ge,t.Layer=Dr,t.LayerGroup=Hi,t.LineUtil=er,t.Map=tt,t.Marker=Ei,t.Mixin=Js,t.Path=qi,t.Point=te,t.PolyUtil=no,t.Polygon=Ti,t.Polyline=tr,t.Popup=Xa,t.PosAnimation=xs,t.Projection=ii,t.Rectangle=uc,t.Renderer=ai,t.SVG=bs,t.SVGOverlay=Kl,t.TileLayer=Zi,t.Tooltip=uo,t.Transformation=Ur,t.Util=M,t.VideoOverlay=Zl,t.bind=m,t.bounds=J,t.canvas=Jl,t.circle=ca,t.circleMarker=nc,t.control=Jn,t.divIcon=oc,t.extend=a,t.featureGroup=ec,t.geoJSON=rc,t.geoJson=Or,t.gridLayer=co,t.icon=tc,t.imageOverlay=ic,t.latLng=ce,t.latLngBounds=ye,t.layerGroup=ua,t.map=Xn,t.marker=id,t.point=re,t.polygon=od,t.polyline=sd,t.popup=lo,t.rectangle=ad,t.setOptions=ne,t.stamp=E,t.svg=el,t.svgOverlay=Ql,t.tileLayer=Yl,t.tooltip=da,t.transformation=or,t.version=s,t.videoOverlay=sc;var hc=window.L;t.noConflict=function(){return window.L=hc,this},window.L=t}))})(wu,wu.exports)),wu.exports}var aE=oE();const ko=om(aE);function lE({reports:r,onReportClick:e,onMapClick:t,selectedLocation:s,userLocation:a,zoom:c=19}){const m=Ye.useRef(null),v=Ye.useRef(null),E=Ye.useRef([]),x=P=>{let I="from-blue-500 to-blue-600",A="";return P.mode==="suggestion"?(I="from-indigo-500 to-purple-600",A=""):P.status==="nouveau"?(I="from-red-500 to-red-600",A=""):P.status==="en_cours"?(I="from-amber-500 to-orange-600",A=""):P.status==="resolu"&&(I="from-emerald-500 to-teal-600",A=""),ko.divIcon({html:`
        <div class="relative flex items-center justify-center">
          <div class="absolute w-4 h-1 bg-black/20 rounded-full blur-[2px] bottom-[-18px]"></div>
          <div class="bg-gradient-to-br ${I} w-10 h-10 rounded-full rounded-bl-none rotate-[45deg] border-2 border-white shadow-lg flex items-center justify-center hover:scale-110 transition-transform">
            <span class="rotate-[-45deg] text-lg">${A}</span>
          </div>
        </div>
      `,className:"custom-marker-container",iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-40]})};return Ye.useEffect(()=>{if(!m.current||v.current)return;const P=ko.map(m.current,{zoomControl:!1,attributionControl:!1}).setView([a.lat,a.lng],c);ko.tileLayer("https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png",{maxZoom:20}).addTo(P),v.current=P;const I=setTimeout(()=>P.invalidateSize(),250);return()=>{clearTimeout(I),P.remove(),v.current=null}},[]),Ye.useEffect(()=>{if(!v.current||!a)return;const P=v.current,I=P._userMarker;I&&P.removeLayer(I);const A=ko.marker([a.lat,a.lng],{icon:ko.divIcon({html:`
          <div class="relative flex items-center justify-center">
            <div class="absolute w-4 h-4 bg-blue-500 rounded-full animate-ping opacity-75"></div>
            <div class="relative w-4 h-4 bg-blue-600 rounded-full border-2 border-white shadow-md"></div>
          </div>
        `,className:"",iconSize:[16,16],iconAnchor:[8,8]}),zIndexOffset:1e3}).addTo(P);P._userMarker=A},[a]),Ye.useEffect(()=>{if(!v.current)return;const P=v.current,I=P._selectionMarker;if(I&&P.removeLayer(I),s){const A=ko.marker([s.lat,s.lng],{icon:ko.divIcon({html:`
            <div class="relative flex items-center justify-center">
              <div class="absolute w-8 h-8 bg-purple-500 rounded-full animate-ping opacity-20"></div>
              <div class="bg-gradient-to-br from-purple-500 to-indigo-600 w-10 h-10 rounded-full rounded-bl-none rotate-[45deg] border-2 border-white shadow-xl flex items-center justify-center">
                <span class="rotate-[-45deg] text-lg"></span>
              </div>
            </div>
          `,className:"",iconSize:[40,40],iconAnchor:[20,40]}),zIndexOffset:1100}).addTo(P);P._selectionMarker=A,P.setView([s.lat,s.lng],P.getZoom(),{animate:!0})}},[s]),Ye.useEffect(()=>{v.current&&(E.current.forEach(P=>P.remove()),E.current=[],r.forEach(P=>{const I=ko.marker([P.location.lat,P.location.lng],{icon:x(P)}).addTo(v.current),A=`
        <div class="p-1 min-w-[180px] font-sans">
          ${P.photo?`<img src="${P.photo}" class="w-full h-24 object-cover rounded-xl mb-2" />`:""}
          <p class="text-xs font-bold text-slate-800 leading-tight mb-1">${P.description}</p>
          <div class="flex items-center gap-1.5 mt-2">
             <span class="text-[9px] font-black uppercase px-2 py-0.5 rounded-full bg-slate-100 text-slate-500 border border-slate-200">
               ${P.category}
             </span>
             <span class="text-[9px] font-black uppercase px-2 py-0.5 rounded-full ${P.status==="resolu"?"bg-emerald-100 text-emerald-600 border-emerald-200":"bg-red-100 text-red-600 border-red-200"} border">
               ${P.status}
             </span>
          </div>
        </div>
      `;I.bindPopup(A,{className:"custom-leaflet-popup",closeButton:!1,offset:[0,-10]}),e&&I.on("click",()=>e(P)),E.current.push(I)}))},[r,e]),Ye.useEffect(()=>{if(!v.current)return;const P=v.current,I=A=>{t==null||t(A.latlng.lat,A.latlng.lng)};return P.on("click",I),()=>{P.off("click",I)}},[t]),k.jsx("div",{ref:m,className:"h-full w-full outline-none bg-slate-100",style:{position:"absolute",inset:0}})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cE=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Gg=r=>{const e=cE(r);return e.charAt(0).toUpperCase()+e.slice(1)},Ly=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=Ye.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:c,iconNode:m,...v},E)=>Ye.createElement("svg",{ref:E,...hE,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:Ly("lucide",a),...v},[...m.map(([x,P])=>Ye.createElement(x,P)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=(r,e)=>{const t=Ye.forwardRef(({className:s,...a},c)=>Ye.createElement(dE,{ref:c,iconNode:e,className:Ly(`lucide-${uE(Gg(r))}`,`lucide-${r}`,s),...a}));return t.displayName=Gg(r),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],My=Ut("calendar",fE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],pE=Ut("camera",mE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],_E=Ut("check",gE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Dy=Ut("circle-alert",yE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Oy=Ut("circle-check-big",vE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],EE=Ut("funnel",wE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],xE=Ut("info",TE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],SE=Ut("layers",IE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],bE=Ut("lightbulb",PE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Zg=Ut("loader-circle",CE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],kE=Ut("log-out",AE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Mh=Ut("map-pin",RE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],LE=Ut("map",NE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],DE=Ut("plus",ME);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Vy=Ut("shield-check",OE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],zE=Ut("star",VE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],vf=Ut("thumbs-up",FE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],BE=Ut("trash-2",jE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],WE=Ut("triangle-alert",UE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],qE=Ut("trophy",HE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],lm=Ut("user",$E);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],ZE=Ut("wrench",GE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Dh=Ut("x",KE);var QE=Ny();const YE=om(QE);function XE(r){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r))}const JE=r=>{switch(r){case"success":return nT;case"info":return iT;case"warning":return rT;case"error":return sT;default:return null}},eT=Array(12).fill(0),tT=({visible:r,className:e})=>_e.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":r},_e.createElement("div",{className:"sonner-spinner"},eT.map((t,s)=>_e.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),nT=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),rT=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),iT=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),sT=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),oT=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},_e.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_e.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),aT=()=>{const[r,e]=_e.useState(document.hidden);return _e.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),r};let Nf=1;class lT{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:s,...a}=e,c=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Nf++,m=this.toasts.find(E=>E.id===c),v=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(c)&&this.dismissedToasts.delete(c),m?this.toasts=this.toasts.map(E=>E.id===c?(this.publish({...E,...e,id:c,title:s}),{...E,...e,id:c,dismissible:v,title:s}):E):this.addToast({title:s,...a,dismissible:v,id:c}),c},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(s=>s({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;t.loading!==void 0&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const a=Promise.resolve(e instanceof Function?e():e);let c=s!==void 0,m;const v=a.then(async x=>{if(m=["resolve",x],_e.isValidElement(x))c=!1,this.create({id:s,type:"default",message:x});else if(cT(x)&&!x.ok){c=!1;const I=typeof t.error=="function"?await t.error(`HTTP error! status: ${x.status}`):t.error,A=typeof t.description=="function"?await t.description(`HTTP error! status: ${x.status}`):t.description,Z=typeof I=="object"&&!_e.isValidElement(I)?I:{message:I};this.create({id:s,type:"error",description:A,...Z})}else if(x instanceof Error){c=!1;const I=typeof t.error=="function"?await t.error(x):t.error,A=typeof t.description=="function"?await t.description(x):t.description,Z=typeof I=="object"&&!_e.isValidElement(I)?I:{message:I};this.create({id:s,type:"error",description:A,...Z})}else if(t.success!==void 0){c=!1;const I=typeof t.success=="function"?await t.success(x):t.success,A=typeof t.description=="function"?await t.description(x):t.description,Z=typeof I=="object"&&!_e.isValidElement(I)?I:{message:I};this.create({id:s,type:"success",description:A,...Z})}}).catch(async x=>{if(m=["reject",x],t.error!==void 0){c=!1;const P=typeof t.error=="function"?await t.error(x):t.error,I=typeof t.description=="function"?await t.description(x):t.description,H=typeof P=="object"&&!_e.isValidElement(P)?P:{message:P};this.create({id:s,type:"error",description:I,...H})}}).finally(()=>{c&&(this.dismiss(s),s=void 0),t.finally==null||t.finally.call(t)}),E=()=>new Promise((x,P)=>v.then(()=>m[0]==="reject"?P(m[1]):x(m[1])).catch(P));return typeof s!="string"&&typeof s!="number"?{unwrap:E}:Object.assign(s,{unwrap:E})},this.custom=(e,t)=>{const s=(t==null?void 0:t.id)||Nf++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const br=new lT,uT=(r,e)=>{const t=(e==null?void 0:e.id)||Nf++;return br.addToast({title:r,...e,id:t}),t},cT=r=>r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"&&"status"in r&&typeof r.status=="number",hT=uT,dT=()=>br.toasts,fT=()=>br.getActiveToasts(),wl=Object.assign(hT,{success:br.success,info:br.info,warning:br.warning,error:br.error,custom:br.custom,message:br.message,promise:br.promise,dismiss:br.dismiss,loading:br.loading},{getHistory:dT,getToasts:fT});XE("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Xc(r){return r.label!==void 0}const mT=3,pT="24px",gT="16px",Kg=4e3,_T=356,yT=14,vT=45,wT=200;function Ji(...r){return r.filter(Boolean).join(" ")}function ET(r){const[e,t]=r.split("-"),s=[];return e&&s.push(e),t&&s.push(t),s}const TT=r=>{var e,t,s,a,c,m,v,E,x;const{invert:P,toast:I,unstyled:A,interacting:H,setHeights:Z,visibleToasts:ne,heights:ee,index:be,toasts:pe,expanded:he,removeToast:Me,defaultRichColors:He,closeButton:Ne,style:j,cancelButtonStyle:R,actionButtonStyle:D,className:B="",descriptionClassName:V="",duration:W,position:M,gap:Xe,expandByDefault:nt,classNames:fe,icons:Oe,closeButtonAriaLabel:te="Close toast"}=r,[Ee,re]=_e.useState(null),[z,J]=_e.useState(null),[ge,ye]=_e.useState(!1),[Te,ce]=_e.useState(!1),[Ge,Ue]=_e.useState(!1),[it,Rt]=_e.useState(!1),[Ur,or]=_e.useState(!1),[ar,Wr]=_e.useState(0),[cs,Hr]=_e.useState(0),_n=_e.useRef(I.duration||W||Kg),Ar=_e.useRef(null),ft=_e.useRef(null),St=be===0,yn=be+1<=ne,Wt=I.type,$n=I.dismissible!==!1,Zs=I.className||"",qr=I.descriptionClassName||"",lr=_e.useMemo(()=>ee.findIndex(je=>je.toastId===I.id)||0,[ee,I.id]),gi=_e.useMemo(()=>{var je;return(je=I.closeButton)!=null?je:Ne},[I.closeButton,Ne]),ur=_e.useMemo(()=>I.duration||W||Kg,[I.duration,W]),Mi=_e.useRef(0),vn=_e.useRef(0),cr=_e.useRef(0),kr=_e.useRef(null),[Rr,$r]=M.split("-"),_i=_e.useMemo(()=>ee.reduce((je,wt,Ot)=>Ot>=lr?je:je+wt.height,0),[ee,lr]),Rn=aT(),hr=I.invert||P,dr=Wt==="loading";vn.current=_e.useMemo(()=>lr*Xe+_i,[lr,_i]),_e.useEffect(()=>{_n.current=ur},[ur]),_e.useEffect(()=>{ye(!0)},[]),_e.useEffect(()=>{const je=ft.current;if(je){const wt=je.getBoundingClientRect().height;return Hr(wt),Z(Ot=>[{toastId:I.id,height:wt,position:I.position},...Ot]),()=>Z(Ot=>Ot.filter(Yt=>Yt.toastId!==I.id))}},[Z,I.id]),_e.useLayoutEffect(()=>{if(!ge)return;const je=ft.current,wt=je.style.height;je.style.height="auto";const Ot=je.getBoundingClientRect().height;je.style.height=wt,Hr(Ot),Z(Yt=>Yt.find(Pt=>Pt.toastId===I.id)?Yt.map(Pt=>Pt.toastId===I.id?{...Pt,height:Ot}:Pt):[{toastId:I.id,height:Ot,position:I.position},...Yt])},[ge,I.title,I.description,Z,I.id]);const wn=_e.useCallback(()=>{ce(!0),Wr(vn.current),Z(je=>je.filter(wt=>wt.toastId!==I.id)),setTimeout(()=>{Me(I)},wT)},[I,Me,Z,vn]);_e.useEffect(()=>{if(I.promise&&Wt==="loading"||I.duration===1/0||I.type==="loading")return;let je;return he||H||Rn?(()=>{if(cr.current<Mi.current){const Yt=new Date().getTime()-Mi.current;_n.current=_n.current-Yt}cr.current=new Date().getTime()})():(()=>{_n.current!==1/0&&(Mi.current=new Date().getTime(),je=setTimeout(()=>{I.onAutoClose==null||I.onAutoClose.call(I,I),wn()},_n.current))})(),()=>clearTimeout(je)},[he,H,I,Wt,Rn,wn]),_e.useEffect(()=>{I.delete&&wn()},[wn,I.delete]);function fr(){var je;if(Oe!=null&&Oe.loading){var wt;return _e.createElement("div",{className:Ji(fe==null?void 0:fe.loader,I==null||(wt=I.classNames)==null?void 0:wt.loader,"sonner-loader"),"data-visible":Wt==="loading"},Oe.loading)}return _e.createElement(tT,{className:Ji(fe==null?void 0:fe.loader,I==null||(je=I.classNames)==null?void 0:je.loader),visible:Wt==="loading"})}const mr=I.icon||(Oe==null?void 0:Oe[Wt])||JE(Wt);var Tt,Di;return _e.createElement("li",{tabIndex:0,ref:ft,className:Ji(B,Zs,fe==null?void 0:fe.toast,I==null||(e=I.classNames)==null?void 0:e.toast,fe==null?void 0:fe.default,fe==null?void 0:fe[Wt],I==null||(t=I.classNames)==null?void 0:t[Wt]),"data-sonner-toast":"","data-rich-colors":(Tt=I.richColors)!=null?Tt:He,"data-styled":!(I.jsx||I.unstyled||A),"data-mounted":ge,"data-promise":!!I.promise,"data-swiped":Ur,"data-removed":Te,"data-visible":yn,"data-y-position":Rr,"data-x-position":$r,"data-index":be,"data-front":St,"data-swiping":Ge,"data-dismissible":$n,"data-type":Wt,"data-invert":hr,"data-swipe-out":it,"data-swipe-direction":z,"data-expanded":!!(he||nt&&ge),style:{"--index":be,"--toasts-before":be,"--z-index":pe.length-be,"--offset":`${Te?ar:vn.current}px`,"--initial-height":nt?"auto":`${cs}px`,...j,...I.style},onDragEnd:()=>{Ue(!1),re(null),kr.current=null},onPointerDown:je=>{dr||!$n||(Ar.current=new Date,Wr(vn.current),je.target.setPointerCapture(je.pointerId),je.target.tagName!=="BUTTON"&&(Ue(!0),kr.current={x:je.clientX,y:je.clientY}))},onPointerUp:()=>{var je,wt,Ot;if(it||!$n)return;kr.current=null;const Yt=Number(((je=ft.current)==null?void 0:je.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),En=Number(((wt=ft.current)==null?void 0:wt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Pt=new Date().getTime()-((Ot=Ar.current)==null?void 0:Ot.getTime()),Ht=Ee==="x"?Yt:En,Gn=Math.abs(Ht)/Pt;if(Math.abs(Ht)>=vT||Gn>.11){Wr(vn.current),I.onDismiss==null||I.onDismiss.call(I,I),J(Ee==="x"?Yt>0?"right":"left":En>0?"down":"up"),wn(),Rt(!0);return}else{var qt,cn;(qt=ft.current)==null||qt.style.setProperty("--swipe-amount-x","0px"),(cn=ft.current)==null||cn.style.setProperty("--swipe-amount-y","0px")}or(!1),Ue(!1),re(null)},onPointerMove:je=>{var wt,Ot,Yt;if(!kr.current||!$n||((wt=window.getSelection())==null?void 0:wt.toString().length)>0)return;const Pt=je.clientY-kr.current.y,Ht=je.clientX-kr.current.x;var Gn;const qt=(Gn=r.swipeDirections)!=null?Gn:ET(M);!Ee&&(Math.abs(Ht)>1||Math.abs(Pt)>1)&&re(Math.abs(Ht)>Math.abs(Pt)?"x":"y");let cn={x:0,y:0};const Vt=ve=>1/(1.5+Math.abs(ve)/20);if(Ee==="y"){if(qt.includes("top")||qt.includes("bottom"))if(qt.includes("top")&&Pt<0||qt.includes("bottom")&&Pt>0)cn.y=Pt;else{const ve=Pt*Vt(Pt);cn.y=Math.abs(ve)<Math.abs(Pt)?ve:Pt}}else if(Ee==="x"&&(qt.includes("left")||qt.includes("right")))if(qt.includes("left")&&Ht<0||qt.includes("right")&&Ht>0)cn.x=Ht;else{const ve=Ht*Vt(Ht);cn.x=Math.abs(ve)<Math.abs(Ht)?ve:Ht}(Math.abs(cn.x)>0||Math.abs(cn.y)>0)&&or(!0),(Ot=ft.current)==null||Ot.style.setProperty("--swipe-amount-x",`${cn.x}px`),(Yt=ft.current)==null||Yt.style.setProperty("--swipe-amount-y",`${cn.y}px`)}},gi&&!I.jsx&&Wt!=="loading"?_e.createElement("button",{"aria-label":te,"data-disabled":dr,"data-close-button":!0,onClick:dr||!$n?()=>{}:()=>{wn(),I.onDismiss==null||I.onDismiss.call(I,I)},className:Ji(fe==null?void 0:fe.closeButton,I==null||(s=I.classNames)==null?void 0:s.closeButton)},(Di=Oe==null?void 0:Oe.close)!=null?Di:oT):null,(Wt||I.icon||I.promise)&&I.icon!==null&&((Oe==null?void 0:Oe[Wt])!==null||I.icon)?_e.createElement("div",{"data-icon":"",className:Ji(fe==null?void 0:fe.icon,I==null||(a=I.classNames)==null?void 0:a.icon)},I.promise||I.type==="loading"&&!I.icon?I.icon||fr():null,I.type!=="loading"?mr:null):null,_e.createElement("div",{"data-content":"",className:Ji(fe==null?void 0:fe.content,I==null||(c=I.classNames)==null?void 0:c.content)},_e.createElement("div",{"data-title":"",className:Ji(fe==null?void 0:fe.title,I==null||(m=I.classNames)==null?void 0:m.title)},I.jsx?I.jsx:typeof I.title=="function"?I.title():I.title),I.description?_e.createElement("div",{"data-description":"",className:Ji(V,qr,fe==null?void 0:fe.description,I==null||(v=I.classNames)==null?void 0:v.description)},typeof I.description=="function"?I.description():I.description):null),_e.isValidElement(I.cancel)?I.cancel:I.cancel&&Xc(I.cancel)?_e.createElement("button",{"data-button":!0,"data-cancel":!0,style:I.cancelButtonStyle||R,onClick:je=>{Xc(I.cancel)&&$n&&(I.cancel.onClick==null||I.cancel.onClick.call(I.cancel,je),wn())},className:Ji(fe==null?void 0:fe.cancelButton,I==null||(E=I.classNames)==null?void 0:E.cancelButton)},I.cancel.label):null,_e.isValidElement(I.action)?I.action:I.action&&Xc(I.action)?_e.createElement("button",{"data-button":!0,"data-action":!0,style:I.actionButtonStyle||D,onClick:je=>{Xc(I.action)&&(I.action.onClick==null||I.action.onClick.call(I.action,je),!je.defaultPrevented&&wn())},className:Ji(fe==null?void 0:fe.actionButton,I==null||(x=I.classNames)==null?void 0:x.actionButton)},I.action.label):null)};function Qg(){if(typeof window>"u"||typeof document>"u")return"ltr";const r=document.documentElement.getAttribute("dir");return r==="auto"||!r?window.getComputedStyle(document.documentElement).direction:r}function xT(r,e){const t={};return[r,e].forEach((s,a)=>{const c=a===1,m=c?"--mobile-offset":"--offset",v=c?gT:pT;function E(x){["top","right","bottom","left"].forEach(P=>{t[`${m}-${P}`]=typeof x=="number"?`${x}px`:x})}typeof s=="number"||typeof s=="string"?E(s):typeof s=="object"?["top","right","bottom","left"].forEach(x=>{s[x]===void 0?t[`${m}-${x}`]=v:t[`${m}-${x}`]=typeof s[x]=="number"?`${s[x]}px`:s[x]}):E(v)}),t}const IT=_e.forwardRef(function(e,t){const{invert:s,position:a="bottom-right",hotkey:c=["altKey","KeyT"],expand:m,closeButton:v,className:E,offset:x,mobileOffset:P,theme:I="light",richColors:A,duration:H,style:Z,visibleToasts:ne=mT,toastOptions:ee,dir:be=Qg(),gap:pe=yT,icons:he,containerAriaLabel:Me="Notifications"}=e,[He,Ne]=_e.useState([]),j=_e.useMemo(()=>Array.from(new Set([a].concat(He.filter(z=>z.position).map(z=>z.position)))),[He,a]),[R,D]=_e.useState([]),[B,V]=_e.useState(!1),[W,M]=_e.useState(!1),[Xe,nt]=_e.useState(I!=="system"?I:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),fe=_e.useRef(null),Oe=c.join("+").replace(/Key/g,"").replace(/Digit/g,""),te=_e.useRef(null),Ee=_e.useRef(!1),re=_e.useCallback(z=>{Ne(J=>{var ge;return(ge=J.find(ye=>ye.id===z.id))!=null&&ge.delete||br.dismiss(z.id),J.filter(({id:ye})=>ye!==z.id)})},[]);return _e.useEffect(()=>br.subscribe(z=>{if(z.dismiss){requestAnimationFrame(()=>{Ne(J=>J.map(ge=>ge.id===z.id?{...ge,delete:!0}:ge))});return}setTimeout(()=>{YE.flushSync(()=>{Ne(J=>{const ge=J.findIndex(ye=>ye.id===z.id);return ge!==-1?[...J.slice(0,ge),{...J[ge],...z},...J.slice(ge+1)]:[z,...J]})})})}),[He]),_e.useEffect(()=>{if(I!=="system"){nt(I);return}if(I==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?nt("dark"):nt("light")),typeof window>"u")return;const z=window.matchMedia("(prefers-color-scheme: dark)");try{z.addEventListener("change",({matches:J})=>{nt(J?"dark":"light")})}catch{z.addListener(({matches:ge})=>{try{nt(ge?"dark":"light")}catch(ye){console.error(ye)}})}},[I]),_e.useEffect(()=>{He.length<=1&&V(!1)},[He]),_e.useEffect(()=>{const z=J=>{var ge;if(c.every(ce=>J[ce]||J.code===ce)){var Te;V(!0),(Te=fe.current)==null||Te.focus()}J.code==="Escape"&&(document.activeElement===fe.current||(ge=fe.current)!=null&&ge.contains(document.activeElement))&&V(!1)};return document.addEventListener("keydown",z),()=>document.removeEventListener("keydown",z)},[c]),_e.useEffect(()=>{if(fe.current)return()=>{te.current&&(te.current.focus({preventScroll:!0}),te.current=null,Ee.current=!1)}},[fe.current]),_e.createElement("section",{ref:t,"aria-label":`${Me} ${Oe}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},j.map((z,J)=>{var ge;const[ye,Te]=z.split("-");return He.length?_e.createElement("ol",{key:z,dir:be==="auto"?Qg():be,tabIndex:-1,ref:fe,className:E,"data-sonner-toaster":!0,"data-sonner-theme":Xe,"data-y-position":ye,"data-lifted":B&&He.length>1&&!m,"data-x-position":Te,style:{"--front-toast-height":`${((ge=R[0])==null?void 0:ge.height)||0}px`,"--width":`${_T}px`,"--gap":`${pe}px`,...Z,...xT(x,P)},onBlur:ce=>{Ee.current&&!ce.currentTarget.contains(ce.relatedTarget)&&(Ee.current=!1,te.current&&(te.current.focus({preventScroll:!0}),te.current=null))},onFocus:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||Ee.current||(Ee.current=!0,te.current=ce.relatedTarget)},onMouseEnter:()=>V(!0),onMouseMove:()=>V(!0),onMouseLeave:()=>{W||V(!1)},onDragEnd:()=>V(!1),onPointerDown:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},He.filter(ce=>!ce.position&&J===0||ce.position===z).map((ce,Ge)=>{var Ue,it;return _e.createElement(TT,{key:ce.id,icons:he,index:Ge,toast:ce,defaultRichColors:A,duration:(Ue=ee==null?void 0:ee.duration)!=null?Ue:H,className:ee==null?void 0:ee.className,descriptionClassName:ee==null?void 0:ee.descriptionClassName,invert:s,visibleToasts:ne,closeButton:(it=ee==null?void 0:ee.closeButton)!=null?it:v,interacting:W,position:z,style:ee==null?void 0:ee.style,unstyled:ee==null?void 0:ee.unstyled,classNames:ee==null?void 0:ee.classNames,cancelButtonStyle:ee==null?void 0:ee.cancelButtonStyle,actionButtonStyle:ee==null?void 0:ee.actionButtonStyle,closeButtonAriaLabel:ee==null?void 0:ee.closeButtonAriaLabel,removeToast:re,toasts:He.filter(Rt=>Rt.position==ce.position),heights:R.filter(Rt=>Rt.position==ce.position),setHeights:D,expandByDefault:m,gap:pe,expanded:B,swipeDirections:e.swipeDirections})})):null}))});function ST({onSubmit:r,onCancel:e,initialLocation:t,userLocation:s,onLocationSelect:a}){const[c,m]=Ye.useState("probleme"),[v,E]=Ye.useState("usure"),[x,P]=Ye.useState("autre"),[I,A]=Ye.useState(""),[H,Z]=Ye.useState(""),[ne,ee]=Ye.useState(t||s);Ye.useEffect(()=>{t?ee(t):s&&ee(s)},[t,s]);const be=he=>{var Ne;const Me=(Ne=he.target.files)==null?void 0:Ne[0];if(!Me)return;const He=new FileReader;He.onloadend=()=>Z(He.result),He.readAsDataURL(Me)},pe=he=>{if(he.preventDefault(),!ne){wl.error("Localisation GPS non dtecte. Veuillez ressayer ou cliquer sur la carte.");return}if(!I){wl.error("La description est requise");return}if(c!=="suggestion"&&!H){wl.error("La photo est obligatoire pour ce type de signalement");return}const Me={mode:c,category:x,description:I,photo:H||"",location:{lat:ne.lat,lng:ne.lng}};c==="probleme"&&(Me.type=v),r(Me)};return k.jsx("div",{className:"px-5 pb-6",children:k.jsxs("form",{onSubmit:pe,className:"space-y-3",children:[k.jsx("div",{className:"flex bg-slate-100 p-1 rounded-xl gap-1",children:[{id:"probleme",label:"Problme",icon:k.jsx(WE,{size:14}),color:"bg-red-500"},{id:"mobilier",label:"Mobilier",icon:k.jsx(Oy,{size:14}),color:"bg-emerald-500"},{id:"suggestion",label:"Ide",icon:k.jsx(bE,{size:14}),color:"bg-indigo-600"}].map(he=>k.jsxs("button",{type:"button",onClick:()=>m(he.id),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-[11px] font-bold transition-all ${c===he.id?`${he.color} text-white shadow-sm`:"text-slate-500 hover:bg-slate-200"}`,children:[he.icon," ",he.label]},he.id))}),k.jsxs("div",{className:"bg-slate-50 rounded-2xl p-3 border border-slate-100 space-y-2",children:[c==="probleme"&&k.jsx("div",{className:"flex gap-2 mb-2",children:["usure","vandalisme"].map(he=>k.jsx("button",{type:"button",onClick:()=>E(he),className:`flex-1 py-1.5 rounded-lg text-[10px] font-bold uppercase border transition-all ${v===he?"bg-orange-100 border-orange-200 text-orange-700":"bg-white border-slate-200 text-slate-400"}`,children:he},he))}),k.jsxs("select",{value:x,onChange:he=>P(he.target.value),className:"w-full bg-white border border-slate-200 p-2 rounded-xl text-sm font-semibold text-slate-700 outline-none",children:[k.jsx("option",{value:"mobilier",children:" Mobilier urbain"}),k.jsx("option",{value:"signalisation",children:" Signalisation"}),k.jsx("option",{value:"mobilite",children:" Mobilit"}),k.jsx("option",{value:"autre",children:" Autre"})]}),k.jsx("textarea",{value:I,onChange:he=>A(he.target.value),placeholder:"Que se passe-t-il ?",rows:2,className:"w-full bg-white border border-slate-200 p-3 rounded-xl text-sm text-slate-600 outline-none resize-none focus:ring-2 focus:ring-blue-100",required:!0})]}),k.jsxs("div",{className:"flex gap-2",children:[H?k.jsxs("div",{className:"relative w-20 h-20 shrink-0",children:[k.jsx("img",{src:H,className:"w-full h-full object-cover rounded-xl border border-slate-200",alt:"Preview"}),k.jsx("button",{onClick:()=>Z(""),className:"absolute -top-1 -right-1 bg-red-500 text-white p-1 rounded-full shadow-lg",children:k.jsx(Dh,{size:10})})]}):k.jsxs("label",{className:"w-20 h-20 shrink-0 flex flex-col items-center justify-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50 text-slate-400 cursor-pointer active:bg-slate-100 transition-colors",children:[k.jsx(pE,{size:20}),k.jsx("span",{className:"text-[9px] font-bold mt-1 uppercase",children:"Photo"}),k.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:be,hidden:!0})]}),k.jsxs("button",{type:"button",onClick:a,className:`flex-1 flex flex-col items-center justify-center rounded-xl border-2 transition-all ${t?"bg-blue-600 border-blue-500 text-white shadow-md":"bg-emerald-50 border-emerald-100 text-emerald-600"}`,children:[k.jsx(Mh,{size:20,className:t?"animate-bounce":""}),k.jsx("span",{className:"text-[9px] font-bold mt-1 uppercase text-center px-1",children:t?"Position prcise":"Ma position (GPS)"}),k.jsx("span",{className:"text-[8px] opacity-70",children:"Appuyer pour changer"})]})]}),k.jsxs("div",{className:"flex gap-2 pt-1",children:[k.jsx("button",{type:"button",onClick:e,className:"p-3 bg-slate-100 text-slate-400 rounded-xl hover:bg-slate-200 transition-colors",children:k.jsx(BE,{size:18})}),k.jsxs("button",{type:"submit",className:"flex-1 bg-blue-600 text-white rounded-xl font-bold py-3 shadow-md hover:bg-blue-700 active:scale-95 transition-all flex items-center justify-center gap-2 text-sm",children:[k.jsx(_E,{size:18})," Confirmer"]})]})]})})}function Li(r){const e=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&e==="[object Date]"?new r.constructor(+r):typeof r=="number"||e==="[object Number]"||typeof r=="string"||e==="[object String]"?new Date(r):new Date(NaN)}function Na(r,e){return r instanceof Date?new r.constructor(e):new Date(e)}const zy=6048e5,PT=864e5;let bT={};function Oh(){return bT}function Ru(r,e){var v,E,x,P;const t=Oh(),s=(e==null?void 0:e.weekStartsOn)??((E=(v=e==null?void 0:e.locale)==null?void 0:v.options)==null?void 0:E.weekStartsOn)??t.weekStartsOn??((P=(x=t.locale)==null?void 0:x.options)==null?void 0:P.weekStartsOn)??0,a=Li(r),c=a.getDay(),m=(c<s?7:0)+c-s;return a.setDate(a.getDate()-m),a.setHours(0,0,0,0),a}function ph(r){return Ru(r,{weekStartsOn:1})}function Fy(r){const e=Li(r),t=e.getFullYear(),s=Na(r,0);s.setFullYear(t+1,0,4),s.setHours(0,0,0,0);const a=ph(s),c=Na(r,0);c.setFullYear(t,0,4),c.setHours(0,0,0,0);const m=ph(c);return e.getTime()>=a.getTime()?t+1:e.getTime()>=m.getTime()?t:t-1}function Yg(r){const e=Li(r);return e.setHours(0,0,0,0),e}function Xg(r){const e=Li(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function CT(r,e){const t=Yg(r),s=Yg(e),a=+t-Xg(t),c=+s-Xg(s);return Math.round((a-c)/PT)}function AT(r){const e=Fy(r),t=Na(r,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),ph(t)}function kT(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function RT(r){if(!kT(r)&&typeof r!="number")return!1;const e=Li(r);return!isNaN(Number(e))}function NT(r){const e=Li(r),t=Na(r,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const LT={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},MT=(r,e,t)=>{let s;const a=LT[r];return typeof a=="string"?s=a:e===1?s=a.one:s=a.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+s:s+" ago":s};function El(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const DT={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},OT={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},VT={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},zT={date:El({formats:DT,defaultWidth:"full"}),time:El({formats:OT,defaultWidth:"full"}),dateTime:El({formats:VT,defaultWidth:"full"})},FT={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},jT=(r,e,t,s)=>FT[r];function ts(r){return(e,t)=>{const s=t!=null&&t.context?String(t.context):"standalone";let a;if(s==="formatting"&&r.formattingValues){const m=r.defaultFormattingWidth||r.defaultWidth,v=t!=null&&t.width?String(t.width):m;a=r.formattingValues[v]||r.formattingValues[m]}else{const m=r.defaultWidth,v=t!=null&&t.width?String(t.width):r.defaultWidth;a=r.values[v]||r.values[m]}const c=r.argumentCallback?r.argumentCallback(e):e;return a[c]}}const BT={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},UT={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},WT={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},HT={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},$T={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},GT=(r,e)=>{const t=Number(r),s=t%100;if(s>20||s<10)switch(s%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},ZT={ordinalNumber:GT,era:ts({values:BT,defaultWidth:"wide"}),quarter:ts({values:UT,defaultWidth:"wide",argumentCallback:r=>r-1}),month:ts({values:WT,defaultWidth:"wide"}),day:ts({values:HT,defaultWidth:"wide"}),dayPeriod:ts({values:qT,defaultWidth:"wide",formattingValues:$T,defaultFormattingWidth:"wide"})};function ns(r){return(e,t={})=>{const s=t.width,a=s&&r.matchPatterns[s]||r.matchPatterns[r.defaultMatchWidth],c=e.match(a);if(!c)return null;const m=c[0],v=s&&r.parsePatterns[s]||r.parsePatterns[r.defaultParseWidth],E=Array.isArray(v)?QT(v,I=>I.test(m)):KT(v,I=>I.test(m));let x;x=r.valueCallback?r.valueCallback(E):E,x=t.valueCallback?t.valueCallback(x):x;const P=e.slice(m.length);return{value:x,rest:P}}}function KT(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function QT(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function jy(r){return(e,t={})=>{const s=e.match(r.matchPattern);if(!s)return null;const a=s[0],c=e.match(r.parsePattern);if(!c)return null;let m=r.valueCallback?r.valueCallback(c[0]):c[0];m=t.valueCallback?t.valueCallback(m):m;const v=e.slice(a.length);return{value:m,rest:v}}}const YT=/^(\d+)(th|st|nd|rd)?/i,XT=/\d+/i,JT={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},e1={any:[/^b/i,/^(a|c)/i]},t1={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},n1={any:[/1/i,/2/i,/3/i,/4/i]},r1={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},i1={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},s1={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},o1={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},a1={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},l1={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},u1={ordinalNumber:jy({matchPattern:YT,parsePattern:XT,valueCallback:r=>parseInt(r,10)}),era:ns({matchPatterns:JT,defaultMatchWidth:"wide",parsePatterns:e1,defaultParseWidth:"any"}),quarter:ns({matchPatterns:t1,defaultMatchWidth:"wide",parsePatterns:n1,defaultParseWidth:"any",valueCallback:r=>r+1}),month:ns({matchPatterns:r1,defaultMatchWidth:"wide",parsePatterns:i1,defaultParseWidth:"any"}),day:ns({matchPatterns:s1,defaultMatchWidth:"wide",parsePatterns:o1,defaultParseWidth:"any"}),dayPeriod:ns({matchPatterns:a1,defaultMatchWidth:"any",parsePatterns:l1,defaultParseWidth:"any"})},c1={code:"en-US",formatDistance:MT,formatLong:zT,formatRelative:jT,localize:ZT,match:u1,options:{weekStartsOn:0,firstWeekContainsDate:1}};function h1(r){const e=Li(r);return CT(e,NT(e))+1}function d1(r){const e=Li(r),t=+ph(e)-+AT(e);return Math.round(t/zy)+1}function By(r,e){var P,I,A,H;const t=Li(r),s=t.getFullYear(),a=Oh(),c=(e==null?void 0:e.firstWeekContainsDate)??((I=(P=e==null?void 0:e.locale)==null?void 0:P.options)==null?void 0:I.firstWeekContainsDate)??a.firstWeekContainsDate??((H=(A=a.locale)==null?void 0:A.options)==null?void 0:H.firstWeekContainsDate)??1,m=Na(r,0);m.setFullYear(s+1,0,c),m.setHours(0,0,0,0);const v=Ru(m,e),E=Na(r,0);E.setFullYear(s,0,c),E.setHours(0,0,0,0);const x=Ru(E,e);return t.getTime()>=v.getTime()?s+1:t.getTime()>=x.getTime()?s:s-1}function f1(r,e){var v,E,x,P;const t=Oh(),s=(e==null?void 0:e.firstWeekContainsDate)??((E=(v=e==null?void 0:e.locale)==null?void 0:v.options)==null?void 0:E.firstWeekContainsDate)??t.firstWeekContainsDate??((P=(x=t.locale)==null?void 0:x.options)==null?void 0:P.firstWeekContainsDate)??1,a=By(r,e),c=Na(r,0);return c.setFullYear(a,0,s),c.setHours(0,0,0,0),Ru(c,e)}function m1(r,e){const t=Li(r),s=+Ru(t,e)-+f1(t,e);return Math.round(s/zy)+1}function Et(r,e){const t=r<0?"-":"",s=Math.abs(r).toString().padStart(e,"0");return t+s}const Ro={y(r,e){const t=r.getFullYear(),s=t>0?t:1-t;return Et(e==="yy"?s%100:s,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):Et(t+1,2)},d(r,e){return Et(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return Et(r.getHours()%12||12,e.length)},H(r,e){return Et(r.getHours(),e.length)},m(r,e){return Et(r.getMinutes(),e.length)},s(r,e){return Et(r.getSeconds(),e.length)},S(r,e){const t=e.length,s=r.getMilliseconds(),a=Math.trunc(s*Math.pow(10,t-3));return Et(a,e.length)}},gl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Jg={G:function(r,e,t){const s=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(s,{width:"abbreviated"});case"GGGGG":return t.era(s,{width:"narrow"});case"GGGG":default:return t.era(s,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const s=r.getFullYear(),a=s>0?s:1-s;return t.ordinalNumber(a,{unit:"year"})}return Ro.y(r,e)},Y:function(r,e,t,s){const a=By(r,s),c=a>0?a:1-a;if(e==="YY"){const m=c%100;return Et(m,2)}return e==="Yo"?t.ordinalNumber(c,{unit:"year"}):Et(c,e.length)},R:function(r,e){const t=Fy(r);return Et(t,e.length)},u:function(r,e){const t=r.getFullYear();return Et(t,e.length)},Q:function(r,e,t){const s=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return Et(s,2);case"Qo":return t.ordinalNumber(s,{unit:"quarter"});case"QQQ":return t.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(s,{width:"wide",context:"formatting"})}},q:function(r,e,t){const s=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return Et(s,2);case"qo":return t.ordinalNumber(s,{unit:"quarter"});case"qqq":return t.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(s,{width:"wide",context:"standalone"})}},M:function(r,e,t){const s=r.getMonth();switch(e){case"M":case"MM":return Ro.M(r,e);case"Mo":return t.ordinalNumber(s+1,{unit:"month"});case"MMM":return t.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(s,{width:"wide",context:"formatting"})}},L:function(r,e,t){const s=r.getMonth();switch(e){case"L":return String(s+1);case"LL":return Et(s+1,2);case"Lo":return t.ordinalNumber(s+1,{unit:"month"});case"LLL":return t.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(s,{width:"wide",context:"standalone"})}},w:function(r,e,t,s){const a=m1(r,s);return e==="wo"?t.ordinalNumber(a,{unit:"week"}):Et(a,e.length)},I:function(r,e,t){const s=d1(r);return e==="Io"?t.ordinalNumber(s,{unit:"week"}):Et(s,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):Ro.d(r,e)},D:function(r,e,t){const s=h1(r);return e==="Do"?t.ordinalNumber(s,{unit:"dayOfYear"}):Et(s,e.length)},E:function(r,e,t){const s=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(s,{width:"short",context:"formatting"});case"EEEE":default:return t.day(s,{width:"wide",context:"formatting"})}},e:function(r,e,t,s){const a=r.getDay(),c=(a-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(c);case"ee":return Et(c,2);case"eo":return t.ordinalNumber(c,{unit:"day"});case"eee":return t.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(a,{width:"short",context:"formatting"});case"eeee":default:return t.day(a,{width:"wide",context:"formatting"})}},c:function(r,e,t,s){const a=r.getDay(),c=(a-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(c);case"cc":return Et(c,e.length);case"co":return t.ordinalNumber(c,{unit:"day"});case"ccc":return t.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(a,{width:"narrow",context:"standalone"});case"cccccc":return t.day(a,{width:"short",context:"standalone"});case"cccc":default:return t.day(a,{width:"wide",context:"standalone"})}},i:function(r,e,t){const s=r.getDay(),a=s===0?7:s;switch(e){case"i":return String(a);case"ii":return Et(a,e.length);case"io":return t.ordinalNumber(a,{unit:"day"});case"iii":return t.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(s,{width:"short",context:"formatting"});case"iiii":default:return t.day(s,{width:"wide",context:"formatting"})}},a:function(r,e,t){const a=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(r,e,t){const s=r.getHours();let a;switch(s===12?a=gl.noon:s===0?a=gl.midnight:a=s/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(r,e,t){const s=r.getHours();let a;switch(s>=17?a=gl.evening:s>=12?a=gl.afternoon:s>=4?a=gl.morning:a=gl.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let s=r.getHours()%12;return s===0&&(s=12),t.ordinalNumber(s,{unit:"hour"})}return Ro.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):Ro.H(r,e)},K:function(r,e,t){const s=r.getHours()%12;return e==="Ko"?t.ordinalNumber(s,{unit:"hour"}):Et(s,e.length)},k:function(r,e,t){let s=r.getHours();return s===0&&(s=24),e==="ko"?t.ordinalNumber(s,{unit:"hour"}):Et(s,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):Ro.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):Ro.s(r,e)},S:function(r,e){return Ro.S(r,e)},X:function(r,e,t){const s=r.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return t_(s);case"XXXX":case"XX":return Pa(s);case"XXXXX":case"XXX":default:return Pa(s,":")}},x:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"x":return t_(s);case"xxxx":case"xx":return Pa(s);case"xxxxx":case"xxx":default:return Pa(s,":")}},O:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+e_(s,":");case"OOOO":default:return"GMT"+Pa(s,":")}},z:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+e_(s,":");case"zzzz":default:return"GMT"+Pa(s,":")}},t:function(r,e,t){const s=Math.trunc(r.getTime()/1e3);return Et(s,e.length)},T:function(r,e,t){const s=r.getTime();return Et(s,e.length)}};function e_(r,e=""){const t=r>0?"-":"+",s=Math.abs(r),a=Math.trunc(s/60),c=s%60;return c===0?t+String(a):t+String(a)+e+Et(c,2)}function t_(r,e){return r%60===0?(r>0?"-":"+")+Et(Math.abs(r)/60,2):Pa(r,e)}function Pa(r,e=""){const t=r>0?"-":"+",s=Math.abs(r),a=Et(Math.trunc(s/60),2),c=Et(s%60,2);return t+a+e+c}const n_=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Uy=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},p1=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],s=t[1],a=t[2];if(!a)return n_(r,e);let c;switch(s){case"P":c=e.dateTime({width:"short"});break;case"PP":c=e.dateTime({width:"medium"});break;case"PPP":c=e.dateTime({width:"long"});break;case"PPPP":default:c=e.dateTime({width:"full"});break}return c.replace("{{date}}",n_(s,e)).replace("{{time}}",Uy(a,e))},g1={p:Uy,P:p1},_1=/^D+$/,y1=/^Y+$/,v1=["D","DD","YY","YYYY"];function w1(r){return _1.test(r)}function E1(r){return y1.test(r)}function T1(r,e,t){const s=x1(r,e,t);if(console.warn(s),v1.includes(r))throw new RangeError(s)}function x1(r,e,t){const s=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${s} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const I1=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,S1=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,P1=/^'([^]*?)'?$/,b1=/''/g,C1=/[a-zA-Z]/;function Lf(r,e,t){var P,I,A,H,Z,ne,ee,be;const s=Oh(),a=(t==null?void 0:t.locale)??s.locale??c1,c=(t==null?void 0:t.firstWeekContainsDate)??((I=(P=t==null?void 0:t.locale)==null?void 0:P.options)==null?void 0:I.firstWeekContainsDate)??s.firstWeekContainsDate??((H=(A=s.locale)==null?void 0:A.options)==null?void 0:H.firstWeekContainsDate)??1,m=(t==null?void 0:t.weekStartsOn)??((ne=(Z=t==null?void 0:t.locale)==null?void 0:Z.options)==null?void 0:ne.weekStartsOn)??s.weekStartsOn??((be=(ee=s.locale)==null?void 0:ee.options)==null?void 0:be.weekStartsOn)??0,v=Li(r);if(!RT(v))throw new RangeError("Invalid time value");let E=e.match(S1).map(pe=>{const he=pe[0];if(he==="p"||he==="P"){const Me=g1[he];return Me(pe,a.formatLong)}return pe}).join("").match(I1).map(pe=>{if(pe==="''")return{isToken:!1,value:"'"};const he=pe[0];if(he==="'")return{isToken:!1,value:A1(pe)};if(Jg[he])return{isToken:!0,value:pe};if(he.match(C1))throw new RangeError("Format string contains an unescaped latin alphabet character `"+he+"`");return{isToken:!1,value:pe}});a.localize.preprocessor&&(E=a.localize.preprocessor(v,E));const x={firstWeekContainsDate:c,weekStartsOn:m,locale:a};return E.map(pe=>{if(!pe.isToken)return pe.value;const he=pe.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&E1(he)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&w1(he))&&T1(he,e,String(r));const Me=Jg[he[0]];return Me(v,he,a.localize,x)}).join("")}function A1(r){const e=r.match(P1);return e?e[1].replace(b1,"'"):r}const k1={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},R1=(r,e,t)=>{let s;const a=k1[r];return typeof a=="string"?s=a:e===1?s=a.one:s=a.other.replace("{{count}}",String(e)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"dans "+s:"il y a "+s:s},N1={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},L1={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},M1={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},D1={date:El({formats:N1,defaultWidth:"full"}),time:El({formats:L1,defaultWidth:"full"}),dateTime:El({formats:M1,defaultWidth:"full"})},O1={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},V1=(r,e,t,s)=>O1[r],z1={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},F1={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},j1={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},B1={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},U1={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},W1=(r,e)=>{const t=Number(r),s=e==null?void 0:e.unit;if(t===0)return"0";const a=["year","week","hour","minute","second"];let c;return t===1?c=s&&a.includes(s)?"re":"er":c="me",t+c},H1=["MMM","MMMM"],q1={preprocessor:(r,e)=>r.getDate()===1||!e.some(s=>s.isToken&&H1.includes(s.value))?e:e.map(s=>s.isToken&&s.value==="do"?{isToken:!0,value:"d"}:s),ordinalNumber:W1,era:ts({values:z1,defaultWidth:"wide"}),quarter:ts({values:F1,defaultWidth:"wide",argumentCallback:r=>r-1}),month:ts({values:j1,defaultWidth:"wide"}),day:ts({values:B1,defaultWidth:"wide"}),dayPeriod:ts({values:U1,defaultWidth:"wide"})},$1=/^(\d+)(ime|re|me|er|e)?/i,G1=/\d+/i,Z1={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},K1={any:[/^av/i,/^ap/i]},Q1={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},Y1={any:[/1/i,/2/i,/3/i,/4/i]},X1={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},J1={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},ex={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},tx={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},nx={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},rx={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},ix={ordinalNumber:jy({matchPattern:$1,parsePattern:G1,valueCallback:r=>parseInt(r)}),era:ns({matchPatterns:Z1,defaultMatchWidth:"wide",parsePatterns:K1,defaultParseWidth:"any"}),quarter:ns({matchPatterns:Q1,defaultMatchWidth:"wide",parsePatterns:Y1,defaultParseWidth:"any",valueCallback:r=>r+1}),month:ns({matchPatterns:X1,defaultMatchWidth:"wide",parsePatterns:J1,defaultParseWidth:"any"}),day:ns({matchPatterns:ex,defaultMatchWidth:"wide",parsePatterns:tx,defaultParseWidth:"any"}),dayPeriod:ns({matchPatterns:nx,defaultMatchWidth:"any",parsePatterns:rx,defaultParseWidth:"any"})},Mf={code:"fr",formatDistance:R1,formatLong:D1,formatRelative:V1,localize:q1,match:ix,options:{weekStartsOn:1,firstWeekContainsDate:4}};function sx({report:r,onClose:e,onStatusChange:t,onValidate:s,isAdmin:a=!1}){var P,I,A;const c=H=>{switch(H){case"nouveau":return k.jsx(Dy,{className:"text-white",size:20});case"en_cours":return k.jsx(ZE,{className:"text-white",size:20});case"resolu":return k.jsx(Oy,{className:"text-white",size:20})}},m=H=>{switch(H){case"nouveau":return"Nouveau";case"en_cours":return"En cours de traitement";case"resolu":return"Rsolu"}},v=H=>{switch(H){case"nouveau":return"bg-gradient-to-br from-red-500 to-red-600 border-white text-white shadow-xl ring-4 ring-red-400";case"en_cours":return"bg-gradient-to-br from-orange-500 to-orange-600 border-white text-white shadow-xl ring-4 ring-orange-400";case"resolu":return"bg-gradient-to-br from-green-500 to-green-600 border-white text-white shadow-xl ring-4 ring-green-400"}},E=H=>H.charAt(0).toUpperCase()+H.slice(1),x=H=>({mobilier:"Mobilier urbain",signalisation:"Signalisation",mobilite:"Mobilit",autre:"Autre"})[H]||H;return k.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end md:items-center md:justify-center z-50",children:k.jsxs("div",{className:"bg-white rounded-t-3xl md:rounded-2xl w-full md:max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl",children:[k.jsxs("div",{className:"sticky top-0 bg-white border-b p-4 flex items-center justify-between",children:[k.jsx("h2",{className:"text-xl font-bold",children:"Dtails du signalement"}),k.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:k.jsx(Dh,{size:24})})]}),k.jsxs("div",{className:"p-4 space-y-4",children:[k.jsxs("div",{className:"relative",children:[k.jsx("img",{src:r.photo,alt:r.description,className:"w-full h-64 object-cover rounded-lg"}),k.jsxs("div",{className:`absolute top-3 right-3 px-3 py-2 rounded-lg border-2 font-medium flex items-center gap-2 ${v(r.status)}`,children:[c(r.status),m(r.status)]})]}),k.jsx("div",{children:k.jsx("h3",{className:"font-semibold text-lg mb-2",children:r.description})}),k.jsxs("div",{className:"space-y-3",children:[k.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[k.jsx(Mh,{size:20,className:"text-gray-600 flex-shrink-0 mt-0.5"}),k.jsxs("div",{children:[k.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Localisation"}),k.jsx("div",{className:"text-sm text-gray-600",children:r.location.address}),k.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[r.location.lat.toFixed(6),", ",r.location.lng.toFixed(6)]})]})]}),k.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[k.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[k.jsx(My,{size:20,className:"text-gray-600 flex-shrink-0 mt-0.5"}),k.jsxs("div",{children:[k.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Date"}),k.jsx("div",{className:"text-sm text-gray-600",children:Lf(new Date(r.date),"dd MMMM yyyy",{locale:Mf})}),k.jsx("div",{className:"text-xs text-gray-500",children:Lf(new Date(r.date),"HH:mm",{locale:Mf})})]})]}),k.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[k.jsx(lm,{size:20,className:"text-gray-600 flex-shrink-0 mt-0.5"}),k.jsxs("div",{children:[k.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Signal par"}),k.jsx("div",{className:"text-sm text-gray-600",children:r.reportedBy})]})]})]}),k.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.mode==="probleme"&&k.jsxs("span",{className:"px-3 py-2 bg-red-50 text-red-700 rounded-lg text-sm font-medium border-2 border-red-300",children:[" Problme: ",r.type&&E(r.type)]}),r.mode==="mobilier"&&k.jsx("span",{className:"px-3 py-2 bg-green-50 text-green-700 rounded-lg text-sm font-medium border-2 border-green-300",children:" Mobilier OK"}),r.mode==="suggestion"&&k.jsx("span",{className:"px-3 py-2 bg-indigo-50 text-indigo-700 rounded-lg text-sm font-medium border-2 border-indigo-300",children:" Suggestion"}),k.jsx("span",{className:"px-3 py-2 bg-purple-50 text-purple-700 rounded-lg text-sm font-medium border-2 border-purple-300",children:x(r.category)})]}),r.mode==="mobilier"&&r.validations!==void 0&&k.jsx("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border-2 border-green-200",children:k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center shadow-lg",children:k.jsx(vf,{className:"text-white",size:24})}),k.jsxs("div",{children:[k.jsxs("div",{className:"text-lg font-bold text-green-800",children:[r.validations," validation",r.validations>1?"s":""]}),k.jsx("div",{className:"text-sm text-green-600",children:r.validations>=10?"Ce mobilier est certifi par la communaut !":`${10-r.validations} validation${10-r.validations>1?"s":""} pour tre certifi`})]})]})})]}),!a&&s&&r.mode==="mobilier"&&k.jsxs("div",{className:"pt-4 border-t",children:[k.jsxs("button",{onClick:()=>s(r.id),disabled:(P=r.validatedBy)==null?void 0:P.includes("current-user"),className:`w-full py-4 px-4 rounded-lg font-bold transition-all flex items-center justify-center gap-3 ${(I=r.validatedBy)!=null&&I.includes("current-user")?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700 shadow-lg hover:shadow-xl"}`,children:[k.jsx(vf,{size:24}),k.jsx("span",{className:"text-lg",children:(A=r.validatedBy)!=null&&A.includes("current-user")?"Dj valid ":"Valider ce mobilier (+5 points)"})]}),k.jsx("p",{className:"text-xs text-center text-gray-500 mt-2",children:"Confirmez que ce mobilier existe bien et est en bon tat"})]}),a&&t&&k.jsxs("div",{className:"pt-4 border-t",children:[k.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Changer le statut"}),k.jsx("div",{className:"grid grid-cols-3 gap-2",children:["nouveau","en_cours","resolu"].map(H=>k.jsxs("button",{onClick:()=>t(r.id,H),className:`py-3 px-4 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${r.status===H?v(H)+" ring-2 ring-offset-2 ring-blue-500":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[c(H),k.jsx("span",{className:"text-sm",children:m(H)})]},H))})]}),a&&s&&k.jsxs("div",{className:"pt-4 border-t",children:[k.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Valider le signalement"}),k.jsxs("button",{onClick:()=>s(r.id),className:"py-3 px-4 rounded-lg font-medium transition-all flex items-center justify-center gap-2 bg-gray-100 text-gray-600 hover:bg-gray-200",children:[k.jsx(vf,{size:20}),k.jsx("span",{className:"text-sm",children:"Valider"})]})]})]})]})})}function ox({reports:r,onReportClick:e,onStatusChange:t,onValidate:s}){const[a,c]=Ye.useState("tous"),[m,v]=Ye.useState("tous"),[E,x]=Ye.useState("tous"),P=r.filter(Z=>{const ne=a==="tous"||Z.status===a,ee=m==="tous"||Z.category===m,be=E==="tous"||Z.mode===E;return ne&&ee&&be}),I=Z=>{switch(Z){case"nouveau":return"bg-gradient-to-br from-red-500 to-red-600 text-white shadow-lg border-2 border-white ring-2 ring-red-400";case"en_cours":return"bg-gradient-to-br from-orange-500 to-orange-600 text-white shadow-lg border-2 border-white ring-2 ring-orange-400";case"resolu":return"bg-gradient-to-br from-green-500 to-green-600 text-white shadow-lg border-2 border-white ring-2 ring-green-400"}},A=Z=>{switch(Z){case"nouveau":return"Nouveau";case"en_cours":return"En cours";case"resolu":return"Rsolu"}},H={nouveau:r.filter(Z=>Z.status==="nouveau").length,en_cours:r.filter(Z=>Z.status==="en_cours").length,resolu:r.filter(Z=>Z.status==="resolu").length,total:r.length};return k.jsxs("div",{className:"bg-white rounded-t-3xl shadow-lg h-full flex flex-col",children:[k.jsxs("div",{className:"p-4 border-b",children:[k.jsx("h2",{className:"text-xl font-bold mb-4",children:"Tableau de bord - Agent"}),k.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[k.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 text-center",children:[k.jsx("div",{className:"text-lg font-bold",children:H.total}),k.jsx("div",{className:"text-xs text-gray-600",children:"Total"})]}),k.jsxs("div",{className:"bg-red-50 rounded-lg p-2 text-center",children:[k.jsx("div",{className:"text-lg font-bold text-red-700",children:H.nouveau}),k.jsx("div",{className:"text-xs text-red-600",children:"Nouveaux"})]}),k.jsxs("div",{className:"bg-orange-50 rounded-lg p-2 text-center",children:[k.jsx("div",{className:"text-lg font-bold text-orange-700",children:H.en_cours}),k.jsx("div",{className:"text-xs text-orange-600",children:"En cours"})]}),k.jsxs("div",{className:"bg-green-50 rounded-lg p-2 text-center",children:[k.jsx("div",{className:"text-lg font-bold text-green-700",children:H.resolu}),k.jsx("div",{className:"text-xs text-green-600",children:"Rsolus"})]})]}),k.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[k.jsx(EE,{size:16,className:"text-gray-500"}),k.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtres:"})]}),k.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[k.jsxs("select",{value:a,onChange:Z=>c(Z.target.value),className:"p-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[k.jsx("option",{value:"tous",children:"Tous les statuts"}),k.jsx("option",{value:"nouveau",children:"Nouveaux"}),k.jsx("option",{value:"en_cours",children:"En cours"}),k.jsx("option",{value:"resolu",children:"Rsolus"})]}),k.jsxs("select",{value:m,onChange:Z=>v(Z.target.value),className:"p-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[k.jsx("option",{value:"tous",children:"Toutes catgories"}),k.jsx("option",{value:"mobilier",children:"Mobilier urbain"}),k.jsx("option",{value:"signalisation",children:"Signalisation"}),k.jsx("option",{value:"mobilite",children:"Mobilit"}),k.jsx("option",{value:"autre",children:"Autre"})]}),k.jsxs("select",{value:E,onChange:Z=>x(Z.target.value),className:"p-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 col-span-2",children:[k.jsx("option",{value:"tous",children:"Tous les types"}),k.jsx("option",{value:"probleme",children:" Problmes uniquement"}),k.jsx("option",{value:"mobilier",children:" Mobiliers uniquement"}),k.jsx("option",{value:"suggestion",children:" Suggestions uniquement"})]})]})]}),k.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:P.length===0?k.jsxs("div",{className:"text-center py-8 text-gray-500",children:[k.jsx(Dy,{size:48,className:"mx-auto mb-2 opacity-50"}),k.jsx("p",{children:"Aucun signalement trouv"})]}):P.map(Z=>k.jsxs("div",{onClick:()=>e(Z),className:"bg-white border border-gray-200 rounded-lg p-3 hover:shadow-md transition-shadow cursor-pointer",children:[k.jsxs("div",{className:"flex gap-3",children:[k.jsx("img",{src:Z.photo,alt:Z.description,className:"w-20 h-20 object-cover rounded-lg flex-shrink-0"}),k.jsxs("div",{className:"flex-1 min-w-0",children:[k.jsx("div",{className:"flex items-start justify-between gap-2 mb-1",children:k.jsx("h3",{className:"font-semibold text-sm line-clamp-2",children:Z.description})}),k.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-600 mb-2",children:[k.jsx(Mh,{size:12}),k.jsx("span",{className:"truncate",children:Z.location.address})]}),k.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[k.jsx("span",{className:`px-2 py-1 rounded font-medium ${I(Z.status)}`,children:A(Z.status)}),k.jsx("span",{className:"px-2 py-1 rounded bg-gray-100 text-gray-700",children:Z.category})]}),k.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[k.jsxs("div",{className:"flex items-center gap-1",children:[k.jsx(My,{size:12}),Lf(new Date(Z.date),"dd MMM yyyy",{locale:Mf})]}),k.jsxs("div",{className:"flex items-center gap-1",children:[k.jsx(lm,{size:12}),Z.reportedBy]})]})]})]}),k.jsx("div",{className:"mt-3 pt-3 border-t flex gap-2",children:["nouveau","en_cours","resolu"].map(ne=>k.jsx("button",{onClick:ee=>{ee.stopPropagation(),t(Z.id,ne)},className:`flex-1 py-1.5 px-2 rounded text-xs font-medium transition-colors ${Z.status===ne?I(ne)+" cursor-default":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,disabled:Z.status===ne,children:A(ne)},ne))})]},Z.id))})]})}function ax({isOpen:r,onClose:e,userName:t,userPhoto:s,points:a,level:c,badge:m}){return k.jsxs(k.Fragment,{children:[k.jsx("div",{className:`fixed inset-0 bg-slate-900/20 backdrop-blur-[2px] z-[60] transition-opacity duration-300 ${r?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e}),k.jsxs("div",{className:`fixed top-0 right-0 h-full w-[85%] max-w-sm bg-white shadow-2xl z-[70] transform transition-transform duration-300 ease-in-out border-l border-slate-100 ${r?"translate-x-0":"translate-x-full"}`,children:[k.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 p-8 text-white relative",children:[k.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 hover:bg-white/10 rounded-full transition-colors",children:k.jsx(Dh,{size:24})}),k.jsxs("div",{className:"flex flex-col items-center",children:[k.jsxs("div",{className:"relative mb-4",children:[k.jsx("img",{src:s,alt:t,className:"w-24 h-24 rounded-full border-4 border-white/20 object-cover shadow-xl"}),k.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-500 w-8 h-8 rounded-full flex items-center justify-center border-4 border-slate-800",children:k.jsx("span",{className:"text-xs font-bold text-white",children:c})})]}),k.jsx("h2",{className:"text-xl font-bold",children:t}),k.jsx("p",{className:"text-blue-300 text-sm font-medium uppercase tracking-widest mt-1",children:m})]})]}),k.jsxs("div",{className:"p-6 space-y-6",children:[k.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[k.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100",children:[k.jsxs("div",{className:"flex items-center gap-2 text-amber-600 mb-1",children:[k.jsx(qE,{size:16}),k.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Points"})]}),k.jsx("p",{className:"text-2xl font-black text-slate-800",children:a})]}),k.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100",children:[k.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[k.jsx(Vy,{size:16}),k.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Rang"})]}),k.jsxs("p",{className:"text-2xl font-black text-slate-800",children:["#",c+2]})]})]}),k.jsxs("div",{className:"space-y-2",children:[k.jsxs("button",{className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 rounded-xl transition-colors group",children:[k.jsxs("div",{className:"flex items-center gap-3 text-slate-700",children:[k.jsx(zE,{className:"text-slate-400 group-hover:text-amber-500 transition-colors",size:20}),k.jsx("span",{className:"font-semibold",children:"Mes succs"})]}),k.jsx("span",{className:"bg-red-100 text-red-600 text-[10px] font-bold px-2 py-1 rounded-full italic",children:"Bientt"})]}),k.jsxs("button",{className:"w-full flex items-center gap-3 p-4 text-red-500 hover:bg-red-50 rounded-xl transition-colors mt-8 font-bold",children:[k.jsx(kE,{size:20}),"Dconnexion"]})]})]})]})]})}const lx=()=>{};var r_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let a=r.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},ux=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const a=r[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=r[t++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=r[t++],m=r[t++],v=r[t++],E=((a&7)<<18|(c&63)<<12|(m&63)<<6|v&63)-65536;e[s++]=String.fromCharCode(55296+(E>>10)),e[s++]=String.fromCharCode(56320+(E&1023))}else{const c=r[t++],m=r[t++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|m&63)}}return e.join("")},Hy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<r.length;a+=3){const c=r[a],m=a+1<r.length,v=m?r[a+1]:0,E=a+2<r.length,x=E?r[a+2]:0,P=c>>2,I=(c&3)<<4|v>>4;let A=(v&15)<<2|x>>6,H=x&63;E||(H=64,m||(A=64)),s.push(t[P],t[I],t[A],t[H])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Wy(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):ux(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<r.length;){const c=t[r.charAt(a++)],v=a<r.length?t[r.charAt(a)]:0;++a;const x=a<r.length?t[r.charAt(a)]:64;++a;const I=a<r.length?t[r.charAt(a)]:64;if(++a,c==null||v==null||x==null||I==null)throw new cx;const A=c<<2|v>>4;if(s.push(A),x!==64){const H=v<<4&240|x>>2;if(s.push(H),I!==64){const Z=x<<6&192|I;s.push(Z)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class cx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hx=function(r){const e=Wy(r);return Hy.encodeByteArray(e,!0)},gh=function(r){return hx(r).replace(/\./g,"")},qy=function(r){try{return Hy.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=()=>dx().__FIREBASE_DEFAULTS__,mx=()=>{if(typeof process>"u"||typeof r_>"u")return;const r=r_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},px=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&qy(r[1]);return e&&JSON.parse(e)},Vh=()=>{try{return lx()||fx()||mx()||px()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},$y=r=>{var e,t;return(t=(e=Vh())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},gx=r=>{const e=$y(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Gy=()=>{var r;return(r=Vh())==null?void 0:r.config},Zy=r=>{var e;return(e=Vh())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ky(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const m={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[gh(JSON.stringify(t)),gh(JSON.stringify(m)),""].join(".")}const Su={};function vx(){const r={prod:[],emulator:[]};for(const e of Object.keys(Su))Su[e]?r.emulator.push(e):r.prod.push(e);return r}function wx(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let i_=!1;function Qy(r,e){if(typeof window>"u"||typeof document>"u"||!Vl(window.location.host)||Su[r]===e||Su[r]||i_)return;Su[r]=e;function t(A){return`__firebase__banner__${A}`}const s="__firebase__banner",c=vx().prod.length>0;function m(){const A=document.getElementById(s);A&&A.remove()}function v(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function E(A,H){A.setAttribute("width","24"),A.setAttribute("id",H),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function x(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{i_=!0,m()},A}function P(A,H){A.setAttribute("id",H),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function I(){const A=wx(s),H=t("text"),Z=document.getElementById(H)||document.createElement("span"),ne=t("learnmore"),ee=document.getElementById(ne)||document.createElement("a"),be=t("preprendIcon"),pe=document.getElementById(be)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const he=A.element;v(he),P(ee,ne);const Me=x();E(pe,be),he.append(pe,Z,ee,Me),document.body.appendChild(he)}c?(Z.innerText="Preview backend disconnected.",pe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(pe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Z.innerText="Preview backend running in this workspace."),Z.setAttribute("id",H)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ex(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qn())}function Tx(){var e;const r=(e=Vh())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ix(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Sx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Px(){const r=qn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function bx(){return!Tx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Cx(){try{return typeof indexedDB=="object"}catch{return!1}}function Ax(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var c;e(((c=a.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="FirebaseError";class Gs extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=kx,Object.setPrototypeOf(this,Gs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uu.prototype.create)}}class Uu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,c=this.errors[e],m=c?Rx(c,s):"Error",v=`${this.serviceName}: ${m} (${a}).`;return new Gs(a,v,s)}}function Rx(r,e){return r.replace(Nx,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const Nx=/\{\$([^}]+)}/g;function Lx(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function La(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const c=r[a],m=e[a];if(s_(c)&&s_(m)){if(!La(c,m))return!1}else if(c!==m)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function s_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Mx(r,e){const t=new Dx(r,e);return t.subscribe.bind(t)}class Dx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");Ox(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=wf),a.error===void 0&&(a.error=wf),a.complete===void 0&&(a.complete=wf);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ox(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function wf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(r){return r&&r._delegate?r._delegate:r}class Ma{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new _x;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Fx(e))try{this.getOrInitializeService({instanceIdentifier:ba})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=ba){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ba){return this.instances.has(e)}getOptions(e=ba){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,m]of this.instancesDeferred.entries()){const v=this.normalizeInstanceIdentifier(c);s===v&&m.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&e(c,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:zx(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ba){return this.component?this.component.multipleInstances?e:ba:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zx(r){return r===ba?void 0:r}function Fx(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Vx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(st||(st={}));const Bx={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},Ux=st.INFO,Wx={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},Hx=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),a=Wx[e];if(a)console[a](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class um{constructor(e){this.name=e,this._logLevel=Ux,this._logHandler=Hx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Bx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}const qx=(r,e)=>e.some(t=>r instanceof t);let o_,a_;function $x(){return o_||(o_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Gx(){return a_||(a_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yy=new WeakMap,Df=new WeakMap,Xy=new WeakMap,Ef=new WeakMap,cm=new WeakMap;function Zx(r){const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("success",c),r.removeEventListener("error",m)},c=()=>{t(zo(r.result)),a()},m=()=>{s(r.error),a()};r.addEventListener("success",c),r.addEventListener("error",m)});return e.then(t=>{t instanceof IDBCursor&&Yy.set(t,r)}).catch(()=>{}),cm.set(e,r),e}function Kx(r){if(Df.has(r))return;const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",m),r.removeEventListener("abort",m)},c=()=>{t(),a()},m=()=>{s(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",c),r.addEventListener("error",m),r.addEventListener("abort",m)});Df.set(r,e)}let Of={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Df.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Xy.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return zo(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Qx(r){Of=r(Of)}function Yx(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Tf(this),e,...t);return Xy.set(s,e.sort?e.sort():[e]),zo(s)}:Gx().includes(r)?function(...e){return r.apply(Tf(this),e),zo(Yy.get(this))}:function(...e){return zo(r.apply(Tf(this),e))}}function Xx(r){return typeof r=="function"?Yx(r):(r instanceof IDBTransaction&&Kx(r),qx(r,$x())?new Proxy(r,Of):r)}function zo(r){if(r instanceof IDBRequest)return Zx(r);if(Ef.has(r))return Ef.get(r);const e=Xx(r);return e!==r&&(Ef.set(r,e),cm.set(e,r)),e}const Tf=r=>cm.get(r);function Jx(r,e,{blocked:t,upgrade:s,blocking:a,terminated:c}={}){const m=indexedDB.open(r,e),v=zo(m);return s&&m.addEventListener("upgradeneeded",E=>{s(zo(m.result),E.oldVersion,E.newVersion,zo(m.transaction),E)}),t&&m.addEventListener("blocked",E=>t(E.oldVersion,E.newVersion,E)),v.then(E=>{c&&E.addEventListener("close",()=>c()),a&&E.addEventListener("versionchange",x=>a(x.oldVersion,x.newVersion,x))}).catch(()=>{}),v}const eI=["get","getKey","getAll","getAllKeys","count"],tI=["put","add","delete","clear"],xf=new Map;function l_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(xf.get(e))return xf.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=tI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||eI.includes(t)))return;const c=async function(m,...v){const E=this.transaction(m,a?"readwrite":"readonly");let x=E.store;return s&&(x=x.index(v.shift())),(await Promise.all([x[t](...v),a&&E.done]))[0]};return xf.set(e,c),c}Qx(r=>({...r,get:(e,t,s)=>l_(e,t)||r.get(e,t,s),has:(e,t)=>!!l_(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(rI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function rI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vf="@firebase/app",u_="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new um("@firebase/app"),iI="@firebase/app-compat",sI="@firebase/analytics-compat",oI="@firebase/analytics",aI="@firebase/app-check-compat",lI="@firebase/app-check",uI="@firebase/auth",cI="@firebase/auth-compat",hI="@firebase/database",dI="@firebase/data-connect",fI="@firebase/database-compat",mI="@firebase/functions",pI="@firebase/functions-compat",gI="@firebase/installations",_I="@firebase/installations-compat",yI="@firebase/messaging",vI="@firebase/messaging-compat",wI="@firebase/performance",EI="@firebase/performance-compat",TI="@firebase/remote-config",xI="@firebase/remote-config-compat",II="@firebase/storage",SI="@firebase/storage-compat",PI="@firebase/firestore",bI="@firebase/ai",CI="@firebase/firestore-compat",AI="firebase",kI="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="[DEFAULT]",RI={[Vf]:"fire-core",[iI]:"fire-core-compat",[oI]:"fire-analytics",[sI]:"fire-analytics-compat",[lI]:"fire-app-check",[aI]:"fire-app-check-compat",[uI]:"fire-auth",[cI]:"fire-auth-compat",[hI]:"fire-rtdb",[dI]:"fire-data-connect",[fI]:"fire-rtdb-compat",[mI]:"fire-fn",[pI]:"fire-fn-compat",[gI]:"fire-iid",[_I]:"fire-iid-compat",[yI]:"fire-fcm",[vI]:"fire-fcm-compat",[wI]:"fire-perf",[EI]:"fire-perf-compat",[TI]:"fire-rc",[xI]:"fire-rc-compat",[II]:"fire-gcs",[SI]:"fire-gcs-compat",[PI]:"fire-fst",[CI]:"fire-fst-compat",[bI]:"fire-vertex","fire-js":"fire-js",[AI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new Map,NI=new Map,Ff=new Map;function c_(r,e){try{r.container.addComponent(e)}catch(t){Ws.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Cl(r){const e=r.name;if(Ff.has(e))return Ws.debug(`There were multiple attempts to register component ${e}.`),!1;Ff.set(e,r);for(const t of _h.values())c_(t,r);for(const t of NI.values())c_(t,r);return!0}function hm(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Ci(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fo=new Uu("app","Firebase",LI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ma("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=kI;function Jy(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:zf,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw Fo.create("bad-app-name",{appName:String(a)});if(t||(t=Gy()),!t)throw Fo.create("no-options");const c=_h.get(a);if(c){if(La(t,c.options)&&La(s,c.config))return c;throw Fo.create("duplicate-app",{appName:a})}const m=new jx(a);for(const E of Ff.values())m.addComponent(E);const v=new MI(t,s,m);return _h.set(a,v),v}function ev(r=zf){const e=_h.get(r);if(!e&&r===zf&&Gy())return Jy();if(!e)throw Fo.create("no-app",{appName:r});return e}function jo(r,e,t){let s=RI[r]??r;t&&(s+=`-${t}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const m=[`Unable to register library "${s}" with version "${e}":`];a&&m.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&m.push("and"),c&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ws.warn(m.join(" "));return}Cl(new Ma(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="firebase-heartbeat-database",OI=1,Nu="firebase-heartbeat-store";let If=null;function tv(){return If||(If=Jx(DI,OI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Nu)}catch(t){console.warn(t)}}}}).catch(r=>{throw Fo.create("idb-open",{originalErrorMessage:r.message})})),If}async function VI(r){try{const t=(await tv()).transaction(Nu),s=await t.objectStore(Nu).get(nv(r));return await t.done,s}catch(e){if(e instanceof Gs)Ws.warn(e.message);else{const t=Fo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ws.warn(t.message)}}}async function h_(r,e){try{const s=(await tv()).transaction(Nu,"readwrite");await s.objectStore(Nu).put(e,nv(r)),await s.done}catch(t){if(t instanceof Gs)Ws.warn(t.message);else{const s=Fo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ws.warn(s.message)}}}function nv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=1024,FI=30;class jI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new UI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=d_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(m=>m.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>FI){const m=WI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(m,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ws.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=d_(),{heartbeatsToSend:s,unsentEntries:a}=BI(this._heartbeatsCache.heartbeats),c=gh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Ws.warn(t),""}}}function d_(){return new Date().toISOString().substring(0,10)}function BI(r,e=zI){const t=[];let s=r.slice();for(const a of r){const c=t.find(m=>m.agent===a.agent);if(c){if(c.dates.push(a.date),f_(t)>e){c.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),f_(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class UI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Cx()?Ax().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await VI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return h_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return h_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function f_(r){return gh(JSON.stringify({version:2,heartbeats:r})).length}function WI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(r){Cl(new Ma("platform-logger",e=>new nI(e),"PRIVATE")),Cl(new Ma("heartbeat",e=>new jI(e),"PRIVATE")),jo(Vf,u_,r),jo(Vf,u_,"esm2020"),jo("fire-js","")}HI("");var qI="firebase",$I="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jo(qI,$I,"app");var m_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bo,rv;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,R){function D(){}D.prototype=R.prototype,j.F=R.prototype,j.prototype=new D,j.prototype.constructor=j,j.D=function(B,V,W){for(var M=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)M[Xe-2]=arguments[Xe];return R.prototype[V].apply(B,M)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(j,R,D){D||(D=0);const B=Array(16);if(typeof R=="string")for(var V=0;V<16;++V)B[V]=R.charCodeAt(D++)|R.charCodeAt(D++)<<8|R.charCodeAt(D++)<<16|R.charCodeAt(D++)<<24;else for(V=0;V<16;++V)B[V]=R[D++]|R[D++]<<8|R[D++]<<16|R[D++]<<24;R=j.g[0],D=j.g[1],V=j.g[2];let W=j.g[3],M;M=R+(W^D&(V^W))+B[0]+3614090360&4294967295,R=D+(M<<7&4294967295|M>>>25),M=W+(V^R&(D^V))+B[1]+3905402710&4294967295,W=R+(M<<12&4294967295|M>>>20),M=V+(D^W&(R^D))+B[2]+606105819&4294967295,V=W+(M<<17&4294967295|M>>>15),M=D+(R^V&(W^R))+B[3]+3250441966&4294967295,D=V+(M<<22&4294967295|M>>>10),M=R+(W^D&(V^W))+B[4]+4118548399&4294967295,R=D+(M<<7&4294967295|M>>>25),M=W+(V^R&(D^V))+B[5]+1200080426&4294967295,W=R+(M<<12&4294967295|M>>>20),M=V+(D^W&(R^D))+B[6]+2821735955&4294967295,V=W+(M<<17&4294967295|M>>>15),M=D+(R^V&(W^R))+B[7]+4249261313&4294967295,D=V+(M<<22&4294967295|M>>>10),M=R+(W^D&(V^W))+B[8]+1770035416&4294967295,R=D+(M<<7&4294967295|M>>>25),M=W+(V^R&(D^V))+B[9]+2336552879&4294967295,W=R+(M<<12&4294967295|M>>>20),M=V+(D^W&(R^D))+B[10]+4294925233&4294967295,V=W+(M<<17&4294967295|M>>>15),M=D+(R^V&(W^R))+B[11]+2304563134&4294967295,D=V+(M<<22&4294967295|M>>>10),M=R+(W^D&(V^W))+B[12]+1804603682&4294967295,R=D+(M<<7&4294967295|M>>>25),M=W+(V^R&(D^V))+B[13]+4254626195&4294967295,W=R+(M<<12&4294967295|M>>>20),M=V+(D^W&(R^D))+B[14]+2792965006&4294967295,V=W+(M<<17&4294967295|M>>>15),M=D+(R^V&(W^R))+B[15]+1236535329&4294967295,D=V+(M<<22&4294967295|M>>>10),M=R+(V^W&(D^V))+B[1]+4129170786&4294967295,R=D+(M<<5&4294967295|M>>>27),M=W+(D^V&(R^D))+B[6]+3225465664&4294967295,W=R+(M<<9&4294967295|M>>>23),M=V+(R^D&(W^R))+B[11]+643717713&4294967295,V=W+(M<<14&4294967295|M>>>18),M=D+(W^R&(V^W))+B[0]+3921069994&4294967295,D=V+(M<<20&4294967295|M>>>12),M=R+(V^W&(D^V))+B[5]+3593408605&4294967295,R=D+(M<<5&4294967295|M>>>27),M=W+(D^V&(R^D))+B[10]+38016083&4294967295,W=R+(M<<9&4294967295|M>>>23),M=V+(R^D&(W^R))+B[15]+3634488961&4294967295,V=W+(M<<14&4294967295|M>>>18),M=D+(W^R&(V^W))+B[4]+3889429448&4294967295,D=V+(M<<20&4294967295|M>>>12),M=R+(V^W&(D^V))+B[9]+568446438&4294967295,R=D+(M<<5&4294967295|M>>>27),M=W+(D^V&(R^D))+B[14]+3275163606&4294967295,W=R+(M<<9&4294967295|M>>>23),M=V+(R^D&(W^R))+B[3]+4107603335&4294967295,V=W+(M<<14&4294967295|M>>>18),M=D+(W^R&(V^W))+B[8]+1163531501&4294967295,D=V+(M<<20&4294967295|M>>>12),M=R+(V^W&(D^V))+B[13]+2850285829&4294967295,R=D+(M<<5&4294967295|M>>>27),M=W+(D^V&(R^D))+B[2]+4243563512&4294967295,W=R+(M<<9&4294967295|M>>>23),M=V+(R^D&(W^R))+B[7]+1735328473&4294967295,V=W+(M<<14&4294967295|M>>>18),M=D+(W^R&(V^W))+B[12]+2368359562&4294967295,D=V+(M<<20&4294967295|M>>>12),M=R+(D^V^W)+B[5]+4294588738&4294967295,R=D+(M<<4&4294967295|M>>>28),M=W+(R^D^V)+B[8]+2272392833&4294967295,W=R+(M<<11&4294967295|M>>>21),M=V+(W^R^D)+B[11]+1839030562&4294967295,V=W+(M<<16&4294967295|M>>>16),M=D+(V^W^R)+B[14]+4259657740&4294967295,D=V+(M<<23&4294967295|M>>>9),M=R+(D^V^W)+B[1]+2763975236&4294967295,R=D+(M<<4&4294967295|M>>>28),M=W+(R^D^V)+B[4]+1272893353&4294967295,W=R+(M<<11&4294967295|M>>>21),M=V+(W^R^D)+B[7]+4139469664&4294967295,V=W+(M<<16&4294967295|M>>>16),M=D+(V^W^R)+B[10]+3200236656&4294967295,D=V+(M<<23&4294967295|M>>>9),M=R+(D^V^W)+B[13]+681279174&4294967295,R=D+(M<<4&4294967295|M>>>28),M=W+(R^D^V)+B[0]+3936430074&4294967295,W=R+(M<<11&4294967295|M>>>21),M=V+(W^R^D)+B[3]+3572445317&4294967295,V=W+(M<<16&4294967295|M>>>16),M=D+(V^W^R)+B[6]+76029189&4294967295,D=V+(M<<23&4294967295|M>>>9),M=R+(D^V^W)+B[9]+3654602809&4294967295,R=D+(M<<4&4294967295|M>>>28),M=W+(R^D^V)+B[12]+3873151461&4294967295,W=R+(M<<11&4294967295|M>>>21),M=V+(W^R^D)+B[15]+530742520&4294967295,V=W+(M<<16&4294967295|M>>>16),M=D+(V^W^R)+B[2]+3299628645&4294967295,D=V+(M<<23&4294967295|M>>>9),M=R+(V^(D|~W))+B[0]+4096336452&4294967295,R=D+(M<<6&4294967295|M>>>26),M=W+(D^(R|~V))+B[7]+1126891415&4294967295,W=R+(M<<10&4294967295|M>>>22),M=V+(R^(W|~D))+B[14]+2878612391&4294967295,V=W+(M<<15&4294967295|M>>>17),M=D+(W^(V|~R))+B[5]+4237533241&4294967295,D=V+(M<<21&4294967295|M>>>11),M=R+(V^(D|~W))+B[12]+1700485571&4294967295,R=D+(M<<6&4294967295|M>>>26),M=W+(D^(R|~V))+B[3]+2399980690&4294967295,W=R+(M<<10&4294967295|M>>>22),M=V+(R^(W|~D))+B[10]+4293915773&4294967295,V=W+(M<<15&4294967295|M>>>17),M=D+(W^(V|~R))+B[1]+2240044497&4294967295,D=V+(M<<21&4294967295|M>>>11),M=R+(V^(D|~W))+B[8]+1873313359&4294967295,R=D+(M<<6&4294967295|M>>>26),M=W+(D^(R|~V))+B[15]+4264355552&4294967295,W=R+(M<<10&4294967295|M>>>22),M=V+(R^(W|~D))+B[6]+2734768916&4294967295,V=W+(M<<15&4294967295|M>>>17),M=D+(W^(V|~R))+B[13]+1309151649&4294967295,D=V+(M<<21&4294967295|M>>>11),M=R+(V^(D|~W))+B[4]+4149444226&4294967295,R=D+(M<<6&4294967295|M>>>26),M=W+(D^(R|~V))+B[11]+3174756917&4294967295,W=R+(M<<10&4294967295|M>>>22),M=V+(R^(W|~D))+B[2]+718787259&4294967295,V=W+(M<<15&4294967295|M>>>17),M=D+(W^(V|~R))+B[9]+3951481745&4294967295,j.g[0]=j.g[0]+R&4294967295,j.g[1]=j.g[1]+(V+(M<<21&4294967295|M>>>11))&4294967295,j.g[2]=j.g[2]+V&4294967295,j.g[3]=j.g[3]+W&4294967295}s.prototype.v=function(j,R){R===void 0&&(R=j.length);const D=R-this.blockSize,B=this.C;let V=this.h,W=0;for(;W<R;){if(V==0)for(;W<=D;)a(this,j,W),W+=this.blockSize;if(typeof j=="string"){for(;W<R;)if(B[V++]=j.charCodeAt(W++),V==this.blockSize){a(this,B),V=0;break}}else for(;W<R;)if(B[V++]=j[W++],V==this.blockSize){a(this,B),V=0;break}}this.h=V,this.o+=R},s.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var R=1;R<j.length-8;++R)j[R]=0;R=this.o*8;for(var D=j.length-8;D<j.length;++D)j[D]=R&255,R/=256;for(this.v(j),j=Array(16),R=0,D=0;D<4;++D)for(let B=0;B<32;B+=8)j[R++]=this.g[D]>>>B&255;return j};function c(j,R){var D=v;return Object.prototype.hasOwnProperty.call(D,j)?D[j]:D[j]=R(j)}function m(j,R){this.h=R;const D=[];let B=!0;for(let V=j.length-1;V>=0;V--){const W=j[V]|0;B&&W==R||(D[V]=W,B=!1)}this.g=D}var v={};function E(j){return-128<=j&&j<128?c(j,function(R){return new m([R|0],R<0?-1:0)}):new m([j|0],j<0?-1:0)}function x(j){if(isNaN(j)||!isFinite(j))return I;if(j<0)return ee(x(-j));const R=[];let D=1;for(let B=0;j>=D;B++)R[B]=j/D|0,D*=4294967296;return new m(R,0)}function P(j,R){if(j.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(j.charAt(0)=="-")return ee(P(j.substring(1),R));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=x(Math.pow(R,8));let B=I;for(let W=0;W<j.length;W+=8){var V=Math.min(8,j.length-W);const M=parseInt(j.substring(W,W+V),R);V<8?(V=x(Math.pow(R,V)),B=B.j(V).add(x(M))):(B=B.j(D),B=B.add(x(M)))}return B}var I=E(0),A=E(1),H=E(16777216);r=m.prototype,r.m=function(){if(ne(this))return-ee(this).m();let j=0,R=1;for(let D=0;D<this.g.length;D++){const B=this.i(D);j+=(B>=0?B:4294967296+B)*R,R*=4294967296}return j},r.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(Z(this))return"0";if(ne(this))return"-"+ee(this).toString(j);const R=x(Math.pow(j,6));var D=this;let B="";for(;;){const V=Me(D,R).g;D=be(D,V.j(R));let W=((D.g.length>0?D.g[0]:D.h)>>>0).toString(j);if(D=V,Z(D))return W+B;for(;W.length<6;)W="0"+W;B=W+B}},r.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function Z(j){if(j.h!=0)return!1;for(let R=0;R<j.g.length;R++)if(j.g[R]!=0)return!1;return!0}function ne(j){return j.h==-1}r.l=function(j){return j=be(this,j),ne(j)?-1:Z(j)?0:1};function ee(j){const R=j.g.length,D=[];for(let B=0;B<R;B++)D[B]=~j.g[B];return new m(D,~j.h).add(A)}r.abs=function(){return ne(this)?ee(this):this},r.add=function(j){const R=Math.max(this.g.length,j.g.length),D=[];let B=0;for(let V=0;V<=R;V++){let W=B+(this.i(V)&65535)+(j.i(V)&65535),M=(W>>>16)+(this.i(V)>>>16)+(j.i(V)>>>16);B=M>>>16,W&=65535,M&=65535,D[V]=M<<16|W}return new m(D,D[D.length-1]&-2147483648?-1:0)};function be(j,R){return j.add(ee(R))}r.j=function(j){if(Z(this)||Z(j))return I;if(ne(this))return ne(j)?ee(this).j(ee(j)):ee(ee(this).j(j));if(ne(j))return ee(this.j(ee(j)));if(this.l(H)<0&&j.l(H)<0)return x(this.m()*j.m());const R=this.g.length+j.g.length,D=[];for(var B=0;B<2*R;B++)D[B]=0;for(B=0;B<this.g.length;B++)for(let V=0;V<j.g.length;V++){const W=this.i(B)>>>16,M=this.i(B)&65535,Xe=j.i(V)>>>16,nt=j.i(V)&65535;D[2*B+2*V]+=M*nt,pe(D,2*B+2*V),D[2*B+2*V+1]+=W*nt,pe(D,2*B+2*V+1),D[2*B+2*V+1]+=M*Xe,pe(D,2*B+2*V+1),D[2*B+2*V+2]+=W*Xe,pe(D,2*B+2*V+2)}for(j=0;j<R;j++)D[j]=D[2*j+1]<<16|D[2*j];for(j=R;j<2*R;j++)D[j]=0;return new m(D,0)};function pe(j,R){for(;(j[R]&65535)!=j[R];)j[R+1]+=j[R]>>>16,j[R]&=65535,R++}function he(j,R){this.g=j,this.h=R}function Me(j,R){if(Z(R))throw Error("division by zero");if(Z(j))return new he(I,I);if(ne(j))return R=Me(ee(j),R),new he(ee(R.g),ee(R.h));if(ne(R))return R=Me(j,ee(R)),new he(ee(R.g),R.h);if(j.g.length>30){if(ne(j)||ne(R))throw Error("slowDivide_ only works with positive integers.");for(var D=A,B=R;B.l(j)<=0;)D=He(D),B=He(B);var V=Ne(D,1),W=Ne(B,1);for(B=Ne(B,2),D=Ne(D,2);!Z(B);){var M=W.add(B);M.l(j)<=0&&(V=V.add(D),W=M),B=Ne(B,1),D=Ne(D,1)}return R=be(j,V.j(R)),new he(V,R)}for(V=I;j.l(R)>=0;){for(D=Math.max(1,Math.floor(j.m()/R.m())),B=Math.ceil(Math.log(D)/Math.LN2),B=B<=48?1:Math.pow(2,B-48),W=x(D),M=W.j(R);ne(M)||M.l(j)>0;)D-=B,W=x(D),M=W.j(R);Z(W)&&(W=A),V=V.add(W),j=be(j,M)}return new he(V,j)}r.B=function(j){return Me(this,j).h},r.and=function(j){const R=Math.max(this.g.length,j.g.length),D=[];for(let B=0;B<R;B++)D[B]=this.i(B)&j.i(B);return new m(D,this.h&j.h)},r.or=function(j){const R=Math.max(this.g.length,j.g.length),D=[];for(let B=0;B<R;B++)D[B]=this.i(B)|j.i(B);return new m(D,this.h|j.h)},r.xor=function(j){const R=Math.max(this.g.length,j.g.length),D=[];for(let B=0;B<R;B++)D[B]=this.i(B)^j.i(B);return new m(D,this.h^j.h)};function He(j){const R=j.g.length+1,D=[];for(let B=0;B<R;B++)D[B]=j.i(B)<<1|j.i(B-1)>>>31;return new m(D,j.h)}function Ne(j,R){const D=R>>5;R%=32;const B=j.g.length-D,V=[];for(let W=0;W<B;W++)V[W]=R>0?j.i(W+D)>>>R|j.i(W+D+1)<<32-R:j.i(W+D);return new m(V,j.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,rv=s,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.B,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=x,m.fromString=P,Bo=m}).apply(typeof m_<"u"?m_:typeof self<"u"?self:typeof window<"u"?window:{});var Jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iv,Eu,sv,sh,jf,ov,av,lv;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jc=="object"&&Jc];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var s=t(this);function a(h,y){if(y)e:{var T=s;h=h.split(".");for(var C=0;C<h.length-1;C++){var q=h[C];if(!(q in T))break e;T=T[q]}h=h[h.length-1],C=T[h],y=y(C),y!=C&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var T=[],C;for(C in y)Object.prototype.hasOwnProperty.call(y,C)&&T.push([C,y[C]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},m=this||self;function v(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function E(h,y,T){return h.call.apply(h.bind,arguments)}function x(h,y,T){return x=E,x.apply(null,arguments)}function P(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var C=T.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function I(h,y){function T(){}T.prototype=y.prototype,h.Z=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(C,q,Q){for(var me=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)me[Be-2]=arguments[Be];return y.prototype[q].apply(C,me)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function H(h){const y=h.length;if(y>0){const T=Array(y);for(let C=0;C<y;C++)T[C]=h[C];return T}return[]}function Z(h,y){for(let C=1;C<arguments.length;C++){const q=arguments[C];var T=typeof q;if(T=T!="object"?T:q?Array.isArray(q)?"array":T:"null",T=="array"||T=="object"&&typeof q.length=="number"){T=h.length||0;const Q=q.length||0;h.length=T+Q;for(let me=0;me<Q;me++)h[T+me]=q[me]}else h.push(q)}}class ne{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function ee(h){m.setTimeout(()=>{throw h},0)}function be(){var h=j;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class pe{constructor(){this.h=this.g=null}add(y,T){const C=he.get();C.set(y,T),this.h?this.h.next=C:this.g=C,this.h=C}}var he=new ne(()=>new Me,h=>h.reset());class Me{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let He,Ne=!1,j=new pe,R=()=>{const h=Promise.resolve(void 0);He=()=>{h.then(D)}};function D(){for(var h;h=be();){try{h.h.call(h.g)}catch(T){ee(T)}var y=he;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}Ne=!1}function B(){this.u=this.u,this.C=this.C}B.prototype.u=!1,B.prototype.dispose=function(){this.u||(this.u=!0,this.N())},B.prototype[Symbol.dispose]=function(){this.dispose()},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var W=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};m.addEventListener("test",T,y),m.removeEventListener("test",T,y)}catch{}return h})();function M(h){return/^[\s\xa0]*$/.test(h)}function Xe(h,y){V.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}I(Xe,V),Xe.prototype.init=function(h,y){const T=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Xe.Z.h.call(this)},Xe.prototype.h=function(){Xe.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var nt="closure_listenable_"+(Math.random()*1e6|0),fe=0;function Oe(h,y,T,C,q){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!C,this.ha=q,this.key=++fe,this.da=this.fa=!1}function te(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ee(h,y,T){for(const C in h)y.call(T,h[C],C,h)}function re(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function z(h){const y={};for(const T in h)y[T]=h[T];return y}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ge(h,y){let T,C;for(let q=1;q<arguments.length;q++){C=arguments[q];for(T in C)h[T]=C[T];for(let Q=0;Q<J.length;Q++)T=J[Q],Object.prototype.hasOwnProperty.call(C,T)&&(h[T]=C[T])}}function ye(h){this.src=h,this.g={},this.h=0}ye.prototype.add=function(h,y,T,C,q){const Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);const me=ce(h,y,C,q);return me>-1?(y=h[me],T||(y.fa=!1)):(y=new Oe(y,this.src,Q,!!C,q),y.fa=T,h.push(y)),y};function Te(h,y){const T=y.type;if(T in h.g){var C=h.g[T],q=Array.prototype.indexOf.call(C,y,void 0),Q;(Q=q>=0)&&Array.prototype.splice.call(C,q,1),Q&&(te(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function ce(h,y,T,C){for(let q=0;q<h.length;++q){const Q=h[q];if(!Q.da&&Q.listener==y&&Q.capture==!!T&&Q.ha==C)return q}return-1}var Ge="closure_lm_"+(Math.random()*1e6|0),Ue={};function it(h,y,T,C,q){if(Array.isArray(y)){for(let Q=0;Q<y.length;Q++)it(h,y[Q],T,C,q);return null}return T=Ar(T),h&&h[nt]?h.J(y,T,v(C)?!!C.capture:!1,q):Rt(h,y,T,!1,C,q)}function Rt(h,y,T,C,q,Q){if(!y)throw Error("Invalid event type");const me=v(q)?!!q.capture:!!q;let Be=Hr(h);if(Be||(h[Ge]=Be=new ye(h)),T=Be.add(y,T,C,me,Q),T.proxy)return T;if(C=Ur(),T.proxy=C,C.src=h,C.listener=T,h.addEventListener)W||(q=me),q===void 0&&(q=!1),h.addEventListener(y.toString(),C,q);else if(h.attachEvent)h.attachEvent(Wr(y.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Ur(){function h(T){return y.call(h.src,h.listener,T)}const y=cs;return h}function or(h,y,T,C,q){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)or(h,y[Q],T,C,q);else C=v(C)?!!C.capture:!!C,T=Ar(T),h&&h[nt]?(h=h.i,Q=String(y).toString(),Q in h.g&&(y=h.g[Q],T=ce(y,T,C,q),T>-1&&(te(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete h.g[Q],h.h--)))):h&&(h=Hr(h))&&(y=h.g[y.toString()],h=-1,y&&(h=ce(y,T,C,q)),(T=h>-1?y[h]:null)&&ar(T))}function ar(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[nt])Te(y.i,h);else{var T=h.type,C=h.proxy;y.removeEventListener?y.removeEventListener(T,C,h.capture):y.detachEvent?y.detachEvent(Wr(T),C):y.addListener&&y.removeListener&&y.removeListener(C),(T=Hr(y))?(Te(T,h),T.h==0&&(T.src=null,y[Ge]=null)):te(h)}}}function Wr(h){return h in Ue?Ue[h]:Ue[h]="on"+h}function cs(h,y){if(h.da)h=!0;else{y=new Xe(y,this);const T=h.listener,C=h.ha||h.src;h.fa&&ar(h),h=T.call(C,y)}return h}function Hr(h){return h=h[Ge],h instanceof ye?h:null}var _n="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ar(h){return typeof h=="function"?h:(h[_n]||(h[_n]=function(y){return h.handleEvent(y)}),h[_n])}function ft(){B.call(this),this.i=new ye(this),this.M=this,this.G=null}I(ft,B),ft.prototype[nt]=!0,ft.prototype.removeEventListener=function(h,y,T,C){or(this,h,y,T,C)};function St(h,y){var T,C=h.G;if(C)for(T=[];C;C=C.G)T.push(C);if(h=h.M,C=y.type||y,typeof y=="string")y=new V(y,h);else if(y instanceof V)y.target=y.target||h;else{var q=y;y=new V(C,h),ge(y,q)}q=!0;let Q,me;if(T)for(me=T.length-1;me>=0;me--)Q=y.g=T[me],q=yn(Q,C,!0,y)&&q;if(Q=y.g=h,q=yn(Q,C,!0,y)&&q,q=yn(Q,C,!1,y)&&q,T)for(me=0;me<T.length;me++)Q=y.g=T[me],q=yn(Q,C,!1,y)&&q}ft.prototype.N=function(){if(ft.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const T=h.g[y];for(let C=0;C<T.length;C++)te(T[C]);delete h.g[y],h.h--}}this.G=null},ft.prototype.J=function(h,y,T,C){return this.i.add(String(h),y,!1,T,C)},ft.prototype.K=function(h,y,T,C){return this.i.add(String(h),y,!0,T,C)};function yn(h,y,T,C){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let q=!0;for(let Q=0;Q<y.length;++Q){const me=y[Q];if(me&&!me.da&&me.capture==T){const Be=me.listener,ct=me.ha||me.src;me.fa&&Te(h.i,me),q=Be.call(ct,C)!==!1&&q}}return q&&!C.defaultPrevented}function Wt(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:m.setTimeout(h,y||0)}function $n(h){h.g=Wt(()=>{h.g=null,h.i&&(h.i=!1,$n(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Zs extends B{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:$n(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qr(h){B.call(this),this.h=h,this.g={}}I(qr,B);var lr=[];function gi(h){Ee(h.g,function(y,T){this.g.hasOwnProperty(T)&&ar(y)},h),h.g={}}qr.prototype.N=function(){qr.Z.N.call(this),gi(this)},qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ur=m.JSON.stringify,Mi=m.JSON.parse,vn=class{stringify(h){return m.JSON.stringify(h,void 0)}parse(h){return m.JSON.parse(h,void 0)}};function cr(){}function kr(){}var Rr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $r(){V.call(this,"d")}I($r,V);function _i(){V.call(this,"c")}I(_i,V);var Rn={},hr=null;function dr(){return hr=hr||new ft}Rn.Ia="serverreachability";function wn(h){V.call(this,Rn.Ia,h)}I(wn,V);function fr(h){const y=dr();St(y,new wn(y))}Rn.STAT_EVENT="statevent";function mr(h,y){V.call(this,Rn.STAT_EVENT,h),this.stat=y}I(mr,V);function Tt(h){const y=dr();St(y,new mr(y,h))}Rn.Ja="timingevent";function Di(h,y){V.call(this,Rn.Ja,h),this.size=y}I(Di,V);function je(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){h()},y)}function wt(){this.g=!0}wt.prototype.ua=function(){this.g=!1};function Ot(h,y,T,C,q,Q){h.info(function(){if(h.g)if(Q){var me="",Be=Q.split("&");for(let mt=0;mt<Be.length;mt++){var ct=Be[mt].split("=");if(ct.length>1){const zt=ct[0];ct=ct[1];const er=zt.split("_");me=er.length>=2&&er[1]=="type"?me+(zt+"="+ct+"&"):me+(zt+"=redacted&")}}}else me=null;else me=Q;return"XMLHTTP REQ ("+C+") [attempt "+q+"]: "+y+`
`+T+`
`+me})}function Yt(h,y,T,C,q,Q,me){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+q+"]: "+y+`
`+T+`
`+Q+" "+me})}function En(h,y,T,C){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ht(h,T)+(C?" "+C:"")})}function Pt(h,y){h.info(function(){return"TIMEOUT: "+y})}wt.prototype.info=function(){};function Ht(h,y){if(!h.g)return y;if(!y)return null;try{const Q=JSON.parse(y);if(Q){for(h=0;h<Q.length;h++)if(Array.isArray(Q[h])){var T=Q[h];if(!(T.length<2)){var C=T[1];if(Array.isArray(C)&&!(C.length<1)){var q=C[0];if(q!="noop"&&q!="stop"&&q!="close")for(let me=1;me<C.length;me++)C[me]=""}}}}return ur(Q)}catch{return y}}var Gn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},qt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},cn;function Vt(){}I(Vt,cr),Vt.prototype.g=function(){return new XMLHttpRequest},cn=new Vt;function ve(h){return encodeURIComponent(String(h))}function Oi(h){var y=1;h=h.split(":");const T=[];for(;y>0&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function Zn(h,y,T,C){this.j=h,this.i=y,this.l=T,this.S=C||1,this.V=new qr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Xo}function Xo(){this.i=null,this.g="",this.h=!1}var Jo={},hs={};function pr(h,y,T){h.M=1,h.A=gt(Tn(y)),h.u=T,h.R=!0,Gr(h,null)}function Gr(h,y){h.F=Date.now(),ds(h),h.B=Tn(h.A);var T=h.B,C=h.S;Array.isArray(C)||(C=[String(C)]),vs(T.i,"t",C),h.C=0,T=h.j.L,h.h=new Xo,h.g=aa(h.j,T?y:null,!h.u),h.P>0&&(h.O=new Zs(x(h.Y,h,h.g),h.P)),y=h.V,T=h.g,C=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(lr[0]=q.toString()),q=lr);for(let Q=0;Q<q.length;Q++){const me=it(T,q[Q],C||y.handleEvent,!1,y.h||y);if(!me)break;y.g[me.key]=me}y=h.J?z(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),fr(),Ot(h.i,h.v,h.B,h.l,h.S,h.u)}Zn.prototype.ba=function(h){h=h.target;const y=this.O;y&&ei(h)==3?y.j():this.Y(h)},Zn.prototype.Y=function(h){try{if(h==this.g)e:{const Be=ei(this.g),ct=this.g.ya(),mt=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||ia(this.g)))){this.K||Be!=4||ct==7||(ct==8||mt<=0?fr(3):fr(2)),fs(this);var y=this.g.ca();this.X=y;var T=ea(this);if(this.o=y==200,Yt(this.i,this.v,this.B,this.l,this.S,Be,y),this.o){if(this.U&&!this.L){t:{if(this.g){var C,q=this.g;if((C=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(C)){var Q=C;break t}}Q=null}if(h=Q)En(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,It(this,h);else{this.o=!1,this.m=3,Tt(12),gr(this),ms(this);break e}}if(this.R){h=!0;let zt;for(;!this.K&&this.C<T.length;)if(zt=Wa(this,T),zt==hs){Be==4&&(this.m=4,Tt(14),h=!1),En(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==Jo){this.m=4,Tt(15),En(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else En(this.i,this.l,zt,null),It(this,zt);if(Ua(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||T.length!=0||this.h.h||(this.m=1,Tt(16),h=!1),this.o=this.o&&h,!h)En(this.i,this.l,T,"[Invalid Chunked Response]"),gr(this),ms(this);else if(T.length>0&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.aa&&!me.P&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Ss(me),me.P=!0,Tt(11))}}else En(this.i,this.l,T,null),It(this,T);Be==4&&gr(this),this.o&&!this.K&&(Be==4?In(this.j,this):(this.o=!1,ds(this)))}else Ts(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),gr(this),ms(this)}}}catch{}finally{}};function ea(h){if(!Ua(h))return h.g.la();const y=ia(h.g);if(y==="")return"";let T="";const C=y.length,q=ei(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return gr(h),ms(h),"";h.h.i=new m.TextDecoder}for(let Q=0;Q<C;Q++)h.h.h=!0,T+=h.h.i.decode(y[Q],{stream:!(q&&Q==C-1)});return y.length=0,h.h.g+=T,h.C=0,h.h.g}function Ua(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Wa(h,y){var T=h.C,C=y.indexOf(`
`,T);return C==-1?hs:(T=Number(y.substring(T,C)),isNaN(T)?Jo:(C+=1,C+T>y.length?hs:(y=y.slice(C,C+T),h.C=C+T,y)))}Zn.prototype.cancel=function(){this.K=!0,gr(this)};function ds(h){h.T=Date.now()+h.H,ta(h,h.H)}function ta(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=je(x(h.aa,h),y)}function fs(h){h.D&&(m.clearTimeout(h.D),h.D=null)}Zn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Pt(this.i,this.B),this.M!=2&&(fr(),Tt(17)),gr(this),this.m=2,ms(this)):ta(this,this.T-h)};function ms(h){h.j.I==0||h.K||In(h.j,h)}function gr(h){fs(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,gi(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function It(h,y){try{var T=h.j;if(T.I!=0&&(T.g==h||gs(T.h,h))){if(!h.L&&gs(T.h,h)&&T.I==3){try{var C=T.Ba.g.parse(y)}catch{C=null}if(Array.isArray(C)&&C.length==3){var q=C;if(q[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)Xs(T),Xn(T);else break e;ni(T),Tt(18)}}else T.xa=q[1],0<T.xa-T.K&&q[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=je(x(T.Va,T),6e3));ps(T.h)<=1&&T.ta&&(T.ta=void 0)}else Dn(T,11)}else if((h.L||T.g==h)&&Xs(T),!M(y))for(q=T.Ba.g.parse(y),y=0;y<q.length;y++){let mt=q[y];const zt=mt[0];if(!(zt<=T.K))if(T.K=zt,mt=mt[1],T.I==2)if(mt[0]=="c"){T.M=mt[1],T.ba=mt[2];const er=mt[3];er!=null&&(T.ka=er,T.j.info("VER="+T.ka));const Mr=mt[4];Mr!=null&&(T.za=Mr,T.j.info("SVER="+T.za));const wr=mt[5];wr!=null&&typeof wr=="number"&&wr>0&&(C=1.5*wr,T.O=C,T.j.info("backChannelRequestTimeoutMs_="+C)),C=T;const ii=h.g;if(ii){const ro=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ro){var Q=C.h;Q.g||ro.indexOf("spdy")==-1&&ro.indexOf("quic")==-1&&ro.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Zr(Q,Q.h),Q.h=null))}if(C.G){const io=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;io&&(C.wa=io,xe(C.J,C.G,io))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),C=T;var me=h;if(C.na=eo(C,C.L?C.ba:null,C.W),me.L){Vi(C.h,me);var Be=me,ct=C.O;ct&&(Be.H=ct),Be.D&&(fs(Be),ds(Be)),C.g=me}else sn(C);T.i.length>0&&Jn(T)}else mt[0]!="stop"&&mt[0]!="close"||Dn(T,7);else T.I==3&&(mt[0]=="stop"||mt[0]=="close"?mt[0]=="stop"?Dn(T,7):tt(T):mt[0]!="noop"&&T.l&&T.l.qa(mt),T.A=0)}}fr(4)}catch{}}var ql=class{constructor(h,y){this.g=h,this.map=y}};function Ks(h){this.l=h||10,m.PerformanceNavigationTiming?(h=m.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function na(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ps(h){return h.h?1:h.g?h.g.size:0}function gs(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Zr(h,y){h.g?h.g.add(y):h.h=y}function Vi(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Ks.prototype.cancel=function(){if(this.i=Nn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Nn(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.G);return y}return H(h.i)}var zi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(h,y){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const C=h[T].indexOf("=");let q,Q=null;C>=0?(q=h[T].substring(0,C),Q=h[T].substring(C+1)):q=h[T],y(q,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function ut(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof ut?(this.l=h.l,_r(this,h.j),this.o=h.o,this.g=h.g,xn(this,h.u),this.h=h.h,Kr(this,ji(h.i)),this.m=h.m):h&&(y=String(h).match(zi))?(this.l=!1,_r(this,y[1]||"",!0),this.o=yi(y[2]||""),this.g=yi(y[3]||"",!0),xn(this,y[4]),this.h=yi(y[5]||"",!0),Kr(this,y[6]||"",!0),this.m=yi(y[7]||"")):(this.l=!1,this.i=new et(null,this.l))}ut.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Qr(y,ra,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Qr(y,ra,!0),"@"),h.push(ve(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Qr(T,T.charAt(0)=="/"?Kn:Fi,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Qr(T,Nr)),h.join("")},ut.prototype.resolve=function(h){const y=Tn(this);let T=!!h.j;T?_r(y,h.j):T=!!h.o,T?y.o=h.o:T=!!h.g,T?y.g=h.g:T=h.u!=null;var C=h.h;if(T)xn(y,h.u);else if(T=!!h.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var q=y.h.lastIndexOf("/");q!=-1&&(C=y.h.slice(0,q+1)+C)}if(q=C,q==".."||q==".")C="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){C=q.lastIndexOf("/",0)==0,q=q.split("/");const Q=[];for(let me=0;me<q.length;){const Be=q[me++];Be=="."?C&&me==q.length&&Q.push(""):Be==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),C&&me==q.length&&Q.push("")):(Q.push(Be),C=!0)}C=Q.join("/")}else C=q}return T?y.h=C:T=h.i.toString()!=="",T?Kr(y,ji(h.i)):T=!!h.m,T&&(y.m=h.m),y};function Tn(h){return new ut(h)}function _r(h,y,T){h.j=T?yi(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function xn(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Kr(h,y,T){y instanceof et?(h.i=y,Bi(h.i,h.l)):(T||(y=Qr(y,Lt)),h.i=new et(y,h.l))}function xe(h,y,T){h.i.set(y,T)}function gt(h){return xe(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function yi(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Qr(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,hn),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function hn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ra=/[#\/\?@]/g,Fi=/[#\?:]/g,Kn=/[#\?]/g,Lt=/[#\?@]/g,Nr=/#/g;function et(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Ln(h){h.g||(h.g=new Map,h.h=0,h.i&&Ze(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}r=et.prototype,r.add=function(h,y){Ln(this),this.i=null,h=yr(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function _s(h,y){Ln(h),y=yr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Yr(h,y){return Ln(h),y=yr(h,y),h.g.has(y)}r.forEach=function(h,y){Ln(this),this.g.forEach(function(T,C){T.forEach(function(q){h.call(y,q,C,this)},this)},this)};function ys(h,y){Ln(h);let T=[];if(typeof y=="string")Yr(h,y)&&(T=T.concat(h.g.get(yr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)T=T.concat(h[y]);return T}r.set=function(h,y){return Ln(this),this.i=null,h=yr(this,h),Yr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=ys(this,h),h.length>0?String(h[0]):y):y};function vs(h,y,T){_s(h,y),T.length>0&&(h.i=null,h.g.set(yr(h,y),H(T)),h.h+=T.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let C=0;C<y.length;C++){var T=y[C];const q=ve(T);T=ys(this,T);for(let Q=0;Q<T.length;Q++){let me=q;T[Q]!==""&&(me+="="+ve(T[Q])),h.push(me)}}return this.i=h.join("&")};function ji(h){const y=new et;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function yr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Bi(h,y){y&&!h.j&&(Ln(h),h.i=null,h.g.forEach(function(T,C){const q=C.toLowerCase();C!=q&&(_s(this,C),vs(this,q,T))},h)),h.j=y}function Qn(h,y){const T=new wt;if(m.Image){const C=new Image;C.onload=P(Gt,T,"TestLoadImage: loaded",!0,y,C),C.onerror=P(Gt,T,"TestLoadImage: error",!1,y,C),C.onabort=P(Gt,T,"TestLoadImage: abort",!1,y,C),C.ontimeout=P(Gt,T,"TestLoadImage: timeout",!1,y,C),m.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else y(!1)}function Lr(h,y){const T=new wt,C=new AbortController,q=setTimeout(()=>{C.abort(),Gt(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:C.signal}).then(Q=>{clearTimeout(q),Q.ok?Gt(T,"TestPingServer: ok",!0,y):Gt(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),Gt(T,"TestPingServer: error",!1,y)})}function Gt(h,y,T,C,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),C(T)}catch{}}function ws(){this.g=new vn}function Ve(h){this.i=h.Sb||null,this.h=h.ab||!1}I(Ve,cr),Ve.prototype.g=function(){return new Mt(this.i,this.h)};function Mt(h,y){ft.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}I(Mt,ft),r=Mt.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Yn(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||m).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vi(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Yn(this)),this.g&&(this.readyState=3,Yn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_t(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function _t(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?vi(this):Yn(this),this.readyState==3&&_t(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,vi(this))},r.Na=function(h){this.g&&(this.response=h,vi(this))},r.ga=function(){this.g&&vi(this)};function vi(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Yn(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function Yn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Mt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Qs(h){let y="";return Ee(h,function(T,C){y+=C,y+=":",y+=T,y+=`\r
`}),y}function Ui(h,y,T){e:{for(C in T){var C=!1;break e}C=!0}C||(T=Qs(T),typeof h=="string"?T!=null&&ve(T):xe(h,y,T))}function lt(h){ft.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}I(lt,ft);var Ys=/^https?$/i,Es=["POST","PUT"];r=lt.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,T,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():cn.g(),this.g.onreadystatechange=A(x(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Q){bt(this,Q);return}if(h=T||"",T=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var q in C)T.set(q,C[q]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const Q of C.keys())T.set(Q,C.get(Q));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(T.keys()).find(Q=>Q.toLowerCase()=="content-type"),q=m.FormData&&h instanceof m.FormData,!(Array.prototype.indexOf.call(Es,y,void 0)>=0)||C||q||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,me]of T)this.g.setRequestHeader(Q,me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Q){bt(this,Q)}};function bt(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Mn(h),Jr(h)}function Mn(h){h.A||(h.A=!0,St(h,"complete"),St(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,St(this,"complete"),St(this,"abort"),Jr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jr(this,!0)),lt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Xr(this):this.Xa())},r.Xa=function(){Xr(this)};function Xr(h){if(h.h&&typeof c<"u"){if(h.v&&ei(h)==4)setTimeout(h.Ca.bind(h),0);else if(St(h,"readystatechange"),ei(h)==4){h.h=!1;try{const Q=h.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var C;if(C=Q===0){let me=String(h.D).match(zi)[1]||null;!me&&m.self&&m.self.location&&(me=m.self.location.protocol.slice(0,-1)),C=!Ys.test(me?me.toLowerCase():"")}T=C}if(T)St(h,"complete"),St(h,"success");else{h.o=6;try{var q=ei(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",Mn(h)}}finally{Jr(h)}}}}function Jr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,y||St(h,"ready");try{T.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ei(h){return h.g?h.g.readyState:0}r.ca=function(){try{return ei(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Mi(y)}};function ia(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ts(h){const y={};h=(h.g&&ei(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(M(h[C]))continue;var T=Oi(h[C]);const q=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Q=y[q]||[];y[q]=Q,Q.push(T)}re(y,function(C){return C.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ti(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function xs(h){this.za=0,this.i=[],this.j=new wt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ti("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ti("baseRetryDelayMs",5e3,h),this.Za=ti("retryDelaySeedMs",1e4,h),this.Ta=ti("forwardChannelMaxRetries",2,h),this.va=ti("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Ks(h&&h.concurrentRequestLimit),this.Ba=new ws,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=xs.prototype,r.ka=8,r.I=1,r.connect=function(h,y,T,C){Tt(0),this.W=h,this.H=y||{},T&&C!==void 0&&(this.H.OSID=T,this.H.OAID=C),this.F=this.X,this.J=eo(this,null,this.W),Jn(this)};function tt(h){if(dn(h),h.I==3){var y=h.V++,T=Tn(h.J);if(xe(T,"SID",h.M),xe(T,"RID",y),xe(T,"TYPE","terminate"),vr(h,T),y=new Zn(h,h.j,y),y.M=2,y.A=gt(Tn(T)),T=!1,m.navigator&&m.navigator.sendBeacon)try{T=m.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&m.Image&&(new Image().src=y.A,T=!0),T||(y.g=aa(y.j,null),y.g.ea(y.A)),y.F=Date.now(),ds(y)}On(h)}function Xn(h){h.g&&(Ss(h),h.g.cancel(),h.g=null)}function dn(h){Xn(h),h.v&&(m.clearTimeout(h.v),h.v=null),Xs(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&m.clearTimeout(h.m),h.m=null)}function Jn(h){if(!na(h.h)&&!h.m){h.m=!0;var y=h.Ea;He||R(),Ne||(He(),Ne=!0),j.add(y,h),h.D=0}}function sa(h,y){return ps(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=je(x(h.Ea,h,y),Js(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new Zn(this,this.j,h);let Q=this.o;if(this.U&&(Q?(Q=z(Q),ge(Q,this.U)):Q=this.U),this.u!==null||this.R||(q.J=Q,Q=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var C=this.i[T];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(y+=C,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=oa(this,q,y),T=Tn(this.J),xe(T,"RID",h),xe(T,"CVER",22),this.G&&xe(T,"X-HTTP-Session-Id",this.G),vr(this,T),Q&&(this.R?y="headers="+ve(Qs(Q))+"&"+y:this.u&&Ui(T,this.u,Q)),Zr(this.h,q),this.Ra&&xe(T,"TYPE","init"),this.S?(xe(T,"$req",y),xe(T,"SID","null"),q.U=!0,pr(q,T,null)):pr(q,T,y),this.I=2}}else this.I==3&&(h?Is(this,h):this.i.length==0||na(this.h)||Is(this))};function Is(h,y){var T;y?T=y.l:T=h.V++;const C=Tn(h.J);xe(C,"SID",h.M),xe(C,"RID",T),xe(C,"AID",h.K),vr(h,C),h.u&&h.o&&Ui(C,h.u,h.o),T=new Zn(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),y&&(h.i=y.G.concat(h.i)),y=oa(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Zr(h.h,T),pr(T,C,y)}function vr(h,y){h.H&&Ee(h.H,function(T,C){xe(y,C,T)}),h.l&&Ee({},function(T,C){xe(y,C,T)})}function oa(h,y,T){T=Math.min(h.i.length,T);const C=h.l?x(h.l.Ka,h.l,h):null;e:{var q=h.i;let Be=-1;for(;;){const ct=["count="+T];Be==-1?T>0?(Be=q[0].g,ct.push("ofs="+Be)):Be=0:ct.push("ofs="+Be);let mt=!0;for(let zt=0;zt<T;zt++){var Q=q[zt].g;const er=q[zt].map;if(Q-=Be,Q<0)Be=Math.max(0,q[zt].g-100),mt=!1;else try{Q="req"+Q+"_"||"";try{var me=er instanceof Map?er:Object.entries(er);for(const[Mr,wr]of me){let ii=wr;v(wr)&&(ii=ur(wr)),ct.push(Q+Mr+"="+encodeURIComponent(ii))}}catch(Mr){throw ct.push(Q+"type="+encodeURIComponent("_badmap")),Mr}}catch{C&&C(er)}}if(mt){me=ct.join("&");break e}}me=void 0}return h=h.i.splice(0,T),y.G=h,me}function sn(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;He||R(),Ne||(He(),Ne=!0),j.add(y,h),h.A=0}}function ni(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=je(x(h.Da,h),Js(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,ri(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=je(x(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),Xn(this),ri(this))};function Ss(h){h.B!=null&&(m.clearTimeout(h.B),h.B=null)}function ri(h){h.g=new Zn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Tn(h.na);xe(y,"RID","rpc"),xe(y,"SID",h.M),xe(y,"AID",h.K),xe(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&xe(y,"TO",h.ia),xe(y,"TYPE","xmlhttp"),vr(h,y),h.u&&h.o&&Ui(y,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=gt(Tn(y)),T.u=null,T.R=!0,Gr(T,h)}r.Va=function(){this.C!=null&&(this.C=null,Xn(this),ni(this),Tt(19))};function Xs(h){h.C!=null&&(m.clearTimeout(h.C),h.C=null)}function In(h,y){var T=null;if(h.g==y){Xs(h),Ss(h),h.g=null;var C=2}else if(gs(h.h,y))T=y.G,Vi(h.h,y),C=1;else return;if(h.I!=0){if(y.o)if(C==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var q=h.D;C=dr(),St(C,new Di(C,T)),Jn(h)}else sn(h);else if(q=y.m,q==3||q==0&&y.X>0||!(C==1&&sa(h,y)||C==2&&ni(h)))switch(T&&T.length>0&&(y=h.h,y.i=y.i.concat(T)),q){case 1:Dn(h,5);break;case 4:Dn(h,10);break;case 3:Dn(h,6);break;default:Dn(h,2)}}}function Js(h,y){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*y}function Dn(h,y){if(h.j.info("Error code "+y),y==2){var T=x(h.bb,h),C=h.Ua;const q=!C;C=new ut(C||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||_r(C,"https"),gt(C),q?Qn(C.toString(),T):Lr(C.toString(),T)}else Tt(2);h.I=0,h.l&&h.l.pa(y),On(h),dn(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function On(h){if(h.I=0,h.ja=[],h.l){const y=Nn(h.h);(y.length!=0||h.i.length!=0)&&(Z(h.ja,y),Z(h.ja,h.i),h.h.i.length=0,H(h.i),h.i.length=0),h.l.oa()}}function eo(h,y,T){var C=T instanceof ut?Tn(T):new ut(T);if(C.g!="")y&&(C.g=y+"."+C.g),xn(C,C.u);else{var q=m.location;C=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;const Q=new ut(null);C&&_r(Q,C),y&&(Q.g=y),q&&xn(Q,q),T&&(Q.h=T),C=Q}return T=h.G,y=h.wa,T&&y&&xe(C,T,y),xe(C,"VER",h.ka),vr(h,C),C}function aa(h,y,T){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new lt(new Ve({ab:T})):new lt(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function to(){}r=to.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function no(){}no.prototype.g=function(h,y){return new Xt(h,y)};function Xt(h,y){ft.call(this),this.g=new xs(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!M(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!M(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Wi(this)}I(Xt,ft),Xt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){tt(this.g)},Xt.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=ur(h),h=T);y.i.push(new ql(y.Ya++,h)),y.I==3&&Jn(y)},Xt.prototype.N=function(){this.g.l=null,delete this.j,tt(this.g),delete this.g,Xt.Z.N.call(this)};function la(h){$r.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}I(la,$r);function Ha(){_i.call(this),this.status=1}I(Ha,_i);function Wi(h){this.g=h}I(Wi,to),Wi.prototype.ra=function(){St(this.g,"a")},Wi.prototype.qa=function(h){St(this.g,new la(h))},Wi.prototype.pa=function(h){St(this.g,new Ha)},Wi.prototype.oa=function(){St(this.g,"b")},no.prototype.createWebChannel=no.prototype.g,Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,lv=function(){return new no},av=function(){return dr()},ov=Rn,jf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Gn.NO_ERROR=0,Gn.TIMEOUT=8,Gn.HTTP_ERROR=6,sh=Gn,qt.COMPLETE="complete",sv=qt,kr.EventType=Rr,Rr.OPEN="a",Rr.CLOSE="b",Rr.ERROR="c",Rr.MESSAGE="d",ft.prototype.listen=ft.prototype.J,Eu=kr,lt.prototype.listenOnce=lt.prototype.K,lt.prototype.getLastError=lt.prototype.Ha,lt.prototype.getLastErrorCode=lt.prototype.ya,lt.prototype.getStatus=lt.prototype.ca,lt.prototype.getResponseJson=lt.prototype.La,lt.prototype.getResponseText=lt.prototype.la,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Fa,iv=lt}).apply(typeof Jc<"u"?Jc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wn.UNAUTHENTICATED=new Wn(null),Wn.GOOGLE_CREDENTIALS=new Wn("google-credentials-uid"),Wn.FIRST_PARTY=new Wn("first-party-uid"),Wn.MOCK_USER=new Wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl="12.8.0";function GI(r){Fl=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=new um("@firebase/firestore");function _l(){return Da.logLevel}function Pe(r,...e){if(Da.logLevel<=st.DEBUG){const t=e.map(dm);Da.debug(`Firestore (${Fl}): ${r}`,...t)}}function Hs(r,...e){if(Da.logLevel<=st.ERROR){const t=e.map(dm);Da.error(`Firestore (${Fl}): ${r}`,...t)}}function Al(r,...e){if(Da.logLevel<=st.WARN){const t=e.map(dm);Da.warn(`Firestore (${Fl}): ${r}`,...t)}}function dm(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,uv(r,s,t)}function uv(r,e,t){let s=`FIRESTORE (${Fl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Hs(s),new Error(s)}function yt(r,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,r||uv(e,a,s)}function Ke(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends Gs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Wn.UNAUTHENTICATED)))}shutdown(){}}class KI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class QI{constructor(e){this.t=e,this.currentUser=Wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){yt(this.o===void 0,42304);let s=this.i;const a=E=>this.i!==s?(s=this.i,t(E)):Promise.resolve();let c=new Uo;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Uo,e.enqueueRetryable((()=>a(this.currentUser)))};const m=()=>{const E=c;e.enqueueRetryable((async()=>{await E.promise,await a(this.currentUser)}))},v=E=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.o&&(this.auth.addAuthTokenListener(this.o),m())};this.t.onInit((E=>v(E))),setTimeout((()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?v(E):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Uo)}}),0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(yt(typeof s.accessToken=="string",31837,{l:s}),new cv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return yt(e===null||typeof e=="string",2055,{h:e}),new Wn(e)}}class YI{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Wn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class XI{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new YI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Wn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class p_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ci(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){yt(this.o===void 0,3512);const s=c=>{c.error!=null&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const m=c.token!==this.m;return this.m=c.token,Pe("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const a=c=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new p_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(yt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new p_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=eS(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<t&&(s+=e.charAt(a[c]%62))}return s}}function ot(r,e){return r<e?-1:r>e?1:0}function Bf(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const a=r.charAt(s),c=e.charAt(s);if(a!==c)return Sf(a)===Sf(c)?ot(a,c):Sf(a)?1:-1}return ot(r.length,e.length)}const tS=55296,nS=57343;function Sf(r){const e=r.charCodeAt(0);return e>=tS&&e<=nS}function kl(r,e,t){return r.length===e.length&&r.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="__name__";class es{constructor(e,t,s){t===void 0?t=0:t>e.length&&We(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&We(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return es.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof es?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const c=es.compareSegments(e.get(a),t.get(a));if(c!==0)return c}return ot(e.length,t.length)}static compareSegments(e,t){const s=es.isNumericId(e),a=es.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?es.extractNumericId(e).compare(es.extractNumericId(t)):Bf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Bo.fromString(e.substring(4,e.length-2))}}class At extends es{construct(e,t,s){return new At(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Se(ie.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new At(t)}static emptyPath(){return new At([])}}const rS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Cn extends es{construct(e,t,s){return new Cn(e,t,s)}static isValidIdentifier(e){return rS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===g_}static keyField(){return new Cn([g_])}static fromServerFormat(e){const t=[];let s="",a=0;const c=()=>{if(s.length===0)throw new Se(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let m=!1;for(;a<e.length;){const v=e[a];if(v==="\\"){if(a+1===e.length)throw new Se(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[a+1];if(E!=="\\"&&E!=="."&&E!=="`")throw new Se(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=E,a+=2}else v==="`"?(m=!m,a++):v!=="."||m?(s+=v,a++):(c(),a++)}if(c(),m)throw new Se(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Cn(t)}static emptyPath(){return new Cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.path=e}static fromPath(e){return new Le(At.fromString(e))}static fromName(e){return new Le(At.fromString(e).popFirst(5))}static empty(){return new Le(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&At.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return At.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new At(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(r,e,t){if(!t)throw new Se(ie.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function iS(r,e,t,s){if(e===!0&&s===!0)throw new Se(ie.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function __(r){if(!Le.isDocumentKey(r))throw new Se(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function y_(r){if(Le.isDocumentKey(r))throw new Se(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function dv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function zh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":We(12329,{type:typeof r})}function Us(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Se(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=zh(r);throw new Se(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(r,e){const t={typeString:r};return e&&(t.value=e),t}function Hu(r,e){if(!dv(r))throw new Se(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const m=r[s];if(a&&typeof m!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(c!==void 0&&m!==c.value){t=`Expected '${s}' field to equal '${c.value}'`;break}}if(t)throw new Se(ie.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=-62135596800,w_=1e6;class kt{static now(){return kt.fromMillis(Date.now())}static fromDate(e){return kt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*w_);return new kt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<v_)throw new Se(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/w_}_compareTo(e){return this.seconds===e.seconds?ot(this.nanoseconds,e.nanoseconds):ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:kt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Hu(e,kt._jsonSchema))return new kt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-v_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}kt._jsonSchemaVersion="firestore/timestamp/1.0",kt._jsonSchema={type:rn("string",kt._jsonSchemaVersion),seconds:rn("number"),nanoseconds:rn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{static fromTimestamp(e){return new Qe(e)}static min(){return new Qe(new kt(0,0))}static max(){return new Qe(new kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu=-1;function sS(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=Qe.fromTimestamp(s===1e9?new kt(t+1,0):new kt(t,s));return new Ho(a,Le.empty(),e)}function oS(r){return new Ho(r.readTime,r.key,Lu)}class Ho{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ho(Qe.min(),Le.empty(),Lu)}static max(){return new Ho(Qe.max(),Le.empty(),Lu)}}function aS(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Le.comparator(r.documentKey,e.documentKey),t!==0?t:ot(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(r){if(r.code!==ie.FAILED_PRECONDITION||r.message!==lS)throw r;Pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&We(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,s)=>{t(e)}))}static reject(e){return new se(((t,s)=>{s(e)}))}static waitFor(e){return new se(((t,s)=>{let a=0,c=0,m=!1;e.forEach((v=>{++a,v.next((()=>{++c,m&&c===a&&t()}),(E=>s(E)))})),m=!0,c===a&&t()}))}static or(e){let t=se.resolve(!1);for(const s of e)t=t.next((a=>a?se.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,c)=>{s.push(t.call(this,a,c))})),this.waitFor(s)}static mapArray(e,t){return new se(((s,a)=>{const c=e.length,m=new Array(c);let v=0;for(let E=0;E<c;E++){const x=E;t(e[x]).next((P=>{m[x]=P,++v,v===c&&s(m)}),(P=>a(P)))}}))}static doWhile(e,t){return new se(((s,a)=>{const c=()=>{e()===!0?t().next((()=>{c()}),a):s()};c()}))}}function cS(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Bl(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Fh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm=-1;function jh(r){return r==null}function yh(r){return r===0&&1/r==-1/0}function hS(r){return typeof r=="number"&&Number.isInteger(r)&&!yh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="";function dS(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=E_(e)),e=fS(r.get(t),e);return E_(e)}function fS(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const c=r.charAt(a);switch(c){case"\0":t+="";break;case fv:t+="";break;default:t+=c}}return t}function E_(r){return r+fv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Qo(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function mS(r,e){const t=[];for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&t.push(e(r[s],s,r));return t}function mv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,t){this.comparator=e,this.root=t||bn.EMPTY}insert(e,t){return new Bt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bn.BLACK,null,null))}remove(e){return new Bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eh(this.root,e,this.comparator,!1)}getReverseIterator(){return new eh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eh(this.root,e,this.comparator,!0)}}class eh{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bn{constructor(e,t,s,a,c){this.key=e,this.value=t,this.color=s??bn.RED,this.left=a??bn.EMPTY,this.right=c??bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,c){return new bn(e??this.key,t??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,s),null):c===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return bn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw We(43730,{key:this.key,value:this.value});if(this.right.isRed())throw We(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw We(27949);return e+(this.isRed()?0:1)}}bn.EMPTY=null,bn.RED=!0,bn.BLACK=!1;bn.EMPTY=new class{constructor(){this.size=0}get key(){throw We(57766)}get value(){throw We(16141)}get color(){throw We(16727)}get left(){throw We(29726)}get right(){throw We(36894)}copy(e,t,s,a,c){return this}insert(e,t,s){return new bn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.comparator=e,this.data=new Bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new x_(this.data.getIterator())}getIteratorFrom(e){return new x_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new un(this.comparator);return t.data=e,t}}class x_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.fields=e,e.sort(Cn.comparator)}static empty(){return new Br([])}unionWith(e){let t=new un(Cn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Br(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kl(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new pv("Invalid base64 string: "+c):c}})(e);return new kn(t)}static fromUint8Array(e){const t=(function(a){let c="";for(let m=0;m<a.length;++m)c+=String.fromCharCode(a[m]);return c})(e);return new kn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kn.EMPTY_BYTE_STRING=new kn("");const pS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qo(r){if(yt(!!r,39018),typeof r=="string"){let e=0;const t=pS.exec(r);if(yt(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Kt(r.seconds),nanos:Kt(r.nanos)}}function Kt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function $o(r){return typeof r=="string"?kn.fromBase64String(r):kn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="server_timestamp",_v="__type__",yv="__previous_value__",vv="__local_write_time__";function pm(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[_v])==null?void 0:s.stringValue)===gv}function Bh(r){const e=r.mapValue.fields[yv];return pm(e)?Bh(e):e}function Mu(r){const e=qo(r.mapValue.fields[vv].timestampValue);return new kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,t,s,a,c,m,v,E,x,P,I){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=m,this.autoDetectLongPolling=v,this.longPollingOptions=E,this.useFetchStreams=x,this.isUsingEmulator=P,this.apiKey=I}}const vh="(default)";class Du{constructor(e,t){this.projectId=e,this.database=t||vh}static empty(){return new Du("","")}get isDefaultDatabase(){return this.database===vh}isEqual(e){return e instanceof Du&&e.projectId===this.projectId&&e.database===this.database}}function _S(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new Se(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Du(r.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="__type__",yS="__max__",th={mapValue:{}},Ev="__vector__",wh="value";function Go(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?pm(r)?4:wS(r)?9007199254740991:vS(r)?10:11:We(28295,{value:r})}function ls(r,e){if(r===e)return!0;const t=Go(r);if(t!==Go(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Mu(r).isEqual(Mu(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const m=qo(a.timestampValue),v=qo(c.timestampValue);return m.seconds===v.seconds&&m.nanos===v.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,c){return $o(a.bytesValue).isEqual($o(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,c){return Kt(a.geoPointValue.latitude)===Kt(c.geoPointValue.latitude)&&Kt(a.geoPointValue.longitude)===Kt(c.geoPointValue.longitude)})(r,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return Kt(a.integerValue)===Kt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const m=Kt(a.doubleValue),v=Kt(c.doubleValue);return m===v?yh(m)===yh(v):isNaN(m)&&isNaN(v)}return!1})(r,e);case 9:return kl(r.arrayValue.values||[],e.arrayValue.values||[],ls);case 10:case 11:return(function(a,c){const m=a.mapValue.fields||{},v=c.mapValue.fields||{};if(T_(m)!==T_(v))return!1;for(const E in m)if(m.hasOwnProperty(E)&&(v[E]===void 0||!ls(m[E],v[E])))return!1;return!0})(r,e);default:return We(52216,{left:r})}}function Ou(r,e){return(r.values||[]).find((t=>ls(t,e)))!==void 0}function Rl(r,e){if(r===e)return 0;const t=Go(r),s=Go(e);if(t!==s)return ot(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ot(r.booleanValue,e.booleanValue);case 2:return(function(c,m){const v=Kt(c.integerValue||c.doubleValue),E=Kt(m.integerValue||m.doubleValue);return v<E?-1:v>E?1:v===E?0:isNaN(v)?isNaN(E)?0:-1:1})(r,e);case 3:return I_(r.timestampValue,e.timestampValue);case 4:return I_(Mu(r),Mu(e));case 5:return Bf(r.stringValue,e.stringValue);case 6:return(function(c,m){const v=$o(c),E=$o(m);return v.compareTo(E)})(r.bytesValue,e.bytesValue);case 7:return(function(c,m){const v=c.split("/"),E=m.split("/");for(let x=0;x<v.length&&x<E.length;x++){const P=ot(v[x],E[x]);if(P!==0)return P}return ot(v.length,E.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,m){const v=ot(Kt(c.latitude),Kt(m.latitude));return v!==0?v:ot(Kt(c.longitude),Kt(m.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return S_(r.arrayValue,e.arrayValue);case 10:return(function(c,m){var A,H,Z,ne;const v=c.fields||{},E=m.fields||{},x=(A=v[wh])==null?void 0:A.arrayValue,P=(H=E[wh])==null?void 0:H.arrayValue,I=ot(((Z=x==null?void 0:x.values)==null?void 0:Z.length)||0,((ne=P==null?void 0:P.values)==null?void 0:ne.length)||0);return I!==0?I:S_(x,P)})(r.mapValue,e.mapValue);case 11:return(function(c,m){if(c===th.mapValue&&m===th.mapValue)return 0;if(c===th.mapValue)return 1;if(m===th.mapValue)return-1;const v=c.fields||{},E=Object.keys(v),x=m.fields||{},P=Object.keys(x);E.sort(),P.sort();for(let I=0;I<E.length&&I<P.length;++I){const A=Bf(E[I],P[I]);if(A!==0)return A;const H=Rl(v[E[I]],x[P[I]]);if(H!==0)return H}return ot(E.length,P.length)})(r.mapValue,e.mapValue);default:throw We(23264,{he:t})}}function I_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ot(r,e);const t=qo(r),s=qo(e),a=ot(t.seconds,s.seconds);return a!==0?a:ot(t.nanos,s.nanos)}function S_(r,e){const t=r.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const c=Rl(t[a],s[a]);if(c)return c}return ot(t.length,s.length)}function Nl(r){return Uf(r)}function Uf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=qo(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return $o(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Le.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",a=!0;for(const c of t.values||[])a?a=!1:s+=",",s+=Uf(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",c=!0;for(const m of s)c?c=!1:a+=",",a+=`${m}:${Uf(t.fields[m])}`;return a+"}"})(r.mapValue):We(61005,{value:r})}function oh(r){switch(Go(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bh(r);return e?16+oh(e):16;case 5:return 2*r.stringValue.length;case 6:return $o(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,c)=>a+oh(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let a=0;return Qo(s.fields,((c,m)=>{a+=c.length+oh(m)})),a})(r.mapValue);default:throw We(13486,{value:r})}}function P_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Wf(r){return!!r&&"integerValue"in r}function gm(r){return!!r&&"arrayValue"in r}function b_(r){return!!r&&"nullValue"in r}function C_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ah(r){return!!r&&"mapValue"in r}function vS(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[wv])==null?void 0:s.stringValue)===Ev}function Pu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Qo(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Pu(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pu(r.arrayValue.values[t]);return e}return{...r}}function wS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===yS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.value=e}static empty(){return new sr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ah(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pu(t)}setAll(e){let t=Cn.emptyPath(),s={},a=[];e.forEach(((m,v)=>{if(!t.isImmediateParentOf(v)){const E=this.getFieldsMap(t);this.applyChanges(E,s,a),s={},a=[],t=v.popLast()}m?s[v.lastSegment()]=Pu(m):a.push(v.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,s,a)}delete(e){const t=this.field(e.popLast());ah(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ls(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];ah(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Qo(t,((a,c)=>e[a]=c));for(const a of s)delete e[a]}clone(){return new sr(Pu(this.value))}}function Tv(r){const e=[];return Qo(r.fields,((t,s)=>{const a=new Cn([t]);if(ah(s)){const c=Tv(s.mapValue).fields;if(c.length===0)e.push(a);else for(const m of c)e.push(a.child(m))}else e.push(a)})),new Br(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,t,s,a,c,m,v){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=c,this.data=m,this.documentState=v}static newInvalidDocument(e){return new Hn(e,0,Qe.min(),Qe.min(),Qe.min(),sr.empty(),0)}static newFoundDocument(e,t,s,a){return new Hn(e,1,t,Qe.min(),s,a,0)}static newNoDocument(e,t){return new Hn(e,2,t,Qe.min(),Qe.min(),sr.empty(),0)}static newUnknownDocument(e,t){return new Hn(e,3,t,Qe.min(),Qe.min(),sr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,t){this.position=e,this.inclusive=t}}function A_(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const c=e[a],m=r.position[a];if(c.field.isKeyField()?s=Le.comparator(Le.fromName(m.referenceValue),t.key):s=Rl(m,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function k_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ls(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,t="asc"){this.field=e,this.dir=t}}function ES(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{}class nn extends xv{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new xS(e,t,s):t==="array-contains"?new PS(e,s):t==="in"?new bS(e,s):t==="not-in"?new CS(e,s):t==="array-contains-any"?new AS(e,s):new nn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new IS(e,s):new SS(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Rl(t,this.value)):t!==null&&Go(this.value)===Go(t)&&this.matchesComparison(Rl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return We(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ni extends xv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ni(e,t)}matches(e){return Iv(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Iv(r){return r.op==="and"}function Sv(r){return TS(r)&&Iv(r)}function TS(r){for(const e of r.filters)if(e instanceof Ni)return!1;return!0}function Hf(r){if(r instanceof nn)return r.field.canonicalString()+r.op.toString()+Nl(r.value);if(Sv(r))return r.filters.map((e=>Hf(e))).join(",");{const e=r.filters.map((t=>Hf(t))).join(",");return`${r.op}(${e})`}}function Pv(r,e){return r instanceof nn?(function(s,a){return a instanceof nn&&s.op===a.op&&s.field.isEqual(a.field)&&ls(s.value,a.value)})(r,e):r instanceof Ni?(function(s,a){return a instanceof Ni&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((c,m,v)=>c&&Pv(m,a.filters[v])),!0):!1})(r,e):void We(19439)}function bv(r){return r instanceof nn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Nl(t.value)}`})(r):r instanceof Ni?(function(t){return t.op.toString()+" {"+t.getFilters().map(bv).join(" ,")+"}"})(r):"Filter"}class xS extends nn{constructor(e,t,s){super(e,t,s),this.key=Le.fromName(s.referenceValue)}matches(e){const t=Le.comparator(e.key,this.key);return this.matchesComparison(t)}}class IS extends nn{constructor(e,t){super(e,"in",t),this.keys=Cv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class SS extends nn{constructor(e,t){super(e,"not-in",t),this.keys=Cv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Cv(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Le.fromName(s.referenceValue)))}class PS extends nn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return gm(t)&&Ou(t.arrayValue,this.value)}}class bS extends nn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ou(this.value.arrayValue,t)}}class CS extends nn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ou(this.value.arrayValue,t)}}class AS extends nn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!gm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Ou(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,t=null,s=[],a=[],c=null,m=null,v=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=m,this.endAt=v,this.Te=null}}function R_(r,e=null,t=[],s=[],a=null,c=null,m=null){return new kS(r,e,t,s,a,c,m)}function _m(r){const e=Ke(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Hf(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),jh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Nl(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Nl(s))).join(",")),e.Te=t}return e.Te}function ym(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!ES(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Pv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!k_(r.startAt,e.startAt)&&k_(r.endAt,e.endAt)}function qf(r){return Le.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,t=null,s=[],a=[],c=null,m="F",v=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=m,this.startAt=v,this.endAt=E,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function RS(r,e,t,s,a,c,m,v){return new Ul(r,e,t,s,a,c,m,v)}function vm(r){return new Ul(r)}function N_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function NS(r){return Le.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Av(r){return r.collectionGroup!==null}function bu(r){const e=Ke(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(m){let v=new un(Cn.comparator);return m.filters.forEach((E=>{E.getFlattenedFilters().forEach((x=>{x.isInequality()&&(v=v.add(x.field))}))})),v})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Vu(c,s))})),t.has(Cn.keyField().canonicalString())||e.Ie.push(new Vu(Cn.keyField(),s))}return e.Ie}function rs(r){const e=Ke(r);return e.Ee||(e.Ee=kv(e,bu(r))),e.Ee}function LS(r){const e=Ke(r);return e.Re||(e.Re=kv(e,r.explicitOrderBy)),e.Re}function kv(r,e){if(r.limitType==="F")return R_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new Vu(a.field,c)}));const t=r.endAt?new Eh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Eh(r.startAt.position,r.startAt.inclusive):null;return R_(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function $f(r,e){const t=r.filters.concat([e]);return new Ul(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function MS(r,e){const t=r.explicitOrderBy.concat([e]);return new Ul(r.path,r.collectionGroup,t,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function Gf(r,e,t){return new Ul(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Uh(r,e){return ym(rs(r),rs(e))&&r.limitType===e.limitType}function Rv(r){return`${_m(rs(r))}|lt:${r.limitType}`}function yl(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>bv(a))).join(", ")}]`),jh(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(m){return`${m.field.canonicalString()} (${m.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>Nl(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>Nl(a))).join(",")),`Target(${s})`})(rs(r))}; limitType=${r.limitType})`}function Wh(r,e){return e.isFoundDocument()&&(function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Le.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,a){for(const c of bu(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0})(r,e)&&(function(s,a){return!(s.startAt&&!(function(m,v,E){const x=A_(m,v,E);return m.inclusive?x<=0:x<0})(s.startAt,bu(s),a)||s.endAt&&!(function(m,v,E){const x=A_(m,v,E);return m.inclusive?x>=0:x>0})(s.endAt,bu(s),a))})(r,e)}function DS(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Nv(r){return(e,t)=>{let s=!1;for(const a of bu(r)){const c=OS(a,e,t);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function OS(r,e,t){const s=r.field.isKeyField()?Le.comparator(e.key,t.key):(function(c,m,v){const E=m.data.field(c),x=v.data.field(c);return E!==null&&x!==null?Rl(E,x):We(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return We(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Qo(this.inner,((t,s)=>{for(const[a,c]of s)e(a,c)}))}isEmpty(){return mv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=new Bt(Le.comparator);function qs(){return VS}const Lv=new Bt(Le.comparator);function Tu(...r){let e=Lv;for(const t of r)e=e.insert(t.key,t);return e}function Mv(r){let e=Lv;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Ca(){return Cu()}function Dv(){return Cu()}function Cu(){return new Fa((r=>r.toString()),((r,e)=>r.isEqual(e)))}const zS=new Bt(Le.comparator),FS=new un(Le.comparator);function at(...r){let e=FS;for(const t of r)e=e.add(t);return e}const jS=new un(ot);function BS(){return jS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yh(e)?"-0":e}}function Ov(r){return{integerValue:""+r}}function Vv(r,e){return hS(e)?Ov(e):wm(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(){this._=void 0}}function US(r,e,t){return r instanceof Th?(function(a,c){const m={fields:{[_v]:{stringValue:gv},[vv]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&pm(c)&&(c=Bh(c)),c&&(m.fields[yv]=c),{mapValue:m}})(t,e):r instanceof zu?Fv(r,e):r instanceof Fu?jv(r,e):(function(a,c){const m=zv(a,c),v=L_(m)+L_(a.Ae);return Wf(m)&&Wf(a.Ae)?Ov(v):wm(a.serializer,v)})(r,e)}function WS(r,e,t){return r instanceof zu?Fv(r,e):r instanceof Fu?jv(r,e):t}function zv(r,e){return r instanceof ju?(function(s){return Wf(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Th extends Hh{}class zu extends Hh{constructor(e){super(),this.elements=e}}function Fv(r,e){const t=Bv(e);for(const s of r.elements)t.some((a=>ls(a,s)))||t.push(s);return{arrayValue:{values:t}}}class Fu extends Hh{constructor(e){super(),this.elements=e}}function jv(r,e){let t=Bv(e);for(const s of r.elements)t=t.filter((a=>!ls(a,s)));return{arrayValue:{values:t}}}class ju extends Hh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function L_(r){return Kt(r.integerValue||r.doubleValue)}function Bv(r){return gm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,t){this.field=e,this.transform=t}}function qS(r,e){return r.field.isEqual(e.field)&&(function(s,a){return s instanceof zu&&a instanceof zu||s instanceof Fu&&a instanceof Fu?kl(s.elements,a.elements,ls):s instanceof ju&&a instanceof ju?ls(s.Ae,a.Ae):s instanceof Th&&a instanceof Th})(r.transform,e.transform)}class $S{constructor(e,t){this.version=e,this.transformResults=t}}class is{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new is}static exists(e){return new is(void 0,e)}static updateTime(e){return new is(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class qh{}function Uv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Hv(r.key,is.none()):new qu(r.key,r.data,is.none());{const t=r.data,s=sr.empty();let a=new un(Cn.comparator);for(let c of e.fields)if(!a.has(c)){let m=t.field(c);m===null&&c.length>1&&(c=c.popLast(),m=t.field(c)),m===null?s.delete(c):s.set(c,m),a=a.add(c)}return new Yo(r.key,s,new Br(a.toArray()),is.none())}}function GS(r,e,t){r instanceof qu?(function(a,c,m){const v=a.value.clone(),E=D_(a.fieldTransforms,c,m.transformResults);v.setAll(E),c.convertToFoundDocument(m.version,v).setHasCommittedMutations()})(r,e,t):r instanceof Yo?(function(a,c,m){if(!lh(a.precondition,c))return void c.convertToUnknownDocument(m.version);const v=D_(a.fieldTransforms,c,m.transformResults),E=c.data;E.setAll(Wv(a)),E.setAll(v),c.convertToFoundDocument(m.version,E).setHasCommittedMutations()})(r,e,t):(function(a,c,m){c.convertToNoDocument(m.version).setHasCommittedMutations()})(0,e,t)}function Au(r,e,t,s){return r instanceof qu?(function(c,m,v,E){if(!lh(c.precondition,m))return v;const x=c.value.clone(),P=O_(c.fieldTransforms,E,m);return x.setAll(P),m.convertToFoundDocument(m.version,x).setHasLocalMutations(),null})(r,e,t,s):r instanceof Yo?(function(c,m,v,E){if(!lh(c.precondition,m))return v;const x=O_(c.fieldTransforms,E,m),P=m.data;return P.setAll(Wv(c)),P.setAll(x),m.convertToFoundDocument(m.version,P).setHasLocalMutations(),v===null?null:v.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((I=>I.field)))})(r,e,t,s):(function(c,m,v){return lh(c.precondition,m)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):v})(r,e,t)}function ZS(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),c=zv(s.transform,a||null);c!=null&&(t===null&&(t=sr.empty()),t.set(s.field,c))}return t||null}function M_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&kl(s,a,((c,m)=>qS(c,m)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class qu extends qh{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Yo extends qh{constructor(e,t,s,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Wv(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function D_(r,e,t){const s=new Map;yt(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let a=0;a<t.length;a++){const c=r[a],m=c.transform,v=e.data.field(c.field);s.set(c.field,WS(m,v,t[a]))}return s}function O_(r,e,t){const s=new Map;for(const a of r){const c=a.transform,m=t.data.field(a.field);s.set(a.field,US(c,m,e))}return s}class Hv extends qh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KS extends qh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&GS(c,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Au(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Au(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Dv();return this.mutations.forEach((a=>{const c=e.get(a.key),m=c.overlayedDocument;let v=this.applyToLocalView(m,c.mutatedFields);v=t.has(a.key)?null:v;const E=Uv(m,v);E!==null&&s.set(a.key,E),m.isValidDocument()||m.convertToNoDocument(Qe.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),at())}isEqual(e){return this.batchId===e.batchId&&kl(this.mutations,e.mutations,((t,s)=>M_(t,s)))&&kl(this.baseMutations,e.baseMutations,((t,s)=>M_(t,s)))}}class Em{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){yt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return zS})();const c=e.mutations;for(let m=0;m<c.length;m++)a=a.insert(c[m].key,s[m].version);return new Em(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,t,s){this.alias=e,this.aggregateType=t,this.fieldPath=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tn,ht;function eP(r){switch(r){case ie.OK:return We(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return We(15467,{code:r})}}function qv(r){if(r===void 0)return Hs("GRPC error has no .code"),ie.UNKNOWN;switch(r){case tn.OK:return ie.OK;case tn.CANCELLED:return ie.CANCELLED;case tn.UNKNOWN:return ie.UNKNOWN;case tn.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case tn.INTERNAL:return ie.INTERNAL;case tn.UNAVAILABLE:return ie.UNAVAILABLE;case tn.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case tn.NOT_FOUND:return ie.NOT_FOUND;case tn.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case tn.ABORTED:return ie.ABORTED;case tn.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case tn.DATA_LOSS:return ie.DATA_LOSS;default:return We(39323,{code:r})}}(ht=tn||(tn={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=new Bo([4294967295,4294967295],0);function V_(r){const e=tP().encode(r),t=new rv;return t.update(e),new Uint8Array(t.digest())}function z_(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Bo([t,s],0),new Bo([a,c],0)]}class Tm{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new xu(`Invalid padding: ${t}`);if(s<0)throw new xu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new xu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new xu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Bo.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(Bo.fromNumber(s)));return a.compare(nP)===1&&(a=new Bo([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=V_(e),[s,a]=z_(t);for(let c=0;c<this.hashCount;c++){const m=this.ye(s,a,c);if(!this.we(m))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),m=new Tm(c,a,t);return s.forEach((v=>m.insert(v))),m}insert(e){if(this.ge===0)return;const t=V_(e),[s,a]=z_(t);for(let c=0;c<this.hashCount;c++){const m=this.ye(s,a,c);this.be(m)}}be(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class xu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,t,s,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,$u.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new $h(Qe.min(),a,new Bt(ot),qs(),at())}}class $u{constructor(e,t,s,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new $u(s,t,at(),at(),at())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,t,s,a){this.Se=e,this.removedTargetIds=t,this.key=s,this.De=a}}class $v{constructor(e,t){this.targetId=e,this.Ce=t}}class Gv{constructor(e,t,s=kn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class F_{constructor(){this.ve=0,this.Fe=j_(),this.Me=kn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=at(),t=at(),s=at();return this.Fe.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:We(38017,{changeType:c})}})),new $u(this.Me,this.xe,e,t,s)}Ke(){this.Oe=!1,this.Fe=j_()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,yt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class rP{constructor(e){this.Ge=e,this.ze=new Map,this.je=qs(),this.He=nh(),this.Je=nh(),this.Ze=new Bt(ot)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:We(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const c=a.target;if(qf(c))if(s===0){const m=new Le(c.path);this.et(t,m,Hn.newNoDocument(m,Qe.min()))}else yt(s===1,20013,{expectedCount:s});else{const m=this._t(t);if(m!==s){const v=this.ut(e),E=v?this.ct(v,e,m):1;if(E!==0){this.it(t);const x=E===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,x)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=t;let m,v;try{m=$o(s).toUint8Array()}catch(E){if(E instanceof pv)return Al("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw E}try{v=new Tm(m,a,c)}catch(E){return Al(E instanceof xu?"BloomFilter error: ":"Applying bloom filter failed: ",E),null}return v.ge===0?null:v}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((c=>{const m=this.Ge.ht(),v=`projects/${m.projectId}/databases/${m.database}/documents/${c.path.canonicalString()}`;e.mightContain(v)||(this.et(t,c,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((c,m)=>{const v=this.ot(m);if(v){if(c.current&&qf(v.target)){const E=new Le(v.target.path);this.It(E).has(m)||this.Et(m,E)||this.et(m,E,Hn.newNoDocument(E,e))}c.Be&&(t.set(m,c.ke()),c.Ke())}}));let s=at();this.Je.forEach(((c,m)=>{let v=!0;m.forEachWhile((E=>{const x=this.ot(E);return!x||x.purpose==="TargetPurposeLimboResolution"||(v=!1,!1)})),v&&(s=s.add(c))})),this.je.forEach(((c,m)=>m.setReadTime(e)));const a=new $h(e,t,this.Ze,this.je,s);return this.je=qs(),this.He=nh(),this.Je=nh(),this.Ze=new Bt(ot),a}Ye(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,s),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new F_,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new un(ot),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new un(ot),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new F_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function nh(){return new Bt(Le.comparator)}function j_(){return new Bt(Le.comparator)}const iP={asc:"ASCENDING",desc:"DESCENDING"},sP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oP={and:"AND",or:"OR"};class aP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zf(r,e){return r.useProto3Json||jh(e)?e:{value:e}}function xh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function lP(r,e){return xh(r,e.toTimestamp())}function ss(r){return yt(!!r,49232),Qe.fromTimestamp((function(t){const s=qo(t);return new kt(s.seconds,s.nanos)})(r))}function xm(r,e){return Kf(r,e).canonicalString()}function Kf(r,e){const t=(function(a){return new At(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Kv(r){const e=At.fromString(r);return yt(t0(e),10190,{key:e.toString()}),e}function Qf(r,e){return xm(r.databaseId,e.path)}function Pf(r,e){const t=Kv(e);if(t.get(1)!==r.databaseId.projectId)throw new Se(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Se(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Le(Yv(t))}function Qv(r,e){return xm(r.databaseId,e)}function uP(r){const e=Kv(r);return e.length===4?At.emptyPath():Yv(e)}function Yf(r){return new At(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Yv(r){return yt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function B_(r,e,t){return{name:Qf(r,e),fields:t.value.mapValue.fields}}function cP(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:We(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(x,P){return x.useProto3Json?(yt(P===void 0||typeof P=="string",58123),kn.fromBase64String(P||"")):(yt(P===void 0||P instanceof Buffer||P instanceof Uint8Array,16193),kn.fromUint8Array(P||new Uint8Array))})(r,e.targetChange.resumeToken),m=e.targetChange.cause,v=m&&(function(x){const P=x.code===void 0?ie.UNKNOWN:qv(x.code);return new Se(P,x.message||"")})(m);t=new Gv(s,a,c,v||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Pf(r,s.document.name),c=ss(s.document.updateTime),m=s.document.createTime?ss(s.document.createTime):Qe.min(),v=new sr({mapValue:{fields:s.document.fields}}),E=Hn.newFoundDocument(a,c,m,v),x=s.targetIds||[],P=s.removedTargetIds||[];t=new uh(x,P,E.key,E)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Pf(r,s.document),c=s.readTime?ss(s.readTime):Qe.min(),m=Hn.newNoDocument(a,c),v=s.removedTargetIds||[];t=new uh([],v,m.key,m)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Pf(r,s.document),c=s.removedTargetIds||[];t=new uh([],c,a,null)}else{if(!("filter"in e))return We(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,m=new JS(a,c),v=s.targetId;t=new $v(v,m)}}return t}function hP(r,e){let t;if(e instanceof qu)t={update:B_(r,e.key,e.value)};else if(e instanceof Hv)t={delete:Qf(r,e.key)};else if(e instanceof Yo)t={update:B_(r,e.key,e.data),updateMask:wP(e.fieldMask)};else{if(!(e instanceof KS))return We(16599,{dt:e.type});t={verify:Qf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(c,m){const v=m.transform;if(v instanceof Th)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof zu)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof Fu)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof ju)return{fieldPath:m.field.canonicalString(),increment:v.Ae};throw We(20930,{transform:m.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:lP(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:We(27497)})(r,e.precondition)),t}function dP(r,e){return r&&r.length>0?(yt(e!==void 0,14353),r.map((t=>(function(a,c){let m=a.updateTime?ss(a.updateTime):ss(c);return m.isEqual(Qe.min())&&(m=ss(c)),new $S(m,a.transformResults||[])})(t,e)))):[]}function fP(r,e){return{documents:[Qv(r,e.path)]}}function Xv(r,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Qv(r,a);const c=(function(x){if(x.length!==0)return e0(Ni.create(x,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const m=(function(x){if(x.length!==0)return x.map((P=>(function(A){return{field:Lo(A.field),direction:_P(A.dir)}})(P)))})(e.orderBy);m&&(t.structuredQuery.orderBy=m);const v=Zf(r,e.limit);return v!==null&&(t.structuredQuery.limit=v),e.startAt&&(t.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:t,parent:a}}function mP(r,e,t,s){const{ft:a,parent:c}=Xv(r,e),m={},v=[];let E=0;return t.forEach((x=>{const P="aggregate_"+E++;m[P]=x.alias,x.aggregateType==="count"?v.push({alias:P,count:{}}):x.aggregateType==="avg"?v.push({alias:P,avg:{field:Lo(x.fieldPath)}}):x.aggregateType==="sum"&&v.push({alias:P,sum:{field:Lo(x.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:v,structuredQuery:a.structuredQuery},parent:a.parent},gt:m,parent:c}}function pP(r){let e=uP(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){yt(s===1,65062);const P=t.from[0];P.allDescendants?a=P.collectionId:e=e.child(P.collectionId)}let c=[];t.where&&(c=(function(I){const A=Jv(I);return A instanceof Ni&&Sv(A)?A.getFilters():[A]})(t.where));let m=[];t.orderBy&&(m=(function(I){return I.map((A=>(function(Z){return new Vu(vl(Z.field),(function(ee){switch(ee){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Z.direction))})(A)))})(t.orderBy));let v=null;t.limit&&(v=(function(I){let A;return A=typeof I=="object"?I.value:I,jh(A)?null:A})(t.limit));let E=null;t.startAt&&(E=(function(I){const A=!!I.before,H=I.values||[];return new Eh(H,A)})(t.startAt));let x=null;return t.endAt&&(x=(function(I){const A=!I.before,H=I.values||[];return new Eh(H,A)})(t.endAt)),RS(e,a,m,c,v,"F",E,x)}function gP(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return We(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Jv(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=vl(t.unaryFilter.field);return nn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=vl(t.unaryFilter.field);return nn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=vl(t.unaryFilter.field);return nn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=vl(t.unaryFilter.field);return nn.create(m,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return We(61313);default:return We(60726)}})(r):r.fieldFilter!==void 0?(function(t){return nn.create(vl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return We(58110);default:return We(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Ni.create(t.compositeFilter.filters.map((s=>Jv(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return We(1026)}})(t.compositeFilter.op))})(r):We(30097,{filter:r})}function _P(r){return iP[r]}function yP(r){return sP[r]}function vP(r){return oP[r]}function Lo(r){return{fieldPath:r.canonicalString()}}function vl(r){return Cn.fromServerFormat(r.fieldPath)}function e0(r){return r instanceof nn?(function(t){if(t.op==="=="){if(C_(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NAN"}};if(b_(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(C_(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NOT_NAN"}};if(b_(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lo(t.field),op:yP(t.op),value:t.value}}})(r):r instanceof Ni?(function(t){const s=t.getFilters().map((a=>e0(a)));return s.length===1?s[0]:{compositeFilter:{op:vP(t.op),filters:s}}})(r):We(54877,{filter:r})}function wP(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function t0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function n0(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,t,s,a,c=Qe.min(),m=Qe.min(),v=kn.EMPTY_BYTE_STRING,E=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=v,this.expectedCount=E}withSequenceNumber(e){return new Vo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Vo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.yt=e}}function TP(r){const e=pP({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Gf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(){this.Sn=new IP}addToCollectionParentIndex(e,t){return this.Sn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Ho.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Ho.min())}updateCollectionGroup(e,t,s){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class IP{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new un(At.comparator),c=!a.has(s);return this.index[t]=a.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new un(At.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},r0=41943040;class Cr{static withCacheSize(e){return new Cr(e,Cr.DEFAULT_COLLECTION_PERCENTILE,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cr.DEFAULT_COLLECTION_PERCENTILE=10,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cr.DEFAULT=new Cr(r0,Cr.DEFAULT_COLLECTION_PERCENTILE,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cr.DISABLED=new Cr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ll(0)}static ar(){return new Ll(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="LruGarbageCollector",SP=1048576;function H_([r,e],[t,s]){const a=ot(r,t);return a===0?ot(e,s):a}class PP{constructor(e){this.Pr=e,this.buffer=new un(H_),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();H_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class bP{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Pe(W_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Bl(t)?Pe(W_,"Ignoring IndexedDB error during garbage collection: ",t):await jl(t)}await this.Ar(3e5)}))}}class CP{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(Fh.ce);const s=new PP(t);return this.Vr.forEachTarget(e,(a=>s.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>s.Er(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(U_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),U_):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let s,a,c,m,v,E,x;const P=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),a=this.params.maximumSequenceNumbersToCollect):a=I,m=Date.now(),this.nthSequenceNumber(e,a)))).next((I=>(s=I,v=Date.now(),this.removeTargets(e,s,t)))).next((I=>(c=I,E=Date.now(),this.removeOrphanedDocuments(e,s)))).next((I=>(x=Date.now(),_l()<=st.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${m-P}ms
	Determined least recently used ${a} in `+(v-m)+`ms
	Removed ${c} targets in `+(E-v)+`ms
	Removed ${I} documents in `+(x-E)+`ms
Total Duration: ${x-P}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:I}))))}}function AP(r,e){return new CP(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(){this.changes=new Fa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?se.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&Au(s.mutation,a,Br.empty(),kt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,at()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=at()){const a=Ca();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((c=>{let m=Tu();return c.forEach(((v,E)=>{m=m.insert(v,E.overlayedDocument)})),m}))))}getOverlayedDocuments(e,t){const s=Ca();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,at())))}populateOverlays(e,t,s){const a=[];return s.forEach((c=>{t.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((m,v)=>{t.set(m,v)}))}))}computeViews(e,t,s,a){let c=qs();const m=Cu(),v=(function(){return Cu()})();return t.forEach(((E,x)=>{const P=s.get(x.key);a.has(x.key)&&(P===void 0||P.mutation instanceof Yo)?c=c.insert(x.key,x):P!==void 0?(m.set(x.key,P.mutation.getFieldMask()),Au(P.mutation,x,P.mutation.getFieldMask(),kt.now())):m.set(x.key,Br.empty())})),this.recalculateAndSaveOverlays(e,c).next((E=>(E.forEach(((x,P)=>m.set(x,P))),t.forEach(((x,P)=>v.set(x,new RP(P,m.get(x)??null)))),v)))}recalculateAndSaveOverlays(e,t){const s=Cu();let a=new Bt(((m,v)=>m-v)),c=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((m=>{for(const v of m)v.keys().forEach((E=>{const x=t.get(E);if(x===null)return;let P=s.get(E)||Br.empty();P=v.applyToLocalView(x,P),s.set(E,P);const I=(a.get(v.batchId)||at()).add(E);a=a.insert(v.batchId,I)}))})).next((()=>{const m=[],v=a.getReverseIterator();for(;v.hasNext();){const E=v.getNext(),x=E.key,P=E.value,I=Dv();P.forEach((A=>{if(!c.has(A)){const H=Uv(t.get(A),s.get(A));H!==null&&I.set(A,H),c=c.add(A)}})),m.push(this.documentOverlayCache.saveOverlays(e,x,I))}return se.waitFor(m)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return NS(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Av(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((c=>{const m=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-c.size):se.resolve(Ca());let v=Lu,E=c;return m.next((x=>se.forEach(x,((P,I)=>(v<I.largestBatchId&&(v=I.largestBatchId),c.get(P)?se.resolve():this.remoteDocumentCache.getEntry(e,P).next((A=>{E=E.insert(P,A)}))))).next((()=>this.populateOverlays(e,x,c))).next((()=>this.computeViews(e,E,x,at()))).next((P=>({batchId:v,changes:Mv(P)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Le(t)).next((s=>{let a=Tu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const c=t.collectionGroup;let m=Tu();return this.indexManager.getCollectionParents(e,c).next((v=>se.forEach(v,(E=>{const x=(function(I,A){return new Ul(A,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(t,E.child(c));return this.getDocumentsMatchingCollectionQuery(e,x,s,a).next((P=>{P.forEach(((I,A)=>{m=m.insert(I,A)}))}))})).next((()=>m))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((m=>(c=m,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,a)))).next((m=>{c.forEach(((E,x)=>{const P=x.getKey();m.get(P)===null&&(m=m.insert(P,Hn.newInvalidDocument(P)))}));let v=Tu();return m.forEach(((E,x)=>{const P=c.get(E);P!==void 0&&Au(P.mutation,x,Br.empty(),kt.now()),Wh(t,x)&&(v=v.insert(E,x))})),v}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return se.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:ss(a.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:TP(a.bundledQuery),readTime:ss(a.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(){this.overlays=new Bt(Le.comparator),this.Lr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ca();return se.forEach(t,(a=>this.getOverlay(e,a).next((c=>{c!==null&&s.set(a,c)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,c)=>{this.bt(e,t,c)})),se.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.Lr.get(s);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(s)),se.resolve()}getOverlaysForCollection(e,t,s){const a=Ca(),c=t.length+1,m=new Le(t.child("")),v=this.overlays.getIteratorFrom(m);for(;v.hasNext();){const E=v.getNext().value,x=E.getKey();if(!t.isPrefixOf(x.path))break;x.path.length===c&&E.largestBatchId>s&&a.set(E.getKey(),E)}return se.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let c=new Bt(((x,P)=>x-P));const m=this.overlays.getIterator();for(;m.hasNext();){const x=m.getNext().value;if(x.getKey().getCollectionGroup()===t&&x.largestBatchId>s){let P=c.get(x.largestBatchId);P===null&&(P=Ca(),c=c.insert(x.largestBatchId,P)),P.set(x.getKey(),x)}}const v=Ca(),E=c.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach(((x,P)=>v.set(x,P))),!(v.size()>=a)););return se.resolve(v)}bt(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const m=this.Lr.get(a.largestBatchId).delete(s.key);this.Lr.set(a.largestBatchId,m)}this.overlays=this.overlays.insert(s.key,new YS(t,s));let c=this.Lr.get(t);c===void 0&&(c=at(),this.Lr.set(t,c)),this.Lr.set(t,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this.sessionToken=kn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(){this.kr=new un(gn.Kr),this.qr=new un(gn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const s=new gn(e,t);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new gn(e,t))}Qr(e,t){e.forEach((s=>this.removeReference(s,t)))}Gr(e){const t=new Le(new At([])),s=new gn(t,e),a=new gn(t,e+1),c=[];return this.qr.forEachInRange([s,a],(m=>{this.Wr(m),c.push(m.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Le(new At([])),s=new gn(t,e),a=new gn(t,e+1);let c=at();return this.qr.forEachInRange([s,a],(m=>{c=c.add(m.key)})),c}containsKey(e){const t=new gn(e,0),s=this.kr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class gn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Le.comparator(e.key,t.key)||ot(e.Hr,t.Hr)}static Ur(e,t){return ot(e.Hr,t.Hr)||Le.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new un(gn.Kr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const m=new QS(c,t,s,a);this.mutationQueue.push(m);for(const v of a)this.Jr=this.Jr.add(new gn(v.key,c)),this.indexManager.addToCollectionParentIndex(e,v.key.path.popLast());return se.resolve(m)}lookupMutationBatch(e,t){return se.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.Xr(s),c=a<0?0:a;return se.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?mm:this.Yn-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new gn(t,0),a=new gn(t,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([s,a],(m=>{const v=this.Zr(m.Hr);c.push(v)})),se.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new un(ot);return t.forEach((a=>{const c=new gn(a,0),m=new gn(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,m],(v=>{s=s.add(v.Hr)}))})),se.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let c=s;Le.isDocumentKey(c)||(c=c.child(""));const m=new gn(new Le(c),0);let v=new un(ot);return this.Jr.forEachWhile((E=>{const x=E.key.path;return!!s.isPrefixOf(x)&&(x.length===a&&(v=v.add(E.Hr)),!0)}),m),se.resolve(this.Yr(v))}Yr(e){const t=[];return e.forEach((s=>{const a=this.Zr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){yt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return se.forEach(t.mutations,(a=>{const c=new gn(a.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,t){const s=new gn(t,0),a=this.Jr.firstAfterOrEqual(s);return se.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e){this.ti=e,this.docs=(function(){return new Bt(Le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),c=a?a.size:0,m=this.ti(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:m}),this.size+=m-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return se.resolve(s?s.document.mutableCopy():Hn.newInvalidDocument(t))}getEntries(e,t){let s=qs();return t.forEach((a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Hn.newInvalidDocument(a))})),se.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let c=qs();const m=t.path,v=new Le(m.child("__id-9223372036854775808__")),E=this.docs.getIteratorFrom(v);for(;E.hasNext();){const{key:x,value:{document:P}}=E.getNext();if(!m.isPrefixOf(x.path))break;x.path.length>m.length+1||aS(oS(P),s)<=0||(a.has(P.key)||Wh(t,P))&&(c=c.insert(P.key,P.mutableCopy()))}return se.resolve(c)}getAllFromCollectionGroup(e,t,s,a){We(9500)}ni(e,t){return se.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new zP(this)}getSize(e){return se.resolve(this.size)}}class zP extends kP{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(s)})),se.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e){this.persistence=e,this.ri=new Fa((t=>_m(t)),ym),this.lastRemoteSnapshotVersion=Qe.min(),this.highestTargetId=0,this.ii=0,this.si=new Im,this.targetCount=0,this.oi=Ll._r()}forEachTarget(e,t){return this.ri.forEach(((s,a)=>t(a))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ii&&(this.ii=t),se.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Ll(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.lr(t),se.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,s){let a=0;const c=[];return this.ri.forEach(((m,v)=>{v.sequenceNumber<=t&&s.get(v.targetId)===null&&(this.ri.delete(m),c.push(this.removeMatchingKeysForTargetId(e,v.targetId)),a++)})),se.waitFor(c).next((()=>a))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const s=this.ri.get(t)||null;return se.resolve(s)}addMatchingKeys(e,t,s){return this.si.$r(t,s),se.resolve()}removeMatchingKeys(e,t,s){this.si.Qr(t,s);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach((m=>{c.push(a.markPotentiallyOrphaned(e,m))})),se.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const s=this.si.jr(t);return se.resolve(s)}containsKey(e,t){return se.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,t){this._i={},this.overlays={},this.ai=new Fh(0),this.ui=!1,this.ui=!0,this.ci=new DP,this.referenceDelegate=e(this),this.li=new FP(this),this.indexManager=new xP,this.remoteDocumentCache=(function(a){return new VP(a)})((s=>this.referenceDelegate.hi(s))),this.serializer=new EP(t),this.Pi=new LP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new MP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this._i[e.toKey()];return s||(s=new OP(t,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,s){Pe("MemoryPersistence","Starting transaction:",e);const a=new jP(this.ai.next());return this.referenceDelegate.Ti(),s(a).next((c=>this.referenceDelegate.Ii(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ei(e,t){return se.or(Object.values(this._i).map((s=>()=>s.containsKey(e,t))))}}class jP extends uS{constructor(e){super(),this.currentSequenceNumber=e}}class Sm{constructor(e){this.persistence=e,this.Ri=new Im,this.Ai=null}static Vi(e){return new Sm(e)}get di(){if(this.Ai)return this.Ai;throw We(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.di.delete(s.toString()),se.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.di.add(s.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((c=>this.di.add(c.toString())))})).next((()=>s.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.di,(s=>{const a=Le.fromPath(s);return this.mi(e,a).next((c=>{c||t.removeEntry(a,Qe.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Ih{constructor(e,t){this.persistence=e,this.fi=new Fa((s=>dS(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=AP(this,t)}static Vi(e,t){return new Ih(e,t)}Ti(){}Ii(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}mr(e,t){return se.forEach(this.fi,((s,a)=>this.wr(e,s,a).next((c=>c?se.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ni(e,(m=>this.wr(e,m,t).next((v=>{v||(s++,c.removeEntry(m,Qe.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),se.resolve()}removeReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),se.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=oh(e.data.value)),t}wr(e,t,s){return se.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return se.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Ts=s,this.Is=a}static Es(e,t){let s=at(),a=at();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Pm(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return bx()?8:cS(qn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const c={result:null};return this.gs(e,t).next((m=>{c.result=m})).next((()=>{if(!c.result)return this.ps(e,t,a,s).next((m=>{c.result=m}))})).next((()=>{if(c.result)return;const m=new BP;return this.ys(e,t,m).next((v=>{if(c.result=v,this.As)return this.ws(e,t,m,v.size)}))})).next((()=>c.result))}ws(e,t,s,a){return s.documentReadCount<this.Vs?(_l()<=st.DEBUG&&Pe("QueryEngine","SDK will not create cache indexes for query:",yl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(_l()<=st.DEBUG&&Pe("QueryEngine","Query:",yl(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.ds*a?(_l()<=st.DEBUG&&Pe("QueryEngine","The SDK decides to create cache indexes for query:",yl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rs(t))):se.resolve())}gs(e,t){if(N_(t))return se.resolve(null);let s=rs(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Gf(t,null,"F"),s=rs(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const m=at(...c);return this.fs.getDocuments(e,m).next((v=>this.indexManager.getMinOffset(e,s).next((E=>{const x=this.bs(t,v);return this.Ss(t,x,m,E.readTime)?this.gs(e,Gf(t,null,"F")):this.Ds(e,x,t,E)}))))})))))}ps(e,t,s,a){return N_(t)||a.isEqual(Qe.min())?se.resolve(null):this.fs.getDocuments(e,s).next((c=>{const m=this.bs(t,c);return this.Ss(t,m,s,a)?se.resolve(null):(_l()<=st.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),yl(t)),this.Ds(e,m,t,sS(a,Lu)).next((v=>v)))}))}bs(e,t){let s=new un(Nv(e));return t.forEach(((a,c)=>{Wh(e,c)&&(s=s.add(c))})),s}Ss(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ys(e,t,s){return _l()<=st.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",yl(t)),this.fs.getDocumentsMatchingQuery(e,t,Ho.min(),s)}Ds(e,t,s,a){return this.fs.getDocumentsMatchingQuery(e,s,a).next((c=>(t.forEach((m=>{c=c.insert(m.key,m)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="LocalStore",WP=3e8;class HP{constructor(e,t,s,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new Bt(ot),this.Fs=new Fa((c=>_m(c)),ym),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NP(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function qP(r,e,t,s){return new HP(r,e,t,s)}async function s0(r,e){const t=Ke(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((c=>(a=c,t.Os(e),t.mutationQueue.getAllMutationBatches(s)))).next((c=>{const m=[],v=[];let E=at();for(const x of a){m.push(x.batchId);for(const P of x.mutations)E=E.add(P.key)}for(const x of c){v.push(x.batchId);for(const P of x.mutations)E=E.add(P.key)}return t.localDocuments.getDocuments(s,E).next((x=>({Ns:x,removedBatchIds:m,addedBatchIds:v})))}))}))}function $P(r,e){const t=Ke(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),c=t.xs.newChangeBuffer({trackRemovals:!0});return(function(v,E,x,P){const I=x.batch,A=I.keys();let H=se.resolve();return A.forEach((Z=>{H=H.next((()=>P.getEntry(E,Z))).next((ne=>{const ee=x.docVersions.get(Z);yt(ee!==null,48541),ne.version.compareTo(ee)<0&&(I.applyToRemoteDocument(ne,x),ne.isValidDocument()&&(ne.setReadTime(x.commitVersion),P.addEntry(ne)))}))})),H.next((()=>v.mutationQueue.removeMutationBatch(E,I)))})(t,s,e,c).next((()=>c.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(v){let E=at();for(let x=0;x<v.mutationResults.length;++x)v.mutationResults[x].transformResults.length>0&&(E=E.add(v.batch.mutations[x].key));return E})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function o0(r){const e=Ke(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function GP(r,e){const t=Ke(r),s=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const m=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const v=[];e.targetChanges.forEach(((P,I)=>{const A=a.get(I);if(!A)return;v.push(t.li.removeMatchingKeys(c,P.removedDocuments,I).next((()=>t.li.addMatchingKeys(c,P.addedDocuments,I))));let H=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(I)!==null?H=H.withResumeToken(kn.EMPTY_BYTE_STRING,Qe.min()).withLastLimboFreeSnapshotVersion(Qe.min()):P.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(P.resumeToken,s)),a=a.insert(I,H),(function(ne,ee,be){return ne.resumeToken.approximateByteSize()===0||ee.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=WP?!0:be.addedDocuments.size+be.modifiedDocuments.size+be.removedDocuments.size>0})(A,H,P)&&v.push(t.li.updateTargetData(c,H))}));let E=qs(),x=at();if(e.documentUpdates.forEach((P=>{e.resolvedLimboDocuments.has(P)&&v.push(t.persistence.referenceDelegate.updateLimboDocument(c,P))})),v.push(ZP(c,m,e.documentUpdates).next((P=>{E=P.Bs,x=P.Ls}))),!s.isEqual(Qe.min())){const P=t.li.getLastRemoteSnapshotVersion(c).next((I=>t.li.setTargetsMetadata(c,c.currentSequenceNumber,s)));v.push(P)}return se.waitFor(v).next((()=>m.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,E,x))).next((()=>E))})).then((c=>(t.vs=a,c)))}function ZP(r,e,t){let s=at(),a=at();return t.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let m=qs();return t.forEach(((v,E)=>{const x=c.get(v);E.isFoundDocument()!==x.isFoundDocument()&&(a=a.add(v)),E.isNoDocument()&&E.version.isEqual(Qe.min())?(e.removeEntry(v,E.readTime),m=m.insert(v,E)):!x.isValidDocument()||E.version.compareTo(x.version)>0||E.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(E),m=m.insert(v,E)):Pe(bm,"Ignoring outdated watch update for ",v,". Current version:",x.version," Watch version:",E.version)})),{Bs:m,Ls:a}}))}function KP(r,e){const t=Ke(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=mm),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function QP(r,e){const t=Ke(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.li.getTargetData(s,e).next((c=>c?(a=c,se.resolve(a)):t.li.allocateTargetId(s).next((m=>(a=new Vo(e,m,"TargetPurposeListen",s.currentSequenceNumber),t.li.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.vs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(s.targetId,s),t.Fs.set(e,s.targetId)),s}))}async function Xf(r,e,t){const s=Ke(r),a=s.vs.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,(m=>s.persistence.referenceDelegate.removeTarget(m,a)))}catch(m){if(!Bl(m))throw m;Pe(bm,`Failed to update sequence numbers for target ${e}: ${m}`)}s.vs=s.vs.remove(e),s.Fs.delete(a.target)}function q_(r,e,t){const s=Ke(r);let a=Qe.min(),c=at();return s.persistence.runTransaction("Execute query","readwrite",(m=>(function(E,x,P){const I=Ke(E),A=I.Fs.get(P);return A!==void 0?se.resolve(I.vs.get(A)):I.li.getTargetData(x,P)})(s,m,rs(e)).next((v=>{if(v)return a=v.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(m,v.targetId).next((E=>{c=E}))})).next((()=>s.Cs.getDocumentsMatchingQuery(m,e,t?a:Qe.min(),t?c:at()))).next((v=>(YP(s,DS(e),v),{documents:v,ks:c})))))}function YP(r,e,t){let s=r.Ms.get(e)||Qe.min();t.forEach(((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Ms.set(e,s)}class $_{constructor(){this.activeTargetIds=BS()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XP{constructor(){this.vo=new $_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,s){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new $_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="ConnectivityMonitor";class Z_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Pe(G_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Pe(G_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rh=null;function Jf(){return rh===null?rh=(function(){return 268435456+Math.round(2147483648*Math.random())})():rh++,"0x"+rh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf="RestConnection",eb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class tb{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${s}/databases/${a}`,this.$o=this.databaseId.database===vh?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Wo(e,t,s,a,c){const m=Jf(),v=this.Qo(e,t.toUriEncodedString());Pe(bf,`Sending RPC '${e}' ${m}:`,v,s);const E={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(E,a,c);const{host:x}=new URL(v),P=Vl(x);return this.zo(e,v,E,s,P).then((I=>(Pe(bf,`Received RPC '${e}' ${m}: `,I),I)),(I=>{throw Al(bf,`RPC '${e}' ${m} failed with error: `,I,"url: ",v,"request:",s),I}))}jo(e,t,s,a,c,m){return this.Wo(e,t,s,a,c)}Go(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Fl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,c)=>e[c]=a)),s&&s.headers.forEach(((a,c)=>e[c]=a))}Qo(e,t){const s=eb[e];let a=`${this.qo}/v1/${t}:${s}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un="WebChannelConnection",vu=(r,e,t)=>{r.listen(e,(s=>{try{t(s)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Tl extends tb{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Tl.c_){const e=av();vu(e,ov.STAT_EVENT,(t=>{t.stat===jf.PROXY?Pe(Un,"STAT_EVENT: detected buffering proxy"):t.stat===jf.NOPROXY&&Pe(Un,"STAT_EVENT: detected no buffering proxy")})),Tl.c_=!0}}zo(e,t,s,a,c){const m=Jf();return new Promise(((v,E)=>{const x=new iv;x.setWithCredentials(!0),x.listenOnce(sv.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case sh.NO_ERROR:const I=x.getResponseJson();Pe(Un,`XHR for RPC '${e}' ${m} received:`,JSON.stringify(I)),v(I);break;case sh.TIMEOUT:Pe(Un,`RPC '${e}' ${m} timed out`),E(new Se(ie.DEADLINE_EXCEEDED,"Request time out"));break;case sh.HTTP_ERROR:const A=x.getStatus();if(Pe(Un,`RPC '${e}' ${m} failed with status:`,A,"response text:",x.getResponseText()),A>0){let H=x.getResponseJson();Array.isArray(H)&&(H=H[0]);const Z=H==null?void 0:H.error;if(Z&&Z.status&&Z.message){const ne=(function(be){const pe=be.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(pe)>=0?pe:ie.UNKNOWN})(Z.status);E(new Se(ne,Z.message))}else E(new Se(ie.UNKNOWN,"Server responded with status "+x.getStatus()))}else E(new Se(ie.UNAVAILABLE,"Connection failed."));break;default:We(9055,{l_:e,streamId:m,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{Pe(Un,`RPC '${e}' ${m} completed.`)}}));const P=JSON.stringify(a);Pe(Un,`RPC '${e}' ${m} sending request:`,a),x.send(t,"POST",P,s,15)}))}T_(e,t,s){const a=Jf(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=this.createWebChannelTransport(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(v.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(v.useFetchStreams=!0),this.Go(v.initMessageHeaders,t,s),v.encodeInitMessageHeaders=!0;const x=c.join("");Pe(Un,`Creating RPC '${e}' stream ${a}: ${x}`,v);const P=m.createWebChannel(x,v);this.I_(P);let I=!1,A=!1;const H=new nb({Ho:Z=>{A?Pe(Un,`Not sending because RPC '${e}' stream ${a} is closed:`,Z):(I||(Pe(Un,`Opening RPC '${e}' stream ${a} transport.`),P.open(),I=!0),Pe(Un,`RPC '${e}' stream ${a} sending:`,Z),P.send(Z))},Jo:()=>P.close()});return vu(P,Eu.EventType.OPEN,(()=>{A||(Pe(Un,`RPC '${e}' stream ${a} transport opened.`),H.i_())})),vu(P,Eu.EventType.CLOSE,(()=>{A||(A=!0,Pe(Un,`RPC '${e}' stream ${a} transport closed`),H.o_(),this.E_(P))})),vu(P,Eu.EventType.ERROR,(Z=>{A||(A=!0,Al(Un,`RPC '${e}' stream ${a} transport errored. Name:`,Z.name,"Message:",Z.message),H.o_(new Se(ie.UNAVAILABLE,"The operation could not be completed")))})),vu(P,Eu.EventType.MESSAGE,(Z=>{var ne;if(!A){const ee=Z.data[0];yt(!!ee,16349);const be=ee,pe=(be==null?void 0:be.error)||((ne=be[0])==null?void 0:ne.error);if(pe){Pe(Un,`RPC '${e}' stream ${a} received error:`,pe);const he=pe.status;let Me=(function(j){const R=tn[j];if(R!==void 0)return qv(R)})(he),He=pe.message;Me===void 0&&(Me=ie.INTERNAL,He="Unknown error status: "+he+" with message "+pe.message),A=!0,H.o_(new Se(Me,He)),P.close()}else Pe(Un,`RPC '${e}' stream ${a} received:`,ee),H.__(ee)}})),Tl.u_(),setTimeout((()=>{H.s_()}),0),H}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,s){super.Go(e,t,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return lv()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(r){return new Tl(r)}function Cf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(r){return new aP(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tl.c_=!1;class a0{constructor(e,t,s=1e3,a=1.5,c=6e4){this.Ci=e,this.timerId=t,this.R_=s,this.A_=a,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&Pe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="PersistentStream";class l0{constructor(e,t,s,a,c,m,v,E){this.Ci=e,this.b_=s,this.S_=a,this.connection=c,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=v,this.listener=E,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new a0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Hs(t.toString()),Hs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new Se(ie.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Pe(K_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Pe(K_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ib extends l0{constructor(e,t,s,a,c,m){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,m),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=cP(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Qe.min();const m=c.targetChange;return m.targetIds&&m.targetIds.length?Qe.min():m.readTime?ss(m.readTime):Qe.min()})(e);return this.listener.J_(t,s)}Z_(e){const t={};t.database=Yf(this.serializer),t.addTarget=(function(c,m){let v;const E=m.target;if(v=qf(E)?{documents:fP(c,E)}:{query:Xv(c,E).ft},v.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){v.resumeToken=Zv(c,m.resumeToken);const x=Zf(c,m.expectedCount);x!==null&&(v.expectedCount=x)}else if(m.snapshotVersion.compareTo(Qe.min())>0){v.readTime=xh(c,m.snapshotVersion.toTimestamp());const x=Zf(c,m.expectedCount);x!==null&&(v.expectedCount=x)}return v})(this.serializer,e);const s=gP(this.serializer,e);s&&(t.labels=s),this.K_(t)}X_(e){const t={};t.database=Yf(this.serializer),t.removeTarget=e,this.K_(t)}}class sb extends l0{constructor(e,t,s,a,c,m){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,m),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return yt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,yt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){yt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=dP(e.writeResults,e.commitTime),s=ss(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Yf(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>hP(this.serializer,s)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{}class ab extends ob{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Se(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Wo(e,Kf(t,s),a,c,m))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Se(ie.UNKNOWN,c.toString())}))}jo(e,t,s,a,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,v])=>this.connection.jo(e,Kf(t,s),a,m,v,c))).catch((m=>{throw m.name==="FirebaseError"?(m.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Se(ie.UNKNOWN,m.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function lb(r,e,t,s){return new ab(r,e,t,s)}class ub{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Hs(t),this.aa=!1):Pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="RemoteStore";class cb{constructor(e,t,s,a,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((m=>{s.enqueueAndForget((async()=>{ja(this)&&(Pe(Oa,"Restarting streams for network reachability change."),await(async function(E){const x=Ke(E);x.Ea.add(4),await Gu(x),x.Va.set("Unknown"),x.Ea.delete(4),await Zh(x)})(this))}))})),this.Va=new ub(s,a)}}async function Zh(r){if(ja(r))for(const e of r.Ra)await e(!0)}async function Gu(r){for(const e of r.Ra)await e(!1)}function u0(r,e){const t=Ke(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Rm(t)?km(t):Wl(t).O_()&&Am(t,e))}function Cm(r,e){const t=Ke(r),s=Wl(t);t.Ia.delete(e),s.O_()&&c0(t,e),t.Ia.size===0&&(s.O_()?s.L_():ja(t)&&t.Va.set("Unknown"))}function Am(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wl(r).Z_(e)}function c0(r,e){r.da.$e(e),Wl(r).X_(e)}function km(r){r.da=new rP({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Wl(r).start(),r.Va.ua()}function Rm(r){return ja(r)&&!Wl(r).x_()&&r.Ia.size>0}function ja(r){return Ke(r).Ea.size===0}function h0(r){r.da=void 0}async function hb(r){r.Va.set("Online")}async function db(r){r.Ia.forEach(((e,t)=>{Am(r,e)}))}async function fb(r,e){h0(r),Rm(r)?(r.Va.ha(e),km(r)):r.Va.set("Unknown")}async function mb(r,e,t){if(r.Va.set("Online"),e instanceof Gv&&e.state===2&&e.cause)try{await(async function(a,c){const m=c.cause;for(const v of c.targetIds)a.Ia.has(v)&&(await a.remoteSyncer.rejectListen(v,m),a.Ia.delete(v),a.da.removeTarget(v))})(r,e)}catch(s){Pe(Oa,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Sh(r,s)}else if(e instanceof uh?r.da.Xe(e):e instanceof $v?r.da.st(e):r.da.tt(e),!t.isEqual(Qe.min()))try{const s=await o0(r.localStore);t.compareTo(s)>=0&&await(function(c,m){const v=c.da.Tt(m);return v.targetChanges.forEach(((E,x)=>{if(E.resumeToken.approximateByteSize()>0){const P=c.Ia.get(x);P&&c.Ia.set(x,P.withResumeToken(E.resumeToken,m))}})),v.targetMismatches.forEach(((E,x)=>{const P=c.Ia.get(E);if(!P)return;c.Ia.set(E,P.withResumeToken(kn.EMPTY_BYTE_STRING,P.snapshotVersion)),c0(c,E);const I=new Vo(P.target,E,x,P.sequenceNumber);Am(c,I)})),c.remoteSyncer.applyRemoteEvent(v)})(r,t)}catch(s){Pe(Oa,"Failed to raise snapshot:",s),await Sh(r,s)}}async function Sh(r,e,t){if(!Bl(e))throw e;r.Ea.add(1),await Gu(r),r.Va.set("Offline"),t||(t=()=>o0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Pe(Oa,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Zh(r)}))}function d0(r,e){return e().catch((t=>Sh(r,t,e)))}async function Kh(r){const e=Ke(r),t=Zo(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:mm;for(;pb(e);)try{const a=await KP(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,gb(e,a)}catch(a){await Sh(e,a)}f0(e)&&m0(e)}function pb(r){return ja(r)&&r.Ta.length<10}function gb(r,e){r.Ta.push(e);const t=Zo(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function f0(r){return ja(r)&&!Zo(r).x_()&&r.Ta.length>0}function m0(r){Zo(r).start()}async function _b(r){Zo(r).ra()}async function yb(r){const e=Zo(r);for(const t of r.Ta)e.ea(t.mutations)}async function vb(r,e,t){const s=r.Ta.shift(),a=Em.from(s,e,t);await d0(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await Kh(r)}async function wb(r,e){e&&Zo(r).Y_&&await(async function(s,a){if((function(m){return eP(m)&&m!==ie.ABORTED})(a.code)){const c=s.Ta.shift();Zo(s).B_(),await d0(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a))),await Kh(s)}})(r,e),f0(r)&&m0(r)}async function Q_(r,e){const t=Ke(r);t.asyncQueue.verifyOperationInProgress(),Pe(Oa,"RemoteStore received new credentials");const s=ja(t);t.Ea.add(3),await Gu(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Zh(t)}async function Eb(r,e){const t=Ke(r);e?(t.Ea.delete(2),await Zh(t)):e||(t.Ea.add(2),await Gu(t),t.Va.set("Unknown"))}function Wl(r){return r.ma||(r.ma=(function(t,s,a){const c=Ke(t);return c.sa(),new ib(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(r.datastore,r.asyncQueue,{Zo:hb.bind(null,r),Yo:db.bind(null,r),t_:fb.bind(null,r),J_:mb.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),Rm(r)?km(r):r.Va.set("Unknown")):(await r.ma.stop(),h0(r))}))),r.ma}function Zo(r){return r.fa||(r.fa=(function(t,s,a){const c=Ke(t);return c.sa(),new sb(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:_b.bind(null,r),t_:wb.bind(null,r),ta:yb.bind(null,r),na:vb.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await Kh(r)):(await r.fa.stop(),r.Ta.length>0&&(Pe(Oa,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,t,s,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new Uo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((m=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,c){const m=Date.now()+s,v=new Nm(e,t,m,a,c);return v.start(s),v}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lm(r,e){if(Hs("AsyncQueue",`${e}: ${r}`),Bl(r))return new Se(ie.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{static emptySet(e){return new xl(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Le.comparator(t.key,s.key):(t,s)=>Le.comparator(t.key,s.key),this.keyedMap=Tu(),this.sortedSet=new Bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new xl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(){this.ga=new Bt(Le.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):We(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Ml{constructor(e,t,s,a,c,m,v,E,x){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=m,this.syncStateChanged=v,this.excludesMetadataChanges=E,this.hasCachedResults=x}static fromInitialDocuments(e,t,s,a,c){const m=[];return t.forEach((v=>{m.push({type:0,doc:v})})),new Ml(e,t,xl.emptySet(t),m,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class xb{constructor(){this.queries=X_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=Ke(t),c=a.queries;a.queries=X_(),c.forEach(((m,v)=>{for(const E of v.ba)E.onError(s)}))})(this,new Se(ie.ABORTED,"Firestore shutting down"))}}function X_(){return new Fa((r=>Rv(r)),Uh)}async function Ib(r,e){const t=Ke(r);let s=3;const a=e.query;let c=t.queries.get(a);c?!c.Sa()&&e.Da()&&(s=2):(c=new Tb,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await t.onListen(a,!0);break;case 1:c.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(m){const v=Lm(m,`Initialization of query '${yl(e.query)}' failed`);return void e.onError(v)}t.queries.set(a,c),c.ba.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Mm(t)}async function Sb(r,e){const t=Ke(r),s=e.query;let a=3;const c=t.queries.get(s);if(c){const m=c.ba.indexOf(e);m>=0&&(c.ba.splice(m,1),c.ba.length===0?a=e.Da()?0:1:!c.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function Pb(r,e){const t=Ke(r);let s=!1;for(const a of e){const c=a.query,m=t.queries.get(c);if(m){for(const v of m.ba)v.Fa(a)&&(s=!0);m.wa=a}}s&&Mm(t)}function bb(r,e,t){const s=Ke(r),a=s.queries.get(e);if(a)for(const c of a.ba)c.onError(t);s.queries.delete(e)}function Mm(r){r.Ca.forEach((e=>{e.next()}))}var em,J_;(J_=em||(em={})).Ma="default",J_.Cache="cache";class Cb{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Ml(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==em.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e){this.key=e}}class g0{constructor(e){this.key=e}}class Ab{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=at(),this.mutatedKeys=at(),this.eu=Nv(e),this.tu=new xl(this.eu)}get nu(){return this.Za}ru(e,t){const s=t?t.iu:new Y_,a=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,m=a,v=!1;const E=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,x=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((P,I)=>{const A=a.get(P),H=Wh(this.query,I)?I:null,Z=!!A&&this.mutatedKeys.has(A.key),ne=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let ee=!1;A&&H?A.data.isEqual(H.data)?Z!==ne&&(s.track({type:3,doc:H}),ee=!0):this.su(A,H)||(s.track({type:2,doc:H}),ee=!0,(E&&this.eu(H,E)>0||x&&this.eu(H,x)<0)&&(v=!0)):!A&&H?(s.track({type:0,doc:H}),ee=!0):A&&!H&&(s.track({type:1,doc:A}),ee=!0,(E||x)&&(v=!0)),ee&&(H?(m=m.add(H),c=ne?c.add(P):c.delete(P)):(m=m.delete(P),c=c.delete(P)))})),this.query.limit!==null)for(;m.size>this.query.limit;){const P=this.query.limitType==="F"?m.last():m.first();m=m.delete(P.key),c=c.delete(P.key),s.track({type:1,doc:P})}return{tu:m,iu:s,Ss:v,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const m=e.iu.ya();m.sort(((P,I)=>(function(H,Z){const ne=ee=>{switch(ee){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return We(20277,{Vt:ee})}};return ne(H)-ne(Z)})(P.type,I.type)||this.eu(P.doc,I.doc))),this.ou(s),a=a??!1;const v=t&&!a?this._u():[],E=this.Ya.size===0&&this.current&&!a?1:0,x=E!==this.Xa;return this.Xa=E,m.length!==0||x?{snapshot:new Ml(this.query,e.tu,c,m,e.mutatedKeys,E===0,x,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:v}:{au:v}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Y_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=at(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const t=[];return e.forEach((s=>{this.Ya.has(s)||t.push(new g0(s))})),this.Ya.forEach((s=>{e.has(s)||t.push(new p0(s))})),t}cu(e){this.Za=e.ks,this.Ya=at();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ml.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Dm="SyncEngine";class kb{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Rb{constructor(e){this.key=e,this.hu=!1}}class Nb{constructor(e,t,s,a,c,m){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=m,this.Pu={},this.Tu=new Fa((v=>Rv(v)),Uh),this.Iu=new Map,this.Eu=new Set,this.Ru=new Bt(Le.comparator),this.Au=new Map,this.Vu=new Im,this.du={},this.mu=new Map,this.fu=Ll.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Lb(r,e,t=!0){const s=T0(r);let a;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.lu()):a=await _0(s,e,t,!0),a}async function Mb(r,e){const t=T0(r);await _0(t,e,!0,!1)}async function _0(r,e,t,s){const a=await QP(r.localStore,rs(e)),c=a.targetId,m=r.sharedClientState.addLocalQueryTarget(c,t);let v;return s&&(v=await Db(r,e,c,m==="current",a.resumeToken)),r.isPrimaryClient&&t&&u0(r.remoteStore,a),v}async function Db(r,e,t,s,a){r.pu=(I,A,H)=>(async function(ne,ee,be,pe){let he=ee.view.ru(be);he.Ss&&(he=await q_(ne.localStore,ee.query,!1).then((({documents:j})=>ee.view.ru(j,he))));const Me=pe&&pe.targetChanges.get(ee.targetId),He=pe&&pe.targetMismatches.get(ee.targetId)!=null,Ne=ee.view.applyChanges(he,ne.isPrimaryClient,Me,He);return ty(ne,ee.targetId,Ne.au),Ne.snapshot})(r,I,A,H);const c=await q_(r.localStore,e,!0),m=new Ab(e,c.ks),v=m.ru(c.documents),E=$u.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",a),x=m.applyChanges(v,r.isPrimaryClient,E);ty(r,t,x.au);const P=new kb(e,t,m);return r.Tu.set(e,P),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),x.snapshot}async function Ob(r,e,t){const s=Ke(r),a=s.Tu.get(e),c=s.Iu.get(a.targetId);if(c.length>1)return s.Iu.set(a.targetId,c.filter((m=>!Uh(m,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Xf(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&Cm(s.remoteStore,a.targetId),tm(s,a.targetId)})).catch(jl)):(tm(s,a.targetId),await Xf(s.localStore,a.targetId,!0))}async function Vb(r,e){const t=Ke(r),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Cm(t.remoteStore,s.targetId))}async function zb(r,e,t){const s=qb(r);try{const a=await(function(m,v){const E=Ke(m),x=kt.now(),P=v.reduce(((H,Z)=>H.add(Z.key)),at());let I,A;return E.persistence.runTransaction("Locally write mutations","readwrite",(H=>{let Z=qs(),ne=at();return E.xs.getEntries(H,P).next((ee=>{Z=ee,Z.forEach(((be,pe)=>{pe.isValidDocument()||(ne=ne.add(be))}))})).next((()=>E.localDocuments.getOverlayedDocuments(H,Z))).next((ee=>{I=ee;const be=[];for(const pe of v){const he=ZS(pe,I.get(pe.key).overlayedDocument);he!=null&&be.push(new Yo(pe.key,he,Tv(he.value.mapValue),is.exists(!0)))}return E.mutationQueue.addMutationBatch(H,x,be,v)})).next((ee=>{A=ee;const be=ee.applyToLocalDocumentSet(I,ne);return E.documentOverlayCache.saveOverlays(H,ee.batchId,be)}))})).then((()=>({batchId:A.batchId,changes:Mv(I)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(m,v,E){let x=m.du[m.currentUser.toKey()];x||(x=new Bt(ot)),x=x.insert(v,E),m.du[m.currentUser.toKey()]=x})(s,a.batchId,t),await Zu(s,a.changes),await Kh(s.remoteStore)}catch(a){const c=Lm(a,"Failed to persist write");t.reject(c)}}async function y0(r,e){const t=Ke(r);try{const s=await GP(t.localStore,e);e.targetChanges.forEach(((a,c)=>{const m=t.Au.get(c);m&&(yt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?m.hu=!0:a.modifiedDocuments.size>0?yt(m.hu,14607):a.removedDocuments.size>0&&(yt(m.hu,42227),m.hu=!1))})),await Zu(t,s,e)}catch(s){await jl(s)}}function ey(r,e,t){const s=Ke(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((c,m)=>{const v=m.view.va(e);v.snapshot&&a.push(v.snapshot)})),(function(m,v){const E=Ke(m);E.onlineState=v;let x=!1;E.queries.forEach(((P,I)=>{for(const A of I.ba)A.va(v)&&(x=!0)})),x&&Mm(E)})(s.eventManager,e),a.length&&s.Pu.J_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Fb(r,e,t){const s=Ke(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),c=a&&a.key;if(c){let m=new Bt(Le.comparator);m=m.insert(c,Hn.newNoDocument(c,Qe.min()));const v=at().add(c),E=new $h(Qe.min(),new Map,new Bt(ot),m,v);await y0(s,E),s.Ru=s.Ru.remove(c),s.Au.delete(e),Om(s)}else await Xf(s.localStore,e,!1).then((()=>tm(s,e,t))).catch(jl)}async function jb(r,e){const t=Ke(r),s=e.batch.batchId;try{const a=await $P(t.localStore,e);w0(t,s,null),v0(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Zu(t,a)}catch(a){await jl(a)}}async function Bb(r,e,t){const s=Ke(r);try{const a=await(function(m,v){const E=Ke(m);return E.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let P;return E.mutationQueue.lookupMutationBatch(x,v).next((I=>(yt(I!==null,37113),P=I.keys(),E.mutationQueue.removeMutationBatch(x,I)))).next((()=>E.mutationQueue.performConsistencyCheck(x))).next((()=>E.documentOverlayCache.removeOverlaysForBatchId(x,P,v))).next((()=>E.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,P))).next((()=>E.localDocuments.getDocuments(x,P)))}))})(s.localStore,e);w0(s,e,t),v0(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Zu(s,a)}catch(a){await jl(a)}}function v0(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function w0(r,e,t){const s=Ke(r);let a=s.du[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),s.du[s.currentUser.toKey()]=a}}function tm(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((s=>{r.Vu.containsKey(s)||E0(r,s)}))}function E0(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(Cm(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),Om(r))}function ty(r,e,t){for(const s of t)s instanceof p0?(r.Vu.addReference(s.key,e),Ub(r,s)):s instanceof g0?(Pe(Dm,"Document no longer in limbo: "+s.key),r.Vu.removeReference(s.key,e),r.Vu.containsKey(s.key)||E0(r,s.key)):We(19791,{wu:s})}function Ub(r,e){const t=e.key,s=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(s)||(Pe(Dm,"New document in limbo: "+t),r.Eu.add(s),Om(r))}function Om(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Le(At.fromString(e)),s=r.fu.next();r.Au.set(s,new Rb(t)),r.Ru=r.Ru.insert(t,s),u0(r.remoteStore,new Vo(rs(vm(t.path)),s,"TargetPurposeLimboResolution",Fh.ce))}}async function Zu(r,e,t){const s=Ke(r),a=[],c=[],m=[];s.Tu.isEmpty()||(s.Tu.forEach(((v,E)=>{m.push(s.pu(E,e,t).then((x=>{var P;if((x||t)&&s.isPrimaryClient){const I=x?!x.fromCache:(P=t==null?void 0:t.targetChanges.get(E.targetId))==null?void 0:P.current;s.sharedClientState.updateQueryState(E.targetId,I?"current":"not-current")}if(x){a.push(x);const I=Pm.Es(E.targetId,x);c.push(I)}})))})),await Promise.all(m),s.Pu.J_(a),await(async function(E,x){const P=Ke(E);try{await P.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>se.forEach(x,(A=>se.forEach(A.Ts,(H=>P.persistence.referenceDelegate.addReference(I,A.targetId,H))).next((()=>se.forEach(A.Is,(H=>P.persistence.referenceDelegate.removeReference(I,A.targetId,H)))))))))}catch(I){if(!Bl(I))throw I;Pe(bm,"Failed to update sequence numbers: "+I)}for(const I of x){const A=I.targetId;if(!I.fromCache){const H=P.vs.get(A),Z=H.snapshotVersion,ne=H.withLastLimboFreeSnapshotVersion(Z);P.vs=P.vs.insert(A,ne)}}})(s.localStore,c))}async function Wb(r,e){const t=Ke(r);if(!t.currentUser.isEqual(e)){Pe(Dm,"User change. New user:",e.toKey());const s=await s0(t.localStore,e);t.currentUser=e,(function(c,m){c.mu.forEach((v=>{v.forEach((E=>{E.reject(new Se(ie.CANCELLED,m))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Zu(t,s.Ns)}}function Hb(r,e){const t=Ke(r),s=t.Au.get(e);if(s&&s.hu)return at().add(s.key);{let a=at();const c=t.Iu.get(e);if(!c)return a;for(const m of c){const v=t.Tu.get(m);a=a.unionWith(v.view.nu)}return a}}function T0(r){const e=Ke(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=y0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Fb.bind(null,e),e.Pu.J_=Pb.bind(null,e.eventManager),e.Pu.yu=bb.bind(null,e.eventManager),e}function qb(r){const e=Ke(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Bb.bind(null,e),e}class Ph{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return qP(this.persistence,new UP,e.initialUser,this.serializer)}Cu(e){return new i0(Sm.Vi,this.serializer)}Du(e){return new XP}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ph.provider={build:()=>new Ph};class $b extends Ph{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){yt(this.persistence.referenceDelegate instanceof Ih,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new bP(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Cr.withCacheSize(this.cacheSizeBytes):Cr.DEFAULT;return new i0((s=>Ih.Vi(s,t)),this.serializer)}}class nm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>ey(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Wb.bind(null,this.syncEngine),await Eb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new xb})()}createDatastore(e){const t=Gh(e.databaseInfo.databaseId),s=rb(e.databaseInfo);return lb(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,c,m,v){return new cb(s,a,c,m,v)})(this.localStore,this.datastore,e.asyncQueue,(t=>ey(this.syncEngine,t,0)),(function(){return Z_.v()?new Z_:new JP})())}createSyncEngine(e,t){return(function(a,c,m,v,E,x,P){const I=new Nb(a,c,m,v,E,x);return P&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const c=Ke(a);Pe(Oa,"RemoteStore shutting down."),c.Ea.add(5),await Gu(c),c.Aa.shutdown(),c.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}nm.provider={build:()=>new nm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Hs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko="FirestoreClient";class Zb{constructor(e,t,s,a,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this._databaseInfo=a,this.user=Wn.UNAUTHENTICATED,this.clientId=fm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async m=>{Pe(Ko,"Received user=",m.uid),await this.authCredentialListener(m),this.user=m})),this.appCheckCredentials.start(s,(m=>(Pe(Ko,"Received new app check token=",m),this.appCheckCredentialListener(m,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Uo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Lm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Af(r,e){r.asyncQueue.verifyOperationInProgress(),Pe(Ko,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async a=>{s.isEqual(a)||(await s0(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function ny(r,e){r.asyncQueue.verifyOperationInProgress();const t=await Kb(r);Pe(Ko,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>Q_(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,a)=>Q_(e.remoteStore,a))),r._onlineComponents=e}async function Kb(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Pe(Ko,"Using user provided OfflineComponentProvider");try{await Af(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ie.FAILED_PRECONDITION||a.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Al("Error using user provided cache. Falling back to memory cache: "+t),await Af(r,new Ph)}}else Pe(Ko,"Using default OfflineComponentProvider"),await Af(r,new $b(void 0));return r._offlineComponents}async function Vm(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Pe(Ko,"Using user provided OnlineComponentProvider"),await ny(r,r._uninitializedComponentsProvider._online)):(Pe(Ko,"Using default OnlineComponentProvider"),await ny(r,new nm))),r._onlineComponents}function Qb(r){return Vm(r).then((e=>e.syncEngine))}function Yb(r){return Vm(r).then((e=>e.datastore))}async function ry(r){const e=await Vm(r),t=e.eventManager;return t.onListen=Lb.bind(null,e.syncEngine),t.onUnlisten=Ob.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Mb.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Vb.bind(null,e.syncEngine),t}function Xb(r,e,t,s){const a=new Gb(s),c=new Cb(e,a,t);return r.asyncQueue.enqueueAndForget((async()=>Ib(await ry(r),c))),()=>{a.Nu(),r.asyncQueue.enqueueAndForget((async()=>Sb(await ry(r),c)))}}function Jb(r,e,t){const s=new Uo;return r.asyncQueue.enqueueAndForget((async()=>{try{const a=await Yb(r);s.resolve((async function(m,v,E){var ne;const x=Ke(m),{request:P,gt:I,parent:A}=mP(x.serializer,LS(v),E);x.connection.Ko||delete P.parent;const H=(await x.jo("RunAggregationQuery",x.serializer.databaseId,A,P,1)).filter((ee=>!!ee.result));yt(H.length===1,64727);const Z=(ne=H[0].result)==null?void 0:ne.aggregateFields;return Object.keys(Z).reduce(((ee,be)=>(ee[I[be]]=Z[be],ee)),{})})(a,e,t))}catch(a){s.reject(a)}})),s.promise}function eC(r,e){const t=new Uo;return r.asyncQueue.enqueueAndForget((async()=>zb(await Qb(r),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="ComponentProvider",iy=new Map;function nC(r,e,t,s,a){return new gS(r,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,x0(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="firestore.googleapis.com",sy=!0;class oy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Se(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=I0,this.ssl=sy}else this.host=e.host,this.ssl=e.ssl??sy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=r0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SP)throw new Se(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=x0(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Se(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Se(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Se(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qh{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new ZI;switch(s.type){case"firstParty":return new XI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Se(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=iy.get(t);s&&(Pe(tC,"Removing Datastore"),iy.delete(t),s.terminate())})(this),Promise.resolve()}}function rC(r,e,t,s={}){var x;r=Us(r,Qh);const a=Vl(e),c=r._getSettings(),m={...c,emulatorOptions:r._getEmulatorOptions()},v=`${e}:${t}`;a&&(Ky(`https://${v}`),Qy("Firestore",!0)),c.host!==I0&&c.host!==v&&Al("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const E={...c,host:v,ssl:a,emulatorOptions:s};if(!La(E,m)&&(r._setSettings(E),s.mockUserToken)){let P,I;if(typeof s.mockUserToken=="string")P=s.mockUserToken,I=Wn.MOCK_USER;else{P=yx(s.mockUserToken,(x=r._app)==null?void 0:x.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new Se(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new Wn(A)}r._authCredentials=new KI(new cv(P,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ba(this.firestore,e,this._query)}}class Qt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}toJSON(){return{type:Qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Hu(t,Qt._jsonSchema))return new Qt(e,s||null,new Le(At.fromString(t.referencePath)))}}Qt._jsonSchemaVersion="firestore/documentReference/1.0",Qt._jsonSchema={type:rn("string",Qt._jsonSchemaVersion),referencePath:rn("string")};class Wo extends Ba{constructor(e,t,s){super(e,t,vm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new Le(e))}withConverter(e){return new Wo(this.firestore,e,this._path)}}function S0(r,e,...t){if(r=An(r),hv("collection","path",e),r instanceof Qh){const s=At.fromString(e,...t);return y_(s),new Wo(r,null,s)}{if(!(r instanceof Qt||r instanceof Wo))throw new Se(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(At.fromString(e,...t));return y_(s),new Wo(r.firestore,null,s)}}function zm(r,e,...t){if(r=An(r),arguments.length===1&&(e=fm.newId()),hv("doc","path",e),r instanceof Qh){const s=At.fromString(e,...t);return __(s),new Qt(r,null,new Le(s))}{if(!(r instanceof Qt||r instanceof Wo))throw new Se(ie.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(At.fromString(e,...t));return __(s),new Qt(r.firestore,r instanceof Wo?r.converter:null,new Le(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay="AsyncQueue";class ly{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new a0(this,"async_queue_retry"),this._c=()=>{const s=Cf();s&&Pe(ay,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Cf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Cf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Uo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Bl(e))throw e;Pe(ay,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Hs("INTERNAL UNHANDLED ERROR: ",uy(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Nm.createAndSchedule(this,e,t,s,(c=>this.hc(c)));return this.tc.push(a),a}uc(){this.nc&&We(47125,{Pc:uy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function uy(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Dl extends Qh{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new ly,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ly(e),this._firestoreClient=void 0,await e}}}function iC(r,e){const t=typeof r=="object"?r:ev(),s=typeof r=="string"?r:vh,a=hm(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=gx("firestore");c&&rC(a,...c)}return a}function Fm(r){if(r._terminated)throw new Se(ie.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||sC(r),r._firestoreClient}function sC(r){var s,a,c,m;const e=r._freezeSettings(),t=nC(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,(a=r._app)==null?void 0:a.options.apiKey,e);r._componentsProvider||(c=e.localCache)!=null&&c._offlineComponentProvider&&((m=e.localCache)!=null&&m._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new Zb(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(E){const x=E==null?void 0:E._online.build();return{_offline:E==null?void 0:E._offline.build(x),_online:x}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pi(kn.fromBase64String(e))}catch(t){throw new Se(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pi(kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:pi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Hu(e,pi._jsonSchema))return pi.fromBase64String(e.bytes)}}pi._jsonSchemaVersion="firestore/bytes/1.0",pi._jsonSchema={type:rn("string",pi._jsonSchemaVersion),bytes:rn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Se(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ot(this._lat,e._lat)||ot(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:os._jsonSchemaVersion}}static fromJSON(e){if(Hu(e,os._jsonSchema))return new os(e.latitude,e.longitude)}}os._jsonSchemaVersion="firestore/geoPoint/1.0",os._jsonSchema={type:rn("string",os._jsonSchemaVersion),latitude:rn("number"),longitude:rn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ki._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Hu(e,ki._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ki(e.vectorValues);throw new Se(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ki._jsonSchemaVersion="firestore/vectorValue/1.0",ki._jsonSchema={type:rn("string",ki._jsonSchemaVersion),vectorValues:rn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=/^__.*__$/;class aC{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Yo(e,this.data,this.fieldMask,t,this.fieldTransforms):new qu(e,this.data,t,this.fieldTransforms)}}class P0{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Yo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function b0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw We(40011,{dataSource:r})}}class Bm{constructor(e,t,s,a,c,m){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=m||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Bm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return bh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(b0(this.dataSource)&&oC.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class lC{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Gh(e)}createContext(e,t,s,a=!1){return new Bm({dataSource:e,methodName:t,targetDoc:s,path:Cn.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Um(r){const e=r._freezeSettings(),t=Gh(r._databaseId);return new lC(r._databaseId,!!e.ignoreUndefinedProperties,t)}function uC(r,e,t,s,a,c={}){const m=r.createContext(c.merge||c.mergeFields?2:0,e,t,a);Hm("Data must be an object, but it was:",m,s);const v=C0(s,m);let E,x;if(c.merge)E=new Br(m.fieldMask),x=m.fieldTransforms;else if(c.mergeFields){const P=[];for(const I of c.mergeFields){const A=Va(e,I,t);if(!m.contains(A))throw new Se(ie.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);R0(P,A)||P.push(A)}E=new Br(P),x=m.fieldTransforms.filter((I=>E.covers(I.field)))}else E=null,x=m.fieldTransforms;return new aC(new sr(v),E,x)}class Xh extends Yh{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xh}}class Wm extends Yh{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new ju(e.serializer,Vv(e.serializer,this.Vc));return new HS(e.path,t)}isEqual(e){return e instanceof Wm&&this.Vc===e.Vc}}function cC(r,e,t,s){const a=r.createContext(1,e,t);Hm("Data must be an object, but it was:",a,s);const c=[],m=sr.empty();Qo(s,((E,x)=>{const P=k0(e,E,t);x=An(x);const I=a.childContextForFieldPath(P);if(x instanceof Xh)c.push(P);else{const A=Ku(x,I);A!=null&&(c.push(P),m.set(P,A))}}));const v=new Br(c);return new P0(m,v,a.fieldTransforms)}function hC(r,e,t,s,a,c){const m=r.createContext(1,e,t),v=[Va(e,s,t)],E=[a];if(c.length%2!=0)throw new Se(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<c.length;A+=2)v.push(Va(e,c[A])),E.push(c[A+1]);const x=[],P=sr.empty();for(let A=v.length-1;A>=0;--A)if(!R0(x,v[A])){const H=v[A];let Z=E[A];Z=An(Z);const ne=m.childContextForFieldPath(H);if(Z instanceof Xh)x.push(H);else{const ee=Ku(Z,ne);ee!=null&&(x.push(H),P.set(H,ee))}}const I=new Br(x);return new P0(P,I,m.fieldTransforms)}function dC(r,e,t,s=!1){return Ku(t,r.createContext(s?4:3,e))}function Ku(r,e){if(A0(r=An(r)))return Hm("Unsupported field value:",e,r),C0(r,e);if(r instanceof Yh)return(function(s,a){if(!b0(a.dataSource))throw a.createError(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,a){const c=[];let m=0;for(const v of s){let E=Ku(v,a.childContextForArray(m));E==null&&(E={nullValue:"NULL_VALUE"}),c.push(E),m++}return{arrayValue:{values:c}}})(r,e)}return(function(s,a){if((s=An(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Vv(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=kt.fromDate(s);return{timestampValue:xh(a.serializer,c)}}if(s instanceof kt){const c=new kt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:xh(a.serializer,c)}}if(s instanceof os)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof pi)return{bytesValue:Zv(a.serializer,s._byteString)};if(s instanceof Qt){const c=a.databaseId,m=s.firestore._databaseId;if(!m.isEqual(c))throw a.createError(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:xm(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof ki)return(function(m,v){const E=m instanceof ki?m.toArray():m;return{mapValue:{fields:{[wv]:{stringValue:Ev},[wh]:{arrayValue:{values:E.map((P=>{if(typeof P!="number")throw v.createError("VectorValues must only contain numeric values.");return wm(v.serializer,P)}))}}}}}})(s,a);if(n0(s))return s._toProto(a.serializer);throw a.createError(`Unsupported field value: ${zh(s)}`)})(r,e)}function C0(r,e){const t={};return mv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qo(r,((s,a)=>{const c=Ku(a,e.childContextForField(s));c!=null&&(t[s]=c)})),{mapValue:{fields:t}}}function A0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof kt||r instanceof os||r instanceof pi||r instanceof Qt||r instanceof Yh||r instanceof ki||n0(r))}function Hm(r,e,t){if(!A0(t)||!dv(t)){const s=zh(t);throw s==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+s)}}function Va(r,e,t){if((e=An(e))instanceof jm)return e._internalPath;if(typeof e=="string")return k0(r,e);throw bh("Field path arguments must be of type string or ",r,!1,void 0,t)}const fC=new RegExp("[~\\*/\\[\\]]");function k0(r,e,t){if(e.search(fC)>=0)throw bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new jm(...e.split("."))._internalPath}catch{throw bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function bh(r,e,t,s,a){const c=s&&!s.isEmpty(),m=a!==void 0;let v=`Function ${e}() called with invalid data`;t&&(v+=" (via `toFirestore()`)"),v+=". ";let E="";return(c||m)&&(E+=" (found",c&&(E+=` in field ${s}`),m&&(E+=` in document ${a}`),E+=")"),new Se(ie.INVALID_ARGUMENT,v+r+E)}function R0(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{convertValue(e,t="none"){switch(Go(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($o(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw We(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Qo(e,((a,c)=>{s[a]=this.convertValue(c,t)})),s}convertVectorValue(e){var s,a,c;const t=(c=(a=(s=e.fields)==null?void 0:s[wh].arrayValue)==null?void 0:a.values)==null?void 0:c.map((m=>Kt(m.doubleValue)));return new ki(t)}convertGeoPoint(e){return new os(Kt(e.latitude),Kt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Bh(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Mu(e));default:return null}}convertTimestamp(e){const t=qo(e);return new kt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=At.fromString(e);yt(t0(s),9688,{name:e});const a=new Du(s.get(1),s.get(3)),c=new Le(s.popFirst(5));return a.isEqual(t)||Hs(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm extends mC{constructor(e){super(),this.firestore=e}convertBytes(e){return new pi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,t)}}function pC(r){return new Wm("increment",r)}const cy="@firebase/firestore",hy="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(r){return(function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const c of s)if(c in a&&typeof a[c]=="function")return!0;return!1})(r,["next","error","complete"])}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class _C{constructor(e,t,s){this._userDataWriter=t,this._data=s,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}_fieldsProto(){return new sr({mapValue:{fields:this._data}}).clone().value.mapValue.fields}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,t,s,a,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Va("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class yC extends N0{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Se(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $m{}class L0 extends $m{}function M0(r,e,...t){let s=[];e instanceof $m&&s.push(e),s=s.concat(t),(function(c){const m=c.filter((E=>E instanceof Gm)).length,v=c.filter((E=>E instanceof Jh)).length;if(m>1||m>0&&v>0)throw new Se(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)r=a._apply(r);return r}class Jh extends L0{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Jh(e,t,s)}_apply(e){const t=this._parse(e);return D0(e._query,t),new Ba(e.firestore,e.converter,$f(e._query,t))}_parse(e){const t=Um(e.firestore);return(function(c,m,v,E,x,P,I){let A;if(x.isKeyField()){if(P==="array-contains"||P==="array-contains-any")throw new Se(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${P}' queries on documentId().`);if(P==="in"||P==="not-in"){my(I,P);const Z=[];for(const ne of I)Z.push(fy(E,c,ne));A={arrayValue:{values:Z}}}else A=fy(E,c,I)}else P!=="in"&&P!=="not-in"&&P!=="array-contains-any"||my(I,P),A=dC(v,m,I,P==="in"||P==="not-in");return nn.create(x,P,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function wC(r,e,t){const s=e,a=Va("where",r);return Jh._create(a,s,t)}class Gm extends $m{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Gm(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Ni.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,c){let m=a;const v=c.getFlattenedFilters();for(const E of v)D0(m,E),m=$f(m,E)})(e._query,t),new Ba(e.firestore,e.converter,$f(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Zm extends L0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Zm(e,t)}_apply(e){const t=(function(a,c,m){if(a.startAt!==null)throw new Se(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Se(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vu(c,m)})(e._query,this._field,this._direction);return new Ba(e.firestore,e.converter,MS(e._query,t))}}function EC(r,e="asc"){const t=e,s=Va("orderBy",r);return Zm._create(s,t)}function fy(r,e,t){if(typeof(t=An(t))=="string"){if(t==="")throw new Se(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Av(e)&&t.indexOf("/")!==-1)throw new Se(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(At.fromString(t));if(!Le.isDocumentKey(s))throw new Se(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return P_(r,new Le(s))}if(t instanceof Qt)return P_(r,t._key);throw new Se(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zh(t)}.`)}function my(r,e){if(!Array.isArray(r)||r.length===0)throw new Se(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function D0(r,e){const t=(function(a,c){for(const m of a)for(const v of m.getFlattenedFilters())if(c.indexOf(v.op)>=0)return v.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Se(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Se(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function TC(r,e,t){let s;return s=r?r.toFirestore(e):e,s}function xC(){return new gC("count")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(r){return SC(r,{count:xC()})}function SC(r,e){const t=Us(r.firestore,Dl),s=Fm(t),a=mS(e,((c,m)=>new XS(m,c.aggregateType,c._internalFieldPath)));return Jb(s,r._query,a).then((c=>(function(v,E,x){const P=new qm(v);return new _C(E,P,x)})(t,r,c)))}class Iu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ka extends N0{constructor(e,t,s,a,c,m){super(e,t,s,a,m),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Va("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ka._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ka._jsonSchemaVersion="firestore/documentSnapshot/1.0",ka._jsonSchema={type:rn("string",ka._jsonSchemaVersion),bundleSource:rn("string","DocumentSnapshot"),bundleName:rn("string"),bundle:rn("string")};class ch extends ka{data(e={}){return super.data(e)}}class Il{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Iu(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new ch(this._firestore,this._userDataWriter,s.key,s,new Iu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let m=0;return a._snapshot.docChanges.map((v=>{const E=new ch(a._firestore,a._userDataWriter,v.doc.key,v.doc,new Iu(a._snapshot.mutatedKeys.has(v.doc.key),a._snapshot.fromCache),a.query.converter);return v.doc,{type:"added",doc:E,oldIndex:-1,newIndex:m++}}))}{let m=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((v=>c||v.type!==3)).map((v=>{const E=new ch(a._firestore,a._userDataWriter,v.doc.key,v.doc,new Iu(a._snapshot.mutatedKeys.has(v.doc.key),a._snapshot.fromCache),a.query.converter);let x=-1,P=-1;return v.type!==0&&(x=m.indexOf(v.doc.key),m=m.delete(v.doc.key)),v.type!==1&&(m=m.add(v.doc),P=m.indexOf(v.doc.key)),{type:PC(v.type),doc:E,oldIndex:x,newIndex:P}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Il._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=fm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function PC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return We(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Il._jsonSchemaVersion="firestore/querySnapshot/1.0",Il._jsonSchema={type:rn("string",Il._jsonSchemaVersion),bundleSource:rn("string","QuerySnapshot"),bundleName:rn("string"),bundle:rn("string")};function bC(r,e,t){r=Us(r,Qt);const s=Us(r.firestore,Dl),a=TC(r.converter,e),c=Um(s);return V0(s,[uC(c,"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,is.none())])}function CC(r,e,t,...s){r=Us(r,Qt);const a=Us(r.firestore,Dl),c=Um(a);let m;return m=typeof(e=An(e))=="string"||e instanceof jm?hC(c,"updateDoc",r._key,e,t,s):cC(c,"updateDoc",r._key,e),V0(a,[m.toMutation(r._key,is.exists(!0))])}function O0(r,...e){var x,P,I;r=An(r);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||dy(e[s])||(t=e[s++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(dy(e[s])){const A=e[s];e[s]=(x=A.next)==null?void 0:x.bind(A),e[s+1]=(P=A.error)==null?void 0:P.bind(A),e[s+2]=(I=A.complete)==null?void 0:I.bind(A)}let c,m,v;if(r instanceof Qt)m=Us(r.firestore,Dl),v=vm(r._key.path),c={next:A=>{e[s]&&e[s](AC(m,r,A))},error:e[s+1],complete:e[s+2]};else{const A=Us(r,Ba);m=Us(A.firestore,Dl),v=A._query;const H=new qm(m);c={next:Z=>{e[s]&&e[s](new Il(m,H,A,Z))},error:e[s+1],complete:e[s+2]},vC(r._query)}const E=Fm(m);return Xb(E,v,a,c)}function V0(r,e){const t=Fm(r);return eC(t,e)}function AC(r,e,t){const s=t.docs.get(e._key),a=new qm(r);return new ka(r,a,e._key,s,new Iu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){GI(zl),Cl(new Ma("firestore",((s,{instanceIdentifier:a,options:c})=>{const m=s.getProvider("app").getImmediate(),v=new Dl(new QI(s.getProvider("auth-internal")),new JI(m,s.getProvider("app-check-internal")),_S(m,a),m);return c={useFetchStreams:t,...c},v._setSettings(c),v}),"PUBLIC").setMultipleInstances(!0)),jo(cy,hy,e),jo(cy,hy,"esm2020")})();function z0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kC=z0,F0=new Uu("auth","Firebase",z0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch=new um("@firebase/auth");function RC(r,...e){Ch.logLevel<=st.WARN&&Ch.warn(`Auth (${zl}): ${r}`,...e)}function hh(r,...e){Ch.logLevel<=st.ERROR&&Ch.error(`Auth (${zl}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(r,...e){throw Qm(r,...e)}function Ri(r,...e){return Qm(r,...e)}function Km(r,e,t){const s={...kC(),[e]:t};return new Uu("auth","Firebase",s).create(e,{appName:r.name})}function Ra(r){return Km(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function NC(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&us(r,"argument-error"),Km(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qm(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return F0.create(r,...e)}function $e(r,e,...t){if(!r)throw Qm(e,...t)}function js(r){const e="INTERNAL ASSERTION FAILED: "+r;throw hh(e),new Error(e)}function $s(r,e){r||js(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function LC(){return py()==="http:"||py()==="https:"}function py(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LC()||Ix()||"connection"in navigator)?navigator.onLine:!0}function DC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,t){this.shortDelay=e,this.longDelay=t,$s(t>e,"Short delay should be less than long delay!"),this.isMobile=Ex()||Sx()}get(){return MC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(r,e){$s(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;js("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;js("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;js("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zC=new Qu(3e4,6e4);function Xm(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Hl(r,e,t,s,a={}){return B0(r,a,async()=>{let c={},m={};s&&(e==="GET"?m=s:c={body:JSON.stringify(s)});const v=Wu({key:r.config.apiKey,...m}).slice(1),E=await r._getAdditionalHeaders();E["Content-Type"]="application/json",r.languageCode&&(E["X-Firebase-Locale"]=r.languageCode);const x={method:e,headers:E,...c};return xx()||(x.referrerPolicy="no-referrer"),r.emulatorConfig&&Vl(r.emulatorConfig.host)&&(x.credentials="include"),j0.fetch()(await U0(r,r.config.apiHost,t,v),x)})}async function B0(r,e,t){r._canInitEmulator=!1;const s={...OC,...e};try{const a=new jC(r),c=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const m=await c.json();if("needConfirmation"in m)throw ih(r,"account-exists-with-different-credential",m);if(c.ok&&!("errorMessage"in m))return m;{const v=c.ok?m.errorMessage:m.error.message,[E,x]=v.split(" : ");if(E==="FEDERATED_USER_ID_ALREADY_LINKED")throw ih(r,"credential-already-in-use",m);if(E==="EMAIL_EXISTS")throw ih(r,"email-already-in-use",m);if(E==="USER_DISABLED")throw ih(r,"user-disabled",m);const P=s[E]||E.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw Km(r,P,x);us(r,P)}}catch(a){if(a instanceof Gs)throw a;us(r,"network-request-failed",{message:String(a)})}}async function FC(r,e,t,s,a={}){const c=await Hl(r,e,t,s,a);return"mfaPendingCredential"in c&&us(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function U0(r,e,t,s){const a=`${e}${t}?${s}`,c=r,m=c.config.emulator?Ym(r.config,a):`${r.config.apiScheme}://${a}`;return VC.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(m).toString():m}class jC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Ri(this.auth,"network-request-failed")),zC.get())})}}function ih(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Ri(r,e,s);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BC(r,e){return Hl(r,"POST","/v1/accounts:delete",e)}async function Ah(r,e){return Hl(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function UC(r,e=!1){const t=An(r),s=await t.getIdToken(e),a=Jm(s);$e(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const c=typeof a.firebase=="object"?a.firebase:void 0,m=c==null?void 0:c.sign_in_provider;return{claims:a,token:s,authTime:ku(kf(a.auth_time)),issuedAtTime:ku(kf(a.iat)),expirationTime:ku(kf(a.exp)),signInProvider:m||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function kf(r){return Number(r)*1e3}function Jm(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return hh("JWT malformed, contained fewer than 3 sections"),null;try{const a=qy(t);return a?JSON.parse(a):(hh("Failed to decode base64 JWT payload"),null)}catch(a){return hh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function gy(r){const e=Jm(r);return $e(e,"internal-error"),$e(typeof e.exp<"u","internal-error"),$e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bu(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Gs&&WC(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function WC({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ku(this.lastLoginAt),this.creationTime=ku(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kh(r){var I;const e=r.auth,t=await r.getIdToken(),s=await Bu(r,Ah(e,{idToken:t}));$e(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];r._notifyReloadListener(a);const c=(I=a.providerUserInfo)!=null&&I.length?W0(a.providerUserInfo):[],m=$C(r.providerData,c),v=r.isAnonymous,E=!(r.email&&a.passwordHash)&&!(m!=null&&m.length),x=v?E:!1,P={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:m,metadata:new im(a.createdAt,a.lastLoginAt),isAnonymous:x};Object.assign(r,P)}async function qC(r){const e=An(r);await kh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $C(r,e){return[...r.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function W0(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC(r,e){const t=await B0(r,{},async()=>{const s=Wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:c}=r.config,m=await U0(r,a,"/v1/token",`key=${c}`),v=await r._getAdditionalHeaders();v["Content-Type"]="application/x-www-form-urlencoded";const E={method:"POST",headers:v,body:s};return r.emulatorConfig&&Vl(r.emulatorConfig.host)&&(E.credentials="include"),j0.fetch()(m,E)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ZC(r,e){return Hl(r,"POST","/v2/accounts:revokeToken",Xm(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$e(e.idToken,"internal-error"),$e(typeof e.idToken<"u","internal-error"),$e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$e(e.length!==0,"internal-error");const t=gy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:c}=await GC(e,t);this.updateTokensAndExpiration(s,a,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:c}=t,m=new Sl;return s&&($e(typeof s=="string","internal-error",{appName:e}),m.refreshToken=s),a&&($e(typeof a=="string","internal-error",{appName:e}),m.accessToken=a),c&&($e(typeof c=="number","internal-error",{appName:e}),m.expirationTime=c),m}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sl,this.toJSON())}_performRefresh(){return js("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(r,e){$e(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Ai{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new HC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new im(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Bu(this,this.stsTokenManager.getToken(this.auth,e));return $e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return UC(this,e)}reload(){return qC(this)}_assign(e){this!==e&&($e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ai({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){$e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await kh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ci(this.auth.app))return Promise.reject(Ra(this.auth));const e=await this.getIdToken();return await Bu(this,BC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,c=t.phoneNumber??void 0,m=t.photoURL??void 0,v=t.tenantId??void 0,E=t._redirectEventId??void 0,x=t.createdAt??void 0,P=t.lastLoginAt??void 0,{uid:I,emailVerified:A,isAnonymous:H,providerData:Z,stsTokenManager:ne}=t;$e(I&&ne,e,"internal-error");const ee=Sl.fromJSON(this.name,ne);$e(typeof I=="string",e,"internal-error"),No(s,e.name),No(a,e.name),$e(typeof A=="boolean",e,"internal-error"),$e(typeof H=="boolean",e,"internal-error"),No(c,e.name),No(m,e.name),No(v,e.name),No(E,e.name),No(x,e.name),No(P,e.name);const be=new Ai({uid:I,auth:e,email:a,emailVerified:A,displayName:s,isAnonymous:H,photoURL:m,phoneNumber:c,tenantId:v,stsTokenManager:ee,createdAt:x,lastLoginAt:P});return Z&&Array.isArray(Z)&&(be.providerData=Z.map(pe=>({...pe}))),E&&(be._redirectEventId=E),be}static async _fromIdTokenResponse(e,t,s=!1){const a=new Sl;a.updateFromServerResponse(t);const c=new Ai({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await kh(c),c}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];$e(a.localId!==void 0,"internal-error");const c=a.providerUserInfo!==void 0?W0(a.providerUserInfo):[],m=!(a.email&&a.passwordHash)&&!(c!=null&&c.length),v=new Sl;v.updateFromIdToken(s);const E=new Ai({uid:a.localId,auth:e,stsTokenManager:v,isAnonymous:m}),x={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new im(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(c!=null&&c.length)};return Object.assign(E,x),E}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=new Map;function Bs(r){$s(r instanceof Function,"Expected a class definition");let e=_y.get(r);return e?($s(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,_y.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}H0.type="NONE";const yy=H0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(r,e,t){return`firebase:${r}:${e}:${t}`}class Pl{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:c}=this.auth;this.fullUserKey=dh(this.userKey,a.apiKey,c),this.fullPersistenceKey=dh("persistence",a.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ah(this.auth,{idToken:e}).catch(()=>{});return t?Ai._fromGetAccountInfoResponse(this.auth,t,e):null}return Ai._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Pl(Bs(yy),e,s);const a=(await Promise.all(t.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let c=a[0]||Bs(yy);const m=dh(s,e.config.apiKey,e.name);let v=null;for(const x of t)try{const P=await x._get(m);if(P){let I;if(typeof P=="string"){const A=await Ah(e,{idToken:P}).catch(()=>{});if(!A)break;I=await Ai._fromGetAccountInfoResponse(e,A,P)}else I=Ai._fromJSON(e,P);x!==c&&(v=I),c=x;break}}catch{}const E=a.filter(x=>x._shouldAllowMigration);return!c._shouldAllowMigration||!E.length?new Pl(c,e,s):(c=E[0],v&&await c._set(m,v.toJSON()),await Promise.all(t.map(async x=>{if(x!==c)try{await x._remove(m)}catch{}})),new Pl(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Z0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(q0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Q0(e))return"Blackberry";if(Y0(e))return"Webos";if($0(e))return"Safari";if((e.includes("chrome/")||G0(e))&&!e.includes("edge/"))return"Chrome";if(K0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function q0(r=qn()){return/firefox\//i.test(r)}function $0(r=qn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function G0(r=qn()){return/crios\//i.test(r)}function Z0(r=qn()){return/iemobile/i.test(r)}function K0(r=qn()){return/android/i.test(r)}function Q0(r=qn()){return/blackberry/i.test(r)}function Y0(r=qn()){return/webos/i.test(r)}function ep(r=qn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function KC(r=qn()){var e;return ep(r)&&!!((e=window.navigator)!=null&&e.standalone)}function QC(){return Px()&&document.documentMode===10}function X0(r=qn()){return ep(r)||K0(r)||Y0(r)||Q0(r)||/windows phone/i.test(r)||Z0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(r,e=[]){let t;switch(r){case"Browser":t=vy(qn());break;case"Worker":t=`${vy(qn())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${zl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((m,v)=>{try{const E=e(c);m(E)}catch(E){v(E)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XC(r,e={}){return Hl(r,"GET","/v2/passwordPolicy",Xm(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=6;class eA{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??JC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wy(this),this.idTokenSubscription=new wy(this),this.beforeStateQueue=new YC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=F0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Bs(t)),this._initializationPromise=this.queue(async()=>{var s,a,c;if(!this._deleted&&(this.persistenceManager=await Pl.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ah(this,{idToken:e}),s=await Ai._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(Ci(this.app)){const m=this.app.settings.authIdToken;return m?new Promise(v=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(m).then(v,v))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const m=(c=this.redirectUser)==null?void 0:c._redirectEventId,v=s==null?void 0:s._redirectEventId,E=await this.tryRedirectSignIn(e);(!m||m===v)&&(E!=null&&E.user)&&(s=E.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(m){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(m))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return $e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await kh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ci(this.app))return Promise.reject(Ra(this));const t=e?An(e):null;return t&&$e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ci(this.app)?Promise.reject(Ra(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ci(this.app)?Promise.reject(Ra(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XC(this),t=new eA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Uu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await ZC(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Bs(e)||this._popupRedirectResolver;$e(t,this,"argument-error"),this.redirectPersistenceManager=await Pl.create(this,[Bs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let m=!1;const v=this._isInitialized?Promise.resolve():this._initializationPromise;if($e(v,this,"internal-error"),v.then(()=>{m||c(this.currentUser)}),typeof t=="function"){const E=e.addObserver(t,s,a);return()=>{m=!0,E()}}else{const E=e.addObserver(t);return()=>{m=!0,E()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=J0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Ci(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&RC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ed(r){return An(r)}class wy{constructor(e){this.auth=e,this.observer=null,this.addObserver=Mx(t=>this.observer=t)}get next(){return $e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nA(r){tp=r}function rA(r){return tp.loadJS(r)}function iA(){return tp.gapiScript}function sA(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(r,e){const t=hm(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),c=t.getOptions();if(La(c,e??{}))return a;us(a,"already-initialized")}return t.initialize({options:e})}function aA(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Bs);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function lA(r,e,t){const s=ed(r);$e(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,c=ew(e),{host:m,port:v}=uA(e),E=v===null?"":`:${v}`,x={url:`${c}//${m}${E}/`},P=Object.freeze({host:m,port:v,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){$e(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),$e(La(x,s.config.emulator)&&La(P,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=x,s.emulatorConfig=P,s.settings.appVerificationDisabledForTesting=!0,Vl(m)?(Ky(`${c}//${m}${E}`),Qy("Auth",!0)):cA()}function ew(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function uA(r){const e=ew(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const c=a[1];return{host:c,port:Ey(s.substr(c.length+1))}}else{const[c,m]=s.split(":");return{host:c,port:Ey(m)}}}function Ey(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function cA(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return js("not implemented")}_getIdTokenResponse(e){return js("not implemented")}_linkToIdToken(e,t){return js("not implemented")}_getReauthenticationResolver(e){return js("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(r,e){return FC(r,"POST","/v1/accounts:signInWithIdp",Xm(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="http://localhost";class za extends tw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new za(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):us("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...c}=t;if(!s||!a)return null;const m=new za(s,a);return m.idToken=c.idToken||void 0,m.accessToken=c.accessToken||void 0,m.secret=c.secret,m.nonce=c.nonce,m.pendingToken=c.pendingToken||null,m}_getIdTokenResponse(e){const t=this.buildRequest();return bl(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,bl(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,bl(e,t)}buildRequest(){const e={requestUri:hA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Wu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu extends np{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends Yu{constructor(){super("facebook.com")}static credential(e){return za._fromParams({providerId:Mo.PROVIDER_ID,signInMethod:Mo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mo.credentialFromTaggedObject(e)}static credentialFromError(e){return Mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mo.credential(e.oauthAccessToken)}catch{return null}}}Mo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends Yu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return za._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Fs.credential(t,s)}catch{return null}}}Fs.GOOGLE_SIGN_IN_METHOD="google.com";Fs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends Yu{constructor(){super("github.com")}static credential(e){return za._fromParams({providerId:Do.PROVIDER_ID,signInMethod:Do.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Do.credentialFromTaggedObject(e)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Do.credential(e.oauthAccessToken)}catch{return null}}}Do.GITHUB_SIGN_IN_METHOD="github.com";Do.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo extends Yu{constructor(){super("twitter.com")}static credential(e,t){return za._fromParams({providerId:Oo.PROVIDER_ID,signInMethod:Oo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Oo.credentialFromTaggedObject(e)}static credentialFromError(e){return Oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Oo.credential(t,s)}catch{return null}}}Oo.TWITTER_SIGN_IN_METHOD="twitter.com";Oo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const c=await Ai._fromIdTokenResponse(e,s,a),m=Ty(s);return new Ol({user:c,providerId:m,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=Ty(s);return new Ol({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function Ty(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh extends Gs{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Rh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new Rh(e,t,s,a)}}function nw(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Rh._fromErrorAndOperation(r,c,e,s):c})}async function dA(r,e,t=!1){const s=await Bu(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ol._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(r,e,t=!1){const{auth:s}=r;if(Ci(s.app))return Promise.reject(Ra(s));const a="reauthenticate";try{const c=await Bu(r,nw(s,a,e,r),t);$e(c.idToken,s,"internal-error");const m=Jm(c.idToken);$e(m,s,"internal-error");const{sub:v}=m;return $e(r.uid===v,s,"user-mismatch"),Ol._forOperation(r,a,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&us(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mA(r,e,t=!1){if(Ci(r.app))return Promise.reject(Ra(r));const s="signIn",a=await nw(r,s,e),c=await Ol._fromIdTokenResponse(r,s,a);return t||await r._updateCurrentUser(c.user),c}function pA(r,e,t,s){return An(r).onIdTokenChanged(e,t,s)}function gA(r,e,t){return An(r).beforeAuthStateChanged(e,t)}function _A(r,e,t,s){return An(r).onAuthStateChanged(e,t,s)}const Nh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Nh,"1"),this.storage.removeItem(Nh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=1e3,vA=10;class iw extends rw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=X0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((m,v,E)=>{this.notifyListeners(m,E)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const m=this.storage.getItem(s);!t&&this.localCache[s]===m||this.notifyListeners(s,m)},c=this.storage.getItem(s);QC()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,vA):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},yA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}iw.type="LOCAL";const wA=iw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw extends rw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}sw.type="SESSION";const ow=sw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new td(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:c}=t.data,m=this.handlersMap[a];if(!(m!=null&&m.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const v=Array.from(m).map(async x=>x(t.origin,c)),E=await EA(v);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:E})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}td.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,m;return new Promise((v,E)=>{const x=rp("",20);a.port1.start();const P=setTimeout(()=>{E(new Error("unsupported_event"))},s);m={messageChannel:a,onMessage(I){const A=I;if(A.data.eventId===x)switch(A.data.status){case"ack":clearTimeout(P),c=setTimeout(()=>{E(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),v(A.data.response);break;default:clearTimeout(P),clearTimeout(c),E(new Error("invalid_response"));break}}},this.handlers.add(m),a.port1.addEventListener("message",m.onMessage),this.target.postMessage({eventType:e,eventId:x,data:t},[a.port2])}).finally(()=>{m&&this.removeMessageHandler(m)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(){return window}function xA(r){as().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(){return typeof as().WorkerGlobalScope<"u"&&typeof as().importScripts=="function"}async function IA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SA(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function PA(){return aw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="firebaseLocalStorageDb",bA=1,Lh="firebaseLocalStorage",uw="fbase_key";class Xu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function nd(r,e){return r.transaction([Lh],e?"readwrite":"readonly").objectStore(Lh)}function CA(){const r=indexedDB.deleteDatabase(lw);return new Xu(r).toPromise()}function sm(){const r=indexedDB.open(lw,bA);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Lh,{keyPath:uw})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Lh)?e(s):(s.close(),await CA(),e(await sm()))})})}async function xy(r,e,t){const s=nd(r,!0).put({[uw]:e,value:t});return new Xu(s).toPromise()}async function AA(r,e){const t=nd(r,!1).get(e),s=await new Xu(t).toPromise();return s===void 0?null:s.value}function Iy(r,e){const t=nd(r,!0).delete(e);return new Xu(t).toPromise()}const kA=800,RA=3;class cw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>RA)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=td._getInstance(PA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await IA(),!this.activeServiceWorker)return;this.sender=new TA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||SA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sm();return await xy(e,Nh,"1"),await Iy(e,Nh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>xy(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>AA(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Iy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const c=nd(a,!1).getAll();return new Xu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:c}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(c)&&(this.notifyListeners(a,c),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cw.type="LOCAL";const NA=cw;new Qu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(r,e){return e?Bs(e):($e(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip extends tw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return bl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return bl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function LA(r){return mA(r.auth,new ip(r),r.bypassAuthState)}function MA(r){const{auth:e,user:t}=r;return $e(t,e,"internal-error"),fA(t,new ip(r),r.bypassAuthState)}async function DA(r){const{auth:e,user:t}=r;return $e(t,e,"internal-error"),dA(t,new ip(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,t,s,a,c=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:c,error:m,type:v}=e;if(m){this.reject(m);return}const E={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(v)(E))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LA;case"linkViaPopup":case"linkViaRedirect":return DA;case"reauthViaPopup":case"reauthViaRedirect":return MA;default:us(this.auth,"internal-error")}}resolve(e){$s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=new Qu(2e3,1e4);async function VA(r,e,t){if(Ci(r.app))return Promise.reject(Ri(r,"operation-not-supported-in-this-environment"));const s=ed(r);NC(r,e,np);const a=hw(s,t);return new Aa(s,"signInViaPopup",e,a).executeNotNull()}class Aa extends dw{constructor(e,t,s,a,c){super(e,t,a,c),this.provider=s,this.authWindow=null,this.pollId=null,Aa.currentPopupAction&&Aa.currentPopupAction.cancel(),Aa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $e(e,this.auth,"internal-error"),e}async onExecution(){$s(this.filter.length===1,"Popup operations only handle one event");const e=rp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Aa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OA.get())};e()}}Aa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="pendingRedirect",fh=new Map;class FA extends dw{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=fh.get(this.auth._key());if(!e){try{const s=await jA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}fh.set(this.auth._key(),e)}return this.bypassAuthState||fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jA(r,e){const t=WA(e),s=UA(r);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function BA(r,e){fh.set(r._key(),e)}function UA(r){return Bs(r._redirectPersistence)}function WA(r){return dh(zA,r.config.apiKey,r.name)}async function HA(r,e,t=!1){if(Ci(r.app))return Promise.reject(Ra(r));const s=ed(r),a=hw(s,e),m=await new FA(s,a,t).execute();return m&&!t&&(delete m.user._redirectEventId,await s._persistUserIfCurrent(m.user),await s._setRedirectUser(null,e)),m}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=600*1e3;class $A{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!fw(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Ri(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sy(e))}saveEventToCache(e){this.cachedEventUids.add(Sy(e)),this.lastProcessedEventTime=Date.now()}}function Sy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function fw({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function GA(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fw(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZA(r,e={}){return Hl(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QA=/^https?/;async function YA(r){if(r.config.emulator)return;const{authorizedDomains:e}=await ZA(r);for(const t of e)try{if(XA(t))return}catch{}us(r,"unauthorized-domain")}function XA(r){const e=rm(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const m=new URL(r);return m.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&m.hostname===s}if(!QA.test(t))return!1;if(KA.test(r))return s===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=new Qu(3e4,6e4);function Py(){const r=as().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function ek(r){return new Promise((e,t)=>{var a,c,m;function s(){Py(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Py(),t(Ri(r,"network-request-failed"))},timeout:JA.get()})}if((c=(a=as().gapi)==null?void 0:a.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((m=as().gapi)!=null&&m.load)s();else{const v=sA("iframefcb");return as()[v]=()=>{gapi.load?s():t(Ri(r,"network-request-failed"))},rA(`${iA()}?onload=${v}`).catch(E=>t(E))}}).catch(e=>{throw mh=null,e})}let mh=null;function tk(r){return mh=mh||ek(r),mh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=new Qu(5e3,15e3),rk="__/auth/iframe",ik="emulator/auth/iframe",sk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ok=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ak(r){const e=r.config;$e(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Ym(e,ik):`https://${r.config.authDomain}/${rk}`,s={apiKey:e.apiKey,appName:r.name,v:zl},a=ok.get(r.config.apiHost);a&&(s.eid=a);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${Wu(s).slice(1)}`}async function lk(r){const e=await tk(r),t=as().gapi;return $e(t,r,"internal-error"),e.open({where:document.body,url:ak(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sk,dontclear:!0},s=>new Promise(async(a,c)=>{await s.restyle({setHideOnLeave:!1});const m=Ri(r,"network-request-failed"),v=as().setTimeout(()=>{c(m)},nk.get());function E(){as().clearTimeout(v),a(s)}s.ping(E).then(E,()=>{c(m)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ck=500,hk=600,dk="_blank",fk="http://localhost";class by{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mk(r,e,t,s=ck,a=hk){const c=Math.max((window.screen.availHeight-a)/2,0).toString(),m=Math.max((window.screen.availWidth-s)/2,0).toString();let v="";const E={...uk,width:s.toString(),height:a.toString(),top:c,left:m},x=qn().toLowerCase();t&&(v=G0(x)?dk:t),q0(x)&&(e=e||fk,E.scrollbars="yes");const P=Object.entries(E).reduce((A,[H,Z])=>`${A}${H}=${Z},`,"");if(KC(x)&&v!=="_self")return pk(e||"",v),new by(null);const I=window.open(e||"",v,P);$e(I,r,"popup-blocked");try{I.focus()}catch{}return new by(I)}function pk(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk="__/auth/handler",_k="emulator/auth/handler",yk=encodeURIComponent("fac");async function Cy(r,e,t,s,a,c){$e(r.config.authDomain,r,"auth-domain-config-required"),$e(r.config.apiKey,r,"invalid-api-key");const m={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:zl,eventId:a};if(e instanceof np){e.setDefaultLanguage(r.languageCode),m.providerId=e.providerId||"",Lx(e.getCustomParameters())||(m.customParameters=JSON.stringify(e.getCustomParameters()));for(const[P,I]of Object.entries({}))m[P]=I}if(e instanceof Yu){const P=e.getScopes().filter(I=>I!=="");P.length>0&&(m.scopes=P.join(","))}r.tenantId&&(m.tid=r.tenantId);const v=m;for(const P of Object.keys(v))v[P]===void 0&&delete v[P];const E=await r._getAppCheckToken(),x=E?`#${yk}=${encodeURIComponent(E)}`:"";return`${vk(r)}?${Wu(v).slice(1)}${x}`}function vk({config:r}){return r.emulator?Ym(r,_k):`https://${r.authDomain}/${gk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf="webStorageSupport";class wk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ow,this._completeRedirectFn=HA,this._overrideRedirectResult=BA}async _openPopup(e,t,s,a){var m;$s((m=this.eventManagers[e._key()])==null?void 0:m.manager,"_initialize() not called before _openPopup()");const c=await Cy(e,t,s,rm(),a);return mk(e,c,rp())}async _openRedirect(e,t,s,a){await this._originValidation(e);const c=await Cy(e,t,s,rm(),a);return xA(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:c}=this.eventManagers[t];return a?Promise.resolve(a):($s(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await lk(e),s=new $A(e);return t.register("authEvent",a=>($e(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Rf,{type:Rf},a=>{var m;const c=(m=a==null?void 0:a[0])==null?void 0:m[Rf];c!==void 0&&t(!!c),us(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=YA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return X0()||$0()||ep()}}const Ek=wk;var Ay="@firebase/auth",ky="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ik(r){Cl(new Ma("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:m,authDomain:v}=s.options;$e(m&&!m.includes(":"),"invalid-api-key",{appName:s.name});const E={apiKey:m,authDomain:v,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:J0(r)},x=new tA(s,a,c,E);return aA(x,t),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Cl(new Ma("auth-internal",e=>{const t=ed(e.getProvider("auth").getImmediate());return(s=>new Tk(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),jo(Ay,ky,xk(r)),jo(Ay,ky,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=300,Pk=Zy("authIdTokenMaxAge")||Sk;let Ry=null;const bk=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>Pk)return;const a=t==null?void 0:t.token;Ry!==a&&(Ry=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Ck(r=ev()){const e=hm(r,"auth");if(e.isInitialized())return e.getImmediate();const t=oA(r,{popupRedirectResolver:Ek,persistence:[NA,wA,ow]}),s=Zy("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const m=bk(c.toString());gA(t,m,()=>m(t.currentUser)),pA(t,v=>m(v))}}const a=$y("auth");return a&&lA(t,`http://${a}`),t}function Ak(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}nA({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=a=>{const c=Ri("internal-error");c.customData=a,t(c)},s.type="text/javascript",s.charset="UTF-8",Ak().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ik("Browser");const kk={apiKey:"AIzaSyB1YwI0pF8O8y05mfDUuBwxlPuHEFdmQ5g",authDomain:"ameliorons-ff5dc.firebaseapp.com",projectId:"ameliorons-ff5dc",storageBucket:"ameliorons-ff5dc.firebasestorage.app",messagingSenderId:"466230393587",appId:"1:466230393587:web:cf016d45bf7c734fd71586"},mw=Jy(kk),Ju=iC(mw),pw=Ck(mw),Rk=new Fs,Nk=async()=>{try{await VA(pw,Rk)}catch(r){console.error("Erreur login:",r),alert("Veuillez autoriser les pop-ups pour ce site")}};function Lk(){return k.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:k.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl overflow-hidden",children:[k.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 p-8 text-white text-center",children:[k.jsx("div",{className:"bg-white/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm",children:k.jsx(Mh,{size:32})}),k.jsx("h1",{className:"text-2xl font-bold italic",children:"Amliorons"}),k.jsx("p",{className:"text-blue-100 mt-2",children:"Signalez, agissez, amliorez votre ville."})]}),k.jsxs("div",{className:"p-8",children:[k.jsxs("div",{className:"space-y-6 mb-8",children:[k.jsxs("div",{className:"flex items-start gap-4",children:[k.jsx("div",{className:"text-blue-600 mt-1",children:k.jsx(Vy,{size:20})}),k.jsxs("div",{children:[k.jsx("h3",{className:"font-semibold text-slate-800",children:"Compte Citoyen"}),k.jsx("p",{className:"text-sm text-slate-500",children:"Suivez l'tat de vos signalements en temps rel."})]})]}),k.jsxs("div",{className:"flex items-start gap-4",children:[k.jsx("div",{className:"text-blue-600 mt-1",children:k.jsx(xE,{size:20})}),k.jsxs("div",{children:[k.jsx("h3",{className:"font-semibold text-slate-800",children:"Impact Direct"}),k.jsx("p",{className:"text-sm text-slate-500",children:"Aidez les services techniques  intervenir plus vite."})]})]})]}),k.jsxs("button",{onClick:()=>Nk(),className:"w-full flex items-center justify-center gap-3 bg-white border-2 border-slate-200 py-3 px-4 rounded-xl font-medium text-slate-700 hover:bg-slate-50 hover:border-slate-300 transition-all duration-200 active:scale-[0.98]",children:[k.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"w-5 h-5"}),"Continuer avec Google"]}),k.jsx("p",{className:"text-center text-xs text-slate-400 mt-8",children:"En vous connectant, vous acceptez de partager votre position lors de vos futurs signalements."})]})]})})}function Mk(r){const e=M0(S0(Ju,"reports"),EC("date","desc"));return O0(e,t=>{const s=t.docs.map(a=>{var m;const c=a.data();return{id:a.id,...c,date:(m=c.date)!=null&&m.toDate?c.date.toDate().toISOString():c.date}});r(s)})}async function Dk(r){const e={id:r.id,mode:r.mode,category:r.category,description:r.description,photo:r.photo??"",location:{lat:r.location.lat,lng:r.location.lng,...r.location.address?{address:r.location.address}:{}},date:kt.fromDate(new Date(r.date)),status:r.status,reportedBy:r.reportedBy,validations:r.validations??0,validatedBy:r.validatedBy??[]};r.type&&(e.type=r.type),await bC(zm(Ju,"reports",r.id),e)}function Ok(r,e){return O0(zm(Ju,"users",r),t=>{t.exists()?e(t.data()):e({points:0})})}async function Vk(r){if(r<=0)return 0;const e=M0(S0(Ju,"users"),wC("points",">",r));return(await IC(e)).data().count+1}function zk(){const[r,e]=Ye.useState([]),[t,s]=Ye.useState("citizen"),[a,c]=Ye.useState(!1),[m,v]=Ye.useState(!1),[E,x]=Ye.useState(null),[P,I]=Ye.useState(null),[A,H]=Ye.useState(!1),[Z,ne]=Ye.useState(!1),[ee,be]=Ye.useState({points:0,globalRank:0}),[pe,he]=Ye.useState(null),[Me,He]=Ye.useState(!0),[Ne,j]=Ye.useState(null),[R,D]=Ye.useState(null),[B,V]=Ye.useState(!1),W=Ye.useCallback(()=>{if(V(!0),!navigator.geolocation){D("La golocalisation nest pas supporte."),V(!1);return}navigator.geolocation.getCurrentPosition(fe=>{j({lat:fe.coords.latitude,lng:fe.coords.longitude}),D(null),V(!1)},fe=>{D("Position indisponible."),V(!1)},{enableHighAccuracy:!0,timeout:12e3,maximumAge:0})},[]);Ye.useEffect(()=>{const fe=_A(pw,Oe=>{he(Oe),He(!1)});return()=>fe()},[]),Ye.useEffect(()=>{!Me&&pe&&W()},[Me,pe,W]),Ye.useEffect(()=>{if(pe){const fe=Mk(e);return()=>fe()}},[pe]),Ye.useEffect(()=>{if(pe){const fe=Ok(pe.uid,async Oe=>{const te=await Vk(Oe.points||0);be({points:Oe.points||0,globalRank:te})});return()=>fe()}},[pe]);const M=Ye.useCallback((fe,Oe)=>{m&&(x({lat:fe,lng:Oe}),v(!1),c(!0),wl.success("Position valide"))},[m]),Xe=async fe=>{var Oe,te;if(pe)try{const Ee={lat:((Oe=fe.location)==null?void 0:Oe.lat)||(Ne==null?void 0:Ne.lat)||50.6292,lng:((te=fe.location)==null?void 0:te.lng)||(Ne==null?void 0:Ne.lng)||3.0573},re={id:crypto.randomUUID(),mode:fe.mode,category:fe.category,description:fe.description,photo:fe.photo||"",location:Ee,date:new Date().toISOString(),status:"nouveau",reportedBy:pe.uid,validations:0,validatedBy:[],...fe.type&&{type:fe.type}};await Dk(re),c(!1),x(null);const z=fe.mode==="probleme"?20:10,J=zm(Ju,"users",pe.uid);await CC(J,{points:pC(z)}),wl.success(`Signalement envoy ! +${z} points`)}catch(Ee){console.error("Erreur envoi:",Ee),wl.error("Erreur lors de l'envoi")}};if(Me)return k.jsxs("div",{className:"h-screen w-screen flex flex-col items-center justify-center bg-slate-900 text-white",children:[k.jsx(Zg,{className:"animate-spin text-red-600 mb-4",size:48}),k.jsx("p",{className:"font-bold tracking-widest",children:"CHARGEMENT..."})]});if(!pe)return k.jsx(Lk,{});const nt={name:pe.displayName||"Citoyen",photo:pe.photoURL||`https://ui-avatars.com/api/?name=${pe.displayName||"U"}&background=random`,points:ee.points,level:Math.floor(ee.points/50),rank:ee.globalRank,badge:ee.globalRank<=3&&ee.points>0?" Top Contributeur":" Citoyen Actif"};return k.jsxs("div",{className:"h-screen w-screen relative bg-slate-900 overflow-hidden font-sans",children:[k.jsx(IT,{position:"top-center",richColors:!0}),k.jsx("div",{className:"absolute inset-0 z-0 h-full w-full",children:Ne?k.jsx(lE,{reports:r,onReportClick:I,onMapClick:M,selectedLocation:E,userLocation:Ne,zoom:18}):k.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center bg-slate-50 text-slate-500",children:[k.jsx(Zg,{className:"animate-spin mb-4",size:32}),k.jsx("p",{className:"font-medium italic",children:"Localisation en cours..."})]})}),k.jsxs("div",{className:"absolute top-4 right-4 z-40 flex flex-col items-end gap-3 pointer-events-none",children:[k.jsx("button",{onClick:()=>ne(!0),className:"bg-white/90 backdrop-blur-md p-1 rounded-full shadow-lg border border-white/40 pointer-events-auto",children:k.jsxs("div",{className:"relative",children:[k.jsx("img",{src:nt.photo,className:"w-11 h-11 rounded-full object-cover",alt:"Profil"}),k.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-600 text-[10px] font-bold text-white w-5 h-5 rounded-full flex items-center justify-center border-2 border-white",children:nt.level})]})}),k.jsxs("button",{onClick:()=>{const fe=t==="citizen"?"agent":"citizen";s(fe),H(fe==="agent")},className:`pointer-events-auto flex items-center gap-2 px-4 py-2 rounded-xl font-bold shadow-lg border ${t==="agent"?"bg-emerald-500 text-white":"bg-white/90 text-slate-700"}`,children:[t==="agent"?k.jsx(SE,{size:18}):k.jsx(lm,{size:18}),k.jsx("span",{className:"text-[10px] uppercase",children:t==="agent"?"Agent":"Citoyen"})]})]}),k.jsxs("div",{className:"absolute bottom-8 left-6 right-6 z-40 flex items-end justify-between pointer-events-none",children:[k.jsxs("div",{className:"bg-white/90 backdrop-blur-lg px-4 py-3 rounded-2xl shadow-xl border border-white/40 flex items-center gap-3 pointer-events-auto",children:[k.jsx("div",{className:"bg-red-500 p-1.5 rounded-lg",children:k.jsx(LE,{className:"text-white",size:18})}),k.jsxs("h1",{className:"text-lg font-bold text-slate-800",children:["a",k.jsx("span",{className:"text-red-600",children:"MEL"}),"iorons"]})]}),t==="citizen"&&!a&&!m&&k.jsx("button",{onClick:()=>c(!0),className:"bg-blue-600 text-white p-5 rounded-3xl shadow-2xl hover:scale-105 active:scale-95 transition-all pointer-events-auto",children:k.jsx(DE,{size:28,strokeWidth:3})})]}),a&&k.jsx("div",{className:"absolute inset-0 z-50 flex items-end justify-center bg-slate-900/20 backdrop-blur-[2px]",children:k.jsxs("div",{className:"bg-white w-full max-w-md rounded-t-[40px] shadow-2xl animate-in slide-in-from-bottom duration-300",children:[k.jsxs("div",{className:"px-8 py-6 border-b flex items-center justify-between",children:[k.jsx("h2",{className:"text-xl font-bold",children:"Nouveau Signalement"}),k.jsx("button",{onClick:()=>c(!1),className:"p-2 hover:bg-slate-100 rounded-full",children:k.jsx(Dh,{size:24})})]}),k.jsx("div",{className:"max-h-[75vh] overflow-y-auto",children:k.jsx(ST,{onSubmit:Xe,onCancel:()=>{c(!1),x(null)},initialLocation:E,userLocation:Ne,onLocationSelect:()=>{c(!1),v(!0)}})})]})}),A&&t==="agent"&&k.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[65vh] z-40 bg-white rounded-t-[40px] shadow-2xl border-t overflow-hidden",children:k.jsx(ox,{reports:r,onReportClick:I,onStatusChange:()=>{},onValidate:()=>{}})}),P&&k.jsx(sx,{report:P,onClose:()=>I(null),isAdmin:t==="agent"}),k.jsx(ax,{isOpen:Z,onClose:()=>ne(!1),userName:nt.name,userPhoto:nt.photo,points:nt.points,level:nt.level,badge:nt.badge})]})}iE.createRoot(document.getElementById("root")).render(k.jsx(zk,{}));
