(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();function um(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var pf={exports:{}},vu={},gf={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg;function Xw(){if(Vg)return nt;Vg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),m=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),I=Symbol.iterator;function k(O){return O===null||typeof O!="object"?null:(O=I&&O[I]||O["@@iterator"],typeof O=="function"?O:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,ne={};function ee(O,X,pe){this.props=O,this.context=X,this.refs=ne,this.updater=pe||H}ee.prototype.isReactComponent={},ee.prototype.setState=function(O,X){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,X,"setState")},ee.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ye(){}ye.prototype=ee.prototype;function he(O,X,pe){this.props=O,this.context=X,this.refs=ne,this.updater=pe||H}var ve=he.prototype=new ye;ve.constructor=he,K(ve,ee.prototype),ve.isPureReactComponent=!0;var Be=Array.isArray,Ke=Object.prototype.hasOwnProperty,Me={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function R(O,X,pe){var we,xe={},ce=null,$e=null;if(X!=null)for(we in X.ref!==void 0&&($e=X.ref),X.key!==void 0&&(ce=""+X.key),X)Ke.call(X,we)&&!j.hasOwnProperty(we)&&(xe[we]=X[we]);var Ue=arguments.length-2;if(Ue===1)xe.children=pe;else if(1<Ue){for(var rt=Array(Ue),Rt=0;Rt<Ue;Rt++)rt[Rt]=arguments[Rt+2];xe.children=rt}if(O&&O.defaultProps)for(we in Ue=O.defaultProps,Ue)xe[we]===void 0&&(xe[we]=Ue[we]);return{$$typeof:r,type:O,key:ce,ref:$e,props:xe,_owner:Me.current}}function D(O,X){return{$$typeof:r,type:O.type,key:X,ref:O.ref,props:O.props,_owner:O._owner}}function B(O){return typeof O=="object"&&O!==null&&O.$$typeof===r}function z(O){var X={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(pe){return X[pe]})}var W=/\/+/g;function M(O,X){return typeof O=="object"&&O!==null&&O.key!=null?z(""+O.key):X.toString(36)}function Ye(O,X,pe,we,xe){var ce=typeof O;(ce==="undefined"||ce==="boolean")&&(O=null);var $e=!1;if(O===null)$e=!0;else switch(ce){case"string":case"number":$e=!0;break;case"object":switch(O.$$typeof){case r:case e:$e=!0}}if($e)return $e=O,xe=xe($e),O=we===""?"."+M($e,0):we,Be(xe)?(pe="",O!=null&&(pe=O.replace(W,"$&/")+"/"),Ye(xe,X,pe,"",function(Rt){return Rt})):xe!=null&&(B(xe)&&(xe=D(xe,pe+(!xe.key||$e&&$e.key===xe.key?"":(""+xe.key).replace(W,"$&/")+"/")+O)),X.push(xe)),1;if($e=0,we=we===""?".":we+":",Be(O))for(var Ue=0;Ue<O.length;Ue++){ce=O[Ue];var rt=we+M(ce,Ue);$e+=Ye(ce,X,pe,rt,xe)}else if(rt=k(O),typeof rt=="function")for(O=rt.call(O),Ue=0;!(ce=O.next()).done;)ce=ce.value,rt=we+M(ce,Ue++),$e+=Ye(ce,X,pe,rt,xe);else if(ce==="object")throw X=String(O),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return $e}function lt(O,X,pe){if(O==null)return O;var we=[],xe=0;return Ye(O,we,"","",function(ce){return X.call(pe,ce,xe++)}),we}function fe(O){if(O._status===-1){var X=O._result;X=X(),X.then(function(pe){(O._status===0||O._status===-1)&&(O._status=1,O._result=pe)},function(pe){(O._status===0||O._status===-1)&&(O._status=2,O._result=pe)}),O._status===-1&&(O._status=0,O._result=X)}if(O._status===1)return O._result.default;throw O._result}var Ne={current:null},te={transition:null},_e={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:te,ReactCurrentOwner:Me};function re(){throw Error("act(...) is not supported in production builds of React.")}return nt.Children={map:lt,forEach:function(O,X,pe){lt(O,function(){X.apply(this,arguments)},pe)},count:function(O){var X=0;return lt(O,function(){X++}),X},toArray:function(O){return lt(O,function(X){return X})||[]},only:function(O){if(!B(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},nt.Component=ee,nt.Fragment=t,nt.Profiler=a,nt.PureComponent=he,nt.StrictMode=s,nt.Suspense=E,nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_e,nt.act=re,nt.cloneElement=function(O,X,pe){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var we=K({},O.props),xe=O.key,ce=O.ref,$e=O._owner;if(X!=null){if(X.ref!==void 0&&(ce=X.ref,$e=Me.current),X.key!==void 0&&(xe=""+X.key),O.type&&O.type.defaultProps)var Ue=O.type.defaultProps;for(rt in X)Ke.call(X,rt)&&!j.hasOwnProperty(rt)&&(we[rt]=X[rt]===void 0&&Ue!==void 0?Ue[rt]:X[rt])}var rt=arguments.length-2;if(rt===1)we.children=pe;else if(1<rt){Ue=Array(rt);for(var Rt=0;Rt<rt;Rt++)Ue[Rt]=arguments[Rt+2];we.children=Ue}return{$$typeof:r,type:O.type,key:xe,ref:ce,props:we,_owner:$e}},nt.createContext=function(O){return O={$$typeof:m,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:c,_context:O},O.Consumer=O},nt.createElement=R,nt.createFactory=function(O){var X=R.bind(null,O);return X.type=O,X},nt.createRef=function(){return{current:null}},nt.forwardRef=function(O){return{$$typeof:v,render:O}},nt.isValidElement=B,nt.lazy=function(O){return{$$typeof:P,_payload:{_status:-1,_result:O},_init:fe}},nt.memo=function(O,X){return{$$typeof:x,type:O,compare:X===void 0?null:X}},nt.startTransition=function(O){var X=te.transition;te.transition={};try{O()}finally{te.transition=X}},nt.unstable_act=re,nt.useCallback=function(O,X){return Ne.current.useCallback(O,X)},nt.useContext=function(O){return Ne.current.useContext(O)},nt.useDebugValue=function(){},nt.useDeferredValue=function(O){return Ne.current.useDeferredValue(O)},nt.useEffect=function(O,X){return Ne.current.useEffect(O,X)},nt.useId=function(){return Ne.current.useId()},nt.useImperativeHandle=function(O,X,pe){return Ne.current.useImperativeHandle(O,X,pe)},nt.useInsertionEffect=function(O,X){return Ne.current.useInsertionEffect(O,X)},nt.useLayoutEffect=function(O,X){return Ne.current.useLayoutEffect(O,X)},nt.useMemo=function(O,X){return Ne.current.useMemo(O,X)},nt.useReducer=function(O,X,pe){return Ne.current.useReducer(O,X,pe)},nt.useRef=function(O){return Ne.current.useRef(O)},nt.useState=function(O){return Ne.current.useState(O)},nt.useSyncExternalStore=function(O,X,pe){return Ne.current.useSyncExternalStore(O,X,pe)},nt.useTransition=function(){return Ne.current.useTransition()},nt.version="18.3.1",nt}var zg;function cm(){return zg||(zg=1,gf.exports=Xw()),gf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg;function Jw(){if(Fg)return vu;Fg=1;var r=cm(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function m(v,E,x){var P,I={},k=null,H=null;x!==void 0&&(k=""+x),E.key!==void 0&&(k=""+E.key),E.ref!==void 0&&(H=E.ref);for(P in E)s.call(E,P)&&!c.hasOwnProperty(P)&&(I[P]=E[P]);if(v&&v.defaultProps)for(P in E=v.defaultProps,E)I[P]===void 0&&(I[P]=E[P]);return{$$typeof:e,type:v,key:k,ref:H,props:I,_owner:a.current}}return vu.Fragment=t,vu.jsx=m,vu.jsxs=m,vu}var jg;function eE(){return jg||(jg=1,pf.exports=Jw()),pf.exports}var A=eE(),Yc={},_f={exports:{}},Sr={},yf={exports:{}},vf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg;function tE(){return Bg||(Bg=1,(function(r){function e(te,_e){var re=te.length;te.push(_e);e:for(;0<re;){var O=re-1>>>1,X=te[O];if(0<a(X,_e))te[O]=_e,te[re]=X,re=O;else break e}}function t(te){return te.length===0?null:te[0]}function s(te){if(te.length===0)return null;var _e=te[0],re=te.pop();if(re!==_e){te[0]=re;e:for(var O=0,X=te.length,pe=X>>>1;O<pe;){var we=2*(O+1)-1,xe=te[we],ce=we+1,$e=te[ce];if(0>a(xe,re))ce<X&&0>a($e,xe)?(te[O]=$e,te[ce]=re,O=ce):(te[O]=xe,te[we]=re,O=we);else if(ce<X&&0>a($e,re))te[O]=$e,te[ce]=re,O=ce;else break e}}return _e}function a(te,_e){var re=te.sortIndex-_e.sortIndex;return re!==0?re:te.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var m=Date,v=m.now();r.unstable_now=function(){return m.now()-v}}var E=[],x=[],P=1,I=null,k=3,H=!1,K=!1,ne=!1,ee=typeof setTimeout=="function"?setTimeout:null,ye=typeof clearTimeout=="function"?clearTimeout:null,he=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ve(te){for(var _e=t(x);_e!==null;){if(_e.callback===null)s(x);else if(_e.startTime<=te)s(x),_e.sortIndex=_e.expirationTime,e(E,_e);else break;_e=t(x)}}function Be(te){if(ne=!1,ve(te),!K)if(t(E)!==null)K=!0,fe(Ke);else{var _e=t(x);_e!==null&&Ne(Be,_e.startTime-te)}}function Ke(te,_e){K=!1,ne&&(ne=!1,ye(R),R=-1),H=!0;var re=k;try{for(ve(_e),I=t(E);I!==null&&(!(I.expirationTime>_e)||te&&!z());){var O=I.callback;if(typeof O=="function"){I.callback=null,k=I.priorityLevel;var X=O(I.expirationTime<=_e);_e=r.unstable_now(),typeof X=="function"?I.callback=X:I===t(E)&&s(E),ve(_e)}else s(E);I=t(E)}if(I!==null)var pe=!0;else{var we=t(x);we!==null&&Ne(Be,we.startTime-_e),pe=!1}return pe}finally{I=null,k=re,H=!1}}var Me=!1,j=null,R=-1,D=5,B=-1;function z(){return!(r.unstable_now()-B<D)}function W(){if(j!==null){var te=r.unstable_now();B=te;var _e=!0;try{_e=j(!0,te)}finally{_e?M():(Me=!1,j=null)}}else Me=!1}var M;if(typeof he=="function")M=function(){he(W)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,lt=Ye.port2;Ye.port1.onmessage=W,M=function(){lt.postMessage(null)}}else M=function(){ee(W,0)};function fe(te){j=te,Me||(Me=!0,M())}function Ne(te,_e){R=ee(function(){te(r.unstable_now())},_e)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(te){te.callback=null},r.unstable_continueExecution=function(){K||H||(K=!0,fe(Ke))},r.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<te?Math.floor(1e3/te):5},r.unstable_getCurrentPriorityLevel=function(){return k},r.unstable_getFirstCallbackNode=function(){return t(E)},r.unstable_next=function(te){switch(k){case 1:case 2:case 3:var _e=3;break;default:_e=k}var re=k;k=_e;try{return te()}finally{k=re}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(te,_e){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var re=k;k=te;try{return _e()}finally{k=re}},r.unstable_scheduleCallback=function(te,_e,re){var O=r.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?O+re:O):re=O,te){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=re+X,te={id:P++,callback:_e,priorityLevel:te,startTime:re,expirationTime:X,sortIndex:-1},re>O?(te.sortIndex=re,e(x,te),t(E)===null&&te===t(x)&&(ne?(ye(R),R=-1):ne=!0,Ne(Be,re-O))):(te.sortIndex=X,e(E,te),K||H||(K=!0,fe(Ke))),te},r.unstable_shouldYield=z,r.unstable_wrapCallback=function(te){var _e=k;return function(){var re=k;k=_e;try{return te.apply(this,arguments)}finally{k=re}}}})(vf)),vf}var Ug;function nE(){return Ug||(Ug=1,yf.exports=tE()),yf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg;function rE(){if(Wg)return Sr;Wg=1;var r=cm(),e=nE();function t(n){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+n,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(n,o){m(n,o),m(n+"Capture",o)}function m(n,o){for(a[n]=o,n=0;n<o.length;n++)s.add(o[n])}var v=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),E=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P={},I={};function k(n){return E.call(I,n)?!0:E.call(P,n)?!1:x.test(n)?I[n]=!0:(P[n]=!0,!1)}function H(n,o,u,f){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function K(n,o,u,f){if(o===null||typeof o>"u"||H(n,o,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function ne(n,o,u,f,g,_,S){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=n,this.type=o,this.sanitizeURL=_,this.removeEmptyString=S}var ee={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ee[n]=new ne(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var o=n[0];ee[o]=new ne(o,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){ee[n]=new ne(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ee[n]=new ne(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ee[n]=new ne(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){ee[n]=new ne(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){ee[n]=new ne(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){ee[n]=new ne(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){ee[n]=new ne(n,5,!1,n.toLowerCase(),null,!1,!1)});var ye=/[\-:]([a-z])/g;function he(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var o=n.replace(ye,he);ee[o]=new ne(o,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var o=n.replace(ye,he);ee[o]=new ne(o,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var o=n.replace(ye,he);ee[o]=new ne(o,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){ee[n]=new ne(n,1,!1,n.toLowerCase(),null,!1,!1)}),ee.xlinkHref=new ne("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){ee[n]=new ne(n,1,!1,n.toLowerCase(),null,!0,!0)});function ve(n,o,u,f){var g=ee.hasOwnProperty(o)?ee[o]:null;(g!==null?g.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(K(o,u,g,f)&&(u=null),f||g===null?k(o)&&(u===null?n.removeAttribute(o):n.setAttribute(o,""+u)):g.mustUseProperty?n[g.propertyName]=u===null?g.type===3?!1:"":u:(o=g.attributeName,f=g.attributeNamespace,u===null?n.removeAttribute(o):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?n.setAttributeNS(f,o,u):n.setAttribute(o,u))))}var Be=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ke=Symbol.for("react.element"),Me=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),z=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),Ye=Symbol.for("react.suspense_list"),lt=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),Ne=Symbol.for("react.offscreen"),te=Symbol.iterator;function _e(n){return n===null||typeof n!="object"?null:(n=te&&n[te]||n["@@iterator"],typeof n=="function"?n:null)}var re=Object.assign,O;function X(n){if(O===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);O=o&&o[1]||""}return`
`+O+n}var pe=!1;function we(n,o){if(!n||pe)return"";pe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(J){var f=J}Reflect.construct(n,[],o)}else{try{o.call()}catch(J){f=J}n.call(o.prototype)}else{try{throw Error()}catch(J){f=J}n()}}catch(J){if(J&&f&&typeof J.stack=="string"){for(var g=J.stack.split(`
`),_=f.stack.split(`
`),S=g.length-1,N=_.length-1;1<=S&&0<=N&&g[S]!==_[N];)N--;for(;1<=S&&0<=N;S--,N--)if(g[S]!==_[N]){if(S!==1||N!==1)do if(S--,N--,0>N||g[S]!==_[N]){var F=`
`+g[S].replace(" at new "," at ");return n.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",n.displayName)),F}while(1<=S&&0<=N);break}}}finally{pe=!1,Error.prepareStackTrace=u}return(n=n?n.displayName||n.name:"")?X(n):""}function xe(n){switch(n.tag){case 5:return X(n.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return n=we(n.type,!1),n;case 11:return n=we(n.type.render,!1),n;case 1:return n=we(n.type,!0),n;default:return""}}function ce(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case j:return"Fragment";case Me:return"Portal";case D:return"Profiler";case R:return"StrictMode";case M:return"Suspense";case Ye:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case z:return(n.displayName||"Context")+".Consumer";case B:return(n._context.displayName||"Context")+".Provider";case W:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case lt:return o=n.displayName||null,o!==null?o:ce(n.type)||"Memo";case fe:o=n._payload,n=n._init;try{return ce(n(o))}catch{}}return null}function $e(n){var o=n.type;switch(n.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=o.render,n=n.displayName||n.name||"",o.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(o);case 8:return o===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ue(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function rt(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Rt(n){var o=rt(n)?"checked":"value",u=Object.getOwnPropertyDescriptor(n.constructor.prototype,o),f=""+n[o];if(!n.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,_=u.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return g.call(this)},set:function(S){f=""+S,_.call(this,S)}}),Object.defineProperty(n,o,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function Ur(n){n._valueTracker||(n._valueTracker=Rt(n))}function sr(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return n&&(f=rt(n)?n.checked?"true":"false":n.value),n=f,n!==u?(o.setValue(n),!0):!1}function or(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Wr(n,o){var u=o.checked;return re({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??n._wrapperState.initialChecked})}function hs(n,o){var u=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;u=Ue(o.value!=null?o.value:u),n._wrapperState={initialChecked:f,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Hr(n,o){o=o.checked,o!=null&&ve(n,"checked",o,!1)}function _n(n,o){Hr(n,o);var u=Ue(o.value),f=o.type;if(u!=null)f==="number"?(u===0&&n.value===""||n.value!=u)&&(n.value=""+u):n.value!==""+u&&(n.value=""+u);else if(f==="submit"||f==="reset"){n.removeAttribute("value");return}o.hasOwnProperty("value")?ft(n,o.type,u):o.hasOwnProperty("defaultValue")&&ft(n,o.type,Ue(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(n.defaultChecked=!!o.defaultChecked)}function kr(n,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+n._wrapperState.initialValue,u||o===n.value||(n.value=o),n.defaultValue=o}u=n.name,u!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,u!==""&&(n.name=u)}function ft(n,o,u){(o!=="number"||or(n.ownerDocument)!==n)&&(u==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+u&&(n.defaultValue=""+u))}var St=Array.isArray;function yn(n,o,u,f){if(n=n.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<n.length;u++)g=o.hasOwnProperty("$"+n[u].value),n[u].selected!==g&&(n[u].selected=g),g&&f&&(n[u].defaultSelected=!0)}else{for(u=""+Ue(u),o=null,g=0;g<n.length;g++){if(n[g].value===u){n[g].selected=!0,f&&(n[g].defaultSelected=!0);return}o!==null||n[g].disabled||(o=n[g])}o!==null&&(o.selected=!0)}}function Ut(n,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return re({},o,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function $n(n,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(St(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}n._wrapperState={initialValue:Ue(u)}}function Zs(n,o){var u=Ue(o.value),f=Ue(o.defaultValue);u!=null&&(u=""+u,u!==n.value&&(n.value=u),o.defaultValue==null&&n.defaultValue!==u&&(n.defaultValue=u)),f!=null&&(n.defaultValue=""+f)}function qr(n){var o=n.textContent;o===n._wrapperState.initialValue&&o!==""&&o!==null&&(n.value=o)}function ar(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gi(n,o){return n==null||n==="http://www.w3.org/1999/xhtml"?ar(o):n==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var lr,Mi=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,f,g){MSApp.execUnsafeLocalFunction(function(){return n(o,u,f,g)})}:n})(function(n,o){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=o;else{for(lr=lr||document.createElement("div"),lr.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=lr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;o.firstChild;)n.appendChild(o.firstChild)}});function vn(n,o){if(o){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=o;return}}n.textContent=o}var ur={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ar=["Webkit","ms","Moz","O"];Object.keys(ur).forEach(function(n){Ar.forEach(function(o){o=o+n.charAt(0).toUpperCase()+n.substring(1),ur[o]=ur[n]})});function Rr(n,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||ur.hasOwnProperty(n)&&ur[n]?(""+o).trim():o+"px"}function $r(n,o){n=n.style;for(var u in o)if(o.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=Rr(u,o[u],f);u==="float"&&(u="cssFloat"),f?n.setProperty(u,g):n[u]=g}}var _i=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rn(n,o){if(o){if(_i[n]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function cr(n,o){if(n.indexOf("-")===-1)return typeof o.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hr=null;function wn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var dr=null,fr=null,Tt=null;function Di(n){if(n=Rs(n)){if(typeof dr!="function")throw Error(t(280));var o=n.stateNode;o&&(o=Ja(o),dr(n.stateNode,n.type,o))}}function Fe(n){fr?Tt?Tt.push(n):Tt=[n]:fr=n}function wt(){if(fr){var n=fr,o=Tt;if(Tt=fr=null,Di(n),o)for(n=0;n<o.length;n++)Di(o[n])}}function Ot(n,o){return n(o)}function Yt(){}var En=!1;function Pt(n,o,u){if(En)return n(o,u);En=!0;try{return Ot(n,o,u)}finally{En=!1,(fr!==null||Tt!==null)&&(Yt(),wt())}}function Wt(n,o){var u=n.stateNode;if(u===null)return null;var f=Ja(u);if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(n=n.type,f=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!f;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var Gn=!1;if(v)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){Gn=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch{Gn=!1}function cn(n,o,u,f,g,_,S,N,F){var J=Array.prototype.slice.call(arguments,3);try{o.apply(u,J)}catch(le){this.onError(le)}}var Vt=!1,Ee=null,Oi=!1,Zn=null,Yo={onError:function(n){Vt=!0,Ee=n}};function Xo(n,o,u,f,g,_,S,N,F){Vt=!1,Ee=null,cn.apply(Yo,arguments)}function ds(n,o,u,f,g,_,S,N,F){if(Xo.apply(this,arguments),Vt){if(Vt){var J=Ee;Vt=!1,Ee=null}else throw Error(t(198));Oi||(Oi=!0,Zn=J)}}function mr(n){var o=n,u=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,(o.flags&4098)!==0&&(u=o.return),n=o.return;while(n)}return o.tag===3?u:null}function Gr(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function Jo(n){if(mr(n)!==n)throw Error(t(188))}function ja(n){var o=n.alternate;if(!o){if(o=mr(n),o===null)throw Error(t(188));return o!==n?null:n}for(var u=n,f=o;;){var g=u.return;if(g===null)break;var _=g.alternate;if(_===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===u)return Jo(g),n;if(_===f)return Jo(g),o;_=_.sibling}throw Error(t(188))}if(u.return!==f.return)u=g,f=_;else{for(var S=!1,N=g.child;N;){if(N===u){S=!0,u=g,f=_;break}if(N===f){S=!0,f=g,u=_;break}N=N.sibling}if(!S){for(N=_.child;N;){if(N===u){S=!0,u=_,f=g;break}if(N===f){S=!0,f=_,u=g;break}N=N.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?n:o}function Ba(n){return n=ja(n),n!==null?fs(n):null}function fs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var o=fs(n);if(o!==null)return o;n=n.sibling}return null}var ea=e.unstable_scheduleCallback,ms=e.unstable_cancelCallback,ps=e.unstable_shouldYield,pr=e.unstable_requestPaint,It=e.unstable_now,$l=e.unstable_getCurrentPriorityLevel,Ks=e.unstable_ImmediatePriority,ta=e.unstable_UserBlockingPriority,gs=e.unstable_NormalPriority,_s=e.unstable_LowPriority,Zr=e.unstable_IdlePriority,Vi=null,Nn=null;function zi(n){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(Vi,n,void 0,(n.current.flags&128)===128)}catch{}}var Ge=Math.clz32?Math.clz32:gr,ut=Math.log,Tn=Math.LN2;function gr(n){return n>>>=0,n===0?32:31-(ut(n)/Tn|0)|0}var xn=64,Kr=4194304;function Ie(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function gt(n,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,g=n.suspendedLanes,_=n.pingedLanes,S=u&268435455;if(S!==0){var N=S&~g;N!==0?f=Ie(N):(_&=S,_!==0&&(f=Ie(_)))}else S=u&~g,S!==0?f=Ie(S):_!==0&&(f=Ie(_));if(f===0)return 0;if(o!==0&&o!==f&&(o&g)===0&&(g=f&-f,_=o&-o,g>=_||g===16&&(_&4194240)!==0))return o;if((f&4)!==0&&(f|=u&16),o=n.entangledLanes,o!==0)for(n=n.entanglements,o&=f;0<o;)u=31-Ge(o),g=1<<u,f|=n[u],o&=~g;return f}function yi(n,o){switch(n){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qr(n,o){for(var u=n.suspendedLanes,f=n.pingedLanes,g=n.expirationTimes,_=n.pendingLanes;0<_;){var S=31-Ge(_),N=1<<S,F=g[S];F===-1?((N&u)===0||(N&f)!==0)&&(g[S]=yi(N,o)):F<=o&&(n.expiredLanes|=N),_&=~N}}function hn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function na(){var n=xn;return xn<<=1,(xn&4194240)===0&&(xn=64),n}function Fi(n){for(var o=[],u=0;31>u;u++)o.push(n);return o}function Kn(n,o,u){n.pendingLanes|=o,o!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,o=31-Ge(o),n[o]=u}function Lt(n,o){var u=n.pendingLanes&~o;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=o,n.mutableReadLanes&=o,n.entangledLanes&=o,o=n.entanglements;var f=n.eventTimes;for(n=n.expirationTimes;0<u;){var g=31-Ge(u),_=1<<g;o[g]=0,f[g]=-1,n[g]=-1,u&=~_}}function Nr(n,o){var u=n.entangledLanes|=o;for(n=n.entanglements;u;){var f=31-Ge(u),g=1<<f;g&o|n[f]&o&&(n[f]|=o),u&=~g}}var et=0;function Ln(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ys,Yr,vs,ws,ji,_r=!1,Bi=[],Qn=null,Lr=null,Zt=null,Es=new Map,Oe=new Map,Mt=[],_t="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vi(n,o){switch(n){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":Lr=null;break;case"mouseover":case"mouseout":Zt=null;break;case"pointerover":case"pointerout":Es.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oe.delete(o.pointerId)}}function Yn(n,o,u,f,g,_){return n===null||n.nativeEvent!==_?(n={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:_,targetContainers:[g]},o!==null&&(o=Rs(o),o!==null&&Yr(o)),n):(n.eventSystemFlags|=f,o=n.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),n)}function Qs(n,o,u,f,g){switch(o){case"focusin":return Qn=Yn(Qn,n,o,u,f,g),!0;case"dragenter":return Lr=Yn(Lr,n,o,u,f,g),!0;case"mouseover":return Zt=Yn(Zt,n,o,u,f,g),!0;case"pointerover":var _=g.pointerId;return Es.set(_,Yn(Es.get(_)||null,n,o,u,f,g)),!0;case"gotpointercapture":return _=g.pointerId,Oe.set(_,Yn(Oe.get(_)||null,n,o,u,f,g)),!0}return!1}function Ui(n){var o=As(n.target);if(o!==null){var u=mr(o);if(u!==null){if(o=u.tag,o===13){if(o=Gr(u),o!==null){n.blockedOn=o,ji(n.priority,function(){vs(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function at(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var u=Is(n.domEventName,n.eventSystemFlags,o[0],n.nativeEvent);if(u===null){u=n.nativeEvent;var f=new u.constructor(u.type,u);hr=f,u.target.dispatchEvent(f),hr=null}else return o=Rs(u),o!==null&&Yr(o),n.blockedOn=u,!1;o.shift()}return!0}function Ys(n,o,u){at(n)&&u.delete(o)}function Ts(){_r=!1,Qn!==null&&at(Qn)&&(Qn=null),Lr!==null&&at(Lr)&&(Lr=null),Zt!==null&&at(Zt)&&(Zt=null),Es.forEach(Ys),Oe.forEach(Ys)}function Ct(n,o){n.blockedOn===o&&(n.blockedOn=null,_r||(_r=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ts)))}function Mn(n){function o(g){return Ct(g,n)}if(0<Bi.length){Ct(Bi[0],n);for(var u=1;u<Bi.length;u++){var f=Bi[u];f.blockedOn===n&&(f.blockedOn=null)}}for(Qn!==null&&Ct(Qn,n),Lr!==null&&Ct(Lr,n),Zt!==null&&Ct(Zt,n),Es.forEach(o),Oe.forEach(o),u=0;u<Mt.length;u++)f=Mt[u],f.blockedOn===n&&(f.blockedOn=null);for(;0<Mt.length&&(u=Mt[0],u.blockedOn===null);)Ui(u),u.blockedOn===null&&Mt.shift()}var Xr=Be.ReactCurrentBatchConfig,Jr=!0;function ei(n,o,u,f){var g=et,_=Xr.transition;Xr.transition=null;try{et=1,xs(n,o,u,f)}finally{et=g,Xr.transition=_}}function ra(n,o,u,f){var g=et,_=Xr.transition;Xr.transition=null;try{et=4,xs(n,o,u,f)}finally{et=g,Xr.transition=_}}function xs(n,o,u,f){if(Jr){var g=Is(n,o,u,f);if(g===null)i(n,o,f,ti,u),vi(n,f);else if(Qs(g,n,o,u,f))f.stopPropagation();else if(vi(n,f),o&4&&-1<_t.indexOf(n)){for(;g!==null;){var _=Rs(g);if(_!==null&&ys(_),_=Is(n,o,u,f),_===null&&i(n,o,f,ti,u),_===g)break;g=_}g!==null&&f.stopPropagation()}else i(n,o,f,null,u)}}var ti=null;function Is(n,o,u,f){if(ti=null,n=wn(f),n=As(n),n!==null)if(o=mr(n),o===null)n=null;else if(u=o.tag,u===13){if(n=Gr(o),n!==null)return n;n=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null);return ti=n,null}function tt(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($l()){case Ks:return 1;case ta:return 4;case gs:case _s:return 16;case Zr:return 536870912;default:return 16}default:return 16}}var Xn=null,dn=null,Jn=null;function ia(){if(Jn)return Jn;var n,o=dn,u=o.length,f,g="value"in Xn?Xn.value:Xn.textContent,_=g.length;for(n=0;n<u&&o[n]===g[n];n++);var S=u-n;for(f=1;f<=S&&o[u-f]===g[_-f];f++);return Jn=g.slice(n,1<f?1-f:void 0)}function Ss(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function yr(){return!0}function sa(){return!1}function sn(n){function o(u,f,g,_,S){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var N in n)n.hasOwnProperty(N)&&(u=n[N],this[N]=u?u(_):_[N]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?yr:sa,this.isPropagationStopped=sa,this}return re(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=yr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=yr)},persist:function(){},isPersistent:yr}),o}var ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ps=sn(ni),ri=re({},ni,{view:0,detail:0}),Xs=sn(ri),In,Js,Dn,On=re({},ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:je,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Dn&&(Dn&&n.type==="mousemove"?(In=n.screenX-Dn.screenX,Js=n.screenY-Dn.screenY):Js=In=0,Dn=n),In)},movementY:function(n){return"movementY"in n?n.movementY:Js}}),eo=sn(On),oa=re({},On,{dataTransfer:0}),to=sn(oa),no=re({},ri,{relatedTarget:0}),Xt=sn(no),aa=re({},ni,{animationName:0,elapsedTime:0,pseudoElement:0}),Ua=sn(aa),Wi=re({},ni,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),h=sn(Wi),y=re({},ni,{data:0}),T=sn(y),b={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function me(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=Q[n])?!!o[n]:!1}function je(){return me}var ct=re({},ri,{key:function(n){if(n.key){var o=b[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=Ss(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?q[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:je,charCode:function(n){return n.type==="keypress"?Ss(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ss(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),mt=sn(ct),zt=re({},On,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),er=sn(zt),Mr=re({},ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:je}),vr=sn(Mr),ii=re({},ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),ro=sn(ii),io=re({},On,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),id=sn(io),Dr=[9,13,27,32],Hi=v&&"CompositionEvent"in window,la=null;v&&"documentMode"in document&&(la=document.documentMode);var wi=v&&"TextEvent"in window&&!la,ec=v&&(!Hi||la&&8<la&&11>=la),Cs=" ",tc=!1;function so(n,o){switch(n){case"keyup":return Dr.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ei=!1;function sd(n,o){switch(n){case"compositionend":return Gl(o);case"keypress":return o.which!==32?null:(tc=!0,Cs);case"textInput":return n=o.data,n===Cs&&tc?null:n;default:return null}}function qi(n,o){if(Ei)return n==="compositionend"||!Hi&&so(n,o)?(n=ia(),Jn=dn=Xn=null,Ei=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ec&&o.locale!=="ko"?null:o.data;default:return null}}var Wa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nc(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!Wa[n.type]:o==="textarea"}function Ha(n,o,u,f){Fe(f),o=d(o,"onChange"),0<o.length&&(u=new Ps("onChange","change",null,u,f),n.push({event:u,listeners:o}))}var ua=null,tr=null;function od(n){nu(n,0)}function Ti(n){var o=Ns(n);if(sr(o))return n}function ad(n,o){if(n==="change")return o}var si=!1;if(v){var oo;if(v){var qa="oninput"in document;if(!qa){var $a=document.createElement("div");$a.setAttribute("oninput","return;"),qa=typeof $a.oninput=="function"}oo=qa}else oo=!1;si=oo&&(!document.documentMode||9<document.documentMode)}function ca(){ua&&(ua.detachEvent("onpropertychange",Ga),tr=ua=null)}function Ga(n){if(n.propertyName==="value"&&Ti(tr)){var o=[];Ha(o,tr,n,wn(n)),Pt(od,o)}}function Za(n,o,u){n==="focusin"?(ca(),ua=o,tr=u,ua.attachEvent("onpropertychange",Ga)):n==="focusout"&&ca()}function ao(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ti(tr)}function Ka(n,o){if(n==="click")return Ti(o)}function Zl(n,o){if(n==="input"||n==="change")return Ti(o)}function rc(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var Or=typeof Object.is=="function"?Object.is:rc;function $i(n,o){if(Or(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var u=Object.keys(n),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!E.call(o,g)||!Or(n[g],o[g]))return!1}return!0}function ic(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Kl(n,o){var u=ic(n);n=0;for(var f;u;){if(u.nodeType===3){if(f=n+u.textContent.length,n<=o&&f>=o)return{node:u,offset:o-n};n=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=ic(u)}}function sc(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?sc(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function Ql(){for(var n=window,o=or();o instanceof n.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)n=o.contentWindow;else break;o=or(n.document)}return o}function Yl(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}function oi(n){var o=Ql(),u=n.focusedElem,f=n.selectionRange;if(o!==u&&u&&u.ownerDocument&&sc(u.ownerDocument.documentElement,u)){if(f!==null&&Yl(u)){if(o=f.start,n=f.end,n===void 0&&(n=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(n,u.value.length);else if(n=(o=u.ownerDocument||document)&&o.defaultView||window,n.getSelection){n=n.getSelection();var g=u.textContent.length,_=Math.min(f.start,g);f=f.end===void 0?_:Math.min(f.end,g),!n.extend&&_>f&&(g=f,f=_,_=g),g=Kl(u,_);var S=Kl(u,f);g&&S&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==S.node||n.focusOffset!==S.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),n.removeAllRanges(),_>f?(n.addRange(o),n.extend(S.node,S.offset)):(o.setEnd(S.node,S.offset),n.addRange(o)))}}for(o=[],n=u;n=n.parentNode;)n.nodeType===1&&o.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)n=o[u],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Qa=v&&"documentMode"in document&&11>=document.documentMode,lo=null,uo=null,ha=null,Ya=!1;function oc(n,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Ya||lo==null||lo!==or(f)||(f=lo,"selectionStart"in f&&Yl(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),ha&&$i(ha,f)||(ha=f,f=d(uo,"onSelect"),0<f.length&&(o=new Ps("onSelect","select",null,o,u),n.push({event:o,listeners:f}),o.target=lo)))}function Gi(n,o){var u={};return u[n.toLowerCase()]=o.toLowerCase(),u["Webkit"+n]="webkit"+o,u["Moz"+n]="moz"+o,u}var co={animationend:Gi("Animation","AnimationEnd"),animationiteration:Gi("Animation","AnimationIteration"),animationstart:Gi("Animation","AnimationStart"),transitionend:Gi("Transition","TransitionEnd")},Zi={},Xl={};v&&(Xl=document.createElement("div").style,"AnimationEvent"in window||(delete co.animationend.animation,delete co.animationiteration.animation,delete co.animationstart.animation),"TransitionEvent"in window||delete co.transitionend.transition);function da(n){if(Zi[n])return Zi[n];if(!co[n])return n;var o=co[n],u;for(u in o)if(o.hasOwnProperty(u)&&u in Xl)return Zi[n]=o[u];return n}var ac=da("animationend"),ai=da("animationiteration"),Jl=da("animationstart"),eu=da("transitionend"),ho=new Map,lc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vr(n,o){ho.set(n,o),c(o,[n])}for(var bs=0;bs<lc.length;bs++){var Xa=lc[bs],uc=Xa.toLowerCase(),ld=Xa[0].toUpperCase()+Xa.slice(1);Vr(uc,"on"+ld)}Vr(ac,"onAnimationEnd"),Vr(ai,"onAnimationIteration"),Vr(Jl,"onAnimationStart"),Vr("dblclick","onDoubleClick"),Vr("focusin","onFocus"),Vr("focusout","onBlur"),Vr(eu,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cc=new Set("cancel close invalid load scroll toggle".split(" ").concat(fo));function tu(n,o,u){var f=n.type||"unknown-event";n.currentTarget=u,ds(f,o,void 0,n),n.currentTarget=null}function nu(n,o){o=(o&4)!==0;for(var u=0;u<n.length;u++){var f=n[u],g=f.event;f=f.listeners;e:{var _=void 0;if(o)for(var S=f.length-1;0<=S;S--){var N=f[S],F=N.instance,J=N.currentTarget;if(N=N.listener,F!==_&&g.isPropagationStopped())break e;tu(g,N,J),_=F}else for(S=0;S<f.length;S++){if(N=f[S],F=N.instance,J=N.currentTarget,N=N.listener,F!==_&&g.isPropagationStopped())break e;tu(g,N,J),_=F}}}if(Oi)throw n=Zn,Oi=!1,Zn=null,n}function xt(n,o){var u=o[_o];u===void 0&&(u=o[_o]=new Set);var f=n+"__bubble";u.has(f)||(hc(o,n,2,!1),u.add(f))}function ru(n,o,u){var f=0;o&&(f|=4),hc(u,n,f,o)}var fa="_reactListening"+Math.random().toString(36).slice(2);function mo(n){if(!n[fa]){n[fa]=!0,s.forEach(function(u){u!=="selectionchange"&&(cc.has(u)||ru(u,!1,n),ru(u,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[fa]||(o[fa]=!0,ru("selectionchange",!1,o))}}function hc(n,o,u,f){switch(tt(o)){case 1:var g=ei;break;case 4:g=ra;break;default:g=xs}u=g.bind(null,o,u,n),g=void 0,!Gn||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?n.addEventListener(o,u,{capture:!0,passive:g}):n.addEventListener(o,u,!0):g!==void 0?n.addEventListener(o,u,{passive:g}):n.addEventListener(o,u,!1)}function i(n,o,u,f,g){var _=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var N=f.stateNode.containerInfo;if(N===g||N.nodeType===8&&N.parentNode===g)break;if(S===4)for(S=f.return;S!==null;){var F=S.tag;if((F===3||F===4)&&(F=S.stateNode.containerInfo,F===g||F.nodeType===8&&F.parentNode===g))return;S=S.return}for(;N!==null;){if(S=As(N),S===null)return;if(F=S.tag,F===5||F===6){f=_=S;continue e}N=N.parentNode}}f=f.return}Pt(function(){var J=_,le=wn(u),ue=[];e:{var ae=ho.get(n);if(ae!==void 0){var Pe=Ps,ke=n;switch(n){case"keypress":if(Ss(u)===0)break e;case"keydown":case"keyup":Pe=mt;break;case"focusin":ke="focus",Pe=Xt;break;case"focusout":ke="blur",Pe=Xt;break;case"beforeblur":case"afterblur":Pe=Xt;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=eo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=to;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=vr;break;case ac:case ai:case Jl:Pe=Ua;break;case eu:Pe=ro;break;case"scroll":Pe=Xs;break;case"wheel":Pe=id;break;case"copy":case"cut":case"paste":Pe=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=er}var Ae=(o&4)!==0,Kt=!Ae&&n==="scroll",G=Ae?ae!==null?ae+"Capture":null:ae;Ae=[];for(var U=J,Z;U!==null;){Z=U;var de=Z.stateNode;if(Z.tag===5&&de!==null&&(Z=de,G!==null&&(de=Wt(U,G),de!=null&&Ae.push(l(U,de,Z)))),Kt)break;U=U.return}0<Ae.length&&(ae=new Pe(ae,ke,null,u,le),ue.push({event:ae,listeners:Ae}))}}if((o&7)===0){e:{if(ae=n==="mouseover"||n==="pointerover",Pe=n==="mouseout"||n==="pointerout",ae&&u!==hr&&(ke=u.relatedTarget||u.fromElement)&&(As(ke)||ke[yt]))break e;if((Pe||ae)&&(ae=le.window===le?le:(ae=le.ownerDocument)?ae.defaultView||ae.parentWindow:window,Pe?(ke=u.relatedTarget||u.toElement,Pe=J,ke=ke?As(ke):null,ke!==null&&(Kt=mr(ke),ke!==Kt||ke.tag!==5&&ke.tag!==6)&&(ke=null)):(Pe=null,ke=J),Pe!==ke)){if(Ae=eo,de="onMouseLeave",G="onMouseEnter",U="mouse",(n==="pointerout"||n==="pointerover")&&(Ae=er,de="onPointerLeave",G="onPointerEnter",U="pointer"),Kt=Pe==null?ae:Ns(Pe),Z=ke==null?ae:Ns(ke),ae=new Ae(de,U+"leave",Pe,u,le),ae.target=Kt,ae.relatedTarget=Z,de=null,As(le)===J&&(Ae=new Ae(G,U+"enter",ke,u,le),Ae.target=Z,Ae.relatedTarget=Kt,de=Ae),Kt=de,Pe&&ke)t:{for(Ae=Pe,G=ke,U=0,Z=Ae;Z;Z=p(Z))U++;for(Z=0,de=G;de;de=p(de))Z++;for(;0<U-Z;)Ae=p(Ae),U--;for(;0<Z-U;)G=p(G),Z--;for(;U--;){if(Ae===G||G!==null&&Ae===G.alternate)break t;Ae=p(Ae),G=p(G)}Ae=null}else Ae=null;Pe!==null&&w(ue,ae,Pe,Ae,!1),ke!==null&&Kt!==null&&w(ue,Kt,ke,Ae,!0)}}e:{if(ae=J?Ns(J):window,Pe=ae.nodeName&&ae.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&ae.type==="file")var Re=ad;else if(nc(ae))if(si)Re=Zl;else{Re=ao;var Ve=Za}else(Pe=ae.nodeName)&&Pe.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(Re=Ka);if(Re&&(Re=Re(n,J))){Ha(ue,Re,u,le);break e}Ve&&Ve(n,ae,J),n==="focusout"&&(Ve=ae._wrapperState)&&Ve.controlled&&ae.type==="number"&&ft(ae,"number",ae.value)}switch(Ve=J?Ns(J):window,n){case"focusin":(nc(Ve)||Ve.contentEditable==="true")&&(lo=Ve,uo=J,ha=null);break;case"focusout":ha=uo=lo=null;break;case"mousedown":Ya=!0;break;case"contextmenu":case"mouseup":case"dragend":Ya=!1,oc(ue,u,le);break;case"selectionchange":if(Qa)break;case"keydown":case"keyup":oc(ue,u,le)}var ze;if(Hi)e:{switch(n){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else Ei?so(n,u)&&(He="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(He="onCompositionStart");He&&(ec&&u.locale!=="ko"&&(Ei||He!=="onCompositionStart"?He==="onCompositionEnd"&&Ei&&(ze=ia()):(Xn=le,dn="value"in Xn?Xn.value:Xn.textContent,Ei=!0)),Ve=d(J,He),0<Ve.length&&(He=new T(He,n,null,u,le),ue.push({event:He,listeners:Ve}),ze?He.data=ze:(ze=Gl(u),ze!==null&&(He.data=ze)))),(ze=wi?sd(n,u):qi(n,u))&&(J=d(J,"onBeforeInput"),0<J.length&&(le=new T("onBeforeInput","beforeinput",null,u,le),ue.push({event:le,listeners:J}),le.data=ze))}nu(ue,o)})}function l(n,o,u){return{instance:n,listener:o,currentTarget:u}}function d(n,o){for(var u=o+"Capture",f=[];n!==null;){var g=n,_=g.stateNode;g.tag===5&&_!==null&&(g=_,_=Wt(n,u),_!=null&&f.unshift(l(n,_,g)),_=Wt(n,o),_!=null&&f.push(l(n,_,g))),n=n.return}return f}function p(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function w(n,o,u,f,g){for(var _=o._reactName,S=[];u!==null&&u!==f;){var N=u,F=N.alternate,J=N.stateNode;if(F!==null&&F===f)break;N.tag===5&&J!==null&&(N=J,g?(F=Wt(u,_),F!=null&&S.unshift(l(u,F,N))):g||(F=Wt(u,_),F!=null&&S.push(l(u,F,N)))),u=u.return}S.length!==0&&n.push({event:o,listeners:S})}var C=/\r\n?/g,V=/\u0000|\uFFFD/g;function $(n){return(typeof n=="string"?n:""+n).replace(C,`
`).replace(V,"")}function Y(n,o,u){if(o=$(o),$(n)!==o&&u)throw Error(t(425))}function oe(){}var Te=null,De=null;function Xe(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var on=typeof setTimeout=="function"?setTimeout:void 0,Jt=typeof clearTimeout=="function"?clearTimeout:void 0,nr=typeof Promise=="function"?Promise:void 0,Vn=typeof queueMicrotask=="function"?queueMicrotask:typeof nr<"u"?function(n){return nr.resolve(null).then(n).catch(po)}:on;function po(n){setTimeout(function(){throw n})}function iu(n,o){var u=o,f=0;do{var g=u.nextSibling;if(n.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){n.removeChild(g),Mn(o);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);Mn(o)}function Ki(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return n}function dc(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return n;o--}else u==="/$"&&o++}n=n.previousSibling}return null}var ks=Math.random().toString(36).slice(2),li="__reactFiber$"+ks,go="__reactProps$"+ks,yt="__reactContainer$"+ks,_o="__reactEvents$"+ks,ud="__reactListeners$"+ks,cd="__reactHandles$"+ks;function As(n){var o=n[li];if(o)return o;for(var u=n.parentNode;u;){if(o=u[yt]||u[li]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(n=dc(n);n!==null;){if(u=n[li])return u;n=dc(n)}return o}n=u,u=n.parentNode}return null}function Rs(n){return n=n[li]||n[yt],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ns(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Ja(n){return n[go]||null}var hd=[],el=-1;function yo(n){return{current:n}}function Nt(n){0>el||(n.current=hd[el],hd[el]=null,el--)}function bt(n,o){el++,hd[el]=n.current,n.current=o}var vo={},zn=yo(vo),wr=yo(!1),ma=vo;function tl(n,o){var u=n.type.contextTypes;if(!u)return vo;var f=n.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var g={},_;for(_ in u)g[_]=o[_];return f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=o,n.__reactInternalMemoizedMaskedChildContext=g),g}function Er(n){return n=n.childContextTypes,n!=null}function fc(){Nt(wr),Nt(zn)}function sp(n,o,u){if(zn.current!==vo)throw Error(t(168));bt(zn,o),bt(wr,u)}function op(n,o,u){var f=n.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in o))throw Error(t(108,$e(n)||"Unknown",g));return re({},u,f)}function mc(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||vo,ma=zn.current,bt(zn,n),bt(wr,wr.current),!0}function ap(n,o,u){var f=n.stateNode;if(!f)throw Error(t(169));u?(n=op(n,o,ma),f.__reactInternalMemoizedMergedChildContext=n,Nt(wr),Nt(zn),bt(zn,n)):Nt(wr),bt(wr,u)}var Ls=null,pc=!1,dd=!1;function lp(n){Ls===null?Ls=[n]:Ls.push(n)}function _w(n){pc=!0,lp(n)}function wo(){if(!dd&&Ls!==null){dd=!0;var n=0,o=et;try{var u=Ls;for(et=1;n<u.length;n++){var f=u[n];do f=f(!0);while(f!==null)}Ls=null,pc=!1}catch(g){throw Ls!==null&&(Ls=Ls.slice(n+1)),ea(Ks,wo),g}finally{et=o,dd=!1}}return null}var nl=[],rl=0,gc=null,_c=0,ui=[],ci=0,pa=null,Ms=1,Ds="";function ga(n,o){nl[rl++]=_c,nl[rl++]=gc,gc=n,_c=o}function up(n,o,u){ui[ci++]=Ms,ui[ci++]=Ds,ui[ci++]=pa,pa=n;var f=Ms;n=Ds;var g=32-Ge(f)-1;f&=~(1<<g),u+=1;var _=32-Ge(o)+g;if(30<_){var S=g-g%5;_=(f&(1<<S)-1).toString(32),f>>=S,g-=S,Ms=1<<32-Ge(o)+g|u<<g|f,Ds=_+n}else Ms=1<<_|u<<g|f,Ds=n}function fd(n){n.return!==null&&(ga(n,1),up(n,1,0))}function md(n){for(;n===gc;)gc=nl[--rl],nl[rl]=null,_c=nl[--rl],nl[rl]=null;for(;n===pa;)pa=ui[--ci],ui[ci]=null,Ds=ui[--ci],ui[ci]=null,Ms=ui[--ci],ui[ci]=null}var zr=null,Fr=null,Dt=!1,xi=null;function cp(n,o){var u=mi(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=n,o=n.deletions,o===null?(n.deletions=[u],n.flags|=16):o.push(u)}function hp(n,o){switch(n.tag){case 5:var u=n.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(n.stateNode=o,zr=n,Fr=Ki(o.firstChild),!0):!1;case 6:return o=n.pendingProps===""||o.nodeType!==3?null:o,o!==null?(n.stateNode=o,zr=n,Fr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=pa!==null?{id:Ms,overflow:Ds}:null,n.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=mi(18,null,null,0),u.stateNode=o,u.return=n,n.child=u,zr=n,Fr=null,!0):!1;default:return!1}}function pd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function gd(n){if(Dt){var o=Fr;if(o){var u=o;if(!hp(n,o)){if(pd(n))throw Error(t(418));o=Ki(u.nextSibling);var f=zr;o&&hp(n,o)?cp(f,u):(n.flags=n.flags&-4097|2,Dt=!1,zr=n)}}else{if(pd(n))throw Error(t(418));n.flags=n.flags&-4097|2,Dt=!1,zr=n}}}function dp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;zr=n}function yc(n){if(n!==zr)return!1;if(!Dt)return dp(n),Dt=!0,!1;var o;if((o=n.tag!==3)&&!(o=n.tag!==5)&&(o=n.type,o=o!=="head"&&o!=="body"&&!Xe(n.type,n.memoizedProps)),o&&(o=Fr)){if(pd(n))throw fp(),Error(t(418));for(;o;)cp(n,o),o=Ki(o.nextSibling)}if(dp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,o=0;n;){if(n.nodeType===8){var u=n.data;if(u==="/$"){if(o===0){Fr=Ki(n.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}n=n.nextSibling}Fr=null}}else Fr=zr?Ki(n.stateNode.nextSibling):null;return!0}function fp(){for(var n=Fr;n;)n=Ki(n.nextSibling)}function il(){Fr=zr=null,Dt=!1}function _d(n){xi===null?xi=[n]:xi.push(n)}var yw=Be.ReactCurrentBatchConfig;function su(n,o,u){if(n=u.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,n));var g=f,_=""+n;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===_?o.ref:(o=function(S){var N=g.refs;S===null?delete N[_]:N[_]=S},o._stringRef=_,o)}if(typeof n!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,n))}return n}function vc(n,o){throw n=Object.prototype.toString.call(o),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n))}function mp(n){var o=n._init;return o(n._payload)}function pp(n){function o(G,U){if(n){var Z=G.deletions;Z===null?(G.deletions=[U],G.flags|=16):Z.push(U)}}function u(G,U){if(!n)return null;for(;U!==null;)o(G,U),U=U.sibling;return null}function f(G,U){for(G=new Map;U!==null;)U.key!==null?G.set(U.key,U):G.set(U.index,U),U=U.sibling;return G}function g(G,U){return G=bo(G,U),G.index=0,G.sibling=null,G}function _(G,U,Z){return G.index=Z,n?(Z=G.alternate,Z!==null?(Z=Z.index,Z<U?(G.flags|=2,U):Z):(G.flags|=2,U)):(G.flags|=1048576,U)}function S(G){return n&&G.alternate===null&&(G.flags|=2),G}function N(G,U,Z,de){return U===null||U.tag!==6?(U=uf(Z,G.mode,de),U.return=G,U):(U=g(U,Z),U.return=G,U)}function F(G,U,Z,de){var Re=Z.type;return Re===j?le(G,U,Z.props.children,de,Z.key):U!==null&&(U.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===fe&&mp(Re)===U.type)?(de=g(U,Z.props),de.ref=su(G,U,Z),de.return=G,de):(de=Wc(Z.type,Z.key,Z.props,null,G.mode,de),de.ref=su(G,U,Z),de.return=G,de)}function J(G,U,Z,de){return U===null||U.tag!==4||U.stateNode.containerInfo!==Z.containerInfo||U.stateNode.implementation!==Z.implementation?(U=cf(Z,G.mode,de),U.return=G,U):(U=g(U,Z.children||[]),U.return=G,U)}function le(G,U,Z,de,Re){return U===null||U.tag!==7?(U=Ia(Z,G.mode,de,Re),U.return=G,U):(U=g(U,Z),U.return=G,U)}function ue(G,U,Z){if(typeof U=="string"&&U!==""||typeof U=="number")return U=uf(""+U,G.mode,Z),U.return=G,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Ke:return Z=Wc(U.type,U.key,U.props,null,G.mode,Z),Z.ref=su(G,null,U),Z.return=G,Z;case Me:return U=cf(U,G.mode,Z),U.return=G,U;case fe:var de=U._init;return ue(G,de(U._payload),Z)}if(St(U)||_e(U))return U=Ia(U,G.mode,Z,null),U.return=G,U;vc(G,U)}return null}function ae(G,U,Z,de){var Re=U!==null?U.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Re!==null?null:N(G,U,""+Z,de);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Ke:return Z.key===Re?F(G,U,Z,de):null;case Me:return Z.key===Re?J(G,U,Z,de):null;case fe:return Re=Z._init,ae(G,U,Re(Z._payload),de)}if(St(Z)||_e(Z))return Re!==null?null:le(G,U,Z,de,null);vc(G,Z)}return null}function Pe(G,U,Z,de,Re){if(typeof de=="string"&&de!==""||typeof de=="number")return G=G.get(Z)||null,N(U,G,""+de,Re);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case Ke:return G=G.get(de.key===null?Z:de.key)||null,F(U,G,de,Re);case Me:return G=G.get(de.key===null?Z:de.key)||null,J(U,G,de,Re);case fe:var Ve=de._init;return Pe(G,U,Z,Ve(de._payload),Re)}if(St(de)||_e(de))return G=G.get(Z)||null,le(U,G,de,Re,null);vc(U,de)}return null}function ke(G,U,Z,de){for(var Re=null,Ve=null,ze=U,He=U=0,pn=null;ze!==null&&He<Z.length;He++){ze.index>He?(pn=ze,ze=null):pn=ze.sibling;var pt=ae(G,ze,Z[He],de);if(pt===null){ze===null&&(ze=pn);break}n&&ze&&pt.alternate===null&&o(G,ze),U=_(pt,U,He),Ve===null?Re=pt:Ve.sibling=pt,Ve=pt,ze=pn}if(He===Z.length)return u(G,ze),Dt&&ga(G,He),Re;if(ze===null){for(;He<Z.length;He++)ze=ue(G,Z[He],de),ze!==null&&(U=_(ze,U,He),Ve===null?Re=ze:Ve.sibling=ze,Ve=ze);return Dt&&ga(G,He),Re}for(ze=f(G,ze);He<Z.length;He++)pn=Pe(ze,G,He,Z[He],de),pn!==null&&(n&&pn.alternate!==null&&ze.delete(pn.key===null?He:pn.key),U=_(pn,U,He),Ve===null?Re=pn:Ve.sibling=pn,Ve=pn);return n&&ze.forEach(function(ko){return o(G,ko)}),Dt&&ga(G,He),Re}function Ae(G,U,Z,de){var Re=_e(Z);if(typeof Re!="function")throw Error(t(150));if(Z=Re.call(Z),Z==null)throw Error(t(151));for(var Ve=Re=null,ze=U,He=U=0,pn=null,pt=Z.next();ze!==null&&!pt.done;He++,pt=Z.next()){ze.index>He?(pn=ze,ze=null):pn=ze.sibling;var ko=ae(G,ze,pt.value,de);if(ko===null){ze===null&&(ze=pn);break}n&&ze&&ko.alternate===null&&o(G,ze),U=_(ko,U,He),Ve===null?Re=ko:Ve.sibling=ko,Ve=ko,ze=pn}if(pt.done)return u(G,ze),Dt&&ga(G,He),Re;if(ze===null){for(;!pt.done;He++,pt=Z.next())pt=ue(G,pt.value,de),pt!==null&&(U=_(pt,U,He),Ve===null?Re=pt:Ve.sibling=pt,Ve=pt);return Dt&&ga(G,He),Re}for(ze=f(G,ze);!pt.done;He++,pt=Z.next())pt=Pe(ze,G,He,pt.value,de),pt!==null&&(n&&pt.alternate!==null&&ze.delete(pt.key===null?He:pt.key),U=_(pt,U,He),Ve===null?Re=pt:Ve.sibling=pt,Ve=pt);return n&&ze.forEach(function(Yw){return o(G,Yw)}),Dt&&ga(G,He),Re}function Kt(G,U,Z,de){if(typeof Z=="object"&&Z!==null&&Z.type===j&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Ke:e:{for(var Re=Z.key,Ve=U;Ve!==null;){if(Ve.key===Re){if(Re=Z.type,Re===j){if(Ve.tag===7){u(G,Ve.sibling),U=g(Ve,Z.props.children),U.return=G,G=U;break e}}else if(Ve.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===fe&&mp(Re)===Ve.type){u(G,Ve.sibling),U=g(Ve,Z.props),U.ref=su(G,Ve,Z),U.return=G,G=U;break e}u(G,Ve);break}else o(G,Ve);Ve=Ve.sibling}Z.type===j?(U=Ia(Z.props.children,G.mode,de,Z.key),U.return=G,G=U):(de=Wc(Z.type,Z.key,Z.props,null,G.mode,de),de.ref=su(G,U,Z),de.return=G,G=de)}return S(G);case Me:e:{for(Ve=Z.key;U!==null;){if(U.key===Ve)if(U.tag===4&&U.stateNode.containerInfo===Z.containerInfo&&U.stateNode.implementation===Z.implementation){u(G,U.sibling),U=g(U,Z.children||[]),U.return=G,G=U;break e}else{u(G,U);break}else o(G,U);U=U.sibling}U=cf(Z,G.mode,de),U.return=G,G=U}return S(G);case fe:return Ve=Z._init,Kt(G,U,Ve(Z._payload),de)}if(St(Z))return ke(G,U,Z,de);if(_e(Z))return Ae(G,U,Z,de);vc(G,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"?(Z=""+Z,U!==null&&U.tag===6?(u(G,U.sibling),U=g(U,Z),U.return=G,G=U):(u(G,U),U=uf(Z,G.mode,de),U.return=G,G=U),S(G)):u(G,U)}return Kt}var sl=pp(!0),gp=pp(!1),wc=yo(null),Ec=null,ol=null,yd=null;function vd(){yd=ol=Ec=null}function wd(n){var o=wc.current;Nt(wc),n._currentValue=o}function Ed(n,o,u){for(;n!==null;){var f=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),n===u)break;n=n.return}}function al(n,o){Ec=n,yd=ol=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&o)!==0&&(Tr=!0),n.firstContext=null)}function hi(n){var o=n._currentValue;if(yd!==n)if(n={context:n,memoizedValue:o,next:null},ol===null){if(Ec===null)throw Error(t(308));ol=n,Ec.dependencies={lanes:0,firstContext:n}}else ol=ol.next=n;return o}var _a=null;function Td(n){_a===null?_a=[n]:_a.push(n)}function _p(n,o,u,f){var g=o.interleaved;return g===null?(u.next=u,Td(o)):(u.next=g.next,g.next=u),o.interleaved=u,Os(n,f)}function Os(n,o){n.lanes|=o;var u=n.alternate;for(u!==null&&(u.lanes|=o),u=n,n=n.return;n!==null;)n.childLanes|=o,u=n.alternate,u!==null&&(u.childLanes|=o),u=n,n=n.return;return u.tag===3?u.stateNode:null}var Eo=!1;function xd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yp(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Vs(n,o){return{eventTime:n,lane:o,tag:0,payload:null,callback:null,next:null}}function To(n,o,u){var f=n.updateQueue;if(f===null)return null;if(f=f.shared,(dt&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,Os(n,u)}return g=f.interleaved,g===null?(o.next=o,Td(f)):(o.next=g.next,g.next=o),f.interleaved=o,Os(n,u)}function Tc(n,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var f=o.lanes;f&=n.pendingLanes,u|=f,o.lanes=u,Nr(n,u)}}function vp(n,o){var u=n.updateQueue,f=n.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};_===null?g=_=S:_=_.next=S,u=u.next}while(u!==null);_===null?g=_=o:_=_.next=o}else g=_=o;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:f.shared,effects:f.effects},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=o:n.next=o,u.lastBaseUpdate=o}function xc(n,o,u,f){var g=n.updateQueue;Eo=!1;var _=g.firstBaseUpdate,S=g.lastBaseUpdate,N=g.shared.pending;if(N!==null){g.shared.pending=null;var F=N,J=F.next;F.next=null,S===null?_=J:S.next=J,S=F;var le=n.alternate;le!==null&&(le=le.updateQueue,N=le.lastBaseUpdate,N!==S&&(N===null?le.firstBaseUpdate=J:N.next=J,le.lastBaseUpdate=F))}if(_!==null){var ue=g.baseState;S=0,le=J=F=null,N=_;do{var ae=N.lane,Pe=N.eventTime;if((f&ae)===ae){le!==null&&(le=le.next={eventTime:Pe,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var ke=n,Ae=N;switch(ae=o,Pe=u,Ae.tag){case 1:if(ke=Ae.payload,typeof ke=="function"){ue=ke.call(Pe,ue,ae);break e}ue=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Ae.payload,ae=typeof ke=="function"?ke.call(Pe,ue,ae):ke,ae==null)break e;ue=re({},ue,ae);break e;case 2:Eo=!0}}N.callback!==null&&N.lane!==0&&(n.flags|=64,ae=g.effects,ae===null?g.effects=[N]:ae.push(N))}else Pe={eventTime:Pe,lane:ae,tag:N.tag,payload:N.payload,callback:N.callback,next:null},le===null?(J=le=Pe,F=ue):le=le.next=Pe,S|=ae;if(N=N.next,N===null){if(N=g.shared.pending,N===null)break;ae=N,N=ae.next,ae.next=null,g.lastBaseUpdate=ae,g.shared.pending=null}}while(!0);if(le===null&&(F=ue),g.baseState=F,g.firstBaseUpdate=J,g.lastBaseUpdate=le,o=g.shared.interleaved,o!==null){g=o;do S|=g.lane,g=g.next;while(g!==o)}else _===null&&(g.shared.lanes=0);wa|=S,n.lanes=S,n.memoizedState=ue}}function wp(n,o,u){if(n=o.effects,o.effects=null,n!==null)for(o=0;o<n.length;o++){var f=n[o],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var ou={},Qi=yo(ou),au=yo(ou),lu=yo(ou);function ya(n){if(n===ou)throw Error(t(174));return n}function Id(n,o){switch(bt(lu,o),bt(au,n),bt(Qi,ou),n=o.nodeType,n){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:gi(null,"");break;default:n=n===8?o.parentNode:o,o=n.namespaceURI||null,n=n.tagName,o=gi(o,n)}Nt(Qi),bt(Qi,o)}function ll(){Nt(Qi),Nt(au),Nt(lu)}function Ep(n){ya(lu.current);var o=ya(Qi.current),u=gi(o,n.type);o!==u&&(bt(au,n),bt(Qi,u))}function Sd(n){au.current===n&&(Nt(Qi),Nt(au))}var Ft=yo(0);function Ic(n){for(var o=n;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Pd=[];function Cd(){for(var n=0;n<Pd.length;n++)Pd[n]._workInProgressVersionPrimary=null;Pd.length=0}var Sc=Be.ReactCurrentDispatcher,bd=Be.ReactCurrentBatchConfig,va=0,jt=null,an=null,fn=null,Pc=!1,uu=!1,cu=0,vw=0;function Fn(){throw Error(t(321))}function kd(n,o){if(o===null)return!1;for(var u=0;u<o.length&&u<n.length;u++)if(!Or(n[u],o[u]))return!1;return!0}function Ad(n,o,u,f,g,_){if(va=_,jt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Sc.current=n===null||n.memoizedState===null?xw:Iw,n=u(f,g),uu){_=0;do{if(uu=!1,cu=0,25<=_)throw Error(t(301));_+=1,fn=an=null,o.updateQueue=null,Sc.current=Sw,n=u(f,g)}while(uu)}if(Sc.current=kc,o=an!==null&&an.next!==null,va=0,fn=an=jt=null,Pc=!1,o)throw Error(t(300));return n}function Rd(){var n=cu!==0;return cu=0,n}function Yi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?jt.memoizedState=fn=n:fn=fn.next=n,fn}function di(){if(an===null){var n=jt.alternate;n=n!==null?n.memoizedState:null}else n=an.next;var o=fn===null?jt.memoizedState:fn.next;if(o!==null)fn=o,an=n;else{if(n===null)throw Error(t(310));an=n,n={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},fn===null?jt.memoizedState=fn=n:fn=fn.next=n}return fn}function hu(n,o){return typeof o=="function"?o(n):o}function Nd(n){var o=di(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var f=an,g=f.baseQueue,_=u.pending;if(_!==null){if(g!==null){var S=g.next;g.next=_.next,_.next=S}f.baseQueue=g=_,u.pending=null}if(g!==null){_=g.next,f=f.baseState;var N=S=null,F=null,J=_;do{var le=J.lane;if((va&le)===le)F!==null&&(F=F.next={lane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),f=J.hasEagerState?J.eagerState:n(f,J.action);else{var ue={lane:le,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};F===null?(N=F=ue,S=f):F=F.next=ue,jt.lanes|=le,wa|=le}J=J.next}while(J!==null&&J!==_);F===null?S=f:F.next=N,Or(f,o.memoizedState)||(Tr=!0),o.memoizedState=f,o.baseState=S,o.baseQueue=F,u.lastRenderedState=f}if(n=u.interleaved,n!==null){g=n;do _=g.lane,jt.lanes|=_,wa|=_,g=g.next;while(g!==n)}else g===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Ld(n){var o=di(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var f=u.dispatch,g=u.pending,_=o.memoizedState;if(g!==null){u.pending=null;var S=g=g.next;do _=n(_,S.action),S=S.next;while(S!==g);Or(_,o.memoizedState)||(Tr=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),u.lastRenderedState=_}return[_,f]}function Tp(){}function xp(n,o){var u=jt,f=di(),g=o(),_=!Or(f.memoizedState,g);if(_&&(f.memoizedState=g,Tr=!0),f=f.queue,Md(Pp.bind(null,u,f,n),[n]),f.getSnapshot!==o||_||fn!==null&&fn.memoizedState.tag&1){if(u.flags|=2048,du(9,Sp.bind(null,u,f,g,o),void 0,null),mn===null)throw Error(t(349));(va&30)!==0||Ip(u,o,g)}return g}function Ip(n,o,u){n.flags|=16384,n={getSnapshot:o,value:u},o=jt.updateQueue,o===null?(o={lastEffect:null,stores:null},jt.updateQueue=o,o.stores=[n]):(u=o.stores,u===null?o.stores=[n]:u.push(n))}function Sp(n,o,u,f){o.value=u,o.getSnapshot=f,Cp(o)&&bp(n)}function Pp(n,o,u){return u(function(){Cp(o)&&bp(n)})}function Cp(n){var o=n.getSnapshot;n=n.value;try{var u=o();return!Or(n,u)}catch{return!0}}function bp(n){var o=Os(n,1);o!==null&&Ci(o,n,1,-1)}function kp(n){var o=Yi();return typeof n=="function"&&(n=n()),o.memoizedState=o.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hu,lastRenderedState:n},o.queue=n,n=n.dispatch=Tw.bind(null,jt,n),[o.memoizedState,n]}function du(n,o,u,f){return n={tag:n,create:o,destroy:u,deps:f,next:null},o=jt.updateQueue,o===null?(o={lastEffect:null,stores:null},jt.updateQueue=o,o.lastEffect=n.next=n):(u=o.lastEffect,u===null?o.lastEffect=n.next=n:(f=u.next,u.next=n,n.next=f,o.lastEffect=n)),n}function Ap(){return di().memoizedState}function Cc(n,o,u,f){var g=Yi();jt.flags|=n,g.memoizedState=du(1|o,u,void 0,f===void 0?null:f)}function bc(n,o,u,f){var g=di();f=f===void 0?null:f;var _=void 0;if(an!==null){var S=an.memoizedState;if(_=S.destroy,f!==null&&kd(f,S.deps)){g.memoizedState=du(o,u,_,f);return}}jt.flags|=n,g.memoizedState=du(1|o,u,_,f)}function Rp(n,o){return Cc(8390656,8,n,o)}function Md(n,o){return bc(2048,8,n,o)}function Np(n,o){return bc(4,2,n,o)}function Lp(n,o){return bc(4,4,n,o)}function Mp(n,o){if(typeof o=="function")return n=n(),o(n),function(){o(null)};if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function Dp(n,o,u){return u=u!=null?u.concat([n]):null,bc(4,4,Mp.bind(null,o,n),u)}function Dd(){}function Op(n,o){var u=di();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&kd(o,f[1])?f[0]:(u.memoizedState=[n,o],n)}function Vp(n,o){var u=di();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&kd(o,f[1])?f[0]:(n=n(),u.memoizedState=[n,o],n)}function zp(n,o,u){return(va&21)===0?(n.baseState&&(n.baseState=!1,Tr=!0),n.memoizedState=u):(Or(u,o)||(u=na(),jt.lanes|=u,wa|=u,n.baseState=!0),o)}function ww(n,o){var u=et;et=u!==0&&4>u?u:4,n(!0);var f=bd.transition;bd.transition={};try{n(!1),o()}finally{et=u,bd.transition=f}}function Fp(){return di().memoizedState}function Ew(n,o,u){var f=Po(n);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},jp(n))Bp(o,u);else if(u=_p(n,o,u,f),u!==null){var g=ir();Ci(u,n,f,g),Up(u,o,f)}}function Tw(n,o,u){var f=Po(n),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(jp(n))Bp(o,g);else{var _=n.alternate;if(n.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var S=o.lastRenderedState,N=_(S,u);if(g.hasEagerState=!0,g.eagerState=N,Or(N,S)){var F=o.interleaved;F===null?(g.next=g,Td(o)):(g.next=F.next,F.next=g),o.interleaved=g;return}}catch{}finally{}u=_p(n,o,g,f),u!==null&&(g=ir(),Ci(u,n,f,g),Up(u,o,f))}}function jp(n){var o=n.alternate;return n===jt||o!==null&&o===jt}function Bp(n,o){uu=Pc=!0;var u=n.pending;u===null?o.next=o:(o.next=u.next,u.next=o),n.pending=o}function Up(n,o,u){if((u&4194240)!==0){var f=o.lanes;f&=n.pendingLanes,u|=f,o.lanes=u,Nr(n,u)}}var kc={readContext:hi,useCallback:Fn,useContext:Fn,useEffect:Fn,useImperativeHandle:Fn,useInsertionEffect:Fn,useLayoutEffect:Fn,useMemo:Fn,useReducer:Fn,useRef:Fn,useState:Fn,useDebugValue:Fn,useDeferredValue:Fn,useTransition:Fn,useMutableSource:Fn,useSyncExternalStore:Fn,useId:Fn,unstable_isNewReconciler:!1},xw={readContext:hi,useCallback:function(n,o){return Yi().memoizedState=[n,o===void 0?null:o],n},useContext:hi,useEffect:Rp,useImperativeHandle:function(n,o,u){return u=u!=null?u.concat([n]):null,Cc(4194308,4,Mp.bind(null,o,n),u)},useLayoutEffect:function(n,o){return Cc(4194308,4,n,o)},useInsertionEffect:function(n,o){return Cc(4,2,n,o)},useMemo:function(n,o){var u=Yi();return o=o===void 0?null:o,n=n(),u.memoizedState=[n,o],n},useReducer:function(n,o,u){var f=Yi();return o=u!==void 0?u(o):o,f.memoizedState=f.baseState=o,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:o},f.queue=n,n=n.dispatch=Ew.bind(null,jt,n),[f.memoizedState,n]},useRef:function(n){var o=Yi();return n={current:n},o.memoizedState=n},useState:kp,useDebugValue:Dd,useDeferredValue:function(n){return Yi().memoizedState=n},useTransition:function(){var n=kp(!1),o=n[0];return n=ww.bind(null,n[1]),Yi().memoizedState=n,[o,n]},useMutableSource:function(){},useSyncExternalStore:function(n,o,u){var f=jt,g=Yi();if(Dt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),mn===null)throw Error(t(349));(va&30)!==0||Ip(f,o,u)}g.memoizedState=u;var _={value:u,getSnapshot:o};return g.queue=_,Rp(Pp.bind(null,f,_,n),[n]),f.flags|=2048,du(9,Sp.bind(null,f,_,u,o),void 0,null),u},useId:function(){var n=Yi(),o=mn.identifierPrefix;if(Dt){var u=Ds,f=Ms;u=(f&~(1<<32-Ge(f)-1)).toString(32)+u,o=":"+o+"R"+u,u=cu++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=vw++,o=":"+o+"r"+u.toString(32)+":";return n.memoizedState=o},unstable_isNewReconciler:!1},Iw={readContext:hi,useCallback:Op,useContext:hi,useEffect:Md,useImperativeHandle:Dp,useInsertionEffect:Np,useLayoutEffect:Lp,useMemo:Vp,useReducer:Nd,useRef:Ap,useState:function(){return Nd(hu)},useDebugValue:Dd,useDeferredValue:function(n){var o=di();return zp(o,an.memoizedState,n)},useTransition:function(){var n=Nd(hu)[0],o=di().memoizedState;return[n,o]},useMutableSource:Tp,useSyncExternalStore:xp,useId:Fp,unstable_isNewReconciler:!1},Sw={readContext:hi,useCallback:Op,useContext:hi,useEffect:Md,useImperativeHandle:Dp,useInsertionEffect:Np,useLayoutEffect:Lp,useMemo:Vp,useReducer:Ld,useRef:Ap,useState:function(){return Ld(hu)},useDebugValue:Dd,useDeferredValue:function(n){var o=di();return an===null?o.memoizedState=n:zp(o,an.memoizedState,n)},useTransition:function(){var n=Ld(hu)[0],o=di().memoizedState;return[n,o]},useMutableSource:Tp,useSyncExternalStore:xp,useId:Fp,unstable_isNewReconciler:!1};function Ii(n,o){if(n&&n.defaultProps){o=re({},o),n=n.defaultProps;for(var u in n)o[u]===void 0&&(o[u]=n[u]);return o}return o}function Od(n,o,u,f){o=n.memoizedState,u=u(f,o),u=u==null?o:re({},o,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var Ac={isMounted:function(n){return(n=n._reactInternals)?mr(n)===n:!1},enqueueSetState:function(n,o,u){n=n._reactInternals;var f=ir(),g=Po(n),_=Vs(f,g);_.payload=o,u!=null&&(_.callback=u),o=To(n,_,g),o!==null&&(Ci(o,n,g,f),Tc(o,n,g))},enqueueReplaceState:function(n,o,u){n=n._reactInternals;var f=ir(),g=Po(n),_=Vs(f,g);_.tag=1,_.payload=o,u!=null&&(_.callback=u),o=To(n,_,g),o!==null&&(Ci(o,n,g,f),Tc(o,n,g))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var u=ir(),f=Po(n),g=Vs(u,f);g.tag=2,o!=null&&(g.callback=o),o=To(n,g,f),o!==null&&(Ci(o,n,f,u),Tc(o,n,f))}};function Wp(n,o,u,f,g,_,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(f,_,S):o.prototype&&o.prototype.isPureReactComponent?!$i(u,f)||!$i(g,_):!0}function Hp(n,o,u){var f=!1,g=vo,_=o.contextType;return typeof _=="object"&&_!==null?_=hi(_):(g=Er(o)?ma:zn.current,f=o.contextTypes,_=(f=f!=null)?tl(n,g):vo),o=new o(u,_),n.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Ac,n.stateNode=o,o._reactInternals=n,f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=_),o}function qp(n,o,u,f){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==n&&Ac.enqueueReplaceState(o,o.state,null)}function Vd(n,o,u,f){var g=n.stateNode;g.props=u,g.state=n.memoizedState,g.refs={},xd(n);var _=o.contextType;typeof _=="object"&&_!==null?g.context=hi(_):(_=Er(o)?ma:zn.current,g.context=tl(n,_)),g.state=n.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Od(n,o,_,u),g.state=n.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&Ac.enqueueReplaceState(g,g.state,null),xc(n,u,g,f),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function ul(n,o){try{var u="",f=o;do u+=xe(f),f=f.return;while(f);var g=u}catch(_){g=`
Error generating stack: `+_.message+`
`+_.stack}return{value:n,source:o,stack:g,digest:null}}function zd(n,o,u){return{value:n,source:null,stack:u??null,digest:o??null}}function Fd(n,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var Pw=typeof WeakMap=="function"?WeakMap:Map;function $p(n,o,u){u=Vs(-1,u),u.tag=3,u.payload={element:null};var f=o.value;return u.callback=function(){Vc||(Vc=!0,ef=f),Fd(n,o)},u}function Gp(n,o,u){u=Vs(-1,u),u.tag=3;var f=n.type.getDerivedStateFromError;if(typeof f=="function"){var g=o.value;u.payload=function(){return f(g)},u.callback=function(){Fd(n,o)}}var _=n.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(u.callback=function(){Fd(n,o),typeof f!="function"&&(Io===null?Io=new Set([this]):Io.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})}),u}function Zp(n,o,u){var f=n.pingCache;if(f===null){f=n.pingCache=new Pw;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(u)||(g.add(u),n=jw.bind(null,n,o,u),o.then(n,n))}function Kp(n){do{var o;if((o=n.tag===13)&&(o=n.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return n;n=n.return}while(n!==null);return null}function Qp(n,o,u,f,g){return(n.mode&1)===0?(n===o?n.flags|=65536:(n.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Vs(-1,1),o.tag=2,To(u,o,1))),u.lanes|=1),n):(n.flags|=65536,n.lanes=g,n)}var Cw=Be.ReactCurrentOwner,Tr=!1;function rr(n,o,u,f){o.child=n===null?gp(o,null,u,f):sl(o,n.child,u,f)}function Yp(n,o,u,f,g){u=u.render;var _=o.ref;return al(o,g),f=Ad(n,o,u,f,_,g),u=Rd(),n!==null&&!Tr?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~g,zs(n,o,g)):(Dt&&u&&fd(o),o.flags|=1,rr(n,o,f,g),o.child)}function Xp(n,o,u,f,g){if(n===null){var _=u.type;return typeof _=="function"&&!lf(_)&&_.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=_,Jp(n,o,_,f,g)):(n=Wc(u.type,null,f,o,o.mode,g),n.ref=o.ref,n.return=o,o.child=n)}if(_=n.child,(n.lanes&g)===0){var S=_.memoizedProps;if(u=u.compare,u=u!==null?u:$i,u(S,f)&&n.ref===o.ref)return zs(n,o,g)}return o.flags|=1,n=bo(_,f),n.ref=o.ref,n.return=o,o.child=n}function Jp(n,o,u,f,g){if(n!==null){var _=n.memoizedProps;if($i(_,f)&&n.ref===o.ref)if(Tr=!1,o.pendingProps=f=_,(n.lanes&g)!==0)(n.flags&131072)!==0&&(Tr=!0);else return o.lanes=n.lanes,zs(n,o,g)}return jd(n,o,u,f,g)}function eg(n,o,u){var f=o.pendingProps,g=f.children,_=n!==null?n.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},bt(hl,jr),jr|=u;else{if((u&1073741824)===0)return n=_!==null?_.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:n,cachePool:null,transitions:null},o.updateQueue=null,bt(hl,jr),jr|=n,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=_!==null?_.baseLanes:u,bt(hl,jr),jr|=f}else _!==null?(f=_.baseLanes|u,o.memoizedState=null):f=u,bt(hl,jr),jr|=f;return rr(n,o,g,u),o.child}function tg(n,o){var u=o.ref;(n===null&&u!==null||n!==null&&n.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function jd(n,o,u,f,g){var _=Er(u)?ma:zn.current;return _=tl(o,_),al(o,g),u=Ad(n,o,u,f,_,g),f=Rd(),n!==null&&!Tr?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~g,zs(n,o,g)):(Dt&&f&&fd(o),o.flags|=1,rr(n,o,u,g),o.child)}function ng(n,o,u,f,g){if(Er(u)){var _=!0;mc(o)}else _=!1;if(al(o,g),o.stateNode===null)Nc(n,o),Hp(o,u,f),Vd(o,u,f,g),f=!0;else if(n===null){var S=o.stateNode,N=o.memoizedProps;S.props=N;var F=S.context,J=u.contextType;typeof J=="object"&&J!==null?J=hi(J):(J=Er(u)?ma:zn.current,J=tl(o,J));var le=u.getDerivedStateFromProps,ue=typeof le=="function"||typeof S.getSnapshotBeforeUpdate=="function";ue||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(N!==f||F!==J)&&qp(o,S,f,J),Eo=!1;var ae=o.memoizedState;S.state=ae,xc(o,f,S,g),F=o.memoizedState,N!==f||ae!==F||wr.current||Eo?(typeof le=="function"&&(Od(o,u,le,f),F=o.memoizedState),(N=Eo||Wp(o,u,N,f,ae,F,J))?(ue||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=F),S.props=f,S.state=F,S.context=J,f=N):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{S=o.stateNode,yp(n,o),N=o.memoizedProps,J=o.type===o.elementType?N:Ii(o.type,N),S.props=J,ue=o.pendingProps,ae=S.context,F=u.contextType,typeof F=="object"&&F!==null?F=hi(F):(F=Er(u)?ma:zn.current,F=tl(o,F));var Pe=u.getDerivedStateFromProps;(le=typeof Pe=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(N!==ue||ae!==F)&&qp(o,S,f,F),Eo=!1,ae=o.memoizedState,S.state=ae,xc(o,f,S,g);var ke=o.memoizedState;N!==ue||ae!==ke||wr.current||Eo?(typeof Pe=="function"&&(Od(o,u,Pe,f),ke=o.memoizedState),(J=Eo||Wp(o,u,J,f,ae,ke,F)||!1)?(le||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,ke,F),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,ke,F)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||N===n.memoizedProps&&ae===n.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||N===n.memoizedProps&&ae===n.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ke),S.props=f,S.state=ke,S.context=F,f=J):(typeof S.componentDidUpdate!="function"||N===n.memoizedProps&&ae===n.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||N===n.memoizedProps&&ae===n.memoizedState||(o.flags|=1024),f=!1)}return Bd(n,o,u,f,_,g)}function Bd(n,o,u,f,g,_){tg(n,o);var S=(o.flags&128)!==0;if(!f&&!S)return g&&ap(o,u,!1),zs(n,o,_);f=o.stateNode,Cw.current=o;var N=S&&typeof u.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,n!==null&&S?(o.child=sl(o,n.child,null,_),o.child=sl(o,null,N,_)):rr(n,o,N,_),o.memoizedState=f.state,g&&ap(o,u,!0),o.child}function rg(n){var o=n.stateNode;o.pendingContext?sp(n,o.pendingContext,o.pendingContext!==o.context):o.context&&sp(n,o.context,!1),Id(n,o.containerInfo)}function ig(n,o,u,f,g){return il(),_d(g),o.flags|=256,rr(n,o,u,f),o.child}var Ud={dehydrated:null,treeContext:null,retryLane:0};function Wd(n){return{baseLanes:n,cachePool:null,transitions:null}}function sg(n,o,u){var f=o.pendingProps,g=Ft.current,_=!1,S=(o.flags&128)!==0,N;if((N=S)||(N=n!==null&&n.memoizedState===null?!1:(g&2)!==0),N?(_=!0,o.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),bt(Ft,g&1),n===null)return gd(o),n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((o.mode&1)===0?o.lanes=1:n.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(S=f.children,n=f.fallback,_?(f=o.mode,_=o.child,S={mode:"hidden",children:S},(f&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=S):_=Hc(S,f,0,null),n=Ia(n,f,u,null),_.return=o,n.return=o,_.sibling=n,o.child=_,o.child.memoizedState=Wd(u),o.memoizedState=Ud,n):Hd(o,S));if(g=n.memoizedState,g!==null&&(N=g.dehydrated,N!==null))return bw(n,o,S,f,N,g,u);if(_){_=f.fallback,S=o.mode,g=n.child,N=g.sibling;var F={mode:"hidden",children:f.children};return(S&1)===0&&o.child!==g?(f=o.child,f.childLanes=0,f.pendingProps=F,o.deletions=null):(f=bo(g,F),f.subtreeFlags=g.subtreeFlags&14680064),N!==null?_=bo(N,_):(_=Ia(_,S,u,null),_.flags|=2),_.return=o,f.return=o,f.sibling=_,o.child=f,f=_,_=o.child,S=n.child.memoizedState,S=S===null?Wd(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},_.memoizedState=S,_.childLanes=n.childLanes&~u,o.memoizedState=Ud,f}return _=n.child,n=_.sibling,f=bo(_,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=u),f.return=o,f.sibling=null,n!==null&&(u=o.deletions,u===null?(o.deletions=[n],o.flags|=16):u.push(n)),o.child=f,o.memoizedState=null,f}function Hd(n,o){return o=Hc({mode:"visible",children:o},n.mode,0,null),o.return=n,n.child=o}function Rc(n,o,u,f){return f!==null&&_d(f),sl(o,n.child,null,u),n=Hd(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function bw(n,o,u,f,g,_,S){if(u)return o.flags&256?(o.flags&=-257,f=zd(Error(t(422))),Rc(n,o,S,f)):o.memoizedState!==null?(o.child=n.child,o.flags|=128,null):(_=f.fallback,g=o.mode,f=Hc({mode:"visible",children:f.children},g,0,null),_=Ia(_,g,S,null),_.flags|=2,f.return=o,_.return=o,f.sibling=_,o.child=f,(o.mode&1)!==0&&sl(o,n.child,null,S),o.child.memoizedState=Wd(S),o.memoizedState=Ud,_);if((o.mode&1)===0)return Rc(n,o,S,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var N=f.dgst;return f=N,_=Error(t(419)),f=zd(_,f,void 0),Rc(n,o,S,f)}if(N=(S&n.childLanes)!==0,Tr||N){if(f=mn,f!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|S))!==0?0:g,g!==0&&g!==_.retryLane&&(_.retryLane=g,Os(n,g),Ci(f,n,g,-1))}return af(),f=zd(Error(t(421))),Rc(n,o,S,f)}return g.data==="$?"?(o.flags|=128,o.child=n.child,o=Bw.bind(null,n),g._reactRetry=o,null):(n=_.treeContext,Fr=Ki(g.nextSibling),zr=o,Dt=!0,xi=null,n!==null&&(ui[ci++]=Ms,ui[ci++]=Ds,ui[ci++]=pa,Ms=n.id,Ds=n.overflow,pa=o),o=Hd(o,f.children),o.flags|=4096,o)}function og(n,o,u){n.lanes|=o;var f=n.alternate;f!==null&&(f.lanes|=o),Ed(n.return,o,u)}function qd(n,o,u,f,g){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=u,_.tailMode=g)}function ag(n,o,u){var f=o.pendingProps,g=f.revealOrder,_=f.tail;if(rr(n,o,f.children,u),f=Ft.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&og(n,u,o);else if(n.tag===19)og(n,u,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}f&=1}if(bt(Ft,f),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(u=o.child,g=null;u!==null;)n=u.alternate,n!==null&&Ic(n)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),qd(o,!1,g,u,_);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(n=g.alternate,n!==null&&Ic(n)===null){o.child=g;break}n=g.sibling,g.sibling=u,u=g,g=n}qd(o,!0,u,null,_);break;case"together":qd(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Nc(n,o){(o.mode&1)===0&&n!==null&&(n.alternate=null,o.alternate=null,o.flags|=2)}function zs(n,o,u){if(n!==null&&(o.dependencies=n.dependencies),wa|=o.lanes,(u&o.childLanes)===0)return null;if(n!==null&&o.child!==n.child)throw Error(t(153));if(o.child!==null){for(n=o.child,u=bo(n,n.pendingProps),o.child=u,u.return=o;n.sibling!==null;)n=n.sibling,u=u.sibling=bo(n,n.pendingProps),u.return=o;u.sibling=null}return o.child}function kw(n,o,u){switch(o.tag){case 3:rg(o),il();break;case 5:Ep(o);break;case 1:Er(o.type)&&mc(o);break;case 4:Id(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,g=o.memoizedProps.value;bt(wc,f._currentValue),f._currentValue=g;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(bt(Ft,Ft.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?sg(n,o,u):(bt(Ft,Ft.current&1),n=zs(n,o,u),n!==null?n.sibling:null);bt(Ft,Ft.current&1);break;case 19:if(f=(u&o.childLanes)!==0,(n.flags&128)!==0){if(f)return ag(n,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),bt(Ft,Ft.current),f)break;return null;case 22:case 23:return o.lanes=0,eg(n,o,u)}return zs(n,o,u)}var lg,$d,ug,cg;lg=function(n,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)n.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},$d=function(){},ug=function(n,o,u,f){var g=n.memoizedProps;if(g!==f){n=o.stateNode,ya(Qi.current);var _=null;switch(u){case"input":g=Wr(n,g),f=Wr(n,f),_=[];break;case"select":g=re({},g,{value:void 0}),f=re({},f,{value:void 0}),_=[];break;case"textarea":g=Ut(n,g),f=Ut(n,f),_=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(n.onclick=oe)}Rn(u,f);var S;u=null;for(J in g)if(!f.hasOwnProperty(J)&&g.hasOwnProperty(J)&&g[J]!=null)if(J==="style"){var N=g[J];for(S in N)N.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(a.hasOwnProperty(J)?_||(_=[]):(_=_||[]).push(J,null));for(J in f){var F=f[J];if(N=g!=null?g[J]:void 0,f.hasOwnProperty(J)&&F!==N&&(F!=null||N!=null))if(J==="style")if(N){for(S in N)!N.hasOwnProperty(S)||F&&F.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in F)F.hasOwnProperty(S)&&N[S]!==F[S]&&(u||(u={}),u[S]=F[S])}else u||(_||(_=[]),_.push(J,u)),u=F;else J==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,N=N?N.__html:void 0,F!=null&&N!==F&&(_=_||[]).push(J,F)):J==="children"?typeof F!="string"&&typeof F!="number"||(_=_||[]).push(J,""+F):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(a.hasOwnProperty(J)?(F!=null&&J==="onScroll"&&xt("scroll",n),_||N===F||(_=[])):(_=_||[]).push(J,F))}u&&(_=_||[]).push("style",u);var J=_;(o.updateQueue=J)&&(o.flags|=4)}},cg=function(n,o,u,f){u!==f&&(o.flags|=4)};function fu(n,o){if(!Dt)switch(n.tailMode){case"hidden":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:f.sibling=null}}function jn(n){var o=n.alternate!==null&&n.alternate.child===n.child,u=0,f=0;if(o)for(var g=n.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=f,n.childLanes=u,o}function Aw(n,o,u){var f=o.pendingProps;switch(md(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jn(o),null;case 1:return Er(o.type)&&fc(),jn(o),null;case 3:return f=o.stateNode,ll(),Nt(wr),Nt(zn),Cd(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(n===null||n.child===null)&&(yc(o)?o.flags|=4:n===null||n.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,xi!==null&&(rf(xi),xi=null))),$d(n,o),jn(o),null;case 5:Sd(o);var g=ya(lu.current);if(u=o.type,n!==null&&o.stateNode!=null)ug(n,o,u,f,g),n.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(t(166));return jn(o),null}if(n=ya(Qi.current),yc(o)){f=o.stateNode,u=o.type;var _=o.memoizedProps;switch(f[li]=o,f[go]=_,n=(o.mode&1)!==0,u){case"dialog":xt("cancel",f),xt("close",f);break;case"iframe":case"object":case"embed":xt("load",f);break;case"video":case"audio":for(g=0;g<fo.length;g++)xt(fo[g],f);break;case"source":xt("error",f);break;case"img":case"image":case"link":xt("error",f),xt("load",f);break;case"details":xt("toggle",f);break;case"input":hs(f,_),xt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!_.multiple},xt("invalid",f);break;case"textarea":$n(f,_),xt("invalid",f)}Rn(u,_),g=null;for(var S in _)if(_.hasOwnProperty(S)){var N=_[S];S==="children"?typeof N=="string"?f.textContent!==N&&(_.suppressHydrationWarning!==!0&&Y(f.textContent,N,n),g=["children",N]):typeof N=="number"&&f.textContent!==""+N&&(_.suppressHydrationWarning!==!0&&Y(f.textContent,N,n),g=["children",""+N]):a.hasOwnProperty(S)&&N!=null&&S==="onScroll"&&xt("scroll",f)}switch(u){case"input":Ur(f),kr(f,_,!0);break;case"textarea":Ur(f),qr(f);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(f.onclick=oe)}f=g,o.updateQueue=f,f!==null&&(o.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ar(u)),n==="http://www.w3.org/1999/xhtml"?u==="script"?(n=S.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof f.is=="string"?n=S.createElement(u,{is:f.is}):(n=S.createElement(u),u==="select"&&(S=n,f.multiple?S.multiple=!0:f.size&&(S.size=f.size))):n=S.createElementNS(n,u),n[li]=o,n[go]=f,lg(n,o,!1,!1),o.stateNode=n;e:{switch(S=cr(u,f),u){case"dialog":xt("cancel",n),xt("close",n),g=f;break;case"iframe":case"object":case"embed":xt("load",n),g=f;break;case"video":case"audio":for(g=0;g<fo.length;g++)xt(fo[g],n);g=f;break;case"source":xt("error",n),g=f;break;case"img":case"image":case"link":xt("error",n),xt("load",n),g=f;break;case"details":xt("toggle",n),g=f;break;case"input":hs(n,f),g=Wr(n,f),xt("invalid",n);break;case"option":g=f;break;case"select":n._wrapperState={wasMultiple:!!f.multiple},g=re({},f,{value:void 0}),xt("invalid",n);break;case"textarea":$n(n,f),g=Ut(n,f),xt("invalid",n);break;default:g=f}Rn(u,g),N=g;for(_ in N)if(N.hasOwnProperty(_)){var F=N[_];_==="style"?$r(n,F):_==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Mi(n,F)):_==="children"?typeof F=="string"?(u!=="textarea"||F!=="")&&vn(n,F):typeof F=="number"&&vn(n,""+F):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(a.hasOwnProperty(_)?F!=null&&_==="onScroll"&&xt("scroll",n):F!=null&&ve(n,_,F,S))}switch(u){case"input":Ur(n),kr(n,f,!1);break;case"textarea":Ur(n),qr(n);break;case"option":f.value!=null&&n.setAttribute("value",""+Ue(f.value));break;case"select":n.multiple=!!f.multiple,_=f.value,_!=null?yn(n,!!f.multiple,_,!1):f.defaultValue!=null&&yn(n,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=oe)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return jn(o),null;case 6:if(n&&o.stateNode!=null)cg(n,o,n.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(t(166));if(u=ya(lu.current),ya(Qi.current),yc(o)){if(f=o.stateNode,u=o.memoizedProps,f[li]=o,(_=f.nodeValue!==u)&&(n=zr,n!==null))switch(n.tag){case 3:Y(f.nodeValue,u,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Y(f.nodeValue,u,(n.mode&1)!==0)}_&&(o.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[li]=o,o.stateNode=f}return jn(o),null;case 13:if(Nt(Ft),f=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Dt&&Fr!==null&&(o.mode&1)!==0&&(o.flags&128)===0)fp(),il(),o.flags|=98560,_=!1;else if(_=yc(o),f!==null&&f.dehydrated!==null){if(n===null){if(!_)throw Error(t(318));if(_=o.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[li]=o}else il(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;jn(o),_=!1}else xi!==null&&(rf(xi),xi=null),_=!0;if(!_)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(f=f!==null,f!==(n!==null&&n.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(n===null||(Ft.current&1)!==0?ln===0&&(ln=3):af())),o.updateQueue!==null&&(o.flags|=4),jn(o),null);case 4:return ll(),$d(n,o),n===null&&mo(o.stateNode.containerInfo),jn(o),null;case 10:return wd(o.type._context),jn(o),null;case 17:return Er(o.type)&&fc(),jn(o),null;case 19:if(Nt(Ft),_=o.memoizedState,_===null)return jn(o),null;if(f=(o.flags&128)!==0,S=_.rendering,S===null)if(f)fu(_,!1);else{if(ln!==0||n!==null&&(n.flags&128)!==0)for(n=o.child;n!==null;){if(S=Ic(n),S!==null){for(o.flags|=128,fu(_,!1),f=S.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=u,u=o.child;u!==null;)_=u,n=f,_.flags&=14680066,S=_.alternate,S===null?(_.childLanes=0,_.lanes=n,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=S.childLanes,_.lanes=S.lanes,_.child=S.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=S.memoizedProps,_.memoizedState=S.memoizedState,_.updateQueue=S.updateQueue,_.type=S.type,n=S.dependencies,_.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),u=u.sibling;return bt(Ft,Ft.current&1|2),o.child}n=n.sibling}_.tail!==null&&It()>dl&&(o.flags|=128,f=!0,fu(_,!1),o.lanes=4194304)}else{if(!f)if(n=Ic(S),n!==null){if(o.flags|=128,f=!0,u=n.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),fu(_,!0),_.tail===null&&_.tailMode==="hidden"&&!S.alternate&&!Dt)return jn(o),null}else 2*It()-_.renderingStartTime>dl&&u!==1073741824&&(o.flags|=128,f=!0,fu(_,!1),o.lanes=4194304);_.isBackwards?(S.sibling=o.child,o.child=S):(u=_.last,u!==null?u.sibling=S:o.child=S,_.last=S)}return _.tail!==null?(o=_.tail,_.rendering=o,_.tail=o.sibling,_.renderingStartTime=It(),o.sibling=null,u=Ft.current,bt(Ft,f?u&1|2:u&1),o):(jn(o),null);case 22:case 23:return of(),f=o.memoizedState!==null,n!==null&&n.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(jr&1073741824)!==0&&(jn(o),o.subtreeFlags&6&&(o.flags|=8192)):jn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function Rw(n,o){switch(md(o),o.tag){case 1:return Er(o.type)&&fc(),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return ll(),Nt(wr),Nt(zn),Cd(),n=o.flags,(n&65536)!==0&&(n&128)===0?(o.flags=n&-65537|128,o):null;case 5:return Sd(o),null;case 13:if(Nt(Ft),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(t(340));il()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return Nt(Ft),null;case 4:return ll(),null;case 10:return wd(o.type._context),null;case 22:case 23:return of(),null;case 24:return null;default:return null}}var Lc=!1,Bn=!1,Nw=typeof WeakSet=="function"?WeakSet:Set,be=null;function cl(n,o){var u=n.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){qt(n,o,f)}else u.current=null}function Gd(n,o,u){try{u()}catch(f){qt(n,o,f)}}var hg=!1;function Lw(n,o){if(Te=Jr,n=Ql(),Yl(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var S=0,N=-1,F=-1,J=0,le=0,ue=n,ae=null;t:for(;;){for(var Pe;ue!==u||g!==0&&ue.nodeType!==3||(N=S+g),ue!==_||f!==0&&ue.nodeType!==3||(F=S+f),ue.nodeType===3&&(S+=ue.nodeValue.length),(Pe=ue.firstChild)!==null;)ae=ue,ue=Pe;for(;;){if(ue===n)break t;if(ae===u&&++J===g&&(N=S),ae===_&&++le===f&&(F=S),(Pe=ue.nextSibling)!==null)break;ue=ae,ae=ue.parentNode}ue=Pe}u=N===-1||F===-1?null:{start:N,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(De={focusedElem:n,selectionRange:u},Jr=!1,be=o;be!==null;)if(o=be,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,be=n;else for(;be!==null;){o=be;try{var ke=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ke!==null){var Ae=ke.memoizedProps,Kt=ke.memoizedState,G=o.stateNode,U=G.getSnapshotBeforeUpdate(o.elementType===o.type?Ae:Ii(o.type,Ae),Kt);G.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var Z=o.stateNode.containerInfo;Z.nodeType===1?Z.textContent="":Z.nodeType===9&&Z.documentElement&&Z.removeChild(Z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(de){qt(o,o.return,de)}if(n=o.sibling,n!==null){n.return=o.return,be=n;break}be=o.return}return ke=hg,hg=!1,ke}function mu(n,o,u){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&n)===n){var _=g.destroy;g.destroy=void 0,_!==void 0&&Gd(o,u,_)}g=g.next}while(g!==f)}}function Mc(n,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&n)===n){var f=u.create;u.destroy=f()}u=u.next}while(u!==o)}}function Zd(n){var o=n.ref;if(o!==null){var u=n.stateNode;switch(n.tag){case 5:n=u;break;default:n=u}typeof o=="function"?o(n):o.current=n}}function dg(n){var o=n.alternate;o!==null&&(n.alternate=null,dg(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&(delete o[li],delete o[go],delete o[_o],delete o[ud],delete o[cd])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function fg(n){return n.tag===5||n.tag===3||n.tag===4}function mg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||fg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Kd(n,o,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(n,o):u.insertBefore(n,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(n,u)):(o=u,o.appendChild(n)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=oe));else if(f!==4&&(n=n.child,n!==null))for(Kd(n,o,u),n=n.sibling;n!==null;)Kd(n,o,u),n=n.sibling}function Qd(n,o,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,o?u.insertBefore(n,o):u.appendChild(n);else if(f!==4&&(n=n.child,n!==null))for(Qd(n,o,u),n=n.sibling;n!==null;)Qd(n,o,u),n=n.sibling}var Sn=null,Si=!1;function xo(n,o,u){for(u=u.child;u!==null;)pg(n,o,u),u=u.sibling}function pg(n,o,u){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(Vi,u)}catch{}switch(u.tag){case 5:Bn||cl(u,o);case 6:var f=Sn,g=Si;Sn=null,xo(n,o,u),Sn=f,Si=g,Sn!==null&&(Si?(n=Sn,u=u.stateNode,n.nodeType===8?n.parentNode.removeChild(u):n.removeChild(u)):Sn.removeChild(u.stateNode));break;case 18:Sn!==null&&(Si?(n=Sn,u=u.stateNode,n.nodeType===8?iu(n.parentNode,u):n.nodeType===1&&iu(n,u),Mn(n)):iu(Sn,u.stateNode));break;case 4:f=Sn,g=Si,Sn=u.stateNode.containerInfo,Si=!0,xo(n,o,u),Sn=f,Si=g;break;case 0:case 11:case 14:case 15:if(!Bn&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var _=g,S=_.destroy;_=_.tag,S!==void 0&&((_&2)!==0||(_&4)!==0)&&Gd(u,o,S),g=g.next}while(g!==f)}xo(n,o,u);break;case 1:if(!Bn&&(cl(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(N){qt(u,o,N)}xo(n,o,u);break;case 21:xo(n,o,u);break;case 22:u.mode&1?(Bn=(f=Bn)||u.memoizedState!==null,xo(n,o,u),Bn=f):xo(n,o,u);break;default:xo(n,o,u)}}function gg(n){var o=n.updateQueue;if(o!==null){n.updateQueue=null;var u=n.stateNode;u===null&&(u=n.stateNode=new Nw),o.forEach(function(f){var g=Uw.bind(null,n,f);u.has(f)||(u.add(f),f.then(g,g))})}}function Pi(n,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var _=n,S=o,N=S;e:for(;N!==null;){switch(N.tag){case 5:Sn=N.stateNode,Si=!1;break e;case 3:Sn=N.stateNode.containerInfo,Si=!0;break e;case 4:Sn=N.stateNode.containerInfo,Si=!0;break e}N=N.return}if(Sn===null)throw Error(t(160));pg(_,S,g),Sn=null,Si=!1;var F=g.alternate;F!==null&&(F.return=null),g.return=null}catch(J){qt(g,o,J)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)_g(o,n),o=o.sibling}function _g(n,o){var u=n.alternate,f=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Pi(o,n),Xi(n),f&4){try{mu(3,n,n.return),Mc(3,n)}catch(Ae){qt(n,n.return,Ae)}try{mu(5,n,n.return)}catch(Ae){qt(n,n.return,Ae)}}break;case 1:Pi(o,n),Xi(n),f&512&&u!==null&&cl(u,u.return);break;case 5:if(Pi(o,n),Xi(n),f&512&&u!==null&&cl(u,u.return),n.flags&32){var g=n.stateNode;try{vn(g,"")}catch(Ae){qt(n,n.return,Ae)}}if(f&4&&(g=n.stateNode,g!=null)){var _=n.memoizedProps,S=u!==null?u.memoizedProps:_,N=n.type,F=n.updateQueue;if(n.updateQueue=null,F!==null)try{N==="input"&&_.type==="radio"&&_.name!=null&&Hr(g,_),cr(N,S);var J=cr(N,_);for(S=0;S<F.length;S+=2){var le=F[S],ue=F[S+1];le==="style"?$r(g,ue):le==="dangerouslySetInnerHTML"?Mi(g,ue):le==="children"?vn(g,ue):ve(g,le,ue,J)}switch(N){case"input":_n(g,_);break;case"textarea":Zs(g,_);break;case"select":var ae=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!_.multiple;var Pe=_.value;Pe!=null?yn(g,!!_.multiple,Pe,!1):ae!==!!_.multiple&&(_.defaultValue!=null?yn(g,!!_.multiple,_.defaultValue,!0):yn(g,!!_.multiple,_.multiple?[]:"",!1))}g[go]=_}catch(Ae){qt(n,n.return,Ae)}}break;case 6:if(Pi(o,n),Xi(n),f&4){if(n.stateNode===null)throw Error(t(162));g=n.stateNode,_=n.memoizedProps;try{g.nodeValue=_}catch(Ae){qt(n,n.return,Ae)}}break;case 3:if(Pi(o,n),Xi(n),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Mn(o.containerInfo)}catch(Ae){qt(n,n.return,Ae)}break;case 4:Pi(o,n),Xi(n);break;case 13:Pi(o,n),Xi(n),g=n.child,g.flags&8192&&(_=g.memoizedState!==null,g.stateNode.isHidden=_,!_||g.alternate!==null&&g.alternate.memoizedState!==null||(Jd=It())),f&4&&gg(n);break;case 22:if(le=u!==null&&u.memoizedState!==null,n.mode&1?(Bn=(J=Bn)||le,Pi(o,n),Bn=J):Pi(o,n),Xi(n),f&8192){if(J=n.memoizedState!==null,(n.stateNode.isHidden=J)&&!le&&(n.mode&1)!==0)for(be=n,le=n.child;le!==null;){for(ue=be=le;be!==null;){switch(ae=be,Pe=ae.child,ae.tag){case 0:case 11:case 14:case 15:mu(4,ae,ae.return);break;case 1:cl(ae,ae.return);var ke=ae.stateNode;if(typeof ke.componentWillUnmount=="function"){f=ae,u=ae.return;try{o=f,ke.props=o.memoizedProps,ke.state=o.memoizedState,ke.componentWillUnmount()}catch(Ae){qt(f,u,Ae)}}break;case 5:cl(ae,ae.return);break;case 22:if(ae.memoizedState!==null){wg(ue);continue}}Pe!==null?(Pe.return=ae,be=Pe):wg(ue)}le=le.sibling}e:for(le=null,ue=n;;){if(ue.tag===5){if(le===null){le=ue;try{g=ue.stateNode,J?(_=g.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(N=ue.stateNode,F=ue.memoizedProps.style,S=F!=null&&F.hasOwnProperty("display")?F.display:null,N.style.display=Rr("display",S))}catch(Ae){qt(n,n.return,Ae)}}}else if(ue.tag===6){if(le===null)try{ue.stateNode.nodeValue=J?"":ue.memoizedProps}catch(Ae){qt(n,n.return,Ae)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===n)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===n)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===n)break e;le===ue&&(le=null),ue=ue.return}le===ue&&(le=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:Pi(o,n),Xi(n),f&4&&gg(n);break;case 21:break;default:Pi(o,n),Xi(n)}}function Xi(n){var o=n.flags;if(o&2){try{e:{for(var u=n.return;u!==null;){if(fg(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(vn(g,""),f.flags&=-33);var _=mg(n);Qd(n,_,g);break;case 3:case 4:var S=f.stateNode.containerInfo,N=mg(n);Kd(n,N,S);break;default:throw Error(t(161))}}catch(F){qt(n,n.return,F)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function Mw(n,o,u){be=n,yg(n)}function yg(n,o,u){for(var f=(n.mode&1)!==0;be!==null;){var g=be,_=g.child;if(g.tag===22&&f){var S=g.memoizedState!==null||Lc;if(!S){var N=g.alternate,F=N!==null&&N.memoizedState!==null||Bn;N=Lc;var J=Bn;if(Lc=S,(Bn=F)&&!J)for(be=g;be!==null;)S=be,F=S.child,S.tag===22&&S.memoizedState!==null?Eg(g):F!==null?(F.return=S,be=F):Eg(g);for(;_!==null;)be=_,yg(_),_=_.sibling;be=g,Lc=N,Bn=J}vg(n)}else(g.subtreeFlags&8772)!==0&&_!==null?(_.return=g,be=_):vg(n)}}function vg(n){for(;be!==null;){var o=be;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Bn||Mc(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!Bn)if(u===null)f.componentDidMount();else{var g=o.elementType===o.type?u.memoizedProps:Ii(o.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var _=o.updateQueue;_!==null&&wp(o,_,f);break;case 3:var S=o.updateQueue;if(S!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}wp(o,S,u)}break;case 5:var N=o.stateNode;if(u===null&&o.flags&4){u=N;var F=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&u.focus();break;case"img":F.src&&(u.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var J=o.alternate;if(J!==null){var le=J.memoizedState;if(le!==null){var ue=le.dehydrated;ue!==null&&Mn(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Bn||o.flags&512&&Zd(o)}catch(ae){qt(o,o.return,ae)}}if(o===n){be=null;break}if(u=o.sibling,u!==null){u.return=o.return,be=u;break}be=o.return}}function wg(n){for(;be!==null;){var o=be;if(o===n){be=null;break}var u=o.sibling;if(u!==null){u.return=o.return,be=u;break}be=o.return}}function Eg(n){for(;be!==null;){var o=be;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Mc(4,o)}catch(F){qt(o,u,F)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var g=o.return;try{f.componentDidMount()}catch(F){qt(o,g,F)}}var _=o.return;try{Zd(o)}catch(F){qt(o,_,F)}break;case 5:var S=o.return;try{Zd(o)}catch(F){qt(o,S,F)}}}catch(F){qt(o,o.return,F)}if(o===n){be=null;break}var N=o.sibling;if(N!==null){N.return=o.return,be=N;break}be=o.return}}var Dw=Math.ceil,Dc=Be.ReactCurrentDispatcher,Yd=Be.ReactCurrentOwner,fi=Be.ReactCurrentBatchConfig,dt=0,mn=null,en=null,Pn=0,jr=0,hl=yo(0),ln=0,pu=null,wa=0,Oc=0,Xd=0,gu=null,xr=null,Jd=0,dl=1/0,Fs=null,Vc=!1,ef=null,Io=null,zc=!1,So=null,Fc=0,_u=0,tf=null,jc=-1,Bc=0;function ir(){return(dt&6)!==0?It():jc!==-1?jc:jc=It()}function Po(n){return(n.mode&1)===0?1:(dt&2)!==0&&Pn!==0?Pn&-Pn:yw.transition!==null?(Bc===0&&(Bc=na()),Bc):(n=et,n!==0||(n=window.event,n=n===void 0?16:tt(n.type)),n)}function Ci(n,o,u,f){if(50<_u)throw _u=0,tf=null,Error(t(185));Kn(n,u,f),((dt&2)===0||n!==mn)&&(n===mn&&((dt&2)===0&&(Oc|=u),ln===4&&Co(n,Pn)),Ir(n,f),u===1&&dt===0&&(o.mode&1)===0&&(dl=It()+500,pc&&wo()))}function Ir(n,o){var u=n.callbackNode;Qr(n,o);var f=gt(n,n===mn?Pn:0);if(f===0)u!==null&&ms(u),n.callbackNode=null,n.callbackPriority=0;else if(o=f&-f,n.callbackPriority!==o){if(u!=null&&ms(u),o===1)n.tag===0?_w(xg.bind(null,n)):lp(xg.bind(null,n)),Vn(function(){(dt&6)===0&&wo()}),u=null;else{switch(Ln(f)){case 1:u=Ks;break;case 4:u=ta;break;case 16:u=gs;break;case 536870912:u=Zr;break;default:u=gs}u=Rg(u,Tg.bind(null,n))}n.callbackPriority=o,n.callbackNode=u}}function Tg(n,o){if(jc=-1,Bc=0,(dt&6)!==0)throw Error(t(327));var u=n.callbackNode;if(fl()&&n.callbackNode!==u)return null;var f=gt(n,n===mn?Pn:0);if(f===0)return null;if((f&30)!==0||(f&n.expiredLanes)!==0||o)o=Uc(n,f);else{o=f;var g=dt;dt|=2;var _=Sg();(mn!==n||Pn!==o)&&(Fs=null,dl=It()+500,Ta(n,o));do try{zw();break}catch(N){Ig(n,N)}while(!0);vd(),Dc.current=_,dt=g,en!==null?o=0:(mn=null,Pn=0,o=ln)}if(o!==0){if(o===2&&(g=hn(n),g!==0&&(f=g,o=nf(n,g))),o===1)throw u=pu,Ta(n,0),Co(n,f),Ir(n,It()),u;if(o===6)Co(n,f);else{if(g=n.current.alternate,(f&30)===0&&!Ow(g)&&(o=Uc(n,f),o===2&&(_=hn(n),_!==0&&(f=_,o=nf(n,_))),o===1))throw u=pu,Ta(n,0),Co(n,f),Ir(n,It()),u;switch(n.finishedWork=g,n.finishedLanes=f,o){case 0:case 1:throw Error(t(345));case 2:xa(n,xr,Fs);break;case 3:if(Co(n,f),(f&130023424)===f&&(o=Jd+500-It(),10<o)){if(gt(n,0)!==0)break;if(g=n.suspendedLanes,(g&f)!==f){ir(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=on(xa.bind(null,n,xr,Fs),o);break}xa(n,xr,Fs);break;case 4:if(Co(n,f),(f&4194240)===f)break;for(o=n.eventTimes,g=-1;0<f;){var S=31-Ge(f);_=1<<S,S=o[S],S>g&&(g=S),f&=~_}if(f=g,f=It()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*Dw(f/1960))-f,10<f){n.timeoutHandle=on(xa.bind(null,n,xr,Fs),f);break}xa(n,xr,Fs);break;case 5:xa(n,xr,Fs);break;default:throw Error(t(329))}}}return Ir(n,It()),n.callbackNode===u?Tg.bind(null,n):null}function nf(n,o){var u=gu;return n.current.memoizedState.isDehydrated&&(Ta(n,o).flags|=256),n=Uc(n,o),n!==2&&(o=xr,xr=u,o!==null&&rf(o)),n}function rf(n){xr===null?xr=n:xr.push.apply(xr,n)}function Ow(n){for(var o=n;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],_=g.getSnapshot;g=g.value;try{if(!Or(_(),g))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Co(n,o){for(o&=~Xd,o&=~Oc,n.suspendedLanes|=o,n.pingedLanes&=~o,n=n.expirationTimes;0<o;){var u=31-Ge(o),f=1<<u;n[u]=-1,o&=~f}}function xg(n){if((dt&6)!==0)throw Error(t(327));fl();var o=gt(n,0);if((o&1)===0)return Ir(n,It()),null;var u=Uc(n,o);if(n.tag!==0&&u===2){var f=hn(n);f!==0&&(o=f,u=nf(n,f))}if(u===1)throw u=pu,Ta(n,0),Co(n,o),Ir(n,It()),u;if(u===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=o,xa(n,xr,Fs),Ir(n,It()),null}function sf(n,o){var u=dt;dt|=1;try{return n(o)}finally{dt=u,dt===0&&(dl=It()+500,pc&&wo())}}function Ea(n){So!==null&&So.tag===0&&(dt&6)===0&&fl();var o=dt;dt|=1;var u=fi.transition,f=et;try{if(fi.transition=null,et=1,n)return n()}finally{et=f,fi.transition=u,dt=o,(dt&6)===0&&wo()}}function of(){jr=hl.current,Nt(hl)}function Ta(n,o){n.finishedWork=null,n.finishedLanes=0;var u=n.timeoutHandle;if(u!==-1&&(n.timeoutHandle=-1,Jt(u)),en!==null)for(u=en.return;u!==null;){var f=u;switch(md(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&fc();break;case 3:ll(),Nt(wr),Nt(zn),Cd();break;case 5:Sd(f);break;case 4:ll();break;case 13:Nt(Ft);break;case 19:Nt(Ft);break;case 10:wd(f.type._context);break;case 22:case 23:of()}u=u.return}if(mn=n,en=n=bo(n.current,null),Pn=jr=o,ln=0,pu=null,Xd=Oc=wa=0,xr=gu=null,_a!==null){for(o=0;o<_a.length;o++)if(u=_a[o],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,_=u.pending;if(_!==null){var S=_.next;_.next=g,f.next=S}u.pending=f}_a=null}return n}function Ig(n,o){do{var u=en;try{if(vd(),Sc.current=kc,Pc){for(var f=jt.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}Pc=!1}if(va=0,fn=an=jt=null,uu=!1,cu=0,Yd.current=null,u===null||u.return===null){ln=1,pu=o,en=null;break}e:{var _=n,S=u.return,N=u,F=o;if(o=Pn,N.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var J=F,le=N,ue=le.tag;if((le.mode&1)===0&&(ue===0||ue===11||ue===15)){var ae=le.alternate;ae?(le.updateQueue=ae.updateQueue,le.memoizedState=ae.memoizedState,le.lanes=ae.lanes):(le.updateQueue=null,le.memoizedState=null)}var Pe=Kp(S);if(Pe!==null){Pe.flags&=-257,Qp(Pe,S,N,_,o),Pe.mode&1&&Zp(_,J,o),o=Pe,F=J;var ke=o.updateQueue;if(ke===null){var Ae=new Set;Ae.add(F),o.updateQueue=Ae}else ke.add(F);break e}else{if((o&1)===0){Zp(_,J,o),af();break e}F=Error(t(426))}}else if(Dt&&N.mode&1){var Kt=Kp(S);if(Kt!==null){(Kt.flags&65536)===0&&(Kt.flags|=256),Qp(Kt,S,N,_,o),_d(ul(F,N));break e}}_=F=ul(F,N),ln!==4&&(ln=2),gu===null?gu=[_]:gu.push(_),_=S;do{switch(_.tag){case 3:_.flags|=65536,o&=-o,_.lanes|=o;var G=$p(_,F,o);vp(_,G);break e;case 1:N=F;var U=_.type,Z=_.stateNode;if((_.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(Io===null||!Io.has(Z)))){_.flags|=65536,o&=-o,_.lanes|=o;var de=Gp(_,N,o);vp(_,de);break e}}_=_.return}while(_!==null)}Cg(u)}catch(Re){o=Re,en===u&&u!==null&&(en=u=u.return);continue}break}while(!0)}function Sg(){var n=Dc.current;return Dc.current=kc,n===null?kc:n}function af(){(ln===0||ln===3||ln===2)&&(ln=4),mn===null||(wa&268435455)===0&&(Oc&268435455)===0||Co(mn,Pn)}function Uc(n,o){var u=dt;dt|=2;var f=Sg();(mn!==n||Pn!==o)&&(Fs=null,Ta(n,o));do try{Vw();break}catch(g){Ig(n,g)}while(!0);if(vd(),dt=u,Dc.current=f,en!==null)throw Error(t(261));return mn=null,Pn=0,ln}function Vw(){for(;en!==null;)Pg(en)}function zw(){for(;en!==null&&!ps();)Pg(en)}function Pg(n){var o=Ag(n.alternate,n,jr);n.memoizedProps=n.pendingProps,o===null?Cg(n):en=o,Yd.current=null}function Cg(n){var o=n;do{var u=o.alternate;if(n=o.return,(o.flags&32768)===0){if(u=Aw(u,o,jr),u!==null){en=u;return}}else{if(u=Rw(u,o),u!==null){u.flags&=32767,en=u;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ln=6,en=null;return}}if(o=o.sibling,o!==null){en=o;return}en=o=n}while(o!==null);ln===0&&(ln=5)}function xa(n,o,u){var f=et,g=fi.transition;try{fi.transition=null,et=1,Fw(n,o,u,f)}finally{fi.transition=g,et=f}return null}function Fw(n,o,u,f){do fl();while(So!==null);if((dt&6)!==0)throw Error(t(327));u=n.finishedWork;var g=n.finishedLanes;if(u===null)return null;if(n.finishedWork=null,n.finishedLanes=0,u===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var _=u.lanes|u.childLanes;if(Lt(n,_),n===mn&&(en=mn=null,Pn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||zc||(zc=!0,Rg(gs,function(){return fl(),null})),_=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||_){_=fi.transition,fi.transition=null;var S=et;et=1;var N=dt;dt|=4,Yd.current=null,Lw(n,u),_g(u,n),oi(De),Jr=!!Te,De=Te=null,n.current=u,Mw(u),pr(),dt=N,et=S,fi.transition=_}else n.current=u;if(zc&&(zc=!1,So=n,Fc=g),_=n.pendingLanes,_===0&&(Io=null),zi(u.stateNode),Ir(n,It()),o!==null)for(f=n.onRecoverableError,u=0;u<o.length;u++)g=o[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(Vc)throw Vc=!1,n=ef,ef=null,n;return(Fc&1)!==0&&n.tag!==0&&fl(),_=n.pendingLanes,(_&1)!==0?n===tf?_u++:(_u=0,tf=n):_u=0,wo(),null}function fl(){if(So!==null){var n=Ln(Fc),o=fi.transition,u=et;try{if(fi.transition=null,et=16>n?16:n,So===null)var f=!1;else{if(n=So,So=null,Fc=0,(dt&6)!==0)throw Error(t(331));var g=dt;for(dt|=4,be=n.current;be!==null;){var _=be,S=_.child;if((be.flags&16)!==0){var N=_.deletions;if(N!==null){for(var F=0;F<N.length;F++){var J=N[F];for(be=J;be!==null;){var le=be;switch(le.tag){case 0:case 11:case 15:mu(8,le,_)}var ue=le.child;if(ue!==null)ue.return=le,be=ue;else for(;be!==null;){le=be;var ae=le.sibling,Pe=le.return;if(dg(le),le===J){be=null;break}if(ae!==null){ae.return=Pe,be=ae;break}be=Pe}}}var ke=_.alternate;if(ke!==null){var Ae=ke.child;if(Ae!==null){ke.child=null;do{var Kt=Ae.sibling;Ae.sibling=null,Ae=Kt}while(Ae!==null)}}be=_}}if((_.subtreeFlags&2064)!==0&&S!==null)S.return=_,be=S;else e:for(;be!==null;){if(_=be,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:mu(9,_,_.return)}var G=_.sibling;if(G!==null){G.return=_.return,be=G;break e}be=_.return}}var U=n.current;for(be=U;be!==null;){S=be;var Z=S.child;if((S.subtreeFlags&2064)!==0&&Z!==null)Z.return=S,be=Z;else e:for(S=U;be!==null;){if(N=be,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:Mc(9,N)}}catch(Re){qt(N,N.return,Re)}if(N===S){be=null;break e}var de=N.sibling;if(de!==null){de.return=N.return,be=de;break e}be=N.return}}if(dt=g,wo(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(Vi,n)}catch{}f=!0}return f}finally{et=u,fi.transition=o}}return!1}function bg(n,o,u){o=ul(u,o),o=$p(n,o,1),n=To(n,o,1),o=ir(),n!==null&&(Kn(n,1,o),Ir(n,o))}function qt(n,o,u){if(n.tag===3)bg(n,n,u);else for(;o!==null;){if(o.tag===3){bg(o,n,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Io===null||!Io.has(f))){n=ul(u,n),n=Gp(o,n,1),o=To(o,n,1),n=ir(),o!==null&&(Kn(o,1,n),Ir(o,n));break}}o=o.return}}function jw(n,o,u){var f=n.pingCache;f!==null&&f.delete(o),o=ir(),n.pingedLanes|=n.suspendedLanes&u,mn===n&&(Pn&u)===u&&(ln===4||ln===3&&(Pn&130023424)===Pn&&500>It()-Jd?Ta(n,0):Xd|=u),Ir(n,o)}function kg(n,o){o===0&&((n.mode&1)===0?o=1:(o=Kr,Kr<<=1,(Kr&130023424)===0&&(Kr=4194304)));var u=ir();n=Os(n,o),n!==null&&(Kn(n,o,u),Ir(n,u))}function Bw(n){var o=n.memoizedState,u=0;o!==null&&(u=o.retryLane),kg(n,u)}function Uw(n,o){var u=0;switch(n.tag){case 13:var f=n.stateNode,g=n.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=n.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(o),kg(n,u)}var Ag;Ag=function(n,o,u){if(n!==null)if(n.memoizedProps!==o.pendingProps||wr.current)Tr=!0;else{if((n.lanes&u)===0&&(o.flags&128)===0)return Tr=!1,kw(n,o,u);Tr=(n.flags&131072)!==0}else Tr=!1,Dt&&(o.flags&1048576)!==0&&up(o,_c,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;Nc(n,o),n=o.pendingProps;var g=tl(o,zn.current);al(o,u),g=Ad(null,o,f,n,g,u);var _=Rd();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Er(f)?(_=!0,mc(o)):_=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,xd(o),g.updater=Ac,o.stateNode=g,g._reactInternals=o,Vd(o,f,n,u),o=Bd(null,o,f,!0,_,u)):(o.tag=0,Dt&&_&&fd(o),rr(null,o,g,u),o=o.child),o;case 16:f=o.elementType;e:{switch(Nc(n,o),n=o.pendingProps,g=f._init,f=g(f._payload),o.type=f,g=o.tag=Hw(f),n=Ii(f,n),g){case 0:o=jd(null,o,f,n,u);break e;case 1:o=ng(null,o,f,n,u);break e;case 11:o=Yp(null,o,f,n,u);break e;case 14:o=Xp(null,o,f,Ii(f.type,n),u);break e}throw Error(t(306,f,""))}return o;case 0:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Ii(f,g),jd(n,o,f,g,u);case 1:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Ii(f,g),ng(n,o,f,g,u);case 3:e:{if(rg(o),n===null)throw Error(t(387));f=o.pendingProps,_=o.memoizedState,g=_.element,yp(n,o),xc(o,f,null,u);var S=o.memoizedState;if(f=S.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){g=ul(Error(t(423)),o),o=ig(n,o,f,u,g);break e}else if(f!==g){g=ul(Error(t(424)),o),o=ig(n,o,f,u,g);break e}else for(Fr=Ki(o.stateNode.containerInfo.firstChild),zr=o,Dt=!0,xi=null,u=gp(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(il(),f===g){o=zs(n,o,u);break e}rr(n,o,f,u)}o=o.child}return o;case 5:return Ep(o),n===null&&gd(o),f=o.type,g=o.pendingProps,_=n!==null?n.memoizedProps:null,S=g.children,Xe(f,g)?S=null:_!==null&&Xe(f,_)&&(o.flags|=32),tg(n,o),rr(n,o,S,u),o.child;case 6:return n===null&&gd(o),null;case 13:return sg(n,o,u);case 4:return Id(o,o.stateNode.containerInfo),f=o.pendingProps,n===null?o.child=sl(o,null,f,u):rr(n,o,f,u),o.child;case 11:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Ii(f,g),Yp(n,o,f,g,u);case 7:return rr(n,o,o.pendingProps,u),o.child;case 8:return rr(n,o,o.pendingProps.children,u),o.child;case 12:return rr(n,o,o.pendingProps.children,u),o.child;case 10:e:{if(f=o.type._context,g=o.pendingProps,_=o.memoizedProps,S=g.value,bt(wc,f._currentValue),f._currentValue=S,_!==null)if(Or(_.value,S)){if(_.children===g.children&&!wr.current){o=zs(n,o,u);break e}}else for(_=o.child,_!==null&&(_.return=o);_!==null;){var N=_.dependencies;if(N!==null){S=_.child;for(var F=N.firstContext;F!==null;){if(F.context===f){if(_.tag===1){F=Vs(-1,u&-u),F.tag=2;var J=_.updateQueue;if(J!==null){J=J.shared;var le=J.pending;le===null?F.next=F:(F.next=le.next,le.next=F),J.pending=F}}_.lanes|=u,F=_.alternate,F!==null&&(F.lanes|=u),Ed(_.return,u,o),N.lanes|=u;break}F=F.next}}else if(_.tag===10)S=_.type===o.type?null:_.child;else if(_.tag===18){if(S=_.return,S===null)throw Error(t(341));S.lanes|=u,N=S.alternate,N!==null&&(N.lanes|=u),Ed(S,u,o),S=_.sibling}else S=_.child;if(S!==null)S.return=_;else for(S=_;S!==null;){if(S===o){S=null;break}if(_=S.sibling,_!==null){_.return=S.return,S=_;break}S=S.return}_=S}rr(n,o,g.children,u),o=o.child}return o;case 9:return g=o.type,f=o.pendingProps.children,al(o,u),g=hi(g),f=f(g),o.flags|=1,rr(n,o,f,u),o.child;case 14:return f=o.type,g=Ii(f,o.pendingProps),g=Ii(f.type,g),Xp(n,o,f,g,u);case 15:return Jp(n,o,o.type,o.pendingProps,u);case 17:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Ii(f,g),Nc(n,o),o.tag=1,Er(f)?(n=!0,mc(o)):n=!1,al(o,u),Hp(o,f,g),Vd(o,f,g,u),Bd(null,o,f,!0,n,u);case 19:return ag(n,o,u);case 22:return eg(n,o,u)}throw Error(t(156,o.tag))};function Rg(n,o){return ea(n,o)}function Ww(n,o,u,f){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(n,o,u,f){return new Ww(n,o,u,f)}function lf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Hw(n){if(typeof n=="function")return lf(n)?1:0;if(n!=null){if(n=n.$$typeof,n===W)return 11;if(n===lt)return 14}return 2}function bo(n,o){var u=n.alternate;return u===null?(u=mi(n.tag,o,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=o,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&14680064,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,o=n.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u}function Wc(n,o,u,f,g,_){var S=2;if(f=n,typeof n=="function")lf(n)&&(S=1);else if(typeof n=="string")S=5;else e:switch(n){case j:return Ia(u.children,g,_,o);case R:S=8,g|=8;break;case D:return n=mi(12,u,o,g|2),n.elementType=D,n.lanes=_,n;case M:return n=mi(13,u,o,g),n.elementType=M,n.lanes=_,n;case Ye:return n=mi(19,u,o,g),n.elementType=Ye,n.lanes=_,n;case Ne:return Hc(u,g,_,o);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case B:S=10;break e;case z:S=9;break e;case W:S=11;break e;case lt:S=14;break e;case fe:S=16,f=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return o=mi(S,u,o,g),o.elementType=n,o.type=f,o.lanes=_,o}function Ia(n,o,u,f){return n=mi(7,n,f,o),n.lanes=u,n}function Hc(n,o,u,f){return n=mi(22,n,f,o),n.elementType=Ne,n.lanes=u,n.stateNode={isHidden:!1},n}function uf(n,o,u){return n=mi(6,n,null,o),n.lanes=u,n}function cf(n,o,u){return o=mi(4,n.children!==null?n.children:[],n.key,o),o.lanes=u,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}function qw(n,o,u,f,g){this.tag=o,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fi(0),this.expirationTimes=Fi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fi(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function hf(n,o,u,f,g,_,S,N,F){return n=new qw(n,o,u,N,F),o===1?(o=1,_===!0&&(o|=8)):o=0,_=mi(3,null,null,o),n.current=_,_.stateNode=n,_.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},xd(_),n}function $w(n,o,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Me,key:f==null?null:""+f,children:n,containerInfo:o,implementation:u}}function Ng(n){if(!n)return vo;n=n._reactInternals;e:{if(mr(n)!==n||n.tag!==1)throw Error(t(170));var o=n;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Er(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(n.tag===1){var u=n.type;if(Er(u))return op(n,u,o)}return o}function Lg(n,o,u,f,g,_,S,N,F){return n=hf(u,f,!0,n,g,_,S,N,F),n.context=Ng(null),u=n.current,f=ir(),g=Po(u),_=Vs(f,g),_.callback=o??null,To(u,_,g),n.current.lanes=g,Kn(n,g,f),Ir(n,f),n}function qc(n,o,u,f){var g=o.current,_=ir(),S=Po(g);return u=Ng(u),o.context===null?o.context=u:o.pendingContext=u,o=Vs(_,S),o.payload={element:n},f=f===void 0?null:f,f!==null&&(o.callback=f),n=To(g,o,S),n!==null&&(Ci(n,g,S,_),Tc(n,g,S)),S}function $c(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Mg(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<o?u:o}}function df(n,o){Mg(n,o),(n=n.alternate)&&Mg(n,o)}function Gw(){return null}var Dg=typeof reportError=="function"?reportError:function(n){console.error(n)};function ff(n){this._internalRoot=n}Gc.prototype.render=ff.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(t(409));qc(n,o,null,null)},Gc.prototype.unmount=ff.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;Ea(function(){qc(null,n,null,null)}),o[yt]=null}};function Gc(n){this._internalRoot=n}Gc.prototype.unstable_scheduleHydration=function(n){if(n){var o=ws();n={blockedOn:null,target:n,priority:o};for(var u=0;u<Mt.length&&o!==0&&o<Mt[u].priority;u++);Mt.splice(u,0,n),u===0&&Ui(n)}};function mf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Zc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Og(){}function Zw(n,o,u,f,g){if(g){if(typeof f=="function"){var _=f;f=function(){var J=$c(S);_.call(J)}}var S=Lg(o,f,n,0,null,!1,!1,"",Og);return n._reactRootContainer=S,n[yt]=S.current,mo(n.nodeType===8?n.parentNode:n),Ea(),S}for(;g=n.lastChild;)n.removeChild(g);if(typeof f=="function"){var N=f;f=function(){var J=$c(F);N.call(J)}}var F=hf(n,0,!1,null,null,!1,!1,"",Og);return n._reactRootContainer=F,n[yt]=F.current,mo(n.nodeType===8?n.parentNode:n),Ea(function(){qc(o,F,u,f)}),F}function Kc(n,o,u,f,g){var _=u._reactRootContainer;if(_){var S=_;if(typeof g=="function"){var N=g;g=function(){var F=$c(S);N.call(F)}}qc(o,S,n,g)}else S=Zw(u,o,n,g,f);return $c(S)}ys=function(n){switch(n.tag){case 3:var o=n.stateNode;if(o.current.memoizedState.isDehydrated){var u=Ie(o.pendingLanes);u!==0&&(Nr(o,u|1),Ir(o,It()),(dt&6)===0&&(dl=It()+500,wo()))}break;case 13:Ea(function(){var f=Os(n,1);if(f!==null){var g=ir();Ci(f,n,1,g)}}),df(n,1)}},Yr=function(n){if(n.tag===13){var o=Os(n,134217728);if(o!==null){var u=ir();Ci(o,n,134217728,u)}df(n,134217728)}},vs=function(n){if(n.tag===13){var o=Po(n),u=Os(n,o);if(u!==null){var f=ir();Ci(u,n,o,f)}df(n,o)}},ws=function(){return et},ji=function(n,o){var u=et;try{return et=n,o()}finally{et=u}},dr=function(n,o,u){switch(o){case"input":if(_n(n,u),o=u.name,u.type==="radio"&&o!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==n&&f.form===n.form){var g=Ja(f);if(!g)throw Error(t(90));sr(f),_n(f,g)}}}break;case"textarea":Zs(n,u);break;case"select":o=u.value,o!=null&&yn(n,!!u.multiple,o,!1)}},Ot=sf,Yt=Ea;var Kw={usingClientEntryPoint:!1,Events:[Rs,Ns,Ja,Fe,wt,sf]},yu={findFiberByHostInstance:As,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qw={bundleType:yu.bundleType,version:yu.version,rendererPackageName:yu.rendererPackageName,rendererConfig:yu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Be.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ba(n),n===null?null:n.stateNode},findFiberByHostInstance:yu.findFiberByHostInstance||Gw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qc.isDisabled&&Qc.supportsFiber)try{Vi=Qc.inject(Qw),Nn=Qc}catch{}}return Sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kw,Sr.createPortal=function(n,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mf(o))throw Error(t(200));return $w(n,o,null,u)},Sr.createRoot=function(n,o){if(!mf(n))throw Error(t(299));var u=!1,f="",g=Dg;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=hf(n,1,!1,null,null,u,!1,f,g),n[yt]=o.current,mo(n.nodeType===8?n.parentNode:n),new ff(o)},Sr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Ba(o),n=n===null?null:n.stateNode,n},Sr.flushSync=function(n){return Ea(n)},Sr.hydrate=function(n,o,u){if(!Zc(o))throw Error(t(200));return Kc(null,n,o,!0,u)},Sr.hydrateRoot=function(n,o,u){if(!mf(n))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,g=!1,_="",S=Dg;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),o=Lg(o,null,n,1,u??null,g,!1,_,S),n[yt]=o.current,mo(n),f)for(n=0;n<f.length;n++)u=f[n],g=u._getVersion,g=g(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,g]:o.mutableSourceEagerHydrationData.push(u,g);return new Gc(o)},Sr.render=function(n,o,u){if(!Zc(o))throw Error(t(200));return Kc(null,n,o,!1,u)},Sr.unmountComponentAtNode=function(n){if(!Zc(n))throw Error(t(40));return n._reactRootContainer?(Ea(function(){Kc(null,null,n,!1,function(){n._reactRootContainer=null,n[yt]=null})}),!0):!1},Sr.unstable_batchedUpdates=sf,Sr.unstable_renderSubtreeIntoContainer=function(n,o,u,f){if(!Zc(u))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Kc(n,o,u,!1,f)},Sr.version="18.3.1-next-f1338f8080-20240426",Sr}var Hg;function Ry(){if(Hg)return _f.exports;Hg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),_f.exports=rE(),_f.exports}var qg;function iE(){if(qg)return Yc;qg=1;var r=Ry();return Yc.createRoot=r.createRoot,Yc.hydrateRoot=r.hydrateRoot,Yc}var sE=iE(),Je=cm();const ge=um(Je);var Eu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var oE=Eu.exports,$g;function aE(){return $g||($g=1,(function(r,e){(function(t,s){s(e)})(oE,(function(t){var s="1.9.4";function a(i){var l,d,p,w;for(d=1,p=arguments.length;d<p;d++){w=arguments[d];for(l in w)i[l]=w[l]}return i}var c=Object.create||(function(){function i(){}return function(l){return i.prototype=l,new i}})();function m(i,l){var d=Array.prototype.slice;if(i.bind)return i.bind.apply(i,d.call(arguments,1));var p=d.call(arguments,2);return function(){return i.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var v=0;function E(i){return"_leaflet_id"in i||(i._leaflet_id=++v),i._leaflet_id}function x(i,l,d){var p,w,C,V;return V=function(){p=!1,w&&(C.apply(d,w),w=!1)},C=function(){p?w=arguments:(i.apply(d,arguments),setTimeout(V,l),p=!0)},C}function P(i,l,d){var p=l[1],w=l[0],C=p-w;return i===p&&d?i:((i-w)%C+C)%C+w}function I(){return!1}function k(i,l){if(l===!1)return i;var d=Math.pow(10,l===void 0?6:l);return Math.round(i*d)/d}function H(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function K(i){return H(i).split(/\s+/)}function ne(i,l){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?c(i.options):{});for(var d in l)i.options[d]=l[d];return i.options}function ee(i,l,d){var p=[];for(var w in i)p.push(encodeURIComponent(d?w.toUpperCase():w)+"="+encodeURIComponent(i[w]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var ye=/\{ *([\w_ -]+) *\}/g;function he(i,l){return i.replace(ye,function(d,p){var w=l[p];if(w===void 0)throw new Error("No value provided for variable "+d);return typeof w=="function"&&(w=w(l)),w})}var ve=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function Be(i,l){for(var d=0;d<i.length;d++)if(i[d]===l)return d;return-1}var Ke="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Me(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var j=0;function R(i){var l=+new Date,d=Math.max(0,16-(l-j));return j=l+d,window.setTimeout(i,d)}var D=window.requestAnimationFrame||Me("RequestAnimationFrame")||R,B=window.cancelAnimationFrame||Me("CancelAnimationFrame")||Me("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function z(i,l,d){if(d&&D===R)i.call(l);else return D.call(window,m(i,l))}function W(i){i&&B.call(window,i)}var M={__proto__:null,extend:a,create:c,bind:m,get lastId(){return v},stamp:E,throttle:x,wrapNum:P,falseFn:I,formatNum:k,trim:H,splitWords:K,setOptions:ne,getParamString:ee,template:he,isArray:ve,indexOf:Be,emptyImageUrl:Ke,requestFn:D,cancelFn:B,requestAnimFrame:z,cancelAnimFrame:W};function Ye(){}Ye.extend=function(i){var l=function(){ne(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=c(d);p.constructor=l,l.prototype=p;for(var w in this)Object.prototype.hasOwnProperty.call(this,w)&&w!=="prototype"&&w!=="__super__"&&(l[w]=this[w]);return i.statics&&a(l,i.statics),i.includes&&(lt(i.includes),a.apply(null,[p].concat(i.includes))),a(p,i),delete p.statics,delete p.includes,p.options&&(p.options=d.options?c(d.options):{},a(p.options,i.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var C=0,V=p._initHooks.length;C<V;C++)p._initHooks[C].call(this)}},l},Ye.include=function(i){var l=this.prototype.options;return a(this.prototype,i),i.options&&(this.prototype.options=l,this.mergeOptions(i.options)),this},Ye.mergeOptions=function(i){return a(this.prototype.options,i),this},Ye.addInitHook=function(i){var l=Array.prototype.slice.call(arguments,1),d=typeof i=="function"?i:function(){this[i].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function lt(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=ve(i)?i:[i];for(var l=0;l<i.length;l++)i[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var fe={on:function(i,l,d){if(typeof i=="object")for(var p in i)this._on(p,i[p],l);else{i=K(i);for(var w=0,C=i.length;w<C;w++)this._on(i[w],l,d)}return this},off:function(i,l,d){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var p in i)this._off(p,i[p],l);else{i=K(i);for(var w=arguments.length===1,C=0,V=i.length;C<V;C++)w?this._off(i[C]):this._off(i[C],l,d)}return this},_on:function(i,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(i,l,d)===!1){d===this&&(d=void 0);var w={fn:l,ctx:d};p&&(w.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(w)}},_off:function(i,l,d){var p,w,C;if(this._events&&(p=this._events[i],!!p)){if(arguments.length===1){if(this._firingCount)for(w=0,C=p.length;w<C;w++)p[w].fn=I;delete this._events[i];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var V=this._listens(i,l,d);if(V!==!1){var $=p[V];this._firingCount&&($.fn=I,this._events[i]=p=p.slice()),p.splice(V,1)}}},fire:function(i,l,d){if(!this.listens(i,d))return this;var p=a({},l,{type:i,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var w=this._events[i];if(w){this._firingCount=this._firingCount+1||1;for(var C=0,V=w.length;C<V;C++){var $=w[C],Y=$.fn;$.once&&this.off(i,Y,$.ctx),Y.call($.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(i,l,d,p){typeof i!="string"&&console.warn('"string" type argument expected');var w=l;typeof l!="function"&&(p=!!l,w=void 0,d=void 0);var C=this._events&&this._events[i];if(C&&C.length&&this._listens(i,w,d)!==!1)return!0;if(p){for(var V in this._eventParents)if(this._eventParents[V].listens(i,l,d,p))return!0}return!1},_listens:function(i,l,d){if(!this._events)return!1;var p=this._events[i]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var w=0,C=p.length;w<C;w++)if(p[w].fn===l&&p[w].ctx===d)return w;return!1},once:function(i,l,d){if(typeof i=="object")for(var p in i)this._on(p,i[p],l,!0);else{i=K(i);for(var w=0,C=i.length;w<C;w++)this._on(i[w],l,d,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[E(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[E(i)],this},_propagateEvent:function(i){for(var l in this._eventParents)this._eventParents[l].fire(i.type,a({layer:i.target,propagatedFrom:i.target},i),!0)}};fe.addEventListener=fe.on,fe.removeEventListener=fe.clearAllEventListeners=fe.off,fe.addOneTimeEventListener=fe.once,fe.fireEvent=fe.fire,fe.hasEventListeners=fe.listens;var Ne=Ye.extend(fe);function te(i,l,d){this.x=d?Math.round(i):i,this.y=d?Math.round(l):l}var _e=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};te.prototype={clone:function(){return new te(this.x,this.y)},add:function(i){return this.clone()._add(re(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(re(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new te(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new te(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=_e(this.x),this.y=_e(this.y),this},distanceTo:function(i){i=re(i);var l=i.x-this.x,d=i.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(i){return i=re(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=re(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+k(this.x)+", "+k(this.y)+")"}};function re(i,l,d){return i instanceof te?i:ve(i)?new te(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new te(i.x,i.y):new te(i,l,d)}function O(i,l){if(i)for(var d=l?[i,l]:i,p=0,w=d.length;p<w;p++)this.extend(d[p])}O.prototype={extend:function(i){var l,d;if(!i)return this;if(i instanceof te||typeof i[0]=="number"||"x"in i)l=d=re(i);else if(i=X(i),l=i.min,d=i.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(i){return re((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return re(this.min.x,this.max.y)},getTopRight:function(){return re(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var l,d;return typeof i[0]=="number"||i instanceof te?i=re(i):i=X(i),i instanceof O?(l=i.min,d=i.max):l=d=i,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(i){i=X(i);var l=this.min,d=this.max,p=i.min,w=i.max,C=w.x>=l.x&&p.x<=d.x,V=w.y>=l.y&&p.y<=d.y;return C&&V},overlaps:function(i){i=X(i);var l=this.min,d=this.max,p=i.min,w=i.max,C=w.x>l.x&&p.x<d.x,V=w.y>l.y&&p.y<d.y;return C&&V},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*i,w=Math.abs(l.y-d.y)*i;return X(re(l.x-p,l.y-w),re(d.x+p,d.y+w))},equals:function(i){return i?(i=X(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function X(i,l){return!i||i instanceof O?i:new O(i,l)}function pe(i,l){if(i)for(var d=l?[i,l]:i,p=0,w=d.length;p<w;p++)this.extend(d[p])}pe.prototype={extend:function(i){var l=this._southWest,d=this._northEast,p,w;if(i instanceof xe)p=i,w=i;else if(i instanceof pe){if(p=i._southWest,w=i._northEast,!p||!w)return this}else return i?this.extend(ce(i)||we(i)):this;return!l&&!d?(this._southWest=new xe(p.lat,p.lng),this._northEast=new xe(w.lat,w.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(w.lat,d.lat),d.lng=Math.max(w.lng,d.lng)),this},pad:function(i){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*i,w=Math.abs(l.lng-d.lng)*i;return new pe(new xe(l.lat-p,l.lng-w),new xe(d.lat+p,d.lng+w))},getCenter:function(){return new xe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new xe(this.getNorth(),this.getWest())},getSouthEast:function(){return new xe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof xe||"lat"in i?i=ce(i):i=we(i);var l=this._southWest,d=this._northEast,p,w;return i instanceof pe?(p=i.getSouthWest(),w=i.getNorthEast()):p=w=i,p.lat>=l.lat&&w.lat<=d.lat&&p.lng>=l.lng&&w.lng<=d.lng},intersects:function(i){i=we(i);var l=this._southWest,d=this._northEast,p=i.getSouthWest(),w=i.getNorthEast(),C=w.lat>=l.lat&&p.lat<=d.lat,V=w.lng>=l.lng&&p.lng<=d.lng;return C&&V},overlaps:function(i){i=we(i);var l=this._southWest,d=this._northEast,p=i.getSouthWest(),w=i.getNorthEast(),C=w.lat>l.lat&&p.lat<d.lat,V=w.lng>l.lng&&p.lng<d.lng;return C&&V},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,l){return i?(i=we(i),this._southWest.equals(i.getSouthWest(),l)&&this._northEast.equals(i.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function we(i,l){return i instanceof pe?i:new pe(i,l)}function xe(i,l,d){if(isNaN(i)||isNaN(l))throw new Error("Invalid LatLng object: ("+i+", "+l+")");this.lat=+i,this.lng=+l,d!==void 0&&(this.alt=+d)}xe.prototype={equals:function(i,l){if(!i)return!1;i=ce(i);var d=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return d<=(l===void 0?1e-9:l)},toString:function(i){return"LatLng("+k(this.lat,i)+", "+k(this.lng,i)+")"},distanceTo:function(i){return Ue.distance(this,ce(i))},wrap:function(){return Ue.wrapLatLng(this)},toBounds:function(i){var l=180*i/40075017,d=l/Math.cos(Math.PI/180*this.lat);return we([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new xe(this.lat,this.lng,this.alt)}};function ce(i,l,d){return i instanceof xe?i:ve(i)&&typeof i[0]!="object"?i.length===3?new xe(i[0],i[1],i[2]):i.length===2?new xe(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new xe(i.lat,"lng"in i?i.lng:i.lon,i.alt):l===void 0?null:new xe(i,l,d)}var $e={latLngToPoint:function(i,l){var d=this.projection.project(i),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(i,l){var d=this.scale(l),p=this.transformation.untransform(i,d);return this.projection.unproject(p)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(i),p=this.transformation.transform(l.min,d),w=this.transformation.transform(l.max,d);return new O(p,w)},infinite:!1,wrapLatLng:function(i){var l=this.wrapLng?P(i.lng,this.wrapLng,!0):i.lng,d=this.wrapLat?P(i.lat,this.wrapLat,!0):i.lat,p=i.alt;return new xe(d,l,p)},wrapLatLngBounds:function(i){var l=i.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,w=l.lng-d.lng;if(p===0&&w===0)return i;var C=i.getSouthWest(),V=i.getNorthEast(),$=new xe(C.lat-p,C.lng-w),Y=new xe(V.lat-p,V.lng-w);return new pe($,Y)}},Ue=a({},$e,{wrapLng:[-180,180],R:6371e3,distance:function(i,l){var d=Math.PI/180,p=i.lat*d,w=l.lat*d,C=Math.sin((l.lat-i.lat)*d/2),V=Math.sin((l.lng-i.lng)*d/2),$=C*C+Math.cos(p)*Math.cos(w)*V*V,Y=2*Math.atan2(Math.sqrt($),Math.sqrt(1-$));return this.R*Y}}),rt=6378137,Rt={R:rt,MAX_LATITUDE:85.0511287798,project:function(i){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,i.lat),-d),w=Math.sin(p*l);return new te(this.R*i.lng*l,this.R*Math.log((1+w)/(1-w))/2)},unproject:function(i){var l=180/Math.PI;return new xe((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*l,i.x*l/this.R)},bounds:(function(){var i=rt*Math.PI;return new O([-i,-i],[i,i])})()};function Ur(i,l,d,p){if(ve(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=l,this._c=d,this._d=p}Ur.prototype={transform:function(i,l){return this._transform(i.clone(),l)},_transform:function(i,l){return l=l||1,i.x=l*(this._a*i.x+this._b),i.y=l*(this._c*i.y+this._d),i},untransform:function(i,l){return l=l||1,new te((i.x/l-this._b)/this._a,(i.y/l-this._d)/this._c)}};function sr(i,l,d,p){return new Ur(i,l,d,p)}var or=a({},Ue,{code:"EPSG:3857",projection:Rt,transformation:(function(){var i=.5/(Math.PI*Rt.R);return sr(i,.5,-i,.5)})()}),Wr=a({},or,{code:"EPSG:900913"});function hs(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Hr(i,l){var d="",p,w,C,V,$,Y;for(p=0,C=i.length;p<C;p++){for($=i[p],w=0,V=$.length;w<V;w++)Y=$[w],d+=(w?"L":"M")+Y.x+" "+Y.y;d+=l?Ee.svg?"z":"x":""}return d||"M0 0"}var _n=document.documentElement.style,kr="ActiveXObject"in window,ft=kr&&!document.addEventListener,St="msLaunchUri"in navigator&&!("documentMode"in document),yn=Vt("webkit"),Ut=Vt("android"),$n=Vt("android 2")||Vt("android 3"),Zs=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),qr=Ut&&Vt("Google")&&Zs<537&&!("AudioNode"in window),ar=!!window.opera,gi=!St&&Vt("chrome"),lr=Vt("gecko")&&!yn&&!ar&&!kr,Mi=!gi&&Vt("safari"),vn=Vt("phantom"),ur="OTransition"in _n,Ar=navigator.platform.indexOf("Win")===0,Rr=kr&&"transition"in _n,$r="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!$n,_i="MozPerspective"in _n,Rn=!window.L_DISABLE_3D&&(Rr||$r||_i)&&!ur&&!vn,cr=typeof orientation<"u"||Vt("mobile"),hr=cr&&yn,wn=cr&&$r,dr=!window.PointerEvent&&window.MSPointerEvent,fr=!!(window.PointerEvent||dr),Tt="ontouchstart"in window||!!window.TouchEvent,Di=!window.L_NO_TOUCH&&(Tt||fr),Fe=cr&&ar,wt=cr&&lr,Ot=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Yt=(function(){var i=!1;try{var l=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",I,l),window.removeEventListener("testPassiveEventSupport",I,l)}catch{}return i})(),En=(function(){return!!document.createElement("canvas").getContext})(),Pt=!!(document.createElementNS&&hs("svg").createSVGRect),Wt=!!Pt&&(function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Gn=!Pt&&(function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var l=i.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}})(),Ht=navigator.platform.indexOf("Mac")===0,cn=navigator.platform.indexOf("Linux")===0;function Vt(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var Ee={ie:kr,ielt9:ft,edge:St,webkit:yn,android:Ut,android23:$n,androidStock:qr,opera:ar,chrome:gi,gecko:lr,safari:Mi,phantom:vn,opera12:ur,win:Ar,ie3d:Rr,webkit3d:$r,gecko3d:_i,any3d:Rn,mobile:cr,mobileWebkit:hr,mobileWebkit3d:wn,msPointer:dr,pointer:fr,touch:Di,touchNative:Tt,mobileOpera:Fe,mobileGecko:wt,retina:Ot,passiveEvents:Yt,canvas:En,svg:Pt,vml:Gn,inlineSvg:Wt,mac:Ht,linux:cn},Oi=Ee.msPointer?"MSPointerDown":"pointerdown",Zn=Ee.msPointer?"MSPointerMove":"pointermove",Yo=Ee.msPointer?"MSPointerUp":"pointerup",Xo=Ee.msPointer?"MSPointerCancel":"pointercancel",ds={touchstart:Oi,touchmove:Zn,touchend:Yo,touchcancel:Xo},mr={touchstart:It,touchmove:pr,touchend:pr,touchcancel:pr},Gr={},Jo=!1;function ja(i,l,d){return l==="touchstart"&&ps(),mr[l]?(d=mr[l].bind(this,d),i.addEventListener(ds[l],d,!1),d):(console.warn("wrong event specified:",l),I)}function Ba(i,l,d){if(!ds[l]){console.warn("wrong event specified:",l);return}i.removeEventListener(ds[l],d,!1)}function fs(i){Gr[i.pointerId]=i}function ea(i){Gr[i.pointerId]&&(Gr[i.pointerId]=i)}function ms(i){delete Gr[i.pointerId]}function ps(){Jo||(document.addEventListener(Oi,fs,!0),document.addEventListener(Zn,ea,!0),document.addEventListener(Yo,ms,!0),document.addEventListener(Xo,ms,!0),Jo=!0)}function pr(i,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Gr)l.touches.push(Gr[d]);l.changedTouches=[l],i(l)}}function It(i,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Ct(l),pr(i,l)}function $l(i){var l={},d,p;for(p in i)d=i[p],l[p]=d&&d.bind?d.bind(i):d;return i=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Ks=200;function ta(i,l){i.addEventListener("dblclick",l);var d=0,p;function w(C){if(C.detail!==1){p=C.detail;return}if(!(C.pointerType==="mouse"||C.sourceCapabilities&&!C.sourceCapabilities.firesTouchEvents)){var V=Xr(C);if(!(V.some(function(Y){return Y instanceof HTMLLabelElement&&Y.attributes.for})&&!V.some(function(Y){return Y instanceof HTMLInputElement||Y instanceof HTMLSelectElement}))){var $=Date.now();$-d<=Ks?(p++,p===2&&l($l(C))):p=1,d=$}}}return i.addEventListener("click",w),{dblclick:l,simDblclick:w}}function gs(i,l){i.removeEventListener("dblclick",l.dblclick),i.removeEventListener("click",l.simDblclick)}var _s=Fi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Zr=Fi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Vi=Zr==="webkitTransition"||Zr==="OTransition"?Zr+"End":"transitionend";function Nn(i){return typeof i=="string"?document.getElementById(i):i}function zi(i,l){var d=i.style[l]||i.currentStyle&&i.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(i,null);d=p?p[l]:null}return d==="auto"?null:d}function Ge(i,l,d){var p=document.createElement(i);return p.className=l||"",d&&d.appendChild(p),p}function ut(i){var l=i.parentNode;l&&l.removeChild(i)}function Tn(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function gr(i){var l=i.parentNode;l&&l.lastChild!==i&&l.appendChild(i)}function xn(i){var l=i.parentNode;l&&l.firstChild!==i&&l.insertBefore(i,l.firstChild)}function Kr(i,l){if(i.classList!==void 0)return i.classList.contains(l);var d=Qr(i);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function Ie(i,l){if(i.classList!==void 0)for(var d=K(l),p=0,w=d.length;p<w;p++)i.classList.add(d[p]);else if(!Kr(i,l)){var C=Qr(i);yi(i,(C?C+" ":"")+l)}}function gt(i,l){i.classList!==void 0?i.classList.remove(l):yi(i,H((" "+Qr(i)+" ").replace(" "+l+" "," ")))}function yi(i,l){i.className.baseVal===void 0?i.className=l:i.className.baseVal=l}function Qr(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function hn(i,l){"opacity"in i.style?i.style.opacity=l:"filter"in i.style&&na(i,l)}function na(i,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=i.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):i.style.filter+=" progid:"+p+"(opacity="+l+")"}function Fi(i){for(var l=document.documentElement.style,d=0;d<i.length;d++)if(i[d]in l)return i[d];return!1}function Kn(i,l,d){var p=l||new te(0,0);i.style[_s]=(Ee.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function Lt(i,l){i._leaflet_pos=l,Ee.any3d?Kn(i,l):(i.style.left=l.x+"px",i.style.top=l.y+"px")}function Nr(i){return i._leaflet_pos||new te(0,0)}var et,Ln,ys;if("onselectstart"in document)et=function(){Oe(window,"selectstart",Ct)},Ln=function(){_t(window,"selectstart",Ct)};else{var Yr=Fi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);et=function(){if(Yr){var i=document.documentElement.style;ys=i[Yr],i[Yr]="none"}},Ln=function(){Yr&&(document.documentElement.style[Yr]=ys,ys=void 0)}}function vs(){Oe(window,"dragstart",Ct)}function ws(){_t(window,"dragstart",Ct)}var ji,_r;function Bi(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Qn(),ji=i,_r=i.style.outlineStyle,i.style.outlineStyle="none",Oe(window,"keydown",Qn))}function Qn(){ji&&(ji.style.outlineStyle=_r,ji=void 0,_r=void 0,_t(window,"keydown",Qn))}function Lr(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Zt(i){var l=i.getBoundingClientRect();return{x:l.width/i.offsetWidth||1,y:l.height/i.offsetHeight||1,boundingClientRect:l}}var Es={__proto__:null,TRANSFORM:_s,TRANSITION:Zr,TRANSITION_END:Vi,get:Nn,getStyle:zi,create:Ge,remove:ut,empty:Tn,toFront:gr,toBack:xn,hasClass:Kr,addClass:Ie,removeClass:gt,setClass:yi,getClass:Qr,setOpacity:hn,testProp:Fi,setTransform:Kn,setPosition:Lt,getPosition:Nr,get disableTextSelection(){return et},get enableTextSelection(){return Ln},disableImageDrag:vs,enableImageDrag:ws,preventOutline:Bi,restoreOutline:Qn,getSizedParentNode:Lr,getScale:Zt};function Oe(i,l,d,p){if(l&&typeof l=="object")for(var w in l)Qs(i,w,l[w],d);else{l=K(l);for(var C=0,V=l.length;C<V;C++)Qs(i,l[C],d,p)}return this}var Mt="_leaflet_events";function _t(i,l,d,p){if(arguments.length===1)vi(i),delete i[Mt];else if(l&&typeof l=="object")for(var w in l)Ui(i,w,l[w],d);else if(l=K(l),arguments.length===2)vi(i,function($){return Be(l,$)!==-1});else for(var C=0,V=l.length;C<V;C++)Ui(i,l[C],d,p);return this}function vi(i,l){for(var d in i[Mt]){var p=d.split(/\d/)[0];(!l||l(p))&&Ui(i,p,null,null,d)}}var Yn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Qs(i,l,d,p){var w=l+E(d)+(p?"_"+E(p):"");if(i[Mt]&&i[Mt][w])return this;var C=function($){return d.call(p||i,$||window.event)},V=C;!Ee.touchNative&&Ee.pointer&&l.indexOf("touch")===0?C=ja(i,l,C):Ee.touch&&l==="dblclick"?C=ta(i,C):"addEventListener"in i?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?i.addEventListener(Yn[l]||l,C,Ee.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(C=function($){$=$||window.event,xs(i,$)&&V($)},i.addEventListener(Yn[l],C,!1)):i.addEventListener(l,V,!1):i.attachEvent("on"+l,C),i[Mt]=i[Mt]||{},i[Mt][w]=C}function Ui(i,l,d,p,w){w=w||l+E(d)+(p?"_"+E(p):"");var C=i[Mt]&&i[Mt][w];if(!C)return this;!Ee.touchNative&&Ee.pointer&&l.indexOf("touch")===0?Ba(i,l,C):Ee.touch&&l==="dblclick"?gs(i,C):"removeEventListener"in i?i.removeEventListener(Yn[l]||l,C,!1):i.detachEvent("on"+l,C),i[Mt][w]=null}function at(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Ys(i){return Qs(i,"wheel",at),this}function Ts(i){return Oe(i,"mousedown touchstart dblclick contextmenu",at),i._leaflet_disable_click=!0,this}function Ct(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Mn(i){return Ct(i),at(i),this}function Xr(i){if(i.composedPath)return i.composedPath();for(var l=[],d=i.target;d;)l.push(d),d=d.parentNode;return l}function Jr(i,l){if(!l)return new te(i.clientX,i.clientY);var d=Zt(l),p=d.boundingClientRect;return new te((i.clientX-p.left)/d.x-l.clientLeft,(i.clientY-p.top)/d.y-l.clientTop)}var ei=Ee.linux&&Ee.chrome?window.devicePixelRatio:Ee.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ra(i){return Ee.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/ei:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function xs(i,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==i;)d=d.parentNode}catch{return!1}return d!==i}var ti={__proto__:null,on:Oe,off:_t,stopPropagation:at,disableScrollPropagation:Ys,disableClickPropagation:Ts,preventDefault:Ct,stop:Mn,getPropagationPath:Xr,getMousePosition:Jr,getWheelDelta:ra,isExternalTarget:xs,addListener:Oe,removeListener:_t},Is=Ne.extend({run:function(i,l,d,p){this.stop(),this._el=i,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Nr(i),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=z(this._animate,this),this._step()},_step:function(i){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),i):(this._runFrame(1),this._complete())},_runFrame:function(i,l){var d=this._startPos.add(this._offset.multiplyBy(i));l&&d._round(),Lt(this._el,d),this.fire("step")},_complete:function(){W(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),tt=Ne.extend({options:{crs:or,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,l){l=ne(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=m(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ce(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Zr&&Ee.any3d&&!Ee.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Oe(this._proxy,Vi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),i=this._limitCenter(ce(i),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=a({animate:d.animate},d.zoom),d.pan=a({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,l,d.zoom):this._tryAnimatedPan(i,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(i,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(i,l){return this._loaded?this.setView(this.getCenter(),i,{zoom:l}):(this._zoom=i,this)},zoomIn:function(i,l){return i=i||(Ee.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,l)},zoomOut:function(i,l){return i=i||(Ee.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,l)},setZoomAround:function(i,l,d){var p=this.getZoomScale(l),w=this.getSize().divideBy(2),C=i instanceof te?i:this.latLngToContainerPoint(i),V=C.subtract(w).multiplyBy(1-1/p),$=this.containerPointToLatLng(w.add(V));return this.setView($,l,{zoom:d})},_getBoundsCenterZoom:function(i,l){l=l||{},i=i.getBounds?i.getBounds():we(i);var d=re(l.paddingTopLeft||l.padding||[0,0]),p=re(l.paddingBottomRight||l.padding||[0,0]),w=this.getBoundsZoom(i,!1,d.add(p));if(w=typeof l.maxZoom=="number"?Math.min(l.maxZoom,w):w,w===1/0)return{center:i.getCenter(),zoom:w};var C=p.subtract(d).divideBy(2),V=this.project(i.getSouthWest(),w),$=this.project(i.getNorthEast(),w),Y=this.unproject(V.add($).divideBy(2).add(C),w);return{center:Y,zoom:w}},fitBounds:function(i,l){if(i=we(i),!i.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(i,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,l){return this.setView(i,this._zoom,{pan:l})},panBy:function(i,l){if(i=re(i).round(),l=l||{},!i.x&&!i.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Is,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){Ie(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,l,d){if(d=d||{},d.animate===!1||!Ee.any3d)return this.setView(i,l,d);this._stop();var p=this.project(this.getCenter()),w=this.project(i),C=this.getSize(),V=this._zoom;i=ce(i),l=l===void 0?V:l;var $=Math.max(C.x,C.y),Y=$*this.getZoomScale(V,l),oe=w.distanceTo(p)||1,Te=1.42,De=Te*Te;function Xe(yt){var _o=yt?-1:1,ud=yt?Y:$,cd=Y*Y-$*$+_o*De*De*oe*oe,As=2*ud*De*oe,Rs=cd/As,Ns=Math.sqrt(Rs*Rs+1)-Rs,Ja=Ns<1e-9?-18:Math.log(Ns);return Ja}function on(yt){return(Math.exp(yt)-Math.exp(-yt))/2}function Jt(yt){return(Math.exp(yt)+Math.exp(-yt))/2}function nr(yt){return on(yt)/Jt(yt)}var Vn=Xe(0);function po(yt){return $*(Jt(Vn)/Jt(Vn+Te*yt))}function iu(yt){return $*(Jt(Vn)*nr(Vn+Te*yt)-on(Vn))/De}function Ki(yt){return 1-Math.pow(1-yt,1.5)}var dc=Date.now(),ks=(Xe(1)-Vn)/Te,li=d.duration?1e3*d.duration:1e3*ks*.8;function go(){var yt=(Date.now()-dc)/li,_o=Ki(yt)*ks;yt<=1?(this._flyToFrame=z(go,this),this._move(this.unproject(p.add(w.subtract(p).multiplyBy(iu(_o)/oe)),V),this.getScaleZoom($/po(_o),V),{flyTo:!0})):this._move(i,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),go.call(this),this},flyToBounds:function(i,l){var d=this._getBoundsCenterZoom(i,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(i){return i=we(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var l=this.options.minZoom;return this.options.minZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var l=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,we(i));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(i,l){l=l||{};var d=re(l.paddingTopLeft||l.padding||[0,0]),p=re(l.paddingBottomRight||l.padding||[0,0]),w=this.project(this.getCenter()),C=this.project(i),V=this.getPixelBounds(),$=X([V.min.add(d),V.max.subtract(p)]),Y=$.getSize();if(!$.contains(C)){this._enforcingBounds=!0;var oe=C.subtract($.getCenter()),Te=$.extend(C).getSize().subtract(Y);w.x+=oe.x<0?-Te.x:Te.x,w.y+=oe.y<0?-Te.y:Te.y,this.panTo(this.unproject(w),l),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=a({animate:!1,pan:!0},i===!0?{animate:!0}:i);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),w=d.divideBy(2).round(),C=p.subtract(w);return!C.x&&!C.y?this:(i.animate&&i.pan?this.panBy(C):(i.pan&&this._rawPanBy(C),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(m(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=a({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=m(this._handleGeolocationResponse,this),d=m(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,i):navigator.geolocation.getCurrentPosition(l,d,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var l=i.code,d=i.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var l=i.coords.latitude,d=i.coords.longitude,p=new xe(l,d),w=p.toBounds(i.coords.accuracy*2),C=this._locateOptions;if(C.setView){var V=this.getBoundsZoom(w);this.setView(p,C.maxZoom?Math.min(V,C.maxZoom):V)}var $={latlng:p,bounds:w,timestamp:i.timestamp};for(var Y in i.coords)typeof i.coords[Y]=="number"&&($[Y]=i.coords[Y]);this.fire("locationfound",$)}},addHandler:function(i,l){if(!l)return this;var d=this[i]=new l(this);return this._handlers.push(d),this.options[i]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ut(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(W(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)ut(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,l){var d="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),p=Ge("div",d,l||this._mapPane);return i&&(this._panes[i]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),l=this.unproject(i.getBottomLeft()),d=this.unproject(i.getTopRight());return new pe(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,l,d){i=we(i),d=re(d||[0,0]);var p=this.getZoom()||0,w=this.getMinZoom(),C=this.getMaxZoom(),V=i.getNorthWest(),$=i.getSouthEast(),Y=this.getSize().subtract(d),oe=X(this.project($,p),this.project(V,p)).getSize(),Te=Ee.any3d?this.options.zoomSnap:1,De=Y.x/oe.x,Xe=Y.y/oe.y,on=l?Math.max(De,Xe):Math.min(De,Xe);return p=this.getScaleZoom(on,p),Te&&(p=Math.round(p/(Te/100))*(Te/100),p=l?Math.ceil(p/Te)*Te:Math.floor(p/Te)*Te),Math.max(w,Math.min(C,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new te(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,l){var d=this._getTopLeftPoint(i,l);return new O(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(i)/d.scale(l)},getScaleZoom:function(i,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(i*d.scale(l));return isNaN(p)?1/0:p},project:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ce(i),l)},unproject:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(re(i),l)},layerPointToLatLng:function(i){var l=re(i).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(i){var l=this.project(ce(i))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(ce(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(we(i))},distance:function(i,l){return this.options.crs.distance(ce(i),ce(l))},containerPointToLayerPoint:function(i){return re(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return re(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var l=this.containerPointToLayerPoint(re(i));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(i)))},mouseEventToContainerPoint:function(i){return Jr(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var l=this._container=Nn(i);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Oe(l,"scroll",this._onScroll,this),this._containerId=E(l)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ee.any3d,Ie(i,"leaflet-container"+(Ee.touch?" leaflet-touch":"")+(Ee.retina?" leaflet-retina":"")+(Ee.ielt9?" leaflet-oldie":"")+(Ee.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=zi(i,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Lt(this._mapPane,new te(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ie(i.markerPane,"leaflet-zoom-hide"),Ie(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,l,d){Lt(this._mapPane,new te(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var w=this._zoom!==l;this._moveStart(w,d)._move(i,l)._moveEnd(w),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(i,l){return i&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(i,l,d,p){l===void 0&&(l=this._zoom);var w=this._zoom!==l;return this._zoom=l,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),p?d&&d.pinch&&this.fire("zoom",d):((w||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return W(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){Lt(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[E(this._container)]=this;var l=i?_t:Oe;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),Ee.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){W(this._resizeRequest),this._resizeRequest=z(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,l){for(var d=[],p,w=l==="mouseout"||l==="mouseover",C=i.target||i.srcElement,V=!1;C;){if(p=this._targets[E(C)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){V=!0;break}if(p&&p.listens(l,!0)&&(w&&!xs(C,i)||(d.push(p),w))||C===this._container)break;C=C.parentNode}return!d.length&&!V&&!w&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var l=i.target||i.srcElement;if(!(!this._loaded||l._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(l))){var d=i.type;d==="mousedown"&&Bi(l),this._fireDOMEvent(i,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,l,d){if(i.type==="click"){var p=a({},i);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var w=this._findEventTargets(i,l);if(d){for(var C=[],V=0;V<d.length;V++)d[V].listens(l,!0)&&C.push(d[V]);w=C.concat(w)}if(w.length){l==="contextmenu"&&Ct(i);var $=w[0],Y={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var oe=$.getLatLng&&(!$._radius||$._radius<=10);Y.containerPoint=oe?this.latLngToContainerPoint($.getLatLng()):this.mouseEventToContainerPoint(i),Y.layerPoint=this.containerPointToLayerPoint(Y.containerPoint),Y.latlng=oe?$.getLatLng():this.layerPointToLatLng(Y.layerPoint)}for(V=0;V<w.length;V++)if(w[V].fire(l,Y,!0),Y.originalEvent._stopped||w[V].options.bubblingMouseEvents===!1&&Be(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,l=this._handlers.length;i<l;i++)this._handlers[i].disable()},whenReady:function(i,l){return this._loaded?i.call(l||this,{target:this}):this.on("load",i,l),this},_getMapPanePos:function(){return Nr(this._mapPane)||new te(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,l){var d=i&&l!==void 0?this._getNewPixelOrigin(i,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,l){var d=this.getSize()._divideBy(2);return this.project(i,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(i,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(i,l,d){var p=this._getNewPixelOrigin(d,l);return X([this.project(i.getSouthWest(),l)._subtract(p),this.project(i.getNorthWest(),l)._subtract(p),this.project(i.getSouthEast(),l)._subtract(p),this.project(i.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,l,d){if(!d)return i;var p=this.project(i,l),w=this.getSize().divideBy(2),C=new O(p.subtract(w),p.add(w)),V=this._getBoundsOffset(C,d,l);return Math.abs(V.x)<=1&&Math.abs(V.y)<=1?i:this.unproject(p.add(V),l)},_limitOffset:function(i,l){if(!l)return i;var d=this.getPixelBounds(),p=new O(d.min.add(i),d.max.add(i));return i.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(i,l,d){var p=X(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),w=p.min.subtract(i.min),C=p.max.subtract(i.max),V=this._rebound(w.x,-C.x),$=this._rebound(w.y,-C.y);return new te(V,$)},_rebound:function(i,l){return i+l>0?Math.round(i-l)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(l))},_limitZoom:function(i){var l=this.getMinZoom(),d=this.getMaxZoom(),p=Ee.any3d?this.options.zoomSnap:1;return p&&(i=Math.round(i/p)*p),Math.max(l,Math.min(d,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){gt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,l){var d=this._getCenterOffset(i)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var i=this._proxy=Ge("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(l){var d=_s,p=this._proxy.style[d];Kn(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ut(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),l=this.getZoom();Kn(this._proxy,this.project(i,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),w=this._getCenterOffset(i)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(w)?!1:(z(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(i,l,!0)},this),!0)},_animateZoom:function(i,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=l,Ie(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(m(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&gt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Xn(i,l){return new tt(i,l)}var dn=Ye.extend({options:{position:"topright"},initialize:function(i){ne(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var l=this._map;return l&&l.removeControl(this),this.options.position=i,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var l=this._container=this.onAdd(i),d=this.getPosition(),p=i._controlCorners[d];return Ie(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ut(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Jn=function(i){return new dn(i)};tt.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},l="leaflet-",d=this._controlContainer=Ge("div",l+"control-container",this._container);function p(w,C){var V=l+w+" "+l+C;i[w+C]=Ge("div",V,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)ut(this._controlCorners[i]);ut(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ia=dn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(i,l,d){ne(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in i)this._addLayer(i[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return dn.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,l){return this._addLayer(i,l),this._map?this._update():this},addOverlay:function(i,l){return this._addLayer(i,l,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var l=this._getLayer(E(i));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){Ie(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(Ie(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):gt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return gt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",l=this._container=Ge("div",i),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Ts(l),Ys(l);var p=this._section=Ge("section",i+"-list");d&&(this._map.on("click",this.collapse,this),Oe(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var w=this._layersLink=Ge("a",i+"-toggle",l);w.href="#",w.title="Layers",w.setAttribute("role","button"),Oe(w,{keydown:function(C){C.keyCode===13&&this._expandSafely()},click:function(C){Ct(C),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Ge("div",i+"-base",p),this._separator=Ge("div",i+"-separator",p),this._overlaysList=Ge("div",i+"-overlays",p),l.appendChild(p)},_getLayer:function(i){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&E(this._layers[l].layer)===i)return this._layers[l]},_addLayer:function(i,l,d){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(m(function(p,w){return this.options.sortFunction(p.layer,w.layer,p.name,w.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Tn(this._baseLayersList),Tn(this._overlaysList),this._layerControlInputs=[];var i,l,d,p,w=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,i=i||!p.overlay,w+=p.overlay?0:1;return this.options.hideSingleBase&&(i=i&&w>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=l&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var l=this._getLayer(E(i.target)),d=l.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(i,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(i){var l=document.createElement("label"),d=this._map.hasLayer(i.layer),p;i.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+E(this),d),this._layerControlInputs.push(p),p.layerId=E(i.layer),Oe(p,"click",this._onInputClick,this);var w=document.createElement("span");w.innerHTML=" "+i.name;var C=document.createElement("span");l.appendChild(C),C.appendChild(p),C.appendChild(w);var V=i.overlay?this._overlaysList:this._baseLayersList;return V.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,l,d,p=[],w=[];this._handlingClick=!0;for(var C=i.length-1;C>=0;C--)l=i[C],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||w.push(d);for(C=0;C<w.length;C++)this._map.hasLayer(w[C])&&this._map.removeLayer(w[C]);for(C=0;C<p.length;C++)this._map.hasLayer(p[C])||this._map.addLayer(p[C]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,l,d,p=this._map.getZoom(),w=i.length-1;w>=0;w--)l=i[w],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,Oe(i,"click",Ct),this.expand();var l=this;setTimeout(function(){_t(i,"click",Ct),l._preventClick=!1})}}),Ss=function(i,l,d){return new ia(i,l,d)},yr=dn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var l="leaflet-control-zoom",d=Ge("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,l,d,p,w){var C=Ge("a",d,p);return C.innerHTML=i,C.href="#",C.title=l,C.setAttribute("role","button"),C.setAttribute("aria-label",l),Ts(C),Oe(C,"click",Mn),Oe(C,"click",w,this),Oe(C,"click",this._refocusOnMap,this),C},_updateDisabled:function(){var i=this._map,l="leaflet-disabled";gt(this._zoomInButton,l),gt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(Ie(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(Ie(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});tt.mergeOptions({zoomControl:!0}),tt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new yr,this.addControl(this.zoomControl))});var sa=function(i){return new yr(i)},sn=dn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var l="leaflet-control-scale",d=Ge("div",l),p=this.options;return this._addScales(p,l+"-line",d),i.on(p.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),d},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,l,d){i.metric&&(this._mScale=Ge("div",l,d)),i.imperial&&(this._iScale=Ge("div",l,d))},_update:function(){var i=this._map,l=i.getSize().y/2,d=i.distance(i.containerPointToLatLng([0,l]),i.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var l=this._getRoundNum(i),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/i)},_updateImperial:function(i){var l=i*3.2808399,d,p,w;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(w=this._getRoundNum(l),this._updateScale(this._iScale,w+" ft",w/l))},_updateScale:function(i,l,d){i.style.width=Math.round(this.options.maxWidth*d)+"px",i.innerHTML=l},_getRoundNum:function(i){var l=Math.pow(10,(Math.floor(i)+"").length-1),d=i/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),ni=function(i){return new sn(i)},Ps='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ri=dn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ee.inlineSvg?Ps+" ":"")+"Leaflet</a>"},initialize:function(i){ne(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Ge("div","leaflet-control-attribution"),Ts(this._container);for(var l in i._layers)i._layers[l].getAttribution&&this.addAttribution(i._layers[l].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var l in this._attributions)this._attributions[l]&&i.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),i.length&&d.push(i.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});tt.mergeOptions({attributionControl:!0}),tt.addInitHook(function(){this.options.attributionControl&&new ri().addTo(this)});var Xs=function(i){return new ri(i)};dn.Layers=ia,dn.Zoom=yr,dn.Scale=sn,dn.Attribution=ri,Jn.layers=Ss,Jn.zoom=sa,Jn.scale=ni,Jn.attribution=Xs;var In=Ye.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});In.addTo=function(i,l){return i.addHandler(l,this),this};var Js={Events:fe},Dn=Ee.touch?"touchstart mousedown":"mousedown",On=Ne.extend({options:{clickTolerance:3},initialize:function(i,l,d,p){ne(this,p),this._element=i,this._dragStartTarget=l||i,this._preventOutline=d},enable:function(){this._enabled||(Oe(this._dragStartTarget,Dn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(On._dragging===this&&this.finishDrag(!0),_t(this._dragStartTarget,Dn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Kr(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){On._dragging===this&&this.finishDrag();return}if(!(On._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(On._dragging=this,this._preventOutline&&Bi(this._element),vs(),et(),!this._moving)){this.fire("down");var l=i.touches?i.touches[0]:i,d=Lr(this._element);this._startPoint=new te(l.clientX,l.clientY),this._startPos=Nr(this._element),this._parentScale=Zt(d);var p=i.type==="mousedown";Oe(document,p?"mousemove":"touchmove",this._onMove,this),Oe(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var l=i.touches&&i.touches.length===1?i.touches[0]:i,d=new te(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,Ct(i),this._moved||(this.fire("dragstart"),this._moved=!0,Ie(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ie(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),Lt(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){gt(document.body,"leaflet-dragging"),this._lastTarget&&(gt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),_t(document,"mousemove touchmove",this._onMove,this),_t(document,"mouseup touchend touchcancel",this._onUp,this),ws(),Ln();var l=this._moved&&this._moving;this._moving=!1,On._dragging=!1,l&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function eo(i,l,d){var p,w=[1,4,2,8],C,V,$,Y,oe,Te,De,Xe;for(C=0,Te=i.length;C<Te;C++)i[C]._code=Q(i[C],l);for($=0;$<4;$++){for(De=w[$],p=[],C=0,Te=i.length,V=Te-1;C<Te;V=C++)Y=i[C],oe=i[V],Y._code&De?oe._code&De||(Xe=q(oe,Y,De,l,d),Xe._code=Q(Xe,l),p.push(Xe)):(oe._code&De&&(Xe=q(oe,Y,De,l,d),Xe._code=Q(Xe,l),p.push(Xe)),p.push(Y));i=p}return i}function oa(i,l){var d,p,w,C,V,$,Y,oe,Te;if(!i||i.length===0)throw new Error("latlngs not passed");ct(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var De=ce([0,0]),Xe=we(i),on=Xe.getNorthWest().distanceTo(Xe.getSouthWest())*Xe.getNorthEast().distanceTo(Xe.getNorthWest());on<1700&&(De=to(i));var Jt=i.length,nr=[];for(d=0;d<Jt;d++){var Vn=ce(i[d]);nr.push(l.project(ce([Vn.lat-De.lat,Vn.lng-De.lng])))}for($=Y=oe=0,d=0,p=Jt-1;d<Jt;p=d++)w=nr[d],C=nr[p],V=w.y*C.x-C.y*w.x,Y+=(w.x+C.x)*V,oe+=(w.y+C.y)*V,$+=V*3;$===0?Te=nr[0]:Te=[Y/$,oe/$];var po=l.unproject(re(Te));return ce([po.lat+De.lat,po.lng+De.lng])}function to(i){for(var l=0,d=0,p=0,w=0;w<i.length;w++){var C=ce(i[w]);l+=C.lat,d+=C.lng,p++}return ce([l/p,d/p])}var no={__proto__:null,clipPolygon:eo,polygonCenter:oa,centroid:to};function Xt(i,l){if(!l||!i.length)return i.slice();var d=l*l;return i=y(i,d),i=Wi(i,d),i}function aa(i,l,d){return Math.sqrt(je(i,l,d,!0))}function Ua(i,l,d){return je(i,l,d)}function Wi(i,l){var d=i.length,p=typeof Uint8Array<"u"?Uint8Array:Array,w=new p(d);w[0]=w[d-1]=1,h(i,w,l,0,d-1);var C,V=[];for(C=0;C<d;C++)w[C]&&V.push(i[C]);return V}function h(i,l,d,p,w){var C=0,V,$,Y;for($=p+1;$<=w-1;$++)Y=je(i[$],i[p],i[w],!0),Y>C&&(V=$,C=Y);C>d&&(l[V]=1,h(i,l,d,p,V),h(i,l,d,V,w))}function y(i,l){for(var d=[i[0]],p=1,w=0,C=i.length;p<C;p++)me(i[p],i[w])>l&&(d.push(i[p]),w=p);return w<C-1&&d.push(i[C-1]),d}var T;function b(i,l,d,p,w){var C=p?T:Q(i,d),V=Q(l,d),$,Y,oe;for(T=V;;){if(!(C|V))return[i,l];if(C&V)return!1;$=C||V,Y=q(i,l,$,d,w),oe=Q(Y,d),$===C?(i=Y,C=oe):(l=Y,V=oe)}}function q(i,l,d,p,w){var C=l.x-i.x,V=l.y-i.y,$=p.min,Y=p.max,oe,Te;return d&8?(oe=i.x+C*(Y.y-i.y)/V,Te=Y.y):d&4?(oe=i.x+C*($.y-i.y)/V,Te=$.y):d&2?(oe=Y.x,Te=i.y+V*(Y.x-i.x)/C):d&1&&(oe=$.x,Te=i.y+V*($.x-i.x)/C),new te(oe,Te,w)}function Q(i,l){var d=0;return i.x<l.min.x?d|=1:i.x>l.max.x&&(d|=2),i.y<l.min.y?d|=4:i.y>l.max.y&&(d|=8),d}function me(i,l){var d=l.x-i.x,p=l.y-i.y;return d*d+p*p}function je(i,l,d,p){var w=l.x,C=l.y,V=d.x-w,$=d.y-C,Y=V*V+$*$,oe;return Y>0&&(oe=((i.x-w)*V+(i.y-C)*$)/Y,oe>1?(w=d.x,C=d.y):oe>0&&(w+=V*oe,C+=$*oe)),V=i.x-w,$=i.y-C,p?V*V+$*$:new te(w,C)}function ct(i){return!ve(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function mt(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ct(i)}function zt(i,l){var d,p,w,C,V,$,Y,oe;if(!i||i.length===0)throw new Error("latlngs not passed");ct(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Te=ce([0,0]),De=we(i),Xe=De.getNorthWest().distanceTo(De.getSouthWest())*De.getNorthEast().distanceTo(De.getNorthWest());Xe<1700&&(Te=to(i));var on=i.length,Jt=[];for(d=0;d<on;d++){var nr=ce(i[d]);Jt.push(l.project(ce([nr.lat-Te.lat,nr.lng-Te.lng])))}for(d=0,p=0;d<on-1;d++)p+=Jt[d].distanceTo(Jt[d+1])/2;if(p===0)oe=Jt[0];else for(d=0,C=0;d<on-1;d++)if(V=Jt[d],$=Jt[d+1],w=V.distanceTo($),C+=w,C>p){Y=(C-p)/w,oe=[$.x-Y*($.x-V.x),$.y-Y*($.y-V.y)];break}var Vn=l.unproject(re(oe));return ce([Vn.lat+Te.lat,Vn.lng+Te.lng])}var er={__proto__:null,simplify:Xt,pointToSegmentDistance:aa,closestPointOnSegment:Ua,clipSegment:b,_getEdgeIntersection:q,_getBitCode:Q,_sqClosestPointOnSegment:je,isFlat:ct,_flat:mt,polylineCenter:zt},Mr={project:function(i){return new te(i.lng,i.lat)},unproject:function(i){return new xe(i.y,i.x)},bounds:new O([-180,-90],[180,90])},vr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new O([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var l=Math.PI/180,d=this.R,p=i.lat*l,w=this.R_MINOR/d,C=Math.sqrt(1-w*w),V=C*Math.sin(p),$=Math.tan(Math.PI/4-p/2)/Math.pow((1-V)/(1+V),C/2);return p=-d*Math.log(Math.max($,1e-10)),new te(i.lng*l*d,p)},unproject:function(i){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,w=Math.sqrt(1-p*p),C=Math.exp(-i.y/d),V=Math.PI/2-2*Math.atan(C),$=0,Y=.1,oe;$<15&&Math.abs(Y)>1e-7;$++)oe=w*Math.sin(V),oe=Math.pow((1-oe)/(1+oe),w/2),Y=Math.PI/2-2*Math.atan(C*oe)-V,V+=Y;return new xe(V*l,i.x*l/d)}},ii={__proto__:null,LonLat:Mr,Mercator:vr,SphericalMercator:Rt},ro=a({},Ue,{code:"EPSG:3395",projection:vr,transformation:(function(){var i=.5/(Math.PI*vr.R);return sr(i,.5,-i,.5)})()}),io=a({},Ue,{code:"EPSG:4326",projection:Mr,transformation:sr(1/180,1,-1/180,.5)}),id=a({},$e,{projection:Mr,transformation:sr(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,l){var d=l.lng-i.lng,p=l.lat-i.lat;return Math.sqrt(d*d+p*p)},infinite:!0});$e.Earth=Ue,$e.EPSG3395=ro,$e.EPSG3857=or,$e.EPSG900913=Wr,$e.EPSG4326=io,$e.Simple=id;var Dr=Ne.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[E(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[E(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var l=i.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});tt.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var l=E(i);return this._layers[l]?this:(this._layers[l]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var l=E(i);return this._layers[l]?(this._loaded&&i.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return E(i)in this._layers},eachLayer:function(i,l){for(var d in this._layers)i.call(l,this._layers[d]);return this},_addLayers:function(i){i=i?ve(i)?i:[i]:[];for(var l=0,d=i.length;l<d;l++)this.addLayer(i[l])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[E(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var l=E(i);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var w=this._zoomBoundLayers[p].options;i=w.minZoom===void 0?i:Math.min(i,w.minZoom),l=w.maxZoom===void 0?l:Math.max(l,w.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=i===1/0?void 0:i,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Hi=Dr.extend({initialize:function(i,l){ne(this,l),this._layers={};var d,p;if(i)for(d=0,p=i.length;d<p;d++)this.addLayer(i[d])},addLayer:function(i){var l=this.getLayerId(i);return this._layers[l]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var l=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(i){var l=typeof i=="number"?i:this.getLayerId(i);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[i]&&p[i].apply(p,l);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,l){for(var d in this._layers)i.call(l,this._layers[d]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return E(i)}}),la=function(i,l){return new Hi(i,l)},wi=Hi.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),Hi.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),Hi.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new pe;for(var l in this._layers){var d=this._layers[l];i.extend(d.getBounds?d.getBounds():d.getLatLng())}return i}}),ec=function(i,l){return new wi(i,l)},Cs=Ye.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){ne(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,l){var d=this._getIconUrl(i);if(!d){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(i,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var w=re(p),C=re(l==="shadow"&&d.shadowAnchor||d.iconAnchor||w&&w.divideBy(2,!0));i.className="leaflet-marker-"+l+" "+(d.className||""),C&&(i.style.marginLeft=-C.x+"px",i.style.marginTop=-C.y+"px"),w&&(i.style.width=w.x+"px",i.style.height=w.y+"px")},_createImg:function(i,l){return l=l||document.createElement("img"),l.src=i,l},_getIconUrl:function(i){return Ee.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function tc(i){return new Cs(i)}var so=Cs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof so.imagePath!="string"&&(so.imagePath=this._detectIconPath()),(this.options.imagePath||so.imagePath)+Cs.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var l=function(d,p,w){var C=p.exec(d);return C&&C[w]};return i=l(i,/^url\((['"])?(.+)\1\)$/,2),i&&l(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=Ge("div","leaflet-default-icon-path",document.body),l=zi(i,"background-image")||zi(i,"backgroundImage");if(document.body.removeChild(i),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),Gl=In.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new On(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ie(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&gt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,w=this._marker.options.autoPanPadding,C=Nr(l._icon),V=d.getPixelBounds(),$=d.getPixelOrigin(),Y=X(V.min._subtract($).add(w),V.max._subtract($).subtract(w));if(!Y.contains(C)){var oe=re((Math.max(Y.max.x,C.x)-Y.max.x)/(V.max.x-Y.max.x)-(Math.min(Y.min.x,C.x)-Y.min.x)/(V.min.x-Y.min.x),(Math.max(Y.max.y,C.y)-Y.max.y)/(V.max.y-Y.max.y)-(Math.min(Y.min.y,C.y)-Y.min.y)/(V.min.y-Y.min.y)).multiplyBy(p);d.panBy(oe,{animate:!1}),this._draggable._newPos._add(oe),this._draggable._startPos._add(oe),Lt(l._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=z(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(W(this._panRequest),this._panRequest=z(this._adjustPan.bind(this,i)))},_onDrag:function(i){var l=this._marker,d=l._shadow,p=Nr(l._icon),w=l._map.layerPointToLatLng(p);d&&Lt(d,p),l._latlng=w,i.latlng=w,i.oldLatLng=this._oldLatLng,l.fire("move",i).fire("drag",i)},_onDragEnd:function(i){W(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Ei=Dr.extend({options:{icon:new so,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,l){ne(this,l),this._latlng=ce(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var l=this._latlng;return this._latlng=ce(i),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=i.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,i.title&&(d.title=i.title),d.tagName==="IMG"&&(d.alt=i.alt||"")),Ie(d,l),i.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Oe(d,"focus",this._panOnFocus,this);var w=i.icon.createShadow(this._shadow),C=!1;w!==this._shadow&&(this._removeShadow(),C=!0),w&&(Ie(w,l),w.alt=""),this._shadow=w,i.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),w&&C&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_t(this._icon,"focus",this._panOnFocus,this),ut(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ut(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&Lt(this._icon,i),this._shadow&&Lt(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(Ie(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Gl)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Gl(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&hn(this._icon,i),this._shadow&&hn(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var l=this.options.icon.options,d=l.iconSize?re(l.iconSize):re(0,0),p=l.iconAnchor?re(l.iconAnchor):re(0,0);i.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function sd(i,l){return new Ei(i,l)}var qi=Dr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return ne(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Wa=qi.extend({options:{fill:!0,radius:10},initialize:function(i,l){ne(this,l),this._latlng=ce(i),this._radius=this.options.radius},setLatLng:function(i){var l=this._latlng;return this._latlng=ce(i),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var l=i&&i.radius||this._radius;return qi.prototype.setStyle.call(this,i),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,l=this._radiusY||i,d=this._clickTolerance(),p=[i+d,l+d];this._pxBounds=new O(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function nc(i,l){return new Wa(i,l)}var Ha=Wa.extend({initialize:function(i,l,d){if(typeof l=="number"&&(l=a({},d,{radius:l})),ne(this,l),this._latlng=ce(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new pe(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:qi.prototype.setStyle,_project:function(){var i=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===Ue.distance){var w=Math.PI/180,C=this._mRadius/Ue.R/w,V=d.project([l+C,i]),$=d.project([l-C,i]),Y=V.add($).divideBy(2),oe=d.unproject(Y).lat,Te=Math.acos((Math.cos(C*w)-Math.sin(l*w)*Math.sin(oe*w))/(Math.cos(l*w)*Math.cos(oe*w)))/w;(isNaN(Te)||Te===0)&&(Te=C/Math.cos(Math.PI/180*l)),this._point=Y.subtract(d.getPixelOrigin()),this._radius=isNaN(Te)?0:Y.x-d.project([oe,i-Te]).x,this._radiusY=Y.y-V.y}else{var De=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(De).x}this._updateBounds()}});function ua(i,l,d){return new Ha(i,l,d)}var tr=qi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,l){ne(this,l),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var l=1/0,d=null,p=je,w,C,V=0,$=this._parts.length;V<$;V++)for(var Y=this._parts[V],oe=1,Te=Y.length;oe<Te;oe++){w=Y[oe-1],C=Y[oe];var De=p(i,w,C,!0);De<l&&(l=De,d=p(i,w,C))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,l){return l=l||this._defaultShape(),i=ce(i),l.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new pe,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return ct(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var l=[],d=ct(i),p=0,w=i.length;p<w;p++)d?(l[p]=ce(i[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(i[p]);return l},_project:function(){var i=new O;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),l=new te(i,i);this._rawPxBounds&&(this._pxBounds=new O([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(i,l,d){var p=i[0]instanceof xe,w=i.length,C,V;if(p){for(V=[],C=0;C<w;C++)V[C]=this._map.latLngToLayerPoint(i[C]),d.extend(V[C]);l.push(V)}else for(C=0;C<w;C++)this._projectLatlngs(i[C],l,d)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,w,C,V,$,Y;for(d=0,w=0,C=this._rings.length;d<C;d++)for(Y=this._rings[d],p=0,V=Y.length;p<V-1;p++)$=b(Y[p],Y[p+1],i,p,!0),$&&(l[w]=l[w]||[],l[w].push($[0]),($[1]!==Y[p+1]||p===V-2)&&(l[w].push($[1]),w++))}},_simplifyPoints:function(){for(var i=this._parts,l=this.options.smoothFactor,d=0,p=i.length;d<p;d++)i[d]=Xt(i[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,l){var d,p,w,C,V,$,Y=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(d=0,C=this._parts.length;d<C;d++)for($=this._parts[d],p=0,V=$.length,w=V-1;p<V;w=p++)if(!(!l&&p===0)&&aa(i,$[w],$[p])<=Y)return!0;return!1}});function od(i,l){return new tr(i,l)}tr._flat=mt;var Ti=tr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return oa(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var l=tr.prototype._convertLatLngs.call(this,i),d=l.length;return d>=2&&l[0]instanceof xe&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(i){tr.prototype._setLatLngs.call(this,i),ct(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ct(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,l=this.options.weight,d=new te(l,l);if(i=new O(i.min.subtract(d),i.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,w=this._rings.length,C;p<w;p++)C=eo(this._rings[p],i,!0),C.length&&this._parts.push(C)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var l=!1,d,p,w,C,V,$,Y,oe;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(C=0,Y=this._parts.length;C<Y;C++)for(d=this._parts[C],V=0,oe=d.length,$=oe-1;V<oe;$=V++)p=d[V],w=d[$],p.y>i.y!=w.y>i.y&&i.x<(w.x-p.x)*(i.y-p.y)/(w.y-p.y)+p.x&&(l=!l);return l||tr.prototype._containsPoint.call(this,i,!0)}});function ad(i,l){return new Ti(i,l)}var si=wi.extend({initialize:function(i,l){ne(this,l),this._layers={},i&&this.addData(i)},addData:function(i){var l=ve(i)?i:i.features,d,p,w;if(l){for(d=0,p=l.length;d<p;d++)w=l[d],(w.geometries||w.geometry||w.features||w.coordinates)&&this.addData(w);return this}var C=this.options;if(C.filter&&!C.filter(i))return this;var V=oo(i,C);return V?(V.feature=Ka(i),V.defaultOptions=V.options,this.resetStyle(V),C.onEachFeature&&C.onEachFeature(i,V),this.addLayer(V)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=a({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(l){this._setLayerStyle(l,i)},this)},_setLayerStyle:function(i,l){i.setStyle&&(typeof l=="function"&&(l=l(i.feature)),i.setStyle(l))}});function oo(i,l){var d=i.type==="Feature"?i.geometry:i,p=d?d.coordinates:null,w=[],C=l&&l.pointToLayer,V=l&&l.coordsToLatLng||$a,$,Y,oe,Te;if(!p&&!d)return null;switch(d.type){case"Point":return $=V(p),qa(C,i,$,l);case"MultiPoint":for(oe=0,Te=p.length;oe<Te;oe++)$=V(p[oe]),w.push(qa(C,i,$,l));return new wi(w);case"LineString":case"MultiLineString":return Y=ca(p,d.type==="LineString"?0:1,V),new tr(Y,l);case"Polygon":case"MultiPolygon":return Y=ca(p,d.type==="Polygon"?1:2,V),new Ti(Y,l);case"GeometryCollection":for(oe=0,Te=d.geometries.length;oe<Te;oe++){var De=oo({geometry:d.geometries[oe],type:"Feature",properties:i.properties},l);De&&w.push(De)}return new wi(w);case"FeatureCollection":for(oe=0,Te=d.features.length;oe<Te;oe++){var Xe=oo(d.features[oe],l);Xe&&w.push(Xe)}return new wi(w);default:throw new Error("Invalid GeoJSON object.")}}function qa(i,l,d,p){return i?i(l,d):new Ei(d,p&&p.markersInheritOptions&&p)}function $a(i){return new xe(i[1],i[0],i[2])}function ca(i,l,d){for(var p=[],w=0,C=i.length,V;w<C;w++)V=l?ca(i[w],l-1,d):(d||$a)(i[w]),p.push(V);return p}function Ga(i,l){return i=ce(i),i.alt!==void 0?[k(i.lng,l),k(i.lat,l),k(i.alt,l)]:[k(i.lng,l),k(i.lat,l)]}function Za(i,l,d,p){for(var w=[],C=0,V=i.length;C<V;C++)w.push(l?Za(i[C],ct(i[C])?0:l-1,d,p):Ga(i[C],p));return!l&&d&&w.length>0&&w.push(w[0].slice()),w}function ao(i,l){return i.feature?a({},i.feature,{geometry:l}):Ka(l)}function Ka(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Zl={toGeoJSON:function(i){return ao(this,{type:"Point",coordinates:Ga(this.getLatLng(),i)})}};Ei.include(Zl),Ha.include(Zl),Wa.include(Zl),tr.include({toGeoJSON:function(i){var l=!ct(this._latlngs),d=Za(this._latlngs,l?1:0,!1,i);return ao(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),Ti.include({toGeoJSON:function(i){var l=!ct(this._latlngs),d=l&&!ct(this._latlngs[0]),p=Za(this._latlngs,d?2:l?1:0,!0,i);return l||(p=[p]),ao(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),Hi.include({toMultiPoint:function(i){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(i).geometry.coordinates)}),ao(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(i){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(i);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(w){if(w.toGeoJSON){var C=w.toGeoJSON(i);if(d)p.push(C.geometry);else{var V=Ka(C);V.type==="FeatureCollection"?p.push.apply(p,V.features):p.push(V)}}}),d?ao(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function rc(i,l){return new si(i,l)}var Or=rc,$i=Dr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,l,d){this._url=i,this._bounds=we(l),ne(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ie(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ut(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&gr(this._image),this},bringToBack:function(){return this._map&&xn(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=we(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",l=this._image=i?this._url:Ge("img");if(Ie(l,"leaflet-image-layer"),this._zoomAnimated&&Ie(l,"leaflet-zoom-animated"),this.options.className&&Ie(l,this.options.className),l.onselectstart=I,l.onmousemove=I,l.onload=m(this.fire,this,"load"),l.onerror=m(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(i){var l=this._map.getZoomScale(i.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;Kn(this._image,d,l)},_reset:function(){var i=this._image,l=new O(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();Lt(i,l.min),i.style.width=d.x+"px",i.style.height=d.y+"px"},_updateOpacity:function(){hn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),ic=function(i,l,d){return new $i(i,l,d)},Kl=$i.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",l=this._image=i?this._url:Ge("video");if(Ie(l,"leaflet-image-layer"),this._zoomAnimated&&Ie(l,"leaflet-zoom-animated"),this.options.className&&Ie(l,this.options.className),l.onselectstart=I,l.onmousemove=I,l.onloadeddata=m(this.fire,this,"load"),i){for(var d=l.getElementsByTagName("source"),p=[],w=0;w<d.length;w++)p.push(d[w].src);this._url=d.length>0?p:[l.src];return}ve(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var C=0;C<this._url.length;C++){var V=Ge("source");V.src=this._url[C],l.appendChild(V)}}});function sc(i,l,d){return new Kl(i,l,d)}var Ql=$i.extend({_initImage:function(){var i=this._image=this._url;Ie(i,"leaflet-image-layer"),this._zoomAnimated&&Ie(i,"leaflet-zoom-animated"),this.options.className&&Ie(i,this.options.className),i.onselectstart=I,i.onmousemove=I}});function Yl(i,l,d){return new Ql(i,l,d)}var oi=Dr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,l){i&&(i instanceof xe||ve(i))?(this._latlng=ce(i),ne(this,l)):(ne(this,i),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&hn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&hn(this._container,1),this.bringToFront(),this.options.interactive&&(Ie(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(hn(this._container,0),this._removeTimeout=setTimeout(m(ut,void 0,this._container),200)):ut(this._container),this.options.interactive&&(gt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=ce(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gr(this._container),this},bringToBack:function(){return this._map&&xn(this._container),this},_prepareOpen:function(i){var l=this._source;if(!l._map)return!1;if(l instanceof wi){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!i)if(l.getCenter)i=l.getCenter();else if(l.getLatLng)i=l.getLatLng();else if(l.getBounds)i=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")i.innerHTML=l;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),l=re(this.options.offset),d=this._getAnchor();this._zoomAnimated?Lt(this._container,i.add(d)):l=l.add(i).add(d);var p=this._containerBottom=-l.y,w=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=w+"px"}},_getAnchor:function(){return[0,0]}});tt.include({_initOverlay:function(i,l,d,p){var w=l;return w instanceof i||(w=new i(p).setContent(l)),d&&w.setLatLng(d),w}}),Dr.include({_initOverlay:function(i,l,d,p){var w=d;return w instanceof i?(ne(w,p),w._source=this):(w=l&&!p?l:new i(p,this),w.setContent(d)),w}});var Qa=oi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,oi.prototype.openOn.call(this,i)},onAdd:function(i){oi.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof qi||this._source.on("preclick",at))},onRemove:function(i){oi.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof qi||this._source.off("preclick",at))},getEvents:function(){var i=oi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",l=this._container=Ge("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Ge("div",i+"-content-wrapper",l);if(this._contentNode=Ge("div",i+"-content",d),Ts(l),Ys(this._contentNode),Oe(l,"contextmenu",at),this._tipContainer=Ge("div",i+"-tip-container",l),this._tip=Ge("div",i+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Ge("a",i+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Oe(p,"click",function(w){Ct(w),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,l=i.style;l.width="",l.whiteSpace="nowrap";var d=i.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=i.offsetHeight,w=this.options.maxHeight,C="leaflet-popup-scrolled";w&&p>w?(l.height=w+"px",Ie(i,C)):gt(i,C),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),d=this._getAnchor();Lt(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,l=parseInt(zi(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,w=new te(this._containerLeft,-d-this._containerBottom);w._add(Nr(this._container));var C=i.layerPointToContainerPoint(w),V=re(this.options.autoPanPadding),$=re(this.options.autoPanPaddingTopLeft||V),Y=re(this.options.autoPanPaddingBottomRight||V),oe=i.getSize(),Te=0,De=0;C.x+p+Y.x>oe.x&&(Te=C.x+p-oe.x+Y.x),C.x-Te-$.x<0&&(Te=C.x-$.x),C.y+d+Y.y>oe.y&&(De=C.y+d-oe.y+Y.y),C.y-De-$.y<0&&(De=C.y-$.y),(Te||De)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([Te,De]))}},_getAnchor:function(){return re(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),lo=function(i,l){return new Qa(i,l)};tt.mergeOptions({closePopupOnClick:!0}),tt.include({openPopup:function(i,l,d){return this._initOverlay(Qa,i,l,d).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Dr.include({bindPopup:function(i,l){return this._popup=this._initOverlay(Qa,this._popup,i,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof wi||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Mn(i);var l=i.layer||i.target;if(this._popup._source===l&&!(l instanceof qi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=l,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var uo=oi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){oi.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){oi.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=oi.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",l=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ge("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+E(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var l,d,p=this._map,w=this._container,C=p.latLngToContainerPoint(p.getCenter()),V=p.layerPointToContainerPoint(i),$=this.options.direction,Y=w.offsetWidth,oe=w.offsetHeight,Te=re(this.options.offset),De=this._getAnchor();$==="top"?(l=Y/2,d=oe):$==="bottom"?(l=Y/2,d=0):$==="center"?(l=Y/2,d=oe/2):$==="right"?(l=0,d=oe/2):$==="left"?(l=Y,d=oe/2):V.x<C.x?($="right",l=0,d=oe/2):($="left",l=Y+(Te.x+De.x)*2,d=oe/2),i=i.subtract(re(l,d,!0)).add(Te).add(De),gt(w,"leaflet-tooltip-right"),gt(w,"leaflet-tooltip-left"),gt(w,"leaflet-tooltip-top"),gt(w,"leaflet-tooltip-bottom"),Ie(w,"leaflet-tooltip-"+$),Lt(w,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&hn(this._container,i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(l)},_getAnchor:function(){return re(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ha=function(i,l){return new uo(i,l)};tt.include({openTooltip:function(i,l,d){return this._initOverlay(uo,i,l,d).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Dr.include({bindTooltip:function(i,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(uo,this._tooltip,i,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var l=i?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof wi||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&(Oe(l,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),Oe(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var l=i.latlng,d,p;this._tooltip.options.sticky&&i.originalEvent&&(d=this._map.mouseEventToContainerPoint(i.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var Ya=Cs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var l=i&&i.tagName==="DIV"?i:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Tn(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=re(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function oc(i){return new Ya(i)}Cs.Default=so;var Gi=Dr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ee.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){ne(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),ut(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(xn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=x(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof te?i:new te(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var l=this.getPane().children,d=-i(-1/0,1/0),p=0,w=l.length,C;p<w;p++)C=l[p].style.zIndex,l[p]!==this._container&&C&&(d=i(d,+C));isFinite(d)&&(this.options.zIndex=d+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ee.ielt9){hn(this._container,this.options.opacity);var i=+new Date,l=!1,d=!1;for(var p in this._tiles){var w=this._tiles[p];if(!(!w.current||!w.loaded)){var C=Math.min(1,(i-w.loaded)/200);hn(w.el,C),C<1?l=!0:(w.active?d=!0:this._onOpaqueTile(w),w.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(W(this._fadeFrame),this._fadeFrame=z(this._updateOpacity,this))}},_onOpaqueTile:I,_initContainer:function(){this._container||(this._container=Ge("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,l=this.options.maxZoom;if(i!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===i?(this._levels[d].el.style.zIndex=l-Math.abs(i-d),this._onUpdateLevel(d)):(ut(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[i],w=this._map;return p||(p=this._levels[i]={},p.el=Ge("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=w.project(w.unproject(w.getPixelOrigin()),i).round(),p.zoom=i,this._setZoomTransform(p,w.getCenter(),w.getZoom()),I(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:I,_onRemoveLevel:I,_onCreateLevel:I,_pruneTiles:function(){if(this._map){var i,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)l=this._tiles[i],l.retain=l.current;for(i in this._tiles)if(l=this._tiles[i],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var l in this._tiles)this._tiles[l].coords.z===i&&this._removeTile(l)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)ut(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,l,d,p){var w=Math.floor(i/2),C=Math.floor(l/2),V=d-1,$=new te(+w,+C);$.z=+V;var Y=this._tileCoordsToKey($),oe=this._tiles[Y];return oe&&oe.active?(oe.retain=!0,!0):(oe&&oe.loaded&&(oe.retain=!0),V>p?this._retainParent(w,C,V,p):!1)},_retainChildren:function(i,l,d,p){for(var w=2*i;w<2*i+2;w++)for(var C=2*l;C<2*l+2;C++){var V=new te(w,C);V.z=d+1;var $=this._tileCoordsToKey(V),Y=this._tiles[$];if(Y&&Y.active){Y.retain=!0;continue}else Y&&Y.loaded&&(Y.retain=!0);d+1<p&&this._retainChildren(w,C,d+1,p)}},_resetView:function(i){var l=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var l=this.options;return l.minNativeZoom!==void 0&&i<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<i?l.maxNativeZoom:i},_setView:function(i,l,d,p){var w=Math.round(l);this.options.maxZoom!==void 0&&w>this.options.maxZoom||this.options.minZoom!==void 0&&w<this.options.minZoom?w=void 0:w=this._clampZoom(w);var C=this.options.updateWhenZooming&&w!==this._tileZoom;(!p||C)&&(this._tileZoom=w,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),w!==void 0&&this._update(i),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(i,l)},_setZoomTransforms:function(i,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],i,l)},_setZoomTransform:function(i,l,d){var p=this._map.getZoomScale(d,i.zoom),w=i.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();Ee.any3d?Kn(i.el,w,p):Lt(i.el,w)},_resetGrid:function(){var i=this._map,l=i.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,w=this._map.getPixelWorldBounds(this._tileZoom);w&&(this._globalTileRange=this._pxBoundsToTileRange(w)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(i.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(i.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),w=l.project(i,this._tileZoom).floor(),C=l.getSize().divideBy(p*2);return new O(w.subtract(C),w.add(C))},_update:function(i){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(i===void 0&&(i=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(i),w=this._pxBoundsToTileRange(p),C=w.getCenter(),V=[],$=this.options.keepBuffer,Y=new O(w.getBottomLeft().subtract([$,-$]),w.getTopRight().add([$,-$]));if(!(isFinite(w.min.x)&&isFinite(w.min.y)&&isFinite(w.max.x)&&isFinite(w.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var oe in this._tiles){var Te=this._tiles[oe].coords;(Te.z!==this._tileZoom||!Y.contains(new te(Te.x,Te.y)))&&(this._tiles[oe].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(i,d);return}for(var De=w.min.y;De<=w.max.y;De++)for(var Xe=w.min.x;Xe<=w.max.x;Xe++){var on=new te(Xe,De);if(on.z=this._tileZoom,!!this._isValidTile(on)){var Jt=this._tiles[this._tileCoordsToKey(on)];Jt?Jt.current=!0:V.push(on)}}if(V.sort(function(Vn,po){return Vn.distanceTo(C)-po.distanceTo(C)}),V.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var nr=document.createDocumentFragment();for(Xe=0;Xe<V.length;Xe++)this._addTile(V[Xe],nr);this._level.el.appendChild(nr)}}}},_isValidTile:function(i){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(i.x<d.min.x||i.x>d.max.x)||!l.wrapLat&&(i.y<d.min.y||i.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(i);return we(this.options.bounds).overlaps(p)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var l=this._map,d=this.getTileSize(),p=i.scaleBy(d),w=p.add(d),C=l.unproject(p,i.z),V=l.unproject(w,i.z);return[C,V]},_tileCoordsToBounds:function(i){var l=this._tileCoordsToNwSe(i),d=new pe(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var l=i.split(":"),d=new te(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(i){var l=this._tiles[i];l&&(ut(l.el),delete this._tiles[i],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){Ie(i,"leaflet-tile");var l=this.getTileSize();i.style.width=l.x+"px",i.style.height=l.y+"px",i.onselectstart=I,i.onmousemove=I,Ee.ielt9&&this.options.opacity<1&&hn(i,this.options.opacity)},_addTile:function(i,l){var d=this._getTilePos(i),p=this._tileCoordsToKey(i),w=this.createTile(this._wrapCoords(i),m(this._tileReady,this,i));this._initTile(w),this.createTile.length<2&&z(m(this._tileReady,this,i,null,w)),Lt(w,d),this._tiles[p]={el:w,coords:i,current:!0},l.appendChild(w),this.fire("tileloadstart",{tile:w,coords:i})},_tileReady:function(i,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:i});var p=this._tileCoordsToKey(i);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(hn(d.el,0),W(this._fadeFrame),this._fadeFrame=z(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(Ie(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ee.ielt9||!this._map._fadeAnimated?z(this._pruneTiles,this):setTimeout(m(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var l=new te(this._wrapX?P(i.x,this._wrapX):i.x,this._wrapY?P(i.y,this._wrapY):i.y);return l.z=i.z,l},_pxBoundsToTileRange:function(i){var l=this.getTileSize();return new O(i.min.unscaleBy(l).floor(),i.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function co(i){return new Gi(i)}var Zi=Gi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,l){this._url=i,l=ne(this,l),l.detectRetina&&Ee.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,l){return this._url===i&&l===void 0&&(l=!0),this._url=i,l||this.redraw(),this},createTile:function(i,l){var d=document.createElement("img");return Oe(d,"load",m(this._tileOnLoad,this,l,d)),Oe(d,"error",m(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(i),d},getTileUrl:function(i){var l={r:Ee.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-i.y;this.options.tms&&(l.y=d),l["-y"]=d}return he(this._url,a(l,this.options))},_tileOnLoad:function(i,l){Ee.ielt9?setTimeout(m(i,this,null,l),0):i(null,l)},_tileOnError:function(i,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),i(d,l)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(i=l-i),i+p},_getSubdomain:function(i){var l=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var i,l;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(l=this._tiles[i].el,l.onload=I,l.onerror=I,!l.complete)){l.src=Ke;var d=this._tiles[i].coords;ut(l),delete this._tiles[i],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(i){var l=this._tiles[i];if(l)return l.el.setAttribute("src",Ke),Gi.prototype._removeTile.call(this,i)},_tileReady:function(i,l,d){if(!(!this._map||d&&d.getAttribute("src")===Ke))return Gi.prototype._tileReady.call(this,i,l,d)}});function Xl(i,l){return new Zi(i,l)}var da=Zi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,l){this._url=i;var d=a({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=ne(this,l);var w=l.detectRetina&&Ee.retina?2:1,C=this.getTileSize();d.width=C.x*w,d.height=C.y*w,this.wmsParams=d},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Zi.prototype.onAdd.call(this,i)},getTileUrl:function(i){var l=this._tileCoordsToNwSe(i),d=this._crs,p=X(d.project(l[0]),d.project(l[1])),w=p.min,C=p.max,V=(this._wmsVersion>=1.3&&this._crs===io?[w.y,w.x,C.y,C.x]:[w.x,w.y,C.x,C.y]).join(","),$=Zi.prototype.getTileUrl.call(this,i);return $+ee(this.wmsParams,$,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+V},setParams:function(i,l){return a(this.wmsParams,i),l||this.redraw(),this}});function ac(i,l){return new da(i,l)}Zi.WMS=da,Xl.wms=ac;var ai=Dr.extend({options:{padding:.1},initialize:function(i){ne(this,i),E(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ie(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),w=this._map.project(this._center,l),C=p.multiplyBy(-d).add(w).subtract(this._map._getNewPixelOrigin(i,l));Ee.any3d?Kn(this._container,C,d):Lt(this._container,C)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-i)).round();this._bounds=new O(d,d.add(l.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Jl=ai.extend({options:{tolerance:0},getEvents:function(){var i=ai.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ai.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");Oe(i,"mousemove",this._onMouseMove,this),Oe(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Oe(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){W(this._redrawRequest),delete this._ctx,ut(this._container),_t(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var l in this._layers)i=this._layers[l],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ai.prototype._update.call(this);var i=this._bounds,l=this._container,d=i.getSize(),p=Ee.retina?2:1;Lt(l,i.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",Ee.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){ai.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[E(i)]=i;var l=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var l=i._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete i._order,delete this._layers[E(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var l=i.options.dashArray.split(/[, ]+/),d=[],p,w;for(w=0;w<l.length;w++){if(p=Number(l[w]),isNaN(p))return;d.push(p)}i.options._dashArray=d}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||z(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var l=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new O,this._redrawBounds.extend(i._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(i._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var l=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)i=p.layer,(!l||i._pxBounds&&i._pxBounds.intersects(l))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,l){if(this._drawing){var d,p,w,C,V=i._parts,$=V.length,Y=this._ctx;if($){for(Y.beginPath(),d=0;d<$;d++){for(p=0,w=V[d].length;p<w;p++)C=V[d][p],Y[p?"lineTo":"moveTo"](C.x,C.y);l&&Y.closePath()}this._fillStroke(Y,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var l=i._point,d=this._ctx,p=Math.max(Math.round(i._radius),1),w=(Math.max(Math.round(i._radiusY),1)||p)/p;w!==1&&(d.save(),d.scale(1,w)),d.beginPath(),d.arc(l.x,l.y/w,p,0,Math.PI*2,!1),w!==1&&d.restore(),this._fillStroke(d,i)}},_fillStroke:function(i,l){var d=l.options;d.fill&&(i.globalAlpha=d.fillOpacity,i.fillStyle=d.fillColor||d.color,i.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(i.setLineDash&&i.setLineDash(l.options&&l.options._dashArray||[]),i.globalAlpha=d.opacity,i.lineWidth=d.weight,i.strokeStyle=d.color,i.lineCap=d.lineCap,i.lineJoin=d.lineJoin,i.stroke())},_onClick:function(i){for(var l=this._map.mouseEventToLayerPoint(i),d,p,w=this._drawFirst;w;w=w.next)d=w.layer,d.options.interactive&&d._containsPoint(l)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,l)}},_handleMouseOut:function(i){var l=this._hoveredLayer;l&&(gt(this._container,"leaflet-interactive"),this._fireEvent([l],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,l){if(!this._mouseHoverThrottled){for(var d,p,w=this._drawFirst;w;w=w.next)d=w.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(i),p&&(Ie(this._container,"leaflet-interactive"),this._fireEvent([p],i,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(m(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,l,d){this._map._fireDOMEvent(l,d||l.type,i)},_bringToFront:function(i){var l=i._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(i)}},_bringToBack:function(i){var l=i._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(i)}}});function eu(i){return Ee.canvas?new Jl(i):null}var ho=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),lc={_initContainer:function(){this._container=Ge("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ai.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var l=i._container=ho("shape");Ie(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",i._path=ho("path"),l.appendChild(i._path),this._updateStyle(i),this._layers[E(i)]=i},_addPath:function(i){var l=i._container;this._container.appendChild(l),i.options.interactive&&i.addInteractiveTarget(l)},_removePath:function(i){var l=i._container;ut(l),i.removeInteractiveTarget(l),delete this._layers[E(i)]},_updateStyle:function(i){var l=i._stroke,d=i._fill,p=i.options,w=i._container;w.stroked=!!p.stroke,w.filled=!!p.fill,p.stroke?(l||(l=i._stroke=ho("stroke")),w.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=ve(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(w.removeChild(l),i._stroke=null),p.fill?(d||(d=i._fill=ho("fill")),w.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(w.removeChild(d),i._fill=null)},_updateCircle:function(i){var l=i._point.round(),d=Math.round(i._radius),p=Math.round(i._radiusY||d);this._setPath(i,i._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(i,l){i._path.v=l},_bringToFront:function(i){gr(i._container)},_bringToBack:function(i){xn(i._container)}},Vr=Ee.vml?ho:hs,bs=ai.extend({_initContainer:function(){this._container=Vr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Vr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ut(this._container),_t(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ai.prototype._update.call(this);var i=this._bounds,l=i.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),Lt(d,i.min),d.setAttribute("viewBox",[i.min.x,i.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(i){var l=i._path=Vr("path");i.options.className&&Ie(l,i.options.className),i.options.interactive&&Ie(l,"leaflet-interactive"),this._updateStyle(i),this._layers[E(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){ut(i._path),i.removeInteractiveTarget(i._path),delete this._layers[E(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var l=i._path,d=i.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(i,l){this._setPath(i,Hr(i._parts,l))},_updateCircle:function(i){var l=i._point,d=Math.max(Math.round(i._radius),1),p=Math.max(Math.round(i._radiusY),1)||d,w="a"+d+","+p+" 0 1,0 ",C=i._empty()?"M0 0":"M"+(l.x-d)+","+l.y+w+d*2+",0 "+w+-d*2+",0 ";this._setPath(i,C)},_setPath:function(i,l){i._path.setAttribute("d",l)},_bringToFront:function(i){gr(i._path)},_bringToBack:function(i){xn(i._path)}});Ee.vml&&bs.include(lc);function Xa(i){return Ee.svg||Ee.vml?new bs(i):null}tt.include({getRenderer:function(i){var l=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var l=this._paneRenderers[i];return l===void 0&&(l=this._createRenderer({pane:i}),this._paneRenderers[i]=l),l},_createRenderer:function(i){return this.options.preferCanvas&&eu(i)||Xa(i)}});var uc=Ti.extend({initialize:function(i,l){Ti.prototype.initialize.call(this,this._boundsToLatLngs(i),l)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=we(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function ld(i,l){return new uc(i,l)}bs.create=Vr,bs.pointsToPath=Hr,si.geometryToLayer=oo,si.coordsToLatLng=$a,si.coordsToLatLngs=ca,si.latLngToCoords=Ga,si.latLngsToCoords=Za,si.getFeature=ao,si.asFeature=Ka,tt.mergeOptions({boxZoom:!0});var fo=In.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){Oe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){_t(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ut(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),et(),vs(),this._startPoint=this._map.mouseEventToContainerPoint(i),Oe(document,{contextmenu:Mn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Ge("div","leaflet-zoom-box",this._container),Ie(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var l=new O(this._point,this._startPoint),d=l.getSize();Lt(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(ut(this._box),gt(this._container,"leaflet-crosshair")),Ln(),ws(),_t(document,{contextmenu:Mn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(m(this._resetState,this),0);var l=new pe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});tt.addInitHook("addHandler","boxZoom",fo),tt.mergeOptions({doubleClickZoom:!0});var cc=In.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,w=i.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(w):l.setZoomAround(i.containerPoint,w)}});tt.addInitHook("addHandler","doubleClickZoom",cc),tt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var tu=In.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new On(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}Ie(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){gt(this._map._container,"leaflet-grab"),gt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=we(this._map.options.maxBounds);this._offsetLimit=X(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,l){return i-(i-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;i.x<l.min.x&&(i.x=this._viscousLimit(i.x,l.min.x)),i.y<l.min.y&&(i.y=this._viscousLimit(i.y,l.min.y)),i.x>l.max.x&&(i.x=this._viscousLimit(i.x,l.max.x)),i.y>l.max.y&&(i.y=this._viscousLimit(i.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,l=Math.round(i/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,w=(p-l+d)%i+l-d,C=(p+l+d)%i-l-d,V=Math.abs(w+d)<Math.abs(C+d)?w:C;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=V},_onDragEnd:function(i){var l=this._map,d=l.options,p=!d.inertia||i.noInertia||this._times.length<2;if(l.fire("dragend",i),p)l.fire("moveend");else{this._prunePositions(+new Date);var w=this._lastPos.subtract(this._positions[0]),C=(this._lastTime-this._times[0])/1e3,V=d.easeLinearity,$=w.multiplyBy(V/C),Y=$.distanceTo([0,0]),oe=Math.min(d.inertiaMaxSpeed,Y),Te=$.multiplyBy(oe/Y),De=oe/(d.inertiaDeceleration*V),Xe=Te.multiplyBy(-De/2).round();!Xe.x&&!Xe.y?l.fire("moveend"):(Xe=l._limitOffset(Xe,l.options.maxBounds),z(function(){l.panBy(Xe,{duration:De,easeLinearity:V,noMoveStart:!0,animate:!0})}))}}});tt.addInitHook("addHandler","dragging",tu),tt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var nu=In.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),Oe(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),_t(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,l=document.documentElement,d=i.scrollTop||l.scrollTop,p=i.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var l=this._panKeys={},d=this.keyCodes,p,w;for(p=0,w=d.left.length;p<w;p++)l[d.left[p]]=[-1*i,0];for(p=0,w=d.right.length;p<w;p++)l[d.right[p]]=[i,0];for(p=0,w=d.down.length;p<w;p++)l[d.down[p]]=[0,i];for(p=0,w=d.up.length;p<w;p++)l[d.up[p]]=[0,-1*i]},_setZoomDelta:function(i){var l=this._zoomKeys={},d=this.keyCodes,p,w;for(p=0,w=d.zoomIn.length;p<w;p++)l[d.zoomIn[p]]=i;for(p=0,w=d.zoomOut.length;p<w;p++)l[d.zoomOut[p]]=-i},_addHooks:function(){Oe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){_t(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var l=i.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],i.shiftKey&&(p=re(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(re(p),d.options.maxBounds)),d.options.worldCopyJump){var w=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(w)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;Mn(i)}}});tt.addInitHook("addHandler","keyboard",nu),tt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xt=In.extend({addHooks:function(){Oe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){_t(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var l=ra(i),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(m(this._performZoom,this),p),Mn(i)},_performZoom:function(){var i=this._map,l=i.getZoom(),d=this._map.options.zoomSnap||0;i._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),w=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,C=d?Math.ceil(w/d)*d:w,V=i._limitZoom(l+(this._delta>0?C:-C))-l;this._delta=0,this._startTime=null,V&&(i.options.scrollWheelZoom==="center"?i.setZoom(l+V):i.setZoomAround(this._lastMousePos,l+V))}});tt.addInitHook("addHandler","scrollWheelZoom",xt);var ru=600;tt.mergeOptions({tapHold:Ee.touchNative&&Ee.safari&&Ee.mobile,tapTolerance:15});var fa=In.extend({addHooks:function(){Oe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){_t(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var l=i.touches[0];this._startPos=this._newPos=new te(l.clientX,l.clientY),this._holdTimeout=setTimeout(m(function(){this._cancel(),this._isTapValid()&&(Oe(document,"touchend",Ct),Oe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),ru),Oe(document,"touchend touchcancel contextmenu",this._cancel,this),Oe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){_t(document,"touchend",Ct),_t(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),_t(document,"touchend touchcancel contextmenu",this._cancel,this),_t(document,"touchmove",this._onMove,this)},_onMove:function(i){var l=i.touches[0];this._newPos=new te(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,l){var d=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});tt.addInitHook("addHandler","tapHold",fa),tt.mergeOptions({touchZoom:Ee.touch,bounceAtZoomLimits:!0});var mo=In.extend({addHooks:function(){Ie(this._map._container,"leaflet-touch-zoom"),Oe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){gt(this._map._container,"leaflet-touch-zoom"),_t(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var l=this._map;if(!(!i.touches||i.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(i.touches[0]),p=l.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Oe(document,"touchmove",this._onTouchMove,this),Oe(document,"touchend touchcancel",this._onTouchEnd,this),Ct(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(i.touches[0]),p=l.mouseEventToContainerPoint(i.touches[1]),w=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(w,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&w<1||this._zoom>l.getMaxZoom()&&w>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,w===1)return}else{var C=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(w===1&&C.x===0&&C.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(C),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),W(this._animRequest);var V=m(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=z(V,this,!0),Ct(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,W(this._animRequest),_t(document,"touchmove",this._onTouchMove,this),_t(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});tt.addInitHook("addHandler","touchZoom",mo),tt.BoxZoom=fo,tt.DoubleClickZoom=cc,tt.Drag=tu,tt.Keyboard=nu,tt.ScrollWheelZoom=xt,tt.TapHold=fa,tt.TouchZoom=mo,t.Bounds=O,t.Browser=Ee,t.CRS=$e,t.Canvas=Jl,t.Circle=Ha,t.CircleMarker=Wa,t.Class=Ye,t.Control=dn,t.DivIcon=Ya,t.DivOverlay=oi,t.DomEvent=ti,t.DomUtil=Es,t.Draggable=On,t.Evented=Ne,t.FeatureGroup=wi,t.GeoJSON=si,t.GridLayer=Gi,t.Handler=In,t.Icon=Cs,t.ImageOverlay=$i,t.LatLng=xe,t.LatLngBounds=pe,t.Layer=Dr,t.LayerGroup=Hi,t.LineUtil=er,t.Map=tt,t.Marker=Ei,t.Mixin=Js,t.Path=qi,t.Point=te,t.PolyUtil=no,t.Polygon=Ti,t.Polyline=tr,t.Popup=Qa,t.PosAnimation=Is,t.Projection=ii,t.Rectangle=uc,t.Renderer=ai,t.SVG=bs,t.SVGOverlay=Ql,t.TileLayer=Zi,t.Tooltip=uo,t.Transformation=Ur,t.Util=M,t.VideoOverlay=Kl,t.bind=m,t.bounds=X,t.canvas=eu,t.circle=ua,t.circleMarker=nc,t.control=Jn,t.divIcon=oc,t.extend=a,t.featureGroup=ec,t.geoJSON=rc,t.geoJson=Or,t.gridLayer=co,t.icon=tc,t.imageOverlay=ic,t.latLng=ce,t.latLngBounds=we,t.layerGroup=la,t.map=Xn,t.marker=sd,t.point=re,t.polygon=ad,t.polyline=od,t.popup=lo,t.rectangle=ld,t.setOptions=ne,t.stamp=E,t.svg=Xa,t.svgOverlay=Yl,t.tileLayer=Xl,t.tooltip=ha,t.transformation=sr,t.version=s,t.videoOverlay=sc;var hc=window.L;t.noConflict=function(){return window.L=hc,this},window.L=t}))})(Eu,Eu.exports)),Eu.exports}var lE=aE();const Ao=um(lE);function uE({reports:r,onReportClick:e,onMapClick:t,selectedLocation:s,userLocation:a,zoom:c=19}){const m=Je.useRef(null),v=Je.useRef(null),E=Je.useRef([]),x=P=>{let I="from-blue-500 to-blue-600",k="";return P.mode==="suggestion"?(I="from-indigo-500 to-purple-600",k=""):P.status==="nouveau"?(I="from-red-500 to-red-600",k=""):P.status==="en_cours"?(I="from-amber-500 to-orange-600",k=""):P.status==="resolu"&&(I="from-emerald-500 to-teal-600",k=""),Ao.divIcon({html:`
        <div class="relative flex items-center justify-center">
          <div class="absolute w-4 h-1 bg-black/20 rounded-full blur-[2px] bottom-[-18px]"></div>
          <div class="bg-gradient-to-br ${I} w-10 h-10 rounded-full rounded-bl-none rotate-[45deg] border-2 border-white shadow-lg flex items-center justify-center hover:scale-110 transition-transform">
            <span class="rotate-[-45deg] text-lg">${k}</span>
          </div>
        </div>
      `,className:"custom-marker-container",iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-40]})};return Je.useEffect(()=>{if(!m.current||v.current)return;const P=Ao.map(m.current,{zoomControl:!1,attributionControl:!1}).setView([a.lat,a.lng],c);Ao.tileLayer("https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png",{maxZoom:20}).addTo(P),v.current=P;const I=setTimeout(()=>P.invalidateSize(),250);return()=>{clearTimeout(I),P.remove(),v.current=null}},[]),Je.useEffect(()=>{if(!v.current||!a)return;const P=v.current,I=P._userMarker;I&&P.removeLayer(I);const k=Ao.marker([a.lat,a.lng],{icon:Ao.divIcon({html:`
          <div class="relative flex items-center justify-center">
            <div class="absolute w-4 h-4 bg-blue-500 rounded-full animate-ping opacity-75"></div>
            <div class="relative w-4 h-4 bg-blue-600 rounded-full border-2 border-white shadow-md"></div>
          </div>
        `,className:"",iconSize:[16,16],iconAnchor:[8,8]}),zIndexOffset:1e3}).addTo(P);P._userMarker=k},[a]),Je.useEffect(()=>{if(!v.current)return;const P=v.current,I=P._selectionMarker;if(I&&P.removeLayer(I),s){const k=Ao.marker([s.lat,s.lng],{icon:Ao.divIcon({html:`
            <div class="relative flex items-center justify-center">
              <div class="absolute w-8 h-8 bg-purple-500 rounded-full animate-ping opacity-20"></div>
              <div class="bg-gradient-to-br from-purple-500 to-indigo-600 w-10 h-10 rounded-full rounded-bl-none rotate-[45deg] border-2 border-white shadow-xl flex items-center justify-center">
                <span class="rotate-[-45deg] text-lg"></span>
              </div>
            </div>
          `,className:"",iconSize:[40,40],iconAnchor:[20,40]}),zIndexOffset:1100}).addTo(P);P._selectionMarker=k,P.setView([s.lat,s.lng],P.getZoom(),{animate:!0})}},[s]),Je.useEffect(()=>{v.current&&(E.current.forEach(P=>P.remove()),E.current=[],r.forEach(P=>{const I=Ao.marker([P.location.lat,P.location.lng],{icon:x(P)}).addTo(v.current),k=`
        <div class="p-1 min-w-[180px] font-sans">
          ${P.photo?`<img src="${P.photo}" class="w-full h-24 object-cover rounded-xl mb-2" />`:""}
          <p class="text-xs font-bold text-slate-800 leading-tight mb-1">${P.description}</p>
          <div class="flex items-center gap-1.5 mt-2">
             <span class="text-[9px] font-black uppercase px-2 py-0.5 rounded-full bg-slate-100 text-slate-500 border border-slate-200">
               ${P.category}
             </span>
             <span class="text-[9px] font-black uppercase px-2 py-0.5 rounded-full ${P.status==="resolu"?"bg-emerald-100 text-emerald-600 border-emerald-200":"bg-red-100 text-red-600 border-red-200"} border">
               ${P.status}
             </span>
          </div>
        </div>
      `;I.bindPopup(k,{className:"custom-leaflet-popup",closeButton:!1,offset:[0,-10]}),e&&I.on("click",()=>e(P)),E.current.push(I)}))},[r,e]),Je.useEffect(()=>{if(!v.current)return;const P=v.current,I=k=>{t==null||t(k.latlng.lat,k.latlng.lng)};return P.on("click",I),()=>{P.off("click",I)}},[t]),A.jsx("div",{ref:m,className:"h-full w-full outline-none bg-slate-100",style:{position:"absolute",inset:0}})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hE=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Gg=r=>{const e=hE(r);return e.charAt(0).toUpperCase()+e.slice(1)},Ny=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=Je.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:c,iconNode:m,...v},E)=>Je.createElement("svg",{ref:E,...dE,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:Ny("lucide",a),...v},[...m.map(([x,P])=>Je.createElement(x,P)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=(r,e)=>{const t=Je.forwardRef(({className:s,...a},c)=>Je.createElement(fE,{ref:c,iconNode:e,className:Ny(`lucide-${cE(Gg(r))}`,`lucide-${r}`,s),...a}));return t.displayName=Gg(r),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ly=Gt("calendar",mE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],gE=Gt("camera",pE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],yE=Gt("check",_E);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],My=Gt("circle-alert",vE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Dy=Gt("circle-check-big",wE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],TE=Gt("funnel",EE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],IE=Gt("info",xE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],PE=Gt("layers",SE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],bE=Gt("lightbulb",CE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Zg=Gt("loader-circle",kE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],RE=Gt("log-out",AE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Dh=Gt("map-pin",NE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],ME=Gt("map",LE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],OE=Gt("plus",DE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Oy=Gt("shield-check",VE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],FE=Gt("star",zE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],wf=Gt("thumbs-up",jE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],UE=Gt("trash-2",BE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],HE=Gt("trophy",WE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],hm=Gt("user",qE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],GE=Gt("wrench",$E);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Oh=Gt("x",ZE);var KE=Ry();const QE=um(KE);function YE(r){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r))}const XE=r=>{switch(r){case"success":return tT;case"info":return rT;case"warning":return nT;case"error":return iT;default:return null}},JE=Array(12).fill(0),eT=({visible:r,className:e})=>ge.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":r},ge.createElement("div",{className:"sonner-spinner"},JE.map((t,s)=>ge.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),tT=ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ge.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),nT=ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ge.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),rT=ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ge.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),iT=ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ge.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),sT=ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ge.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ge.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),oT=()=>{const[r,e]=ge.useState(document.hidden);return ge.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),r};let Lf=1;class aT{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:s,...a}=e,c=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Lf++,m=this.toasts.find(E=>E.id===c),v=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(c)&&this.dismissedToasts.delete(c),m?this.toasts=this.toasts.map(E=>E.id===c?(this.publish({...E,...e,id:c,title:s}),{...E,...e,id:c,dismissible:v,title:s}):E):this.addToast({title:s,...a,dismissible:v,id:c}),c},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(s=>s({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;t.loading!==void 0&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const a=Promise.resolve(e instanceof Function?e():e);let c=s!==void 0,m;const v=a.then(async x=>{if(m=["resolve",x],ge.isValidElement(x))c=!1,this.create({id:s,type:"default",message:x});else if(uT(x)&&!x.ok){c=!1;const I=typeof t.error=="function"?await t.error(`HTTP error! status: ${x.status}`):t.error,k=typeof t.description=="function"?await t.description(`HTTP error! status: ${x.status}`):t.description,K=typeof I=="object"&&!ge.isValidElement(I)?I:{message:I};this.create({id:s,type:"error",description:k,...K})}else if(x instanceof Error){c=!1;const I=typeof t.error=="function"?await t.error(x):t.error,k=typeof t.description=="function"?await t.description(x):t.description,K=typeof I=="object"&&!ge.isValidElement(I)?I:{message:I};this.create({id:s,type:"error",description:k,...K})}else if(t.success!==void 0){c=!1;const I=typeof t.success=="function"?await t.success(x):t.success,k=typeof t.description=="function"?await t.description(x):t.description,K=typeof I=="object"&&!ge.isValidElement(I)?I:{message:I};this.create({id:s,type:"success",description:k,...K})}}).catch(async x=>{if(m=["reject",x],t.error!==void 0){c=!1;const P=typeof t.error=="function"?await t.error(x):t.error,I=typeof t.description=="function"?await t.description(x):t.description,H=typeof P=="object"&&!ge.isValidElement(P)?P:{message:P};this.create({id:s,type:"error",description:I,...H})}}).finally(()=>{c&&(this.dismiss(s),s=void 0),t.finally==null||t.finally.call(t)}),E=()=>new Promise((x,P)=>v.then(()=>m[0]==="reject"?P(m[1]):x(m[1])).catch(P));return typeof s!="string"&&typeof s!="number"?{unwrap:E}:Object.assign(s,{unwrap:E})},this.custom=(e,t)=>{const s=(t==null?void 0:t.id)||Lf++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Pr=new aT,lT=(r,e)=>{const t=(e==null?void 0:e.id)||Lf++;return Pr.addToast({title:r,...e,id:t}),t},uT=r=>r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"&&"status"in r&&typeof r.status=="number",cT=lT,hT=()=>Pr.toasts,dT=()=>Pr.getActiveToasts(),wl=Object.assign(cT,{success:Pr.success,info:Pr.info,warning:Pr.warning,error:Pr.error,custom:Pr.custom,message:Pr.message,promise:Pr.promise,dismiss:Pr.dismiss,loading:Pr.loading},{getHistory:hT,getToasts:dT});YE("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Xc(r){return r.label!==void 0}const fT=3,mT="24px",pT="16px",Kg=4e3,gT=356,_T=14,yT=45,vT=200;function Ji(...r){return r.filter(Boolean).join(" ")}function wT(r){const[e,t]=r.split("-"),s=[];return e&&s.push(e),t&&s.push(t),s}const ET=r=>{var e,t,s,a,c,m,v,E,x;const{invert:P,toast:I,unstyled:k,interacting:H,setHeights:K,visibleToasts:ne,heights:ee,index:ye,toasts:he,expanded:ve,removeToast:Be,defaultRichColors:Ke,closeButton:Me,style:j,cancelButtonStyle:R,actionButtonStyle:D,className:B="",descriptionClassName:z="",duration:W,position:M,gap:Ye,expandByDefault:lt,classNames:fe,icons:Ne,closeButtonAriaLabel:te="Close toast"}=r,[_e,re]=ge.useState(null),[O,X]=ge.useState(null),[pe,we]=ge.useState(!1),[xe,ce]=ge.useState(!1),[$e,Ue]=ge.useState(!1),[rt,Rt]=ge.useState(!1),[Ur,sr]=ge.useState(!1),[or,Wr]=ge.useState(0),[hs,Hr]=ge.useState(0),_n=ge.useRef(I.duration||W||Kg),kr=ge.useRef(null),ft=ge.useRef(null),St=ye===0,yn=ye+1<=ne,Ut=I.type,$n=I.dismissible!==!1,Zs=I.className||"",qr=I.descriptionClassName||"",ar=ge.useMemo(()=>ee.findIndex(Fe=>Fe.toastId===I.id)||0,[ee,I.id]),gi=ge.useMemo(()=>{var Fe;return(Fe=I.closeButton)!=null?Fe:Me},[I.closeButton,Me]),lr=ge.useMemo(()=>I.duration||W||Kg,[I.duration,W]),Mi=ge.useRef(0),vn=ge.useRef(0),ur=ge.useRef(0),Ar=ge.useRef(null),[Rr,$r]=M.split("-"),_i=ge.useMemo(()=>ee.reduce((Fe,wt,Ot)=>Ot>=ar?Fe:Fe+wt.height,0),[ee,ar]),Rn=oT(),cr=I.invert||P,hr=Ut==="loading";vn.current=ge.useMemo(()=>ar*Ye+_i,[ar,_i]),ge.useEffect(()=>{_n.current=lr},[lr]),ge.useEffect(()=>{we(!0)},[]),ge.useEffect(()=>{const Fe=ft.current;if(Fe){const wt=Fe.getBoundingClientRect().height;return Hr(wt),K(Ot=>[{toastId:I.id,height:wt,position:I.position},...Ot]),()=>K(Ot=>Ot.filter(Yt=>Yt.toastId!==I.id))}},[K,I.id]),ge.useLayoutEffect(()=>{if(!pe)return;const Fe=ft.current,wt=Fe.style.height;Fe.style.height="auto";const Ot=Fe.getBoundingClientRect().height;Fe.style.height=wt,Hr(Ot),K(Yt=>Yt.find(Pt=>Pt.toastId===I.id)?Yt.map(Pt=>Pt.toastId===I.id?{...Pt,height:Ot}:Pt):[{toastId:I.id,height:Ot,position:I.position},...Yt])},[pe,I.title,I.description,K,I.id]);const wn=ge.useCallback(()=>{ce(!0),Wr(vn.current),K(Fe=>Fe.filter(wt=>wt.toastId!==I.id)),setTimeout(()=>{Be(I)},vT)},[I,Be,K,vn]);ge.useEffect(()=>{if(I.promise&&Ut==="loading"||I.duration===1/0||I.type==="loading")return;let Fe;return ve||H||Rn?(()=>{if(ur.current<Mi.current){const Yt=new Date().getTime()-Mi.current;_n.current=_n.current-Yt}ur.current=new Date().getTime()})():(()=>{_n.current!==1/0&&(Mi.current=new Date().getTime(),Fe=setTimeout(()=>{I.onAutoClose==null||I.onAutoClose.call(I,I),wn()},_n.current))})(),()=>clearTimeout(Fe)},[ve,H,I,Ut,Rn,wn]),ge.useEffect(()=>{I.delete&&wn()},[wn,I.delete]);function dr(){var Fe;if(Ne!=null&&Ne.loading){var wt;return ge.createElement("div",{className:Ji(fe==null?void 0:fe.loader,I==null||(wt=I.classNames)==null?void 0:wt.loader,"sonner-loader"),"data-visible":Ut==="loading"},Ne.loading)}return ge.createElement(eT,{className:Ji(fe==null?void 0:fe.loader,I==null||(Fe=I.classNames)==null?void 0:Fe.loader),visible:Ut==="loading"})}const fr=I.icon||(Ne==null?void 0:Ne[Ut])||XE(Ut);var Tt,Di;return ge.createElement("li",{tabIndex:0,ref:ft,className:Ji(B,Zs,fe==null?void 0:fe.toast,I==null||(e=I.classNames)==null?void 0:e.toast,fe==null?void 0:fe.default,fe==null?void 0:fe[Ut],I==null||(t=I.classNames)==null?void 0:t[Ut]),"data-sonner-toast":"","data-rich-colors":(Tt=I.richColors)!=null?Tt:Ke,"data-styled":!(I.jsx||I.unstyled||k),"data-mounted":pe,"data-promise":!!I.promise,"data-swiped":Ur,"data-removed":xe,"data-visible":yn,"data-y-position":Rr,"data-x-position":$r,"data-index":ye,"data-front":St,"data-swiping":$e,"data-dismissible":$n,"data-type":Ut,"data-invert":cr,"data-swipe-out":rt,"data-swipe-direction":O,"data-expanded":!!(ve||lt&&pe),style:{"--index":ye,"--toasts-before":ye,"--z-index":he.length-ye,"--offset":`${xe?or:vn.current}px`,"--initial-height":lt?"auto":`${hs}px`,...j,...I.style},onDragEnd:()=>{Ue(!1),re(null),Ar.current=null},onPointerDown:Fe=>{hr||!$n||(kr.current=new Date,Wr(vn.current),Fe.target.setPointerCapture(Fe.pointerId),Fe.target.tagName!=="BUTTON"&&(Ue(!0),Ar.current={x:Fe.clientX,y:Fe.clientY}))},onPointerUp:()=>{var Fe,wt,Ot;if(rt||!$n)return;Ar.current=null;const Yt=Number(((Fe=ft.current)==null?void 0:Fe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),En=Number(((wt=ft.current)==null?void 0:wt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Pt=new Date().getTime()-((Ot=kr.current)==null?void 0:Ot.getTime()),Wt=_e==="x"?Yt:En,Gn=Math.abs(Wt)/Pt;if(Math.abs(Wt)>=yT||Gn>.11){Wr(vn.current),I.onDismiss==null||I.onDismiss.call(I,I),X(_e==="x"?Yt>0?"right":"left":En>0?"down":"up"),wn(),Rt(!0);return}else{var Ht,cn;(Ht=ft.current)==null||Ht.style.setProperty("--swipe-amount-x","0px"),(cn=ft.current)==null||cn.style.setProperty("--swipe-amount-y","0px")}sr(!1),Ue(!1),re(null)},onPointerMove:Fe=>{var wt,Ot,Yt;if(!Ar.current||!$n||((wt=window.getSelection())==null?void 0:wt.toString().length)>0)return;const Pt=Fe.clientY-Ar.current.y,Wt=Fe.clientX-Ar.current.x;var Gn;const Ht=(Gn=r.swipeDirections)!=null?Gn:wT(M);!_e&&(Math.abs(Wt)>1||Math.abs(Pt)>1)&&re(Math.abs(Wt)>Math.abs(Pt)?"x":"y");let cn={x:0,y:0};const Vt=Ee=>1/(1.5+Math.abs(Ee)/20);if(_e==="y"){if(Ht.includes("top")||Ht.includes("bottom"))if(Ht.includes("top")&&Pt<0||Ht.includes("bottom")&&Pt>0)cn.y=Pt;else{const Ee=Pt*Vt(Pt);cn.y=Math.abs(Ee)<Math.abs(Pt)?Ee:Pt}}else if(_e==="x"&&(Ht.includes("left")||Ht.includes("right")))if(Ht.includes("left")&&Wt<0||Ht.includes("right")&&Wt>0)cn.x=Wt;else{const Ee=Wt*Vt(Wt);cn.x=Math.abs(Ee)<Math.abs(Wt)?Ee:Wt}(Math.abs(cn.x)>0||Math.abs(cn.y)>0)&&sr(!0),(Ot=ft.current)==null||Ot.style.setProperty("--swipe-amount-x",`${cn.x}px`),(Yt=ft.current)==null||Yt.style.setProperty("--swipe-amount-y",`${cn.y}px`)}},gi&&!I.jsx&&Ut!=="loading"?ge.createElement("button",{"aria-label":te,"data-disabled":hr,"data-close-button":!0,onClick:hr||!$n?()=>{}:()=>{wn(),I.onDismiss==null||I.onDismiss.call(I,I)},className:Ji(fe==null?void 0:fe.closeButton,I==null||(s=I.classNames)==null?void 0:s.closeButton)},(Di=Ne==null?void 0:Ne.close)!=null?Di:sT):null,(Ut||I.icon||I.promise)&&I.icon!==null&&((Ne==null?void 0:Ne[Ut])!==null||I.icon)?ge.createElement("div",{"data-icon":"",className:Ji(fe==null?void 0:fe.icon,I==null||(a=I.classNames)==null?void 0:a.icon)},I.promise||I.type==="loading"&&!I.icon?I.icon||dr():null,I.type!=="loading"?fr:null):null,ge.createElement("div",{"data-content":"",className:Ji(fe==null?void 0:fe.content,I==null||(c=I.classNames)==null?void 0:c.content)},ge.createElement("div",{"data-title":"",className:Ji(fe==null?void 0:fe.title,I==null||(m=I.classNames)==null?void 0:m.title)},I.jsx?I.jsx:typeof I.title=="function"?I.title():I.title),I.description?ge.createElement("div",{"data-description":"",className:Ji(z,qr,fe==null?void 0:fe.description,I==null||(v=I.classNames)==null?void 0:v.description)},typeof I.description=="function"?I.description():I.description):null),ge.isValidElement(I.cancel)?I.cancel:I.cancel&&Xc(I.cancel)?ge.createElement("button",{"data-button":!0,"data-cancel":!0,style:I.cancelButtonStyle||R,onClick:Fe=>{Xc(I.cancel)&&$n&&(I.cancel.onClick==null||I.cancel.onClick.call(I.cancel,Fe),wn())},className:Ji(fe==null?void 0:fe.cancelButton,I==null||(E=I.classNames)==null?void 0:E.cancelButton)},I.cancel.label):null,ge.isValidElement(I.action)?I.action:I.action&&Xc(I.action)?ge.createElement("button",{"data-button":!0,"data-action":!0,style:I.actionButtonStyle||D,onClick:Fe=>{Xc(I.action)&&(I.action.onClick==null||I.action.onClick.call(I.action,Fe),!Fe.defaultPrevented&&wn())},className:Ji(fe==null?void 0:fe.actionButton,I==null||(x=I.classNames)==null?void 0:x.actionButton)},I.action.label):null)};function Qg(){if(typeof window>"u"||typeof document>"u")return"ltr";const r=document.documentElement.getAttribute("dir");return r==="auto"||!r?window.getComputedStyle(document.documentElement).direction:r}function TT(r,e){const t={};return[r,e].forEach((s,a)=>{const c=a===1,m=c?"--mobile-offset":"--offset",v=c?pT:mT;function E(x){["top","right","bottom","left"].forEach(P=>{t[`${m}-${P}`]=typeof x=="number"?`${x}px`:x})}typeof s=="number"||typeof s=="string"?E(s):typeof s=="object"?["top","right","bottom","left"].forEach(x=>{s[x]===void 0?t[`${m}-${x}`]=v:t[`${m}-${x}`]=typeof s[x]=="number"?`${s[x]}px`:s[x]}):E(v)}),t}const xT=ge.forwardRef(function(e,t){const{invert:s,position:a="bottom-right",hotkey:c=["altKey","KeyT"],expand:m,closeButton:v,className:E,offset:x,mobileOffset:P,theme:I="light",richColors:k,duration:H,style:K,visibleToasts:ne=fT,toastOptions:ee,dir:ye=Qg(),gap:he=_T,icons:ve,containerAriaLabel:Be="Notifications"}=e,[Ke,Me]=ge.useState([]),j=ge.useMemo(()=>Array.from(new Set([a].concat(Ke.filter(O=>O.position).map(O=>O.position)))),[Ke,a]),[R,D]=ge.useState([]),[B,z]=ge.useState(!1),[W,M]=ge.useState(!1),[Ye,lt]=ge.useState(I!=="system"?I:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),fe=ge.useRef(null),Ne=c.join("+").replace(/Key/g,"").replace(/Digit/g,""),te=ge.useRef(null),_e=ge.useRef(!1),re=ge.useCallback(O=>{Me(X=>{var pe;return(pe=X.find(we=>we.id===O.id))!=null&&pe.delete||Pr.dismiss(O.id),X.filter(({id:we})=>we!==O.id)})},[]);return ge.useEffect(()=>Pr.subscribe(O=>{if(O.dismiss){requestAnimationFrame(()=>{Me(X=>X.map(pe=>pe.id===O.id?{...pe,delete:!0}:pe))});return}setTimeout(()=>{QE.flushSync(()=>{Me(X=>{const pe=X.findIndex(we=>we.id===O.id);return pe!==-1?[...X.slice(0,pe),{...X[pe],...O},...X.slice(pe+1)]:[O,...X]})})})}),[Ke]),ge.useEffect(()=>{if(I!=="system"){lt(I);return}if(I==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?lt("dark"):lt("light")),typeof window>"u")return;const O=window.matchMedia("(prefers-color-scheme: dark)");try{O.addEventListener("change",({matches:X})=>{lt(X?"dark":"light")})}catch{O.addListener(({matches:pe})=>{try{lt(pe?"dark":"light")}catch(we){console.error(we)}})}},[I]),ge.useEffect(()=>{Ke.length<=1&&z(!1)},[Ke]),ge.useEffect(()=>{const O=X=>{var pe;if(c.every(ce=>X[ce]||X.code===ce)){var xe;z(!0),(xe=fe.current)==null||xe.focus()}X.code==="Escape"&&(document.activeElement===fe.current||(pe=fe.current)!=null&&pe.contains(document.activeElement))&&z(!1)};return document.addEventListener("keydown",O),()=>document.removeEventListener("keydown",O)},[c]),ge.useEffect(()=>{if(fe.current)return()=>{te.current&&(te.current.focus({preventScroll:!0}),te.current=null,_e.current=!1)}},[fe.current]),ge.createElement("section",{ref:t,"aria-label":`${Be} ${Ne}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},j.map((O,X)=>{var pe;const[we,xe]=O.split("-");return Ke.length?ge.createElement("ol",{key:O,dir:ye==="auto"?Qg():ye,tabIndex:-1,ref:fe,className:E,"data-sonner-toaster":!0,"data-sonner-theme":Ye,"data-y-position":we,"data-lifted":B&&Ke.length>1&&!m,"data-x-position":xe,style:{"--front-toast-height":`${((pe=R[0])==null?void 0:pe.height)||0}px`,"--width":`${gT}px`,"--gap":`${he}px`,...K,...TT(x,P)},onBlur:ce=>{_e.current&&!ce.currentTarget.contains(ce.relatedTarget)&&(_e.current=!1,te.current&&(te.current.focus({preventScroll:!0}),te.current=null))},onFocus:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||_e.current||(_e.current=!0,te.current=ce.relatedTarget)},onMouseEnter:()=>z(!0),onMouseMove:()=>z(!0),onMouseLeave:()=>{W||z(!1)},onDragEnd:()=>z(!1),onPointerDown:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},Ke.filter(ce=>!ce.position&&X===0||ce.position===O).map((ce,$e)=>{var Ue,rt;return ge.createElement(ET,{key:ce.id,icons:ve,index:$e,toast:ce,defaultRichColors:k,duration:(Ue=ee==null?void 0:ee.duration)!=null?Ue:H,className:ee==null?void 0:ee.className,descriptionClassName:ee==null?void 0:ee.descriptionClassName,invert:s,visibleToasts:ne,closeButton:(rt=ee==null?void 0:ee.closeButton)!=null?rt:v,interacting:W,position:O,style:ee==null?void 0:ee.style,unstyled:ee==null?void 0:ee.unstyled,classNames:ee==null?void 0:ee.classNames,cancelButtonStyle:ee==null?void 0:ee.cancelButtonStyle,actionButtonStyle:ee==null?void 0:ee.actionButtonStyle,closeButtonAriaLabel:ee==null?void 0:ee.closeButtonAriaLabel,removeToast:re,toasts:Ke.filter(Rt=>Rt.position==ce.position),heights:R.filter(Rt=>Rt.position==ce.position),setHeights:D,expandByDefault:m,gap:he,expanded:B,swipeDirections:e.swipeDirections})})):null}))});function IT({onSubmit:r,onCancel:e,initialLocation:t,userLocation:s,onLocationSelect:a}){const[c,m]=Je.useState("mobilier"),[v,E]=Je.useState("autre"),[x,P]=Je.useState(""),[I,k]=Je.useState(""),[H,K]=Je.useState(t||s);Je.useEffect(()=>{t?K(t):s&&K(s)},[t,s]);const ne=ye=>{var Be;const he=(Be=ye.target.files)==null?void 0:Be[0];if(!he)return;const ve=new FileReader;ve.onloadend=()=>k(ve.result),ve.readAsDataURL(he)},ee=ye=>{if(ye.preventDefault(),!H){wl.error("Localisation GPS non dtecte. Veuillez cliquer sur la carte.");return}if(!x){wl.error("La description est requise");return}if(c==="mobilier"&&!I){wl.error("La photo est obligatoire pour signaler du mobilier");return}const he={mode:c,category:v,description:x,photo:I||"",location:{lat:H.lat,lng:H.lng}};r(he)};return A.jsx("div",{className:"px-5 pb-6",children:A.jsxs("form",{onSubmit:ee,className:"space-y-3",children:[A.jsx("div",{className:"flex bg-slate-100 p-1 rounded-xl gap-1",children:[{id:"mobilier",label:"Mobilier",icon:A.jsx(Dy,{size:14}),color:"bg-emerald-500"},{id:"suggestion",label:"Ide",icon:A.jsx(bE,{size:14}),color:"bg-indigo-600"}].map(ye=>A.jsxs("button",{type:"button",onClick:()=>m(ye.id),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-[11px] font-bold transition-all ${c===ye.id?`${ye.color} text-white shadow-sm`:"text-slate-500 hover:bg-slate-200"}`,children:[ye.icon," ",ye.label]},ye.id))}),A.jsxs("div",{className:"bg-slate-50 rounded-2xl p-3 border border-slate-100 space-y-2",children:[A.jsxs("select",{value:v,onChange:ye=>E(ye.target.value),className:"w-full bg-white border border-slate-200 p-2 rounded-xl text-sm font-semibold text-slate-700 outline-none",children:[A.jsx("option",{value:"mobilier",children:" Mobilier urbain"}),A.jsx("option",{value:"signalisation",children:" Signalisation"}),A.jsx("option",{value:"mobilite",children:" Mobilit"}),A.jsx("option",{value:"autre",children:" Autre"})]}),A.jsx("textarea",{value:x,onChange:ye=>P(ye.target.value),placeholder:c==="suggestion"?"Dcrivez votre ide...":"Dcrivez le mobilier...",rows:2,className:"w-full bg-white border border-slate-200 p-3 rounded-xl text-sm text-slate-600 outline-none resize-none focus:ring-2 focus:ring-blue-100",required:!0})]}),A.jsxs("div",{className:"flex gap-2",children:[I?A.jsxs("div",{className:"relative w-20 h-20 shrink-0",children:[A.jsx("img",{src:I,className:"w-full h-full object-cover rounded-xl border border-slate-200",alt:"Preview"}),A.jsx("button",{onClick:()=>k(""),className:"absolute -top-1 -right-1 bg-red-500 text-white p-1 rounded-full shadow-lg",children:A.jsx(Oh,{size:10})})]}):A.jsxs("label",{className:"w-20 h-20 shrink-0 flex flex-col items-center justify-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50 text-slate-400 cursor-pointer active:bg-slate-100 transition-colors",children:[A.jsx(gE,{size:20}),A.jsx("span",{className:"text-[9px] font-bold mt-1 uppercase",children:"Photo"}),A.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:ne,hidden:!0})]}),A.jsxs("button",{type:"button",onClick:a,className:`flex-1 flex flex-col items-center justify-center rounded-xl border-2 transition-all ${t?"bg-blue-600 border-blue-500 text-white shadow-md":"bg-emerald-50 border-emerald-100 text-emerald-600"}`,children:[A.jsx(Dh,{size:20,className:t?"animate-bounce":""}),A.jsx("span",{className:"text-[9px] font-bold mt-1 uppercase text-center px-1",children:t?"Position prcise":"Ma position (GPS)"}),A.jsx("span",{className:"text-[8px] opacity-70",children:"Appuyer pour changer"})]})]}),A.jsxs("div",{className:"flex gap-2 pt-1",children:[A.jsx("button",{type:"button",onClick:e,className:"p-3 bg-slate-100 text-slate-400 rounded-xl hover:bg-slate-200 transition-colors",children:A.jsx(UE,{size:18})}),A.jsxs("button",{type:"submit",className:"flex-1 bg-blue-600 text-white rounded-xl font-bold py-3 shadow-md hover:bg-blue-700 active:scale-95 transition-all flex items-center justify-center gap-2 text-sm",children:[A.jsx(yE,{size:18})," Confirmer"]})]})]})})}function Li(r){const e=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&e==="[object Date]"?new r.constructor(+r):typeof r=="number"||e==="[object Number]"||typeof r=="string"||e==="[object String]"?new Date(r):new Date(NaN)}function Ra(r,e){return r instanceof Date?new r.constructor(e):new Date(e)}const Vy=6048e5,ST=864e5;let PT={};function Vh(){return PT}function Nu(r,e){var v,E,x,P;const t=Vh(),s=(e==null?void 0:e.weekStartsOn)??((E=(v=e==null?void 0:e.locale)==null?void 0:v.options)==null?void 0:E.weekStartsOn)??t.weekStartsOn??((P=(x=t.locale)==null?void 0:x.options)==null?void 0:P.weekStartsOn)??0,a=Li(r),c=a.getDay(),m=(c<s?7:0)+c-s;return a.setDate(a.getDate()-m),a.setHours(0,0,0,0),a}function gh(r){return Nu(r,{weekStartsOn:1})}function zy(r){const e=Li(r),t=e.getFullYear(),s=Ra(r,0);s.setFullYear(t+1,0,4),s.setHours(0,0,0,0);const a=gh(s),c=Ra(r,0);c.setFullYear(t,0,4),c.setHours(0,0,0,0);const m=gh(c);return e.getTime()>=a.getTime()?t+1:e.getTime()>=m.getTime()?t:t-1}function Yg(r){const e=Li(r);return e.setHours(0,0,0,0),e}function Xg(r){const e=Li(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function CT(r,e){const t=Yg(r),s=Yg(e),a=+t-Xg(t),c=+s-Xg(s);return Math.round((a-c)/ST)}function bT(r){const e=zy(r),t=Ra(r,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),gh(t)}function kT(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function AT(r){if(!kT(r)&&typeof r!="number")return!1;const e=Li(r);return!isNaN(Number(e))}function RT(r){const e=Li(r),t=Ra(r,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const NT={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},LT=(r,e,t)=>{let s;const a=NT[r];return typeof a=="string"?s=a:e===1?s=a.one:s=a.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+s:s+" ago":s};function El(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const MT={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},DT={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},OT={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},VT={date:El({formats:MT,defaultWidth:"full"}),time:El({formats:DT,defaultWidth:"full"}),dateTime:El({formats:OT,defaultWidth:"full"})},zT={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},FT=(r,e,t,s)=>zT[r];function ts(r){return(e,t)=>{const s=t!=null&&t.context?String(t.context):"standalone";let a;if(s==="formatting"&&r.formattingValues){const m=r.defaultFormattingWidth||r.defaultWidth,v=t!=null&&t.width?String(t.width):m;a=r.formattingValues[v]||r.formattingValues[m]}else{const m=r.defaultWidth,v=t!=null&&t.width?String(t.width):r.defaultWidth;a=r.values[v]||r.values[m]}const c=r.argumentCallback?r.argumentCallback(e):e;return a[c]}}const jT={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},BT={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},UT={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},WT={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},HT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},qT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},$T=(r,e)=>{const t=Number(r),s=t%100;if(s>20||s<10)switch(s%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},GT={ordinalNumber:$T,era:ts({values:jT,defaultWidth:"wide"}),quarter:ts({values:BT,defaultWidth:"wide",argumentCallback:r=>r-1}),month:ts({values:UT,defaultWidth:"wide"}),day:ts({values:WT,defaultWidth:"wide"}),dayPeriod:ts({values:HT,defaultWidth:"wide",formattingValues:qT,defaultFormattingWidth:"wide"})};function ns(r){return(e,t={})=>{const s=t.width,a=s&&r.matchPatterns[s]||r.matchPatterns[r.defaultMatchWidth],c=e.match(a);if(!c)return null;const m=c[0],v=s&&r.parsePatterns[s]||r.parsePatterns[r.defaultParseWidth],E=Array.isArray(v)?KT(v,I=>I.test(m)):ZT(v,I=>I.test(m));let x;x=r.valueCallback?r.valueCallback(E):E,x=t.valueCallback?t.valueCallback(x):x;const P=e.slice(m.length);return{value:x,rest:P}}}function ZT(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function KT(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function Fy(r){return(e,t={})=>{const s=e.match(r.matchPattern);if(!s)return null;const a=s[0],c=e.match(r.parsePattern);if(!c)return null;let m=r.valueCallback?r.valueCallback(c[0]):c[0];m=t.valueCallback?t.valueCallback(m):m;const v=e.slice(a.length);return{value:m,rest:v}}}const QT=/^(\d+)(th|st|nd|rd)?/i,YT=/\d+/i,XT={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},JT={any:[/^b/i,/^(a|c)/i]},e1={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},t1={any:[/1/i,/2/i,/3/i,/4/i]},n1={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},r1={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},i1={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},s1={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},o1={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},a1={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},l1={ordinalNumber:Fy({matchPattern:QT,parsePattern:YT,valueCallback:r=>parseInt(r,10)}),era:ns({matchPatterns:XT,defaultMatchWidth:"wide",parsePatterns:JT,defaultParseWidth:"any"}),quarter:ns({matchPatterns:e1,defaultMatchWidth:"wide",parsePatterns:t1,defaultParseWidth:"any",valueCallback:r=>r+1}),month:ns({matchPatterns:n1,defaultMatchWidth:"wide",parsePatterns:r1,defaultParseWidth:"any"}),day:ns({matchPatterns:i1,defaultMatchWidth:"wide",parsePatterns:s1,defaultParseWidth:"any"}),dayPeriod:ns({matchPatterns:o1,defaultMatchWidth:"any",parsePatterns:a1,defaultParseWidth:"any"})},u1={code:"en-US",formatDistance:LT,formatLong:VT,formatRelative:FT,localize:GT,match:l1,options:{weekStartsOn:0,firstWeekContainsDate:1}};function c1(r){const e=Li(r);return CT(e,RT(e))+1}function h1(r){const e=Li(r),t=+gh(e)-+bT(e);return Math.round(t/Vy)+1}function jy(r,e){var P,I,k,H;const t=Li(r),s=t.getFullYear(),a=Vh(),c=(e==null?void 0:e.firstWeekContainsDate)??((I=(P=e==null?void 0:e.locale)==null?void 0:P.options)==null?void 0:I.firstWeekContainsDate)??a.firstWeekContainsDate??((H=(k=a.locale)==null?void 0:k.options)==null?void 0:H.firstWeekContainsDate)??1,m=Ra(r,0);m.setFullYear(s+1,0,c),m.setHours(0,0,0,0);const v=Nu(m,e),E=Ra(r,0);E.setFullYear(s,0,c),E.setHours(0,0,0,0);const x=Nu(E,e);return t.getTime()>=v.getTime()?s+1:t.getTime()>=x.getTime()?s:s-1}function d1(r,e){var v,E,x,P;const t=Vh(),s=(e==null?void 0:e.firstWeekContainsDate)??((E=(v=e==null?void 0:e.locale)==null?void 0:v.options)==null?void 0:E.firstWeekContainsDate)??t.firstWeekContainsDate??((P=(x=t.locale)==null?void 0:x.options)==null?void 0:P.firstWeekContainsDate)??1,a=jy(r,e),c=Ra(r,0);return c.setFullYear(a,0,s),c.setHours(0,0,0,0),Nu(c,e)}function f1(r,e){const t=Li(r),s=+Nu(t,e)-+d1(t,e);return Math.round(s/Vy)+1}function Et(r,e){const t=r<0?"-":"",s=Math.abs(r).toString().padStart(e,"0");return t+s}const Ro={y(r,e){const t=r.getFullYear(),s=t>0?t:1-t;return Et(e==="yy"?s%100:s,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):Et(t+1,2)},d(r,e){return Et(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return Et(r.getHours()%12||12,e.length)},H(r,e){return Et(r.getHours(),e.length)},m(r,e){return Et(r.getMinutes(),e.length)},s(r,e){return Et(r.getSeconds(),e.length)},S(r,e){const t=e.length,s=r.getMilliseconds(),a=Math.trunc(s*Math.pow(10,t-3));return Et(a,e.length)}},ml={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Jg={G:function(r,e,t){const s=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(s,{width:"abbreviated"});case"GGGGG":return t.era(s,{width:"narrow"});case"GGGG":default:return t.era(s,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const s=r.getFullYear(),a=s>0?s:1-s;return t.ordinalNumber(a,{unit:"year"})}return Ro.y(r,e)},Y:function(r,e,t,s){const a=jy(r,s),c=a>0?a:1-a;if(e==="YY"){const m=c%100;return Et(m,2)}return e==="Yo"?t.ordinalNumber(c,{unit:"year"}):Et(c,e.length)},R:function(r,e){const t=zy(r);return Et(t,e.length)},u:function(r,e){const t=r.getFullYear();return Et(t,e.length)},Q:function(r,e,t){const s=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return Et(s,2);case"Qo":return t.ordinalNumber(s,{unit:"quarter"});case"QQQ":return t.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(s,{width:"wide",context:"formatting"})}},q:function(r,e,t){const s=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return Et(s,2);case"qo":return t.ordinalNumber(s,{unit:"quarter"});case"qqq":return t.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(s,{width:"wide",context:"standalone"})}},M:function(r,e,t){const s=r.getMonth();switch(e){case"M":case"MM":return Ro.M(r,e);case"Mo":return t.ordinalNumber(s+1,{unit:"month"});case"MMM":return t.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(s,{width:"wide",context:"formatting"})}},L:function(r,e,t){const s=r.getMonth();switch(e){case"L":return String(s+1);case"LL":return Et(s+1,2);case"Lo":return t.ordinalNumber(s+1,{unit:"month"});case"LLL":return t.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(s,{width:"wide",context:"standalone"})}},w:function(r,e,t,s){const a=f1(r,s);return e==="wo"?t.ordinalNumber(a,{unit:"week"}):Et(a,e.length)},I:function(r,e,t){const s=h1(r);return e==="Io"?t.ordinalNumber(s,{unit:"week"}):Et(s,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):Ro.d(r,e)},D:function(r,e,t){const s=c1(r);return e==="Do"?t.ordinalNumber(s,{unit:"dayOfYear"}):Et(s,e.length)},E:function(r,e,t){const s=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(s,{width:"short",context:"formatting"});case"EEEE":default:return t.day(s,{width:"wide",context:"formatting"})}},e:function(r,e,t,s){const a=r.getDay(),c=(a-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(c);case"ee":return Et(c,2);case"eo":return t.ordinalNumber(c,{unit:"day"});case"eee":return t.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(a,{width:"short",context:"formatting"});case"eeee":default:return t.day(a,{width:"wide",context:"formatting"})}},c:function(r,e,t,s){const a=r.getDay(),c=(a-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(c);case"cc":return Et(c,e.length);case"co":return t.ordinalNumber(c,{unit:"day"});case"ccc":return t.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(a,{width:"narrow",context:"standalone"});case"cccccc":return t.day(a,{width:"short",context:"standalone"});case"cccc":default:return t.day(a,{width:"wide",context:"standalone"})}},i:function(r,e,t){const s=r.getDay(),a=s===0?7:s;switch(e){case"i":return String(a);case"ii":return Et(a,e.length);case"io":return t.ordinalNumber(a,{unit:"day"});case"iii":return t.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(s,{width:"short",context:"formatting"});case"iiii":default:return t.day(s,{width:"wide",context:"formatting"})}},a:function(r,e,t){const a=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(r,e,t){const s=r.getHours();let a;switch(s===12?a=ml.noon:s===0?a=ml.midnight:a=s/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(r,e,t){const s=r.getHours();let a;switch(s>=17?a=ml.evening:s>=12?a=ml.afternoon:s>=4?a=ml.morning:a=ml.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let s=r.getHours()%12;return s===0&&(s=12),t.ordinalNumber(s,{unit:"hour"})}return Ro.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):Ro.H(r,e)},K:function(r,e,t){const s=r.getHours()%12;return e==="Ko"?t.ordinalNumber(s,{unit:"hour"}):Et(s,e.length)},k:function(r,e,t){let s=r.getHours();return s===0&&(s=24),e==="ko"?t.ordinalNumber(s,{unit:"hour"}):Et(s,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):Ro.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):Ro.s(r,e)},S:function(r,e){return Ro.S(r,e)},X:function(r,e,t){const s=r.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return t_(s);case"XXXX":case"XX":return Sa(s);case"XXXXX":case"XXX":default:return Sa(s,":")}},x:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"x":return t_(s);case"xxxx":case"xx":return Sa(s);case"xxxxx":case"xxx":default:return Sa(s,":")}},O:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+e_(s,":");case"OOOO":default:return"GMT"+Sa(s,":")}},z:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+e_(s,":");case"zzzz":default:return"GMT"+Sa(s,":")}},t:function(r,e,t){const s=Math.trunc(r.getTime()/1e3);return Et(s,e.length)},T:function(r,e,t){const s=r.getTime();return Et(s,e.length)}};function e_(r,e=""){const t=r>0?"-":"+",s=Math.abs(r),a=Math.trunc(s/60),c=s%60;return c===0?t+String(a):t+String(a)+e+Et(c,2)}function t_(r,e){return r%60===0?(r>0?"-":"+")+Et(Math.abs(r)/60,2):Sa(r,e)}function Sa(r,e=""){const t=r>0?"-":"+",s=Math.abs(r),a=Et(Math.trunc(s/60),2),c=Et(s%60,2);return t+a+e+c}const n_=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},By=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},m1=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],s=t[1],a=t[2];if(!a)return n_(r,e);let c;switch(s){case"P":c=e.dateTime({width:"short"});break;case"PP":c=e.dateTime({width:"medium"});break;case"PPP":c=e.dateTime({width:"long"});break;case"PPPP":default:c=e.dateTime({width:"full"});break}return c.replace("{{date}}",n_(s,e)).replace("{{time}}",By(a,e))},p1={p:By,P:m1},g1=/^D+$/,_1=/^Y+$/,y1=["D","DD","YY","YYYY"];function v1(r){return g1.test(r)}function w1(r){return _1.test(r)}function E1(r,e,t){const s=T1(r,e,t);if(console.warn(s),y1.includes(r))throw new RangeError(s)}function T1(r,e,t){const s=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${s} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const x1=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,I1=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,S1=/^'([^]*?)'?$/,P1=/''/g,C1=/[a-zA-Z]/;function Mf(r,e,t){var P,I,k,H,K,ne,ee,ye;const s=Vh(),a=(t==null?void 0:t.locale)??s.locale??u1,c=(t==null?void 0:t.firstWeekContainsDate)??((I=(P=t==null?void 0:t.locale)==null?void 0:P.options)==null?void 0:I.firstWeekContainsDate)??s.firstWeekContainsDate??((H=(k=s.locale)==null?void 0:k.options)==null?void 0:H.firstWeekContainsDate)??1,m=(t==null?void 0:t.weekStartsOn)??((ne=(K=t==null?void 0:t.locale)==null?void 0:K.options)==null?void 0:ne.weekStartsOn)??s.weekStartsOn??((ye=(ee=s.locale)==null?void 0:ee.options)==null?void 0:ye.weekStartsOn)??0,v=Li(r);if(!AT(v))throw new RangeError("Invalid time value");let E=e.match(I1).map(he=>{const ve=he[0];if(ve==="p"||ve==="P"){const Be=p1[ve];return Be(he,a.formatLong)}return he}).join("").match(x1).map(he=>{if(he==="''")return{isToken:!1,value:"'"};const ve=he[0];if(ve==="'")return{isToken:!1,value:b1(he)};if(Jg[ve])return{isToken:!0,value:he};if(ve.match(C1))throw new RangeError("Format string contains an unescaped latin alphabet character `"+ve+"`");return{isToken:!1,value:he}});a.localize.preprocessor&&(E=a.localize.preprocessor(v,E));const x={firstWeekContainsDate:c,weekStartsOn:m,locale:a};return E.map(he=>{if(!he.isToken)return he.value;const ve=he.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&w1(ve)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&v1(ve))&&E1(ve,e,String(r));const Be=Jg[ve[0]];return Be(v,ve,a.localize,x)}).join("")}function b1(r){const e=r.match(S1);return e?e[1].replace(P1,"'"):r}const k1={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},A1=(r,e,t)=>{let s;const a=k1[r];return typeof a=="string"?s=a:e===1?s=a.one:s=a.other.replace("{{count}}",String(e)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"dans "+s:"il y a "+s:s},R1={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},N1={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},L1={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},M1={date:El({formats:R1,defaultWidth:"full"}),time:El({formats:N1,defaultWidth:"full"}),dateTime:El({formats:L1,defaultWidth:"full"})},D1={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},O1=(r,e,t,s)=>D1[r],V1={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},z1={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},F1={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},j1={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},B1={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},U1=(r,e)=>{const t=Number(r),s=e==null?void 0:e.unit;if(t===0)return"0";const a=["year","week","hour","minute","second"];let c;return t===1?c=s&&a.includes(s)?"re":"er":c="me",t+c},W1=["MMM","MMMM"],H1={preprocessor:(r,e)=>r.getDate()===1||!e.some(s=>s.isToken&&W1.includes(s.value))?e:e.map(s=>s.isToken&&s.value==="do"?{isToken:!0,value:"d"}:s),ordinalNumber:U1,era:ts({values:V1,defaultWidth:"wide"}),quarter:ts({values:z1,defaultWidth:"wide",argumentCallback:r=>r-1}),month:ts({values:F1,defaultWidth:"wide"}),day:ts({values:j1,defaultWidth:"wide"}),dayPeriod:ts({values:B1,defaultWidth:"wide"})},q1=/^(\d+)(ime|re|me|er|e)?/i,$1=/\d+/i,G1={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},Z1={any:[/^av/i,/^ap/i]},K1={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},Q1={any:[/1/i,/2/i,/3/i,/4/i]},Y1={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},X1={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},J1={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},ex={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},tx={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},nx={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},rx={ordinalNumber:Fy({matchPattern:q1,parsePattern:$1,valueCallback:r=>parseInt(r)}),era:ns({matchPatterns:G1,defaultMatchWidth:"wide",parsePatterns:Z1,defaultParseWidth:"any"}),quarter:ns({matchPatterns:K1,defaultMatchWidth:"wide",parsePatterns:Q1,defaultParseWidth:"any",valueCallback:r=>r+1}),month:ns({matchPatterns:Y1,defaultMatchWidth:"wide",parsePatterns:X1,defaultParseWidth:"any"}),day:ns({matchPatterns:J1,defaultMatchWidth:"wide",parsePatterns:ex,defaultParseWidth:"any"}),dayPeriod:ns({matchPatterns:tx,defaultMatchWidth:"any",parsePatterns:nx,defaultParseWidth:"any"})},Df={code:"fr",formatDistance:A1,formatLong:M1,formatRelative:O1,localize:H1,match:rx,options:{weekStartsOn:1,firstWeekContainsDate:4}};function ix({report:r,onClose:e,onStatusChange:t,onValidate:s,isAdmin:a=!1}){var P,I,k;const c=H=>{switch(H){case"nouveau":return A.jsx(My,{className:"text-white",size:20});case"en_cours":return A.jsx(GE,{className:"text-white",size:20});case"resolu":return A.jsx(Dy,{className:"text-white",size:20})}},m=H=>{switch(H){case"nouveau":return"Nouveau";case"en_cours":return"En cours de traitement";case"resolu":return"Rsolu"}},v=H=>{switch(H){case"nouveau":return"bg-gradient-to-br from-red-500 to-red-600 border-white text-white shadow-xl ring-4 ring-red-400";case"en_cours":return"bg-gradient-to-br from-orange-500 to-orange-600 border-white text-white shadow-xl ring-4 ring-orange-400";case"resolu":return"bg-gradient-to-br from-green-500 to-green-600 border-white text-white shadow-xl ring-4 ring-green-400"}},E=H=>H.charAt(0).toUpperCase()+H.slice(1),x=H=>({mobilier:"Mobilier urbain",signalisation:"Signalisation",mobilite:"Mobilit",autre:"Autre"})[H]||H;return A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end md:items-center md:justify-center z-50",children:A.jsxs("div",{className:"bg-white rounded-t-3xl md:rounded-2xl w-full md:max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl",children:[A.jsxs("div",{className:"sticky top-0 bg-white border-b p-4 flex items-center justify-between",children:[A.jsx("h2",{className:"text-xl font-bold",children:"Dtails du signalement"}),A.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:A.jsx(Oh,{size:24})})]}),A.jsxs("div",{className:"p-4 space-y-4",children:[A.jsxs("div",{className:"relative",children:[A.jsx("img",{src:r.photo,alt:r.description,className:"w-full h-64 object-cover rounded-lg"}),A.jsxs("div",{className:`absolute top-3 right-3 px-3 py-2 rounded-lg border-2 font-medium flex items-center gap-2 ${v(r.status)}`,children:[c(r.status),m(r.status)]})]}),A.jsx("div",{children:A.jsx("h3",{className:"font-semibold text-lg mb-2",children:r.description})}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[A.jsx(Dh,{size:20,className:"text-gray-600 flex-shrink-0 mt-0.5"}),A.jsxs("div",{children:[A.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Localisation"}),A.jsx("div",{className:"text-sm text-gray-600",children:r.location.address}),A.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[r.location.lat.toFixed(6),", ",r.location.lng.toFixed(6)]})]})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[A.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[A.jsx(Ly,{size:20,className:"text-gray-600 flex-shrink-0 mt-0.5"}),A.jsxs("div",{children:[A.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Date"}),A.jsx("div",{className:"text-sm text-gray-600",children:Mf(new Date(r.date),"dd MMMM yyyy",{locale:Df})}),A.jsx("div",{className:"text-xs text-gray-500",children:Mf(new Date(r.date),"HH:mm",{locale:Df})})]})]}),A.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[A.jsx(hm,{size:20,className:"text-gray-600 flex-shrink-0 mt-0.5"}),A.jsxs("div",{children:[A.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Signal par"}),A.jsx("div",{className:"text-sm text-gray-600",children:r.reportedBy})]})]})]}),A.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.mode==="probleme"&&A.jsxs("span",{className:"px-3 py-2 bg-red-50 text-red-700 rounded-lg text-sm font-medium border-2 border-red-300",children:[" Problme: ",r.type&&E(r.type)]}),r.mode==="mobilier"&&A.jsx("span",{className:"px-3 py-2 bg-green-50 text-green-700 rounded-lg text-sm font-medium border-2 border-green-300",children:" Mobilier OK"}),r.mode==="suggestion"&&A.jsx("span",{className:"px-3 py-2 bg-indigo-50 text-indigo-700 rounded-lg text-sm font-medium border-2 border-indigo-300",children:" Suggestion"}),A.jsx("span",{className:"px-3 py-2 bg-purple-50 text-purple-700 rounded-lg text-sm font-medium border-2 border-purple-300",children:x(r.category)})]}),r.mode==="mobilier"&&r.validations!==void 0&&A.jsx("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border-2 border-green-200",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center shadow-lg",children:A.jsx(wf,{className:"text-white",size:24})}),A.jsxs("div",{children:[A.jsxs("div",{className:"text-lg font-bold text-green-800",children:[r.validations," validation",r.validations>1?"s":""]}),A.jsx("div",{className:"text-sm text-green-600",children:r.validations>=10?"Ce mobilier est certifi par la communaut !":`${10-r.validations} validation${10-r.validations>1?"s":""} pour tre certifi`})]})]})})]}),!a&&s&&r.mode==="mobilier"&&A.jsxs("div",{className:"pt-4 border-t",children:[A.jsxs("button",{onClick:()=>s(r.id),disabled:(P=r.validatedBy)==null?void 0:P.includes("current-user"),className:`w-full py-4 px-4 rounded-lg font-bold transition-all flex items-center justify-center gap-3 ${(I=r.validatedBy)!=null&&I.includes("current-user")?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700 shadow-lg hover:shadow-xl"}`,children:[A.jsx(wf,{size:24}),A.jsx("span",{className:"text-lg",children:(k=r.validatedBy)!=null&&k.includes("current-user")?"Dj valid ":"Valider ce mobilier (+5 points)"})]}),A.jsx("p",{className:"text-xs text-center text-gray-500 mt-2",children:"Confirmez que ce mobilier existe bien et est en bon tat"})]}),a&&t&&A.jsxs("div",{className:"pt-4 border-t",children:[A.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Changer le statut"}),A.jsx("div",{className:"grid grid-cols-3 gap-2",children:["nouveau","en_cours","resolu"].map(H=>A.jsxs("button",{onClick:()=>t(r.id,H),className:`py-3 px-4 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${r.status===H?v(H)+" ring-2 ring-offset-2 ring-blue-500":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[c(H),A.jsx("span",{className:"text-sm",children:m(H)})]},H))})]}),a&&s&&A.jsxs("div",{className:"pt-4 border-t",children:[A.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Valider le signalement"}),A.jsxs("button",{onClick:()=>s(r.id),className:"py-3 px-4 rounded-lg font-medium transition-all flex items-center justify-center gap-2 bg-gray-100 text-gray-600 hover:bg-gray-200",children:[A.jsx(wf,{size:20}),A.jsx("span",{className:"text-sm",children:"Valider"})]})]})]})]})})}function sx({reports:r,onReportClick:e,onStatusChange:t,onValidate:s}){const[a,c]=Je.useState("tous"),[m,v]=Je.useState("tous"),[E,x]=Je.useState("tous"),P=r.filter(K=>{const ne=a==="tous"||K.status===a,ee=m==="tous"||K.category===m,ye=E==="tous"||K.mode===E;return ne&&ee&&ye}),I=K=>{switch(K){case"nouveau":return"bg-gradient-to-br from-red-500 to-red-600 text-white shadow-lg border-2 border-white ring-2 ring-red-400";case"en_cours":return"bg-gradient-to-br from-orange-500 to-orange-600 text-white shadow-lg border-2 border-white ring-2 ring-orange-400";case"resolu":return"bg-gradient-to-br from-green-500 to-green-600 text-white shadow-lg border-2 border-white ring-2 ring-green-400"}},k=K=>{switch(K){case"nouveau":return"Nouveau";case"en_cours":return"En cours";case"resolu":return"Rsolu"}},H={nouveau:r.filter(K=>K.status==="nouveau").length,en_cours:r.filter(K=>K.status==="en_cours").length,resolu:r.filter(K=>K.status==="resolu").length,total:r.length};return A.jsxs("div",{className:"bg-white rounded-t-3xl shadow-lg h-full flex flex-col",children:[A.jsxs("div",{className:"p-4 border-b",children:[A.jsx("h2",{className:"text-xl font-bold mb-4",children:"Tableau de bord - Agent"}),A.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[A.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 text-center",children:[A.jsx("div",{className:"text-lg font-bold",children:H.total}),A.jsx("div",{className:"text-xs text-gray-600",children:"Total"})]}),A.jsxs("div",{className:"bg-red-50 rounded-lg p-2 text-center",children:[A.jsx("div",{className:"text-lg font-bold text-red-700",children:H.nouveau}),A.jsx("div",{className:"text-xs text-red-600",children:"Nouveaux"})]}),A.jsxs("div",{className:"bg-orange-50 rounded-lg p-2 text-center",children:[A.jsx("div",{className:"text-lg font-bold text-orange-700",children:H.en_cours}),A.jsx("div",{className:"text-xs text-orange-600",children:"En cours"})]}),A.jsxs("div",{className:"bg-green-50 rounded-lg p-2 text-center",children:[A.jsx("div",{className:"text-lg font-bold text-green-700",children:H.resolu}),A.jsx("div",{className:"text-xs text-green-600",children:"Rsolus"})]})]}),A.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[A.jsx(TE,{size:16,className:"text-gray-500"}),A.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtres:"})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[A.jsxs("select",{value:a,onChange:K=>c(K.target.value),className:"p-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[A.jsx("option",{value:"tous",children:"Tous les statuts"}),A.jsx("option",{value:"nouveau",children:"Nouveaux"}),A.jsx("option",{value:"en_cours",children:"En cours"}),A.jsx("option",{value:"resolu",children:"Rsolus"})]}),A.jsxs("select",{value:m,onChange:K=>v(K.target.value),className:"p-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[A.jsx("option",{value:"tous",children:"Toutes catgories"}),A.jsx("option",{value:"mobilier",children:"Mobilier urbain"}),A.jsx("option",{value:"signalisation",children:"Signalisation"}),A.jsx("option",{value:"mobilite",children:"Mobilit"}),A.jsx("option",{value:"autre",children:"Autre"})]}),A.jsxs("select",{value:E,onChange:K=>x(K.target.value),className:"p-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 col-span-2",children:[A.jsx("option",{value:"tous",children:"Tous les types"}),A.jsx("option",{value:"probleme",children:" Problmes uniquement"}),A.jsx("option",{value:"mobilier",children:" Mobiliers uniquement"}),A.jsx("option",{value:"suggestion",children:" Suggestions uniquement"})]})]})]}),A.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:P.length===0?A.jsxs("div",{className:"text-center py-8 text-gray-500",children:[A.jsx(My,{size:48,className:"mx-auto mb-2 opacity-50"}),A.jsx("p",{children:"Aucun signalement trouv"})]}):P.map(K=>A.jsxs("div",{onClick:()=>e(K),className:"bg-white border border-gray-200 rounded-lg p-3 hover:shadow-md transition-shadow cursor-pointer",children:[A.jsxs("div",{className:"flex gap-3",children:[A.jsx("img",{src:K.photo,alt:K.description,className:"w-20 h-20 object-cover rounded-lg flex-shrink-0"}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("div",{className:"flex items-start justify-between gap-2 mb-1",children:A.jsx("h3",{className:"font-semibold text-sm line-clamp-2",children:K.description})}),A.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-600 mb-2",children:[A.jsx(Dh,{size:12}),A.jsx("span",{className:"truncate",children:K.location.address})]}),A.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[A.jsx("span",{className:`px-2 py-1 rounded font-medium ${I(K.status)}`,children:k(K.status)}),A.jsx("span",{className:"px-2 py-1 rounded bg-gray-100 text-gray-700",children:K.category})]}),A.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx(Ly,{size:12}),Mf(new Date(K.date),"dd MMM yyyy",{locale:Df})]}),A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx(hm,{size:12}),K.reportedBy]})]})]})]}),A.jsx("div",{className:"mt-3 pt-3 border-t flex gap-2",children:["nouveau","en_cours","resolu"].map(ne=>A.jsx("button",{onClick:ee=>{ee.stopPropagation(),t(K.id,ne)},className:`flex-1 py-1.5 px-2 rounded text-xs font-medium transition-colors ${K.status===ne?I(ne)+" cursor-default":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,disabled:K.status===ne,children:k(ne)},ne))})]},K.id))})]})}function ox({isOpen:r,onClose:e,userName:t,userPhoto:s,points:a,globalRank:c,onLogout:m}){const v=E=>E>=1e3?"Lgende Urbaine":E>=500?"Expert Citoyen":E>=200?"Citoyen Actif":"Nouveau Citoyen";return A.jsxs(A.Fragment,{children:[A.jsx("div",{className:`fixed inset-0 bg-slate-900/40 backdrop-blur-[2px] z-[60] transition-opacity duration-300 ${r?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e}),A.jsxs("div",{className:`fixed top-0 right-0 h-full w-[85%] max-w-sm bg-white shadow-2xl z-[70] transform transition-transform duration-300 ease-in-out border-l border-slate-100 ${r?"translate-x-0":"translate-x-full"}`,children:[A.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 p-8 text-white relative",children:[A.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 hover:bg-white/10 rounded-full transition-colors",children:A.jsx(Oh,{size:24})}),A.jsxs("div",{className:"flex flex-col items-center",children:[A.jsxs("div",{className:"relative mb-4",children:[A.jsx("img",{src:s,alt:t,className:"w-24 h-24 rounded-full border-4 border-white/20 object-cover shadow-xl"}),A.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-500 px-2 py-1 rounded-lg flex items-center justify-center border-2 border-slate-800 shadow-lg",children:A.jsxs("span",{className:"text-[10px] font-black text-white italic",children:["LVL ",Math.floor(a/100)]})})]}),A.jsx("h2",{className:"text-xl font-bold",children:t}),A.jsxs("p",{className:"text-blue-300 text-xs font-bold uppercase tracking-[0.2em] mt-1",children:[" ",v(a)]})]})]}),A.jsxs("div",{className:"p-6 space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100",children:[A.jsxs("div",{className:"flex items-center gap-2 text-amber-600 mb-1",children:[A.jsx(HE,{size:16}),A.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Points"})]}),A.jsx("p",{className:"text-2xl font-black text-slate-800",children:a})]}),A.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100",children:[A.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[A.jsx(Oy,{size:16}),A.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Classement"})]}),A.jsxs("p",{className:"text-2xl font-black text-slate-800",children:["#",c||"--"]})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs("button",{className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 rounded-xl transition-colors group",children:[A.jsxs("div",{className:"flex items-center gap-3 text-slate-700",children:[A.jsx(FE,{className:"text-slate-400 group-hover:text-amber-500 transition-colors",size:20}),A.jsx("span",{className:"font-semibold",children:"Mes succs"})]}),A.jsx("span",{className:"bg-red-100 text-red-600 text-[10px] font-bold px-2 py-1 rounded-full italic",children:"Bientt"})]}),A.jsxs("button",{onClick:m,className:"w-full flex items-center gap-3 p-4 text-red-500 hover:bg-red-50 rounded-xl transition-colors mt-8 font-bold",children:[A.jsx(RE,{size:20}),"Dconnexion"]})]})]})]})]})}const ax=()=>{};var r_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let a=r.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},lx=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const a=r[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=r[t++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=r[t++],m=r[t++],v=r[t++],E=((a&7)<<18|(c&63)<<12|(m&63)<<6|v&63)-65536;e[s++]=String.fromCharCode(55296+(E>>10)),e[s++]=String.fromCharCode(56320+(E&1023))}else{const c=r[t++],m=r[t++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|m&63)}}return e.join("")},Wy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<r.length;a+=3){const c=r[a],m=a+1<r.length,v=m?r[a+1]:0,E=a+2<r.length,x=E?r[a+2]:0,P=c>>2,I=(c&3)<<4|v>>4;let k=(v&15)<<2|x>>6,H=x&63;E||(H=64,m||(k=64)),s.push(t[P],t[I],t[k],t[H])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Uy(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):lx(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<r.length;){const c=t[r.charAt(a++)],v=a<r.length?t[r.charAt(a)]:0;++a;const x=a<r.length?t[r.charAt(a)]:64;++a;const I=a<r.length?t[r.charAt(a)]:64;if(++a,c==null||v==null||x==null||I==null)throw new ux;const k=c<<2|v>>4;if(s.push(k),x!==64){const H=v<<4&240|x>>2;if(s.push(H),I!==64){const K=x<<6&192|I;s.push(K)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class ux extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cx=function(r){const e=Uy(r);return Wy.encodeByteArray(e,!0)},_h=function(r){return cx(r).replace(/\./g,"")},Hy=function(r){try{return Wy.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=()=>hx().__FIREBASE_DEFAULTS__,fx=()=>{if(typeof process>"u"||typeof r_>"u")return;const r=r_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},mx=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Hy(r[1]);return e&&JSON.parse(e)},zh=()=>{try{return ax()||dx()||fx()||mx()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},qy=r=>{var e,t;return(t=(e=zh())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},px=r=>{const e=qy(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},$y=()=>{var r;return(r=zh())==null?void 0:r.config},Gy=r=>{var e;return(e=zh())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Zy(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const m={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[_h(JSON.stringify(t)),_h(JSON.stringify(m)),""].join(".")}const Pu={};function yx(){const r={prod:[],emulator:[]};for(const e of Object.keys(Pu))Pu[e]?r.emulator.push(e):r.prod.push(e);return r}function vx(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let i_=!1;function Ky(r,e){if(typeof window>"u"||typeof document>"u"||!zl(window.location.host)||Pu[r]===e||Pu[r]||i_)return;Pu[r]=e;function t(k){return`__firebase__banner__${k}`}const s="__firebase__banner",c=yx().prod.length>0;function m(){const k=document.getElementById(s);k&&k.remove()}function v(k){k.style.display="flex",k.style.background="#7faaf0",k.style.position="fixed",k.style.bottom="5px",k.style.left="5px",k.style.padding=".5em",k.style.borderRadius="5px",k.style.alignItems="center"}function E(k,H){k.setAttribute("width","24"),k.setAttribute("id",H),k.setAttribute("height","24"),k.setAttribute("viewBox","0 0 24 24"),k.setAttribute("fill","none"),k.style.marginLeft="-6px"}function x(){const k=document.createElement("span");return k.style.cursor="pointer",k.style.marginLeft="16px",k.style.fontSize="24px",k.innerHTML=" &times;",k.onclick=()=>{i_=!0,m()},k}function P(k,H){k.setAttribute("id",H),k.innerText="Learn more",k.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",k.setAttribute("target","__blank"),k.style.paddingLeft="5px",k.style.textDecoration="underline"}function I(){const k=vx(s),H=t("text"),K=document.getElementById(H)||document.createElement("span"),ne=t("learnmore"),ee=document.getElementById(ne)||document.createElement("a"),ye=t("preprendIcon"),he=document.getElementById(ye)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(k.created){const ve=k.element;v(ve),P(ee,ne);const Be=x();E(he,ye),ve.append(he,K,ee,Be),document.body.appendChild(ve)}c?(K.innerText="Preview backend disconnected.",he.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(he.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",H)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qn())}function Ex(){var e;const r=(e=zh())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Tx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xx(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Ix(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Sx(){const r=qn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Px(){return!Ex()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Cx(){try{return typeof indexedDB=="object"}catch{return!1}}function bx(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var c;e(((c=a.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="FirebaseError";class Gs extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=kx,Object.setPrototypeOf(this,Gs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wu.prototype.create)}}class Wu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,c=this.errors[e],m=c?Ax(c,s):"Error",v=`${this.serviceName}: ${m} (${a}).`;return new Gs(a,v,s)}}function Ax(r,e){return r.replace(Rx,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const Rx=/\{\$([^}]+)}/g;function Nx(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Na(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const c=r[a],m=e[a];if(s_(c)&&s_(m)){if(!Na(c,m))return!1}else if(c!==m)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function s_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Lx(r,e){const t=new Mx(r,e);return t.subscribe.bind(t)}class Mx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");Dx(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=Ef),a.error===void 0&&(a.error=Ef),a.complete===void 0&&(a.complete=Ef);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Dx(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Ef(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(r){return r&&r._delegate?r._delegate:r}class La{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new gx;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zx(e))try{this.getOrInitializeService({instanceIdentifier:Pa})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=Pa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pa){return this.instances.has(e)}getOptions(e=Pa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,m]of this.instancesDeferred.entries()){const v=this.normalizeInstanceIdentifier(c);s===v&&m.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&e(c,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Vx(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Pa){return this.component?this.component.multipleInstances?e:Pa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Vx(r){return r===Pa?void 0:r}function zx(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ox(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(it||(it={}));const jx={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},Bx=it.INFO,Ux={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},Wx=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),a=Ux[e];if(a)console[a](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dm{constructor(e){this.name=e,this._logLevel=Bx,this._logHandler=Wx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}const Hx=(r,e)=>e.some(t=>r instanceof t);let o_,a_;function qx(){return o_||(o_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $x(){return a_||(a_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Qy=new WeakMap,Of=new WeakMap,Yy=new WeakMap,Tf=new WeakMap,fm=new WeakMap;function Gx(r){const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("success",c),r.removeEventListener("error",m)},c=()=>{t(Vo(r.result)),a()},m=()=>{s(r.error),a()};r.addEventListener("success",c),r.addEventListener("error",m)});return e.then(t=>{t instanceof IDBCursor&&Qy.set(t,r)}).catch(()=>{}),fm.set(e,r),e}function Zx(r){if(Of.has(r))return;const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",m),r.removeEventListener("abort",m)},c=()=>{t(),a()},m=()=>{s(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",c),r.addEventListener("error",m),r.addEventListener("abort",m)});Of.set(r,e)}let Vf={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Of.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Yy.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Vo(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Kx(r){Vf=r(Vf)}function Qx(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(xf(this),e,...t);return Yy.set(s,e.sort?e.sort():[e]),Vo(s)}:$x().includes(r)?function(...e){return r.apply(xf(this),e),Vo(Qy.get(this))}:function(...e){return Vo(r.apply(xf(this),e))}}function Yx(r){return typeof r=="function"?Qx(r):(r instanceof IDBTransaction&&Zx(r),Hx(r,qx())?new Proxy(r,Vf):r)}function Vo(r){if(r instanceof IDBRequest)return Gx(r);if(Tf.has(r))return Tf.get(r);const e=Yx(r);return e!==r&&(Tf.set(r,e),fm.set(e,r)),e}const xf=r=>fm.get(r);function Xx(r,e,{blocked:t,upgrade:s,blocking:a,terminated:c}={}){const m=indexedDB.open(r,e),v=Vo(m);return s&&m.addEventListener("upgradeneeded",E=>{s(Vo(m.result),E.oldVersion,E.newVersion,Vo(m.transaction),E)}),t&&m.addEventListener("blocked",E=>t(E.oldVersion,E.newVersion,E)),v.then(E=>{c&&E.addEventListener("close",()=>c()),a&&E.addEventListener("versionchange",x=>a(x.oldVersion,x.newVersion,x))}).catch(()=>{}),v}const Jx=["get","getKey","getAll","getAllKeys","count"],eI=["put","add","delete","clear"],If=new Map;function l_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(If.get(e))return If.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=eI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||Jx.includes(t)))return;const c=async function(m,...v){const E=this.transaction(m,a?"readwrite":"readonly");let x=E.store;return s&&(x=x.index(v.shift())),(await Promise.all([x[t](...v),a&&E.done]))[0]};return If.set(e,c),c}Kx(r=>({...r,get:(e,t,s)=>l_(e,t)||r.get(e,t,s),has:(e,t)=>!!l_(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(nI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function nI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zf="@firebase/app",u_="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new dm("@firebase/app"),rI="@firebase/app-compat",iI="@firebase/analytics-compat",sI="@firebase/analytics",oI="@firebase/app-check-compat",aI="@firebase/app-check",lI="@firebase/auth",uI="@firebase/auth-compat",cI="@firebase/database",hI="@firebase/data-connect",dI="@firebase/database-compat",fI="@firebase/functions",mI="@firebase/functions-compat",pI="@firebase/installations",gI="@firebase/installations-compat",_I="@firebase/messaging",yI="@firebase/messaging-compat",vI="@firebase/performance",wI="@firebase/performance-compat",EI="@firebase/remote-config",TI="@firebase/remote-config-compat",xI="@firebase/storage",II="@firebase/storage-compat",SI="@firebase/firestore",PI="@firebase/ai",CI="@firebase/firestore-compat",bI="firebase",kI="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="[DEFAULT]",AI={[zf]:"fire-core",[rI]:"fire-core-compat",[sI]:"fire-analytics",[iI]:"fire-analytics-compat",[aI]:"fire-app-check",[oI]:"fire-app-check-compat",[lI]:"fire-auth",[uI]:"fire-auth-compat",[cI]:"fire-rtdb",[hI]:"fire-data-connect",[dI]:"fire-rtdb-compat",[fI]:"fire-fn",[mI]:"fire-fn-compat",[pI]:"fire-iid",[gI]:"fire-iid-compat",[_I]:"fire-fcm",[yI]:"fire-fcm-compat",[vI]:"fire-perf",[wI]:"fire-perf-compat",[EI]:"fire-rc",[TI]:"fire-rc-compat",[xI]:"fire-gcs",[II]:"fire-gcs-compat",[SI]:"fire-fst",[CI]:"fire-fst-compat",[PI]:"fire-vertex","fire-js":"fire-js",[bI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=new Map,RI=new Map,jf=new Map;function c_(r,e){try{r.container.addComponent(e)}catch(t){Ws.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function bl(r){const e=r.name;if(jf.has(e))return Ws.debug(`There were multiple attempts to register component ${e}.`),!1;jf.set(e,r);for(const t of yh.values())c_(t,r);for(const t of RI.values())c_(t,r);return!0}function mm(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function bi(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zo=new Wu("app","Firebase",NI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new La("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=kI;function Xy(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Ff,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw zo.create("bad-app-name",{appName:String(a)});if(t||(t=$y()),!t)throw zo.create("no-options");const c=yh.get(a);if(c){if(Na(t,c.options)&&Na(s,c.config))return c;throw zo.create("duplicate-app",{appName:a})}const m=new Fx(a);for(const E of jf.values())m.addComponent(E);const v=new LI(t,s,m);return yh.set(a,v),v}function Jy(r=Ff){const e=yh.get(r);if(!e&&r===Ff&&$y())return Xy();if(!e)throw zo.create("no-app",{appName:r});return e}function Fo(r,e,t){let s=AI[r]??r;t&&(s+=`-${t}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const m=[`Unable to register library "${s}" with version "${e}":`];a&&m.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&m.push("and"),c&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ws.warn(m.join(" "));return}bl(new La(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="firebase-heartbeat-database",DI=1,Lu="firebase-heartbeat-store";let Sf=null;function ev(){return Sf||(Sf=Xx(MI,DI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Lu)}catch(t){console.warn(t)}}}}).catch(r=>{throw zo.create("idb-open",{originalErrorMessage:r.message})})),Sf}async function OI(r){try{const t=(await ev()).transaction(Lu),s=await t.objectStore(Lu).get(tv(r));return await t.done,s}catch(e){if(e instanceof Gs)Ws.warn(e.message);else{const t=zo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ws.warn(t.message)}}}async function h_(r,e){try{const s=(await ev()).transaction(Lu,"readwrite");await s.objectStore(Lu).put(e,tv(r)),await s.done}catch(t){if(t instanceof Gs)Ws.warn(t.message);else{const s=zo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ws.warn(s.message)}}}function tv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=1024,zI=30;class FI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new BI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=d_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(m=>m.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>zI){const m=UI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(m,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ws.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=d_(),{heartbeatsToSend:s,unsentEntries:a}=jI(this._heartbeatsCache.heartbeats),c=_h(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Ws.warn(t),""}}}function d_(){return new Date().toISOString().substring(0,10)}function jI(r,e=VI){const t=[];let s=r.slice();for(const a of r){const c=t.find(m=>m.agent===a.agent);if(c){if(c.dates.push(a.date),f_(t)>e){c.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),f_(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class BI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Cx()?bx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await OI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return h_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return h_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function f_(r){return _h(JSON.stringify({version:2,heartbeats:r})).length}function UI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(r){bl(new La("platform-logger",e=>new tI(e),"PRIVATE")),bl(new La("heartbeat",e=>new FI(e),"PRIVATE")),Fo(zf,u_,r),Fo(zf,u_,"esm2020"),Fo("fire-js","")}WI("");var HI="firebase",qI="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fo(HI,qI,"app");var m_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jo,nv;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,R){function D(){}D.prototype=R.prototype,j.F=R.prototype,j.prototype=new D,j.prototype.constructor=j,j.D=function(B,z,W){for(var M=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)M[Ye-2]=arguments[Ye];return R.prototype[z].apply(B,M)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(j,R,D){D||(D=0);const B=Array(16);if(typeof R=="string")for(var z=0;z<16;++z)B[z]=R.charCodeAt(D++)|R.charCodeAt(D++)<<8|R.charCodeAt(D++)<<16|R.charCodeAt(D++)<<24;else for(z=0;z<16;++z)B[z]=R[D++]|R[D++]<<8|R[D++]<<16|R[D++]<<24;R=j.g[0],D=j.g[1],z=j.g[2];let W=j.g[3],M;M=R+(W^D&(z^W))+B[0]+3614090360&4294967295,R=D+(M<<7&4294967295|M>>>25),M=W+(z^R&(D^z))+B[1]+3905402710&4294967295,W=R+(M<<12&4294967295|M>>>20),M=z+(D^W&(R^D))+B[2]+606105819&4294967295,z=W+(M<<17&4294967295|M>>>15),M=D+(R^z&(W^R))+B[3]+3250441966&4294967295,D=z+(M<<22&4294967295|M>>>10),M=R+(W^D&(z^W))+B[4]+4118548399&4294967295,R=D+(M<<7&4294967295|M>>>25),M=W+(z^R&(D^z))+B[5]+1200080426&4294967295,W=R+(M<<12&4294967295|M>>>20),M=z+(D^W&(R^D))+B[6]+2821735955&4294967295,z=W+(M<<17&4294967295|M>>>15),M=D+(R^z&(W^R))+B[7]+4249261313&4294967295,D=z+(M<<22&4294967295|M>>>10),M=R+(W^D&(z^W))+B[8]+1770035416&4294967295,R=D+(M<<7&4294967295|M>>>25),M=W+(z^R&(D^z))+B[9]+2336552879&4294967295,W=R+(M<<12&4294967295|M>>>20),M=z+(D^W&(R^D))+B[10]+4294925233&4294967295,z=W+(M<<17&4294967295|M>>>15),M=D+(R^z&(W^R))+B[11]+2304563134&4294967295,D=z+(M<<22&4294967295|M>>>10),M=R+(W^D&(z^W))+B[12]+1804603682&4294967295,R=D+(M<<7&4294967295|M>>>25),M=W+(z^R&(D^z))+B[13]+4254626195&4294967295,W=R+(M<<12&4294967295|M>>>20),M=z+(D^W&(R^D))+B[14]+2792965006&4294967295,z=W+(M<<17&4294967295|M>>>15),M=D+(R^z&(W^R))+B[15]+1236535329&4294967295,D=z+(M<<22&4294967295|M>>>10),M=R+(z^W&(D^z))+B[1]+4129170786&4294967295,R=D+(M<<5&4294967295|M>>>27),M=W+(D^z&(R^D))+B[6]+3225465664&4294967295,W=R+(M<<9&4294967295|M>>>23),M=z+(R^D&(W^R))+B[11]+643717713&4294967295,z=W+(M<<14&4294967295|M>>>18),M=D+(W^R&(z^W))+B[0]+3921069994&4294967295,D=z+(M<<20&4294967295|M>>>12),M=R+(z^W&(D^z))+B[5]+3593408605&4294967295,R=D+(M<<5&4294967295|M>>>27),M=W+(D^z&(R^D))+B[10]+38016083&4294967295,W=R+(M<<9&4294967295|M>>>23),M=z+(R^D&(W^R))+B[15]+3634488961&4294967295,z=W+(M<<14&4294967295|M>>>18),M=D+(W^R&(z^W))+B[4]+3889429448&4294967295,D=z+(M<<20&4294967295|M>>>12),M=R+(z^W&(D^z))+B[9]+568446438&4294967295,R=D+(M<<5&4294967295|M>>>27),M=W+(D^z&(R^D))+B[14]+3275163606&4294967295,W=R+(M<<9&4294967295|M>>>23),M=z+(R^D&(W^R))+B[3]+4107603335&4294967295,z=W+(M<<14&4294967295|M>>>18),M=D+(W^R&(z^W))+B[8]+1163531501&4294967295,D=z+(M<<20&4294967295|M>>>12),M=R+(z^W&(D^z))+B[13]+2850285829&4294967295,R=D+(M<<5&4294967295|M>>>27),M=W+(D^z&(R^D))+B[2]+4243563512&4294967295,W=R+(M<<9&4294967295|M>>>23),M=z+(R^D&(W^R))+B[7]+1735328473&4294967295,z=W+(M<<14&4294967295|M>>>18),M=D+(W^R&(z^W))+B[12]+2368359562&4294967295,D=z+(M<<20&4294967295|M>>>12),M=R+(D^z^W)+B[5]+4294588738&4294967295,R=D+(M<<4&4294967295|M>>>28),M=W+(R^D^z)+B[8]+2272392833&4294967295,W=R+(M<<11&4294967295|M>>>21),M=z+(W^R^D)+B[11]+1839030562&4294967295,z=W+(M<<16&4294967295|M>>>16),M=D+(z^W^R)+B[14]+4259657740&4294967295,D=z+(M<<23&4294967295|M>>>9),M=R+(D^z^W)+B[1]+2763975236&4294967295,R=D+(M<<4&4294967295|M>>>28),M=W+(R^D^z)+B[4]+1272893353&4294967295,W=R+(M<<11&4294967295|M>>>21),M=z+(W^R^D)+B[7]+4139469664&4294967295,z=W+(M<<16&4294967295|M>>>16),M=D+(z^W^R)+B[10]+3200236656&4294967295,D=z+(M<<23&4294967295|M>>>9),M=R+(D^z^W)+B[13]+681279174&4294967295,R=D+(M<<4&4294967295|M>>>28),M=W+(R^D^z)+B[0]+3936430074&4294967295,W=R+(M<<11&4294967295|M>>>21),M=z+(W^R^D)+B[3]+3572445317&4294967295,z=W+(M<<16&4294967295|M>>>16),M=D+(z^W^R)+B[6]+76029189&4294967295,D=z+(M<<23&4294967295|M>>>9),M=R+(D^z^W)+B[9]+3654602809&4294967295,R=D+(M<<4&4294967295|M>>>28),M=W+(R^D^z)+B[12]+3873151461&4294967295,W=R+(M<<11&4294967295|M>>>21),M=z+(W^R^D)+B[15]+530742520&4294967295,z=W+(M<<16&4294967295|M>>>16),M=D+(z^W^R)+B[2]+3299628645&4294967295,D=z+(M<<23&4294967295|M>>>9),M=R+(z^(D|~W))+B[0]+4096336452&4294967295,R=D+(M<<6&4294967295|M>>>26),M=W+(D^(R|~z))+B[7]+1126891415&4294967295,W=R+(M<<10&4294967295|M>>>22),M=z+(R^(W|~D))+B[14]+2878612391&4294967295,z=W+(M<<15&4294967295|M>>>17),M=D+(W^(z|~R))+B[5]+4237533241&4294967295,D=z+(M<<21&4294967295|M>>>11),M=R+(z^(D|~W))+B[12]+1700485571&4294967295,R=D+(M<<6&4294967295|M>>>26),M=W+(D^(R|~z))+B[3]+2399980690&4294967295,W=R+(M<<10&4294967295|M>>>22),M=z+(R^(W|~D))+B[10]+4293915773&4294967295,z=W+(M<<15&4294967295|M>>>17),M=D+(W^(z|~R))+B[1]+2240044497&4294967295,D=z+(M<<21&4294967295|M>>>11),M=R+(z^(D|~W))+B[8]+1873313359&4294967295,R=D+(M<<6&4294967295|M>>>26),M=W+(D^(R|~z))+B[15]+4264355552&4294967295,W=R+(M<<10&4294967295|M>>>22),M=z+(R^(W|~D))+B[6]+2734768916&4294967295,z=W+(M<<15&4294967295|M>>>17),M=D+(W^(z|~R))+B[13]+1309151649&4294967295,D=z+(M<<21&4294967295|M>>>11),M=R+(z^(D|~W))+B[4]+4149444226&4294967295,R=D+(M<<6&4294967295|M>>>26),M=W+(D^(R|~z))+B[11]+3174756917&4294967295,W=R+(M<<10&4294967295|M>>>22),M=z+(R^(W|~D))+B[2]+718787259&4294967295,z=W+(M<<15&4294967295|M>>>17),M=D+(W^(z|~R))+B[9]+3951481745&4294967295,j.g[0]=j.g[0]+R&4294967295,j.g[1]=j.g[1]+(z+(M<<21&4294967295|M>>>11))&4294967295,j.g[2]=j.g[2]+z&4294967295,j.g[3]=j.g[3]+W&4294967295}s.prototype.v=function(j,R){R===void 0&&(R=j.length);const D=R-this.blockSize,B=this.C;let z=this.h,W=0;for(;W<R;){if(z==0)for(;W<=D;)a(this,j,W),W+=this.blockSize;if(typeof j=="string"){for(;W<R;)if(B[z++]=j.charCodeAt(W++),z==this.blockSize){a(this,B),z=0;break}}else for(;W<R;)if(B[z++]=j[W++],z==this.blockSize){a(this,B),z=0;break}}this.h=z,this.o+=R},s.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var R=1;R<j.length-8;++R)j[R]=0;R=this.o*8;for(var D=j.length-8;D<j.length;++D)j[D]=R&255,R/=256;for(this.v(j),j=Array(16),R=0,D=0;D<4;++D)for(let B=0;B<32;B+=8)j[R++]=this.g[D]>>>B&255;return j};function c(j,R){var D=v;return Object.prototype.hasOwnProperty.call(D,j)?D[j]:D[j]=R(j)}function m(j,R){this.h=R;const D=[];let B=!0;for(let z=j.length-1;z>=0;z--){const W=j[z]|0;B&&W==R||(D[z]=W,B=!1)}this.g=D}var v={};function E(j){return-128<=j&&j<128?c(j,function(R){return new m([R|0],R<0?-1:0)}):new m([j|0],j<0?-1:0)}function x(j){if(isNaN(j)||!isFinite(j))return I;if(j<0)return ee(x(-j));const R=[];let D=1;for(let B=0;j>=D;B++)R[B]=j/D|0,D*=4294967296;return new m(R,0)}function P(j,R){if(j.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(j.charAt(0)=="-")return ee(P(j.substring(1),R));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=x(Math.pow(R,8));let B=I;for(let W=0;W<j.length;W+=8){var z=Math.min(8,j.length-W);const M=parseInt(j.substring(W,W+z),R);z<8?(z=x(Math.pow(R,z)),B=B.j(z).add(x(M))):(B=B.j(D),B=B.add(x(M)))}return B}var I=E(0),k=E(1),H=E(16777216);r=m.prototype,r.m=function(){if(ne(this))return-ee(this).m();let j=0,R=1;for(let D=0;D<this.g.length;D++){const B=this.i(D);j+=(B>=0?B:4294967296+B)*R,R*=4294967296}return j},r.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(K(this))return"0";if(ne(this))return"-"+ee(this).toString(j);const R=x(Math.pow(j,6));var D=this;let B="";for(;;){const z=Be(D,R).g;D=ye(D,z.j(R));let W=((D.g.length>0?D.g[0]:D.h)>>>0).toString(j);if(D=z,K(D))return W+B;for(;W.length<6;)W="0"+W;B=W+B}},r.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function K(j){if(j.h!=0)return!1;for(let R=0;R<j.g.length;R++)if(j.g[R]!=0)return!1;return!0}function ne(j){return j.h==-1}r.l=function(j){return j=ye(this,j),ne(j)?-1:K(j)?0:1};function ee(j){const R=j.g.length,D=[];for(let B=0;B<R;B++)D[B]=~j.g[B];return new m(D,~j.h).add(k)}r.abs=function(){return ne(this)?ee(this):this},r.add=function(j){const R=Math.max(this.g.length,j.g.length),D=[];let B=0;for(let z=0;z<=R;z++){let W=B+(this.i(z)&65535)+(j.i(z)&65535),M=(W>>>16)+(this.i(z)>>>16)+(j.i(z)>>>16);B=M>>>16,W&=65535,M&=65535,D[z]=M<<16|W}return new m(D,D[D.length-1]&-2147483648?-1:0)};function ye(j,R){return j.add(ee(R))}r.j=function(j){if(K(this)||K(j))return I;if(ne(this))return ne(j)?ee(this).j(ee(j)):ee(ee(this).j(j));if(ne(j))return ee(this.j(ee(j)));if(this.l(H)<0&&j.l(H)<0)return x(this.m()*j.m());const R=this.g.length+j.g.length,D=[];for(var B=0;B<2*R;B++)D[B]=0;for(B=0;B<this.g.length;B++)for(let z=0;z<j.g.length;z++){const W=this.i(B)>>>16,M=this.i(B)&65535,Ye=j.i(z)>>>16,lt=j.i(z)&65535;D[2*B+2*z]+=M*lt,he(D,2*B+2*z),D[2*B+2*z+1]+=W*lt,he(D,2*B+2*z+1),D[2*B+2*z+1]+=M*Ye,he(D,2*B+2*z+1),D[2*B+2*z+2]+=W*Ye,he(D,2*B+2*z+2)}for(j=0;j<R;j++)D[j]=D[2*j+1]<<16|D[2*j];for(j=R;j<2*R;j++)D[j]=0;return new m(D,0)};function he(j,R){for(;(j[R]&65535)!=j[R];)j[R+1]+=j[R]>>>16,j[R]&=65535,R++}function ve(j,R){this.g=j,this.h=R}function Be(j,R){if(K(R))throw Error("division by zero");if(K(j))return new ve(I,I);if(ne(j))return R=Be(ee(j),R),new ve(ee(R.g),ee(R.h));if(ne(R))return R=Be(j,ee(R)),new ve(ee(R.g),R.h);if(j.g.length>30){if(ne(j)||ne(R))throw Error("slowDivide_ only works with positive integers.");for(var D=k,B=R;B.l(j)<=0;)D=Ke(D),B=Ke(B);var z=Me(D,1),W=Me(B,1);for(B=Me(B,2),D=Me(D,2);!K(B);){var M=W.add(B);M.l(j)<=0&&(z=z.add(D),W=M),B=Me(B,1),D=Me(D,1)}return R=ye(j,z.j(R)),new ve(z,R)}for(z=I;j.l(R)>=0;){for(D=Math.max(1,Math.floor(j.m()/R.m())),B=Math.ceil(Math.log(D)/Math.LN2),B=B<=48?1:Math.pow(2,B-48),W=x(D),M=W.j(R);ne(M)||M.l(j)>0;)D-=B,W=x(D),M=W.j(R);K(W)&&(W=k),z=z.add(W),j=ye(j,M)}return new ve(z,j)}r.B=function(j){return Be(this,j).h},r.and=function(j){const R=Math.max(this.g.length,j.g.length),D=[];for(let B=0;B<R;B++)D[B]=this.i(B)&j.i(B);return new m(D,this.h&j.h)},r.or=function(j){const R=Math.max(this.g.length,j.g.length),D=[];for(let B=0;B<R;B++)D[B]=this.i(B)|j.i(B);return new m(D,this.h|j.h)},r.xor=function(j){const R=Math.max(this.g.length,j.g.length),D=[];for(let B=0;B<R;B++)D[B]=this.i(B)^j.i(B);return new m(D,this.h^j.h)};function Ke(j){const R=j.g.length+1,D=[];for(let B=0;B<R;B++)D[B]=j.i(B)<<1|j.i(B-1)>>>31;return new m(D,j.h)}function Me(j,R){const D=R>>5;R%=32;const B=j.g.length-D,z=[];for(let W=0;W<B;W++)z[W]=R>0?j.i(W+D)>>>R|j.i(W+D+1)<<32-R:j.i(W+D);return new m(z,j.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,nv=s,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.B,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=x,m.fromString=P,jo=m}).apply(typeof m_<"u"?m_:typeof self<"u"?self:typeof window<"u"?window:{});var Jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rv,Tu,iv,sh,Bf,sv,ov,av;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jc=="object"&&Jc];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var s=t(this);function a(h,y){if(y)e:{var T=s;h=h.split(".");for(var b=0;b<h.length-1;b++){var q=h[b];if(!(q in T))break e;T=T[q]}h=h[h.length-1],b=T[h],y=y(b),y!=b&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var T=[],b;for(b in y)Object.prototype.hasOwnProperty.call(y,b)&&T.push([b,y[b]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},m=this||self;function v(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function E(h,y,T){return h.call.apply(h.bind,arguments)}function x(h,y,T){return x=E,x.apply(null,arguments)}function P(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var b=T.slice();return b.push.apply(b,arguments),h.apply(this,b)}}function I(h,y){function T(){}T.prototype=y.prototype,h.Z=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(b,q,Q){for(var me=Array(arguments.length-2),je=2;je<arguments.length;je++)me[je-2]=arguments[je];return y.prototype[q].apply(b,me)}}var k=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function H(h){const y=h.length;if(y>0){const T=Array(y);for(let b=0;b<y;b++)T[b]=h[b];return T}return[]}function K(h,y){for(let b=1;b<arguments.length;b++){const q=arguments[b];var T=typeof q;if(T=T!="object"?T:q?Array.isArray(q)?"array":T:"null",T=="array"||T=="object"&&typeof q.length=="number"){T=h.length||0;const Q=q.length||0;h.length=T+Q;for(let me=0;me<Q;me++)h[T+me]=q[me]}else h.push(q)}}class ne{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function ee(h){m.setTimeout(()=>{throw h},0)}function ye(){var h=j;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class he{constructor(){this.h=this.g=null}add(y,T){const b=ve.get();b.set(y,T),this.h?this.h.next=b:this.g=b,this.h=b}}var ve=new ne(()=>new Be,h=>h.reset());class Be{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Ke,Me=!1,j=new he,R=()=>{const h=Promise.resolve(void 0);Ke=()=>{h.then(D)}};function D(){for(var h;h=ye();){try{h.h.call(h.g)}catch(T){ee(T)}var y=ve;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}Me=!1}function B(){this.u=this.u,this.C=this.C}B.prototype.u=!1,B.prototype.dispose=function(){this.u||(this.u=!0,this.N())},B.prototype[Symbol.dispose]=function(){this.dispose()},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var W=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};m.addEventListener("test",T,y),m.removeEventListener("test",T,y)}catch{}return h})();function M(h){return/^[\s\xa0]*$/.test(h)}function Ye(h,y){z.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}I(Ye,z),Ye.prototype.init=function(h,y){const T=this.type=h.type,b=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ye.Z.h.call(this)},Ye.prototype.h=function(){Ye.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var lt="closure_listenable_"+(Math.random()*1e6|0),fe=0;function Ne(h,y,T,b,q){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!b,this.ha=q,this.key=++fe,this.da=this.fa=!1}function te(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function _e(h,y,T){for(const b in h)y.call(T,h[b],b,h)}function re(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function O(h){const y={};for(const T in h)y[T]=h[T];return y}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(h,y){let T,b;for(let q=1;q<arguments.length;q++){b=arguments[q];for(T in b)h[T]=b[T];for(let Q=0;Q<X.length;Q++)T=X[Q],Object.prototype.hasOwnProperty.call(b,T)&&(h[T]=b[T])}}function we(h){this.src=h,this.g={},this.h=0}we.prototype.add=function(h,y,T,b,q){const Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);const me=ce(h,y,b,q);return me>-1?(y=h[me],T||(y.fa=!1)):(y=new Ne(y,this.src,Q,!!b,q),y.fa=T,h.push(y)),y};function xe(h,y){const T=y.type;if(T in h.g){var b=h.g[T],q=Array.prototype.indexOf.call(b,y,void 0),Q;(Q=q>=0)&&Array.prototype.splice.call(b,q,1),Q&&(te(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function ce(h,y,T,b){for(let q=0;q<h.length;++q){const Q=h[q];if(!Q.da&&Q.listener==y&&Q.capture==!!T&&Q.ha==b)return q}return-1}var $e="closure_lm_"+(Math.random()*1e6|0),Ue={};function rt(h,y,T,b,q){if(Array.isArray(y)){for(let Q=0;Q<y.length;Q++)rt(h,y[Q],T,b,q);return null}return T=kr(T),h&&h[lt]?h.J(y,T,v(b)?!!b.capture:!1,q):Rt(h,y,T,!1,b,q)}function Rt(h,y,T,b,q,Q){if(!y)throw Error("Invalid event type");const me=v(q)?!!q.capture:!!q;let je=Hr(h);if(je||(h[$e]=je=new we(h)),T=je.add(y,T,b,me,Q),T.proxy)return T;if(b=Ur(),T.proxy=b,b.src=h,b.listener=T,h.addEventListener)W||(q=me),q===void 0&&(q=!1),h.addEventListener(y.toString(),b,q);else if(h.attachEvent)h.attachEvent(Wr(y.toString()),b);else if(h.addListener&&h.removeListener)h.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Ur(){function h(T){return y.call(h.src,h.listener,T)}const y=hs;return h}function sr(h,y,T,b,q){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)sr(h,y[Q],T,b,q);else b=v(b)?!!b.capture:!!b,T=kr(T),h&&h[lt]?(h=h.i,Q=String(y).toString(),Q in h.g&&(y=h.g[Q],T=ce(y,T,b,q),T>-1&&(te(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete h.g[Q],h.h--)))):h&&(h=Hr(h))&&(y=h.g[y.toString()],h=-1,y&&(h=ce(y,T,b,q)),(T=h>-1?y[h]:null)&&or(T))}function or(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[lt])xe(y.i,h);else{var T=h.type,b=h.proxy;y.removeEventListener?y.removeEventListener(T,b,h.capture):y.detachEvent?y.detachEvent(Wr(T),b):y.addListener&&y.removeListener&&y.removeListener(b),(T=Hr(y))?(xe(T,h),T.h==0&&(T.src=null,y[$e]=null)):te(h)}}}function Wr(h){return h in Ue?Ue[h]:Ue[h]="on"+h}function hs(h,y){if(h.da)h=!0;else{y=new Ye(y,this);const T=h.listener,b=h.ha||h.src;h.fa&&or(h),h=T.call(b,y)}return h}function Hr(h){return h=h[$e],h instanceof we?h:null}var _n="__closure_events_fn_"+(Math.random()*1e9>>>0);function kr(h){return typeof h=="function"?h:(h[_n]||(h[_n]=function(y){return h.handleEvent(y)}),h[_n])}function ft(){B.call(this),this.i=new we(this),this.M=this,this.G=null}I(ft,B),ft.prototype[lt]=!0,ft.prototype.removeEventListener=function(h,y,T,b){sr(this,h,y,T,b)};function St(h,y){var T,b=h.G;if(b)for(T=[];b;b=b.G)T.push(b);if(h=h.M,b=y.type||y,typeof y=="string")y=new z(y,h);else if(y instanceof z)y.target=y.target||h;else{var q=y;y=new z(b,h),pe(y,q)}q=!0;let Q,me;if(T)for(me=T.length-1;me>=0;me--)Q=y.g=T[me],q=yn(Q,b,!0,y)&&q;if(Q=y.g=h,q=yn(Q,b,!0,y)&&q,q=yn(Q,b,!1,y)&&q,T)for(me=0;me<T.length;me++)Q=y.g=T[me],q=yn(Q,b,!1,y)&&q}ft.prototype.N=function(){if(ft.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const T=h.g[y];for(let b=0;b<T.length;b++)te(T[b]);delete h.g[y],h.h--}}this.G=null},ft.prototype.J=function(h,y,T,b){return this.i.add(String(h),y,!1,T,b)},ft.prototype.K=function(h,y,T,b){return this.i.add(String(h),y,!0,T,b)};function yn(h,y,T,b){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let q=!0;for(let Q=0;Q<y.length;++Q){const me=y[Q];if(me&&!me.da&&me.capture==T){const je=me.listener,ct=me.ha||me.src;me.fa&&xe(h.i,me),q=je.call(ct,b)!==!1&&q}}return q&&!b.defaultPrevented}function Ut(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:m.setTimeout(h,y||0)}function $n(h){h.g=Ut(()=>{h.g=null,h.i&&(h.i=!1,$n(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Zs extends B{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:$n(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qr(h){B.call(this),this.h=h,this.g={}}I(qr,B);var ar=[];function gi(h){_e(h.g,function(y,T){this.g.hasOwnProperty(T)&&or(y)},h),h.g={}}qr.prototype.N=function(){qr.Z.N.call(this),gi(this)},qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lr=m.JSON.stringify,Mi=m.JSON.parse,vn=class{stringify(h){return m.JSON.stringify(h,void 0)}parse(h){return m.JSON.parse(h,void 0)}};function ur(){}function Ar(){}var Rr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $r(){z.call(this,"d")}I($r,z);function _i(){z.call(this,"c")}I(_i,z);var Rn={},cr=null;function hr(){return cr=cr||new ft}Rn.Ia="serverreachability";function wn(h){z.call(this,Rn.Ia,h)}I(wn,z);function dr(h){const y=hr();St(y,new wn(y))}Rn.STAT_EVENT="statevent";function fr(h,y){z.call(this,Rn.STAT_EVENT,h),this.stat=y}I(fr,z);function Tt(h){const y=hr();St(y,new fr(y,h))}Rn.Ja="timingevent";function Di(h,y){z.call(this,Rn.Ja,h),this.size=y}I(Di,z);function Fe(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){h()},y)}function wt(){this.g=!0}wt.prototype.ua=function(){this.g=!1};function Ot(h,y,T,b,q,Q){h.info(function(){if(h.g)if(Q){var me="",je=Q.split("&");for(let mt=0;mt<je.length;mt++){var ct=je[mt].split("=");if(ct.length>1){const zt=ct[0];ct=ct[1];const er=zt.split("_");me=er.length>=2&&er[1]=="type"?me+(zt+"="+ct+"&"):me+(zt+"=redacted&")}}}else me=null;else me=Q;return"XMLHTTP REQ ("+b+") [attempt "+q+"]: "+y+`
`+T+`
`+me})}function Yt(h,y,T,b,q,Q,me){h.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+q+"]: "+y+`
`+T+`
`+Q+" "+me})}function En(h,y,T,b){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Wt(h,T)+(b?" "+b:"")})}function Pt(h,y){h.info(function(){return"TIMEOUT: "+y})}wt.prototype.info=function(){};function Wt(h,y){if(!h.g)return y;if(!y)return null;try{const Q=JSON.parse(y);if(Q){for(h=0;h<Q.length;h++)if(Array.isArray(Q[h])){var T=Q[h];if(!(T.length<2)){var b=T[1];if(Array.isArray(b)&&!(b.length<1)){var q=b[0];if(q!="noop"&&q!="stop"&&q!="close")for(let me=1;me<b.length;me++)b[me]=""}}}}return lr(Q)}catch{return y}}var Gn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ht={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},cn;function Vt(){}I(Vt,ur),Vt.prototype.g=function(){return new XMLHttpRequest},cn=new Vt;function Ee(h){return encodeURIComponent(String(h))}function Oi(h){var y=1;h=h.split(":");const T=[];for(;y>0&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function Zn(h,y,T,b){this.j=h,this.i=y,this.l=T,this.S=b||1,this.V=new qr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Yo}function Yo(){this.i=null,this.g="",this.h=!1}var Xo={},ds={};function mr(h,y,T){h.M=1,h.A=gt(Tn(y)),h.u=T,h.R=!0,Gr(h,null)}function Gr(h,y){h.F=Date.now(),fs(h),h.B=Tn(h.A);var T=h.B,b=h.S;Array.isArray(b)||(b=[String(b)]),ws(T.i,"t",b),h.C=0,T=h.j.L,h.h=new Yo,h.g=oa(h.j,T?y:null,!h.u),h.P>0&&(h.O=new Zs(x(h.Y,h,h.g),h.P)),y=h.V,T=h.g,b=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(ar[0]=q.toString()),q=ar);for(let Q=0;Q<q.length;Q++){const me=rt(T,q[Q],b||y.handleEvent,!1,y.h||y);if(!me)break;y.g[me.key]=me}y=h.J?O(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),dr(),Ot(h.i,h.v,h.B,h.l,h.S,h.u)}Zn.prototype.ba=function(h){h=h.target;const y=this.O;y&&ei(h)==3?y.j():this.Y(h)},Zn.prototype.Y=function(h){try{if(h==this.g)e:{const je=ei(this.g),ct=this.g.ya(),mt=this.g.ca();if(!(je<3)&&(je!=3||this.g&&(this.h.h||this.g.la()||ra(this.g)))){this.K||je!=4||ct==7||(ct==8||mt<=0?dr(3):dr(2)),ms(this);var y=this.g.ca();this.X=y;var T=Jo(this);if(this.o=y==200,Yt(this.i,this.v,this.B,this.l,this.S,je,y),this.o){if(this.U&&!this.L){t:{if(this.g){var b,q=this.g;if((b=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(b)){var Q=b;break t}}Q=null}if(h=Q)En(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,It(this,h);else{this.o=!1,this.m=3,Tt(12),pr(this),ps(this);break e}}if(this.R){h=!0;let zt;for(;!this.K&&this.C<T.length;)if(zt=Ba(this,T),zt==ds){je==4&&(this.m=4,Tt(14),h=!1),En(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==Xo){this.m=4,Tt(15),En(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else En(this.i,this.l,zt,null),It(this,zt);if(ja(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),je!=4||T.length!=0||this.h.h||(this.m=1,Tt(16),h=!1),this.o=this.o&&h,!h)En(this.i,this.l,T,"[Invalid Chunked Response]"),pr(this),ps(this);else if(T.length>0&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.aa&&!me.P&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Ps(me),me.P=!0,Tt(11))}}else En(this.i,this.l,T,null),It(this,T);je==4&&pr(this),this.o&&!this.K&&(je==4?In(this.j,this):(this.o=!1,fs(this)))}else xs(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),pr(this),ps(this)}}}catch{}finally{}};function Jo(h){if(!ja(h))return h.g.la();const y=ra(h.g);if(y==="")return"";let T="";const b=y.length,q=ei(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return pr(h),ps(h),"";h.h.i=new m.TextDecoder}for(let Q=0;Q<b;Q++)h.h.h=!0,T+=h.h.i.decode(y[Q],{stream:!(q&&Q==b-1)});return y.length=0,h.h.g+=T,h.C=0,h.h.g}function ja(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ba(h,y){var T=h.C,b=y.indexOf(`
`,T);return b==-1?ds:(T=Number(y.substring(T,b)),isNaN(T)?Xo:(b+=1,b+T>y.length?ds:(y=y.slice(b,b+T),h.C=b+T,y)))}Zn.prototype.cancel=function(){this.K=!0,pr(this)};function fs(h){h.T=Date.now()+h.H,ea(h,h.H)}function ea(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Fe(x(h.aa,h),y)}function ms(h){h.D&&(m.clearTimeout(h.D),h.D=null)}Zn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Pt(this.i,this.B),this.M!=2&&(dr(),Tt(17)),pr(this),this.m=2,ps(this)):ea(this,this.T-h)};function ps(h){h.j.I==0||h.K||In(h.j,h)}function pr(h){ms(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,gi(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function It(h,y){try{var T=h.j;if(T.I!=0&&(T.g==h||_s(T.h,h))){if(!h.L&&_s(T.h,h)&&T.I==3){try{var b=T.Ba.g.parse(y)}catch{b=null}if(Array.isArray(b)&&b.length==3){var q=b;if(q[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)Xs(T),Xn(T);else break e;ni(T),Tt(18)}}else T.xa=q[1],0<T.xa-T.K&&q[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Fe(x(T.Va,T),6e3));gs(T.h)<=1&&T.ta&&(T.ta=void 0)}else Dn(T,11)}else if((h.L||T.g==h)&&Xs(T),!M(y))for(q=T.Ba.g.parse(y),y=0;y<q.length;y++){let mt=q[y];const zt=mt[0];if(!(zt<=T.K))if(T.K=zt,mt=mt[1],T.I==2)if(mt[0]=="c"){T.M=mt[1],T.ba=mt[2];const er=mt[3];er!=null&&(T.ka=er,T.j.info("VER="+T.ka));const Mr=mt[4];Mr!=null&&(T.za=Mr,T.j.info("SVER="+T.za));const vr=mt[5];vr!=null&&typeof vr=="number"&&vr>0&&(b=1.5*vr,T.O=b,T.j.info("backChannelRequestTimeoutMs_="+b)),b=T;const ii=h.g;if(ii){const ro=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ro){var Q=b.h;Q.g||ro.indexOf("spdy")==-1&&ro.indexOf("quic")==-1&&ro.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Zr(Q,Q.h),Q.h=null))}if(b.G){const io=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;io&&(b.wa=io,Ie(b.J,b.G,io))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),b=T;var me=h;if(b.na=eo(b,b.L?b.ba:null,b.W),me.L){Vi(b.h,me);var je=me,ct=b.O;ct&&(je.H=ct),je.D&&(ms(je),fs(je)),b.g=me}else sn(b);T.i.length>0&&Jn(T)}else mt[0]!="stop"&&mt[0]!="close"||Dn(T,7);else T.I==3&&(mt[0]=="stop"||mt[0]=="close"?mt[0]=="stop"?Dn(T,7):tt(T):mt[0]!="noop"&&T.l&&T.l.qa(mt),T.A=0)}}dr(4)}catch{}}var $l=class{constructor(h,y){this.g=h,this.map=y}};function Ks(h){this.l=h||10,m.PerformanceNavigationTiming?(h=m.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ta(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function gs(h){return h.h?1:h.g?h.g.size:0}function _s(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Zr(h,y){h.g?h.g.add(y):h.h=y}function Vi(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Ks.prototype.cancel=function(){if(this.i=Nn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Nn(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.G);return y}return H(h.i)}var zi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ge(h,y){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const b=h[T].indexOf("=");let q,Q=null;b>=0?(q=h[T].substring(0,b),Q=h[T].substring(b+1)):q=h[T],y(q,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function ut(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof ut?(this.l=h.l,gr(this,h.j),this.o=h.o,this.g=h.g,xn(this,h.u),this.h=h.h,Kr(this,ji(h.i)),this.m=h.m):h&&(y=String(h).match(zi))?(this.l=!1,gr(this,y[1]||"",!0),this.o=yi(y[2]||""),this.g=yi(y[3]||"",!0),xn(this,y[4]),this.h=yi(y[5]||"",!0),Kr(this,y[6]||"",!0),this.m=yi(y[7]||"")):(this.l=!1,this.i=new et(null,this.l))}ut.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Qr(y,na,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Qr(y,na,!0),"@"),h.push(Ee(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Qr(T,T.charAt(0)=="/"?Kn:Fi,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Qr(T,Nr)),h.join("")},ut.prototype.resolve=function(h){const y=Tn(this);let T=!!h.j;T?gr(y,h.j):T=!!h.o,T?y.o=h.o:T=!!h.g,T?y.g=h.g:T=h.u!=null;var b=h.h;if(T)xn(y,h.u);else if(T=!!h.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var q=y.h.lastIndexOf("/");q!=-1&&(b=y.h.slice(0,q+1)+b)}if(q=b,q==".."||q==".")b="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){b=q.lastIndexOf("/",0)==0,q=q.split("/");const Q=[];for(let me=0;me<q.length;){const je=q[me++];je=="."?b&&me==q.length&&Q.push(""):je==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),b&&me==q.length&&Q.push("")):(Q.push(je),b=!0)}b=Q.join("/")}else b=q}return T?y.h=b:T=h.i.toString()!=="",T?Kr(y,ji(h.i)):T=!!h.m,T&&(y.m=h.m),y};function Tn(h){return new ut(h)}function gr(h,y,T){h.j=T?yi(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function xn(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Kr(h,y,T){y instanceof et?(h.i=y,Bi(h.i,h.l)):(T||(y=Qr(y,Lt)),h.i=new et(y,h.l))}function Ie(h,y,T){h.i.set(y,T)}function gt(h){return Ie(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function yi(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Qr(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,hn),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function hn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var na=/[#\/\?@]/g,Fi=/[#\?:]/g,Kn=/[#\?]/g,Lt=/[#\?@]/g,Nr=/#/g;function et(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Ln(h){h.g||(h.g=new Map,h.h=0,h.i&&Ge(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}r=et.prototype,r.add=function(h,y){Ln(this),this.i=null,h=_r(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function ys(h,y){Ln(h),y=_r(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Yr(h,y){return Ln(h),y=_r(h,y),h.g.has(y)}r.forEach=function(h,y){Ln(this),this.g.forEach(function(T,b){T.forEach(function(q){h.call(y,q,b,this)},this)},this)};function vs(h,y){Ln(h);let T=[];if(typeof y=="string")Yr(h,y)&&(T=T.concat(h.g.get(_r(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)T=T.concat(h[y]);return T}r.set=function(h,y){return Ln(this),this.i=null,h=_r(this,h),Yr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=vs(this,h),h.length>0?String(h[0]):y):y};function ws(h,y,T){ys(h,y),T.length>0&&(h.i=null,h.g.set(_r(h,y),H(T)),h.h+=T.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let b=0;b<y.length;b++){var T=y[b];const q=Ee(T);T=vs(this,T);for(let Q=0;Q<T.length;Q++){let me=q;T[Q]!==""&&(me+="="+Ee(T[Q])),h.push(me)}}return this.i=h.join("&")};function ji(h){const y=new et;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function _r(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Bi(h,y){y&&!h.j&&(Ln(h),h.i=null,h.g.forEach(function(T,b){const q=b.toLowerCase();b!=q&&(ys(this,b),ws(this,q,T))},h)),h.j=y}function Qn(h,y){const T=new wt;if(m.Image){const b=new Image;b.onload=P(Zt,T,"TestLoadImage: loaded",!0,y,b),b.onerror=P(Zt,T,"TestLoadImage: error",!1,y,b),b.onabort=P(Zt,T,"TestLoadImage: abort",!1,y,b),b.ontimeout=P(Zt,T,"TestLoadImage: timeout",!1,y,b),m.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=h}else y(!1)}function Lr(h,y){const T=new wt,b=new AbortController,q=setTimeout(()=>{b.abort(),Zt(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:b.signal}).then(Q=>{clearTimeout(q),Q.ok?Zt(T,"TestPingServer: ok",!0,y):Zt(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),Zt(T,"TestPingServer: error",!1,y)})}function Zt(h,y,T,b,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),b(T)}catch{}}function Es(){this.g=new vn}function Oe(h){this.i=h.Sb||null,this.h=h.ab||!1}I(Oe,ur),Oe.prototype.g=function(){return new Mt(this.i,this.h)};function Mt(h,y){ft.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}I(Mt,ft),r=Mt.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Yn(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||m).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vi(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Yn(this)),this.g&&(this.readyState=3,Yn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_t(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function _t(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?vi(this):Yn(this),this.readyState==3&&_t(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,vi(this))},r.Na=function(h){this.g&&(this.response=h,vi(this))},r.ga=function(){this.g&&vi(this)};function vi(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Yn(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function Yn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Mt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Qs(h){let y="";return _e(h,function(T,b){y+=b,y+=":",y+=T,y+=`\r
`}),y}function Ui(h,y,T){e:{for(b in T){var b=!1;break e}b=!0}b||(T=Qs(T),typeof h=="string"?T!=null&&Ee(T):Ie(h,y,T))}function at(h){ft.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}I(at,ft);var Ys=/^https?$/i,Ts=["POST","PUT"];r=at.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,T,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():cn.g(),this.g.onreadystatechange=k(x(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Q){Ct(this,Q);return}if(h=T||"",T=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var q in b)T.set(q,b[q]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const Q of b.keys())T.set(Q,b.get(Q));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(T.keys()).find(Q=>Q.toLowerCase()=="content-type"),q=m.FormData&&h instanceof m.FormData,!(Array.prototype.indexOf.call(Ts,y,void 0)>=0)||b||q||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,me]of T)this.g.setRequestHeader(Q,me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Q){Ct(this,Q)}};function Ct(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Mn(h),Jr(h)}function Mn(h){h.A||(h.A=!0,St(h,"complete"),St(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,St(this,"complete"),St(this,"abort"),Jr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jr(this,!0)),at.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Xr(this):this.Xa())},r.Xa=function(){Xr(this)};function Xr(h){if(h.h&&typeof c<"u"){if(h.v&&ei(h)==4)setTimeout(h.Ca.bind(h),0);else if(St(h,"readystatechange"),ei(h)==4){h.h=!1;try{const Q=h.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var b;if(b=Q===0){let me=String(h.D).match(zi)[1]||null;!me&&m.self&&m.self.location&&(me=m.self.location.protocol.slice(0,-1)),b=!Ys.test(me?me.toLowerCase():"")}T=b}if(T)St(h,"complete"),St(h,"success");else{h.o=6;try{var q=ei(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",Mn(h)}}finally{Jr(h)}}}}function Jr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,y||St(h,"ready");try{T.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ei(h){return h.g?h.g.readyState:0}r.ca=function(){try{return ei(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Mi(y)}};function ra(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function xs(h){const y={};h=(h.g&&ei(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<h.length;b++){if(M(h[b]))continue;var T=Oi(h[b]);const q=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Q=y[q]||[];y[q]=Q,Q.push(T)}re(y,function(b){return b.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ti(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function Is(h){this.za=0,this.i=[],this.j=new wt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ti("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ti("baseRetryDelayMs",5e3,h),this.Za=ti("retryDelaySeedMs",1e4,h),this.Ta=ti("forwardChannelMaxRetries",2,h),this.va=ti("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Ks(h&&h.concurrentRequestLimit),this.Ba=new Es,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Is.prototype,r.ka=8,r.I=1,r.connect=function(h,y,T,b){Tt(0),this.W=h,this.H=y||{},T&&b!==void 0&&(this.H.OSID=T,this.H.OAID=b),this.F=this.X,this.J=eo(this,null,this.W),Jn(this)};function tt(h){if(dn(h),h.I==3){var y=h.V++,T=Tn(h.J);if(Ie(T,"SID",h.M),Ie(T,"RID",y),Ie(T,"TYPE","terminate"),yr(h,T),y=new Zn(h,h.j,y),y.M=2,y.A=gt(Tn(T)),T=!1,m.navigator&&m.navigator.sendBeacon)try{T=m.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&m.Image&&(new Image().src=y.A,T=!0),T||(y.g=oa(y.j,null),y.g.ea(y.A)),y.F=Date.now(),fs(y)}On(h)}function Xn(h){h.g&&(Ps(h),h.g.cancel(),h.g=null)}function dn(h){Xn(h),h.v&&(m.clearTimeout(h.v),h.v=null),Xs(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&m.clearTimeout(h.m),h.m=null)}function Jn(h){if(!ta(h.h)&&!h.m){h.m=!0;var y=h.Ea;Ke||R(),Me||(Ke(),Me=!0),j.add(y,h),h.D=0}}function ia(h,y){return gs(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Fe(x(h.Ea,h,y),Js(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new Zn(this,this.j,h);let Q=this.o;if(this.U&&(Q?(Q=O(Q),pe(Q,this.U)):Q=this.U),this.u!==null||this.R||(q.J=Q,Q=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var b=this.i[T];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(y+=b,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=sa(this,q,y),T=Tn(this.J),Ie(T,"RID",h),Ie(T,"CVER",22),this.G&&Ie(T,"X-HTTP-Session-Id",this.G),yr(this,T),Q&&(this.R?y="headers="+Ee(Qs(Q))+"&"+y:this.u&&Ui(T,this.u,Q)),Zr(this.h,q),this.Ra&&Ie(T,"TYPE","init"),this.S?(Ie(T,"$req",y),Ie(T,"SID","null"),q.U=!0,mr(q,T,null)):mr(q,T,y),this.I=2}}else this.I==3&&(h?Ss(this,h):this.i.length==0||ta(this.h)||Ss(this))};function Ss(h,y){var T;y?T=y.l:T=h.V++;const b=Tn(h.J);Ie(b,"SID",h.M),Ie(b,"RID",T),Ie(b,"AID",h.K),yr(h,b),h.u&&h.o&&Ui(b,h.u,h.o),T=new Zn(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),y&&(h.i=y.G.concat(h.i)),y=sa(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Zr(h.h,T),mr(T,b,y)}function yr(h,y){h.H&&_e(h.H,function(T,b){Ie(y,b,T)}),h.l&&_e({},function(T,b){Ie(y,b,T)})}function sa(h,y,T){T=Math.min(h.i.length,T);const b=h.l?x(h.l.Ka,h.l,h):null;e:{var q=h.i;let je=-1;for(;;){const ct=["count="+T];je==-1?T>0?(je=q[0].g,ct.push("ofs="+je)):je=0:ct.push("ofs="+je);let mt=!0;for(let zt=0;zt<T;zt++){var Q=q[zt].g;const er=q[zt].map;if(Q-=je,Q<0)je=Math.max(0,q[zt].g-100),mt=!1;else try{Q="req"+Q+"_"||"";try{var me=er instanceof Map?er:Object.entries(er);for(const[Mr,vr]of me){let ii=vr;v(vr)&&(ii=lr(vr)),ct.push(Q+Mr+"="+encodeURIComponent(ii))}}catch(Mr){throw ct.push(Q+"type="+encodeURIComponent("_badmap")),Mr}}catch{b&&b(er)}}if(mt){me=ct.join("&");break e}}me=void 0}return h=h.i.splice(0,T),y.G=h,me}function sn(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;Ke||R(),Me||(Ke(),Me=!0),j.add(y,h),h.A=0}}function ni(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Fe(x(h.Da,h),Js(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,ri(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Fe(x(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),Xn(this),ri(this))};function Ps(h){h.B!=null&&(m.clearTimeout(h.B),h.B=null)}function ri(h){h.g=new Zn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Tn(h.na);Ie(y,"RID","rpc"),Ie(y,"SID",h.M),Ie(y,"AID",h.K),Ie(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ie(y,"TO",h.ia),Ie(y,"TYPE","xmlhttp"),yr(h,y),h.u&&h.o&&Ui(y,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=gt(Tn(y)),T.u=null,T.R=!0,Gr(T,h)}r.Va=function(){this.C!=null&&(this.C=null,Xn(this),ni(this),Tt(19))};function Xs(h){h.C!=null&&(m.clearTimeout(h.C),h.C=null)}function In(h,y){var T=null;if(h.g==y){Xs(h),Ps(h),h.g=null;var b=2}else if(_s(h.h,y))T=y.G,Vi(h.h,y),b=1;else return;if(h.I!=0){if(y.o)if(b==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var q=h.D;b=hr(),St(b,new Di(b,T)),Jn(h)}else sn(h);else if(q=y.m,q==3||q==0&&y.X>0||!(b==1&&ia(h,y)||b==2&&ni(h)))switch(T&&T.length>0&&(y=h.h,y.i=y.i.concat(T)),q){case 1:Dn(h,5);break;case 4:Dn(h,10);break;case 3:Dn(h,6);break;default:Dn(h,2)}}}function Js(h,y){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*y}function Dn(h,y){if(h.j.info("Error code "+y),y==2){var T=x(h.bb,h),b=h.Ua;const q=!b;b=new ut(b||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||gr(b,"https"),gt(b),q?Qn(b.toString(),T):Lr(b.toString(),T)}else Tt(2);h.I=0,h.l&&h.l.pa(y),On(h),dn(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function On(h){if(h.I=0,h.ja=[],h.l){const y=Nn(h.h);(y.length!=0||h.i.length!=0)&&(K(h.ja,y),K(h.ja,h.i),h.h.i.length=0,H(h.i),h.i.length=0),h.l.oa()}}function eo(h,y,T){var b=T instanceof ut?Tn(T):new ut(T);if(b.g!="")y&&(b.g=y+"."+b.g),xn(b,b.u);else{var q=m.location;b=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;const Q=new ut(null);b&&gr(Q,b),y&&(Q.g=y),q&&xn(Q,q),T&&(Q.h=T),b=Q}return T=h.G,y=h.wa,T&&y&&Ie(b,T,y),Ie(b,"VER",h.ka),yr(h,b),b}function oa(h,y,T){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new at(new Oe({ab:T})):new at(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function to(){}r=to.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function no(){}no.prototype.g=function(h,y){return new Xt(h,y)};function Xt(h,y){ft.call(this),this.g=new Is(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!M(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!M(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Wi(this)}I(Xt,ft),Xt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){tt(this.g)},Xt.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=lr(h),h=T);y.i.push(new $l(y.Ya++,h)),y.I==3&&Jn(y)},Xt.prototype.N=function(){this.g.l=null,delete this.j,tt(this.g),delete this.g,Xt.Z.N.call(this)};function aa(h){$r.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}I(aa,$r);function Ua(){_i.call(this),this.status=1}I(Ua,_i);function Wi(h){this.g=h}I(Wi,to),Wi.prototype.ra=function(){St(this.g,"a")},Wi.prototype.qa=function(h){St(this.g,new aa(h))},Wi.prototype.pa=function(h){St(this.g,new Ua)},Wi.prototype.oa=function(){St(this.g,"b")},no.prototype.createWebChannel=no.prototype.g,Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,av=function(){return new no},ov=function(){return hr()},sv=Rn,Bf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Gn.NO_ERROR=0,Gn.TIMEOUT=8,Gn.HTTP_ERROR=6,sh=Gn,Ht.COMPLETE="complete",iv=Ht,Ar.EventType=Rr,Rr.OPEN="a",Rr.CLOSE="b",Rr.ERROR="c",Rr.MESSAGE="d",ft.prototype.listen=ft.prototype.J,Tu=Ar,at.prototype.listenOnce=at.prototype.K,at.prototype.getLastError=at.prototype.Ha,at.prototype.getLastErrorCode=at.prototype.ya,at.prototype.getStatus=at.prototype.ca,at.prototype.getResponseJson=at.prototype.La,at.prototype.getResponseText=at.prototype.la,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Fa,rv=at}).apply(typeof Jc<"u"?Jc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wn.UNAUTHENTICATED=new Wn(null),Wn.GOOGLE_CREDENTIALS=new Wn("google-credentials-uid"),Wn.FIRST_PARTY=new Wn("first-party-uid"),Wn.MOCK_USER=new Wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jl="12.8.0";function $I(r){jl=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma=new dm("@firebase/firestore");function pl(){return Ma.logLevel}function Ce(r,...e){if(Ma.logLevel<=it.DEBUG){const t=e.map(pm);Ma.debug(`Firestore (${jl}): ${r}`,...t)}}function Hs(r,...e){if(Ma.logLevel<=it.ERROR){const t=e.map(pm);Ma.error(`Firestore (${jl}): ${r}`,...t)}}function kl(r,...e){if(Ma.logLevel<=it.WARN){const t=e.map(pm);Ma.warn(`Firestore (${jl}): ${r}`,...t)}}function pm(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,lv(r,s,t)}function lv(r,e,t){let s=`FIRESTORE (${jl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Hs(s),new Error(s)}function vt(r,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,r||lv(e,a,s)}function Qe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends Gs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Wn.UNAUTHENTICATED)))}shutdown(){}}class ZI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class KI{constructor(e){this.t=e,this.currentUser=Wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){vt(this.o===void 0,42304);let s=this.i;const a=E=>this.i!==s?(s=this.i,t(E)):Promise.resolve();let c=new Bo;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Bo,e.enqueueRetryable((()=>a(this.currentUser)))};const m=()=>{const E=c;e.enqueueRetryable((async()=>{await E.promise,await a(this.currentUser)}))},v=E=>{Ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.o&&(this.auth.addAuthTokenListener(this.o),m())};this.t.onInit((E=>v(E))),setTimeout((()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?v(E):(Ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Bo)}}),0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(vt(typeof s.accessToken=="string",31837,{l:s}),new uv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return vt(e===null||typeof e=="string",2055,{h:e}),new Wn(e)}}class QI{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Wn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class YI{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new QI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Wn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class p_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){vt(this.o===void 0,3512);const s=c=>{c.error!=null&&Ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const m=c.token!==this.m;return this.m=c.token,Ce("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const a=c=>{Ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):Ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new p_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(vt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new p_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=JI(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<t&&(s+=e.charAt(a[c]%62))}return s}}function st(r,e){return r<e?-1:r>e?1:0}function Uf(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const a=r.charAt(s),c=e.charAt(s);if(a!==c)return Pf(a)===Pf(c)?st(a,c):Pf(a)?1:-1}return st(r.length,e.length)}const eS=55296,tS=57343;function Pf(r){const e=r.charCodeAt(0);return e>=eS&&e<=tS}function Al(r,e,t){return r.length===e.length&&r.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="__name__";class es{constructor(e,t,s){t===void 0?t=0:t>e.length&&We(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&We(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return es.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof es?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const c=es.compareSegments(e.get(a),t.get(a));if(c!==0)return c}return st(e.length,t.length)}static compareSegments(e,t){const s=es.isNumericId(e),a=es.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?es.extractNumericId(e).compare(es.extractNumericId(t)):Uf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return jo.fromString(e.substring(4,e.length-2))}}class kt extends es{construct(e,t,s){return new kt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Se(ie.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new kt(t)}static emptyPath(){return new kt([])}}const nS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bn extends es{construct(e,t,s){return new bn(e,t,s)}static isValidIdentifier(e){return nS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===g_}static keyField(){return new bn([g_])}static fromServerFormat(e){const t=[];let s="",a=0;const c=()=>{if(s.length===0)throw new Se(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let m=!1;for(;a<e.length;){const v=e[a];if(v==="\\"){if(a+1===e.length)throw new Se(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[a+1];if(E!=="\\"&&E!=="."&&E!=="`")throw new Se(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=E,a+=2}else v==="`"?(m=!m,a++):v!=="."||m?(s+=v,a++):(c(),a++)}if(c(),m)throw new Se(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bn(t)}static emptyPath(){return new bn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.path=e}static fromPath(e){return new Le(kt.fromString(e))}static fromName(e){return new Le(kt.fromString(e).popFirst(5))}static empty(){return new Le(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new kt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(r,e,t){if(!t)throw new Se(ie.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function rS(r,e,t,s){if(e===!0&&s===!0)throw new Se(ie.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function __(r){if(!Le.isDocumentKey(r))throw new Se(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function y_(r){if(Le.isDocumentKey(r))throw new Se(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function hv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Fh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":We(12329,{type:typeof r})}function rs(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Se(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Fh(r);throw new Se(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(r,e){const t={typeString:r};return e&&(t.value=e),t}function qu(r,e){if(!hv(r))throw new Se(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const m=r[s];if(a&&typeof m!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(c!==void 0&&m!==c.value){t=`Expected '${s}' field to equal '${c.value}'`;break}}if(t)throw new Se(ie.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=-62135596800,w_=1e6;class At{static now(){return At.fromMillis(Date.now())}static fromDate(e){return At.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*w_);return new At(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<v_)throw new Se(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/w_}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:At._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(qu(e,At._jsonSchema))return new At(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-v_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}At._jsonSchemaVersion="firestore/timestamp/1.0",At._jsonSchema={type:rn("string",At._jsonSchemaVersion),seconds:rn("number"),nanoseconds:rn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{static fromTimestamp(e){return new Ze(e)}static min(){return new Ze(new At(0,0))}static max(){return new Ze(new At(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu=-1;function iS(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=Ze.fromTimestamp(s===1e9?new At(t+1,0):new At(t,s));return new Wo(a,Le.empty(),e)}function sS(r){return new Wo(r.readTime,r.key,Mu)}class Wo{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Wo(Ze.min(),Le.empty(),Mu)}static max(){return new Wo(Ze.max(),Le.empty(),Mu)}}function oS(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Le.comparator(r.documentKey,e.documentKey),t!==0?t:st(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(r){if(r.code!==ie.FAILED_PRECONDITION||r.message!==aS)throw r;Ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&We(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,s)=>{t(e)}))}static reject(e){return new se(((t,s)=>{s(e)}))}static waitFor(e){return new se(((t,s)=>{let a=0,c=0,m=!1;e.forEach((v=>{++a,v.next((()=>{++c,m&&c===a&&t()}),(E=>s(E)))})),m=!0,c===a&&t()}))}static or(e){let t=se.resolve(!1);for(const s of e)t=t.next((a=>a?se.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,c)=>{s.push(t.call(this,a,c))})),this.waitFor(s)}static mapArray(e,t){return new se(((s,a)=>{const c=e.length,m=new Array(c);let v=0;for(let E=0;E<c;E++){const x=E;t(e[x]).next((P=>{m[x]=P,++v,v===c&&s(m)}),(P=>a(P)))}}))}static doWhile(e,t){return new se(((s,a)=>{const c=()=>{e()===!0?t().next((()=>{c()}),a):s()};c()}))}}function uS(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ul(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m=-1;function Bh(r){return r==null}function vh(r){return r===0&&1/r==-1/0}function cS(r){return typeof r=="number"&&Number.isInteger(r)&&!vh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="";function hS(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=E_(e)),e=dS(r.get(t),e);return E_(e)}function dS(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const c=r.charAt(a);switch(c){case"\0":t+="";break;case dv:t+="";break;default:t+=c}}return t}function E_(r){return r+dv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ko(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function fv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,t){this.comparator=e,this.root=t||Cn.EMPTY}insert(e,t){return new Bt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Cn.BLACK,null,null))}remove(e){return new Bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eh(this.root,e,this.comparator,!1)}getReverseIterator(){return new eh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eh(this.root,e,this.comparator,!0)}}class eh{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Cn{constructor(e,t,s,a,c){this.key=e,this.value=t,this.color=s??Cn.RED,this.left=a??Cn.EMPTY,this.right=c??Cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,c){return new Cn(e??this.key,t??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,s),null):c===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Cn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw We(43730,{key:this.key,value:this.value});if(this.right.isRed())throw We(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw We(27949);return e+(this.isRed()?0:1)}}Cn.EMPTY=null,Cn.RED=!0,Cn.BLACK=!1;Cn.EMPTY=new class{constructor(){this.size=0}get key(){throw We(57766)}get value(){throw We(16141)}get color(){throw We(16727)}get left(){throw We(29726)}get right(){throw We(36894)}copy(e,t,s,a,c){return this}insert(e,t,s){return new Cn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.comparator=e,this.data=new Bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new x_(this.data.getIterator())}getIteratorFrom(e){return new x_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new un(this.comparator);return t.data=e,t}}class x_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.fields=e,e.sort(bn.comparator)}static empty(){return new Br([])}unionWith(e){let t=new un(bn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Br(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Al(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new mv("Invalid base64 string: "+c):c}})(e);return new An(t)}static fromUint8Array(e){const t=(function(a){let c="";for(let m=0;m<a.length;++m)c+=String.fromCharCode(a[m]);return c})(e);return new An(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}An.EMPTY_BYTE_STRING=new An("");const fS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ho(r){if(vt(!!r,39018),typeof r=="string"){let e=0;const t=fS.exec(r);if(vt(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Qt(r.seconds),nanos:Qt(r.nanos)}}function Qt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function qo(r){return typeof r=="string"?An.fromBase64String(r):An.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="server_timestamp",gv="__type__",_v="__previous_value__",yv="__local_write_time__";function ym(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[gv])==null?void 0:s.stringValue)===pv}function Uh(r){const e=r.mapValue.fields[_v];return ym(e)?Uh(e):e}function Du(r){const e=Ho(r.mapValue.fields[yv].timestampValue);return new At(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,t,s,a,c,m,v,E,x,P,I){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=m,this.autoDetectLongPolling=v,this.longPollingOptions=E,this.useFetchStreams=x,this.isUsingEmulator=P,this.apiKey=I}}const wh="(default)";class Ou{constructor(e,t){this.projectId=e,this.database=t||wh}static empty(){return new Ou("","")}get isDefaultDatabase(){return this.database===wh}isEqual(e){return e instanceof Ou&&e.projectId===this.projectId&&e.database===this.database}}function pS(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new Se(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ou(r.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="__type__",gS="__max__",th={mapValue:{}},wv="__vector__",Eh="value";function $o(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?ym(r)?4:yS(r)?9007199254740991:_S(r)?10:11:We(28295,{value:r})}function us(r,e){if(r===e)return!0;const t=$o(r);if(t!==$o(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Du(r).isEqual(Du(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const m=Ho(a.timestampValue),v=Ho(c.timestampValue);return m.seconds===v.seconds&&m.nanos===v.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,c){return qo(a.bytesValue).isEqual(qo(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,c){return Qt(a.geoPointValue.latitude)===Qt(c.geoPointValue.latitude)&&Qt(a.geoPointValue.longitude)===Qt(c.geoPointValue.longitude)})(r,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return Qt(a.integerValue)===Qt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const m=Qt(a.doubleValue),v=Qt(c.doubleValue);return m===v?vh(m)===vh(v):isNaN(m)&&isNaN(v)}return!1})(r,e);case 9:return Al(r.arrayValue.values||[],e.arrayValue.values||[],us);case 10:case 11:return(function(a,c){const m=a.mapValue.fields||{},v=c.mapValue.fields||{};if(T_(m)!==T_(v))return!1;for(const E in m)if(m.hasOwnProperty(E)&&(v[E]===void 0||!us(m[E],v[E])))return!1;return!0})(r,e);default:return We(52216,{left:r})}}function Vu(r,e){return(r.values||[]).find((t=>us(t,e)))!==void 0}function Rl(r,e){if(r===e)return 0;const t=$o(r),s=$o(e);if(t!==s)return st(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return st(r.booleanValue,e.booleanValue);case 2:return(function(c,m){const v=Qt(c.integerValue||c.doubleValue),E=Qt(m.integerValue||m.doubleValue);return v<E?-1:v>E?1:v===E?0:isNaN(v)?isNaN(E)?0:-1:1})(r,e);case 3:return I_(r.timestampValue,e.timestampValue);case 4:return I_(Du(r),Du(e));case 5:return Uf(r.stringValue,e.stringValue);case 6:return(function(c,m){const v=qo(c),E=qo(m);return v.compareTo(E)})(r.bytesValue,e.bytesValue);case 7:return(function(c,m){const v=c.split("/"),E=m.split("/");for(let x=0;x<v.length&&x<E.length;x++){const P=st(v[x],E[x]);if(P!==0)return P}return st(v.length,E.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,m){const v=st(Qt(c.latitude),Qt(m.latitude));return v!==0?v:st(Qt(c.longitude),Qt(m.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return S_(r.arrayValue,e.arrayValue);case 10:return(function(c,m){var k,H,K,ne;const v=c.fields||{},E=m.fields||{},x=(k=v[Eh])==null?void 0:k.arrayValue,P=(H=E[Eh])==null?void 0:H.arrayValue,I=st(((K=x==null?void 0:x.values)==null?void 0:K.length)||0,((ne=P==null?void 0:P.values)==null?void 0:ne.length)||0);return I!==0?I:S_(x,P)})(r.mapValue,e.mapValue);case 11:return(function(c,m){if(c===th.mapValue&&m===th.mapValue)return 0;if(c===th.mapValue)return 1;if(m===th.mapValue)return-1;const v=c.fields||{},E=Object.keys(v),x=m.fields||{},P=Object.keys(x);E.sort(),P.sort();for(let I=0;I<E.length&&I<P.length;++I){const k=Uf(E[I],P[I]);if(k!==0)return k;const H=Rl(v[E[I]],x[P[I]]);if(H!==0)return H}return st(E.length,P.length)})(r.mapValue,e.mapValue);default:throw We(23264,{he:t})}}function I_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return st(r,e);const t=Ho(r),s=Ho(e),a=st(t.seconds,s.seconds);return a!==0?a:st(t.nanos,s.nanos)}function S_(r,e){const t=r.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const c=Rl(t[a],s[a]);if(c)return c}return st(t.length,s.length)}function Nl(r){return Wf(r)}function Wf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=Ho(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return qo(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Le.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",a=!0;for(const c of t.values||[])a?a=!1:s+=",",s+=Wf(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",c=!0;for(const m of s)c?c=!1:a+=",",a+=`${m}:${Wf(t.fields[m])}`;return a+"}"})(r.mapValue):We(61005,{value:r})}function oh(r){switch($o(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uh(r);return e?16+oh(e):16;case 5:return 2*r.stringValue.length;case 6:return qo(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,c)=>a+oh(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let a=0;return Ko(s.fields,((c,m)=>{a+=c.length+oh(m)})),a})(r.mapValue);default:throw We(13486,{value:r})}}function P_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Hf(r){return!!r&&"integerValue"in r}function vm(r){return!!r&&"arrayValue"in r}function C_(r){return!!r&&"nullValue"in r}function b_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ah(r){return!!r&&"mapValue"in r}function _S(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[vv])==null?void 0:s.stringValue)===wv}function Cu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ko(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Cu(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Cu(r.arrayValue.values[t]);return e}return{...r}}function yS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===gS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.value=e}static empty(){return new br({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ah(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cu(t)}setAll(e){let t=bn.emptyPath(),s={},a=[];e.forEach(((m,v)=>{if(!t.isImmediateParentOf(v)){const E=this.getFieldsMap(t);this.applyChanges(E,s,a),s={},a=[],t=v.popLast()}m?s[v.lastSegment()]=Cu(m):a.push(v.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,s,a)}delete(e){const t=this.field(e.popLast());ah(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return us(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];ah(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Ko(t,((a,c)=>e[a]=c));for(const a of s)delete e[a]}clone(){return new br(Cu(this.value))}}function Ev(r){const e=[];return Ko(r.fields,((t,s)=>{const a=new bn([t]);if(ah(s)){const c=Ev(s.mapValue).fields;if(c.length===0)e.push(a);else for(const m of c)e.push(a.child(m))}else e.push(a)})),new Br(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,t,s,a,c,m,v){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=c,this.data=m,this.documentState=v}static newInvalidDocument(e){return new Hn(e,0,Ze.min(),Ze.min(),Ze.min(),br.empty(),0)}static newFoundDocument(e,t,s,a){return new Hn(e,1,t,Ze.min(),s,a,0)}static newNoDocument(e,t){return new Hn(e,2,t,Ze.min(),Ze.min(),br.empty(),0)}static newUnknownDocument(e,t){return new Hn(e,3,t,Ze.min(),Ze.min(),br.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=br.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=br.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,t){this.position=e,this.inclusive=t}}function k_(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const c=e[a],m=r.position[a];if(c.field.isKeyField()?s=Le.comparator(Le.fromName(m.referenceValue),t.key):s=Rl(m,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function A_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!us(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,t="asc"){this.field=e,this.dir=t}}function vS(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{}class nn extends Tv{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new ES(e,t,s):t==="array-contains"?new IS(e,s):t==="in"?new SS(e,s):t==="not-in"?new PS(e,s):t==="array-contains-any"?new CS(e,s):new nn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new TS(e,s):new xS(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Rl(t,this.value)):t!==null&&$o(this.value)===$o(t)&&this.matchesComparison(Rl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return We(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ni extends Tv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ni(e,t)}matches(e){return xv(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xv(r){return r.op==="and"}function Iv(r){return wS(r)&&xv(r)}function wS(r){for(const e of r.filters)if(e instanceof Ni)return!1;return!0}function qf(r){if(r instanceof nn)return r.field.canonicalString()+r.op.toString()+Nl(r.value);if(Iv(r))return r.filters.map((e=>qf(e))).join(",");{const e=r.filters.map((t=>qf(t))).join(",");return`${r.op}(${e})`}}function Sv(r,e){return r instanceof nn?(function(s,a){return a instanceof nn&&s.op===a.op&&s.field.isEqual(a.field)&&us(s.value,a.value)})(r,e):r instanceof Ni?(function(s,a){return a instanceof Ni&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((c,m,v)=>c&&Sv(m,a.filters[v])),!0):!1})(r,e):void We(19439)}function Pv(r){return r instanceof nn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Nl(t.value)}`})(r):r instanceof Ni?(function(t){return t.op.toString()+" {"+t.getFilters().map(Pv).join(" ,")+"}"})(r):"Filter"}class ES extends nn{constructor(e,t,s){super(e,t,s),this.key=Le.fromName(s.referenceValue)}matches(e){const t=Le.comparator(e.key,this.key);return this.matchesComparison(t)}}class TS extends nn{constructor(e,t){super(e,"in",t),this.keys=Cv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class xS extends nn{constructor(e,t){super(e,"not-in",t),this.keys=Cv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Cv(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Le.fromName(s.referenceValue)))}class IS extends nn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vm(t)&&Vu(t.arrayValue,this.value)}}class SS extends nn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Vu(this.value.arrayValue,t)}}class PS extends nn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Vu(this.value.arrayValue,t)}}class CS extends nn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Vu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,t=null,s=[],a=[],c=null,m=null,v=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=m,this.endAt=v,this.Te=null}}function R_(r,e=null,t=[],s=[],a=null,c=null,m=null){return new bS(r,e,t,s,a,c,m)}function wm(r){const e=Qe(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>qf(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Bh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Nl(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Nl(s))).join(",")),e.Te=t}return e.Te}function Em(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!vS(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Sv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!A_(r.startAt,e.startAt)&&A_(r.endAt,e.endAt)}function $f(r){return Le.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,t=null,s=[],a=[],c=null,m="F",v=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=m,this.startAt=v,this.endAt=E,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function kS(r,e,t,s,a,c,m,v){return new Wl(r,e,t,s,a,c,m,v)}function Wh(r){return new Wl(r)}function N_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function AS(r){return Le.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function bv(r){return r.collectionGroup!==null}function bu(r){const e=Qe(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(m){let v=new un(bn.comparator);return m.filters.forEach((E=>{E.getFlattenedFilters().forEach((x=>{x.isInequality()&&(v=v.add(x.field))}))})),v})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new zu(c,s))})),t.has(bn.keyField().canonicalString())||e.Ie.push(new zu(bn.keyField(),s))}return e.Ie}function is(r){const e=Qe(r);return e.Ee||(e.Ee=RS(e,bu(r))),e.Ee}function RS(r,e){if(r.limitType==="F")return R_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new zu(a.field,c)}));const t=r.endAt?new Th(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Th(r.startAt.position,r.startAt.inclusive):null;return R_(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Gf(r,e){const t=r.filters.concat([e]);return new Wl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function NS(r,e){const t=r.explicitOrderBy.concat([e]);return new Wl(r.path,r.collectionGroup,t,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function Zf(r,e,t){return new Wl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Hh(r,e){return Em(is(r),is(e))&&r.limitType===e.limitType}function kv(r){return`${wm(is(r))}|lt:${r.limitType}`}function gl(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>Pv(a))).join(", ")}]`),Bh(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(m){return`${m.field.canonicalString()} (${m.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>Nl(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>Nl(a))).join(",")),`Target(${s})`})(is(r))}; limitType=${r.limitType})`}function qh(r,e){return e.isFoundDocument()&&(function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Le.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,a){for(const c of bu(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0})(r,e)&&(function(s,a){return!(s.startAt&&!(function(m,v,E){const x=k_(m,v,E);return m.inclusive?x<=0:x<0})(s.startAt,bu(s),a)||s.endAt&&!(function(m,v,E){const x=k_(m,v,E);return m.inclusive?x>=0:x>0})(s.endAt,bu(s),a))})(r,e)}function LS(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Av(r){return(e,t)=>{let s=!1;for(const a of bu(r)){const c=MS(a,e,t);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function MS(r,e,t){const s=r.field.isKeyField()?Le.comparator(e.key,t.key):(function(c,m,v){const E=m.data.field(c),x=v.data.field(c);return E!==null&&x!==null?Rl(E,x):We(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return We(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ko(this.inner,((t,s)=>{for(const[a,c]of s)e(a,c)}))}isEmpty(){return fv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=new Bt(Le.comparator);function qs(){return DS}const Rv=new Bt(Le.comparator);function xu(...r){let e=Rv;for(const t of r)e=e.insert(t.key,t);return e}function Nv(r){let e=Rv;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Ca(){return ku()}function Lv(){return ku()}function ku(){return new Va((r=>r.toString()),((r,e)=>r.isEqual(e)))}const OS=new Bt(Le.comparator),VS=new un(Le.comparator);function ot(...r){let e=VS;for(const t of r)e=e.add(t);return e}const zS=new un(st);function FS(){return zS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vh(e)?"-0":e}}function Mv(r){return{integerValue:""+r}}function Dv(r,e){return cS(e)?Mv(e):Tm(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(){this._=void 0}}function jS(r,e,t){return r instanceof xh?(function(a,c){const m={fields:{[gv]:{stringValue:pv},[yv]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&ym(c)&&(c=Uh(c)),c&&(m.fields[_v]=c),{mapValue:m}})(t,e):r instanceof Fu?Vv(r,e):r instanceof ju?zv(r,e):(function(a,c){const m=Ov(a,c),v=L_(m)+L_(a.Ae);return Hf(m)&&Hf(a.Ae)?Mv(v):Tm(a.serializer,v)})(r,e)}function BS(r,e,t){return r instanceof Fu?Vv(r,e):r instanceof ju?zv(r,e):t}function Ov(r,e){return r instanceof Bu?(function(s){return Hf(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class xh extends $h{}class Fu extends $h{constructor(e){super(),this.elements=e}}function Vv(r,e){const t=Fv(e);for(const s of r.elements)t.some((a=>us(a,s)))||t.push(s);return{arrayValue:{values:t}}}class ju extends $h{constructor(e){super(),this.elements=e}}function zv(r,e){let t=Fv(e);for(const s of r.elements)t=t.filter((a=>!us(a,s)));return{arrayValue:{values:t}}}class Bu extends $h{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function L_(r){return Qt(r.integerValue||r.doubleValue)}function Fv(r){return vm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,t){this.field=e,this.transform=t}}function WS(r,e){return r.field.isEqual(e.field)&&(function(s,a){return s instanceof Fu&&a instanceof Fu||s instanceof ju&&a instanceof ju?Al(s.elements,a.elements,us):s instanceof Bu&&a instanceof Bu?us(s.Ae,a.Ae):s instanceof xh&&a instanceof xh})(r.transform,e.transform)}class HS{constructor(e,t){this.version=e,this.transformResults=t}}class ss{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ss}static exists(e){return new ss(void 0,e)}static updateTime(e){return new ss(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Gh{}function jv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Uv(r.key,ss.none()):new $u(r.key,r.data,ss.none());{const t=r.data,s=br.empty();let a=new un(bn.comparator);for(let c of e.fields)if(!a.has(c)){let m=t.field(c);m===null&&c.length>1&&(c=c.popLast(),m=t.field(c)),m===null?s.delete(c):s.set(c,m),a=a.add(c)}return new Qo(r.key,s,new Br(a.toArray()),ss.none())}}function qS(r,e,t){r instanceof $u?(function(a,c,m){const v=a.value.clone(),E=D_(a.fieldTransforms,c,m.transformResults);v.setAll(E),c.convertToFoundDocument(m.version,v).setHasCommittedMutations()})(r,e,t):r instanceof Qo?(function(a,c,m){if(!lh(a.precondition,c))return void c.convertToUnknownDocument(m.version);const v=D_(a.fieldTransforms,c,m.transformResults),E=c.data;E.setAll(Bv(a)),E.setAll(v),c.convertToFoundDocument(m.version,E).setHasCommittedMutations()})(r,e,t):(function(a,c,m){c.convertToNoDocument(m.version).setHasCommittedMutations()})(0,e,t)}function Au(r,e,t,s){return r instanceof $u?(function(c,m,v,E){if(!lh(c.precondition,m))return v;const x=c.value.clone(),P=O_(c.fieldTransforms,E,m);return x.setAll(P),m.convertToFoundDocument(m.version,x).setHasLocalMutations(),null})(r,e,t,s):r instanceof Qo?(function(c,m,v,E){if(!lh(c.precondition,m))return v;const x=O_(c.fieldTransforms,E,m),P=m.data;return P.setAll(Bv(c)),P.setAll(x),m.convertToFoundDocument(m.version,P).setHasLocalMutations(),v===null?null:v.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((I=>I.field)))})(r,e,t,s):(function(c,m,v){return lh(c.precondition,m)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):v})(r,e,t)}function $S(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),c=Ov(s.transform,a||null);c!=null&&(t===null&&(t=br.empty()),t.set(s.field,c))}return t||null}function M_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Al(s,a,((c,m)=>WS(c,m)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class $u extends Gh{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Qo extends Gh{constructor(e,t,s,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Bv(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function D_(r,e,t){const s=new Map;vt(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let a=0;a<t.length;a++){const c=r[a],m=c.transform,v=e.data.field(c.field);s.set(c.field,BS(m,v,t[a]))}return s}function O_(r,e,t){const s=new Map;for(const a of r){const c=a.transform,m=t.data.field(a.field);s.set(a.field,jS(c,m,e))}return s}class Uv extends Gh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GS extends Gh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&qS(c,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Au(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Au(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Lv();return this.mutations.forEach((a=>{const c=e.get(a.key),m=c.overlayedDocument;let v=this.applyToLocalView(m,c.mutatedFields);v=t.has(a.key)?null:v;const E=jv(m,v);E!==null&&s.set(a.key,E),m.isValidDocument()||m.convertToNoDocument(Ze.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ot())}isEqual(e){return this.batchId===e.batchId&&Al(this.mutations,e.mutations,((t,s)=>M_(t,s)))&&Al(this.baseMutations,e.baseMutations,((t,s)=>M_(t,s)))}}class xm{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){vt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return OS})();const c=e.mutations;for(let m=0;m<c.length;m++)a=a.insert(c[m].key,s[m].version);return new xm(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tn,ht;function YS(r){switch(r){case ie.OK:return We(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return We(15467,{code:r})}}function Wv(r){if(r===void 0)return Hs("GRPC error has no .code"),ie.UNKNOWN;switch(r){case tn.OK:return ie.OK;case tn.CANCELLED:return ie.CANCELLED;case tn.UNKNOWN:return ie.UNKNOWN;case tn.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case tn.INTERNAL:return ie.INTERNAL;case tn.UNAVAILABLE:return ie.UNAVAILABLE;case tn.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case tn.NOT_FOUND:return ie.NOT_FOUND;case tn.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case tn.ABORTED:return ie.ABORTED;case tn.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case tn.DATA_LOSS:return ie.DATA_LOSS;default:return We(39323,{code:r})}}(ht=tn||(tn={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=new jo([4294967295,4294967295],0);function V_(r){const e=XS().encode(r),t=new nv;return t.update(e),new Uint8Array(t.digest())}function z_(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new jo([t,s],0),new jo([a,c],0)]}class Im{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Iu(`Invalid padding: ${t}`);if(s<0)throw new Iu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Iu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Iu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=jo.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(jo.fromNumber(s)));return a.compare(JS)===1&&(a=new jo([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=V_(e),[s,a]=z_(t);for(let c=0;c<this.hashCount;c++){const m=this.ye(s,a,c);if(!this.we(m))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),m=new Im(c,a,t);return s.forEach((v=>m.insert(v))),m}insert(e){if(this.ge===0)return;const t=V_(e),[s,a]=z_(t);for(let c=0;c<this.hashCount;c++){const m=this.ye(s,a,c);this.be(m)}}be(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Iu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,t,s,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Gu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Zh(Ze.min(),a,new Bt(st),qs(),ot())}}class Gu{constructor(e,t,s,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Gu(s,t,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,t,s,a){this.Se=e,this.removedTargetIds=t,this.key=s,this.De=a}}class Hv{constructor(e,t){this.targetId=e,this.Ce=t}}class qv{constructor(e,t,s=An.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class F_{constructor(){this.ve=0,this.Fe=j_(),this.Me=An.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ot(),t=ot(),s=ot();return this.Fe.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:We(38017,{changeType:c})}})),new Gu(this.Me,this.xe,e,t,s)}Ke(){this.Oe=!1,this.Fe=j_()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,vt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class eP{constructor(e){this.Ge=e,this.ze=new Map,this.je=qs(),this.He=nh(),this.Je=nh(),this.Ze=new Bt(st)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:We(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const c=a.target;if($f(c))if(s===0){const m=new Le(c.path);this.et(t,m,Hn.newNoDocument(m,Ze.min()))}else vt(s===1,20013,{expectedCount:s});else{const m=this._t(t);if(m!==s){const v=this.ut(e),E=v?this.ct(v,e,m):1;if(E!==0){this.it(t);const x=E===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,x)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=t;let m,v;try{m=qo(s).toUint8Array()}catch(E){if(E instanceof mv)return kl("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw E}try{v=new Im(m,a,c)}catch(E){return kl(E instanceof Iu?"BloomFilter error: ":"Applying bloom filter failed: ",E),null}return v.ge===0?null:v}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((c=>{const m=this.Ge.ht(),v=`projects/${m.projectId}/databases/${m.database}/documents/${c.path.canonicalString()}`;e.mightContain(v)||(this.et(t,c,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((c,m)=>{const v=this.ot(m);if(v){if(c.current&&$f(v.target)){const E=new Le(v.target.path);this.It(E).has(m)||this.Et(m,E)||this.et(m,E,Hn.newNoDocument(E,e))}c.Be&&(t.set(m,c.ke()),c.Ke())}}));let s=ot();this.Je.forEach(((c,m)=>{let v=!0;m.forEachWhile((E=>{const x=this.ot(E);return!x||x.purpose==="TargetPurposeLimboResolution"||(v=!1,!1)})),v&&(s=s.add(c))})),this.je.forEach(((c,m)=>m.setReadTime(e)));const a=new Zh(e,t,this.Ze,this.je,s);return this.je=qs(),this.He=nh(),this.Je=nh(),this.Ze=new Bt(st),a}Ye(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,s),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new F_,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new un(st),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new un(st),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new F_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function nh(){return new Bt(Le.comparator)}function j_(){return new Bt(Le.comparator)}const tP={asc:"ASCENDING",desc:"DESCENDING"},nP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rP={and:"AND",or:"OR"};class iP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Kf(r,e){return r.useProto3Json||Bh(e)?e:{value:e}}function Ih(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $v(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function sP(r,e){return Ih(r,e.toTimestamp())}function os(r){return vt(!!r,49232),Ze.fromTimestamp((function(t){const s=Ho(t);return new At(s.seconds,s.nanos)})(r))}function Sm(r,e){return Qf(r,e).canonicalString()}function Qf(r,e){const t=(function(a){return new kt(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Gv(r){const e=kt.fromString(r);return vt(Xv(e),10190,{key:e.toString()}),e}function Yf(r,e){return Sm(r.databaseId,e.path)}function Cf(r,e){const t=Gv(e);if(t.get(1)!==r.databaseId.projectId)throw new Se(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Se(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Le(Kv(t))}function Zv(r,e){return Sm(r.databaseId,e)}function oP(r){const e=Gv(r);return e.length===4?kt.emptyPath():Kv(e)}function Xf(r){return new kt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Kv(r){return vt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function B_(r,e,t){return{name:Yf(r,e),fields:t.value.mapValue.fields}}function aP(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:We(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(x,P){return x.useProto3Json?(vt(P===void 0||typeof P=="string",58123),An.fromBase64String(P||"")):(vt(P===void 0||P instanceof Buffer||P instanceof Uint8Array,16193),An.fromUint8Array(P||new Uint8Array))})(r,e.targetChange.resumeToken),m=e.targetChange.cause,v=m&&(function(x){const P=x.code===void 0?ie.UNKNOWN:Wv(x.code);return new Se(P,x.message||"")})(m);t=new qv(s,a,c,v||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Cf(r,s.document.name),c=os(s.document.updateTime),m=s.document.createTime?os(s.document.createTime):Ze.min(),v=new br({mapValue:{fields:s.document.fields}}),E=Hn.newFoundDocument(a,c,m,v),x=s.targetIds||[],P=s.removedTargetIds||[];t=new uh(x,P,E.key,E)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Cf(r,s.document),c=s.readTime?os(s.readTime):Ze.min(),m=Hn.newNoDocument(a,c),v=s.removedTargetIds||[];t=new uh([],v,m.key,m)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Cf(r,s.document),c=s.removedTargetIds||[];t=new uh([],c,a,null)}else{if(!("filter"in e))return We(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,m=new QS(a,c),v=s.targetId;t=new Hv(v,m)}}return t}function lP(r,e){let t;if(e instanceof $u)t={update:B_(r,e.key,e.value)};else if(e instanceof Uv)t={delete:Yf(r,e.key)};else if(e instanceof Qo)t={update:B_(r,e.key,e.data),updateMask:_P(e.fieldMask)};else{if(!(e instanceof GS))return We(16599,{dt:e.type});t={verify:Yf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(c,m){const v=m.transform;if(v instanceof xh)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof Fu)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof ju)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof Bu)return{fieldPath:m.field.canonicalString(),increment:v.Ae};throw We(20930,{transform:m.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:sP(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:We(27497)})(r,e.precondition)),t}function uP(r,e){return r&&r.length>0?(vt(e!==void 0,14353),r.map((t=>(function(a,c){let m=a.updateTime?os(a.updateTime):os(c);return m.isEqual(Ze.min())&&(m=os(c)),new HS(m,a.transformResults||[])})(t,e)))):[]}function cP(r,e){return{documents:[Zv(r,e.path)]}}function hP(r,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Zv(r,a);const c=(function(x){if(x.length!==0)return Yv(Ni.create(x,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const m=(function(x){if(x.length!==0)return x.map((P=>(function(k){return{field:_l(k.field),direction:mP(k.dir)}})(P)))})(e.orderBy);m&&(t.structuredQuery.orderBy=m);const v=Kf(r,e.limit);return v!==null&&(t.structuredQuery.limit=v),e.startAt&&(t.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:t,parent:a}}function dP(r){let e=oP(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){vt(s===1,65062);const P=t.from[0];P.allDescendants?a=P.collectionId:e=e.child(P.collectionId)}let c=[];t.where&&(c=(function(I){const k=Qv(I);return k instanceof Ni&&Iv(k)?k.getFilters():[k]})(t.where));let m=[];t.orderBy&&(m=(function(I){return I.map((k=>(function(K){return new zu(yl(K.field),(function(ee){switch(ee){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(K.direction))})(k)))})(t.orderBy));let v=null;t.limit&&(v=(function(I){let k;return k=typeof I=="object"?I.value:I,Bh(k)?null:k})(t.limit));let E=null;t.startAt&&(E=(function(I){const k=!!I.before,H=I.values||[];return new Th(H,k)})(t.startAt));let x=null;return t.endAt&&(x=(function(I){const k=!I.before,H=I.values||[];return new Th(H,k)})(t.endAt)),kS(e,a,m,c,v,"F",E,x)}function fP(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return We(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Qv(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=yl(t.unaryFilter.field);return nn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=yl(t.unaryFilter.field);return nn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=yl(t.unaryFilter.field);return nn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=yl(t.unaryFilter.field);return nn.create(m,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return We(61313);default:return We(60726)}})(r):r.fieldFilter!==void 0?(function(t){return nn.create(yl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return We(58110);default:return We(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Ni.create(t.compositeFilter.filters.map((s=>Qv(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return We(1026)}})(t.compositeFilter.op))})(r):We(30097,{filter:r})}function mP(r){return tP[r]}function pP(r){return nP[r]}function gP(r){return rP[r]}function _l(r){return{fieldPath:r.canonicalString()}}function yl(r){return bn.fromServerFormat(r.fieldPath)}function Yv(r){return r instanceof nn?(function(t){if(t.op==="=="){if(b_(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NAN"}};if(C_(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(b_(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NOT_NAN"}};if(C_(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_l(t.field),op:pP(t.op),value:t.value}}})(r):r instanceof Ni?(function(t){const s=t.getFilters().map((a=>Yv(a)));return s.length===1?s[0]:{compositeFilter:{op:gP(t.op),filters:s}}})(r):We(54877,{filter:r})}function _P(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Xv(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function Jv(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,t,s,a,c=Ze.min(),m=Ze.min(),v=An.EMPTY_BYTE_STRING,E=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=v,this.expectedCount=E}withSequenceNumber(e){return new Oo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e){this.yt=e}}function vP(r){const e=dP({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Zf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(){this.Sn=new EP}addToCollectionParentIndex(e,t){return this.Sn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Wo.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Wo.min())}updateCollectionGroup(e,t,s){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class EP{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new un(kt.comparator),c=!a.has(s);return this.index[t]=a.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new un(kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},e0=41943040;class Cr{static withCacheSize(e){return new Cr(e,Cr.DEFAULT_COLLECTION_PERCENTILE,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cr.DEFAULT_COLLECTION_PERCENTILE=10,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cr.DEFAULT=new Cr(e0,Cr.DEFAULT_COLLECTION_PERCENTILE,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cr.DISABLED=new Cr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ll(0)}static ar(){return new Ll(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="LruGarbageCollector",TP=1048576;function H_([r,e],[t,s]){const a=st(r,t);return a===0?st(e,s):a}class xP{constructor(e){this.Pr=e,this.buffer=new un(H_),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();H_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class IP{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ce(W_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ul(t)?Ce(W_,"Ignoring IndexedDB error during garbage collection: ",t):await Bl(t)}await this.Ar(3e5)}))}}class SP{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(jh.ce);const s=new xP(t);return this.Vr.forEachTarget(e,(a=>s.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>s.Er(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ce("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(U_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),U_):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let s,a,c,m,v,E,x;const P=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(Ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),a=this.params.maximumSequenceNumbersToCollect):a=I,m=Date.now(),this.nthSequenceNumber(e,a)))).next((I=>(s=I,v=Date.now(),this.removeTargets(e,s,t)))).next((I=>(c=I,E=Date.now(),this.removeOrphanedDocuments(e,s)))).next((I=>(x=Date.now(),pl()<=it.DEBUG&&Ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${m-P}ms
	Determined least recently used ${a} in `+(v-m)+`ms
	Removed ${c} targets in `+(E-v)+`ms
	Removed ${I} documents in `+(x-E)+`ms
Total Duration: ${x-P}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:I}))))}}function PP(r,e){return new SP(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(){this.changes=new Va((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?se.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&Au(s.mutation,a,Br.empty(),At.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,ot()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=ot()){const a=Ca();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((c=>{let m=xu();return c.forEach(((v,E)=>{m=m.insert(v,E.overlayedDocument)})),m}))))}getOverlayedDocuments(e,t){const s=Ca();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,ot())))}populateOverlays(e,t,s){const a=[];return s.forEach((c=>{t.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((m,v)=>{t.set(m,v)}))}))}computeViews(e,t,s,a){let c=qs();const m=ku(),v=(function(){return ku()})();return t.forEach(((E,x)=>{const P=s.get(x.key);a.has(x.key)&&(P===void 0||P.mutation instanceof Qo)?c=c.insert(x.key,x):P!==void 0?(m.set(x.key,P.mutation.getFieldMask()),Au(P.mutation,x,P.mutation.getFieldMask(),At.now())):m.set(x.key,Br.empty())})),this.recalculateAndSaveOverlays(e,c).next((E=>(E.forEach(((x,P)=>m.set(x,P))),t.forEach(((x,P)=>v.set(x,new bP(P,m.get(x)??null)))),v)))}recalculateAndSaveOverlays(e,t){const s=ku();let a=new Bt(((m,v)=>m-v)),c=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((m=>{for(const v of m)v.keys().forEach((E=>{const x=t.get(E);if(x===null)return;let P=s.get(E)||Br.empty();P=v.applyToLocalView(x,P),s.set(E,P);const I=(a.get(v.batchId)||ot()).add(E);a=a.insert(v.batchId,I)}))})).next((()=>{const m=[],v=a.getReverseIterator();for(;v.hasNext();){const E=v.getNext(),x=E.key,P=E.value,I=Lv();P.forEach((k=>{if(!c.has(k)){const H=jv(t.get(k),s.get(k));H!==null&&I.set(k,H),c=c.add(k)}})),m.push(this.documentOverlayCache.saveOverlays(e,x,I))}return se.waitFor(m)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return AS(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((c=>{const m=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-c.size):se.resolve(Ca());let v=Mu,E=c;return m.next((x=>se.forEach(x,((P,I)=>(v<I.largestBatchId&&(v=I.largestBatchId),c.get(P)?se.resolve():this.remoteDocumentCache.getEntry(e,P).next((k=>{E=E.insert(P,k)}))))).next((()=>this.populateOverlays(e,x,c))).next((()=>this.computeViews(e,E,x,ot()))).next((P=>({batchId:v,changes:Nv(P)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Le(t)).next((s=>{let a=xu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const c=t.collectionGroup;let m=xu();return this.indexManager.getCollectionParents(e,c).next((v=>se.forEach(v,(E=>{const x=(function(I,k){return new Wl(k,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(t,E.child(c));return this.getDocumentsMatchingCollectionQuery(e,x,s,a).next((P=>{P.forEach(((I,k)=>{m=m.insert(I,k)}))}))})).next((()=>m))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((m=>(c=m,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,a)))).next((m=>{c.forEach(((E,x)=>{const P=x.getKey();m.get(P)===null&&(m=m.insert(P,Hn.newInvalidDocument(P)))}));let v=xu();return m.forEach(((E,x)=>{const P=c.get(E);P!==void 0&&Au(P.mutation,x,Br.empty(),At.now()),qh(t,x)&&(v=v.insert(E,x))})),v}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return se.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:os(a.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:vP(a.bundledQuery),readTime:os(a.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this.overlays=new Bt(Le.comparator),this.Lr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ca();return se.forEach(t,(a=>this.getOverlay(e,a).next((c=>{c!==null&&s.set(a,c)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,c)=>{this.bt(e,t,c)})),se.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.Lr.get(s);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(s)),se.resolve()}getOverlaysForCollection(e,t,s){const a=Ca(),c=t.length+1,m=new Le(t.child("")),v=this.overlays.getIteratorFrom(m);for(;v.hasNext();){const E=v.getNext().value,x=E.getKey();if(!t.isPrefixOf(x.path))break;x.path.length===c&&E.largestBatchId>s&&a.set(E.getKey(),E)}return se.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let c=new Bt(((x,P)=>x-P));const m=this.overlays.getIterator();for(;m.hasNext();){const x=m.getNext().value;if(x.getKey().getCollectionGroup()===t&&x.largestBatchId>s){let P=c.get(x.largestBatchId);P===null&&(P=Ca(),c=c.insert(x.largestBatchId,P)),P.set(x.getKey(),x)}}const v=Ca(),E=c.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach(((x,P)=>v.set(x,P))),!(v.size()>=a)););return se.resolve(v)}bt(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const m=this.Lr.get(a.largestBatchId).delete(s.key);this.Lr.set(a.largestBatchId,m)}this.overlays=this.overlays.insert(s.key,new KS(t,s));let c=this.Lr.get(t);c===void 0&&(c=ot(),this.Lr.set(t,c)),this.Lr.set(t,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(){this.sessionToken=An.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(){this.kr=new un(gn.Kr),this.qr=new un(gn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const s=new gn(e,t);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new gn(e,t))}Qr(e,t){e.forEach((s=>this.removeReference(s,t)))}Gr(e){const t=new Le(new kt([])),s=new gn(t,e),a=new gn(t,e+1),c=[];return this.qr.forEachInRange([s,a],(m=>{this.Wr(m),c.push(m.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Le(new kt([])),s=new gn(t,e),a=new gn(t,e+1);let c=ot();return this.qr.forEachInRange([s,a],(m=>{c=c.add(m.key)})),c}containsKey(e){const t=new gn(e,0),s=this.kr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class gn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Le.comparator(e.key,t.key)||st(e.Hr,t.Hr)}static Ur(e,t){return st(e.Hr,t.Hr)||Le.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new un(gn.Kr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const m=new ZS(c,t,s,a);this.mutationQueue.push(m);for(const v of a)this.Jr=this.Jr.add(new gn(v.key,c)),this.indexManager.addToCollectionParentIndex(e,v.key.path.popLast());return se.resolve(m)}lookupMutationBatch(e,t){return se.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.Xr(s),c=a<0?0:a;return se.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?_m:this.Yn-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new gn(t,0),a=new gn(t,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([s,a],(m=>{const v=this.Zr(m.Hr);c.push(v)})),se.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new un(st);return t.forEach((a=>{const c=new gn(a,0),m=new gn(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,m],(v=>{s=s.add(v.Hr)}))})),se.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let c=s;Le.isDocumentKey(c)||(c=c.child(""));const m=new gn(new Le(c),0);let v=new un(st);return this.Jr.forEachWhile((E=>{const x=E.key.path;return!!s.isPrefixOf(x)&&(x.length===a&&(v=v.add(E.Hr)),!0)}),m),se.resolve(this.Yr(v))}Yr(e){const t=[];return e.forEach((s=>{const a=this.Zr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){vt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return se.forEach(t.mutations,(a=>{const c=new gn(a.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,t){const s=new gn(t,0),a=this.Jr.firstAfterOrEqual(s);return se.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e){this.ti=e,this.docs=(function(){return new Bt(Le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),c=a?a.size:0,m=this.ti(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:m}),this.size+=m-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return se.resolve(s?s.document.mutableCopy():Hn.newInvalidDocument(t))}getEntries(e,t){let s=qs();return t.forEach((a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Hn.newInvalidDocument(a))})),se.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let c=qs();const m=t.path,v=new Le(m.child("__id-9223372036854775808__")),E=this.docs.getIteratorFrom(v);for(;E.hasNext();){const{key:x,value:{document:P}}=E.getNext();if(!m.isPrefixOf(x.path))break;x.path.length>m.length+1||oS(sS(P),s)<=0||(a.has(P.key)||qh(t,P))&&(c=c.insert(P.key,P.mutableCopy()))}return se.resolve(c)}getAllFromCollectionGroup(e,t,s,a){We(9500)}ni(e,t){return se.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new DP(this)}getSize(e){return se.resolve(this.size)}}class DP extends CP{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(s)})),se.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this.persistence=e,this.ri=new Va((t=>wm(t)),Em),this.lastRemoteSnapshotVersion=Ze.min(),this.highestTargetId=0,this.ii=0,this.si=new Pm,this.targetCount=0,this.oi=Ll._r()}forEachTarget(e,t){return this.ri.forEach(((s,a)=>t(a))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ii&&(this.ii=t),se.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Ll(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.lr(t),se.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,s){let a=0;const c=[];return this.ri.forEach(((m,v)=>{v.sequenceNumber<=t&&s.get(v.targetId)===null&&(this.ri.delete(m),c.push(this.removeMatchingKeysForTargetId(e,v.targetId)),a++)})),se.waitFor(c).next((()=>a))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const s=this.ri.get(t)||null;return se.resolve(s)}addMatchingKeys(e,t,s){return this.si.$r(t,s),se.resolve()}removeMatchingKeys(e,t,s){this.si.Qr(t,s);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach((m=>{c.push(a.markPotentiallyOrphaned(e,m))})),se.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const s=this.si.jr(t);return se.resolve(s)}containsKey(e,t){return se.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,t){this._i={},this.overlays={},this.ai=new jh(0),this.ui=!1,this.ui=!0,this.ci=new NP,this.referenceDelegate=e(this),this.li=new OP(this),this.indexManager=new wP,this.remoteDocumentCache=(function(a){return new MP(a)})((s=>this.referenceDelegate.hi(s))),this.serializer=new yP(t),this.Pi=new AP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new RP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this._i[e.toKey()];return s||(s=new LP(t,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,s){Ce("MemoryPersistence","Starting transaction:",e);const a=new VP(this.ai.next());return this.referenceDelegate.Ti(),s(a).next((c=>this.referenceDelegate.Ii(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ei(e,t){return se.or(Object.values(this._i).map((s=>()=>s.containsKey(e,t))))}}class VP extends lS{constructor(e){super(),this.currentSequenceNumber=e}}class Cm{constructor(e){this.persistence=e,this.Ri=new Pm,this.Ai=null}static Vi(e){return new Cm(e)}get di(){if(this.Ai)return this.Ai;throw We(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.di.delete(s.toString()),se.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.di.add(s.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((c=>this.di.add(c.toString())))})).next((()=>s.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.di,(s=>{const a=Le.fromPath(s);return this.mi(e,a).next((c=>{c||t.removeEntry(a,Ze.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Sh{constructor(e,t){this.persistence=e,this.fi=new Va((s=>hS(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=PP(this,t)}static Vi(e,t){return new Sh(e,t)}Ti(){}Ii(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}mr(e,t){return se.forEach(this.fi,((s,a)=>this.wr(e,s,a).next((c=>c?se.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ni(e,(m=>this.wr(e,m,t).next((v=>{v||(s++,c.removeEntry(m,Ze.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),se.resolve()}removeReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),se.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=oh(e.data.value)),t}wr(e,t,s){return se.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return se.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Ts=s,this.Is=a}static Es(e,t){let s=ot(),a=ot();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new bm(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Px()?8:uS(qn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const c={result:null};return this.gs(e,t).next((m=>{c.result=m})).next((()=>{if(!c.result)return this.ps(e,t,a,s).next((m=>{c.result=m}))})).next((()=>{if(c.result)return;const m=new zP;return this.ys(e,t,m).next((v=>{if(c.result=v,this.As)return this.ws(e,t,m,v.size)}))})).next((()=>c.result))}ws(e,t,s,a){return s.documentReadCount<this.Vs?(pl()<=it.DEBUG&&Ce("QueryEngine","SDK will not create cache indexes for query:",gl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(pl()<=it.DEBUG&&Ce("QueryEngine","Query:",gl(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.ds*a?(pl()<=it.DEBUG&&Ce("QueryEngine","The SDK decides to create cache indexes for query:",gl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,is(t))):se.resolve())}gs(e,t){if(N_(t))return se.resolve(null);let s=is(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Zf(t,null,"F"),s=is(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const m=ot(...c);return this.fs.getDocuments(e,m).next((v=>this.indexManager.getMinOffset(e,s).next((E=>{const x=this.bs(t,v);return this.Ss(t,x,m,E.readTime)?this.gs(e,Zf(t,null,"F")):this.Ds(e,x,t,E)}))))})))))}ps(e,t,s,a){return N_(t)||a.isEqual(Ze.min())?se.resolve(null):this.fs.getDocuments(e,s).next((c=>{const m=this.bs(t,c);return this.Ss(t,m,s,a)?se.resolve(null):(pl()<=it.DEBUG&&Ce("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),gl(t)),this.Ds(e,m,t,iS(a,Mu)).next((v=>v)))}))}bs(e,t){let s=new un(Av(e));return t.forEach(((a,c)=>{qh(e,c)&&(s=s.add(c))})),s}Ss(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ys(e,t,s){return pl()<=it.DEBUG&&Ce("QueryEngine","Using full collection scan to execute query:",gl(t)),this.fs.getDocumentsMatchingQuery(e,t,Wo.min(),s)}Ds(e,t,s,a){return this.fs.getDocumentsMatchingQuery(e,s,a).next((c=>(t.forEach((m=>{c=c.insert(m.key,m)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km="LocalStore",jP=3e8;class BP{constructor(e,t,s,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new Bt(st),this.Fs=new Va((c=>wm(c)),Em),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kP(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function UP(r,e,t,s){return new BP(r,e,t,s)}async function n0(r,e){const t=Qe(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((c=>(a=c,t.Os(e),t.mutationQueue.getAllMutationBatches(s)))).next((c=>{const m=[],v=[];let E=ot();for(const x of a){m.push(x.batchId);for(const P of x.mutations)E=E.add(P.key)}for(const x of c){v.push(x.batchId);for(const P of x.mutations)E=E.add(P.key)}return t.localDocuments.getDocuments(s,E).next((x=>({Ns:x,removedBatchIds:m,addedBatchIds:v})))}))}))}function WP(r,e){const t=Qe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),c=t.xs.newChangeBuffer({trackRemovals:!0});return(function(v,E,x,P){const I=x.batch,k=I.keys();let H=se.resolve();return k.forEach((K=>{H=H.next((()=>P.getEntry(E,K))).next((ne=>{const ee=x.docVersions.get(K);vt(ee!==null,48541),ne.version.compareTo(ee)<0&&(I.applyToRemoteDocument(ne,x),ne.isValidDocument()&&(ne.setReadTime(x.commitVersion),P.addEntry(ne)))}))})),H.next((()=>v.mutationQueue.removeMutationBatch(E,I)))})(t,s,e,c).next((()=>c.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(v){let E=ot();for(let x=0;x<v.mutationResults.length;++x)v.mutationResults[x].transformResults.length>0&&(E=E.add(v.batch.mutations[x].key));return E})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function r0(r){const e=Qe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function HP(r,e){const t=Qe(r),s=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const m=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const v=[];e.targetChanges.forEach(((P,I)=>{const k=a.get(I);if(!k)return;v.push(t.li.removeMatchingKeys(c,P.removedDocuments,I).next((()=>t.li.addMatchingKeys(c,P.addedDocuments,I))));let H=k.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(I)!==null?H=H.withResumeToken(An.EMPTY_BYTE_STRING,Ze.min()).withLastLimboFreeSnapshotVersion(Ze.min()):P.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(P.resumeToken,s)),a=a.insert(I,H),(function(ne,ee,ye){return ne.resumeToken.approximateByteSize()===0||ee.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=jP?!0:ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0})(k,H,P)&&v.push(t.li.updateTargetData(c,H))}));let E=qs(),x=ot();if(e.documentUpdates.forEach((P=>{e.resolvedLimboDocuments.has(P)&&v.push(t.persistence.referenceDelegate.updateLimboDocument(c,P))})),v.push(qP(c,m,e.documentUpdates).next((P=>{E=P.Bs,x=P.Ls}))),!s.isEqual(Ze.min())){const P=t.li.getLastRemoteSnapshotVersion(c).next((I=>t.li.setTargetsMetadata(c,c.currentSequenceNumber,s)));v.push(P)}return se.waitFor(v).next((()=>m.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,E,x))).next((()=>E))})).then((c=>(t.vs=a,c)))}function qP(r,e,t){let s=ot(),a=ot();return t.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let m=qs();return t.forEach(((v,E)=>{const x=c.get(v);E.isFoundDocument()!==x.isFoundDocument()&&(a=a.add(v)),E.isNoDocument()&&E.version.isEqual(Ze.min())?(e.removeEntry(v,E.readTime),m=m.insert(v,E)):!x.isValidDocument()||E.version.compareTo(x.version)>0||E.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(E),m=m.insert(v,E)):Ce(km,"Ignoring outdated watch update for ",v,". Current version:",x.version," Watch version:",E.version)})),{Bs:m,Ls:a}}))}function $P(r,e){const t=Qe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=_m),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function GP(r,e){const t=Qe(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.li.getTargetData(s,e).next((c=>c?(a=c,se.resolve(a)):t.li.allocateTargetId(s).next((m=>(a=new Oo(e,m,"TargetPurposeListen",s.currentSequenceNumber),t.li.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.vs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(s.targetId,s),t.Fs.set(e,s.targetId)),s}))}async function Jf(r,e,t){const s=Qe(r),a=s.vs.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,(m=>s.persistence.referenceDelegate.removeTarget(m,a)))}catch(m){if(!Ul(m))throw m;Ce(km,`Failed to update sequence numbers for target ${e}: ${m}`)}s.vs=s.vs.remove(e),s.Fs.delete(a.target)}function q_(r,e,t){const s=Qe(r);let a=Ze.min(),c=ot();return s.persistence.runTransaction("Execute query","readwrite",(m=>(function(E,x,P){const I=Qe(E),k=I.Fs.get(P);return k!==void 0?se.resolve(I.vs.get(k)):I.li.getTargetData(x,P)})(s,m,is(e)).next((v=>{if(v)return a=v.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(m,v.targetId).next((E=>{c=E}))})).next((()=>s.Cs.getDocumentsMatchingQuery(m,e,t?a:Ze.min(),t?c:ot()))).next((v=>(ZP(s,LS(e),v),{documents:v,ks:c})))))}function ZP(r,e,t){let s=r.Ms.get(e)||Ze.min();t.forEach(((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Ms.set(e,s)}class $_{constructor(){this.activeTargetIds=FS()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KP{constructor(){this.vo=new $_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,s){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new $_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="ConnectivityMonitor";class Z_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ce(G_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ce(G_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rh=null;function em(){return rh===null?rh=(function(){return 268435456+Math.round(2147483648*Math.random())})():rh++,"0x"+rh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf="RestConnection",YP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class XP{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${s}/databases/${a}`,this.$o=this.databaseId.database===wh?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Wo(e,t,s,a,c){const m=em(),v=this.Qo(e,t.toUriEncodedString());Ce(bf,`Sending RPC '${e}' ${m}:`,v,s);const E={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(E,a,c);const{host:x}=new URL(v),P=zl(x);return this.zo(e,v,E,s,P).then((I=>(Ce(bf,`Received RPC '${e}' ${m}: `,I),I)),(I=>{throw kl(bf,`RPC '${e}' ${m} failed with error: `,I,"url: ",v,"request:",s),I}))}jo(e,t,s,a,c,m){return this.Wo(e,t,s,a,c)}Go(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+jl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,c)=>e[c]=a)),s&&s.headers.forEach(((a,c)=>e[c]=a))}Qo(e,t){const s=YP[e];let a=`${this.qo}/v1/${t}:${s}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un="WebChannelConnection",wu=(r,e,t)=>{r.listen(e,(s=>{try{t(s)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Tl extends XP{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Tl.c_){const e=ov();wu(e,sv.STAT_EVENT,(t=>{t.stat===Bf.PROXY?Ce(Un,"STAT_EVENT: detected buffering proxy"):t.stat===Bf.NOPROXY&&Ce(Un,"STAT_EVENT: detected no buffering proxy")})),Tl.c_=!0}}zo(e,t,s,a,c){const m=em();return new Promise(((v,E)=>{const x=new rv;x.setWithCredentials(!0),x.listenOnce(iv.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case sh.NO_ERROR:const I=x.getResponseJson();Ce(Un,`XHR for RPC '${e}' ${m} received:`,JSON.stringify(I)),v(I);break;case sh.TIMEOUT:Ce(Un,`RPC '${e}' ${m} timed out`),E(new Se(ie.DEADLINE_EXCEEDED,"Request time out"));break;case sh.HTTP_ERROR:const k=x.getStatus();if(Ce(Un,`RPC '${e}' ${m} failed with status:`,k,"response text:",x.getResponseText()),k>0){let H=x.getResponseJson();Array.isArray(H)&&(H=H[0]);const K=H==null?void 0:H.error;if(K&&K.status&&K.message){const ne=(function(ye){const he=ye.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(he)>=0?he:ie.UNKNOWN})(K.status);E(new Se(ne,K.message))}else E(new Se(ie.UNKNOWN,"Server responded with status "+x.getStatus()))}else E(new Se(ie.UNAVAILABLE,"Connection failed."));break;default:We(9055,{l_:e,streamId:m,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{Ce(Un,`RPC '${e}' ${m} completed.`)}}));const P=JSON.stringify(a);Ce(Un,`RPC '${e}' ${m} sending request:`,a),x.send(t,"POST",P,s,15)}))}T_(e,t,s){const a=em(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=this.createWebChannelTransport(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(v.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(v.useFetchStreams=!0),this.Go(v.initMessageHeaders,t,s),v.encodeInitMessageHeaders=!0;const x=c.join("");Ce(Un,`Creating RPC '${e}' stream ${a}: ${x}`,v);const P=m.createWebChannel(x,v);this.I_(P);let I=!1,k=!1;const H=new JP({Ho:K=>{k?Ce(Un,`Not sending because RPC '${e}' stream ${a} is closed:`,K):(I||(Ce(Un,`Opening RPC '${e}' stream ${a} transport.`),P.open(),I=!0),Ce(Un,`RPC '${e}' stream ${a} sending:`,K),P.send(K))},Jo:()=>P.close()});return wu(P,Tu.EventType.OPEN,(()=>{k||(Ce(Un,`RPC '${e}' stream ${a} transport opened.`),H.i_())})),wu(P,Tu.EventType.CLOSE,(()=>{k||(k=!0,Ce(Un,`RPC '${e}' stream ${a} transport closed`),H.o_(),this.E_(P))})),wu(P,Tu.EventType.ERROR,(K=>{k||(k=!0,kl(Un,`RPC '${e}' stream ${a} transport errored. Name:`,K.name,"Message:",K.message),H.o_(new Se(ie.UNAVAILABLE,"The operation could not be completed")))})),wu(P,Tu.EventType.MESSAGE,(K=>{var ne;if(!k){const ee=K.data[0];vt(!!ee,16349);const ye=ee,he=(ye==null?void 0:ye.error)||((ne=ye[0])==null?void 0:ne.error);if(he){Ce(Un,`RPC '${e}' stream ${a} received error:`,he);const ve=he.status;let Be=(function(j){const R=tn[j];if(R!==void 0)return Wv(R)})(ve),Ke=he.message;Be===void 0&&(Be=ie.INTERNAL,Ke="Unknown error status: "+ve+" with message "+he.message),k=!0,H.o_(new Se(Be,Ke)),P.close()}else Ce(Un,`RPC '${e}' stream ${a} received:`,ee),H.__(ee)}})),Tl.u_(),setTimeout((()=>{H.s_()}),0),H}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,s){super.Go(e,t,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return av()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(r){return new Tl(r)}function kf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(r){return new iP(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tl.c_=!1;class i0{constructor(e,t,s=1e3,a=1.5,c=6e4){this.Ci=e,this.timerId=t,this.R_=s,this.A_=a,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&Ce("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="PersistentStream";class s0{constructor(e,t,s,a,c,m,v,E){this.Ci=e,this.b_=s,this.S_=a,this.connection=c,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=v,this.listener=E,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new i0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Hs(t.toString()),Hs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new Se(ie.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ce(K_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Ce(K_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class tC extends s0{constructor(e,t,s,a,c,m){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,m),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=aP(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Ze.min();const m=c.targetChange;return m.targetIds&&m.targetIds.length?Ze.min():m.readTime?os(m.readTime):Ze.min()})(e);return this.listener.J_(t,s)}Z_(e){const t={};t.database=Xf(this.serializer),t.addTarget=(function(c,m){let v;const E=m.target;if(v=$f(E)?{documents:cP(c,E)}:{query:hP(c,E).ft},v.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){v.resumeToken=$v(c,m.resumeToken);const x=Kf(c,m.expectedCount);x!==null&&(v.expectedCount=x)}else if(m.snapshotVersion.compareTo(Ze.min())>0){v.readTime=Ih(c,m.snapshotVersion.toTimestamp());const x=Kf(c,m.expectedCount);x!==null&&(v.expectedCount=x)}return v})(this.serializer,e);const s=fP(this.serializer,e);s&&(t.labels=s),this.K_(t)}X_(e){const t={};t.database=Xf(this.serializer),t.removeTarget=e,this.K_(t)}}class nC extends s0{constructor(e,t,s,a,c,m){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,m),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return vt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,vt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){vt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=uP(e.writeResults,e.commitTime),s=os(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Xf(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>lP(this.serializer,s)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{}class iC extends rC{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Se(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Wo(e,Qf(t,s),a,c,m))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Se(ie.UNKNOWN,c.toString())}))}jo(e,t,s,a,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,v])=>this.connection.jo(e,Qf(t,s),a,m,v,c))).catch((m=>{throw m.name==="FirebaseError"?(m.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Se(ie.UNKNOWN,m.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function sC(r,e,t,s){return new iC(r,e,t,s)}class oC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Hs(t),this.aa=!1):Ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da="RemoteStore";class aC{constructor(e,t,s,a,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((m=>{s.enqueueAndForget((async()=>{za(this)&&(Ce(Da,"Restarting streams for network reachability change."),await(async function(E){const x=Qe(E);x.Ea.add(4),await Zu(x),x.Va.set("Unknown"),x.Ea.delete(4),await Qh(x)})(this))}))})),this.Va=new oC(s,a)}}async function Qh(r){if(za(r))for(const e of r.Ra)await e(!0)}async function Zu(r){for(const e of r.Ra)await e(!1)}function o0(r,e){const t=Qe(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Lm(t)?Nm(t):Hl(t).O_()&&Rm(t,e))}function Am(r,e){const t=Qe(r),s=Hl(t);t.Ia.delete(e),s.O_()&&a0(t,e),t.Ia.size===0&&(s.O_()?s.L_():za(t)&&t.Va.set("Unknown"))}function Rm(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ze.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Hl(r).Z_(e)}function a0(r,e){r.da.$e(e),Hl(r).X_(e)}function Nm(r){r.da=new eP({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Hl(r).start(),r.Va.ua()}function Lm(r){return za(r)&&!Hl(r).x_()&&r.Ia.size>0}function za(r){return Qe(r).Ea.size===0}function l0(r){r.da=void 0}async function lC(r){r.Va.set("Online")}async function uC(r){r.Ia.forEach(((e,t)=>{Rm(r,e)}))}async function cC(r,e){l0(r),Lm(r)?(r.Va.ha(e),Nm(r)):r.Va.set("Unknown")}async function hC(r,e,t){if(r.Va.set("Online"),e instanceof qv&&e.state===2&&e.cause)try{await(async function(a,c){const m=c.cause;for(const v of c.targetIds)a.Ia.has(v)&&(await a.remoteSyncer.rejectListen(v,m),a.Ia.delete(v),a.da.removeTarget(v))})(r,e)}catch(s){Ce(Da,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ph(r,s)}else if(e instanceof uh?r.da.Xe(e):e instanceof Hv?r.da.st(e):r.da.tt(e),!t.isEqual(Ze.min()))try{const s=await r0(r.localStore);t.compareTo(s)>=0&&await(function(c,m){const v=c.da.Tt(m);return v.targetChanges.forEach(((E,x)=>{if(E.resumeToken.approximateByteSize()>0){const P=c.Ia.get(x);P&&c.Ia.set(x,P.withResumeToken(E.resumeToken,m))}})),v.targetMismatches.forEach(((E,x)=>{const P=c.Ia.get(E);if(!P)return;c.Ia.set(E,P.withResumeToken(An.EMPTY_BYTE_STRING,P.snapshotVersion)),a0(c,E);const I=new Oo(P.target,E,x,P.sequenceNumber);Rm(c,I)})),c.remoteSyncer.applyRemoteEvent(v)})(r,t)}catch(s){Ce(Da,"Failed to raise snapshot:",s),await Ph(r,s)}}async function Ph(r,e,t){if(!Ul(e))throw e;r.Ea.add(1),await Zu(r),r.Va.set("Offline"),t||(t=()=>r0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Ce(Da,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Qh(r)}))}function u0(r,e){return e().catch((t=>Ph(r,t,e)))}async function Yh(r){const e=Qe(r),t=Go(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:_m;for(;dC(e);)try{const a=await $P(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,fC(e,a)}catch(a){await Ph(e,a)}c0(e)&&h0(e)}function dC(r){return za(r)&&r.Ta.length<10}function fC(r,e){r.Ta.push(e);const t=Go(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function c0(r){return za(r)&&!Go(r).x_()&&r.Ta.length>0}function h0(r){Go(r).start()}async function mC(r){Go(r).ra()}async function pC(r){const e=Go(r);for(const t of r.Ta)e.ea(t.mutations)}async function gC(r,e,t){const s=r.Ta.shift(),a=xm.from(s,e,t);await u0(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await Yh(r)}async function _C(r,e){e&&Go(r).Y_&&await(async function(s,a){if((function(m){return YS(m)&&m!==ie.ABORTED})(a.code)){const c=s.Ta.shift();Go(s).B_(),await u0(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a))),await Yh(s)}})(r,e),c0(r)&&h0(r)}async function Q_(r,e){const t=Qe(r);t.asyncQueue.verifyOperationInProgress(),Ce(Da,"RemoteStore received new credentials");const s=za(t);t.Ea.add(3),await Zu(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Qh(t)}async function yC(r,e){const t=Qe(r);e?(t.Ea.delete(2),await Qh(t)):e||(t.Ea.add(2),await Zu(t),t.Va.set("Unknown"))}function Hl(r){return r.ma||(r.ma=(function(t,s,a){const c=Qe(t);return c.sa(),new tC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(r.datastore,r.asyncQueue,{Zo:lC.bind(null,r),Yo:uC.bind(null,r),t_:cC.bind(null,r),J_:hC.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),Lm(r)?Nm(r):r.Va.set("Unknown")):(await r.ma.stop(),l0(r))}))),r.ma}function Go(r){return r.fa||(r.fa=(function(t,s,a){const c=Qe(t);return c.sa(),new nC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:mC.bind(null,r),t_:_C.bind(null,r),ta:pC.bind(null,r),na:gC.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await Yh(r)):(await r.fa.stop(),r.Ta.length>0&&(Ce(Da,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,t,s,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new Bo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((m=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,c){const m=Date.now()+s,v=new Mm(e,t,m,a,c);return v.start(s),v}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dm(r,e){if(Hs("AsyncQueue",`${e}: ${r}`),Ul(r))return new Se(ie.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{static emptySet(e){return new xl(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Le.comparator(t.key,s.key):(t,s)=>Le.comparator(t.key,s.key),this.keyedMap=xu(),this.sortedSet=new Bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new xl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(){this.ga=new Bt(Le.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):We(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Ml{constructor(e,t,s,a,c,m,v,E,x){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=m,this.syncStateChanged=v,this.excludesMetadataChanges=E,this.hasCachedResults=x}static fromInitialDocuments(e,t,s,a,c){const m=[];return t.forEach((v=>{m.push({type:0,doc:v})})),new Ml(e,t,xl.emptySet(t),m,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class wC{constructor(){this.queries=X_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=Qe(t),c=a.queries;a.queries=X_(),c.forEach(((m,v)=>{for(const E of v.ba)E.onError(s)}))})(this,new Se(ie.ABORTED,"Firestore shutting down"))}}function X_(){return new Va((r=>kv(r)),Hh)}async function d0(r,e){const t=Qe(r);let s=3;const a=e.query;let c=t.queries.get(a);c?!c.Sa()&&e.Da()&&(s=2):(c=new vC,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await t.onListen(a,!0);break;case 1:c.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(m){const v=Dm(m,`Initialization of query '${gl(e.query)}' failed`);return void e.onError(v)}t.queries.set(a,c),c.ba.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Om(t)}async function f0(r,e){const t=Qe(r),s=e.query;let a=3;const c=t.queries.get(s);if(c){const m=c.ba.indexOf(e);m>=0&&(c.ba.splice(m,1),c.ba.length===0?a=e.Da()?0:1:!c.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function EC(r,e){const t=Qe(r);let s=!1;for(const a of e){const c=a.query,m=t.queries.get(c);if(m){for(const v of m.ba)v.Fa(a)&&(s=!0);m.wa=a}}s&&Om(t)}function TC(r,e,t){const s=Qe(r),a=s.queries.get(e);if(a)for(const c of a.ba)c.onError(t);s.queries.delete(e)}function Om(r){r.Ca.forEach((e=>{e.next()}))}var tm,J_;(J_=tm||(tm={})).Ma="default",J_.Cache="cache";class m0{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Ml(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==tm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e){this.key=e}}class g0{constructor(e){this.key=e}}class xC{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ot(),this.mutatedKeys=ot(),this.eu=Av(e),this.tu=new xl(this.eu)}get nu(){return this.Za}ru(e,t){const s=t?t.iu:new Y_,a=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,m=a,v=!1;const E=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,x=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((P,I)=>{const k=a.get(P),H=qh(this.query,I)?I:null,K=!!k&&this.mutatedKeys.has(k.key),ne=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let ee=!1;k&&H?k.data.isEqual(H.data)?K!==ne&&(s.track({type:3,doc:H}),ee=!0):this.su(k,H)||(s.track({type:2,doc:H}),ee=!0,(E&&this.eu(H,E)>0||x&&this.eu(H,x)<0)&&(v=!0)):!k&&H?(s.track({type:0,doc:H}),ee=!0):k&&!H&&(s.track({type:1,doc:k}),ee=!0,(E||x)&&(v=!0)),ee&&(H?(m=m.add(H),c=ne?c.add(P):c.delete(P)):(m=m.delete(P),c=c.delete(P)))})),this.query.limit!==null)for(;m.size>this.query.limit;){const P=this.query.limitType==="F"?m.last():m.first();m=m.delete(P.key),c=c.delete(P.key),s.track({type:1,doc:P})}return{tu:m,iu:s,Ss:v,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const m=e.iu.ya();m.sort(((P,I)=>(function(H,K){const ne=ee=>{switch(ee){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return We(20277,{Vt:ee})}};return ne(H)-ne(K)})(P.type,I.type)||this.eu(P.doc,I.doc))),this.ou(s),a=a??!1;const v=t&&!a?this._u():[],E=this.Ya.size===0&&this.current&&!a?1:0,x=E!==this.Xa;return this.Xa=E,m.length!==0||x?{snapshot:new Ml(this.query,e.tu,c,m,e.mutatedKeys,E===0,x,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:v}:{au:v}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Y_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ot(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const t=[];return e.forEach((s=>{this.Ya.has(s)||t.push(new g0(s))})),this.Ya.forEach((s=>{e.has(s)||t.push(new p0(s))})),t}cu(e){this.Za=e.ks,this.Ya=ot();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ml.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Vm="SyncEngine";class IC{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class SC{constructor(e){this.key=e,this.hu=!1}}class PC{constructor(e,t,s,a,c,m){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=m,this.Pu={},this.Tu=new Va((v=>kv(v)),Hh),this.Iu=new Map,this.Eu=new Set,this.Ru=new Bt(Le.comparator),this.Au=new Map,this.Vu=new Pm,this.du={},this.mu=new Map,this.fu=Ll.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function CC(r,e,t=!0){const s=T0(r);let a;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.lu()):a=await _0(s,e,t,!0),a}async function bC(r,e){const t=T0(r);await _0(t,e,!0,!1)}async function _0(r,e,t,s){const a=await GP(r.localStore,is(e)),c=a.targetId,m=r.sharedClientState.addLocalQueryTarget(c,t);let v;return s&&(v=await kC(r,e,c,m==="current",a.resumeToken)),r.isPrimaryClient&&t&&o0(r.remoteStore,a),v}async function kC(r,e,t,s,a){r.pu=(I,k,H)=>(async function(ne,ee,ye,he){let ve=ee.view.ru(ye);ve.Ss&&(ve=await q_(ne.localStore,ee.query,!1).then((({documents:j})=>ee.view.ru(j,ve))));const Be=he&&he.targetChanges.get(ee.targetId),Ke=he&&he.targetMismatches.get(ee.targetId)!=null,Me=ee.view.applyChanges(ve,ne.isPrimaryClient,Be,Ke);return ty(ne,ee.targetId,Me.au),Me.snapshot})(r,I,k,H);const c=await q_(r.localStore,e,!0),m=new xC(e,c.ks),v=m.ru(c.documents),E=Gu.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",a),x=m.applyChanges(v,r.isPrimaryClient,E);ty(r,t,x.au);const P=new IC(e,t,m);return r.Tu.set(e,P),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),x.snapshot}async function AC(r,e,t){const s=Qe(r),a=s.Tu.get(e),c=s.Iu.get(a.targetId);if(c.length>1)return s.Iu.set(a.targetId,c.filter((m=>!Hh(m,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Jf(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&Am(s.remoteStore,a.targetId),nm(s,a.targetId)})).catch(Bl)):(nm(s,a.targetId),await Jf(s.localStore,a.targetId,!0))}async function RC(r,e){const t=Qe(r),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Am(t.remoteStore,s.targetId))}async function NC(r,e,t){const s=FC(r);try{const a=await(function(m,v){const E=Qe(m),x=At.now(),P=v.reduce(((H,K)=>H.add(K.key)),ot());let I,k;return E.persistence.runTransaction("Locally write mutations","readwrite",(H=>{let K=qs(),ne=ot();return E.xs.getEntries(H,P).next((ee=>{K=ee,K.forEach(((ye,he)=>{he.isValidDocument()||(ne=ne.add(ye))}))})).next((()=>E.localDocuments.getOverlayedDocuments(H,K))).next((ee=>{I=ee;const ye=[];for(const he of v){const ve=$S(he,I.get(he.key).overlayedDocument);ve!=null&&ye.push(new Qo(he.key,ve,Ev(ve.value.mapValue),ss.exists(!0)))}return E.mutationQueue.addMutationBatch(H,x,ye,v)})).next((ee=>{k=ee;const ye=ee.applyToLocalDocumentSet(I,ne);return E.documentOverlayCache.saveOverlays(H,ee.batchId,ye)}))})).then((()=>({batchId:k.batchId,changes:Nv(I)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(m,v,E){let x=m.du[m.currentUser.toKey()];x||(x=new Bt(st)),x=x.insert(v,E),m.du[m.currentUser.toKey()]=x})(s,a.batchId,t),await Ku(s,a.changes),await Yh(s.remoteStore)}catch(a){const c=Dm(a,"Failed to persist write");t.reject(c)}}async function y0(r,e){const t=Qe(r);try{const s=await HP(t.localStore,e);e.targetChanges.forEach(((a,c)=>{const m=t.Au.get(c);m&&(vt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?m.hu=!0:a.modifiedDocuments.size>0?vt(m.hu,14607):a.removedDocuments.size>0&&(vt(m.hu,42227),m.hu=!1))})),await Ku(t,s,e)}catch(s){await Bl(s)}}function ey(r,e,t){const s=Qe(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((c,m)=>{const v=m.view.va(e);v.snapshot&&a.push(v.snapshot)})),(function(m,v){const E=Qe(m);E.onlineState=v;let x=!1;E.queries.forEach(((P,I)=>{for(const k of I.ba)k.va(v)&&(x=!0)})),x&&Om(E)})(s.eventManager,e),a.length&&s.Pu.J_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function LC(r,e,t){const s=Qe(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),c=a&&a.key;if(c){let m=new Bt(Le.comparator);m=m.insert(c,Hn.newNoDocument(c,Ze.min()));const v=ot().add(c),E=new Zh(Ze.min(),new Map,new Bt(st),m,v);await y0(s,E),s.Ru=s.Ru.remove(c),s.Au.delete(e),zm(s)}else await Jf(s.localStore,e,!1).then((()=>nm(s,e,t))).catch(Bl)}async function MC(r,e){const t=Qe(r),s=e.batch.batchId;try{const a=await WP(t.localStore,e);w0(t,s,null),v0(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ku(t,a)}catch(a){await Bl(a)}}async function DC(r,e,t){const s=Qe(r);try{const a=await(function(m,v){const E=Qe(m);return E.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let P;return E.mutationQueue.lookupMutationBatch(x,v).next((I=>(vt(I!==null,37113),P=I.keys(),E.mutationQueue.removeMutationBatch(x,I)))).next((()=>E.mutationQueue.performConsistencyCheck(x))).next((()=>E.documentOverlayCache.removeOverlaysForBatchId(x,P,v))).next((()=>E.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,P))).next((()=>E.localDocuments.getDocuments(x,P)))}))})(s.localStore,e);w0(s,e,t),v0(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ku(s,a)}catch(a){await Bl(a)}}function v0(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function w0(r,e,t){const s=Qe(r);let a=s.du[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),s.du[s.currentUser.toKey()]=a}}function nm(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((s=>{r.Vu.containsKey(s)||E0(r,s)}))}function E0(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(Am(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),zm(r))}function ty(r,e,t){for(const s of t)s instanceof p0?(r.Vu.addReference(s.key,e),OC(r,s)):s instanceof g0?(Ce(Vm,"Document no longer in limbo: "+s.key),r.Vu.removeReference(s.key,e),r.Vu.containsKey(s.key)||E0(r,s.key)):We(19791,{wu:s})}function OC(r,e){const t=e.key,s=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(s)||(Ce(Vm,"New document in limbo: "+t),r.Eu.add(s),zm(r))}function zm(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Le(kt.fromString(e)),s=r.fu.next();r.Au.set(s,new SC(t)),r.Ru=r.Ru.insert(t,s),o0(r.remoteStore,new Oo(is(Wh(t.path)),s,"TargetPurposeLimboResolution",jh.ce))}}async function Ku(r,e,t){const s=Qe(r),a=[],c=[],m=[];s.Tu.isEmpty()||(s.Tu.forEach(((v,E)=>{m.push(s.pu(E,e,t).then((x=>{var P;if((x||t)&&s.isPrimaryClient){const I=x?!x.fromCache:(P=t==null?void 0:t.targetChanges.get(E.targetId))==null?void 0:P.current;s.sharedClientState.updateQueryState(E.targetId,I?"current":"not-current")}if(x){a.push(x);const I=bm.Es(E.targetId,x);c.push(I)}})))})),await Promise.all(m),s.Pu.J_(a),await(async function(E,x){const P=Qe(E);try{await P.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>se.forEach(x,(k=>se.forEach(k.Ts,(H=>P.persistence.referenceDelegate.addReference(I,k.targetId,H))).next((()=>se.forEach(k.Is,(H=>P.persistence.referenceDelegate.removeReference(I,k.targetId,H)))))))))}catch(I){if(!Ul(I))throw I;Ce(km,"Failed to update sequence numbers: "+I)}for(const I of x){const k=I.targetId;if(!I.fromCache){const H=P.vs.get(k),K=H.snapshotVersion,ne=H.withLastLimboFreeSnapshotVersion(K);P.vs=P.vs.insert(k,ne)}}})(s.localStore,c))}async function VC(r,e){const t=Qe(r);if(!t.currentUser.isEqual(e)){Ce(Vm,"User change. New user:",e.toKey());const s=await n0(t.localStore,e);t.currentUser=e,(function(c,m){c.mu.forEach((v=>{v.forEach((E=>{E.reject(new Se(ie.CANCELLED,m))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ku(t,s.Ns)}}function zC(r,e){const t=Qe(r),s=t.Au.get(e);if(s&&s.hu)return ot().add(s.key);{let a=ot();const c=t.Iu.get(e);if(!c)return a;for(const m of c){const v=t.Tu.get(m);a=a.unionWith(v.view.nu)}return a}}function T0(r){const e=Qe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=y0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LC.bind(null,e),e.Pu.J_=EC.bind(null,e.eventManager),e.Pu.yu=TC.bind(null,e.eventManager),e}function FC(r){const e=Qe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DC.bind(null,e),e}class Ch{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return UP(this.persistence,new FP,e.initialUser,this.serializer)}Cu(e){return new t0(Cm.Vi,this.serializer)}Du(e){return new KP}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ch.provider={build:()=>new Ch};class jC extends Ch{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){vt(this.persistence.referenceDelegate instanceof Sh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new IP(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Cr.withCacheSize(this.cacheSizeBytes):Cr.DEFAULT;return new t0((s=>Sh.Vi(s,t)),this.serializer)}}class rm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>ey(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=VC.bind(null,this.syncEngine),await yC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new wC})()}createDatastore(e){const t=Kh(e.databaseInfo.databaseId),s=eC(e.databaseInfo);return sC(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,c,m,v){return new aC(s,a,c,m,v)})(this.localStore,this.datastore,e.asyncQueue,(t=>ey(this.syncEngine,t,0)),(function(){return Z_.v()?new Z_:new QP})())}createSyncEngine(e,t){return(function(a,c,m,v,E,x,P){const I=new PC(a,c,m,v,E,x);return P&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const c=Qe(a);Ce(Da,"RemoteStore shutting down."),c.Ea.add(5),await Zu(c),c.Aa.shutdown(),c.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}rm.provider={build:()=>new rm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Hs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="FirestoreClient";class BC{constructor(e,t,s,a,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this._databaseInfo=a,this.user=Wn.UNAUTHENTICATED,this.clientId=gm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async m=>{Ce(Zo,"Received user=",m.uid),await this.authCredentialListener(m),this.user=m})),this.appCheckCredentials.start(s,(m=>(Ce(Zo,"Received new app check token=",m),this.appCheckCredentialListener(m,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Dm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Af(r,e){r.asyncQueue.verifyOperationInProgress(),Ce(Zo,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async a=>{s.isEqual(a)||(await n0(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function ny(r,e){r.asyncQueue.verifyOperationInProgress();const t=await UC(r);Ce(Zo,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>Q_(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,a)=>Q_(e.remoteStore,a))),r._onlineComponents=e}async function UC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Ce(Zo,"Using user provided OfflineComponentProvider");try{await Af(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ie.FAILED_PRECONDITION||a.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;kl("Error using user provided cache. Falling back to memory cache: "+t),await Af(r,new Ch)}}else Ce(Zo,"Using default OfflineComponentProvider"),await Af(r,new jC(void 0));return r._offlineComponents}async function I0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Ce(Zo,"Using user provided OnlineComponentProvider"),await ny(r,r._uninitializedComponentsProvider._online)):(Ce(Zo,"Using default OnlineComponentProvider"),await ny(r,new rm))),r._onlineComponents}function WC(r){return I0(r).then((e=>e.syncEngine))}async function im(r){const e=await I0(r),t=e.eventManager;return t.onListen=CC.bind(null,e.syncEngine),t.onUnlisten=AC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=bC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=RC.bind(null,e.syncEngine),t}function HC(r,e,t,s){const a=new x0(s),c=new m0(e,a,t);return r.asyncQueue.enqueueAndForget((async()=>d0(await im(r),c))),()=>{a.Nu(),r.asyncQueue.enqueueAndForget((async()=>f0(await im(r),c)))}}function qC(r,e,t={}){const s=new Bo;return r.asyncQueue.enqueueAndForget((async()=>(function(c,m,v,E,x){const P=new x0({next:k=>{P.Nu(),m.enqueueAndForget((()=>f0(c,I)));const H=k.docs.has(v);!H&&k.fromCache?x.reject(new Se(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&k.fromCache&&E&&E.source==="server"?x.reject(new Se(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(k)},error:k=>x.reject(k)}),I=new m0(Wh(v.path),P,{includeMetadataChanges:!0,Ka:!0});return d0(c,I)})(await im(r),r.asyncQueue,e,t,s))),s.promise}function $C(r,e){const t=new Bo;return r.asyncQueue.enqueueAndForget((async()=>NC(await WC(r),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="ComponentProvider",ry=new Map;function ZC(r,e,t,s,a){return new mS(r,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,S0(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="firestore.googleapis.com",iy=!0;class sy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Se(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=P0,this.ssl=iy}else this.host=e.host,this.ssl=e.ssl??iy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=e0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TP)throw new Se(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=S0(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Se(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Se(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Se(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xh{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new GI;switch(s.type){case"firstParty":return new YI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Se(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=ry.get(t);s&&(Ce(GC,"Removing Datastore"),ry.delete(t),s.terminate())})(this),Promise.resolve()}}function KC(r,e,t,s={}){var x;r=rs(r,Xh);const a=zl(e),c=r._getSettings(),m={...c,emulatorOptions:r._getEmulatorOptions()},v=`${e}:${t}`;a&&(Zy(`https://${v}`),Ky("Firestore",!0)),c.host!==P0&&c.host!==v&&kl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const E={...c,host:v,ssl:a,emulatorOptions:s};if(!Na(E,m)&&(r._setSettings(E),s.mockUserToken)){let P,I;if(typeof s.mockUserToken=="string")P=s.mockUserToken,I=Wn.MOCK_USER;else{P=_x(s.mockUserToken,(x=r._app)==null?void 0:x.options.projectId);const k=s.mockUserToken.sub||s.mockUserToken.user_id;if(!k)throw new Se(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new Wn(k)}r._authCredentials=new ZI(new uv(P,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Fa(this.firestore,e,this._query)}}class $t{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}toJSON(){return{type:$t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(qu(t,$t._jsonSchema))return new $t(e,s||null,new Le(kt.fromString(t.referencePath)))}}$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:rn("string",$t._jsonSchemaVersion),referencePath:rn("string")};class Uo extends Fa{constructor(e,t,s){super(e,t,Wh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new Le(e))}withConverter(e){return new Uo(this.firestore,e,this._path)}}function QC(r,e,...t){if(r=kn(r),cv("collection","path",e),r instanceof Xh){const s=kt.fromString(e,...t);return y_(s),new Uo(r,null,s)}{if(!(r instanceof $t||r instanceof Uo))throw new Se(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(kt.fromString(e,...t));return y_(s),new Uo(r.firestore,null,s)}}function ch(r,e,...t){if(r=kn(r),arguments.length===1&&(e=gm.newId()),cv("doc","path",e),r instanceof Xh){const s=kt.fromString(e,...t);return __(s),new $t(r,null,new Le(s))}{if(!(r instanceof $t||r instanceof Uo))throw new Se(ie.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(kt.fromString(e,...t));return __(s),new $t(r.firestore,r instanceof Uo?r.converter:null,new Le(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="AsyncQueue";class ay{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new i0(this,"async_queue_retry"),this._c=()=>{const s=kf();s&&Ce(oy,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=kf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=kf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Bo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ul(e))throw e;Ce(oy,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Hs("INTERNAL UNHANDLED ERROR: ",ly(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Mm.createAndSchedule(this,e,t,s,(c=>this.hc(c)));return this.tc.push(a),a}uc(){this.nc&&We(47125,{Pc:ly(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function ly(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Dl extends Xh{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new ay,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ay(e),this._firestoreClient=void 0,await e}}}function YC(r,e){const t=typeof r=="object"?r:Jy(),s=typeof r=="string"?r:wh,a=mm(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=px("firestore");c&&KC(a,...c)}return a}function Fm(r){if(r._terminated)throw new Se(ie.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||XC(r),r._firestoreClient}function XC(r){var s,a,c,m;const e=r._freezeSettings(),t=ZC(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,(a=r._app)==null?void 0:a.options.apiKey,e);r._componentsProvider||(c=e.localCache)!=null&&c._offlineComponentProvider&&((m=e.localCache)!=null&&m._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new BC(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(E){const x=E==null?void 0:E._online.build();return{_offline:E==null?void 0:E._offline.build(x),_online:x}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pi(An.fromBase64String(e))}catch(t){throw new Se(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pi(An.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:pi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(qu(e,pi._jsonSchema))return pi.fromBase64String(e.bytes)}}pi._jsonSchemaVersion="firestore/bytes/1.0",pi._jsonSchema={type:rn("string",pi._jsonSchemaVersion),bytes:rn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Se(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:as._jsonSchemaVersion}}static fromJSON(e){if(qu(e,as._jsonSchema))return new as(e.latitude,e.longitude)}}as._jsonSchemaVersion="firestore/geoPoint/1.0",as._jsonSchema={type:rn("string",as._jsonSchemaVersion),latitude:rn("number"),longitude:rn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ai._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(qu(e,Ai._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ai(e.vectorValues);throw new Se(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ai._jsonSchemaVersion="firestore/vectorValue/1.0",Ai._jsonSchema={type:rn("string",Ai._jsonSchemaVersion),vectorValues:rn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=/^__.*__$/;class eb{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Qo(e,this.data,this.fieldMask,t,this.fieldTransforms):new $u(e,this.data,t,this.fieldTransforms)}}class C0{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Qo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function b0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw We(40011,{dataSource:r})}}class Bm{constructor(e,t,s,a,c,m){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=m||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Bm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return bh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(b0(this.dataSource)&&JC.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class tb{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Kh(e)}createContext(e,t,s,a=!1){return new Bm({dataSource:e,methodName:t,targetDoc:s,path:bn.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Um(r){const e=r._freezeSettings(),t=Kh(r._databaseId);return new tb(r._databaseId,!!e.ignoreUndefinedProperties,t)}function nb(r,e,t,s,a,c={}){const m=r.createContext(c.merge||c.mergeFields?2:0,e,t,a);Hm("Data must be an object, but it was:",m,s);const v=k0(s,m);let E,x;if(c.merge)E=new Br(m.fieldMask),x=m.fieldTransforms;else if(c.mergeFields){const P=[];for(const I of c.mergeFields){const k=Ol(e,I,t);if(!m.contains(k))throw new Se(ie.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);N0(P,k)||P.push(k)}E=new Br(P),x=m.fieldTransforms.filter((I=>E.covers(I.field)))}else E=null,x=m.fieldTransforms;return new eb(new br(v),E,x)}class ed extends Jh{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ed}}class Wm extends Jh{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new Bu(e.serializer,Dv(e.serializer,this.Vc));return new US(e.path,t)}isEqual(e){return e instanceof Wm&&this.Vc===e.Vc}}function rb(r,e,t,s){const a=r.createContext(1,e,t);Hm("Data must be an object, but it was:",a,s);const c=[],m=br.empty();Ko(s,((E,x)=>{const P=R0(e,E,t);x=kn(x);const I=a.childContextForFieldPath(P);if(x instanceof ed)c.push(P);else{const k=Qu(x,I);k!=null&&(c.push(P),m.set(P,k))}}));const v=new Br(c);return new C0(m,v,a.fieldTransforms)}function ib(r,e,t,s,a,c){const m=r.createContext(1,e,t),v=[Ol(e,s,t)],E=[a];if(c.length%2!=0)throw new Se(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<c.length;k+=2)v.push(Ol(e,c[k])),E.push(c[k+1]);const x=[],P=br.empty();for(let k=v.length-1;k>=0;--k)if(!N0(x,v[k])){const H=v[k];let K=E[k];K=kn(K);const ne=m.childContextForFieldPath(H);if(K instanceof ed)x.push(H);else{const ee=Qu(K,ne);ee!=null&&(x.push(H),P.set(H,ee))}}const I=new Br(x);return new C0(P,I,m.fieldTransforms)}function sb(r,e,t,s=!1){return Qu(t,r.createContext(s?4:3,e))}function Qu(r,e){if(A0(r=kn(r)))return Hm("Unsupported field value:",e,r),k0(r,e);if(r instanceof Jh)return(function(s,a){if(!b0(a.dataSource))throw a.createError(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,a){const c=[];let m=0;for(const v of s){let E=Qu(v,a.childContextForArray(m));E==null&&(E={nullValue:"NULL_VALUE"}),c.push(E),m++}return{arrayValue:{values:c}}})(r,e)}return(function(s,a){if((s=kn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Dv(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=At.fromDate(s);return{timestampValue:Ih(a.serializer,c)}}if(s instanceof At){const c=new At(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ih(a.serializer,c)}}if(s instanceof as)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof pi)return{bytesValue:$v(a.serializer,s._byteString)};if(s instanceof $t){const c=a.databaseId,m=s.firestore._databaseId;if(!m.isEqual(c))throw a.createError(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Sm(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Ai)return(function(m,v){const E=m instanceof Ai?m.toArray():m;return{mapValue:{fields:{[vv]:{stringValue:wv},[Eh]:{arrayValue:{values:E.map((P=>{if(typeof P!="number")throw v.createError("VectorValues must only contain numeric values.");return Tm(v.serializer,P)}))}}}}}})(s,a);if(Jv(s))return s._toProto(a.serializer);throw a.createError(`Unsupported field value: ${Fh(s)}`)})(r,e)}function k0(r,e){const t={};return fv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ko(r,((s,a)=>{const c=Qu(a,e.childContextForField(s));c!=null&&(t[s]=c)})),{mapValue:{fields:t}}}function A0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof At||r instanceof as||r instanceof pi||r instanceof $t||r instanceof Jh||r instanceof Ai||Jv(r))}function Hm(r,e,t){if(!A0(t)||!hv(t)){const s=Fh(t);throw s==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+s)}}function Ol(r,e,t){if((e=kn(e))instanceof jm)return e._internalPath;if(typeof e=="string")return R0(r,e);throw bh("Field path arguments must be of type string or ",r,!1,void 0,t)}const ob=new RegExp("[~\\*/\\[\\]]");function R0(r,e,t){if(e.search(ob)>=0)throw bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new jm(...e.split("."))._internalPath}catch{throw bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function bh(r,e,t,s,a){const c=s&&!s.isEmpty(),m=a!==void 0;let v=`Function ${e}() called with invalid data`;t&&(v+=" (via `toFirestore()`)"),v+=". ";let E="";return(c||m)&&(E+=" (found",c&&(E+=` in field ${s}`),m&&(E+=` in document ${a}`),E+=")"),new Se(ie.INVALID_ARGUMENT,v+r+E)}function N0(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{convertValue(e,t="none"){switch($o(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw We(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ko(e,((a,c)=>{s[a]=this.convertValue(c,t)})),s}convertVectorValue(e){var s,a,c;const t=(c=(a=(s=e.fields)==null?void 0:s[Eh].arrayValue)==null?void 0:a.values)==null?void 0:c.map((m=>Qt(m.doubleValue)));return new Ai(t)}convertGeoPoint(e){return new as(Qt(e.latitude),Qt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Uh(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Du(e));default:return null}}convertTimestamp(e){const t=Ho(e);return new At(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=kt.fromString(e);vt(Xv(s),9688,{name:e});const a=new Ou(s.get(1),s.get(3)),c=new Le(s.popFirst(5));return a.isEqual(t)||Hs(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0 extends ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new pi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,t)}}function lb(r){return new Wm("increment",r)}const uy="@firebase/firestore",cy="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(r){return(function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const c of s)if(c in a&&typeof a[c]=="function")return!0;return!1})(r,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,t,s,a,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ub(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Ol("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ub extends M0{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Se(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qm{}class D0 extends qm{}function hb(r,e,...t){let s=[];e instanceof qm&&s.push(e),s=s.concat(t),(function(c){const m=c.filter((E=>E instanceof Gm)).length,v=c.filter((E=>E instanceof $m)).length;if(m>1||m>0&&v>0)throw new Se(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)r=a._apply(r);return r}class $m extends D0{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new $m(e,t,s)}_apply(e){const t=this._parse(e);return O0(e._query,t),new Fa(e.firestore,e.converter,Gf(e._query,t))}_parse(e){const t=Um(e.firestore);return(function(c,m,v,E,x,P,I){let k;if(x.isKeyField()){if(P==="array-contains"||P==="array-contains-any")throw new Se(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${P}' queries on documentId().`);if(P==="in"||P==="not-in"){fy(I,P);const K=[];for(const ne of I)K.push(dy(E,c,ne));k={arrayValue:{values:K}}}else k=dy(E,c,I)}else P!=="in"&&P!=="not-in"&&P!=="array-contains-any"||fy(I,P),k=sb(v,m,I,P==="in"||P==="not-in");return nn.create(x,P,k)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Gm extends qm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Gm(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Ni.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,c){let m=a;const v=c.getFlattenedFilters();for(const E of v)O0(m,E),m=Gf(m,E)})(e._query,t),new Fa(e.firestore,e.converter,Gf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Zm extends D0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Zm(e,t)}_apply(e){const t=(function(a,c,m){if(a.startAt!==null)throw new Se(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Se(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zu(c,m)})(e._query,this._field,this._direction);return new Fa(e.firestore,e.converter,NS(e._query,t))}}function db(r,e="asc"){const t=e,s=Ol("orderBy",r);return Zm._create(s,t)}function dy(r,e,t){if(typeof(t=kn(t))=="string"){if(t==="")throw new Se(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bv(e)&&t.indexOf("/")!==-1)throw new Se(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(kt.fromString(t));if(!Le.isDocumentKey(s))throw new Se(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return P_(r,new Le(s))}if(t instanceof $t)return P_(r,t._key);throw new Se(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fh(t)}.`)}function fy(r,e){if(!Array.isArray(r)||r.length===0)throw new Se(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function O0(r,e){const t=(function(a,c){for(const m of a)for(const v of m.getFlattenedFilters())if(c.indexOf(v.op)>=0)return v.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Se(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Se(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function fb(r,e,t){let s;return s=r?r.toFirestore(e):e,s}class Su{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ka extends M0{constructor(e,t,s,a,c,m){super(e,t,s,a,m),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Ol("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ka._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ka._jsonSchemaVersion="firestore/documentSnapshot/1.0",ka._jsonSchema={type:rn("string",ka._jsonSchemaVersion),bundleSource:rn("string","DocumentSnapshot"),bundleName:rn("string"),bundle:rn("string")};class hh extends ka{data(e={}){return super.data(e)}}class Il{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Su(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new hh(this._firestore,this._userDataWriter,s.key,s,new Su(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let m=0;return a._snapshot.docChanges.map((v=>{const E=new hh(a._firestore,a._userDataWriter,v.doc.key,v.doc,new Su(a._snapshot.mutatedKeys.has(v.doc.key),a._snapshot.fromCache),a.query.converter);return v.doc,{type:"added",doc:E,oldIndex:-1,newIndex:m++}}))}{let m=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((v=>c||v.type!==3)).map((v=>{const E=new hh(a._firestore,a._userDataWriter,v.doc.key,v.doc,new Su(a._snapshot.mutatedKeys.has(v.doc.key),a._snapshot.fromCache),a.query.converter);let x=-1,P=-1;return v.type!==0&&(x=m.indexOf(v.doc.key),m=m.delete(v.doc.key)),v.type!==1&&(m=m.add(v.doc),P=m.indexOf(v.doc.key)),{type:mb(v.type),doc:E,oldIndex:x,newIndex:P}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Il._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function mb(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return We(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Il._jsonSchemaVersion="firestore/querySnapshot/1.0",Il._jsonSchema={type:rn("string",Il._jsonSchemaVersion),bundleSource:rn("string","QuerySnapshot"),bundleName:rn("string"),bundle:rn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(r){r=rs(r,$t);const e=rs(r.firestore,Dl),t=Fm(e);return qC(t,r._key).then((s=>F0(e,r,s)))}function V0(r,e,t){r=rs(r,$t);const s=rs(r.firestore,Dl),a=fb(r.converter,e),c=Um(s);return z0(s,[nb(c,"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,ss.none())])}function gb(r,e,t,...s){r=rs(r,$t);const a=rs(r.firestore,Dl),c=Um(a);let m;return m=typeof(e=kn(e))=="string"||e instanceof jm?ib(c,"updateDoc",r._key,e,t,s):rb(c,"updateDoc",r._key,e),z0(a,[m.toMutation(r._key,ss.exists(!0))])}function _b(r,...e){var x,P,I;r=kn(r);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||hy(e[s])||(t=e[s++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(hy(e[s])){const k=e[s];e[s]=(x=k.next)==null?void 0:x.bind(k),e[s+1]=(P=k.error)==null?void 0:P.bind(k),e[s+2]=(I=k.complete)==null?void 0:I.bind(k)}let c,m,v;if(r instanceof $t)m=rs(r.firestore,Dl),v=Wh(r._key.path),c={next:k=>{e[s]&&e[s](F0(m,r,k))},error:e[s+1],complete:e[s+2]};else{const k=rs(r,Fa);m=rs(k.firestore,Dl),v=k._query;const H=new L0(m);c={next:K=>{e[s]&&e[s](new Il(m,H,k,K))},error:e[s+1],complete:e[s+2]},cb(r._query)}const E=Fm(m);return HC(E,v,a,c)}function z0(r,e){const t=Fm(r);return $C(t,e)}function F0(r,e,t){const s=t.docs.get(e._key),a=new L0(r);return new ka(r,a,e._key,s,new Su(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){$I(Fl),bl(new La("firestore",((s,{instanceIdentifier:a,options:c})=>{const m=s.getProvider("app").getImmediate(),v=new Dl(new KI(s.getProvider("auth-internal")),new XI(m,s.getProvider("app-check-internal")),pS(m,a),m);return c={useFetchStreams:t,...c},v._setSettings(c),v}),"PUBLIC").setMultipleInstances(!0)),Fo(uy,cy,e),Fo(uy,cy,"esm2020")})();function j0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yb=j0,B0=new Wu("auth","Firebase",j0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=new dm("@firebase/auth");function vb(r,...e){kh.logLevel<=it.WARN&&kh.warn(`Auth (${Fl}): ${r}`,...e)}function dh(r,...e){kh.logLevel<=it.ERROR&&kh.error(`Auth (${Fl}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(r,...e){throw Qm(r,...e)}function Ri(r,...e){return Qm(r,...e)}function Km(r,e,t){const s={...yb(),[e]:t};return new Wu("auth","Firebase",s).create(e,{appName:r.name})}function Aa(r){return Km(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wb(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&cs(r,"argument-error"),Km(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qm(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return B0.create(r,...e)}function qe(r,e,...t){if(!r)throw Qm(e,...t)}function Bs(r){const e="INTERNAL ASSERTION FAILED: "+r;throw dh(e),new Error(e)}function $s(r,e){r||Bs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function Eb(){return my()==="http:"||my()==="https:"}function my(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Eb()||xx()||"connection"in navigator)?navigator.onLine:!0}function xb(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,t){this.shortDelay=e,this.longDelay=t,$s(t>e,"Short delay should be less than long delay!"),this.isMobile=wx()||Ix()}get(){return Tb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(r,e){$s(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Pb=new Yu(3e4,6e4);function Xm(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ql(r,e,t,s,a={}){return W0(r,a,async()=>{let c={},m={};s&&(e==="GET"?m=s:c={body:JSON.stringify(s)});const v=Hu({key:r.config.apiKey,...m}).slice(1),E=await r._getAdditionalHeaders();E["Content-Type"]="application/json",r.languageCode&&(E["X-Firebase-Locale"]=r.languageCode);const x={method:e,headers:E,...c};return Tx()||(x.referrerPolicy="no-referrer"),r.emulatorConfig&&zl(r.emulatorConfig.host)&&(x.credentials="include"),U0.fetch()(await H0(r,r.config.apiHost,t,v),x)})}async function W0(r,e,t){r._canInitEmulator=!1;const s={...Ib,...e};try{const a=new bb(r),c=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const m=await c.json();if("needConfirmation"in m)throw ih(r,"account-exists-with-different-credential",m);if(c.ok&&!("errorMessage"in m))return m;{const v=c.ok?m.errorMessage:m.error.message,[E,x]=v.split(" : ");if(E==="FEDERATED_USER_ID_ALREADY_LINKED")throw ih(r,"credential-already-in-use",m);if(E==="EMAIL_EXISTS")throw ih(r,"email-already-in-use",m);if(E==="USER_DISABLED")throw ih(r,"user-disabled",m);const P=s[E]||E.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw Km(r,P,x);cs(r,P)}}catch(a){if(a instanceof Gs)throw a;cs(r,"network-request-failed",{message:String(a)})}}async function Cb(r,e,t,s,a={}){const c=await ql(r,e,t,s,a);return"mfaPendingCredential"in c&&cs(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function H0(r,e,t,s){const a=`${e}${t}?${s}`,c=r,m=c.config.emulator?Ym(r.config,a):`${r.config.apiScheme}://${a}`;return Sb.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(m).toString():m}class bb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Ri(this.auth,"network-request-failed")),Pb.get())})}}function ih(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Ri(r,e,s);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kb(r,e){return ql(r,"POST","/v1/accounts:delete",e)}async function Ah(r,e){return ql(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ab(r,e=!1){const t=kn(r),s=await t.getIdToken(e),a=Jm(s);qe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const c=typeof a.firebase=="object"?a.firebase:void 0,m=c==null?void 0:c.sign_in_provider;return{claims:a,token:s,authTime:Ru(Rf(a.auth_time)),issuedAtTime:Ru(Rf(a.iat)),expirationTime:Ru(Rf(a.exp)),signInProvider:m||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Rf(r){return Number(r)*1e3}function Jm(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return dh("JWT malformed, contained fewer than 3 sections"),null;try{const a=Hy(t);return a?JSON.parse(a):(dh("Failed to decode base64 JWT payload"),null)}catch(a){return dh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function py(r){const e=Jm(r);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uu(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Gs&&Rb(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function Rb({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ru(this.lastLoginAt),this.creationTime=Ru(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rh(r){var I;const e=r.auth,t=await r.getIdToken(),s=await Uu(r,Ah(e,{idToken:t}));qe(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];r._notifyReloadListener(a);const c=(I=a.providerUserInfo)!=null&&I.length?q0(a.providerUserInfo):[],m=Mb(r.providerData,c),v=r.isAnonymous,E=!(r.email&&a.passwordHash)&&!(m!=null&&m.length),x=v?E:!1,P={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:m,metadata:new om(a.createdAt,a.lastLoginAt),isAnonymous:x};Object.assign(r,P)}async function Lb(r){const e=kn(r);await Rh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Mb(r,e){return[...r.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function q0(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Db(r,e){const t=await W0(r,{},async()=>{const s=Hu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:c}=r.config,m=await H0(r,a,"/v1/token",`key=${c}`),v=await r._getAdditionalHeaders();v["Content-Type"]="application/x-www-form-urlencoded";const E={method:"POST",headers:v,body:s};return r.emulatorConfig&&zl(r.emulatorConfig.host)&&(E.credentials="include"),U0.fetch()(m,E)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Ob(r,e){return ql(r,"POST","/v2/accounts:revokeToken",Xm(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):py(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const t=py(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:c}=await Db(e,t);this.updateTokensAndExpiration(s,a,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:c}=t,m=new Sl;return s&&(qe(typeof s=="string","internal-error",{appName:e}),m.refreshToken=s),a&&(qe(typeof a=="string","internal-error",{appName:e}),m.accessToken=a),c&&(qe(typeof c=="number","internal-error",{appName:e}),m.expirationTime=c),m}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sl,this.toJSON())}_performRefresh(){return Bs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(r,e){qe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ki{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new Nb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new om(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Uu(this,this.stsTokenManager.getToken(this.auth,e));return qe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Ab(this,e)}reload(){return Lb(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ki({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Rh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bi(this.auth.app))return Promise.reject(Aa(this.auth));const e=await this.getIdToken();return await Uu(this,kb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,c=t.phoneNumber??void 0,m=t.photoURL??void 0,v=t.tenantId??void 0,E=t._redirectEventId??void 0,x=t.createdAt??void 0,P=t.lastLoginAt??void 0,{uid:I,emailVerified:k,isAnonymous:H,providerData:K,stsTokenManager:ne}=t;qe(I&&ne,e,"internal-error");const ee=Sl.fromJSON(this.name,ne);qe(typeof I=="string",e,"internal-error"),No(s,e.name),No(a,e.name),qe(typeof k=="boolean",e,"internal-error"),qe(typeof H=="boolean",e,"internal-error"),No(c,e.name),No(m,e.name),No(v,e.name),No(E,e.name),No(x,e.name),No(P,e.name);const ye=new ki({uid:I,auth:e,email:a,emailVerified:k,displayName:s,isAnonymous:H,photoURL:m,phoneNumber:c,tenantId:v,stsTokenManager:ee,createdAt:x,lastLoginAt:P});return K&&Array.isArray(K)&&(ye.providerData=K.map(he=>({...he}))),E&&(ye._redirectEventId=E),ye}static async _fromIdTokenResponse(e,t,s=!1){const a=new Sl;a.updateFromServerResponse(t);const c=new ki({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await Rh(c),c}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];qe(a.localId!==void 0,"internal-error");const c=a.providerUserInfo!==void 0?q0(a.providerUserInfo):[],m=!(a.email&&a.passwordHash)&&!(c!=null&&c.length),v=new Sl;v.updateFromIdToken(s);const E=new ki({uid:a.localId,auth:e,stsTokenManager:v,isAnonymous:m}),x={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new om(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(c!=null&&c.length)};return Object.assign(E,x),E}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=new Map;function Us(r){$s(r instanceof Function,"Expected a class definition");let e=gy.get(r);return e?($s(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,gy.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$0.type="NONE";const _y=$0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(r,e,t){return`firebase:${r}:${e}:${t}`}class Pl{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:c}=this.auth;this.fullUserKey=fh(this.userKey,a.apiKey,c),this.fullPersistenceKey=fh("persistence",a.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ah(this.auth,{idToken:e}).catch(()=>{});return t?ki._fromGetAccountInfoResponse(this.auth,t,e):null}return ki._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Pl(Us(_y),e,s);const a=(await Promise.all(t.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let c=a[0]||Us(_y);const m=fh(s,e.config.apiKey,e.name);let v=null;for(const x of t)try{const P=await x._get(m);if(P){let I;if(typeof P=="string"){const k=await Ah(e,{idToken:P}).catch(()=>{});if(!k)break;I=await ki._fromGetAccountInfoResponse(e,k,P)}else I=ki._fromJSON(e,P);x!==c&&(v=I),c=x;break}}catch{}const E=a.filter(x=>x._shouldAllowMigration);return!c._shouldAllowMigration||!E.length?new Pl(c,e,s):(c=E[0],v&&await c._set(m,v.toJSON()),await Promise.all(t.map(async x=>{if(x!==c)try{await x._remove(m)}catch{}})),new Pl(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Q0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(G0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(X0(e))return"Blackberry";if(J0(e))return"Webos";if(Z0(e))return"Safari";if((e.includes("chrome/")||K0(e))&&!e.includes("edge/"))return"Chrome";if(Y0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function G0(r=qn()){return/firefox\//i.test(r)}function Z0(r=qn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function K0(r=qn()){return/crios\//i.test(r)}function Q0(r=qn()){return/iemobile/i.test(r)}function Y0(r=qn()){return/android/i.test(r)}function X0(r=qn()){return/blackberry/i.test(r)}function J0(r=qn()){return/webos/i.test(r)}function ep(r=qn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Vb(r=qn()){var e;return ep(r)&&!!((e=window.navigator)!=null&&e.standalone)}function zb(){return Sx()&&document.documentMode===10}function ew(r=qn()){return ep(r)||Y0(r)||J0(r)||X0(r)||/windows phone/i.test(r)||Q0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(r,e=[]){let t;switch(r){case"Browser":t=yy(qn());break;case"Worker":t=`${yy(qn())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((m,v)=>{try{const E=e(c);m(E)}catch(E){v(E)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jb(r,e={}){return ql(r,"GET","/v2/passwordPolicy",Xm(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=6;class Ub{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Bb,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vy(this),this.idTokenSubscription=new vy(this),this.beforeStateQueue=new Fb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=B0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Us(t)),this._initializationPromise=this.queue(async()=>{var s,a,c;if(!this._deleted&&(this.persistenceManager=await Pl.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ah(this,{idToken:e}),s=await ki._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(bi(this.app)){const m=this.app.settings.authIdToken;return m?new Promise(v=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(m).then(v,v))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const m=(c=this.redirectUser)==null?void 0:c._redirectEventId,v=s==null?void 0:s._redirectEventId,E=await this.tryRedirectSignIn(e);(!m||m===v)&&(E!=null&&E.user)&&(s=E.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(m){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(m))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Rh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bi(this.app))return Promise.reject(Aa(this));const t=e?kn(e):null;return t&&qe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bi(this.app)?Promise.reject(Aa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bi(this.app)?Promise.reject(Aa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Us(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jb(this),t=new Ub(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await Ob(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Us(e)||this._popupRedirectResolver;qe(t,this,"argument-error"),this.redirectPersistenceManager=await Pl.create(this,[Us(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let m=!1;const v=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(v,this,"internal-error"),v.then(()=>{m||c(this.currentUser)}),typeof t=="function"){const E=e.addObserver(t,s,a);return()=>{m=!0,E()}}else{const E=e.addObserver(t);return()=>{m=!0,E()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(bi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&vb(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function td(r){return kn(r)}class vy{constructor(e){this.auth=e,this.observer=null,this.addObserver=Lx(t=>this.observer=t)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Hb(r){tp=r}function qb(r){return tp.loadJS(r)}function $b(){return tp.gapiScript}function Gb(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(r,e){const t=mm(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),c=t.getOptions();if(Na(c,e??{}))return a;cs(a,"already-initialized")}return t.initialize({options:e})}function Kb(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Us);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Qb(r,e,t){const s=td(r);qe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,c=nw(e),{host:m,port:v}=Yb(e),E=v===null?"":`:${v}`,x={url:`${c}//${m}${E}/`},P=Object.freeze({host:m,port:v,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){qe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),qe(Na(x,s.config.emulator)&&Na(P,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=x,s.emulatorConfig=P,s.settings.appVerificationDisabledForTesting=!0,zl(m)?(Zy(`${c}//${m}${E}`),Ky("Auth",!0)):Xb()}function nw(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Yb(r){const e=nw(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const c=a[1];return{host:c,port:wy(s.substr(c.length+1))}}else{const[c,m]=s.split(":");return{host:c,port:wy(m)}}}function wy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function Xb(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bs("not implemented")}_getIdTokenResponse(e){return Bs("not implemented")}_linkToIdToken(e,t){return Bs("not implemented")}_getReauthenticationResolver(e){return Bs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cl(r,e){return Cb(r,"POST","/v1/accounts:signInWithIdp",Xm(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="http://localhost";class Oa extends rw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Oa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):cs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...c}=t;if(!s||!a)return null;const m=new Oa(s,a);return m.idToken=c.idToken||void 0,m.accessToken=c.accessToken||void 0,m.secret=c.secret,m.nonce=c.nonce,m.pendingToken=c.pendingToken||null,m}_getIdTokenResponse(e){const t=this.buildRequest();return Cl(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Cl(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Cl(e,t)}buildRequest(){const e={requestUri:Jb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Hu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu extends np{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends Xu{constructor(){super("facebook.com")}static credential(e){return Oa._fromParams({providerId:Lo.PROVIDER_ID,signInMethod:Lo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lo.credentialFromTaggedObject(e)}static credentialFromError(e){return Lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lo.credential(e.oauthAccessToken)}catch{return null}}}Lo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Lo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends Xu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Oa._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return js.credential(t,s)}catch{return null}}}js.GOOGLE_SIGN_IN_METHOD="google.com";js.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends Xu{constructor(){super("github.com")}static credential(e){return Oa._fromParams({providerId:Mo.PROVIDER_ID,signInMethod:Mo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mo.credentialFromTaggedObject(e)}static credentialFromError(e){return Mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mo.credential(e.oauthAccessToken)}catch{return null}}}Mo.GITHUB_SIGN_IN_METHOD="github.com";Mo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends Xu{constructor(){super("twitter.com")}static credential(e,t){return Oa._fromParams({providerId:Do.PROVIDER_ID,signInMethod:Do.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Do.credentialFromTaggedObject(e)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Do.credential(t,s)}catch{return null}}}Do.TWITTER_SIGN_IN_METHOD="twitter.com";Do.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const c=await ki._fromIdTokenResponse(e,s,a),m=Ey(s);return new Vl({user:c,providerId:m,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=Ey(s);return new Vl({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function Ey(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh extends Gs{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Nh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new Nh(e,t,s,a)}}function iw(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Nh._fromErrorAndOperation(r,c,e,s):c})}async function ek(r,e,t=!1){const s=await Uu(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Vl._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tk(r,e,t=!1){const{auth:s}=r;if(bi(s.app))return Promise.reject(Aa(s));const a="reauthenticate";try{const c=await Uu(r,iw(s,a,e,r),t);qe(c.idToken,s,"internal-error");const m=Jm(c.idToken);qe(m,s,"internal-error");const{sub:v}=m;return qe(r.uid===v,s,"user-mismatch"),Vl._forOperation(r,a,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&cs(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nk(r,e,t=!1){if(bi(r.app))return Promise.reject(Aa(r));const s="signIn",a=await iw(r,s,e),c=await Vl._fromIdTokenResponse(r,s,a);return t||await r._updateCurrentUser(c.user),c}function rk(r,e,t,s){return kn(r).onIdTokenChanged(e,t,s)}function ik(r,e,t){return kn(r).beforeAuthStateChanged(e,t)}function sk(r,e,t,s){return kn(r).onAuthStateChanged(e,t,s)}const Lh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Lh,"1"),this.storage.removeItem(Lh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=1e3,ak=10;class ow extends sw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ew(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((m,v,E)=>{this.notifyListeners(m,E)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const m=this.storage.getItem(s);!t&&this.localCache[s]===m||this.notifyListeners(s,m)},c=this.storage.getItem(s);zb()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,ak):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},ok)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ow.type="LOCAL";const lk=ow;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw extends sw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}aw.type="SESSION";const lw=aw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new nd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:c}=t.data,m=this.handlersMap[a];if(!(m!=null&&m.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const v=Array.from(m).map(async x=>x(t.origin,c)),E=await uk(v);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:E})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,m;return new Promise((v,E)=>{const x=rp("",20);a.port1.start();const P=setTimeout(()=>{E(new Error("unsupported_event"))},s);m={messageChannel:a,onMessage(I){const k=I;if(k.data.eventId===x)switch(k.data.status){case"ack":clearTimeout(P),c=setTimeout(()=>{E(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),v(k.data.response);break;default:clearTimeout(P),clearTimeout(c),E(new Error("invalid_response"));break}}},this.handlers.add(m),a.port1.addEventListener("message",m.onMessage),this.target.postMessage({eventType:e,eventId:x,data:t},[a.port2])}).finally(()=>{m&&this.removeMessageHandler(m)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(){return window}function hk(r){ls().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(){return typeof ls().WorkerGlobalScope<"u"&&typeof ls().importScripts=="function"}async function dk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fk(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function mk(){return uw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="firebaseLocalStorageDb",pk=1,Mh="firebaseLocalStorage",hw="fbase_key";class Ju{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function rd(r,e){return r.transaction([Mh],e?"readwrite":"readonly").objectStore(Mh)}function gk(){const r=indexedDB.deleteDatabase(cw);return new Ju(r).toPromise()}function am(){const r=indexedDB.open(cw,pk);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Mh,{keyPath:hw})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Mh)?e(s):(s.close(),await gk(),e(await am()))})})}async function Ty(r,e,t){const s=rd(r,!0).put({[hw]:e,value:t});return new Ju(s).toPromise()}async function _k(r,e){const t=rd(r,!1).get(e),s=await new Ju(t).toPromise();return s===void 0?null:s.value}function xy(r,e){const t=rd(r,!0).delete(e);return new Ju(t).toPromise()}const yk=800,vk=3;class dw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await am(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>vk)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nd._getInstance(mk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await dk(),!this.activeServiceWorker)return;this.sender=new ck(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await am();return await Ty(e,Lh,"1"),await xy(e,Lh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Ty(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>_k(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>xy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const c=rd(a,!1).getAll();return new Ju(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:c}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(c)&&(this.notifyListeners(a,c),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dw.type="LOCAL";const wk=dw;new Yu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(r,e){return e?Us(e):(qe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip extends rw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Cl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Cl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ek(r){return nk(r.auth,new ip(r),r.bypassAuthState)}function Tk(r){const{auth:e,user:t}=r;return qe(t,e,"internal-error"),tk(t,new ip(r),r.bypassAuthState)}async function xk(r){const{auth:e,user:t}=r;return qe(t,e,"internal-error"),ek(t,new ip(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,t,s,a,c=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:c,error:m,type:v}=e;if(m){this.reject(m);return}const E={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(v)(E))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ek;case"linkViaPopup":case"linkViaRedirect":return xk;case"reauthViaPopup":case"reauthViaRedirect":return Tk;default:cs(this.auth,"internal-error")}}resolve(e){$s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=new Yu(2e3,1e4);async function Sk(r,e,t){if(bi(r.app))return Promise.reject(Ri(r,"operation-not-supported-in-this-environment"));const s=td(r);wb(r,e,np);const a=fw(s,t);return new ba(s,"signInViaPopup",e,a).executeNotNull()}class ba extends mw{constructor(e,t,s,a,c){super(e,t,a,c),this.provider=s,this.authWindow=null,this.pollId=null,ba.currentPopupAction&&ba.currentPopupAction.cancel(),ba.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){$s(this.filter.length===1,"Popup operations only handle one event");const e=rp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ba.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ik.get())};e()}}ba.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk="pendingRedirect",mh=new Map;class Ck extends mw{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=mh.get(this.auth._key());if(!e){try{const s=await bk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}mh.set(this.auth._key(),e)}return this.bypassAuthState||mh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bk(r,e){const t=Rk(e),s=Ak(r);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function kk(r,e){mh.set(r._key(),e)}function Ak(r){return Us(r._redirectPersistence)}function Rk(r){return fh(Pk,r.config.apiKey,r.name)}async function Nk(r,e,t=!1){if(bi(r.app))return Promise.reject(Aa(r));const s=td(r),a=fw(s,e),m=await new Ck(s,a,t).execute();return m&&!t&&(delete m.user._redirectEventId,await s._persistUserIfCurrent(m.user),await s._setRedirectUser(null,e)),m}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=600*1e3;class Mk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Dk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!pw(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Ri(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Lk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Iy(e))}saveEventToCache(e){this.cachedEventUids.add(Iy(e)),this.lastProcessedEventTime=Date.now()}}function Iy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function pw({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Dk(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pw(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ok(r,e={}){return ql(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zk=/^https?/;async function Fk(r){if(r.config.emulator)return;const{authorizedDomains:e}=await Ok(r);for(const t of e)try{if(jk(t))return}catch{}cs(r,"unauthorized-domain")}function jk(r){const e=sm(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const m=new URL(r);return m.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&m.hostname===s}if(!zk.test(t))return!1;if(Vk.test(r))return s===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=new Yu(3e4,6e4);function Sy(){const r=ls().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function Uk(r){return new Promise((e,t)=>{var a,c,m;function s(){Sy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Sy(),t(Ri(r,"network-request-failed"))},timeout:Bk.get()})}if((c=(a=ls().gapi)==null?void 0:a.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((m=ls().gapi)!=null&&m.load)s();else{const v=Gb("iframefcb");return ls()[v]=()=>{gapi.load?s():t(Ri(r,"network-request-failed"))},qb(`${$b()}?onload=${v}`).catch(E=>t(E))}}).catch(e=>{throw ph=null,e})}let ph=null;function Wk(r){return ph=ph||Uk(r),ph}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=new Yu(5e3,15e3),qk="__/auth/iframe",$k="emulator/auth/iframe",Gk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kk(r){const e=r.config;qe(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Ym(e,$k):`https://${r.config.authDomain}/${qk}`,s={apiKey:e.apiKey,appName:r.name,v:Fl},a=Zk.get(r.config.apiHost);a&&(s.eid=a);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${Hu(s).slice(1)}`}async function Qk(r){const e=await Wk(r),t=ls().gapi;return qe(t,r,"internal-error"),e.open({where:document.body,url:Kk(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gk,dontclear:!0},s=>new Promise(async(a,c)=>{await s.restyle({setHideOnLeave:!1});const m=Ri(r,"network-request-failed"),v=ls().setTimeout(()=>{c(m)},Hk.get());function E(){ls().clearTimeout(v),a(s)}s.ping(E).then(E,()=>{c(m)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Xk=500,Jk=600,eA="_blank",tA="http://localhost";class Py{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nA(r,e,t,s=Xk,a=Jk){const c=Math.max((window.screen.availHeight-a)/2,0).toString(),m=Math.max((window.screen.availWidth-s)/2,0).toString();let v="";const E={...Yk,width:s.toString(),height:a.toString(),top:c,left:m},x=qn().toLowerCase();t&&(v=K0(x)?eA:t),G0(x)&&(e=e||tA,E.scrollbars="yes");const P=Object.entries(E).reduce((k,[H,K])=>`${k}${H}=${K},`,"");if(Vb(x)&&v!=="_self")return rA(e||"",v),new Py(null);const I=window.open(e||"",v,P);qe(I,r,"popup-blocked");try{I.focus()}catch{}return new Py(I)}function rA(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="__/auth/handler",sA="emulator/auth/handler",oA=encodeURIComponent("fac");async function Cy(r,e,t,s,a,c){qe(r.config.authDomain,r,"auth-domain-config-required"),qe(r.config.apiKey,r,"invalid-api-key");const m={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Fl,eventId:a};if(e instanceof np){e.setDefaultLanguage(r.languageCode),m.providerId=e.providerId||"",Nx(e.getCustomParameters())||(m.customParameters=JSON.stringify(e.getCustomParameters()));for(const[P,I]of Object.entries({}))m[P]=I}if(e instanceof Xu){const P=e.getScopes().filter(I=>I!=="");P.length>0&&(m.scopes=P.join(","))}r.tenantId&&(m.tid=r.tenantId);const v=m;for(const P of Object.keys(v))v[P]===void 0&&delete v[P];const E=await r._getAppCheckToken(),x=E?`#${oA}=${encodeURIComponent(E)}`:"";return`${aA(r)}?${Hu(v).slice(1)}${x}`}function aA({config:r}){return r.emulator?Ym(r,sA):`https://${r.authDomain}/${iA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="webStorageSupport";class lA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lw,this._completeRedirectFn=Nk,this._overrideRedirectResult=kk}async _openPopup(e,t,s,a){var m;$s((m=this.eventManagers[e._key()])==null?void 0:m.manager,"_initialize() not called before _openPopup()");const c=await Cy(e,t,s,sm(),a);return nA(e,c,rp())}async _openRedirect(e,t,s,a){await this._originValidation(e);const c=await Cy(e,t,s,sm(),a);return hk(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:c}=this.eventManagers[t];return a?Promise.resolve(a):($s(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await Qk(e),s=new Mk(e);return t.register("authEvent",a=>(qe(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Nf,{type:Nf},a=>{var m;const c=(m=a==null?void 0:a[0])==null?void 0:m[Nf];c!==void 0&&t(!!c),cs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Fk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ew()||Z0()||ep()}}const uA=lA;var by="@firebase/auth",ky="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dA(r){bl(new La("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:m,authDomain:v}=s.options;qe(m&&!m.includes(":"),"invalid-api-key",{appName:s.name});const E={apiKey:m,authDomain:v,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tw(r)},x=new Wb(s,a,c,E);return Kb(x,t),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),bl(new La("auth-internal",e=>{const t=td(e.getProvider("auth").getImmediate());return(s=>new cA(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fo(by,ky,hA(r)),Fo(by,ky,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=300,mA=Gy("authIdTokenMaxAge")||fA;let Ay=null;const pA=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>mA)return;const a=t==null?void 0:t.token;Ay!==a&&(Ay=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function gA(r=Jy()){const e=mm(r,"auth");if(e.isInitialized())return e.getImmediate();const t=Zb(r,{popupRedirectResolver:uA,persistence:[wk,lk,lw]}),s=Gy("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const m=pA(c.toString());ik(t,m,()=>m(t.currentUser)),rk(t,v=>m(v))}}const a=qy("auth");return a&&Qb(t,`http://${a}`),t}function _A(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}Hb({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=a=>{const c=Ri("internal-error");c.customData=a,t(c)},s.type="text/javascript",s.charset="UTF-8",_A().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dA("Browser");const yA={apiKey:"AIzaSyB1YwI0pF8O8y05mfDUuBwxlPuHEFdmQ5g",authDomain:"ameliorons-ff5dc.firebaseapp.com",projectId:"ameliorons-ff5dc",storageBucket:"ameliorons-ff5dc.firebasestorage.app",messagingSenderId:"466230393587",appId:"1:466230393587:web:cf016d45bf7c734fd71586"},gw=Xy(yA),vl=YC(gw),lm=gA(gw),vA=new js,wA=async()=>{try{await Sk(lm,vA)}catch(r){console.error("Erreur login:",r),alert("Veuillez autoriser les pop-ups pour ce site")}};function EA(){return A.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:A.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl overflow-hidden",children:[A.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 p-8 text-white text-center",children:[A.jsx("div",{className:"bg-white/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm",children:A.jsx(Dh,{size:32})}),A.jsx("h1",{className:"text-2xl font-bold italic",children:"Amliorons"}),A.jsx("p",{className:"text-blue-100 mt-2",children:"Signalez, agissez, amliorez votre ville."})]}),A.jsxs("div",{className:"p-8",children:[A.jsxs("div",{className:"space-y-6 mb-8",children:[A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"text-blue-600 mt-1",children:A.jsx(Oy,{size:20})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-slate-800",children:"Compte Citoyen"}),A.jsx("p",{className:"text-sm text-slate-500",children:"Suivez l'tat de vos signalements en temps rel."})]})]}),A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsx("div",{className:"text-blue-600 mt-1",children:A.jsx(IE,{size:20})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-slate-800",children:"Impact Direct"}),A.jsx("p",{className:"text-sm text-slate-500",children:"Aidez les services techniques  intervenir plus vite."})]})]})]}),A.jsxs("button",{onClick:()=>wA(),className:"w-full flex items-center justify-center gap-3 bg-white border-2 border-slate-200 py-3 px-4 rounded-xl font-medium text-slate-700 hover:bg-slate-50 hover:border-slate-300 transition-all duration-200 active:scale-[0.98]",children:[A.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"w-5 h-5"}),"Continuer avec Google"]}),A.jsx("p",{className:"text-center text-xs text-slate-400 mt-8",children:"En vous connectant, vous acceptez de partager votre position lors de vos futurs signalements."})]})]})})}function TA(r){const e=hb(QC(vl,"reports"),db("date","desc"));return _b(e,t=>{const s=t.docs.map(a=>{var m;const c=a.data();return{id:a.id,...c,date:(m=c.date)!=null&&m.toDate?c.date.toDate().toISOString():c.date}});r(s)})}async function xA(r){const e={id:r.id,mode:r.mode,category:r.category,description:r.description,photo:r.photo??"",location:{lat:r.location.lat,lng:r.location.lng},date:At.fromDate(new Date(r.date)),status:r.status,reportedBy:r.reportedBy,validations:0,validatedBy:[]};r.type&&(e.type=r.type),await V0(ch(vl,"reports",r.id),e)}function IA(){const[r,e]=Je.useState([]),[t,s]=Je.useState("citizen"),[a,c]=Je.useState(!1),[m,v]=Je.useState(!1),[E,x]=Je.useState(null),[P,I]=Je.useState(null),[k,H]=Je.useState(!1),[K,ne]=Je.useState(!1),[ee,ye]=Je.useState({points:0,globalRank:0}),[he,ve]=Je.useState(null),[Be,Ke]=Je.useState(!0),[Me,j]=Je.useState(null),[R,D]=Je.useState(null),[B,z]=Je.useState(!1),W=Je.useCallback(()=>{if(z(!0),!navigator.geolocation){D("La golocalisation nest pas supporte."),z(!1);return}navigator.geolocation.getCurrentPosition(fe=>{j({lat:fe.coords.latitude,lng:fe.coords.longitude}),D(null),z(!1)},fe=>{D("Position indisponible."),z(!1)},{enableHighAccuracy:!0,timeout:12e3,maximumAge:0})},[]);Je.useEffect(()=>{const fe=sk(lm,async Ne=>{if(Ne){const te=ch(vl,"users",Ne.uid);try{(await pb(te)).exists()||(await V0(te,{uid:Ne.uid,displayName:Ne.displayName||"Citoyen",email:Ne.email,photoURL:Ne.photoURL||"",points:347,createdAt:new Date().toISOString()}),console.log("Nouveau profil Firestore cr !"))}catch(_e){console.error("Erreur Firestore lors de l'auth:",_e)}ve(Ne),W()}else ve(null);Ke(!1)});return()=>fe()},[W]),Je.useEffect(()=>{if(he){const fe=TA(e);return()=>fe()}},[he]),Je.useEffect(()=>{if(he){const fe=ch(vl,"users",he.uid),Ne=onSnapshot(fe,async te=>{if(te.exists()){const _e=te.data().points||0,re=collection(vl,"users"),O=query(re,where("points",">",_e)),X=await getCountFromServer(O);ye({points:_e,globalRank:X.data().count+1})}});return()=>Ne()}},[he]);const M=Je.useCallback((fe,Ne)=>{m&&(x({lat:fe,lng:Ne}),v(!1),c(!0),wl.success("Position valide"))},[m]),Ye=async fe=>{var Ne,te;if(he)try{const _e={lat:((Ne=fe.location)==null?void 0:Ne.lat)||(Me==null?void 0:Me.lat)||50.6292,lng:((te=fe.location)==null?void 0:te.lng)||(Me==null?void 0:Me.lng)||3.0573},re={id:crypto.randomUUID(),mode:fe.mode,category:fe.category,description:fe.description,photo:fe.photo||"",location:_e,date:new Date().toISOString(),status:"nouveau",reportedBy:he.uid,validations:0,validatedBy:[],...fe.type&&{type:fe.type}};await xA(re),c(!1),x(null);const O=fe.mode==="probleme"?20:10,X=ch(vl,"users",he.uid);await gb(X,{points:lb(O)}),wl.success(`Signalement envoy ! +${O} points`)}catch(_e){console.error("Erreur envoi:",_e),wl.error("Erreur lors de l'envoi")}};if(Be)return A.jsxs("div",{className:"h-screen w-screen flex flex-col items-center justify-center bg-slate-900 text-white",children:[A.jsx(Zg,{className:"animate-spin text-red-600 mb-4",size:48}),A.jsx("p",{className:"font-bold tracking-widest",children:"CHARGEMENT..."})]});if(!he)return A.jsx(EA,{});const lt={name:he.displayName||"Citoyen",photo:he.photoURL||`https://ui-avatars.com/api/?name=${he.displayName||"U"}&background=random`,points:ee.points,level:Math.floor(ee.points/50),rank:ee.globalRank,badge:ee.globalRank<=3&&ee.points>0?" Top Contributeur":" Citoyen Actif"};return A.jsxs("div",{className:"h-screen w-screen relative bg-slate-900 overflow-hidden font-sans",children:[A.jsx(xT,{position:"top-center",richColors:!0}),A.jsx("div",{className:"absolute inset-0 z-0 h-full w-full",children:Me?A.jsx(uE,{reports:r,onReportClick:I,onMapClick:M,selectedLocation:E,userLocation:Me,zoom:18}):A.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center bg-slate-50 text-slate-500",children:[A.jsx(Zg,{className:"animate-spin mb-4",size:32}),A.jsx("p",{className:"font-medium italic",children:"Localisation en cours..."})]})}),A.jsxs("div",{className:"absolute top-4 right-4 z-40 flex flex-col items-end gap-3 pointer-events-none",children:[A.jsx("button",{onClick:()=>ne(!0),className:"bg-white/90 backdrop-blur-md p-1 rounded-full shadow-lg border border-white/40 pointer-events-auto",children:A.jsxs("div",{className:"relative",children:[A.jsx("img",{src:lt.photo,className:"w-11 h-11 rounded-full object-cover",alt:"Profil"}),A.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-600 text-[10px] font-bold text-white w-5 h-5 rounded-full flex items-center justify-center border-2 border-white",children:lt.level})]})}),A.jsxs("button",{onClick:()=>{const fe=t==="citizen"?"agent":"citizen";s(fe),H(fe==="agent")},className:`pointer-events-auto flex items-center gap-2 px-4 py-2 rounded-xl font-bold shadow-lg border ${t==="agent"?"bg-emerald-500 text-white":"bg-white/90 text-slate-700"}`,children:[t==="agent"?A.jsx(PE,{size:18}):A.jsx(hm,{size:18}),A.jsx("span",{className:"text-[10px] uppercase",children:t==="agent"?"Agent":"Citoyen"})]})]}),A.jsxs("div",{className:"absolute bottom-8 left-6 right-6 z-40 flex items-end justify-between pointer-events-none",children:[A.jsxs("div",{className:"bg-white/90 backdrop-blur-lg px-4 py-3 rounded-2xl shadow-xl border border-white/40 flex items-center gap-3 pointer-events-auto",children:[A.jsx("div",{className:"bg-red-500 p-1.5 rounded-lg",children:A.jsx(ME,{className:"text-white",size:18})}),A.jsxs("h1",{className:"text-lg font-bold text-slate-800",children:["a",A.jsx("span",{className:"text-red-600",children:"MEL"}),"iorons"]})]}),t==="citizen"&&!a&&!m&&A.jsx("button",{onClick:()=>c(!0),className:"bg-blue-600 text-white p-5 rounded-3xl shadow-2xl hover:scale-105 active:scale-95 transition-all pointer-events-auto",children:A.jsx(OE,{size:28,strokeWidth:3})})]}),a&&A.jsx("div",{className:"absolute inset-0 z-50 flex items-end justify-center bg-slate-900/20 backdrop-blur-[2px]",children:A.jsxs("div",{className:"bg-white w-full max-w-md rounded-t-[40px] shadow-2xl animate-in slide-in-from-bottom duration-300",children:[A.jsxs("div",{className:"px-8 py-6 border-b flex items-center justify-between",children:[A.jsx("h2",{className:"text-xl font-bold",children:"Nouveau Signalement"}),A.jsx("button",{onClick:()=>c(!1),className:"p-2 hover:bg-slate-100 rounded-full",children:A.jsx(Oh,{size:24})})]}),A.jsx("div",{className:"max-h-[75vh] overflow-y-auto",children:A.jsx(IT,{onSubmit:Ye,onCancel:()=>{c(!1),x(null)},initialLocation:E,userLocation:Me,onLocationSelect:()=>{c(!1),v(!0)}})})]})}),k&&t==="agent"&&A.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[65vh] z-40 bg-white rounded-t-[40px] shadow-2xl border-t overflow-hidden",children:A.jsx(sx,{reports:r,onReportClick:I,onStatusChange:()=>{},onValidate:()=>{}})}),P&&A.jsx(ix,{report:P,onClose:()=>I(null),isAdmin:t==="agent"}),A.jsx(ox,{isOpen:K,onClose:()=>ne(!1),userName:(he==null?void 0:he.displayName)||"Citoyen",userPhoto:(he==null?void 0:he.photoURL)||"url_par_defaut",points:ee.points,globalRank:ee.globalRank,onLogout:()=>lm.signOut()})]})}sE.createRoot(document.getElementById("root")).render(A.jsx(IA,{}));
