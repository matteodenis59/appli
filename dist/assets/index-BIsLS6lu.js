(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();function tm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var lf={exports:{}},gu={},uf={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sg;function Ow(){if(Sg)return nt;Sg=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),m=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),I=Symbol.iterator;function R(O){return O===null||typeof O!="object"?null:(O=I&&O[I]||O["@@iterator"],typeof O=="function"?O:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,ne={};function te(O,Y,fe){this.props=O,this.context=Y,this.refs=ne,this.updater=fe||q}te.prototype.isReactComponent={},te.prototype.setState=function(O,Y){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Y,"setState")},te.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ke(){}ke.prototype=te.prototype;function me(O,Y,fe){this.props=O,this.context=Y,this.refs=ne,this.updater=fe||q}var we=me.prototype=new ke;we.constructor=me,Q(we,te.prototype),we.isPureReactComponent=!0;var xe=Array.isArray,De=Object.prototype.hasOwnProperty,Oe={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function k(O,Y,fe){var ye,Te={},ce=null,Ze=null;if(Y!=null)for(ye in Y.ref!==void 0&&(Ze=Y.ref),Y.key!==void 0&&(ce=""+Y.key),Y)De.call(Y,ye)&&!F.hasOwnProperty(ye)&&(Te[ye]=Y[ye]);var We=arguments.length-2;if(We===1)Te.children=fe;else if(1<We){for(var rt=Array(We),Rt=0;Rt<We;Rt++)rt[Rt]=arguments[Rt+2];Te.children=rt}if(O&&O.defaultProps)for(ye in We=O.defaultProps,We)Te[ye]===void 0&&(Te[ye]=We[ye]);return{$$typeof:i,type:O,key:ce,ref:Ze,props:Te,_owner:Oe.current}}function D(O,Y){return{$$typeof:i,type:O.type,key:Y,ref:O.ref,props:O.props,_owner:O._owner}}function B(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function V(O){var Y={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(fe){return Y[fe]})}var U=/\/+/g;function N(O,Y){return typeof O=="object"&&O!==null&&O.key!=null?V(""+O.key):Y.toString(36)}function Ge(O,Y,fe,ye,Te){var ce=typeof O;(ce==="undefined"||ce==="boolean")&&(O=null);var Ze=!1;if(O===null)Ze=!0;else switch(ce){case"string":case"number":Ze=!0;break;case"object":switch(O.$$typeof){case i:case e:Ze=!0}}if(Ze)return Ze=O,Te=Te(Ze),O=ye===""?"."+N(Ze,0):ye,xe(Te)?(fe="",O!=null&&(fe=O.replace(U,"$&/")+"/"),Ge(Te,Y,fe,"",function(Rt){return Rt})):Te!=null&&(B(Te)&&(Te=D(Te,fe+(!Te.key||Ze&&Ze.key===Te.key?"":(""+Te.key).replace(U,"$&/")+"/")+O)),Y.push(Te)),1;if(Ze=0,ye=ye===""?".":ye+":",xe(O))for(var We=0;We<O.length;We++){ce=O[We];var rt=ye+N(ce,We);Ze+=Ge(ce,Y,fe,rt,Te)}else if(rt=R(O),typeof rt=="function")for(O=rt.call(O),We=0;!(ce=O.next()).done;)ce=ce.value,rt=ye+N(ce,We++),Ze+=Ge(ce,Y,fe,rt,Te);else if(ce==="object")throw Y=String(O),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return Ze}function at(O,Y,fe){if(O==null)return O;var ye=[],Te=0;return Ge(O,ye,"","",function(ce){return Y.call(fe,ce,Te++)}),ye}function Ce(O){if(O._status===-1){var Y=O._result;Y=Y(),Y.then(function(fe){(O._status===0||O._status===-1)&&(O._status=1,O._result=fe)},function(fe){(O._status===0||O._status===-1)&&(O._status=2,O._result=fe)}),O._status===-1&&(O._status=0,O._result=Y)}if(O._status===1)return O._result.default;throw O._result}var ge={current:null},X={transition:null},_e={ReactCurrentDispatcher:ge,ReactCurrentBatchConfig:X,ReactCurrentOwner:Oe};function re(){throw Error("act(...) is not supported in production builds of React.")}return nt.Children={map:at,forEach:function(O,Y,fe){at(O,function(){Y.apply(this,arguments)},fe)},count:function(O){var Y=0;return at(O,function(){Y++}),Y},toArray:function(O){return at(O,function(Y){return Y})||[]},only:function(O){if(!B(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},nt.Component=te,nt.Fragment=t,nt.Profiler=a,nt.PureComponent=me,nt.StrictMode=s,nt.Suspense=E,nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_e,nt.act=re,nt.cloneElement=function(O,Y,fe){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var ye=Q({},O.props),Te=O.key,ce=O.ref,Ze=O._owner;if(Y!=null){if(Y.ref!==void 0&&(ce=Y.ref,Ze=Oe.current),Y.key!==void 0&&(Te=""+Y.key),O.type&&O.type.defaultProps)var We=O.type.defaultProps;for(rt in Y)De.call(Y,rt)&&!F.hasOwnProperty(rt)&&(ye[rt]=Y[rt]===void 0&&We!==void 0?We[rt]:Y[rt])}var rt=arguments.length-2;if(rt===1)ye.children=fe;else if(1<rt){We=Array(rt);for(var Rt=0;Rt<rt;Rt++)We[Rt]=arguments[Rt+2];ye.children=We}return{$$typeof:i,type:O.type,key:Te,ref:ce,props:ye,_owner:Ze}},nt.createContext=function(O){return O={$$typeof:m,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:c,_context:O},O.Consumer=O},nt.createElement=k,nt.createFactory=function(O){var Y=k.bind(null,O);return Y.type=O,Y},nt.createRef=function(){return{current:null}},nt.forwardRef=function(O){return{$$typeof:v,render:O}},nt.isValidElement=B,nt.lazy=function(O){return{$$typeof:P,_payload:{_status:-1,_result:O},_init:Ce}},nt.memo=function(O,Y){return{$$typeof:x,type:O,compare:Y===void 0?null:Y}},nt.startTransition=function(O){var Y=X.transition;X.transition={};try{O()}finally{X.transition=Y}},nt.unstable_act=re,nt.useCallback=function(O,Y){return ge.current.useCallback(O,Y)},nt.useContext=function(O){return ge.current.useContext(O)},nt.useDebugValue=function(){},nt.useDeferredValue=function(O){return ge.current.useDeferredValue(O)},nt.useEffect=function(O,Y){return ge.current.useEffect(O,Y)},nt.useId=function(){return ge.current.useId()},nt.useImperativeHandle=function(O,Y,fe){return ge.current.useImperativeHandle(O,Y,fe)},nt.useInsertionEffect=function(O,Y){return ge.current.useInsertionEffect(O,Y)},nt.useLayoutEffect=function(O,Y){return ge.current.useLayoutEffect(O,Y)},nt.useMemo=function(O,Y){return ge.current.useMemo(O,Y)},nt.useReducer=function(O,Y,fe){return ge.current.useReducer(O,Y,fe)},nt.useRef=function(O){return ge.current.useRef(O)},nt.useState=function(O){return ge.current.useState(O)},nt.useSyncExternalStore=function(O,Y,fe){return ge.current.useSyncExternalStore(O,Y,fe)},nt.useTransition=function(){return ge.current.useTransition()},nt.version="18.3.1",nt}var Pg;function nm(){return Pg||(Pg=1,uf.exports=Ow()),uf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg;function Vw(){if(bg)return gu;bg=1;var i=nm(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function m(v,E,x){var P,I={},R=null,q=null;x!==void 0&&(R=""+x),E.key!==void 0&&(R=""+E.key),E.ref!==void 0&&(q=E.ref);for(P in E)s.call(E,P)&&!c.hasOwnProperty(P)&&(I[P]=E[P]);if(v&&v.defaultProps)for(P in E=v.defaultProps,E)I[P]===void 0&&(I[P]=E[P]);return{$$typeof:e,type:v,key:R,ref:q,props:I,_owner:a.current}}return gu.Fragment=t,gu.jsx=m,gu.jsxs=m,gu}var Cg;function zw(){return Cg||(Cg=1,lf.exports=Vw()),lf.exports}var A=zw(),$c={},cf={exports:{}},Ir={},hf={exports:{}},df={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag;function Fw(){return Ag||(Ag=1,(function(i){function e(X,_e){var re=X.length;X.push(_e);e:for(;0<re;){var O=re-1>>>1,Y=X[O];if(0<a(Y,_e))X[O]=_e,X[re]=Y,re=O;else break e}}function t(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var _e=X[0],re=X.pop();if(re!==_e){X[0]=re;e:for(var O=0,Y=X.length,fe=Y>>>1;O<fe;){var ye=2*(O+1)-1,Te=X[ye],ce=ye+1,Ze=X[ce];if(0>a(Te,re))ce<Y&&0>a(Ze,Te)?(X[O]=Ze,X[ce]=re,O=ce):(X[O]=Te,X[ye]=re,O=ye);else if(ce<Y&&0>a(Ze,re))X[O]=Ze,X[ce]=re,O=ce;else break e}}return _e}function a(X,_e){var re=X.sortIndex-_e.sortIndex;return re!==0?re:X.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var m=Date,v=m.now();i.unstable_now=function(){return m.now()-v}}var E=[],x=[],P=1,I=null,R=3,q=!1,Q=!1,ne=!1,te=typeof setTimeout=="function"?setTimeout:null,ke=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function we(X){for(var _e=t(x);_e!==null;){if(_e.callback===null)s(x);else if(_e.startTime<=X)s(x),_e.sortIndex=_e.expirationTime,e(E,_e);else break;_e=t(x)}}function xe(X){if(ne=!1,we(X),!Q)if(t(E)!==null)Q=!0,Ce(De);else{var _e=t(x);_e!==null&&ge(xe,_e.startTime-X)}}function De(X,_e){Q=!1,ne&&(ne=!1,ke(k),k=-1),q=!0;var re=R;try{for(we(_e),I=t(E);I!==null&&(!(I.expirationTime>_e)||X&&!V());){var O=I.callback;if(typeof O=="function"){I.callback=null,R=I.priorityLevel;var Y=O(I.expirationTime<=_e);_e=i.unstable_now(),typeof Y=="function"?I.callback=Y:I===t(E)&&s(E),we(_e)}else s(E);I=t(E)}if(I!==null)var fe=!0;else{var ye=t(x);ye!==null&&ge(xe,ye.startTime-_e),fe=!1}return fe}finally{I=null,R=re,q=!1}}var Oe=!1,F=null,k=-1,D=5,B=-1;function V(){return!(i.unstable_now()-B<D)}function U(){if(F!==null){var X=i.unstable_now();B=X;var _e=!0;try{_e=F(!0,X)}finally{_e?N():(Oe=!1,F=null)}}else Oe=!1}var N;if(typeof me=="function")N=function(){me(U)};else if(typeof MessageChannel<"u"){var Ge=new MessageChannel,at=Ge.port2;Ge.port1.onmessage=U,N=function(){at.postMessage(null)}}else N=function(){te(U,0)};function Ce(X){F=X,Oe||(Oe=!0,N())}function ge(X,_e){k=te(function(){X(i.unstable_now())},_e)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_continueExecution=function(){Q||q||(Q=!0,Ce(De))},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return R},i.unstable_getFirstCallbackNode=function(){return t(E)},i.unstable_next=function(X){switch(R){case 1:case 2:case 3:var _e=3;break;default:_e=R}var re=R;R=_e;try{return X()}finally{R=re}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(X,_e){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var re=R;R=X;try{return _e()}finally{R=re}},i.unstable_scheduleCallback=function(X,_e,re){var O=i.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?O+re:O):re=O,X){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=re+Y,X={id:P++,callback:_e,priorityLevel:X,startTime:re,expirationTime:Y,sortIndex:-1},re>O?(X.sortIndex=re,e(x,X),t(E)===null&&X===t(x)&&(ne?(ke(k),k=-1):ne=!0,ge(xe,re-O))):(X.sortIndex=Y,e(E,X),Q||q||(Q=!0,Ce(De))),X},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(X){var _e=R;return function(){var re=R;R=_e;try{return X.apply(this,arguments)}finally{R=re}}}})(df)),df}var kg;function jw(){return kg||(kg=1,hf.exports=Fw()),hf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rg;function Bw(){if(Rg)return Ir;Rg=1;var i=nm(),e=jw();function t(n){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+n,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(n,o){m(n,o),m(n+"Capture",o)}function m(n,o){for(a[n]=o,n=0;n<o.length;n++)s.add(o[n])}var v=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),E=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P={},I={};function R(n){return E.call(I,n)?!0:E.call(P,n)?!1:x.test(n)?I[n]=!0:(P[n]=!0,!1)}function q(n,o,u,f){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Q(n,o,u,f){if(o===null||typeof o>"u"||q(n,o,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function ne(n,o,u,f,g,_,S){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=n,this.type=o,this.sanitizeURL=_,this.removeEmptyString=S}var te={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){te[n]=new ne(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var o=n[0];te[o]=new ne(o,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){te[n]=new ne(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){te[n]=new ne(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){te[n]=new ne(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){te[n]=new ne(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){te[n]=new ne(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){te[n]=new ne(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){te[n]=new ne(n,5,!1,n.toLowerCase(),null,!1,!1)});var ke=/[\-:]([a-z])/g;function me(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var o=n.replace(ke,me);te[o]=new ne(o,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var o=n.replace(ke,me);te[o]=new ne(o,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var o=n.replace(ke,me);te[o]=new ne(o,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){te[n]=new ne(n,1,!1,n.toLowerCase(),null,!1,!1)}),te.xlinkHref=new ne("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){te[n]=new ne(n,1,!1,n.toLowerCase(),null,!0,!0)});function we(n,o,u,f){var g=te.hasOwnProperty(o)?te[o]:null;(g!==null?g.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(Q(o,u,g,f)&&(u=null),f||g===null?R(o)&&(u===null?n.removeAttribute(o):n.setAttribute(o,""+u)):g.mustUseProperty?n[g.propertyName]=u===null?g.type===3?!1:"":u:(o=g.attributeName,f=g.attributeNamespace,u===null?n.removeAttribute(o):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?n.setAttributeNS(f,o,u):n.setAttribute(o,u))))}var xe=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,De=Symbol.for("react.element"),Oe=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),V=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),Ge=Symbol.for("react.suspense_list"),at=Symbol.for("react.memo"),Ce=Symbol.for("react.lazy"),ge=Symbol.for("react.offscreen"),X=Symbol.iterator;function _e(n){return n===null||typeof n!="object"?null:(n=X&&n[X]||n["@@iterator"],typeof n=="function"?n:null)}var re=Object.assign,O;function Y(n){if(O===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);O=o&&o[1]||""}return`
`+O+n}var fe=!1;function ye(n,o){if(!n||fe)return"";fe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(ee){var f=ee}Reflect.construct(n,[],o)}else{try{o.call()}catch(ee){f=ee}n.call(o.prototype)}else{try{throw Error()}catch(ee){f=ee}n()}}catch(ee){if(ee&&f&&typeof ee.stack=="string"){for(var g=ee.stack.split(`
`),_=f.stack.split(`
`),S=g.length-1,M=_.length-1;1<=S&&0<=M&&g[S]!==_[M];)M--;for(;1<=S&&0<=M;S--,M--)if(g[S]!==_[M]){if(S!==1||M!==1)do if(S--,M--,0>M||g[S]!==_[M]){var j=`
`+g[S].replace(" at new "," at ");return n.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",n.displayName)),j}while(1<=S&&0<=M);break}}}finally{fe=!1,Error.prepareStackTrace=u}return(n=n?n.displayName||n.name:"")?Y(n):""}function Te(n){switch(n.tag){case 5:return Y(n.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return n=ye(n.type,!1),n;case 11:return n=ye(n.type.render,!1),n;case 1:return n=ye(n.type,!0),n;default:return""}}function ce(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case F:return"Fragment";case Oe:return"Portal";case D:return"Profiler";case k:return"StrictMode";case N:return"Suspense";case Ge:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case V:return(n.displayName||"Context")+".Consumer";case B:return(n._context.displayName||"Context")+".Provider";case U:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case at:return o=n.displayName||null,o!==null?o:ce(n.type)||"Memo";case Ce:o=n._payload,n=n._init;try{return ce(n(o))}catch{}}return null}function Ze(n){var o=n.type;switch(n.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=o.render,n=n.displayName||n.name||"",o.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(o);case 8:return o===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function We(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function rt(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Rt(n){var o=rt(n)?"checked":"value",u=Object.getOwnPropertyDescriptor(n.constructor.prototype,o),f=""+n[o];if(!n.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,_=u.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return g.call(this)},set:function(S){f=""+S,_.call(this,S)}}),Object.defineProperty(n,o,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function jr(n){n._valueTracker||(n._valueTracker=Rt(n))}function ir(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return n&&(f=rt(n)?n.checked?"true":"false":n.value),n=f,n!==u?(o.setValue(n),!0):!1}function sr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Br(n,o){var u=o.checked;return re({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??n._wrapperState.initialChecked})}function us(n,o){var u=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;u=We(o.value!=null?o.value:u),n._wrapperState={initialChecked:f,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Ur(n,o){o=o.checked,o!=null&&we(n,"checked",o,!1)}function gn(n,o){Ur(n,o);var u=We(o.value),f=o.type;if(u!=null)f==="number"?(u===0&&n.value===""||n.value!=u)&&(n.value=""+u):n.value!==""+u&&(n.value=""+u);else if(f==="submit"||f==="reset"){n.removeAttribute("value");return}o.hasOwnProperty("value")?ft(n,o.type,u):o.hasOwnProperty("defaultValue")&&ft(n,o.type,We(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(n.defaultChecked=!!o.defaultChecked)}function br(n,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+n._wrapperState.initialValue,u||o===n.value||(n.value=o),n.defaultValue=o}u=n.name,u!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,u!==""&&(n.name=u)}function ft(n,o,u){(o!=="number"||sr(n.ownerDocument)!==n)&&(u==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+u&&(n.defaultValue=""+u))}var St=Array.isArray;function _n(n,o,u,f){if(n=n.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<n.length;u++)g=o.hasOwnProperty("$"+n[u].value),n[u].selected!==g&&(n[u].selected=g),g&&f&&(n[u].defaultSelected=!0)}else{for(u=""+We(u),o=null,g=0;g<n.length;g++){if(n[g].value===u){n[g].selected=!0,f&&(n[g].defaultSelected=!0);return}o!==null||n[g].disabled||(o=n[g])}o!==null&&(o.selected=!0)}}function Ut(n,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return re({},o,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Hn(n,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(St(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}n._wrapperState={initialValue:We(u)}}function Zs(n,o){var u=We(o.value),f=We(o.defaultValue);u!=null&&(u=""+u,u!==n.value&&(n.value=u),o.defaultValue==null&&n.defaultValue!==u&&(n.defaultValue=u)),f!=null&&(n.defaultValue=""+f)}function Wr(n){var o=n.textContent;o===n._wrapperState.initialValue&&o!==""&&o!==null&&(n.value=o)}function or(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pi(n,o){return n==null||n==="http://www.w3.org/1999/xhtml"?or(o):n==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ar,Li=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,f,g){MSApp.execUnsafeLocalFunction(function(){return n(o,u,f,g)})}:n})(function(n,o){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=o;else{for(ar=ar||document.createElement("div"),ar.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=ar.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;o.firstChild;)n.appendChild(o.firstChild)}});function yn(n,o){if(o){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=o;return}}n.textContent=o}var lr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cr=["Webkit","ms","Moz","O"];Object.keys(lr).forEach(function(n){Cr.forEach(function(o){o=o+n.charAt(0).toUpperCase()+n.substring(1),lr[o]=lr[n]})});function Ar(n,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||lr.hasOwnProperty(n)&&lr[n]?(""+o).trim():o+"px"}function Hr(n,o){n=n.style;for(var u in o)if(o.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=Ar(u,o[u],f);u==="float"&&(u="cssFloat"),f?n.setProperty(u,g):n[u]=g}}var gi=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function An(n,o){if(o){if(gi[n]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function ur(n,o){if(n.indexOf("-")===-1)return typeof o.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cr=null;function vn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var hr=null,dr=null,Tt=null;function Mi(n){if(n=As(n)){if(typeof hr!="function")throw Error(t(280));var o=n.stateNode;o&&(o=Ja(o),hr(n.stateNode,n.type,o))}}function Be(n){dr?Tt?Tt.push(n):Tt=[n]:dr=n}function wt(){if(dr){var n=dr,o=Tt;if(Tt=dr=null,Mi(n),o)for(n=0;n<o.length;n++)Mi(o[n])}}function Ot(n,o){return n(o)}function Kt(){}var wn=!1;function Pt(n,o,u){if(wn)return n(o,u);wn=!0;try{return Ot(n,o,u)}finally{wn=!1,(dr!==null||Tt!==null)&&(Kt(),wt())}}function Wt(n,o){var u=n.stateNode;if(u===null)return null;var f=Ja(u);if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(n=n.type,f=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!f;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var qn=!1;if(v)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){qn=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch{qn=!1}function un(n,o,u,f,g,_,S,M,j){var ee=Array.prototype.slice.call(arguments,3);try{o.apply(u,ee)}catch(le){this.onError(le)}}var Vt=!1,ve=null,Di=!1,$n=null,Qo={onError:function(n){Vt=!0,ve=n}};function Yo(n,o,u,f,g,_,S,M,j){Vt=!1,ve=null,un.apply(Qo,arguments)}function cs(n,o,u,f,g,_,S,M,j){if(Yo.apply(this,arguments),Vt){if(Vt){var ee=ve;Vt=!1,ve=null}else throw Error(t(198));Di||(Di=!0,$n=ee)}}function fr(n){var o=n,u=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,(o.flags&4098)!==0&&(u=o.return),n=o.return;while(n)}return o.tag===3?u:null}function qr(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function Xo(n){if(fr(n)!==n)throw Error(t(188))}function ja(n){var o=n.alternate;if(!o){if(o=fr(n),o===null)throw Error(t(188));return o!==n?null:n}for(var u=n,f=o;;){var g=u.return;if(g===null)break;var _=g.alternate;if(_===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===u)return Xo(g),n;if(_===f)return Xo(g),o;_=_.sibling}throw Error(t(188))}if(u.return!==f.return)u=g,f=_;else{for(var S=!1,M=g.child;M;){if(M===u){S=!0,u=g,f=_;break}if(M===f){S=!0,f=g,u=_;break}M=M.sibling}if(!S){for(M=_.child;M;){if(M===u){S=!0,u=_,f=g;break}if(M===f){S=!0,f=_,u=g;break}M=M.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?n:o}function Ba(n){return n=ja(n),n!==null?hs(n):null}function hs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var o=hs(n);if(o!==null)return o;n=n.sibling}return null}var Jo=e.unstable_scheduleCallback,ds=e.unstable_cancelCallback,fs=e.unstable_shouldYield,mr=e.unstable_requestPaint,It=e.unstable_now,Wl=e.unstable_getCurrentPriorityLevel,Ks=e.unstable_ImmediatePriority,ea=e.unstable_UserBlockingPriority,ms=e.unstable_NormalPriority,ps=e.unstable_LowPriority,$r=e.unstable_IdlePriority,Oi=null,kn=null;function Vi(n){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(Oi,n,void 0,(n.current.flags&128)===128)}catch{}}var Ke=Math.clz32?Math.clz32:pr,ut=Math.log,En=Math.LN2;function pr(n){return n>>>=0,n===0?32:31-(ut(n)/En|0)|0}var Tn=64,Gr=4194304;function Ie(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function gt(n,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,g=n.suspendedLanes,_=n.pingedLanes,S=u&268435455;if(S!==0){var M=S&~g;M!==0?f=Ie(M):(_&=S,_!==0&&(f=Ie(_)))}else S=u&~g,S!==0?f=Ie(S):_!==0&&(f=Ie(_));if(f===0)return 0;if(o!==0&&o!==f&&(o&g)===0&&(g=f&-f,_=o&-o,g>=_||g===16&&(_&4194240)!==0))return o;if((f&4)!==0&&(f|=u&16),o=n.entangledLanes,o!==0)for(n=n.entanglements,o&=f;0<o;)u=31-Ke(o),g=1<<u,f|=n[u],o&=~g;return f}function _i(n,o){switch(n){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zr(n,o){for(var u=n.suspendedLanes,f=n.pingedLanes,g=n.expirationTimes,_=n.pendingLanes;0<_;){var S=31-Ke(_),M=1<<S,j=g[S];j===-1?((M&u)===0||(M&f)!==0)&&(g[S]=_i(M,o)):j<=o&&(n.expiredLanes|=M),_&=~M}}function cn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ta(){var n=Tn;return Tn<<=1,(Tn&4194240)===0&&(Tn=64),n}function zi(n){for(var o=[],u=0;31>u;u++)o.push(n);return o}function Gn(n,o,u){n.pendingLanes|=o,o!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,o=31-Ke(o),n[o]=u}function Lt(n,o){var u=n.pendingLanes&~o;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=o,n.mutableReadLanes&=o,n.entangledLanes&=o,o=n.entanglements;var f=n.eventTimes;for(n=n.expirationTimes;0<u;){var g=31-Ke(u),_=1<<g;o[g]=0,f[g]=-1,n[g]=-1,u&=~_}}function kr(n,o){var u=n.entangledLanes|=o;for(n=n.entanglements;u;){var f=31-Ke(u),g=1<<f;g&o|n[f]&o&&(n[f]|=o),u&=~g}}var Je=0;function Rn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var gs,Kr,_s,ys,Fi,gr=!1,ji=[],Zn=null,Rr=null,$t=null,vs=new Map,ze=new Map,Mt=[],_t="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yi(n,o){switch(n){case"focusin":case"focusout":Zn=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":$t=null;break;case"pointerover":case"pointerout":vs.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ze.delete(o.pointerId)}}function Kn(n,o,u,f,g,_){return n===null||n.nativeEvent!==_?(n={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:_,targetContainers:[g]},o!==null&&(o=As(o),o!==null&&Kr(o)),n):(n.eventSystemFlags|=f,o=n.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),n)}function Qs(n,o,u,f,g){switch(o){case"focusin":return Zn=Kn(Zn,n,o,u,f,g),!0;case"dragenter":return Rr=Kn(Rr,n,o,u,f,g),!0;case"mouseover":return $t=Kn($t,n,o,u,f,g),!0;case"pointerover":var _=g.pointerId;return vs.set(_,Kn(vs.get(_)||null,n,o,u,f,g)),!0;case"gotpointercapture":return _=g.pointerId,ze.set(_,Kn(ze.get(_)||null,n,o,u,f,g)),!0}return!1}function Bi(n){var o=Cs(n.target);if(o!==null){var u=fr(o);if(u!==null){if(o=u.tag,o===13){if(o=qr(u),o!==null){n.blockedOn=o,Fi(n.priority,function(){_s(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function lt(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var u=Ts(n.domEventName,n.eventSystemFlags,o[0],n.nativeEvent);if(u===null){u=n.nativeEvent;var f=new u.constructor(u.type,u);cr=f,u.target.dispatchEvent(f),cr=null}else return o=As(u),o!==null&&Kr(o),n.blockedOn=u,!1;o.shift()}return!0}function Ys(n,o,u){lt(n)&&u.delete(o)}function ws(){gr=!1,Zn!==null&&lt(Zn)&&(Zn=null),Rr!==null&&lt(Rr)&&(Rr=null),$t!==null&&lt($t)&&($t=null),vs.forEach(Ys),ze.forEach(Ys)}function bt(n,o){n.blockedOn===o&&(n.blockedOn=null,gr||(gr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ws)))}function Nn(n){function o(g){return bt(g,n)}if(0<ji.length){bt(ji[0],n);for(var u=1;u<ji.length;u++){var f=ji[u];f.blockedOn===n&&(f.blockedOn=null)}}for(Zn!==null&&bt(Zn,n),Rr!==null&&bt(Rr,n),$t!==null&&bt($t,n),vs.forEach(o),ze.forEach(o),u=0;u<Mt.length;u++)f=Mt[u],f.blockedOn===n&&(f.blockedOn=null);for(;0<Mt.length&&(u=Mt[0],u.blockedOn===null);)Bi(u),u.blockedOn===null&&Mt.shift()}var Qr=xe.ReactCurrentBatchConfig,Yr=!0;function Xr(n,o,u,f){var g=Je,_=Qr.transition;Qr.transition=null;try{Je=1,Es(n,o,u,f)}finally{Je=g,Qr.transition=_}}function na(n,o,u,f){var g=Je,_=Qr.transition;Qr.transition=null;try{Je=4,Es(n,o,u,f)}finally{Je=g,Qr.transition=_}}function Es(n,o,u,f){if(Yr){var g=Ts(n,o,u,f);if(g===null)r(n,o,f,Jr,u),yi(n,f);else if(Qs(g,n,o,u,f))f.stopPropagation();else if(yi(n,f),o&4&&-1<_t.indexOf(n)){for(;g!==null;){var _=As(g);if(_!==null&&gs(_),_=Ts(n,o,u,f),_===null&&r(n,o,f,Jr,u),_===g)break;g=_}g!==null&&f.stopPropagation()}else r(n,o,f,null,u)}}var Jr=null;function Ts(n,o,u,f){if(Jr=null,n=vn(f),n=Cs(n),n!==null)if(o=fr(n),o===null)n=null;else if(u=o.tag,u===13){if(n=qr(o),n!==null)return n;n=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null);return Jr=n,null}function et(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wl()){case Ks:return 1;case ea:return 4;case ms:case ps:return 16;case $r:return 536870912;default:return 16}default:return 16}}var Qn=null,hn=null,Yn=null;function ra(){if(Yn)return Yn;var n,o=hn,u=o.length,f,g="value"in Qn?Qn.value:Qn.textContent,_=g.length;for(n=0;n<u&&o[n]===g[n];n++);var S=u-n;for(f=1;f<=S&&o[u-f]===g[_-f];f++);return Yn=g.slice(n,1<f?1-f:void 0)}function xs(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function _r(){return!0}function ia(){return!1}function rn(n){function o(u,f,g,_,S){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var M in n)n.hasOwnProperty(M)&&(u=n[M],this[M]=u?u(_):_[M]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?_r:ia,this.isPropagationStopped=ia,this}return re(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=_r)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=_r)},persist:function(){},isPersistent:_r}),o}var ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Is=rn(ei),ti=re({},ei,{view:0,detail:0}),Xs=rn(ti),xn,Js,Ln,Mn=re({},ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ue,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ln&&(Ln&&n.type==="mousemove"?(xn=n.screenX-Ln.screenX,Js=n.screenY-Ln.screenY):Js=xn=0,Ln=n),xn)},movementY:function(n){return"movementY"in n?n.movementY:Js}}),eo=rn(Mn),sa=re({},Mn,{dataTransfer:0}),to=rn(sa),no=re({},ti,{relatedTarget:0}),Qt=rn(no),oa=re({},ei,{animationName:0,elapsedTime:0,pseudoElement:0}),Ua=rn(oa),Ui=re({},ei,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),h=rn(Ui),y=re({},ei,{data:0}),T=rn(y),C={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},K={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function de(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=K[n])?!!o[n]:!1}function Ue(){return de}var ct=re({},ti,{key:function(n){if(n.key){var o=C[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=xs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?H[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ue,charCode:function(n){return n.type==="keypress"?xs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?xs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),mt=rn(ct),zt=re({},Mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xn=rn(zt),Nr=re({},ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ue}),yr=rn(Nr),ni=re({},ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),ro=rn(ni),io=re({},Mn,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Yh=rn(io),Lr=[9,13,27,32],Wi=v&&"CompositionEvent"in window,aa=null;v&&"documentMode"in document&&(aa=document.documentMode);var vi=v&&"TextEvent"in window&&!aa,Ku=v&&(!Wi||aa&&8<aa&&11>=aa),Ss=" ",Qu=!1;function so(n,o){switch(n){case"keyup":return Lr.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var wi=!1;function Xh(n,o){switch(n){case"compositionend":return Hl(o);case"keypress":return o.which!==32?null:(Qu=!0,Ss);case"textInput":return n=o.data,n===Ss&&Qu?null:n;default:return null}}function Hi(n,o){if(wi)return n==="compositionend"||!Wi&&so(n,o)?(n=ra(),Yn=hn=Qn=null,wi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ku&&o.locale!=="ko"?null:o.data;default:return null}}var Wa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yu(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!Wa[n.type]:o==="textarea"}function Ha(n,o,u,f){Be(f),o=d(o,"onChange"),0<o.length&&(u=new Is("onChange","change",null,u,f),n.push({event:u,listeners:o}))}var la=null,Jn=null;function Jh(n){Jl(n,0)}function Ei(n){var o=ks(n);if(ir(o))return n}function ed(n,o){if(n==="change")return o}var ri=!1;if(v){var oo;if(v){var qa="oninput"in document;if(!qa){var $a=document.createElement("div");$a.setAttribute("oninput","return;"),qa=typeof $a.oninput=="function"}oo=qa}else oo=!1;ri=oo&&(!document.documentMode||9<document.documentMode)}function ua(){la&&(la.detachEvent("onpropertychange",Ga),Jn=la=null)}function Ga(n){if(n.propertyName==="value"&&Ei(Jn)){var o=[];Ha(o,Jn,n,vn(n)),Pt(Jh,o)}}function Za(n,o,u){n==="focusin"?(ua(),la=o,Jn=u,la.attachEvent("onpropertychange",Ga)):n==="focusout"&&ua()}function ao(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ei(Jn)}function Ka(n,o){if(n==="click")return Ei(o)}function ql(n,o){if(n==="input"||n==="change")return Ei(o)}function Xu(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var Mr=typeof Object.is=="function"?Object.is:Xu;function qi(n,o){if(Mr(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var u=Object.keys(n),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!E.call(o,g)||!Mr(n[g],o[g]))return!1}return!0}function Ju(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function $l(n,o){var u=Ju(n);n=0;for(var f;u;){if(u.nodeType===3){if(f=n+u.textContent.length,n<=o&&f>=o)return{node:u,offset:o-n};n=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Ju(u)}}function ec(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?ec(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function Gl(){for(var n=window,o=sr();o instanceof n.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)n=o.contentWindow;else break;o=sr(n.document)}return o}function Zl(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}function ii(n){var o=Gl(),u=n.focusedElem,f=n.selectionRange;if(o!==u&&u&&u.ownerDocument&&ec(u.ownerDocument.documentElement,u)){if(f!==null&&Zl(u)){if(o=f.start,n=f.end,n===void 0&&(n=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(n,u.value.length);else if(n=(o=u.ownerDocument||document)&&o.defaultView||window,n.getSelection){n=n.getSelection();var g=u.textContent.length,_=Math.min(f.start,g);f=f.end===void 0?_:Math.min(f.end,g),!n.extend&&_>f&&(g=f,f=_,_=g),g=$l(u,_);var S=$l(u,f);g&&S&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==S.node||n.focusOffset!==S.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),n.removeAllRanges(),_>f?(n.addRange(o),n.extend(S.node,S.offset)):(o.setEnd(S.node,S.offset),n.addRange(o)))}}for(o=[],n=u;n=n.parentNode;)n.nodeType===1&&o.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)n=o[u],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Qa=v&&"documentMode"in document&&11>=document.documentMode,lo=null,uo=null,ca=null,Ya=!1;function tc(n,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Ya||lo==null||lo!==sr(f)||(f=lo,"selectionStart"in f&&Zl(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),ca&&qi(ca,f)||(ca=f,f=d(uo,"onSelect"),0<f.length&&(o=new Is("onSelect","select",null,o,u),n.push({event:o,listeners:f}),o.target=lo)))}function $i(n,o){var u={};return u[n.toLowerCase()]=o.toLowerCase(),u["Webkit"+n]="webkit"+o,u["Moz"+n]="moz"+o,u}var co={animationend:$i("Animation","AnimationEnd"),animationiteration:$i("Animation","AnimationIteration"),animationstart:$i("Animation","AnimationStart"),transitionend:$i("Transition","TransitionEnd")},Gi={},Kl={};v&&(Kl=document.createElement("div").style,"AnimationEvent"in window||(delete co.animationend.animation,delete co.animationiteration.animation,delete co.animationstart.animation),"TransitionEvent"in window||delete co.transitionend.transition);function ha(n){if(Gi[n])return Gi[n];if(!co[n])return n;var o=co[n],u;for(u in o)if(o.hasOwnProperty(u)&&u in Kl)return Gi[n]=o[u];return n}var nc=ha("animationend"),si=ha("animationiteration"),Ql=ha("animationstart"),Yl=ha("transitionend"),ho=new Map,rc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(n,o){ho.set(n,o),c(o,[n])}for(var Ps=0;Ps<rc.length;Ps++){var Xa=rc[Ps],ic=Xa.toLowerCase(),td=Xa[0].toUpperCase()+Xa.slice(1);Dr(ic,"on"+td)}Dr(nc,"onAnimationEnd"),Dr(si,"onAnimationIteration"),Dr(Ql,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Yl,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sc=new Set("cancel close invalid load scroll toggle".split(" ").concat(fo));function Xl(n,o,u){var f=n.type||"unknown-event";n.currentTarget=u,cs(f,o,void 0,n),n.currentTarget=null}function Jl(n,o){o=(o&4)!==0;for(var u=0;u<n.length;u++){var f=n[u],g=f.event;f=f.listeners;e:{var _=void 0;if(o)for(var S=f.length-1;0<=S;S--){var M=f[S],j=M.instance,ee=M.currentTarget;if(M=M.listener,j!==_&&g.isPropagationStopped())break e;Xl(g,M,ee),_=j}else for(S=0;S<f.length;S++){if(M=f[S],j=M.instance,ee=M.currentTarget,M=M.listener,j!==_&&g.isPropagationStopped())break e;Xl(g,M,ee),_=j}}}if(Di)throw n=$n,Di=!1,$n=null,n}function xt(n,o){var u=o[_o];u===void 0&&(u=o[_o]=new Set);var f=n+"__bubble";u.has(f)||(oc(o,n,2,!1),u.add(f))}function eu(n,o,u){var f=0;o&&(f|=4),oc(u,n,f,o)}var da="_reactListening"+Math.random().toString(36).slice(2);function mo(n){if(!n[da]){n[da]=!0,s.forEach(function(u){u!=="selectionchange"&&(sc.has(u)||eu(u,!1,n),eu(u,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[da]||(o[da]=!0,eu("selectionchange",!1,o))}}function oc(n,o,u,f){switch(et(o)){case 1:var g=Xr;break;case 4:g=na;break;default:g=Es}u=g.bind(null,o,u,n),g=void 0,!qn||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?n.addEventListener(o,u,{capture:!0,passive:g}):n.addEventListener(o,u,!0):g!==void 0?n.addEventListener(o,u,{passive:g}):n.addEventListener(o,u,!1)}function r(n,o,u,f,g){var _=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var M=f.stateNode.containerInfo;if(M===g||M.nodeType===8&&M.parentNode===g)break;if(S===4)for(S=f.return;S!==null;){var j=S.tag;if((j===3||j===4)&&(j=S.stateNode.containerInfo,j===g||j.nodeType===8&&j.parentNode===g))return;S=S.return}for(;M!==null;){if(S=Cs(M),S===null)return;if(j=S.tag,j===5||j===6){f=_=S;continue e}M=M.parentNode}}f=f.return}Pt(function(){var ee=_,le=vn(u),ue=[];e:{var ae=ho.get(n);if(ae!==void 0){var Se=Is,Re=n;switch(n){case"keypress":if(xs(u)===0)break e;case"keydown":case"keyup":Se=mt;break;case"focusin":Re="focus",Se=Qt;break;case"focusout":Re="blur",Se=Qt;break;case"beforeblur":case"afterblur":Se=Qt;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=eo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=to;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=yr;break;case nc:case si:case Ql:Se=Ua;break;case Yl:Se=ro;break;case"scroll":Se=Xs;break;case"wheel":Se=Yh;break;case"copy":case"cut":case"paste":Se=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=Xn}var Ne=(o&4)!==0,Gt=!Ne&&n==="scroll",G=Ne?ae!==null?ae+"Capture":null:ae;Ne=[];for(var W=ee,Z;W!==null;){Z=W;var he=Z.stateNode;if(Z.tag===5&&he!==null&&(Z=he,G!==null&&(he=Wt(W,G),he!=null&&Ne.push(l(W,he,Z)))),Gt)break;W=W.return}0<Ne.length&&(ae=new Se(ae,Re,null,u,le),ue.push({event:ae,listeners:Ne}))}}if((o&7)===0){e:{if(ae=n==="mouseover"||n==="pointerover",Se=n==="mouseout"||n==="pointerout",ae&&u!==cr&&(Re=u.relatedTarget||u.fromElement)&&(Cs(Re)||Re[yt]))break e;if((Se||ae)&&(ae=le.window===le?le:(ae=le.ownerDocument)?ae.defaultView||ae.parentWindow:window,Se?(Re=u.relatedTarget||u.toElement,Se=ee,Re=Re?Cs(Re):null,Re!==null&&(Gt=fr(Re),Re!==Gt||Re.tag!==5&&Re.tag!==6)&&(Re=null)):(Se=null,Re=ee),Se!==Re)){if(Ne=eo,he="onMouseLeave",G="onMouseEnter",W="mouse",(n==="pointerout"||n==="pointerover")&&(Ne=Xn,he="onPointerLeave",G="onPointerEnter",W="pointer"),Gt=Se==null?ae:ks(Se),Z=Re==null?ae:ks(Re),ae=new Ne(he,W+"leave",Se,u,le),ae.target=Gt,ae.relatedTarget=Z,he=null,Cs(le)===ee&&(Ne=new Ne(G,W+"enter",Re,u,le),Ne.target=Z,Ne.relatedTarget=Gt,he=Ne),Gt=he,Se&&Re)t:{for(Ne=Se,G=Re,W=0,Z=Ne;Z;Z=p(Z))W++;for(Z=0,he=G;he;he=p(he))Z++;for(;0<W-Z;)Ne=p(Ne),W--;for(;0<Z-W;)G=p(G),Z--;for(;W--;){if(Ne===G||G!==null&&Ne===G.alternate)break t;Ne=p(Ne),G=p(G)}Ne=null}else Ne=null;Se!==null&&w(ue,ae,Se,Ne,!1),Re!==null&&Gt!==null&&w(ue,Gt,Re,Ne,!0)}}e:{if(ae=ee?ks(ee):window,Se=ae.nodeName&&ae.nodeName.toLowerCase(),Se==="select"||Se==="input"&&ae.type==="file")var Le=ed;else if(Yu(ae))if(ri)Le=ql;else{Le=ao;var Fe=Za}else(Se=ae.nodeName)&&Se.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(Le=Ka);if(Le&&(Le=Le(n,ee))){Ha(ue,Le,u,le);break e}Fe&&Fe(n,ae,ee),n==="focusout"&&(Fe=ae._wrapperState)&&Fe.controlled&&ae.type==="number"&&ft(ae,"number",ae.value)}switch(Fe=ee?ks(ee):window,n){case"focusin":(Yu(Fe)||Fe.contentEditable==="true")&&(lo=Fe,uo=ee,ca=null);break;case"focusout":ca=uo=lo=null;break;case"mousedown":Ya=!0;break;case"contextmenu":case"mouseup":case"dragend":Ya=!1,tc(ue,u,le);break;case"selectionchange":if(Qa)break;case"keydown":case"keyup":tc(ue,u,le)}var je;if(Wi)e:{switch(n){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else wi?so(n,u)&&(qe="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(qe="onCompositionStart");qe&&(Ku&&u.locale!=="ko"&&(wi||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&wi&&(je=ra()):(Qn=le,hn="value"in Qn?Qn.value:Qn.textContent,wi=!0)),Fe=d(ee,qe),0<Fe.length&&(qe=new T(qe,n,null,u,le),ue.push({event:qe,listeners:Fe}),je?qe.data=je:(je=Hl(u),je!==null&&(qe.data=je)))),(je=vi?Xh(n,u):Hi(n,u))&&(ee=d(ee,"onBeforeInput"),0<ee.length&&(le=new T("onBeforeInput","beforeinput",null,u,le),ue.push({event:le,listeners:ee}),le.data=je))}Jl(ue,o)})}function l(n,o,u){return{instance:n,listener:o,currentTarget:u}}function d(n,o){for(var u=o+"Capture",f=[];n!==null;){var g=n,_=g.stateNode;g.tag===5&&_!==null&&(g=_,_=Wt(n,u),_!=null&&f.unshift(l(n,_,g)),_=Wt(n,o),_!=null&&f.push(l(n,_,g))),n=n.return}return f}function p(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function w(n,o,u,f,g){for(var _=o._reactName,S=[];u!==null&&u!==f;){var M=u,j=M.alternate,ee=M.stateNode;if(j!==null&&j===f)break;M.tag===5&&ee!==null&&(M=ee,g?(j=Wt(u,_),j!=null&&S.unshift(l(u,j,M))):g||(j=Wt(u,_),j!=null&&S.push(l(u,j,M)))),u=u.return}S.length!==0&&n.push({event:o,listeners:S})}var b=/\r\n?/g,z=/\u0000|\uFFFD/g;function $(n){return(typeof n=="string"?n:""+n).replace(b,`
`).replace(z,"")}function J(n,o,u){if(o=$(o),$(n)!==o&&u)throw Error(t(425))}function oe(){}var Ee=null,Ve=null;function Xe(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var sn=typeof setTimeout=="function"?setTimeout:void 0,Yt=typeof clearTimeout=="function"?clearTimeout:void 0,er=typeof Promise=="function"?Promise:void 0,Dn=typeof queueMicrotask=="function"?queueMicrotask:typeof er<"u"?function(n){return er.resolve(null).then(n).catch(po)}:sn;function po(n){setTimeout(function(){throw n})}function tu(n,o){var u=o,f=0;do{var g=u.nextSibling;if(n.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){n.removeChild(g),Nn(o);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);Nn(o)}function Zi(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return n}function ac(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return n;o--}else u==="/$"&&o++}n=n.previousSibling}return null}var bs=Math.random().toString(36).slice(2),oi="__reactFiber$"+bs,go="__reactProps$"+bs,yt="__reactContainer$"+bs,_o="__reactEvents$"+bs,nd="__reactListeners$"+bs,rd="__reactHandles$"+bs;function Cs(n){var o=n[oi];if(o)return o;for(var u=n.parentNode;u;){if(o=u[yt]||u[oi]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(n=ac(n);n!==null;){if(u=n[oi])return u;n=ac(n)}return o}n=u,u=n.parentNode}return null}function As(n){return n=n[oi]||n[yt],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ks(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Ja(n){return n[go]||null}var id=[],el=-1;function yo(n){return{current:n}}function Nt(n){0>el||(n.current=id[el],id[el]=null,el--)}function Ct(n,o){el++,id[el]=n.current,n.current=o}var vo={},On=yo(vo),vr=yo(!1),fa=vo;function tl(n,o){var u=n.type.contextTypes;if(!u)return vo;var f=n.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var g={},_;for(_ in u)g[_]=o[_];return f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=o,n.__reactInternalMemoizedMaskedChildContext=g),g}function wr(n){return n=n.childContextTypes,n!=null}function lc(){Nt(vr),Nt(On)}function Gm(n,o,u){if(On.current!==vo)throw Error(t(168));Ct(On,o),Ct(vr,u)}function Zm(n,o,u){var f=n.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in o))throw Error(t(108,Ze(n)||"Unknown",g));return re({},u,f)}function uc(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||vo,fa=On.current,Ct(On,n),Ct(vr,vr.current),!0}function Km(n,o,u){var f=n.stateNode;if(!f)throw Error(t(169));u?(n=Zm(n,o,fa),f.__reactInternalMemoizedMergedChildContext=n,Nt(vr),Nt(On),Ct(On,n)):Nt(vr),Ct(vr,u)}var Rs=null,cc=!1,sd=!1;function Qm(n){Rs===null?Rs=[n]:Rs.push(n)}function tw(n){cc=!0,Qm(n)}function wo(){if(!sd&&Rs!==null){sd=!0;var n=0,o=Je;try{var u=Rs;for(Je=1;n<u.length;n++){var f=u[n];do f=f(!0);while(f!==null)}Rs=null,cc=!1}catch(g){throw Rs!==null&&(Rs=Rs.slice(n+1)),Jo(Ks,wo),g}finally{Je=o,sd=!1}}return null}var nl=[],rl=0,hc=null,dc=0,ai=[],li=0,ma=null,Ns=1,Ls="";function pa(n,o){nl[rl++]=dc,nl[rl++]=hc,hc=n,dc=o}function Ym(n,o,u){ai[li++]=Ns,ai[li++]=Ls,ai[li++]=ma,ma=n;var f=Ns;n=Ls;var g=32-Ke(f)-1;f&=~(1<<g),u+=1;var _=32-Ke(o)+g;if(30<_){var S=g-g%5;_=(f&(1<<S)-1).toString(32),f>>=S,g-=S,Ns=1<<32-Ke(o)+g|u<<g|f,Ls=_+n}else Ns=1<<_|u<<g|f,Ls=n}function od(n){n.return!==null&&(pa(n,1),Ym(n,1,0))}function ad(n){for(;n===hc;)hc=nl[--rl],nl[rl]=null,dc=nl[--rl],nl[rl]=null;for(;n===ma;)ma=ai[--li],ai[li]=null,Ls=ai[--li],ai[li]=null,Ns=ai[--li],ai[li]=null}var Or=null,Vr=null,Dt=!1,Ti=null;function Xm(n,o){var u=di(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=n,o=n.deletions,o===null?(n.deletions=[u],n.flags|=16):o.push(u)}function Jm(n,o){switch(n.tag){case 5:var u=n.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(n.stateNode=o,Or=n,Vr=Zi(o.firstChild),!0):!1;case 6:return o=n.pendingProps===""||o.nodeType!==3?null:o,o!==null?(n.stateNode=o,Or=n,Vr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=ma!==null?{id:Ns,overflow:Ls}:null,n.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=di(18,null,null,0),u.stateNode=o,u.return=n,n.child=u,Or=n,Vr=null,!0):!1;default:return!1}}function ld(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ud(n){if(Dt){var o=Vr;if(o){var u=o;if(!Jm(n,o)){if(ld(n))throw Error(t(418));o=Zi(u.nextSibling);var f=Or;o&&Jm(n,o)?Xm(f,u):(n.flags=n.flags&-4097|2,Dt=!1,Or=n)}}else{if(ld(n))throw Error(t(418));n.flags=n.flags&-4097|2,Dt=!1,Or=n}}}function ep(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Or=n}function fc(n){if(n!==Or)return!1;if(!Dt)return ep(n),Dt=!0,!1;var o;if((o=n.tag!==3)&&!(o=n.tag!==5)&&(o=n.type,o=o!=="head"&&o!=="body"&&!Xe(n.type,n.memoizedProps)),o&&(o=Vr)){if(ld(n))throw tp(),Error(t(418));for(;o;)Xm(n,o),o=Zi(o.nextSibling)}if(ep(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,o=0;n;){if(n.nodeType===8){var u=n.data;if(u==="/$"){if(o===0){Vr=Zi(n.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}n=n.nextSibling}Vr=null}}else Vr=Or?Zi(n.stateNode.nextSibling):null;return!0}function tp(){for(var n=Vr;n;)n=Zi(n.nextSibling)}function il(){Vr=Or=null,Dt=!1}function cd(n){Ti===null?Ti=[n]:Ti.push(n)}var nw=xe.ReactCurrentBatchConfig;function nu(n,o,u){if(n=u.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,n));var g=f,_=""+n;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===_?o.ref:(o=function(S){var M=g.refs;S===null?delete M[_]:M[_]=S},o._stringRef=_,o)}if(typeof n!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,n))}return n}function mc(n,o){throw n=Object.prototype.toString.call(o),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n))}function np(n){var o=n._init;return o(n._payload)}function rp(n){function o(G,W){if(n){var Z=G.deletions;Z===null?(G.deletions=[W],G.flags|=16):Z.push(W)}}function u(G,W){if(!n)return null;for(;W!==null;)o(G,W),W=W.sibling;return null}function f(G,W){for(G=new Map;W!==null;)W.key!==null?G.set(W.key,W):G.set(W.index,W),W=W.sibling;return G}function g(G,W){return G=Co(G,W),G.index=0,G.sibling=null,G}function _(G,W,Z){return G.index=Z,n?(Z=G.alternate,Z!==null?(Z=Z.index,Z<W?(G.flags|=2,W):Z):(G.flags|=2,W)):(G.flags|=1048576,W)}function S(G){return n&&G.alternate===null&&(G.flags|=2),G}function M(G,W,Z,he){return W===null||W.tag!==6?(W=tf(Z,G.mode,he),W.return=G,W):(W=g(W,Z),W.return=G,W)}function j(G,W,Z,he){var Le=Z.type;return Le===F?le(G,W,Z.props.children,he,Z.key):W!==null&&(W.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===Ce&&np(Le)===W.type)?(he=g(W,Z.props),he.ref=nu(G,W,Z),he.return=G,he):(he=zc(Z.type,Z.key,Z.props,null,G.mode,he),he.ref=nu(G,W,Z),he.return=G,he)}function ee(G,W,Z,he){return W===null||W.tag!==4||W.stateNode.containerInfo!==Z.containerInfo||W.stateNode.implementation!==Z.implementation?(W=nf(Z,G.mode,he),W.return=G,W):(W=g(W,Z.children||[]),W.return=G,W)}function le(G,W,Z,he,Le){return W===null||W.tag!==7?(W=xa(Z,G.mode,he,Le),W.return=G,W):(W=g(W,Z),W.return=G,W)}function ue(G,W,Z){if(typeof W=="string"&&W!==""||typeof W=="number")return W=tf(""+W,G.mode,Z),W.return=G,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case De:return Z=zc(W.type,W.key,W.props,null,G.mode,Z),Z.ref=nu(G,null,W),Z.return=G,Z;case Oe:return W=nf(W,G.mode,Z),W.return=G,W;case Ce:var he=W._init;return ue(G,he(W._payload),Z)}if(St(W)||_e(W))return W=xa(W,G.mode,Z,null),W.return=G,W;mc(G,W)}return null}function ae(G,W,Z,he){var Le=W!==null?W.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Le!==null?null:M(G,W,""+Z,he);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case De:return Z.key===Le?j(G,W,Z,he):null;case Oe:return Z.key===Le?ee(G,W,Z,he):null;case Ce:return Le=Z._init,ae(G,W,Le(Z._payload),he)}if(St(Z)||_e(Z))return Le!==null?null:le(G,W,Z,he,null);mc(G,Z)}return null}function Se(G,W,Z,he,Le){if(typeof he=="string"&&he!==""||typeof he=="number")return G=G.get(Z)||null,M(W,G,""+he,Le);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case De:return G=G.get(he.key===null?Z:he.key)||null,j(W,G,he,Le);case Oe:return G=G.get(he.key===null?Z:he.key)||null,ee(W,G,he,Le);case Ce:var Fe=he._init;return Se(G,W,Z,Fe(he._payload),Le)}if(St(he)||_e(he))return G=G.get(Z)||null,le(W,G,he,Le,null);mc(W,he)}return null}function Re(G,W,Z,he){for(var Le=null,Fe=null,je=W,qe=W=0,mn=null;je!==null&&qe<Z.length;qe++){je.index>qe?(mn=je,je=null):mn=je.sibling;var pt=ae(G,je,Z[qe],he);if(pt===null){je===null&&(je=mn);break}n&&je&&pt.alternate===null&&o(G,je),W=_(pt,W,qe),Fe===null?Le=pt:Fe.sibling=pt,Fe=pt,je=mn}if(qe===Z.length)return u(G,je),Dt&&pa(G,qe),Le;if(je===null){for(;qe<Z.length;qe++)je=ue(G,Z[qe],he),je!==null&&(W=_(je,W,qe),Fe===null?Le=je:Fe.sibling=je,Fe=je);return Dt&&pa(G,qe),Le}for(je=f(G,je);qe<Z.length;qe++)mn=Se(je,G,qe,Z[qe],he),mn!==null&&(n&&mn.alternate!==null&&je.delete(mn.key===null?qe:mn.key),W=_(mn,W,qe),Fe===null?Le=mn:Fe.sibling=mn,Fe=mn);return n&&je.forEach(function(Ao){return o(G,Ao)}),Dt&&pa(G,qe),Le}function Ne(G,W,Z,he){var Le=_e(Z);if(typeof Le!="function")throw Error(t(150));if(Z=Le.call(Z),Z==null)throw Error(t(151));for(var Fe=Le=null,je=W,qe=W=0,mn=null,pt=Z.next();je!==null&&!pt.done;qe++,pt=Z.next()){je.index>qe?(mn=je,je=null):mn=je.sibling;var Ao=ae(G,je,pt.value,he);if(Ao===null){je===null&&(je=mn);break}n&&je&&Ao.alternate===null&&o(G,je),W=_(Ao,W,qe),Fe===null?Le=Ao:Fe.sibling=Ao,Fe=Ao,je=mn}if(pt.done)return u(G,je),Dt&&pa(G,qe),Le;if(je===null){for(;!pt.done;qe++,pt=Z.next())pt=ue(G,pt.value,he),pt!==null&&(W=_(pt,W,qe),Fe===null?Le=pt:Fe.sibling=pt,Fe=pt);return Dt&&pa(G,qe),Le}for(je=f(G,je);!pt.done;qe++,pt=Z.next())pt=Se(je,G,qe,pt.value,he),pt!==null&&(n&&pt.alternate!==null&&je.delete(pt.key===null?qe:pt.key),W=_(pt,W,qe),Fe===null?Le=pt:Fe.sibling=pt,Fe=pt);return n&&je.forEach(function(Dw){return o(G,Dw)}),Dt&&pa(G,qe),Le}function Gt(G,W,Z,he){if(typeof Z=="object"&&Z!==null&&Z.type===F&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case De:e:{for(var Le=Z.key,Fe=W;Fe!==null;){if(Fe.key===Le){if(Le=Z.type,Le===F){if(Fe.tag===7){u(G,Fe.sibling),W=g(Fe,Z.props.children),W.return=G,G=W;break e}}else if(Fe.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===Ce&&np(Le)===Fe.type){u(G,Fe.sibling),W=g(Fe,Z.props),W.ref=nu(G,Fe,Z),W.return=G,G=W;break e}u(G,Fe);break}else o(G,Fe);Fe=Fe.sibling}Z.type===F?(W=xa(Z.props.children,G.mode,he,Z.key),W.return=G,G=W):(he=zc(Z.type,Z.key,Z.props,null,G.mode,he),he.ref=nu(G,W,Z),he.return=G,G=he)}return S(G);case Oe:e:{for(Fe=Z.key;W!==null;){if(W.key===Fe)if(W.tag===4&&W.stateNode.containerInfo===Z.containerInfo&&W.stateNode.implementation===Z.implementation){u(G,W.sibling),W=g(W,Z.children||[]),W.return=G,G=W;break e}else{u(G,W);break}else o(G,W);W=W.sibling}W=nf(Z,G.mode,he),W.return=G,G=W}return S(G);case Ce:return Fe=Z._init,Gt(G,W,Fe(Z._payload),he)}if(St(Z))return Re(G,W,Z,he);if(_e(Z))return Ne(G,W,Z,he);mc(G,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"?(Z=""+Z,W!==null&&W.tag===6?(u(G,W.sibling),W=g(W,Z),W.return=G,G=W):(u(G,W),W=tf(Z,G.mode,he),W.return=G,G=W),S(G)):u(G,W)}return Gt}var sl=rp(!0),ip=rp(!1),pc=yo(null),gc=null,ol=null,hd=null;function dd(){hd=ol=gc=null}function fd(n){var o=pc.current;Nt(pc),n._currentValue=o}function md(n,o,u){for(;n!==null;){var f=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),n===u)break;n=n.return}}function al(n,o){gc=n,hd=ol=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&o)!==0&&(Er=!0),n.firstContext=null)}function ui(n){var o=n._currentValue;if(hd!==n)if(n={context:n,memoizedValue:o,next:null},ol===null){if(gc===null)throw Error(t(308));ol=n,gc.dependencies={lanes:0,firstContext:n}}else ol=ol.next=n;return o}var ga=null;function pd(n){ga===null?ga=[n]:ga.push(n)}function sp(n,o,u,f){var g=o.interleaved;return g===null?(u.next=u,pd(o)):(u.next=g.next,g.next=u),o.interleaved=u,Ms(n,f)}function Ms(n,o){n.lanes|=o;var u=n.alternate;for(u!==null&&(u.lanes|=o),u=n,n=n.return;n!==null;)n.childLanes|=o,u=n.alternate,u!==null&&(u.childLanes|=o),u=n,n=n.return;return u.tag===3?u.stateNode:null}var Eo=!1;function gd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function op(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ds(n,o){return{eventTime:n,lane:o,tag:0,payload:null,callback:null,next:null}}function To(n,o,u){var f=n.updateQueue;if(f===null)return null;if(f=f.shared,(dt&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,Ms(n,u)}return g=f.interleaved,g===null?(o.next=o,pd(f)):(o.next=g.next,g.next=o),f.interleaved=o,Ms(n,u)}function _c(n,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var f=o.lanes;f&=n.pendingLanes,u|=f,o.lanes=u,kr(n,u)}}function ap(n,o){var u=n.updateQueue,f=n.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};_===null?g=_=S:_=_.next=S,u=u.next}while(u!==null);_===null?g=_=o:_=_.next=o}else g=_=o;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:f.shared,effects:f.effects},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=o:n.next=o,u.lastBaseUpdate=o}function yc(n,o,u,f){var g=n.updateQueue;Eo=!1;var _=g.firstBaseUpdate,S=g.lastBaseUpdate,M=g.shared.pending;if(M!==null){g.shared.pending=null;var j=M,ee=j.next;j.next=null,S===null?_=ee:S.next=ee,S=j;var le=n.alternate;le!==null&&(le=le.updateQueue,M=le.lastBaseUpdate,M!==S&&(M===null?le.firstBaseUpdate=ee:M.next=ee,le.lastBaseUpdate=j))}if(_!==null){var ue=g.baseState;S=0,le=ee=j=null,M=_;do{var ae=M.lane,Se=M.eventTime;if((f&ae)===ae){le!==null&&(le=le.next={eventTime:Se,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var Re=n,Ne=M;switch(ae=o,Se=u,Ne.tag){case 1:if(Re=Ne.payload,typeof Re=="function"){ue=Re.call(Se,ue,ae);break e}ue=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Ne.payload,ae=typeof Re=="function"?Re.call(Se,ue,ae):Re,ae==null)break e;ue=re({},ue,ae);break e;case 2:Eo=!0}}M.callback!==null&&M.lane!==0&&(n.flags|=64,ae=g.effects,ae===null?g.effects=[M]:ae.push(M))}else Se={eventTime:Se,lane:ae,tag:M.tag,payload:M.payload,callback:M.callback,next:null},le===null?(ee=le=Se,j=ue):le=le.next=Se,S|=ae;if(M=M.next,M===null){if(M=g.shared.pending,M===null)break;ae=M,M=ae.next,ae.next=null,g.lastBaseUpdate=ae,g.shared.pending=null}}while(!0);if(le===null&&(j=ue),g.baseState=j,g.firstBaseUpdate=ee,g.lastBaseUpdate=le,o=g.shared.interleaved,o!==null){g=o;do S|=g.lane,g=g.next;while(g!==o)}else _===null&&(g.shared.lanes=0);va|=S,n.lanes=S,n.memoizedState=ue}}function lp(n,o,u){if(n=o.effects,o.effects=null,n!==null)for(o=0;o<n.length;o++){var f=n[o],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var ru={},Ki=yo(ru),iu=yo(ru),su=yo(ru);function _a(n){if(n===ru)throw Error(t(174));return n}function _d(n,o){switch(Ct(su,o),Ct(iu,n),Ct(Ki,ru),n=o.nodeType,n){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:pi(null,"");break;default:n=n===8?o.parentNode:o,o=n.namespaceURI||null,n=n.tagName,o=pi(o,n)}Nt(Ki),Ct(Ki,o)}function ll(){Nt(Ki),Nt(iu),Nt(su)}function up(n){_a(su.current);var o=_a(Ki.current),u=pi(o,n.type);o!==u&&(Ct(iu,n),Ct(Ki,u))}function yd(n){iu.current===n&&(Nt(Ki),Nt(iu))}var Ft=yo(0);function vc(n){for(var o=n;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var vd=[];function wd(){for(var n=0;n<vd.length;n++)vd[n]._workInProgressVersionPrimary=null;vd.length=0}var wc=xe.ReactCurrentDispatcher,Ed=xe.ReactCurrentBatchConfig,ya=0,jt=null,on=null,dn=null,Ec=!1,ou=!1,au=0,rw=0;function Vn(){throw Error(t(321))}function Td(n,o){if(o===null)return!1;for(var u=0;u<o.length&&u<n.length;u++)if(!Mr(n[u],o[u]))return!1;return!0}function xd(n,o,u,f,g,_){if(ya=_,jt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,wc.current=n===null||n.memoizedState===null?aw:lw,n=u(f,g),ou){_=0;do{if(ou=!1,au=0,25<=_)throw Error(t(301));_+=1,dn=on=null,o.updateQueue=null,wc.current=uw,n=u(f,g)}while(ou)}if(wc.current=Ic,o=on!==null&&on.next!==null,ya=0,dn=on=jt=null,Ec=!1,o)throw Error(t(300));return n}function Id(){var n=au!==0;return au=0,n}function Qi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?jt.memoizedState=dn=n:dn=dn.next=n,dn}function ci(){if(on===null){var n=jt.alternate;n=n!==null?n.memoizedState:null}else n=on.next;var o=dn===null?jt.memoizedState:dn.next;if(o!==null)dn=o,on=n;else{if(n===null)throw Error(t(310));on=n,n={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},dn===null?jt.memoizedState=dn=n:dn=dn.next=n}return dn}function lu(n,o){return typeof o=="function"?o(n):o}function Sd(n){var o=ci(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var f=on,g=f.baseQueue,_=u.pending;if(_!==null){if(g!==null){var S=g.next;g.next=_.next,_.next=S}f.baseQueue=g=_,u.pending=null}if(g!==null){_=g.next,f=f.baseState;var M=S=null,j=null,ee=_;do{var le=ee.lane;if((ya&le)===le)j!==null&&(j=j.next={lane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),f=ee.hasEagerState?ee.eagerState:n(f,ee.action);else{var ue={lane:le,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null};j===null?(M=j=ue,S=f):j=j.next=ue,jt.lanes|=le,va|=le}ee=ee.next}while(ee!==null&&ee!==_);j===null?S=f:j.next=M,Mr(f,o.memoizedState)||(Er=!0),o.memoizedState=f,o.baseState=S,o.baseQueue=j,u.lastRenderedState=f}if(n=u.interleaved,n!==null){g=n;do _=g.lane,jt.lanes|=_,va|=_,g=g.next;while(g!==n)}else g===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Pd(n){var o=ci(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var f=u.dispatch,g=u.pending,_=o.memoizedState;if(g!==null){u.pending=null;var S=g=g.next;do _=n(_,S.action),S=S.next;while(S!==g);Mr(_,o.memoizedState)||(Er=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),u.lastRenderedState=_}return[_,f]}function cp(){}function hp(n,o){var u=jt,f=ci(),g=o(),_=!Mr(f.memoizedState,g);if(_&&(f.memoizedState=g,Er=!0),f=f.queue,bd(mp.bind(null,u,f,n),[n]),f.getSnapshot!==o||_||dn!==null&&dn.memoizedState.tag&1){if(u.flags|=2048,uu(9,fp.bind(null,u,f,g,o),void 0,null),fn===null)throw Error(t(349));(ya&30)!==0||dp(u,o,g)}return g}function dp(n,o,u){n.flags|=16384,n={getSnapshot:o,value:u},o=jt.updateQueue,o===null?(o={lastEffect:null,stores:null},jt.updateQueue=o,o.stores=[n]):(u=o.stores,u===null?o.stores=[n]:u.push(n))}function fp(n,o,u,f){o.value=u,o.getSnapshot=f,pp(o)&&gp(n)}function mp(n,o,u){return u(function(){pp(o)&&gp(n)})}function pp(n){var o=n.getSnapshot;n=n.value;try{var u=o();return!Mr(n,u)}catch{return!0}}function gp(n){var o=Ms(n,1);o!==null&&Pi(o,n,1,-1)}function _p(n){var o=Qi();return typeof n=="function"&&(n=n()),o.memoizedState=o.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lu,lastRenderedState:n},o.queue=n,n=n.dispatch=ow.bind(null,jt,n),[o.memoizedState,n]}function uu(n,o,u,f){return n={tag:n,create:o,destroy:u,deps:f,next:null},o=jt.updateQueue,o===null?(o={lastEffect:null,stores:null},jt.updateQueue=o,o.lastEffect=n.next=n):(u=o.lastEffect,u===null?o.lastEffect=n.next=n:(f=u.next,u.next=n,n.next=f,o.lastEffect=n)),n}function yp(){return ci().memoizedState}function Tc(n,o,u,f){var g=Qi();jt.flags|=n,g.memoizedState=uu(1|o,u,void 0,f===void 0?null:f)}function xc(n,o,u,f){var g=ci();f=f===void 0?null:f;var _=void 0;if(on!==null){var S=on.memoizedState;if(_=S.destroy,f!==null&&Td(f,S.deps)){g.memoizedState=uu(o,u,_,f);return}}jt.flags|=n,g.memoizedState=uu(1|o,u,_,f)}function vp(n,o){return Tc(8390656,8,n,o)}function bd(n,o){return xc(2048,8,n,o)}function wp(n,o){return xc(4,2,n,o)}function Ep(n,o){return xc(4,4,n,o)}function Tp(n,o){if(typeof o=="function")return n=n(),o(n),function(){o(null)};if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function xp(n,o,u){return u=u!=null?u.concat([n]):null,xc(4,4,Tp.bind(null,o,n),u)}function Cd(){}function Ip(n,o){var u=ci();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Td(o,f[1])?f[0]:(u.memoizedState=[n,o],n)}function Sp(n,o){var u=ci();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Td(o,f[1])?f[0]:(n=n(),u.memoizedState=[n,o],n)}function Pp(n,o,u){return(ya&21)===0?(n.baseState&&(n.baseState=!1,Er=!0),n.memoizedState=u):(Mr(u,o)||(u=ta(),jt.lanes|=u,va|=u,n.baseState=!0),o)}function iw(n,o){var u=Je;Je=u!==0&&4>u?u:4,n(!0);var f=Ed.transition;Ed.transition={};try{n(!1),o()}finally{Je=u,Ed.transition=f}}function bp(){return ci().memoizedState}function sw(n,o,u){var f=Po(n);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},Cp(n))Ap(o,u);else if(u=sp(n,o,u,f),u!==null){var g=nr();Pi(u,n,f,g),kp(u,o,f)}}function ow(n,o,u){var f=Po(n),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(Cp(n))Ap(o,g);else{var _=n.alternate;if(n.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var S=o.lastRenderedState,M=_(S,u);if(g.hasEagerState=!0,g.eagerState=M,Mr(M,S)){var j=o.interleaved;j===null?(g.next=g,pd(o)):(g.next=j.next,j.next=g),o.interleaved=g;return}}catch{}finally{}u=sp(n,o,g,f),u!==null&&(g=nr(),Pi(u,n,f,g),kp(u,o,f))}}function Cp(n){var o=n.alternate;return n===jt||o!==null&&o===jt}function Ap(n,o){ou=Ec=!0;var u=n.pending;u===null?o.next=o:(o.next=u.next,u.next=o),n.pending=o}function kp(n,o,u){if((u&4194240)!==0){var f=o.lanes;f&=n.pendingLanes,u|=f,o.lanes=u,kr(n,u)}}var Ic={readContext:ui,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useInsertionEffect:Vn,useLayoutEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useMutableSource:Vn,useSyncExternalStore:Vn,useId:Vn,unstable_isNewReconciler:!1},aw={readContext:ui,useCallback:function(n,o){return Qi().memoizedState=[n,o===void 0?null:o],n},useContext:ui,useEffect:vp,useImperativeHandle:function(n,o,u){return u=u!=null?u.concat([n]):null,Tc(4194308,4,Tp.bind(null,o,n),u)},useLayoutEffect:function(n,o){return Tc(4194308,4,n,o)},useInsertionEffect:function(n,o){return Tc(4,2,n,o)},useMemo:function(n,o){var u=Qi();return o=o===void 0?null:o,n=n(),u.memoizedState=[n,o],n},useReducer:function(n,o,u){var f=Qi();return o=u!==void 0?u(o):o,f.memoizedState=f.baseState=o,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:o},f.queue=n,n=n.dispatch=sw.bind(null,jt,n),[f.memoizedState,n]},useRef:function(n){var o=Qi();return n={current:n},o.memoizedState=n},useState:_p,useDebugValue:Cd,useDeferredValue:function(n){return Qi().memoizedState=n},useTransition:function(){var n=_p(!1),o=n[0];return n=iw.bind(null,n[1]),Qi().memoizedState=n,[o,n]},useMutableSource:function(){},useSyncExternalStore:function(n,o,u){var f=jt,g=Qi();if(Dt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),fn===null)throw Error(t(349));(ya&30)!==0||dp(f,o,u)}g.memoizedState=u;var _={value:u,getSnapshot:o};return g.queue=_,vp(mp.bind(null,f,_,n),[n]),f.flags|=2048,uu(9,fp.bind(null,f,_,u,o),void 0,null),u},useId:function(){var n=Qi(),o=fn.identifierPrefix;if(Dt){var u=Ls,f=Ns;u=(f&~(1<<32-Ke(f)-1)).toString(32)+u,o=":"+o+"R"+u,u=au++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=rw++,o=":"+o+"r"+u.toString(32)+":";return n.memoizedState=o},unstable_isNewReconciler:!1},lw={readContext:ui,useCallback:Ip,useContext:ui,useEffect:bd,useImperativeHandle:xp,useInsertionEffect:wp,useLayoutEffect:Ep,useMemo:Sp,useReducer:Sd,useRef:yp,useState:function(){return Sd(lu)},useDebugValue:Cd,useDeferredValue:function(n){var o=ci();return Pp(o,on.memoizedState,n)},useTransition:function(){var n=Sd(lu)[0],o=ci().memoizedState;return[n,o]},useMutableSource:cp,useSyncExternalStore:hp,useId:bp,unstable_isNewReconciler:!1},uw={readContext:ui,useCallback:Ip,useContext:ui,useEffect:bd,useImperativeHandle:xp,useInsertionEffect:wp,useLayoutEffect:Ep,useMemo:Sp,useReducer:Pd,useRef:yp,useState:function(){return Pd(lu)},useDebugValue:Cd,useDeferredValue:function(n){var o=ci();return on===null?o.memoizedState=n:Pp(o,on.memoizedState,n)},useTransition:function(){var n=Pd(lu)[0],o=ci().memoizedState;return[n,o]},useMutableSource:cp,useSyncExternalStore:hp,useId:bp,unstable_isNewReconciler:!1};function xi(n,o){if(n&&n.defaultProps){o=re({},o),n=n.defaultProps;for(var u in n)o[u]===void 0&&(o[u]=n[u]);return o}return o}function Ad(n,o,u,f){o=n.memoizedState,u=u(f,o),u=u==null?o:re({},o,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var Sc={isMounted:function(n){return(n=n._reactInternals)?fr(n)===n:!1},enqueueSetState:function(n,o,u){n=n._reactInternals;var f=nr(),g=Po(n),_=Ds(f,g);_.payload=o,u!=null&&(_.callback=u),o=To(n,_,g),o!==null&&(Pi(o,n,g,f),_c(o,n,g))},enqueueReplaceState:function(n,o,u){n=n._reactInternals;var f=nr(),g=Po(n),_=Ds(f,g);_.tag=1,_.payload=o,u!=null&&(_.callback=u),o=To(n,_,g),o!==null&&(Pi(o,n,g,f),_c(o,n,g))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var u=nr(),f=Po(n),g=Ds(u,f);g.tag=2,o!=null&&(g.callback=o),o=To(n,g,f),o!==null&&(Pi(o,n,f,u),_c(o,n,f))}};function Rp(n,o,u,f,g,_,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(f,_,S):o.prototype&&o.prototype.isPureReactComponent?!qi(u,f)||!qi(g,_):!0}function Np(n,o,u){var f=!1,g=vo,_=o.contextType;return typeof _=="object"&&_!==null?_=ui(_):(g=wr(o)?fa:On.current,f=o.contextTypes,_=(f=f!=null)?tl(n,g):vo),o=new o(u,_),n.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Sc,n.stateNode=o,o._reactInternals=n,f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=_),o}function Lp(n,o,u,f){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==n&&Sc.enqueueReplaceState(o,o.state,null)}function kd(n,o,u,f){var g=n.stateNode;g.props=u,g.state=n.memoizedState,g.refs={},gd(n);var _=o.contextType;typeof _=="object"&&_!==null?g.context=ui(_):(_=wr(o)?fa:On.current,g.context=tl(n,_)),g.state=n.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Ad(n,o,_,u),g.state=n.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&Sc.enqueueReplaceState(g,g.state,null),yc(n,u,g,f),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function ul(n,o){try{var u="",f=o;do u+=Te(f),f=f.return;while(f);var g=u}catch(_){g=`
Error generating stack: `+_.message+`
`+_.stack}return{value:n,source:o,stack:g,digest:null}}function Rd(n,o,u){return{value:n,source:null,stack:u??null,digest:o??null}}function Nd(n,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var cw=typeof WeakMap=="function"?WeakMap:Map;function Mp(n,o,u){u=Ds(-1,u),u.tag=3,u.payload={element:null};var f=o.value;return u.callback=function(){Nc||(Nc=!0,Gd=f),Nd(n,o)},u}function Dp(n,o,u){u=Ds(-1,u),u.tag=3;var f=n.type.getDerivedStateFromError;if(typeof f=="function"){var g=o.value;u.payload=function(){return f(g)},u.callback=function(){Nd(n,o)}}var _=n.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(u.callback=function(){Nd(n,o),typeof f!="function"&&(Io===null?Io=new Set([this]):Io.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})}),u}function Op(n,o,u){var f=n.pingCache;if(f===null){f=n.pingCache=new cw;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(u)||(g.add(u),n=Iw.bind(null,n,o,u),o.then(n,n))}function Vp(n){do{var o;if((o=n.tag===13)&&(o=n.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return n;n=n.return}while(n!==null);return null}function zp(n,o,u,f,g){return(n.mode&1)===0?(n===o?n.flags|=65536:(n.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Ds(-1,1),o.tag=2,To(u,o,1))),u.lanes|=1),n):(n.flags|=65536,n.lanes=g,n)}var hw=xe.ReactCurrentOwner,Er=!1;function tr(n,o,u,f){o.child=n===null?ip(o,null,u,f):sl(o,n.child,u,f)}function Fp(n,o,u,f,g){u=u.render;var _=o.ref;return al(o,g),f=xd(n,o,u,f,_,g),u=Id(),n!==null&&!Er?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~g,Os(n,o,g)):(Dt&&u&&od(o),o.flags|=1,tr(n,o,f,g),o.child)}function jp(n,o,u,f,g){if(n===null){var _=u.type;return typeof _=="function"&&!ef(_)&&_.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=_,Bp(n,o,_,f,g)):(n=zc(u.type,null,f,o,o.mode,g),n.ref=o.ref,n.return=o,o.child=n)}if(_=n.child,(n.lanes&g)===0){var S=_.memoizedProps;if(u=u.compare,u=u!==null?u:qi,u(S,f)&&n.ref===o.ref)return Os(n,o,g)}return o.flags|=1,n=Co(_,f),n.ref=o.ref,n.return=o,o.child=n}function Bp(n,o,u,f,g){if(n!==null){var _=n.memoizedProps;if(qi(_,f)&&n.ref===o.ref)if(Er=!1,o.pendingProps=f=_,(n.lanes&g)!==0)(n.flags&131072)!==0&&(Er=!0);else return o.lanes=n.lanes,Os(n,o,g)}return Ld(n,o,u,f,g)}function Up(n,o,u){var f=o.pendingProps,g=f.children,_=n!==null?n.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ct(hl,zr),zr|=u;else{if((u&1073741824)===0)return n=_!==null?_.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:n,cachePool:null,transitions:null},o.updateQueue=null,Ct(hl,zr),zr|=n,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=_!==null?_.baseLanes:u,Ct(hl,zr),zr|=f}else _!==null?(f=_.baseLanes|u,o.memoizedState=null):f=u,Ct(hl,zr),zr|=f;return tr(n,o,g,u),o.child}function Wp(n,o){var u=o.ref;(n===null&&u!==null||n!==null&&n.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Ld(n,o,u,f,g){var _=wr(u)?fa:On.current;return _=tl(o,_),al(o,g),u=xd(n,o,u,f,_,g),f=Id(),n!==null&&!Er?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~g,Os(n,o,g)):(Dt&&f&&od(o),o.flags|=1,tr(n,o,u,g),o.child)}function Hp(n,o,u,f,g){if(wr(u)){var _=!0;uc(o)}else _=!1;if(al(o,g),o.stateNode===null)bc(n,o),Np(o,u,f),kd(o,u,f,g),f=!0;else if(n===null){var S=o.stateNode,M=o.memoizedProps;S.props=M;var j=S.context,ee=u.contextType;typeof ee=="object"&&ee!==null?ee=ui(ee):(ee=wr(u)?fa:On.current,ee=tl(o,ee));var le=u.getDerivedStateFromProps,ue=typeof le=="function"||typeof S.getSnapshotBeforeUpdate=="function";ue||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(M!==f||j!==ee)&&Lp(o,S,f,ee),Eo=!1;var ae=o.memoizedState;S.state=ae,yc(o,f,S,g),j=o.memoizedState,M!==f||ae!==j||vr.current||Eo?(typeof le=="function"&&(Ad(o,u,le,f),j=o.memoizedState),(M=Eo||Rp(o,u,M,f,ae,j,ee))?(ue||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=j),S.props=f,S.state=j,S.context=ee,f=M):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{S=o.stateNode,op(n,o),M=o.memoizedProps,ee=o.type===o.elementType?M:xi(o.type,M),S.props=ee,ue=o.pendingProps,ae=S.context,j=u.contextType,typeof j=="object"&&j!==null?j=ui(j):(j=wr(u)?fa:On.current,j=tl(o,j));var Se=u.getDerivedStateFromProps;(le=typeof Se=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(M!==ue||ae!==j)&&Lp(o,S,f,j),Eo=!1,ae=o.memoizedState,S.state=ae,yc(o,f,S,g);var Re=o.memoizedState;M!==ue||ae!==Re||vr.current||Eo?(typeof Se=="function"&&(Ad(o,u,Se,f),Re=o.memoizedState),(ee=Eo||Rp(o,u,ee,f,ae,Re,j)||!1)?(le||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,Re,j),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,Re,j)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||M===n.memoizedProps&&ae===n.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||M===n.memoizedProps&&ae===n.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=Re),S.props=f,S.state=Re,S.context=j,f=ee):(typeof S.componentDidUpdate!="function"||M===n.memoizedProps&&ae===n.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||M===n.memoizedProps&&ae===n.memoizedState||(o.flags|=1024),f=!1)}return Md(n,o,u,f,_,g)}function Md(n,o,u,f,g,_){Wp(n,o);var S=(o.flags&128)!==0;if(!f&&!S)return g&&Km(o,u,!1),Os(n,o,_);f=o.stateNode,hw.current=o;var M=S&&typeof u.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,n!==null&&S?(o.child=sl(o,n.child,null,_),o.child=sl(o,null,M,_)):tr(n,o,M,_),o.memoizedState=f.state,g&&Km(o,u,!0),o.child}function qp(n){var o=n.stateNode;o.pendingContext?Gm(n,o.pendingContext,o.pendingContext!==o.context):o.context&&Gm(n,o.context,!1),_d(n,o.containerInfo)}function $p(n,o,u,f,g){return il(),cd(g),o.flags|=256,tr(n,o,u,f),o.child}var Dd={dehydrated:null,treeContext:null,retryLane:0};function Od(n){return{baseLanes:n,cachePool:null,transitions:null}}function Gp(n,o,u){var f=o.pendingProps,g=Ft.current,_=!1,S=(o.flags&128)!==0,M;if((M=S)||(M=n!==null&&n.memoizedState===null?!1:(g&2)!==0),M?(_=!0,o.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),Ct(Ft,g&1),n===null)return ud(o),n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((o.mode&1)===0?o.lanes=1:n.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(S=f.children,n=f.fallback,_?(f=o.mode,_=o.child,S={mode:"hidden",children:S},(f&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=S):_=Fc(S,f,0,null),n=xa(n,f,u,null),_.return=o,n.return=o,_.sibling=n,o.child=_,o.child.memoizedState=Od(u),o.memoizedState=Dd,n):Vd(o,S));if(g=n.memoizedState,g!==null&&(M=g.dehydrated,M!==null))return dw(n,o,S,f,M,g,u);if(_){_=f.fallback,S=o.mode,g=n.child,M=g.sibling;var j={mode:"hidden",children:f.children};return(S&1)===0&&o.child!==g?(f=o.child,f.childLanes=0,f.pendingProps=j,o.deletions=null):(f=Co(g,j),f.subtreeFlags=g.subtreeFlags&14680064),M!==null?_=Co(M,_):(_=xa(_,S,u,null),_.flags|=2),_.return=o,f.return=o,f.sibling=_,o.child=f,f=_,_=o.child,S=n.child.memoizedState,S=S===null?Od(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},_.memoizedState=S,_.childLanes=n.childLanes&~u,o.memoizedState=Dd,f}return _=n.child,n=_.sibling,f=Co(_,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=u),f.return=o,f.sibling=null,n!==null&&(u=o.deletions,u===null?(o.deletions=[n],o.flags|=16):u.push(n)),o.child=f,o.memoizedState=null,f}function Vd(n,o){return o=Fc({mode:"visible",children:o},n.mode,0,null),o.return=n,n.child=o}function Pc(n,o,u,f){return f!==null&&cd(f),sl(o,n.child,null,u),n=Vd(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function dw(n,o,u,f,g,_,S){if(u)return o.flags&256?(o.flags&=-257,f=Rd(Error(t(422))),Pc(n,o,S,f)):o.memoizedState!==null?(o.child=n.child,o.flags|=128,null):(_=f.fallback,g=o.mode,f=Fc({mode:"visible",children:f.children},g,0,null),_=xa(_,g,S,null),_.flags|=2,f.return=o,_.return=o,f.sibling=_,o.child=f,(o.mode&1)!==0&&sl(o,n.child,null,S),o.child.memoizedState=Od(S),o.memoizedState=Dd,_);if((o.mode&1)===0)return Pc(n,o,S,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var M=f.dgst;return f=M,_=Error(t(419)),f=Rd(_,f,void 0),Pc(n,o,S,f)}if(M=(S&n.childLanes)!==0,Er||M){if(f=fn,f!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|S))!==0?0:g,g!==0&&g!==_.retryLane&&(_.retryLane=g,Ms(n,g),Pi(f,n,g,-1))}return Jd(),f=Rd(Error(t(421))),Pc(n,o,S,f)}return g.data==="$?"?(o.flags|=128,o.child=n.child,o=Sw.bind(null,n),g._reactRetry=o,null):(n=_.treeContext,Vr=Zi(g.nextSibling),Or=o,Dt=!0,Ti=null,n!==null&&(ai[li++]=Ns,ai[li++]=Ls,ai[li++]=ma,Ns=n.id,Ls=n.overflow,ma=o),o=Vd(o,f.children),o.flags|=4096,o)}function Zp(n,o,u){n.lanes|=o;var f=n.alternate;f!==null&&(f.lanes|=o),md(n.return,o,u)}function zd(n,o,u,f,g){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=u,_.tailMode=g)}function Kp(n,o,u){var f=o.pendingProps,g=f.revealOrder,_=f.tail;if(tr(n,o,f.children,u),f=Ft.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Zp(n,u,o);else if(n.tag===19)Zp(n,u,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}f&=1}if(Ct(Ft,f),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(u=o.child,g=null;u!==null;)n=u.alternate,n!==null&&vc(n)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),zd(o,!1,g,u,_);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(n=g.alternate,n!==null&&vc(n)===null){o.child=g;break}n=g.sibling,g.sibling=u,u=g,g=n}zd(o,!0,u,null,_);break;case"together":zd(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function bc(n,o){(o.mode&1)===0&&n!==null&&(n.alternate=null,o.alternate=null,o.flags|=2)}function Os(n,o,u){if(n!==null&&(o.dependencies=n.dependencies),va|=o.lanes,(u&o.childLanes)===0)return null;if(n!==null&&o.child!==n.child)throw Error(t(153));if(o.child!==null){for(n=o.child,u=Co(n,n.pendingProps),o.child=u,u.return=o;n.sibling!==null;)n=n.sibling,u=u.sibling=Co(n,n.pendingProps),u.return=o;u.sibling=null}return o.child}function fw(n,o,u){switch(o.tag){case 3:qp(o),il();break;case 5:up(o);break;case 1:wr(o.type)&&uc(o);break;case 4:_d(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,g=o.memoizedProps.value;Ct(pc,f._currentValue),f._currentValue=g;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(Ct(Ft,Ft.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?Gp(n,o,u):(Ct(Ft,Ft.current&1),n=Os(n,o,u),n!==null?n.sibling:null);Ct(Ft,Ft.current&1);break;case 19:if(f=(u&o.childLanes)!==0,(n.flags&128)!==0){if(f)return Kp(n,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Ct(Ft,Ft.current),f)break;return null;case 22:case 23:return o.lanes=0,Up(n,o,u)}return Os(n,o,u)}var Qp,Fd,Yp,Xp;Qp=function(n,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)n.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Fd=function(){},Yp=function(n,o,u,f){var g=n.memoizedProps;if(g!==f){n=o.stateNode,_a(Ki.current);var _=null;switch(u){case"input":g=Br(n,g),f=Br(n,f),_=[];break;case"select":g=re({},g,{value:void 0}),f=re({},f,{value:void 0}),_=[];break;case"textarea":g=Ut(n,g),f=Ut(n,f),_=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(n.onclick=oe)}An(u,f);var S;u=null;for(ee in g)if(!f.hasOwnProperty(ee)&&g.hasOwnProperty(ee)&&g[ee]!=null)if(ee==="style"){var M=g[ee];for(S in M)M.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else ee!=="dangerouslySetInnerHTML"&&ee!=="children"&&ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&ee!=="autoFocus"&&(a.hasOwnProperty(ee)?_||(_=[]):(_=_||[]).push(ee,null));for(ee in f){var j=f[ee];if(M=g!=null?g[ee]:void 0,f.hasOwnProperty(ee)&&j!==M&&(j!=null||M!=null))if(ee==="style")if(M){for(S in M)!M.hasOwnProperty(S)||j&&j.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in j)j.hasOwnProperty(S)&&M[S]!==j[S]&&(u||(u={}),u[S]=j[S])}else u||(_||(_=[]),_.push(ee,u)),u=j;else ee==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,M=M?M.__html:void 0,j!=null&&M!==j&&(_=_||[]).push(ee,j)):ee==="children"?typeof j!="string"&&typeof j!="number"||(_=_||[]).push(ee,""+j):ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&(a.hasOwnProperty(ee)?(j!=null&&ee==="onScroll"&&xt("scroll",n),_||M===j||(_=[])):(_=_||[]).push(ee,j))}u&&(_=_||[]).push("style",u);var ee=_;(o.updateQueue=ee)&&(o.flags|=4)}},Xp=function(n,o,u,f){u!==f&&(o.flags|=4)};function cu(n,o){if(!Dt)switch(n.tailMode){case"hidden":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:f.sibling=null}}function zn(n){var o=n.alternate!==null&&n.alternate.child===n.child,u=0,f=0;if(o)for(var g=n.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=f,n.childLanes=u,o}function mw(n,o,u){var f=o.pendingProps;switch(ad(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(o),null;case 1:return wr(o.type)&&lc(),zn(o),null;case 3:return f=o.stateNode,ll(),Nt(vr),Nt(On),wd(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(n===null||n.child===null)&&(fc(o)?o.flags|=4:n===null||n.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Ti!==null&&(Qd(Ti),Ti=null))),Fd(n,o),zn(o),null;case 5:yd(o);var g=_a(su.current);if(u=o.type,n!==null&&o.stateNode!=null)Yp(n,o,u,f,g),n.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(t(166));return zn(o),null}if(n=_a(Ki.current),fc(o)){f=o.stateNode,u=o.type;var _=o.memoizedProps;switch(f[oi]=o,f[go]=_,n=(o.mode&1)!==0,u){case"dialog":xt("cancel",f),xt("close",f);break;case"iframe":case"object":case"embed":xt("load",f);break;case"video":case"audio":for(g=0;g<fo.length;g++)xt(fo[g],f);break;case"source":xt("error",f);break;case"img":case"image":case"link":xt("error",f),xt("load",f);break;case"details":xt("toggle",f);break;case"input":us(f,_),xt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!_.multiple},xt("invalid",f);break;case"textarea":Hn(f,_),xt("invalid",f)}An(u,_),g=null;for(var S in _)if(_.hasOwnProperty(S)){var M=_[S];S==="children"?typeof M=="string"?f.textContent!==M&&(_.suppressHydrationWarning!==!0&&J(f.textContent,M,n),g=["children",M]):typeof M=="number"&&f.textContent!==""+M&&(_.suppressHydrationWarning!==!0&&J(f.textContent,M,n),g=["children",""+M]):a.hasOwnProperty(S)&&M!=null&&S==="onScroll"&&xt("scroll",f)}switch(u){case"input":jr(f),br(f,_,!0);break;case"textarea":jr(f),Wr(f);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(f.onclick=oe)}f=g,o.updateQueue=f,f!==null&&(o.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=or(u)),n==="http://www.w3.org/1999/xhtml"?u==="script"?(n=S.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof f.is=="string"?n=S.createElement(u,{is:f.is}):(n=S.createElement(u),u==="select"&&(S=n,f.multiple?S.multiple=!0:f.size&&(S.size=f.size))):n=S.createElementNS(n,u),n[oi]=o,n[go]=f,Qp(n,o,!1,!1),o.stateNode=n;e:{switch(S=ur(u,f),u){case"dialog":xt("cancel",n),xt("close",n),g=f;break;case"iframe":case"object":case"embed":xt("load",n),g=f;break;case"video":case"audio":for(g=0;g<fo.length;g++)xt(fo[g],n);g=f;break;case"source":xt("error",n),g=f;break;case"img":case"image":case"link":xt("error",n),xt("load",n),g=f;break;case"details":xt("toggle",n),g=f;break;case"input":us(n,f),g=Br(n,f),xt("invalid",n);break;case"option":g=f;break;case"select":n._wrapperState={wasMultiple:!!f.multiple},g=re({},f,{value:void 0}),xt("invalid",n);break;case"textarea":Hn(n,f),g=Ut(n,f),xt("invalid",n);break;default:g=f}An(u,g),M=g;for(_ in M)if(M.hasOwnProperty(_)){var j=M[_];_==="style"?Hr(n,j):_==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&Li(n,j)):_==="children"?typeof j=="string"?(u!=="textarea"||j!=="")&&yn(n,j):typeof j=="number"&&yn(n,""+j):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(a.hasOwnProperty(_)?j!=null&&_==="onScroll"&&xt("scroll",n):j!=null&&we(n,_,j,S))}switch(u){case"input":jr(n),br(n,f,!1);break;case"textarea":jr(n),Wr(n);break;case"option":f.value!=null&&n.setAttribute("value",""+We(f.value));break;case"select":n.multiple=!!f.multiple,_=f.value,_!=null?_n(n,!!f.multiple,_,!1):f.defaultValue!=null&&_n(n,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=oe)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return zn(o),null;case 6:if(n&&o.stateNode!=null)Xp(n,o,n.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(t(166));if(u=_a(su.current),_a(Ki.current),fc(o)){if(f=o.stateNode,u=o.memoizedProps,f[oi]=o,(_=f.nodeValue!==u)&&(n=Or,n!==null))switch(n.tag){case 3:J(f.nodeValue,u,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&J(f.nodeValue,u,(n.mode&1)!==0)}_&&(o.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[oi]=o,o.stateNode=f}return zn(o),null;case 13:if(Nt(Ft),f=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Dt&&Vr!==null&&(o.mode&1)!==0&&(o.flags&128)===0)tp(),il(),o.flags|=98560,_=!1;else if(_=fc(o),f!==null&&f.dehydrated!==null){if(n===null){if(!_)throw Error(t(318));if(_=o.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[oi]=o}else il(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;zn(o),_=!1}else Ti!==null&&(Qd(Ti),Ti=null),_=!0;if(!_)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(f=f!==null,f!==(n!==null&&n.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(n===null||(Ft.current&1)!==0?an===0&&(an=3):Jd())),o.updateQueue!==null&&(o.flags|=4),zn(o),null);case 4:return ll(),Fd(n,o),n===null&&mo(o.stateNode.containerInfo),zn(o),null;case 10:return fd(o.type._context),zn(o),null;case 17:return wr(o.type)&&lc(),zn(o),null;case 19:if(Nt(Ft),_=o.memoizedState,_===null)return zn(o),null;if(f=(o.flags&128)!==0,S=_.rendering,S===null)if(f)cu(_,!1);else{if(an!==0||n!==null&&(n.flags&128)!==0)for(n=o.child;n!==null;){if(S=vc(n),S!==null){for(o.flags|=128,cu(_,!1),f=S.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=u,u=o.child;u!==null;)_=u,n=f,_.flags&=14680066,S=_.alternate,S===null?(_.childLanes=0,_.lanes=n,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=S.childLanes,_.lanes=S.lanes,_.child=S.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=S.memoizedProps,_.memoizedState=S.memoizedState,_.updateQueue=S.updateQueue,_.type=S.type,n=S.dependencies,_.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),u=u.sibling;return Ct(Ft,Ft.current&1|2),o.child}n=n.sibling}_.tail!==null&&It()>dl&&(o.flags|=128,f=!0,cu(_,!1),o.lanes=4194304)}else{if(!f)if(n=vc(S),n!==null){if(o.flags|=128,f=!0,u=n.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),cu(_,!0),_.tail===null&&_.tailMode==="hidden"&&!S.alternate&&!Dt)return zn(o),null}else 2*It()-_.renderingStartTime>dl&&u!==1073741824&&(o.flags|=128,f=!0,cu(_,!1),o.lanes=4194304);_.isBackwards?(S.sibling=o.child,o.child=S):(u=_.last,u!==null?u.sibling=S:o.child=S,_.last=S)}return _.tail!==null?(o=_.tail,_.rendering=o,_.tail=o.sibling,_.renderingStartTime=It(),o.sibling=null,u=Ft.current,Ct(Ft,f?u&1|2:u&1),o):(zn(o),null);case 22:case 23:return Xd(),f=o.memoizedState!==null,n!==null&&n.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(zr&1073741824)!==0&&(zn(o),o.subtreeFlags&6&&(o.flags|=8192)):zn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function pw(n,o){switch(ad(o),o.tag){case 1:return wr(o.type)&&lc(),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return ll(),Nt(vr),Nt(On),wd(),n=o.flags,(n&65536)!==0&&(n&128)===0?(o.flags=n&-65537|128,o):null;case 5:return yd(o),null;case 13:if(Nt(Ft),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(t(340));il()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return Nt(Ft),null;case 4:return ll(),null;case 10:return fd(o.type._context),null;case 22:case 23:return Xd(),null;case 24:return null;default:return null}}var Cc=!1,Fn=!1,gw=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function cl(n,o){var u=n.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){qt(n,o,f)}else u.current=null}function jd(n,o,u){try{u()}catch(f){qt(n,o,f)}}var Jp=!1;function _w(n,o){if(Ee=Yr,n=Gl(),Zl(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var S=0,M=-1,j=-1,ee=0,le=0,ue=n,ae=null;t:for(;;){for(var Se;ue!==u||g!==0&&ue.nodeType!==3||(M=S+g),ue!==_||f!==0&&ue.nodeType!==3||(j=S+f),ue.nodeType===3&&(S+=ue.nodeValue.length),(Se=ue.firstChild)!==null;)ae=ue,ue=Se;for(;;){if(ue===n)break t;if(ae===u&&++ee===g&&(M=S),ae===_&&++le===f&&(j=S),(Se=ue.nextSibling)!==null)break;ue=ae,ae=ue.parentNode}ue=Se}u=M===-1||j===-1?null:{start:M,end:j}}else u=null}u=u||{start:0,end:0}}else u=null;for(Ve={focusedElem:n,selectionRange:u},Yr=!1,Ae=o;Ae!==null;)if(o=Ae,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,Ae=n;else for(;Ae!==null;){o=Ae;try{var Re=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Re!==null){var Ne=Re.memoizedProps,Gt=Re.memoizedState,G=o.stateNode,W=G.getSnapshotBeforeUpdate(o.elementType===o.type?Ne:xi(o.type,Ne),Gt);G.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var Z=o.stateNode.containerInfo;Z.nodeType===1?Z.textContent="":Z.nodeType===9&&Z.documentElement&&Z.removeChild(Z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(he){qt(o,o.return,he)}if(n=o.sibling,n!==null){n.return=o.return,Ae=n;break}Ae=o.return}return Re=Jp,Jp=!1,Re}function hu(n,o,u){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&n)===n){var _=g.destroy;g.destroy=void 0,_!==void 0&&jd(o,u,_)}g=g.next}while(g!==f)}}function Ac(n,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&n)===n){var f=u.create;u.destroy=f()}u=u.next}while(u!==o)}}function Bd(n){var o=n.ref;if(o!==null){var u=n.stateNode;switch(n.tag){case 5:n=u;break;default:n=u}typeof o=="function"?o(n):o.current=n}}function eg(n){var o=n.alternate;o!==null&&(n.alternate=null,eg(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&(delete o[oi],delete o[go],delete o[_o],delete o[nd],delete o[rd])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function tg(n){return n.tag===5||n.tag===3||n.tag===4}function ng(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||tg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ud(n,o,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(n,o):u.insertBefore(n,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(n,u)):(o=u,o.appendChild(n)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=oe));else if(f!==4&&(n=n.child,n!==null))for(Ud(n,o,u),n=n.sibling;n!==null;)Ud(n,o,u),n=n.sibling}function Wd(n,o,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,o?u.insertBefore(n,o):u.appendChild(n);else if(f!==4&&(n=n.child,n!==null))for(Wd(n,o,u),n=n.sibling;n!==null;)Wd(n,o,u),n=n.sibling}var In=null,Ii=!1;function xo(n,o,u){for(u=u.child;u!==null;)rg(n,o,u),u=u.sibling}function rg(n,o,u){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(Oi,u)}catch{}switch(u.tag){case 5:Fn||cl(u,o);case 6:var f=In,g=Ii;In=null,xo(n,o,u),In=f,Ii=g,In!==null&&(Ii?(n=In,u=u.stateNode,n.nodeType===8?n.parentNode.removeChild(u):n.removeChild(u)):In.removeChild(u.stateNode));break;case 18:In!==null&&(Ii?(n=In,u=u.stateNode,n.nodeType===8?tu(n.parentNode,u):n.nodeType===1&&tu(n,u),Nn(n)):tu(In,u.stateNode));break;case 4:f=In,g=Ii,In=u.stateNode.containerInfo,Ii=!0,xo(n,o,u),In=f,Ii=g;break;case 0:case 11:case 14:case 15:if(!Fn&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var _=g,S=_.destroy;_=_.tag,S!==void 0&&((_&2)!==0||(_&4)!==0)&&jd(u,o,S),g=g.next}while(g!==f)}xo(n,o,u);break;case 1:if(!Fn&&(cl(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(M){qt(u,o,M)}xo(n,o,u);break;case 21:xo(n,o,u);break;case 22:u.mode&1?(Fn=(f=Fn)||u.memoizedState!==null,xo(n,o,u),Fn=f):xo(n,o,u);break;default:xo(n,o,u)}}function ig(n){var o=n.updateQueue;if(o!==null){n.updateQueue=null;var u=n.stateNode;u===null&&(u=n.stateNode=new gw),o.forEach(function(f){var g=Pw.bind(null,n,f);u.has(f)||(u.add(f),f.then(g,g))})}}function Si(n,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var _=n,S=o,M=S;e:for(;M!==null;){switch(M.tag){case 5:In=M.stateNode,Ii=!1;break e;case 3:In=M.stateNode.containerInfo,Ii=!0;break e;case 4:In=M.stateNode.containerInfo,Ii=!0;break e}M=M.return}if(In===null)throw Error(t(160));rg(_,S,g),In=null,Ii=!1;var j=g.alternate;j!==null&&(j.return=null),g.return=null}catch(ee){qt(g,o,ee)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)sg(o,n),o=o.sibling}function sg(n,o){var u=n.alternate,f=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Si(o,n),Yi(n),f&4){try{hu(3,n,n.return),Ac(3,n)}catch(Ne){qt(n,n.return,Ne)}try{hu(5,n,n.return)}catch(Ne){qt(n,n.return,Ne)}}break;case 1:Si(o,n),Yi(n),f&512&&u!==null&&cl(u,u.return);break;case 5:if(Si(o,n),Yi(n),f&512&&u!==null&&cl(u,u.return),n.flags&32){var g=n.stateNode;try{yn(g,"")}catch(Ne){qt(n,n.return,Ne)}}if(f&4&&(g=n.stateNode,g!=null)){var _=n.memoizedProps,S=u!==null?u.memoizedProps:_,M=n.type,j=n.updateQueue;if(n.updateQueue=null,j!==null)try{M==="input"&&_.type==="radio"&&_.name!=null&&Ur(g,_),ur(M,S);var ee=ur(M,_);for(S=0;S<j.length;S+=2){var le=j[S],ue=j[S+1];le==="style"?Hr(g,ue):le==="dangerouslySetInnerHTML"?Li(g,ue):le==="children"?yn(g,ue):we(g,le,ue,ee)}switch(M){case"input":gn(g,_);break;case"textarea":Zs(g,_);break;case"select":var ae=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!_.multiple;var Se=_.value;Se!=null?_n(g,!!_.multiple,Se,!1):ae!==!!_.multiple&&(_.defaultValue!=null?_n(g,!!_.multiple,_.defaultValue,!0):_n(g,!!_.multiple,_.multiple?[]:"",!1))}g[go]=_}catch(Ne){qt(n,n.return,Ne)}}break;case 6:if(Si(o,n),Yi(n),f&4){if(n.stateNode===null)throw Error(t(162));g=n.stateNode,_=n.memoizedProps;try{g.nodeValue=_}catch(Ne){qt(n,n.return,Ne)}}break;case 3:if(Si(o,n),Yi(n),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Nn(o.containerInfo)}catch(Ne){qt(n,n.return,Ne)}break;case 4:Si(o,n),Yi(n);break;case 13:Si(o,n),Yi(n),g=n.child,g.flags&8192&&(_=g.memoizedState!==null,g.stateNode.isHidden=_,!_||g.alternate!==null&&g.alternate.memoizedState!==null||($d=It())),f&4&&ig(n);break;case 22:if(le=u!==null&&u.memoizedState!==null,n.mode&1?(Fn=(ee=Fn)||le,Si(o,n),Fn=ee):Si(o,n),Yi(n),f&8192){if(ee=n.memoizedState!==null,(n.stateNode.isHidden=ee)&&!le&&(n.mode&1)!==0)for(Ae=n,le=n.child;le!==null;){for(ue=Ae=le;Ae!==null;){switch(ae=Ae,Se=ae.child,ae.tag){case 0:case 11:case 14:case 15:hu(4,ae,ae.return);break;case 1:cl(ae,ae.return);var Re=ae.stateNode;if(typeof Re.componentWillUnmount=="function"){f=ae,u=ae.return;try{o=f,Re.props=o.memoizedProps,Re.state=o.memoizedState,Re.componentWillUnmount()}catch(Ne){qt(f,u,Ne)}}break;case 5:cl(ae,ae.return);break;case 22:if(ae.memoizedState!==null){lg(ue);continue}}Se!==null?(Se.return=ae,Ae=Se):lg(ue)}le=le.sibling}e:for(le=null,ue=n;;){if(ue.tag===5){if(le===null){le=ue;try{g=ue.stateNode,ee?(_=g.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(M=ue.stateNode,j=ue.memoizedProps.style,S=j!=null&&j.hasOwnProperty("display")?j.display:null,M.style.display=Ar("display",S))}catch(Ne){qt(n,n.return,Ne)}}}else if(ue.tag===6){if(le===null)try{ue.stateNode.nodeValue=ee?"":ue.memoizedProps}catch(Ne){qt(n,n.return,Ne)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===n)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===n)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===n)break e;le===ue&&(le=null),ue=ue.return}le===ue&&(le=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:Si(o,n),Yi(n),f&4&&ig(n);break;case 21:break;default:Si(o,n),Yi(n)}}function Yi(n){var o=n.flags;if(o&2){try{e:{for(var u=n.return;u!==null;){if(tg(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(yn(g,""),f.flags&=-33);var _=ng(n);Wd(n,_,g);break;case 3:case 4:var S=f.stateNode.containerInfo,M=ng(n);Ud(n,M,S);break;default:throw Error(t(161))}}catch(j){qt(n,n.return,j)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function yw(n,o,u){Ae=n,og(n)}function og(n,o,u){for(var f=(n.mode&1)!==0;Ae!==null;){var g=Ae,_=g.child;if(g.tag===22&&f){var S=g.memoizedState!==null||Cc;if(!S){var M=g.alternate,j=M!==null&&M.memoizedState!==null||Fn;M=Cc;var ee=Fn;if(Cc=S,(Fn=j)&&!ee)for(Ae=g;Ae!==null;)S=Ae,j=S.child,S.tag===22&&S.memoizedState!==null?ug(g):j!==null?(j.return=S,Ae=j):ug(g);for(;_!==null;)Ae=_,og(_),_=_.sibling;Ae=g,Cc=M,Fn=ee}ag(n)}else(g.subtreeFlags&8772)!==0&&_!==null?(_.return=g,Ae=_):ag(n)}}function ag(n){for(;Ae!==null;){var o=Ae;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Fn||Ac(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!Fn)if(u===null)f.componentDidMount();else{var g=o.elementType===o.type?u.memoizedProps:xi(o.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var _=o.updateQueue;_!==null&&lp(o,_,f);break;case 3:var S=o.updateQueue;if(S!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}lp(o,S,u)}break;case 5:var M=o.stateNode;if(u===null&&o.flags&4){u=M;var j=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&u.focus();break;case"img":j.src&&(u.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var ee=o.alternate;if(ee!==null){var le=ee.memoizedState;if(le!==null){var ue=le.dehydrated;ue!==null&&Nn(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Fn||o.flags&512&&Bd(o)}catch(ae){qt(o,o.return,ae)}}if(o===n){Ae=null;break}if(u=o.sibling,u!==null){u.return=o.return,Ae=u;break}Ae=o.return}}function lg(n){for(;Ae!==null;){var o=Ae;if(o===n){Ae=null;break}var u=o.sibling;if(u!==null){u.return=o.return,Ae=u;break}Ae=o.return}}function ug(n){for(;Ae!==null;){var o=Ae;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Ac(4,o)}catch(j){qt(o,u,j)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var g=o.return;try{f.componentDidMount()}catch(j){qt(o,g,j)}}var _=o.return;try{Bd(o)}catch(j){qt(o,_,j)}break;case 5:var S=o.return;try{Bd(o)}catch(j){qt(o,S,j)}}}catch(j){qt(o,o.return,j)}if(o===n){Ae=null;break}var M=o.sibling;if(M!==null){M.return=o.return,Ae=M;break}Ae=o.return}}var vw=Math.ceil,kc=xe.ReactCurrentDispatcher,Hd=xe.ReactCurrentOwner,hi=xe.ReactCurrentBatchConfig,dt=0,fn=null,Xt=null,Sn=0,zr=0,hl=yo(0),an=0,du=null,va=0,Rc=0,qd=0,fu=null,Tr=null,$d=0,dl=1/0,Vs=null,Nc=!1,Gd=null,Io=null,Lc=!1,So=null,Mc=0,mu=0,Zd=null,Dc=-1,Oc=0;function nr(){return(dt&6)!==0?It():Dc!==-1?Dc:Dc=It()}function Po(n){return(n.mode&1)===0?1:(dt&2)!==0&&Sn!==0?Sn&-Sn:nw.transition!==null?(Oc===0&&(Oc=ta()),Oc):(n=Je,n!==0||(n=window.event,n=n===void 0?16:et(n.type)),n)}function Pi(n,o,u,f){if(50<mu)throw mu=0,Zd=null,Error(t(185));Gn(n,u,f),((dt&2)===0||n!==fn)&&(n===fn&&((dt&2)===0&&(Rc|=u),an===4&&bo(n,Sn)),xr(n,f),u===1&&dt===0&&(o.mode&1)===0&&(dl=It()+500,cc&&wo()))}function xr(n,o){var u=n.callbackNode;Zr(n,o);var f=gt(n,n===fn?Sn:0);if(f===0)u!==null&&ds(u),n.callbackNode=null,n.callbackPriority=0;else if(o=f&-f,n.callbackPriority!==o){if(u!=null&&ds(u),o===1)n.tag===0?tw(hg.bind(null,n)):Qm(hg.bind(null,n)),Dn(function(){(dt&6)===0&&wo()}),u=null;else{switch(Rn(f)){case 1:u=Ks;break;case 4:u=ea;break;case 16:u=ms;break;case 536870912:u=$r;break;default:u=ms}u=vg(u,cg.bind(null,n))}n.callbackPriority=o,n.callbackNode=u}}function cg(n,o){if(Dc=-1,Oc=0,(dt&6)!==0)throw Error(t(327));var u=n.callbackNode;if(fl()&&n.callbackNode!==u)return null;var f=gt(n,n===fn?Sn:0);if(f===0)return null;if((f&30)!==0||(f&n.expiredLanes)!==0||o)o=Vc(n,f);else{o=f;var g=dt;dt|=2;var _=fg();(fn!==n||Sn!==o)&&(Vs=null,dl=It()+500,Ea(n,o));do try{Tw();break}catch(M){dg(n,M)}while(!0);dd(),kc.current=_,dt=g,Xt!==null?o=0:(fn=null,Sn=0,o=an)}if(o!==0){if(o===2&&(g=cn(n),g!==0&&(f=g,o=Kd(n,g))),o===1)throw u=du,Ea(n,0),bo(n,f),xr(n,It()),u;if(o===6)bo(n,f);else{if(g=n.current.alternate,(f&30)===0&&!ww(g)&&(o=Vc(n,f),o===2&&(_=cn(n),_!==0&&(f=_,o=Kd(n,_))),o===1))throw u=du,Ea(n,0),bo(n,f),xr(n,It()),u;switch(n.finishedWork=g,n.finishedLanes=f,o){case 0:case 1:throw Error(t(345));case 2:Ta(n,Tr,Vs);break;case 3:if(bo(n,f),(f&130023424)===f&&(o=$d+500-It(),10<o)){if(gt(n,0)!==0)break;if(g=n.suspendedLanes,(g&f)!==f){nr(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=sn(Ta.bind(null,n,Tr,Vs),o);break}Ta(n,Tr,Vs);break;case 4:if(bo(n,f),(f&4194240)===f)break;for(o=n.eventTimes,g=-1;0<f;){var S=31-Ke(f);_=1<<S,S=o[S],S>g&&(g=S),f&=~_}if(f=g,f=It()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*vw(f/1960))-f,10<f){n.timeoutHandle=sn(Ta.bind(null,n,Tr,Vs),f);break}Ta(n,Tr,Vs);break;case 5:Ta(n,Tr,Vs);break;default:throw Error(t(329))}}}return xr(n,It()),n.callbackNode===u?cg.bind(null,n):null}function Kd(n,o){var u=fu;return n.current.memoizedState.isDehydrated&&(Ea(n,o).flags|=256),n=Vc(n,o),n!==2&&(o=Tr,Tr=u,o!==null&&Qd(o)),n}function Qd(n){Tr===null?Tr=n:Tr.push.apply(Tr,n)}function ww(n){for(var o=n;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],_=g.getSnapshot;g=g.value;try{if(!Mr(_(),g))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function bo(n,o){for(o&=~qd,o&=~Rc,n.suspendedLanes|=o,n.pingedLanes&=~o,n=n.expirationTimes;0<o;){var u=31-Ke(o),f=1<<u;n[u]=-1,o&=~f}}function hg(n){if((dt&6)!==0)throw Error(t(327));fl();var o=gt(n,0);if((o&1)===0)return xr(n,It()),null;var u=Vc(n,o);if(n.tag!==0&&u===2){var f=cn(n);f!==0&&(o=f,u=Kd(n,f))}if(u===1)throw u=du,Ea(n,0),bo(n,o),xr(n,It()),u;if(u===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=o,Ta(n,Tr,Vs),xr(n,It()),null}function Yd(n,o){var u=dt;dt|=1;try{return n(o)}finally{dt=u,dt===0&&(dl=It()+500,cc&&wo())}}function wa(n){So!==null&&So.tag===0&&(dt&6)===0&&fl();var o=dt;dt|=1;var u=hi.transition,f=Je;try{if(hi.transition=null,Je=1,n)return n()}finally{Je=f,hi.transition=u,dt=o,(dt&6)===0&&wo()}}function Xd(){zr=hl.current,Nt(hl)}function Ea(n,o){n.finishedWork=null,n.finishedLanes=0;var u=n.timeoutHandle;if(u!==-1&&(n.timeoutHandle=-1,Yt(u)),Xt!==null)for(u=Xt.return;u!==null;){var f=u;switch(ad(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&lc();break;case 3:ll(),Nt(vr),Nt(On),wd();break;case 5:yd(f);break;case 4:ll();break;case 13:Nt(Ft);break;case 19:Nt(Ft);break;case 10:fd(f.type._context);break;case 22:case 23:Xd()}u=u.return}if(fn=n,Xt=n=Co(n.current,null),Sn=zr=o,an=0,du=null,qd=Rc=va=0,Tr=fu=null,ga!==null){for(o=0;o<ga.length;o++)if(u=ga[o],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,_=u.pending;if(_!==null){var S=_.next;_.next=g,f.next=S}u.pending=f}ga=null}return n}function dg(n,o){do{var u=Xt;try{if(dd(),wc.current=Ic,Ec){for(var f=jt.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}Ec=!1}if(ya=0,dn=on=jt=null,ou=!1,au=0,Hd.current=null,u===null||u.return===null){an=1,du=o,Xt=null;break}e:{var _=n,S=u.return,M=u,j=o;if(o=Sn,M.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var ee=j,le=M,ue=le.tag;if((le.mode&1)===0&&(ue===0||ue===11||ue===15)){var ae=le.alternate;ae?(le.updateQueue=ae.updateQueue,le.memoizedState=ae.memoizedState,le.lanes=ae.lanes):(le.updateQueue=null,le.memoizedState=null)}var Se=Vp(S);if(Se!==null){Se.flags&=-257,zp(Se,S,M,_,o),Se.mode&1&&Op(_,ee,o),o=Se,j=ee;var Re=o.updateQueue;if(Re===null){var Ne=new Set;Ne.add(j),o.updateQueue=Ne}else Re.add(j);break e}else{if((o&1)===0){Op(_,ee,o),Jd();break e}j=Error(t(426))}}else if(Dt&&M.mode&1){var Gt=Vp(S);if(Gt!==null){(Gt.flags&65536)===0&&(Gt.flags|=256),zp(Gt,S,M,_,o),cd(ul(j,M));break e}}_=j=ul(j,M),an!==4&&(an=2),fu===null?fu=[_]:fu.push(_),_=S;do{switch(_.tag){case 3:_.flags|=65536,o&=-o,_.lanes|=o;var G=Mp(_,j,o);ap(_,G);break e;case 1:M=j;var W=_.type,Z=_.stateNode;if((_.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(Io===null||!Io.has(Z)))){_.flags|=65536,o&=-o,_.lanes|=o;var he=Dp(_,M,o);ap(_,he);break e}}_=_.return}while(_!==null)}pg(u)}catch(Le){o=Le,Xt===u&&u!==null&&(Xt=u=u.return);continue}break}while(!0)}function fg(){var n=kc.current;return kc.current=Ic,n===null?Ic:n}function Jd(){(an===0||an===3||an===2)&&(an=4),fn===null||(va&268435455)===0&&(Rc&268435455)===0||bo(fn,Sn)}function Vc(n,o){var u=dt;dt|=2;var f=fg();(fn!==n||Sn!==o)&&(Vs=null,Ea(n,o));do try{Ew();break}catch(g){dg(n,g)}while(!0);if(dd(),dt=u,kc.current=f,Xt!==null)throw Error(t(261));return fn=null,Sn=0,an}function Ew(){for(;Xt!==null;)mg(Xt)}function Tw(){for(;Xt!==null&&!fs();)mg(Xt)}function mg(n){var o=yg(n.alternate,n,zr);n.memoizedProps=n.pendingProps,o===null?pg(n):Xt=o,Hd.current=null}function pg(n){var o=n;do{var u=o.alternate;if(n=o.return,(o.flags&32768)===0){if(u=mw(u,o,zr),u!==null){Xt=u;return}}else{if(u=pw(u,o),u!==null){u.flags&=32767,Xt=u;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{an=6,Xt=null;return}}if(o=o.sibling,o!==null){Xt=o;return}Xt=o=n}while(o!==null);an===0&&(an=5)}function Ta(n,o,u){var f=Je,g=hi.transition;try{hi.transition=null,Je=1,xw(n,o,u,f)}finally{hi.transition=g,Je=f}return null}function xw(n,o,u,f){do fl();while(So!==null);if((dt&6)!==0)throw Error(t(327));u=n.finishedWork;var g=n.finishedLanes;if(u===null)return null;if(n.finishedWork=null,n.finishedLanes=0,u===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var _=u.lanes|u.childLanes;if(Lt(n,_),n===fn&&(Xt=fn=null,Sn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Lc||(Lc=!0,vg(ms,function(){return fl(),null})),_=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||_){_=hi.transition,hi.transition=null;var S=Je;Je=1;var M=dt;dt|=4,Hd.current=null,_w(n,u),sg(u,n),ii(Ve),Yr=!!Ee,Ve=Ee=null,n.current=u,yw(u),mr(),dt=M,Je=S,hi.transition=_}else n.current=u;if(Lc&&(Lc=!1,So=n,Mc=g),_=n.pendingLanes,_===0&&(Io=null),Vi(u.stateNode),xr(n,It()),o!==null)for(f=n.onRecoverableError,u=0;u<o.length;u++)g=o[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(Nc)throw Nc=!1,n=Gd,Gd=null,n;return(Mc&1)!==0&&n.tag!==0&&fl(),_=n.pendingLanes,(_&1)!==0?n===Zd?mu++:(mu=0,Zd=n):mu=0,wo(),null}function fl(){if(So!==null){var n=Rn(Mc),o=hi.transition,u=Je;try{if(hi.transition=null,Je=16>n?16:n,So===null)var f=!1;else{if(n=So,So=null,Mc=0,(dt&6)!==0)throw Error(t(331));var g=dt;for(dt|=4,Ae=n.current;Ae!==null;){var _=Ae,S=_.child;if((Ae.flags&16)!==0){var M=_.deletions;if(M!==null){for(var j=0;j<M.length;j++){var ee=M[j];for(Ae=ee;Ae!==null;){var le=Ae;switch(le.tag){case 0:case 11:case 15:hu(8,le,_)}var ue=le.child;if(ue!==null)ue.return=le,Ae=ue;else for(;Ae!==null;){le=Ae;var ae=le.sibling,Se=le.return;if(eg(le),le===ee){Ae=null;break}if(ae!==null){ae.return=Se,Ae=ae;break}Ae=Se}}}var Re=_.alternate;if(Re!==null){var Ne=Re.child;if(Ne!==null){Re.child=null;do{var Gt=Ne.sibling;Ne.sibling=null,Ne=Gt}while(Ne!==null)}}Ae=_}}if((_.subtreeFlags&2064)!==0&&S!==null)S.return=_,Ae=S;else e:for(;Ae!==null;){if(_=Ae,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:hu(9,_,_.return)}var G=_.sibling;if(G!==null){G.return=_.return,Ae=G;break e}Ae=_.return}}var W=n.current;for(Ae=W;Ae!==null;){S=Ae;var Z=S.child;if((S.subtreeFlags&2064)!==0&&Z!==null)Z.return=S,Ae=Z;else e:for(S=W;Ae!==null;){if(M=Ae,(M.flags&2048)!==0)try{switch(M.tag){case 0:case 11:case 15:Ac(9,M)}}catch(Le){qt(M,M.return,Le)}if(M===S){Ae=null;break e}var he=M.sibling;if(he!==null){he.return=M.return,Ae=he;break e}Ae=M.return}}if(dt=g,wo(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(Oi,n)}catch{}f=!0}return f}finally{Je=u,hi.transition=o}}return!1}function gg(n,o,u){o=ul(u,o),o=Mp(n,o,1),n=To(n,o,1),o=nr(),n!==null&&(Gn(n,1,o),xr(n,o))}function qt(n,o,u){if(n.tag===3)gg(n,n,u);else for(;o!==null;){if(o.tag===3){gg(o,n,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Io===null||!Io.has(f))){n=ul(u,n),n=Dp(o,n,1),o=To(o,n,1),n=nr(),o!==null&&(Gn(o,1,n),xr(o,n));break}}o=o.return}}function Iw(n,o,u){var f=n.pingCache;f!==null&&f.delete(o),o=nr(),n.pingedLanes|=n.suspendedLanes&u,fn===n&&(Sn&u)===u&&(an===4||an===3&&(Sn&130023424)===Sn&&500>It()-$d?Ea(n,0):qd|=u),xr(n,o)}function _g(n,o){o===0&&((n.mode&1)===0?o=1:(o=Gr,Gr<<=1,(Gr&130023424)===0&&(Gr=4194304)));var u=nr();n=Ms(n,o),n!==null&&(Gn(n,o,u),xr(n,u))}function Sw(n){var o=n.memoizedState,u=0;o!==null&&(u=o.retryLane),_g(n,u)}function Pw(n,o){var u=0;switch(n.tag){case 13:var f=n.stateNode,g=n.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=n.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(o),_g(n,u)}var yg;yg=function(n,o,u){if(n!==null)if(n.memoizedProps!==o.pendingProps||vr.current)Er=!0;else{if((n.lanes&u)===0&&(o.flags&128)===0)return Er=!1,fw(n,o,u);Er=(n.flags&131072)!==0}else Er=!1,Dt&&(o.flags&1048576)!==0&&Ym(o,dc,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;bc(n,o),n=o.pendingProps;var g=tl(o,On.current);al(o,u),g=xd(null,o,f,n,g,u);var _=Id();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,wr(f)?(_=!0,uc(o)):_=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,gd(o),g.updater=Sc,o.stateNode=g,g._reactInternals=o,kd(o,f,n,u),o=Md(null,o,f,!0,_,u)):(o.tag=0,Dt&&_&&od(o),tr(null,o,g,u),o=o.child),o;case 16:f=o.elementType;e:{switch(bc(n,o),n=o.pendingProps,g=f._init,f=g(f._payload),o.type=f,g=o.tag=Cw(f),n=xi(f,n),g){case 0:o=Ld(null,o,f,n,u);break e;case 1:o=Hp(null,o,f,n,u);break e;case 11:o=Fp(null,o,f,n,u);break e;case 14:o=jp(null,o,f,xi(f.type,n),u);break e}throw Error(t(306,f,""))}return o;case 0:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:xi(f,g),Ld(n,o,f,g,u);case 1:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:xi(f,g),Hp(n,o,f,g,u);case 3:e:{if(qp(o),n===null)throw Error(t(387));f=o.pendingProps,_=o.memoizedState,g=_.element,op(n,o),yc(o,f,null,u);var S=o.memoizedState;if(f=S.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){g=ul(Error(t(423)),o),o=$p(n,o,f,u,g);break e}else if(f!==g){g=ul(Error(t(424)),o),o=$p(n,o,f,u,g);break e}else for(Vr=Zi(o.stateNode.containerInfo.firstChild),Or=o,Dt=!0,Ti=null,u=ip(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(il(),f===g){o=Os(n,o,u);break e}tr(n,o,f,u)}o=o.child}return o;case 5:return up(o),n===null&&ud(o),f=o.type,g=o.pendingProps,_=n!==null?n.memoizedProps:null,S=g.children,Xe(f,g)?S=null:_!==null&&Xe(f,_)&&(o.flags|=32),Wp(n,o),tr(n,o,S,u),o.child;case 6:return n===null&&ud(o),null;case 13:return Gp(n,o,u);case 4:return _d(o,o.stateNode.containerInfo),f=o.pendingProps,n===null?o.child=sl(o,null,f,u):tr(n,o,f,u),o.child;case 11:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:xi(f,g),Fp(n,o,f,g,u);case 7:return tr(n,o,o.pendingProps,u),o.child;case 8:return tr(n,o,o.pendingProps.children,u),o.child;case 12:return tr(n,o,o.pendingProps.children,u),o.child;case 10:e:{if(f=o.type._context,g=o.pendingProps,_=o.memoizedProps,S=g.value,Ct(pc,f._currentValue),f._currentValue=S,_!==null)if(Mr(_.value,S)){if(_.children===g.children&&!vr.current){o=Os(n,o,u);break e}}else for(_=o.child,_!==null&&(_.return=o);_!==null;){var M=_.dependencies;if(M!==null){S=_.child;for(var j=M.firstContext;j!==null;){if(j.context===f){if(_.tag===1){j=Ds(-1,u&-u),j.tag=2;var ee=_.updateQueue;if(ee!==null){ee=ee.shared;var le=ee.pending;le===null?j.next=j:(j.next=le.next,le.next=j),ee.pending=j}}_.lanes|=u,j=_.alternate,j!==null&&(j.lanes|=u),md(_.return,u,o),M.lanes|=u;break}j=j.next}}else if(_.tag===10)S=_.type===o.type?null:_.child;else if(_.tag===18){if(S=_.return,S===null)throw Error(t(341));S.lanes|=u,M=S.alternate,M!==null&&(M.lanes|=u),md(S,u,o),S=_.sibling}else S=_.child;if(S!==null)S.return=_;else for(S=_;S!==null;){if(S===o){S=null;break}if(_=S.sibling,_!==null){_.return=S.return,S=_;break}S=S.return}_=S}tr(n,o,g.children,u),o=o.child}return o;case 9:return g=o.type,f=o.pendingProps.children,al(o,u),g=ui(g),f=f(g),o.flags|=1,tr(n,o,f,u),o.child;case 14:return f=o.type,g=xi(f,o.pendingProps),g=xi(f.type,g),jp(n,o,f,g,u);case 15:return Bp(n,o,o.type,o.pendingProps,u);case 17:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:xi(f,g),bc(n,o),o.tag=1,wr(f)?(n=!0,uc(o)):n=!1,al(o,u),Np(o,f,g),kd(o,f,g,u),Md(null,o,f,!0,n,u);case 19:return Kp(n,o,u);case 22:return Up(n,o,u)}throw Error(t(156,o.tag))};function vg(n,o){return Jo(n,o)}function bw(n,o,u,f){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(n,o,u,f){return new bw(n,o,u,f)}function ef(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Cw(n){if(typeof n=="function")return ef(n)?1:0;if(n!=null){if(n=n.$$typeof,n===U)return 11;if(n===at)return 14}return 2}function Co(n,o){var u=n.alternate;return u===null?(u=di(n.tag,o,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=o,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&14680064,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,o=n.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u}function zc(n,o,u,f,g,_){var S=2;if(f=n,typeof n=="function")ef(n)&&(S=1);else if(typeof n=="string")S=5;else e:switch(n){case F:return xa(u.children,g,_,o);case k:S=8,g|=8;break;case D:return n=di(12,u,o,g|2),n.elementType=D,n.lanes=_,n;case N:return n=di(13,u,o,g),n.elementType=N,n.lanes=_,n;case Ge:return n=di(19,u,o,g),n.elementType=Ge,n.lanes=_,n;case ge:return Fc(u,g,_,o);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case B:S=10;break e;case V:S=9;break e;case U:S=11;break e;case at:S=14;break e;case Ce:S=16,f=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return o=di(S,u,o,g),o.elementType=n,o.type=f,o.lanes=_,o}function xa(n,o,u,f){return n=di(7,n,f,o),n.lanes=u,n}function Fc(n,o,u,f){return n=di(22,n,f,o),n.elementType=ge,n.lanes=u,n.stateNode={isHidden:!1},n}function tf(n,o,u){return n=di(6,n,null,o),n.lanes=u,n}function nf(n,o,u){return o=di(4,n.children!==null?n.children:[],n.key,o),o.lanes=u,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}function Aw(n,o,u,f,g){this.tag=o,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zi(0),this.expirationTimes=zi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zi(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function rf(n,o,u,f,g,_,S,M,j){return n=new Aw(n,o,u,M,j),o===1?(o=1,_===!0&&(o|=8)):o=0,_=di(3,null,null,o),n.current=_,_.stateNode=n,_.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},gd(_),n}function kw(n,o,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oe,key:f==null?null:""+f,children:n,containerInfo:o,implementation:u}}function wg(n){if(!n)return vo;n=n._reactInternals;e:{if(fr(n)!==n||n.tag!==1)throw Error(t(170));var o=n;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(wr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(n.tag===1){var u=n.type;if(wr(u))return Zm(n,u,o)}return o}function Eg(n,o,u,f,g,_,S,M,j){return n=rf(u,f,!0,n,g,_,S,M,j),n.context=wg(null),u=n.current,f=nr(),g=Po(u),_=Ds(f,g),_.callback=o??null,To(u,_,g),n.current.lanes=g,Gn(n,g,f),xr(n,f),n}function jc(n,o,u,f){var g=o.current,_=nr(),S=Po(g);return u=wg(u),o.context===null?o.context=u:o.pendingContext=u,o=Ds(_,S),o.payload={element:n},f=f===void 0?null:f,f!==null&&(o.callback=f),n=To(g,o,S),n!==null&&(Pi(n,g,S,_),_c(n,g,S)),S}function Bc(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Tg(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<o?u:o}}function sf(n,o){Tg(n,o),(n=n.alternate)&&Tg(n,o)}function Rw(){return null}var xg=typeof reportError=="function"?reportError:function(n){console.error(n)};function of(n){this._internalRoot=n}Uc.prototype.render=of.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(t(409));jc(n,o,null,null)},Uc.prototype.unmount=of.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;wa(function(){jc(null,n,null,null)}),o[yt]=null}};function Uc(n){this._internalRoot=n}Uc.prototype.unstable_scheduleHydration=function(n){if(n){var o=ys();n={blockedOn:null,target:n,priority:o};for(var u=0;u<Mt.length&&o!==0&&o<Mt[u].priority;u++);Mt.splice(u,0,n),u===0&&Bi(n)}};function af(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Wc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Ig(){}function Nw(n,o,u,f,g){if(g){if(typeof f=="function"){var _=f;f=function(){var ee=Bc(S);_.call(ee)}}var S=Eg(o,f,n,0,null,!1,!1,"",Ig);return n._reactRootContainer=S,n[yt]=S.current,mo(n.nodeType===8?n.parentNode:n),wa(),S}for(;g=n.lastChild;)n.removeChild(g);if(typeof f=="function"){var M=f;f=function(){var ee=Bc(j);M.call(ee)}}var j=rf(n,0,!1,null,null,!1,!1,"",Ig);return n._reactRootContainer=j,n[yt]=j.current,mo(n.nodeType===8?n.parentNode:n),wa(function(){jc(o,j,u,f)}),j}function Hc(n,o,u,f,g){var _=u._reactRootContainer;if(_){var S=_;if(typeof g=="function"){var M=g;g=function(){var j=Bc(S);M.call(j)}}jc(o,S,n,g)}else S=Nw(u,o,n,g,f);return Bc(S)}gs=function(n){switch(n.tag){case 3:var o=n.stateNode;if(o.current.memoizedState.isDehydrated){var u=Ie(o.pendingLanes);u!==0&&(kr(o,u|1),xr(o,It()),(dt&6)===0&&(dl=It()+500,wo()))}break;case 13:wa(function(){var f=Ms(n,1);if(f!==null){var g=nr();Pi(f,n,1,g)}}),sf(n,1)}},Kr=function(n){if(n.tag===13){var o=Ms(n,134217728);if(o!==null){var u=nr();Pi(o,n,134217728,u)}sf(n,134217728)}},_s=function(n){if(n.tag===13){var o=Po(n),u=Ms(n,o);if(u!==null){var f=nr();Pi(u,n,o,f)}sf(n,o)}},ys=function(){return Je},Fi=function(n,o){var u=Je;try{return Je=n,o()}finally{Je=u}},hr=function(n,o,u){switch(o){case"input":if(gn(n,u),o=u.name,u.type==="radio"&&o!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==n&&f.form===n.form){var g=Ja(f);if(!g)throw Error(t(90));ir(f),gn(f,g)}}}break;case"textarea":Zs(n,u);break;case"select":o=u.value,o!=null&&_n(n,!!u.multiple,o,!1)}},Ot=Yd,Kt=wa;var Lw={usingClientEntryPoint:!1,Events:[As,ks,Ja,Be,wt,Yd]},pu={findFiberByHostInstance:Cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mw={bundleType:pu.bundleType,version:pu.version,rendererPackageName:pu.rendererPackageName,rendererConfig:pu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xe.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ba(n),n===null?null:n.stateNode},findFiberByHostInstance:pu.findFiberByHostInstance||Rw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qc.isDisabled&&qc.supportsFiber)try{Oi=qc.inject(Mw),kn=qc}catch{}}return Ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lw,Ir.createPortal=function(n,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!af(o))throw Error(t(200));return kw(n,o,null,u)},Ir.createRoot=function(n,o){if(!af(n))throw Error(t(299));var u=!1,f="",g=xg;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=rf(n,1,!1,null,null,u,!1,f,g),n[yt]=o.current,mo(n.nodeType===8?n.parentNode:n),new of(o)},Ir.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Ba(o),n=n===null?null:n.stateNode,n},Ir.flushSync=function(n){return wa(n)},Ir.hydrate=function(n,o,u){if(!Wc(o))throw Error(t(200));return Hc(null,n,o,!0,u)},Ir.hydrateRoot=function(n,o,u){if(!af(n))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,g=!1,_="",S=xg;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),o=Eg(o,null,n,1,u??null,g,!1,_,S),n[yt]=o.current,mo(n),f)for(n=0;n<f.length;n++)u=f[n],g=u._getVersion,g=g(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,g]:o.mutableSourceEagerHydrationData.push(u,g);return new Uc(o)},Ir.render=function(n,o,u){if(!Wc(o))throw Error(t(200));return Hc(null,n,o,!1,u)},Ir.unmountComponentAtNode=function(n){if(!Wc(n))throw Error(t(40));return n._reactRootContainer?(wa(function(){Hc(null,null,n,!1,function(){n._reactRootContainer=null,n[yt]=null})}),!0):!1},Ir.unstable_batchedUpdates=Yd,Ir.unstable_renderSubtreeIntoContainer=function(n,o,u,f){if(!Wc(u))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Hc(n,o,u,!1,f)},Ir.version="18.3.1-next-f1338f8080-20240426",Ir}var Ng;function vy(){if(Ng)return cf.exports;Ng=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),cf.exports=Bw(),cf.exports}var Lg;function Uw(){if(Lg)return $c;Lg=1;var i=vy();return $c.createRoot=i.createRoot,$c.hydrateRoot=i.hydrateRoot,$c}var Ww=Uw(),tt=nm();const pe=tm(tt);var yu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Hw=yu.exports,Mg;function qw(){return Mg||(Mg=1,(function(i,e){(function(t,s){s(e)})(Hw,(function(t){var s="1.9.4";function a(r){var l,d,p,w;for(d=1,p=arguments.length;d<p;d++){w=arguments[d];for(l in w)r[l]=w[l]}return r}var c=Object.create||(function(){function r(){}return function(l){return r.prototype=l,new r}})();function m(r,l){var d=Array.prototype.slice;if(r.bind)return r.bind.apply(r,d.call(arguments,1));var p=d.call(arguments,2);return function(){return r.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var v=0;function E(r){return"_leaflet_id"in r||(r._leaflet_id=++v),r._leaflet_id}function x(r,l,d){var p,w,b,z;return z=function(){p=!1,w&&(b.apply(d,w),w=!1)},b=function(){p?w=arguments:(r.apply(d,arguments),setTimeout(z,l),p=!0)},b}function P(r,l,d){var p=l[1],w=l[0],b=p-w;return r===p&&d?r:((r-w)%b+b)%b+w}function I(){return!1}function R(r,l){if(l===!1)return r;var d=Math.pow(10,l===void 0?6:l);return Math.round(r*d)/d}function q(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function Q(r){return q(r).split(/\s+/)}function ne(r,l){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?c(r.options):{});for(var d in l)r.options[d]=l[d];return r.options}function te(r,l,d){var p=[];for(var w in r)p.push(encodeURIComponent(d?w.toUpperCase():w)+"="+encodeURIComponent(r[w]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var ke=/\{ *([\w_ -]+) *\}/g;function me(r,l){return r.replace(ke,function(d,p){var w=l[p];if(w===void 0)throw new Error("No value provided for variable "+d);return typeof w=="function"&&(w=w(l)),w})}var we=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function xe(r,l){for(var d=0;d<r.length;d++)if(r[d]===l)return d;return-1}var De="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Oe(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var F=0;function k(r){var l=+new Date,d=Math.max(0,16-(l-F));return F=l+d,window.setTimeout(r,d)}var D=window.requestAnimationFrame||Oe("RequestAnimationFrame")||k,B=window.cancelAnimationFrame||Oe("CancelAnimationFrame")||Oe("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function V(r,l,d){if(d&&D===k)r.call(l);else return D.call(window,m(r,l))}function U(r){r&&B.call(window,r)}var N={__proto__:null,extend:a,create:c,bind:m,get lastId(){return v},stamp:E,throttle:x,wrapNum:P,falseFn:I,formatNum:R,trim:q,splitWords:Q,setOptions:ne,getParamString:te,template:me,isArray:we,indexOf:xe,emptyImageUrl:De,requestFn:D,cancelFn:B,requestAnimFrame:V,cancelAnimFrame:U};function Ge(){}Ge.extend=function(r){var l=function(){ne(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=c(d);p.constructor=l,l.prototype=p;for(var w in this)Object.prototype.hasOwnProperty.call(this,w)&&w!=="prototype"&&w!=="__super__"&&(l[w]=this[w]);return r.statics&&a(l,r.statics),r.includes&&(at(r.includes),a.apply(null,[p].concat(r.includes))),a(p,r),delete p.statics,delete p.includes,p.options&&(p.options=d.options?c(d.options):{},a(p.options,r.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var b=0,z=p._initHooks.length;b<z;b++)p._initHooks[b].call(this)}},l},Ge.include=function(r){var l=this.prototype.options;return a(this.prototype,r),r.options&&(this.prototype.options=l,this.mergeOptions(r.options)),this},Ge.mergeOptions=function(r){return a(this.prototype.options,r),this},Ge.addInitHook=function(r){var l=Array.prototype.slice.call(arguments,1),d=typeof r=="function"?r:function(){this[r].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function at(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=we(r)?r:[r];for(var l=0;l<r.length;l++)r[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ce={on:function(r,l,d){if(typeof r=="object")for(var p in r)this._on(p,r[p],l);else{r=Q(r);for(var w=0,b=r.length;w<b;w++)this._on(r[w],l,d)}return this},off:function(r,l,d){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var p in r)this._off(p,r[p],l);else{r=Q(r);for(var w=arguments.length===1,b=0,z=r.length;b<z;b++)w?this._off(r[b]):this._off(r[b],l,d)}return this},_on:function(r,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(r,l,d)===!1){d===this&&(d=void 0);var w={fn:l,ctx:d};p&&(w.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(w)}},_off:function(r,l,d){var p,w,b;if(this._events&&(p=this._events[r],!!p)){if(arguments.length===1){if(this._firingCount)for(w=0,b=p.length;w<b;w++)p[w].fn=I;delete this._events[r];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var z=this._listens(r,l,d);if(z!==!1){var $=p[z];this._firingCount&&($.fn=I,this._events[r]=p=p.slice()),p.splice(z,1)}}},fire:function(r,l,d){if(!this.listens(r,d))return this;var p=a({},l,{type:r,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var w=this._events[r];if(w){this._firingCount=this._firingCount+1||1;for(var b=0,z=w.length;b<z;b++){var $=w[b],J=$.fn;$.once&&this.off(r,J,$.ctx),J.call($.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(r,l,d,p){typeof r!="string"&&console.warn('"string" type argument expected');var w=l;typeof l!="function"&&(p=!!l,w=void 0,d=void 0);var b=this._events&&this._events[r];if(b&&b.length&&this._listens(r,w,d)!==!1)return!0;if(p){for(var z in this._eventParents)if(this._eventParents[z].listens(r,l,d,p))return!0}return!1},_listens:function(r,l,d){if(!this._events)return!1;var p=this._events[r]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var w=0,b=p.length;w<b;w++)if(p[w].fn===l&&p[w].ctx===d)return w;return!1},once:function(r,l,d){if(typeof r=="object")for(var p in r)this._on(p,r[p],l,!0);else{r=Q(r);for(var w=0,b=r.length;w<b;w++)this._on(r[w],l,d,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[E(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[E(r)],this},_propagateEvent:function(r){for(var l in this._eventParents)this._eventParents[l].fire(r.type,a({layer:r.target,propagatedFrom:r.target},r),!0)}};Ce.addEventListener=Ce.on,Ce.removeEventListener=Ce.clearAllEventListeners=Ce.off,Ce.addOneTimeEventListener=Ce.once,Ce.fireEvent=Ce.fire,Ce.hasEventListeners=Ce.listens;var ge=Ge.extend(Ce);function X(r,l,d){this.x=d?Math.round(r):r,this.y=d?Math.round(l):l}var _e=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};X.prototype={clone:function(){return new X(this.x,this.y)},add:function(r){return this.clone()._add(re(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(re(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new X(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new X(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=_e(this.x),this.y=_e(this.y),this},distanceTo:function(r){r=re(r);var l=r.x-this.x,d=r.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(r){return r=re(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=re(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+R(this.x)+", "+R(this.y)+")"}};function re(r,l,d){return r instanceof X?r:we(r)?new X(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new X(r.x,r.y):new X(r,l,d)}function O(r,l){if(r)for(var d=l?[r,l]:r,p=0,w=d.length;p<w;p++)this.extend(d[p])}O.prototype={extend:function(r){var l,d;if(!r)return this;if(r instanceof X||typeof r[0]=="number"||"x"in r)l=d=re(r);else if(r=Y(r),l=r.min,d=r.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(r){return re((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return re(this.min.x,this.max.y)},getTopRight:function(){return re(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var l,d;return typeof r[0]=="number"||r instanceof X?r=re(r):r=Y(r),r instanceof O?(l=r.min,d=r.max):l=d=r,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(r){r=Y(r);var l=this.min,d=this.max,p=r.min,w=r.max,b=w.x>=l.x&&p.x<=d.x,z=w.y>=l.y&&p.y<=d.y;return b&&z},overlaps:function(r){r=Y(r);var l=this.min,d=this.max,p=r.min,w=r.max,b=w.x>l.x&&p.x<d.x,z=w.y>l.y&&p.y<d.y;return b&&z},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*r,w=Math.abs(l.y-d.y)*r;return Y(re(l.x-p,l.y-w),re(d.x+p,d.y+w))},equals:function(r){return r?(r=Y(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function Y(r,l){return!r||r instanceof O?r:new O(r,l)}function fe(r,l){if(r)for(var d=l?[r,l]:r,p=0,w=d.length;p<w;p++)this.extend(d[p])}fe.prototype={extend:function(r){var l=this._southWest,d=this._northEast,p,w;if(r instanceof Te)p=r,w=r;else if(r instanceof fe){if(p=r._southWest,w=r._northEast,!p||!w)return this}else return r?this.extend(ce(r)||ye(r)):this;return!l&&!d?(this._southWest=new Te(p.lat,p.lng),this._northEast=new Te(w.lat,w.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(w.lat,d.lat),d.lng=Math.max(w.lng,d.lng)),this},pad:function(r){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*r,w=Math.abs(l.lng-d.lng)*r;return new fe(new Te(l.lat-p,l.lng-w),new Te(d.lat+p,d.lng+w))},getCenter:function(){return new Te((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Te(this.getNorth(),this.getWest())},getSouthEast:function(){return new Te(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof Te||"lat"in r?r=ce(r):r=ye(r);var l=this._southWest,d=this._northEast,p,w;return r instanceof fe?(p=r.getSouthWest(),w=r.getNorthEast()):p=w=r,p.lat>=l.lat&&w.lat<=d.lat&&p.lng>=l.lng&&w.lng<=d.lng},intersects:function(r){r=ye(r);var l=this._southWest,d=this._northEast,p=r.getSouthWest(),w=r.getNorthEast(),b=w.lat>=l.lat&&p.lat<=d.lat,z=w.lng>=l.lng&&p.lng<=d.lng;return b&&z},overlaps:function(r){r=ye(r);var l=this._southWest,d=this._northEast,p=r.getSouthWest(),w=r.getNorthEast(),b=w.lat>l.lat&&p.lat<d.lat,z=w.lng>l.lng&&p.lng<d.lng;return b&&z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,l){return r?(r=ye(r),this._southWest.equals(r.getSouthWest(),l)&&this._northEast.equals(r.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ye(r,l){return r instanceof fe?r:new fe(r,l)}function Te(r,l,d){if(isNaN(r)||isNaN(l))throw new Error("Invalid LatLng object: ("+r+", "+l+")");this.lat=+r,this.lng=+l,d!==void 0&&(this.alt=+d)}Te.prototype={equals:function(r,l){if(!r)return!1;r=ce(r);var d=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return d<=(l===void 0?1e-9:l)},toString:function(r){return"LatLng("+R(this.lat,r)+", "+R(this.lng,r)+")"},distanceTo:function(r){return We.distance(this,ce(r))},wrap:function(){return We.wrapLatLng(this)},toBounds:function(r){var l=180*r/40075017,d=l/Math.cos(Math.PI/180*this.lat);return ye([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Te(this.lat,this.lng,this.alt)}};function ce(r,l,d){return r instanceof Te?r:we(r)&&typeof r[0]!="object"?r.length===3?new Te(r[0],r[1],r[2]):r.length===2?new Te(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new Te(r.lat,"lng"in r?r.lng:r.lon,r.alt):l===void 0?null:new Te(r,l,d)}var Ze={latLngToPoint:function(r,l){var d=this.projection.project(r),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(r,l){var d=this.scale(l),p=this.transformation.untransform(r,d);return this.projection.unproject(p)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(r),p=this.transformation.transform(l.min,d),w=this.transformation.transform(l.max,d);return new O(p,w)},infinite:!1,wrapLatLng:function(r){var l=this.wrapLng?P(r.lng,this.wrapLng,!0):r.lng,d=this.wrapLat?P(r.lat,this.wrapLat,!0):r.lat,p=r.alt;return new Te(d,l,p)},wrapLatLngBounds:function(r){var l=r.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,w=l.lng-d.lng;if(p===0&&w===0)return r;var b=r.getSouthWest(),z=r.getNorthEast(),$=new Te(b.lat-p,b.lng-w),J=new Te(z.lat-p,z.lng-w);return new fe($,J)}},We=a({},Ze,{wrapLng:[-180,180],R:6371e3,distance:function(r,l){var d=Math.PI/180,p=r.lat*d,w=l.lat*d,b=Math.sin((l.lat-r.lat)*d/2),z=Math.sin((l.lng-r.lng)*d/2),$=b*b+Math.cos(p)*Math.cos(w)*z*z,J=2*Math.atan2(Math.sqrt($),Math.sqrt(1-$));return this.R*J}}),rt=6378137,Rt={R:rt,MAX_LATITUDE:85.0511287798,project:function(r){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,r.lat),-d),w=Math.sin(p*l);return new X(this.R*r.lng*l,this.R*Math.log((1+w)/(1-w))/2)},unproject:function(r){var l=180/Math.PI;return new Te((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*l,r.x*l/this.R)},bounds:(function(){var r=rt*Math.PI;return new O([-r,-r],[r,r])})()};function jr(r,l,d,p){if(we(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=l,this._c=d,this._d=p}jr.prototype={transform:function(r,l){return this._transform(r.clone(),l)},_transform:function(r,l){return l=l||1,r.x=l*(this._a*r.x+this._b),r.y=l*(this._c*r.y+this._d),r},untransform:function(r,l){return l=l||1,new X((r.x/l-this._b)/this._a,(r.y/l-this._d)/this._c)}};function ir(r,l,d,p){return new jr(r,l,d,p)}var sr=a({},We,{code:"EPSG:3857",projection:Rt,transformation:(function(){var r=.5/(Math.PI*Rt.R);return ir(r,.5,-r,.5)})()}),Br=a({},sr,{code:"EPSG:900913"});function us(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Ur(r,l){var d="",p,w,b,z,$,J;for(p=0,b=r.length;p<b;p++){for($=r[p],w=0,z=$.length;w<z;w++)J=$[w],d+=(w?"L":"M")+J.x+" "+J.y;d+=l?ve.svg?"z":"x":""}return d||"M0 0"}var gn=document.documentElement.style,br="ActiveXObject"in window,ft=br&&!document.addEventListener,St="msLaunchUri"in navigator&&!("documentMode"in document),_n=Vt("webkit"),Ut=Vt("android"),Hn=Vt("android 2")||Vt("android 3"),Zs=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Wr=Ut&&Vt("Google")&&Zs<537&&!("AudioNode"in window),or=!!window.opera,pi=!St&&Vt("chrome"),ar=Vt("gecko")&&!_n&&!or&&!br,Li=!pi&&Vt("safari"),yn=Vt("phantom"),lr="OTransition"in gn,Cr=navigator.platform.indexOf("Win")===0,Ar=br&&"transition"in gn,Hr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Hn,gi="MozPerspective"in gn,An=!window.L_DISABLE_3D&&(Ar||Hr||gi)&&!lr&&!yn,ur=typeof orientation<"u"||Vt("mobile"),cr=ur&&_n,vn=ur&&Hr,hr=!window.PointerEvent&&window.MSPointerEvent,dr=!!(window.PointerEvent||hr),Tt="ontouchstart"in window||!!window.TouchEvent,Mi=!window.L_NO_TOUCH&&(Tt||dr),Be=ur&&or,wt=ur&&ar,Ot=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Kt=(function(){var r=!1;try{var l=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",I,l),window.removeEventListener("testPassiveEventSupport",I,l)}catch{}return r})(),wn=(function(){return!!document.createElement("canvas").getContext})(),Pt=!!(document.createElementNS&&us("svg").createSVGRect),Wt=!!Pt&&(function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),qn=!Pt&&(function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var l=r.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}})(),Ht=navigator.platform.indexOf("Mac")===0,un=navigator.platform.indexOf("Linux")===0;function Vt(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var ve={ie:br,ielt9:ft,edge:St,webkit:_n,android:Ut,android23:Hn,androidStock:Wr,opera:or,chrome:pi,gecko:ar,safari:Li,phantom:yn,opera12:lr,win:Cr,ie3d:Ar,webkit3d:Hr,gecko3d:gi,any3d:An,mobile:ur,mobileWebkit:cr,mobileWebkit3d:vn,msPointer:hr,pointer:dr,touch:Mi,touchNative:Tt,mobileOpera:Be,mobileGecko:wt,retina:Ot,passiveEvents:Kt,canvas:wn,svg:Pt,vml:qn,inlineSvg:Wt,mac:Ht,linux:un},Di=ve.msPointer?"MSPointerDown":"pointerdown",$n=ve.msPointer?"MSPointerMove":"pointermove",Qo=ve.msPointer?"MSPointerUp":"pointerup",Yo=ve.msPointer?"MSPointerCancel":"pointercancel",cs={touchstart:Di,touchmove:$n,touchend:Qo,touchcancel:Yo},fr={touchstart:It,touchmove:mr,touchend:mr,touchcancel:mr},qr={},Xo=!1;function ja(r,l,d){return l==="touchstart"&&fs(),fr[l]?(d=fr[l].bind(this,d),r.addEventListener(cs[l],d,!1),d):(console.warn("wrong event specified:",l),I)}function Ba(r,l,d){if(!cs[l]){console.warn("wrong event specified:",l);return}r.removeEventListener(cs[l],d,!1)}function hs(r){qr[r.pointerId]=r}function Jo(r){qr[r.pointerId]&&(qr[r.pointerId]=r)}function ds(r){delete qr[r.pointerId]}function fs(){Xo||(document.addEventListener(Di,hs,!0),document.addEventListener($n,Jo,!0),document.addEventListener(Qo,ds,!0),document.addEventListener(Yo,ds,!0),Xo=!0)}function mr(r,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in qr)l.touches.push(qr[d]);l.changedTouches=[l],r(l)}}function It(r,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&bt(l),mr(r,l)}function Wl(r){var l={},d,p;for(p in r)d=r[p],l[p]=d&&d.bind?d.bind(r):d;return r=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Ks=200;function ea(r,l){r.addEventListener("dblclick",l);var d=0,p;function w(b){if(b.detail!==1){p=b.detail;return}if(!(b.pointerType==="mouse"||b.sourceCapabilities&&!b.sourceCapabilities.firesTouchEvents)){var z=Qr(b);if(!(z.some(function(J){return J instanceof HTMLLabelElement&&J.attributes.for})&&!z.some(function(J){return J instanceof HTMLInputElement||J instanceof HTMLSelectElement}))){var $=Date.now();$-d<=Ks?(p++,p===2&&l(Wl(b))):p=1,d=$}}}return r.addEventListener("click",w),{dblclick:l,simDblclick:w}}function ms(r,l){r.removeEventListener("dblclick",l.dblclick),r.removeEventListener("click",l.simDblclick)}var ps=zi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),$r=zi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Oi=$r==="webkitTransition"||$r==="OTransition"?$r+"End":"transitionend";function kn(r){return typeof r=="string"?document.getElementById(r):r}function Vi(r,l){var d=r.style[l]||r.currentStyle&&r.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(r,null);d=p?p[l]:null}return d==="auto"?null:d}function Ke(r,l,d){var p=document.createElement(r);return p.className=l||"",d&&d.appendChild(p),p}function ut(r){var l=r.parentNode;l&&l.removeChild(r)}function En(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function pr(r){var l=r.parentNode;l&&l.lastChild!==r&&l.appendChild(r)}function Tn(r){var l=r.parentNode;l&&l.firstChild!==r&&l.insertBefore(r,l.firstChild)}function Gr(r,l){if(r.classList!==void 0)return r.classList.contains(l);var d=Zr(r);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function Ie(r,l){if(r.classList!==void 0)for(var d=Q(l),p=0,w=d.length;p<w;p++)r.classList.add(d[p]);else if(!Gr(r,l)){var b=Zr(r);_i(r,(b?b+" ":"")+l)}}function gt(r,l){r.classList!==void 0?r.classList.remove(l):_i(r,q((" "+Zr(r)+" ").replace(" "+l+" "," ")))}function _i(r,l){r.className.baseVal===void 0?r.className=l:r.className.baseVal=l}function Zr(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function cn(r,l){"opacity"in r.style?r.style.opacity=l:"filter"in r.style&&ta(r,l)}function ta(r,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=r.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):r.style.filter+=" progid:"+p+"(opacity="+l+")"}function zi(r){for(var l=document.documentElement.style,d=0;d<r.length;d++)if(r[d]in l)return r[d];return!1}function Gn(r,l,d){var p=l||new X(0,0);r.style[ps]=(ve.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function Lt(r,l){r._leaflet_pos=l,ve.any3d?Gn(r,l):(r.style.left=l.x+"px",r.style.top=l.y+"px")}function kr(r){return r._leaflet_pos||new X(0,0)}var Je,Rn,gs;if("onselectstart"in document)Je=function(){ze(window,"selectstart",bt)},Rn=function(){_t(window,"selectstart",bt)};else{var Kr=zi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Je=function(){if(Kr){var r=document.documentElement.style;gs=r[Kr],r[Kr]="none"}},Rn=function(){Kr&&(document.documentElement.style[Kr]=gs,gs=void 0)}}function _s(){ze(window,"dragstart",bt)}function ys(){_t(window,"dragstart",bt)}var Fi,gr;function ji(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(Zn(),Fi=r,gr=r.style.outlineStyle,r.style.outlineStyle="none",ze(window,"keydown",Zn))}function Zn(){Fi&&(Fi.style.outlineStyle=gr,Fi=void 0,gr=void 0,_t(window,"keydown",Zn))}function Rr(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function $t(r){var l=r.getBoundingClientRect();return{x:l.width/r.offsetWidth||1,y:l.height/r.offsetHeight||1,boundingClientRect:l}}var vs={__proto__:null,TRANSFORM:ps,TRANSITION:$r,TRANSITION_END:Oi,get:kn,getStyle:Vi,create:Ke,remove:ut,empty:En,toFront:pr,toBack:Tn,hasClass:Gr,addClass:Ie,removeClass:gt,setClass:_i,getClass:Zr,setOpacity:cn,testProp:zi,setTransform:Gn,setPosition:Lt,getPosition:kr,get disableTextSelection(){return Je},get enableTextSelection(){return Rn},disableImageDrag:_s,enableImageDrag:ys,preventOutline:ji,restoreOutline:Zn,getSizedParentNode:Rr,getScale:$t};function ze(r,l,d,p){if(l&&typeof l=="object")for(var w in l)Qs(r,w,l[w],d);else{l=Q(l);for(var b=0,z=l.length;b<z;b++)Qs(r,l[b],d,p)}return this}var Mt="_leaflet_events";function _t(r,l,d,p){if(arguments.length===1)yi(r),delete r[Mt];else if(l&&typeof l=="object")for(var w in l)Bi(r,w,l[w],d);else if(l=Q(l),arguments.length===2)yi(r,function($){return xe(l,$)!==-1});else for(var b=0,z=l.length;b<z;b++)Bi(r,l[b],d,p);return this}function yi(r,l){for(var d in r[Mt]){var p=d.split(/\d/)[0];(!l||l(p))&&Bi(r,p,null,null,d)}}var Kn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Qs(r,l,d,p){var w=l+E(d)+(p?"_"+E(p):"");if(r[Mt]&&r[Mt][w])return this;var b=function($){return d.call(p||r,$||window.event)},z=b;!ve.touchNative&&ve.pointer&&l.indexOf("touch")===0?b=ja(r,l,b):ve.touch&&l==="dblclick"?b=ea(r,b):"addEventListener"in r?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?r.addEventListener(Kn[l]||l,b,ve.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(b=function($){$=$||window.event,Es(r,$)&&z($)},r.addEventListener(Kn[l],b,!1)):r.addEventListener(l,z,!1):r.attachEvent("on"+l,b),r[Mt]=r[Mt]||{},r[Mt][w]=b}function Bi(r,l,d,p,w){w=w||l+E(d)+(p?"_"+E(p):"");var b=r[Mt]&&r[Mt][w];if(!b)return this;!ve.touchNative&&ve.pointer&&l.indexOf("touch")===0?Ba(r,l,b):ve.touch&&l==="dblclick"?ms(r,b):"removeEventListener"in r?r.removeEventListener(Kn[l]||l,b,!1):r.detachEvent("on"+l,b),r[Mt][w]=null}function lt(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function Ys(r){return Qs(r,"wheel",lt),this}function ws(r){return ze(r,"mousedown touchstart dblclick contextmenu",lt),r._leaflet_disable_click=!0,this}function bt(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function Nn(r){return bt(r),lt(r),this}function Qr(r){if(r.composedPath)return r.composedPath();for(var l=[],d=r.target;d;)l.push(d),d=d.parentNode;return l}function Yr(r,l){if(!l)return new X(r.clientX,r.clientY);var d=$t(l),p=d.boundingClientRect;return new X((r.clientX-p.left)/d.x-l.clientLeft,(r.clientY-p.top)/d.y-l.clientTop)}var Xr=ve.linux&&ve.chrome?window.devicePixelRatio:ve.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function na(r){return ve.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Xr:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function Es(r,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==r;)d=d.parentNode}catch{return!1}return d!==r}var Jr={__proto__:null,on:ze,off:_t,stopPropagation:lt,disableScrollPropagation:Ys,disableClickPropagation:ws,preventDefault:bt,stop:Nn,getPropagationPath:Qr,getMousePosition:Yr,getWheelDelta:na,isExternalTarget:Es,addListener:ze,removeListener:_t},Ts=ge.extend({run:function(r,l,d,p){this.stop(),this._el=r,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=kr(r),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(r){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),r):(this._runFrame(1),this._complete())},_runFrame:function(r,l){var d=this._startPos.add(this._offset.multiplyBy(r));l&&d._round(),Lt(this._el,d),this.fire("step")},_complete:function(){U(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),et=ge.extend({options:{crs:sr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,l){l=ne(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=m(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ce(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=$r&&ve.any3d&&!ve.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ze(this._proxy,Oi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),r=this._limitCenter(ce(r),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=a({animate:d.animate},d.zoom),d.pan=a({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,l,d.zoom):this._tryAnimatedPan(r,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(r,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(r,l){return this._loaded?this.setView(this.getCenter(),r,{zoom:l}):(this._zoom=r,this)},zoomIn:function(r,l){return r=r||(ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,l)},zoomOut:function(r,l){return r=r||(ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,l)},setZoomAround:function(r,l,d){var p=this.getZoomScale(l),w=this.getSize().divideBy(2),b=r instanceof X?r:this.latLngToContainerPoint(r),z=b.subtract(w).multiplyBy(1-1/p),$=this.containerPointToLatLng(w.add(z));return this.setView($,l,{zoom:d})},_getBoundsCenterZoom:function(r,l){l=l||{},r=r.getBounds?r.getBounds():ye(r);var d=re(l.paddingTopLeft||l.padding||[0,0]),p=re(l.paddingBottomRight||l.padding||[0,0]),w=this.getBoundsZoom(r,!1,d.add(p));if(w=typeof l.maxZoom=="number"?Math.min(l.maxZoom,w):w,w===1/0)return{center:r.getCenter(),zoom:w};var b=p.subtract(d).divideBy(2),z=this.project(r.getSouthWest(),w),$=this.project(r.getNorthEast(),w),J=this.unproject(z.add($).divideBy(2).add(b),w);return{center:J,zoom:w}},fitBounds:function(r,l){if(r=ye(r),!r.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(r,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,l){return this.setView(r,this._zoom,{pan:l})},panBy:function(r,l){if(r=re(r).round(),l=l||{},!r.x&&!r.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ts,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){Ie(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,l,d){if(d=d||{},d.animate===!1||!ve.any3d)return this.setView(r,l,d);this._stop();var p=this.project(this.getCenter()),w=this.project(r),b=this.getSize(),z=this._zoom;r=ce(r),l=l===void 0?z:l;var $=Math.max(b.x,b.y),J=$*this.getZoomScale(z,l),oe=w.distanceTo(p)||1,Ee=1.42,Ve=Ee*Ee;function Xe(yt){var _o=yt?-1:1,nd=yt?J:$,rd=J*J-$*$+_o*Ve*Ve*oe*oe,Cs=2*nd*Ve*oe,As=rd/Cs,ks=Math.sqrt(As*As+1)-As,Ja=ks<1e-9?-18:Math.log(ks);return Ja}function sn(yt){return(Math.exp(yt)-Math.exp(-yt))/2}function Yt(yt){return(Math.exp(yt)+Math.exp(-yt))/2}function er(yt){return sn(yt)/Yt(yt)}var Dn=Xe(0);function po(yt){return $*(Yt(Dn)/Yt(Dn+Ee*yt))}function tu(yt){return $*(Yt(Dn)*er(Dn+Ee*yt)-sn(Dn))/Ve}function Zi(yt){return 1-Math.pow(1-yt,1.5)}var ac=Date.now(),bs=(Xe(1)-Dn)/Ee,oi=d.duration?1e3*d.duration:1e3*bs*.8;function go(){var yt=(Date.now()-ac)/oi,_o=Zi(yt)*bs;yt<=1?(this._flyToFrame=V(go,this),this._move(this.unproject(p.add(w.subtract(p).multiplyBy(tu(_o)/oe)),z),this.getScaleZoom($/po(_o),z),{flyTo:!0})):this._move(r,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),go.call(this),this},flyToBounds:function(r,l){var d=this._getBoundsCenterZoom(r,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(r){return r=ye(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var l=this.options.minZoom;return this.options.minZoom=r,this._loaded&&l!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var l=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&l!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,ye(r));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(r,l){l=l||{};var d=re(l.paddingTopLeft||l.padding||[0,0]),p=re(l.paddingBottomRight||l.padding||[0,0]),w=this.project(this.getCenter()),b=this.project(r),z=this.getPixelBounds(),$=Y([z.min.add(d),z.max.subtract(p)]),J=$.getSize();if(!$.contains(b)){this._enforcingBounds=!0;var oe=b.subtract($.getCenter()),Ee=$.extend(b).getSize().subtract(J);w.x+=oe.x<0?-Ee.x:Ee.x,w.y+=oe.y<0?-Ee.y:Ee.y,this.panTo(this.unproject(w),l),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=a({animate:!1,pan:!0},r===!0?{animate:!0}:r);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),w=d.divideBy(2).round(),b=p.subtract(w);return!b.x&&!b.y?this:(r.animate&&r.pan?this.panBy(b):(r.pan&&this._rawPanBy(b),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(m(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=a({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=m(this._handleGeolocationResponse,this),d=m(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,r):navigator.geolocation.getCurrentPosition(l,d,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var l=r.code,d=r.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var l=r.coords.latitude,d=r.coords.longitude,p=new Te(l,d),w=p.toBounds(r.coords.accuracy*2),b=this._locateOptions;if(b.setView){var z=this.getBoundsZoom(w);this.setView(p,b.maxZoom?Math.min(z,b.maxZoom):z)}var $={latlng:p,bounds:w,timestamp:r.timestamp};for(var J in r.coords)typeof r.coords[J]=="number"&&($[J]=r.coords[J]);this.fire("locationfound",$)}},addHandler:function(r,l){if(!l)return this;var d=this[r]=new l(this);return this._handlers.push(d),this.options[r]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ut(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(U(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)ut(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,l){var d="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),p=Ke("div",d,l||this._mapPane);return r&&(this._panes[r]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),l=this.unproject(r.getBottomLeft()),d=this.unproject(r.getTopRight());return new fe(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,l,d){r=ye(r),d=re(d||[0,0]);var p=this.getZoom()||0,w=this.getMinZoom(),b=this.getMaxZoom(),z=r.getNorthWest(),$=r.getSouthEast(),J=this.getSize().subtract(d),oe=Y(this.project($,p),this.project(z,p)).getSize(),Ee=ve.any3d?this.options.zoomSnap:1,Ve=J.x/oe.x,Xe=J.y/oe.y,sn=l?Math.max(Ve,Xe):Math.min(Ve,Xe);return p=this.getScaleZoom(sn,p),Ee&&(p=Math.round(p/(Ee/100))*(Ee/100),p=l?Math.ceil(p/Ee)*Ee:Math.floor(p/Ee)*Ee),Math.max(w,Math.min(b,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new X(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,l){var d=this._getTopLeftPoint(r,l);return new O(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(r)/d.scale(l)},getScaleZoom:function(r,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(r*d.scale(l));return isNaN(p)?1/0:p},project:function(r,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ce(r),l)},unproject:function(r,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(re(r),l)},layerPointToLatLng:function(r){var l=re(r).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(r){var l=this.project(ce(r))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(ce(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(ye(r))},distance:function(r,l){return this.options.crs.distance(ce(r),ce(l))},containerPointToLayerPoint:function(r){return re(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return re(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var l=this.containerPointToLayerPoint(re(r));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(r)))},mouseEventToContainerPoint:function(r){return Yr(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var l=this._container=kn(r);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ze(l,"scroll",this._onScroll,this),this._containerId=E(l)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&ve.any3d,Ie(r,"leaflet-container"+(ve.touch?" leaflet-touch":"")+(ve.retina?" leaflet-retina":"")+(ve.ielt9?" leaflet-oldie":"")+(ve.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Vi(r,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Lt(this._mapPane,new X(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ie(r.markerPane,"leaflet-zoom-hide"),Ie(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,l,d){Lt(this._mapPane,new X(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var w=this._zoom!==l;this._moveStart(w,d)._move(r,l)._moveEnd(w),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(r,l){return r&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(r,l,d,p){l===void 0&&(l=this._zoom);var w=this._zoom!==l;return this._zoom=l,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),p?d&&d.pinch&&this.fire("zoom",d):((w||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return U(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){Lt(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[E(this._container)]=this;var l=r?_t:ze;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ve.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){U(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,l){for(var d=[],p,w=l==="mouseout"||l==="mouseover",b=r.target||r.srcElement,z=!1;b;){if(p=this._targets[E(b)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){z=!0;break}if(p&&p.listens(l,!0)&&(w&&!Es(b,r)||(d.push(p),w))||b===this._container)break;b=b.parentNode}return!d.length&&!z&&!w&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var l=r.target||r.srcElement;if(!(!this._loaded||l._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(l))){var d=r.type;d==="mousedown"&&ji(l),this._fireDOMEvent(r,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,l,d){if(r.type==="click"){var p=a({},r);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var w=this._findEventTargets(r,l);if(d){for(var b=[],z=0;z<d.length;z++)d[z].listens(l,!0)&&b.push(d[z]);w=b.concat(w)}if(w.length){l==="contextmenu"&&bt(r);var $=w[0],J={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var oe=$.getLatLng&&(!$._radius||$._radius<=10);J.containerPoint=oe?this.latLngToContainerPoint($.getLatLng()):this.mouseEventToContainerPoint(r),J.layerPoint=this.containerPointToLayerPoint(J.containerPoint),J.latlng=oe?$.getLatLng():this.layerPointToLatLng(J.layerPoint)}for(z=0;z<w.length;z++)if(w[z].fire(l,J,!0),J.originalEvent._stopped||w[z].options.bubblingMouseEvents===!1&&xe(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,l=this._handlers.length;r<l;r++)this._handlers[r].disable()},whenReady:function(r,l){return this._loaded?r.call(l||this,{target:this}):this.on("load",r,l),this},_getMapPanePos:function(){return kr(this._mapPane)||new X(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,l){var d=r&&l!==void 0?this._getNewPixelOrigin(r,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,l){var d=this.getSize()._divideBy(2);return this.project(r,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(r,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(r,l,d){var p=this._getNewPixelOrigin(d,l);return Y([this.project(r.getSouthWest(),l)._subtract(p),this.project(r.getNorthWest(),l)._subtract(p),this.project(r.getSouthEast(),l)._subtract(p),this.project(r.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,l,d){if(!d)return r;var p=this.project(r,l),w=this.getSize().divideBy(2),b=new O(p.subtract(w),p.add(w)),z=this._getBoundsOffset(b,d,l);return Math.abs(z.x)<=1&&Math.abs(z.y)<=1?r:this.unproject(p.add(z),l)},_limitOffset:function(r,l){if(!l)return r;var d=this.getPixelBounds(),p=new O(d.min.add(r),d.max.add(r));return r.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(r,l,d){var p=Y(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),w=p.min.subtract(r.min),b=p.max.subtract(r.max),z=this._rebound(w.x,-b.x),$=this._rebound(w.y,-b.y);return new X(z,$)},_rebound:function(r,l){return r+l>0?Math.round(r-l)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(l))},_limitZoom:function(r){var l=this.getMinZoom(),d=this.getMaxZoom(),p=ve.any3d?this.options.zoomSnap:1;return p&&(r=Math.round(r/p)*p),Math.max(l,Math.min(d,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){gt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,l){var d=this._getCenterOffset(r)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var r=this._proxy=Ke("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(l){var d=ps,p=this._proxy.style[d];Gn(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ut(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),l=this.getZoom();Gn(this._proxy,this.project(r,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),w=this._getCenterOffset(r)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(w)?!1:(V(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(r,l,!0)},this),!0)},_animateZoom:function(r,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=l,Ie(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(m(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&gt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Qn(r,l){return new et(r,l)}var hn=Ge.extend({options:{position:"topright"},initialize:function(r){ne(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var l=this._map;return l&&l.removeControl(this),this.options.position=r,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var l=this._container=this.onAdd(r),d=this.getPosition(),p=r._controlCorners[d];return Ie(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ut(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),Yn=function(r){return new hn(r)};et.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},l="leaflet-",d=this._controlContainer=Ke("div",l+"control-container",this._container);function p(w,b){var z=l+w+" "+l+b;r[w+b]=Ke("div",z,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)ut(this._controlCorners[r]);ut(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ra=hn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(r,l,d){ne(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in r)this._addLayer(r[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return hn.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,l){return this._addLayer(r,l),this._map?this._update():this},addOverlay:function(r,l){return this._addLayer(r,l,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var l=this._getLayer(E(r));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){Ie(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(Ie(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):gt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return gt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",l=this._container=Ke("div",r),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),ws(l),Ys(l);var p=this._section=Ke("section",r+"-list");d&&(this._map.on("click",this.collapse,this),ze(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var w=this._layersLink=Ke("a",r+"-toggle",l);w.href="#",w.title="Layers",w.setAttribute("role","button"),ze(w,{keydown:function(b){b.keyCode===13&&this._expandSafely()},click:function(b){bt(b),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Ke("div",r+"-base",p),this._separator=Ke("div",r+"-separator",p),this._overlaysList=Ke("div",r+"-overlays",p),l.appendChild(p)},_getLayer:function(r){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&E(this._layers[l].layer)===r)return this._layers[l]},_addLayer:function(r,l,d){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(m(function(p,w){return this.options.sortFunction(p.layer,w.layer,p.name,w.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;En(this._baseLayersList),En(this._overlaysList),this._layerControlInputs=[];var r,l,d,p,w=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,r=r||!p.overlay,w+=p.overlay?0:1;return this.options.hideSingleBase&&(r=r&&w>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=l&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var l=this._getLayer(E(r.target)),d=l.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(r,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(r){var l=document.createElement("label"),d=this._map.hasLayer(r.layer),p;r.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+E(this),d),this._layerControlInputs.push(p),p.layerId=E(r.layer),ze(p,"click",this._onInputClick,this);var w=document.createElement("span");w.innerHTML=" "+r.name;var b=document.createElement("span");l.appendChild(b),b.appendChild(p),b.appendChild(w);var z=r.overlay?this._overlaysList:this._baseLayersList;return z.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,l,d,p=[],w=[];this._handlingClick=!0;for(var b=r.length-1;b>=0;b--)l=r[b],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||w.push(d);for(b=0;b<w.length;b++)this._map.hasLayer(w[b])&&this._map.removeLayer(w[b]);for(b=0;b<p.length;b++)this._map.hasLayer(p[b])||this._map.addLayer(p[b]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,l,d,p=this._map.getZoom(),w=r.length-1;w>=0;w--)l=r[w],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,ze(r,"click",bt),this.expand();var l=this;setTimeout(function(){_t(r,"click",bt),l._preventClick=!1})}}),xs=function(r,l,d){return new ra(r,l,d)},_r=hn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var l="leaflet-control-zoom",d=Ke("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,l,d,p,w){var b=Ke("a",d,p);return b.innerHTML=r,b.href="#",b.title=l,b.setAttribute("role","button"),b.setAttribute("aria-label",l),ws(b),ze(b,"click",Nn),ze(b,"click",w,this),ze(b,"click",this._refocusOnMap,this),b},_updateDisabled:function(){var r=this._map,l="leaflet-disabled";gt(this._zoomInButton,l),gt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(Ie(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(Ie(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});et.mergeOptions({zoomControl:!0}),et.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new _r,this.addControl(this.zoomControl))});var ia=function(r){return new _r(r)},rn=hn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var l="leaflet-control-scale",d=Ke("div",l),p=this.options;return this._addScales(p,l+"-line",d),r.on(p.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),d},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,l,d){r.metric&&(this._mScale=Ke("div",l,d)),r.imperial&&(this._iScale=Ke("div",l,d))},_update:function(){var r=this._map,l=r.getSize().y/2,d=r.distance(r.containerPointToLatLng([0,l]),r.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var l=this._getRoundNum(r),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/r)},_updateImperial:function(r){var l=r*3.2808399,d,p,w;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(w=this._getRoundNum(l),this._updateScale(this._iScale,w+" ft",w/l))},_updateScale:function(r,l,d){r.style.width=Math.round(this.options.maxWidth*d)+"px",r.innerHTML=l},_getRoundNum:function(r){var l=Math.pow(10,(Math.floor(r)+"").length-1),d=r/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),ei=function(r){return new rn(r)},Is='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ti=hn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ve.inlineSvg?Is+" ":"")+"Leaflet</a>"},initialize:function(r){ne(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=Ke("div","leaflet-control-attribution"),ws(this._container);for(var l in r._layers)r._layers[l].getAttribution&&this.addAttribution(r._layers[l].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var l in this._attributions)this._attributions[l]&&r.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),r.length&&d.push(r.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});et.mergeOptions({attributionControl:!0}),et.addInitHook(function(){this.options.attributionControl&&new ti().addTo(this)});var Xs=function(r){return new ti(r)};hn.Layers=ra,hn.Zoom=_r,hn.Scale=rn,hn.Attribution=ti,Yn.layers=xs,Yn.zoom=ia,Yn.scale=ei,Yn.attribution=Xs;var xn=Ge.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});xn.addTo=function(r,l){return r.addHandler(l,this),this};var Js={Events:Ce},Ln=ve.touch?"touchstart mousedown":"mousedown",Mn=ge.extend({options:{clickTolerance:3},initialize:function(r,l,d,p){ne(this,p),this._element=r,this._dragStartTarget=l||r,this._preventOutline=d},enable:function(){this._enabled||(ze(this._dragStartTarget,Ln,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Mn._dragging===this&&this.finishDrag(!0),_t(this._dragStartTarget,Ln,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!Gr(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Mn._dragging===this&&this.finishDrag();return}if(!(Mn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Mn._dragging=this,this._preventOutline&&ji(this._element),_s(),Je(),!this._moving)){this.fire("down");var l=r.touches?r.touches[0]:r,d=Rr(this._element);this._startPoint=new X(l.clientX,l.clientY),this._startPos=kr(this._element),this._parentScale=$t(d);var p=r.type==="mousedown";ze(document,p?"mousemove":"touchmove",this._onMove,this),ze(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var l=r.touches&&r.touches.length===1?r.touches[0]:r,d=new X(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,bt(r),this._moved||(this.fire("dragstart"),this._moved=!0,Ie(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ie(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),Lt(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){gt(document.body,"leaflet-dragging"),this._lastTarget&&(gt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),_t(document,"mousemove touchmove",this._onMove,this),_t(document,"mouseup touchend touchcancel",this._onUp,this),ys(),Rn();var l=this._moved&&this._moving;this._moving=!1,Mn._dragging=!1,l&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function eo(r,l,d){var p,w=[1,4,2,8],b,z,$,J,oe,Ee,Ve,Xe;for(b=0,Ee=r.length;b<Ee;b++)r[b]._code=K(r[b],l);for($=0;$<4;$++){for(Ve=w[$],p=[],b=0,Ee=r.length,z=Ee-1;b<Ee;z=b++)J=r[b],oe=r[z],J._code&Ve?oe._code&Ve||(Xe=H(oe,J,Ve,l,d),Xe._code=K(Xe,l),p.push(Xe)):(oe._code&Ve&&(Xe=H(oe,J,Ve,l,d),Xe._code=K(Xe,l),p.push(Xe)),p.push(J));r=p}return r}function sa(r,l){var d,p,w,b,z,$,J,oe,Ee;if(!r||r.length===0)throw new Error("latlngs not passed");ct(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var Ve=ce([0,0]),Xe=ye(r),sn=Xe.getNorthWest().distanceTo(Xe.getSouthWest())*Xe.getNorthEast().distanceTo(Xe.getNorthWest());sn<1700&&(Ve=to(r));var Yt=r.length,er=[];for(d=0;d<Yt;d++){var Dn=ce(r[d]);er.push(l.project(ce([Dn.lat-Ve.lat,Dn.lng-Ve.lng])))}for($=J=oe=0,d=0,p=Yt-1;d<Yt;p=d++)w=er[d],b=er[p],z=w.y*b.x-b.y*w.x,J+=(w.x+b.x)*z,oe+=(w.y+b.y)*z,$+=z*3;$===0?Ee=er[0]:Ee=[J/$,oe/$];var po=l.unproject(re(Ee));return ce([po.lat+Ve.lat,po.lng+Ve.lng])}function to(r){for(var l=0,d=0,p=0,w=0;w<r.length;w++){var b=ce(r[w]);l+=b.lat,d+=b.lng,p++}return ce([l/p,d/p])}var no={__proto__:null,clipPolygon:eo,polygonCenter:sa,centroid:to};function Qt(r,l){if(!l||!r.length)return r.slice();var d=l*l;return r=y(r,d),r=Ui(r,d),r}function oa(r,l,d){return Math.sqrt(Ue(r,l,d,!0))}function Ua(r,l,d){return Ue(r,l,d)}function Ui(r,l){var d=r.length,p=typeof Uint8Array<"u"?Uint8Array:Array,w=new p(d);w[0]=w[d-1]=1,h(r,w,l,0,d-1);var b,z=[];for(b=0;b<d;b++)w[b]&&z.push(r[b]);return z}function h(r,l,d,p,w){var b=0,z,$,J;for($=p+1;$<=w-1;$++)J=Ue(r[$],r[p],r[w],!0),J>b&&(z=$,b=J);b>d&&(l[z]=1,h(r,l,d,p,z),h(r,l,d,z,w))}function y(r,l){for(var d=[r[0]],p=1,w=0,b=r.length;p<b;p++)de(r[p],r[w])>l&&(d.push(r[p]),w=p);return w<b-1&&d.push(r[b-1]),d}var T;function C(r,l,d,p,w){var b=p?T:K(r,d),z=K(l,d),$,J,oe;for(T=z;;){if(!(b|z))return[r,l];if(b&z)return!1;$=b||z,J=H(r,l,$,d,w),oe=K(J,d),$===b?(r=J,b=oe):(l=J,z=oe)}}function H(r,l,d,p,w){var b=l.x-r.x,z=l.y-r.y,$=p.min,J=p.max,oe,Ee;return d&8?(oe=r.x+b*(J.y-r.y)/z,Ee=J.y):d&4?(oe=r.x+b*($.y-r.y)/z,Ee=$.y):d&2?(oe=J.x,Ee=r.y+z*(J.x-r.x)/b):d&1&&(oe=$.x,Ee=r.y+z*($.x-r.x)/b),new X(oe,Ee,w)}function K(r,l){var d=0;return r.x<l.min.x?d|=1:r.x>l.max.x&&(d|=2),r.y<l.min.y?d|=4:r.y>l.max.y&&(d|=8),d}function de(r,l){var d=l.x-r.x,p=l.y-r.y;return d*d+p*p}function Ue(r,l,d,p){var w=l.x,b=l.y,z=d.x-w,$=d.y-b,J=z*z+$*$,oe;return J>0&&(oe=((r.x-w)*z+(r.y-b)*$)/J,oe>1?(w=d.x,b=d.y):oe>0&&(w+=z*oe,b+=$*oe)),z=r.x-w,$=r.y-b,p?z*z+$*$:new X(w,b)}function ct(r){return!we(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function mt(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ct(r)}function zt(r,l){var d,p,w,b,z,$,J,oe;if(!r||r.length===0)throw new Error("latlngs not passed");ct(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var Ee=ce([0,0]),Ve=ye(r),Xe=Ve.getNorthWest().distanceTo(Ve.getSouthWest())*Ve.getNorthEast().distanceTo(Ve.getNorthWest());Xe<1700&&(Ee=to(r));var sn=r.length,Yt=[];for(d=0;d<sn;d++){var er=ce(r[d]);Yt.push(l.project(ce([er.lat-Ee.lat,er.lng-Ee.lng])))}for(d=0,p=0;d<sn-1;d++)p+=Yt[d].distanceTo(Yt[d+1])/2;if(p===0)oe=Yt[0];else for(d=0,b=0;d<sn-1;d++)if(z=Yt[d],$=Yt[d+1],w=z.distanceTo($),b+=w,b>p){J=(b-p)/w,oe=[$.x-J*($.x-z.x),$.y-J*($.y-z.y)];break}var Dn=l.unproject(re(oe));return ce([Dn.lat+Ee.lat,Dn.lng+Ee.lng])}var Xn={__proto__:null,simplify:Qt,pointToSegmentDistance:oa,closestPointOnSegment:Ua,clipSegment:C,_getEdgeIntersection:H,_getBitCode:K,_sqClosestPointOnSegment:Ue,isFlat:ct,_flat:mt,polylineCenter:zt},Nr={project:function(r){return new X(r.lng,r.lat)},unproject:function(r){return new Te(r.y,r.x)},bounds:new O([-180,-90],[180,90])},yr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new O([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var l=Math.PI/180,d=this.R,p=r.lat*l,w=this.R_MINOR/d,b=Math.sqrt(1-w*w),z=b*Math.sin(p),$=Math.tan(Math.PI/4-p/2)/Math.pow((1-z)/(1+z),b/2);return p=-d*Math.log(Math.max($,1e-10)),new X(r.lng*l*d,p)},unproject:function(r){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,w=Math.sqrt(1-p*p),b=Math.exp(-r.y/d),z=Math.PI/2-2*Math.atan(b),$=0,J=.1,oe;$<15&&Math.abs(J)>1e-7;$++)oe=w*Math.sin(z),oe=Math.pow((1-oe)/(1+oe),w/2),J=Math.PI/2-2*Math.atan(b*oe)-z,z+=J;return new Te(z*l,r.x*l/d)}},ni={__proto__:null,LonLat:Nr,Mercator:yr,SphericalMercator:Rt},ro=a({},We,{code:"EPSG:3395",projection:yr,transformation:(function(){var r=.5/(Math.PI*yr.R);return ir(r,.5,-r,.5)})()}),io=a({},We,{code:"EPSG:4326",projection:Nr,transformation:ir(1/180,1,-1/180,.5)}),Yh=a({},Ze,{projection:Nr,transformation:ir(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,l){var d=l.lng-r.lng,p=l.lat-r.lat;return Math.sqrt(d*d+p*p)},infinite:!0});Ze.Earth=We,Ze.EPSG3395=ro,Ze.EPSG3857=sr,Ze.EPSG900913=Br,Ze.EPSG4326=io,Ze.Simple=Yh;var Lr=ge.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[E(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[E(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var l=r.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});et.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var l=E(r);return this._layers[l]?this:(this._layers[l]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var l=E(r);return this._layers[l]?(this._loaded&&r.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return E(r)in this._layers},eachLayer:function(r,l){for(var d in this._layers)r.call(l,this._layers[d]);return this},_addLayers:function(r){r=r?we(r)?r:[r]:[];for(var l=0,d=r.length;l<d;l++)this.addLayer(r[l])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[E(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var l=E(r);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var w=this._zoomBoundLayers[p].options;r=w.minZoom===void 0?r:Math.min(r,w.minZoom),l=w.maxZoom===void 0?l:Math.max(l,w.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=r===1/0?void 0:r,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Wi=Lr.extend({initialize:function(r,l){ne(this,l),this._layers={};var d,p;if(r)for(d=0,p=r.length;d<p;d++)this.addLayer(r[d])},addLayer:function(r){var l=this.getLayerId(r);return this._layers[l]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var l=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(r){var l=typeof r=="number"?r:this.getLayerId(r);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[r]&&p[r].apply(p,l);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,l){for(var d in this._layers)r.call(l,this._layers[d]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return E(r)}}),aa=function(r,l){return new Wi(r,l)},vi=Wi.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),Wi.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),Wi.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new fe;for(var l in this._layers){var d=this._layers[l];r.extend(d.getBounds?d.getBounds():d.getLatLng())}return r}}),Ku=function(r,l){return new vi(r,l)},Ss=Ge.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){ne(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,l){var d=this._getIconUrl(r);if(!d){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(r,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var w=re(p),b=re(l==="shadow"&&d.shadowAnchor||d.iconAnchor||w&&w.divideBy(2,!0));r.className="leaflet-marker-"+l+" "+(d.className||""),b&&(r.style.marginLeft=-b.x+"px",r.style.marginTop=-b.y+"px"),w&&(r.style.width=w.x+"px",r.style.height=w.y+"px")},_createImg:function(r,l){return l=l||document.createElement("img"),l.src=r,l},_getIconUrl:function(r){return ve.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function Qu(r){return new Ss(r)}var so=Ss.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof so.imagePath!="string"&&(so.imagePath=this._detectIconPath()),(this.options.imagePath||so.imagePath)+Ss.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var l=function(d,p,w){var b=p.exec(d);return b&&b[w]};return r=l(r,/^url\((['"])?(.+)\1\)$/,2),r&&l(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=Ke("div","leaflet-default-icon-path",document.body),l=Vi(r,"background-image")||Vi(r,"backgroundImage");if(document.body.removeChild(r),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),Hl=xn.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Mn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ie(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&gt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,w=this._marker.options.autoPanPadding,b=kr(l._icon),z=d.getPixelBounds(),$=d.getPixelOrigin(),J=Y(z.min._subtract($).add(w),z.max._subtract($).subtract(w));if(!J.contains(b)){var oe=re((Math.max(J.max.x,b.x)-J.max.x)/(z.max.x-J.max.x)-(Math.min(J.min.x,b.x)-J.min.x)/(z.min.x-J.min.x),(Math.max(J.max.y,b.y)-J.max.y)/(z.max.y-J.max.y)-(Math.min(J.min.y,b.y)-J.min.y)/(z.min.y-J.min.y)).multiplyBy(p);d.panBy(oe,{animate:!1}),this._draggable._newPos._add(oe),this._draggable._startPos._add(oe),Lt(l._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=V(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(U(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,r)))},_onDrag:function(r){var l=this._marker,d=l._shadow,p=kr(l._icon),w=l._map.layerPointToLatLng(p);d&&Lt(d,p),l._latlng=w,r.latlng=w,r.oldLatLng=this._oldLatLng,l.fire("move",r).fire("drag",r)},_onDragEnd:function(r){U(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),wi=Lr.extend({options:{icon:new so,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,l){ne(this,l),this._latlng=ce(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var l=this._latlng;return this._latlng=ce(r),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=r.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,r.title&&(d.title=r.title),d.tagName==="IMG"&&(d.alt=r.alt||"")),Ie(d,l),r.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ze(d,"focus",this._panOnFocus,this);var w=r.icon.createShadow(this._shadow),b=!1;w!==this._shadow&&(this._removeShadow(),b=!0),w&&(Ie(w,l),w.alt=""),this._shadow=w,r.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),w&&b&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_t(this._icon,"focus",this._panOnFocus,this),ut(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ut(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&Lt(this._icon,r),this._shadow&&Lt(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var l=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(Ie(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Hl)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Hl(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&cn(this._icon,r),this._shadow&&cn(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var l=this.options.icon.options,d=l.iconSize?re(l.iconSize):re(0,0),p=l.iconAnchor?re(l.iconAnchor):re(0,0);r.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Xh(r,l){return new wi(r,l)}var Hi=Lr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return ne(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Wa=Hi.extend({options:{fill:!0,radius:10},initialize:function(r,l){ne(this,l),this._latlng=ce(r),this._radius=this.options.radius},setLatLng:function(r){var l=this._latlng;return this._latlng=ce(r),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var l=r&&r.radius||this._radius;return Hi.prototype.setStyle.call(this,r),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,l=this._radiusY||r,d=this._clickTolerance(),p=[r+d,l+d];this._pxBounds=new O(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Yu(r,l){return new Wa(r,l)}var Ha=Wa.extend({initialize:function(r,l,d){if(typeof l=="number"&&(l=a({},d,{radius:l})),ne(this,l),this._latlng=ce(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new fe(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:Hi.prototype.setStyle,_project:function(){var r=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===We.distance){var w=Math.PI/180,b=this._mRadius/We.R/w,z=d.project([l+b,r]),$=d.project([l-b,r]),J=z.add($).divideBy(2),oe=d.unproject(J).lat,Ee=Math.acos((Math.cos(b*w)-Math.sin(l*w)*Math.sin(oe*w))/(Math.cos(l*w)*Math.cos(oe*w)))/w;(isNaN(Ee)||Ee===0)&&(Ee=b/Math.cos(Math.PI/180*l)),this._point=J.subtract(d.getPixelOrigin()),this._radius=isNaN(Ee)?0:J.x-d.project([oe,r-Ee]).x,this._radiusY=J.y-z.y}else{var Ve=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(Ve).x}this._updateBounds()}});function la(r,l,d){return new Ha(r,l,d)}var Jn=Hi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,l){ne(this,l),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var l=1/0,d=null,p=Ue,w,b,z=0,$=this._parts.length;z<$;z++)for(var J=this._parts[z],oe=1,Ee=J.length;oe<Ee;oe++){w=J[oe-1],b=J[oe];var Ve=p(r,w,b,!0);Ve<l&&(l=Ve,d=p(r,w,b))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,l){return l=l||this._defaultShape(),r=ce(r),l.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new fe,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return ct(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var l=[],d=ct(r),p=0,w=r.length;p<w;p++)d?(l[p]=ce(r[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(r[p]);return l},_project:function(){var r=new O;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),l=new X(r,r);this._rawPxBounds&&(this._pxBounds=new O([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(r,l,d){var p=r[0]instanceof Te,w=r.length,b,z;if(p){for(z=[],b=0;b<w;b++)z[b]=this._map.latLngToLayerPoint(r[b]),d.extend(z[b]);l.push(z)}else for(b=0;b<w;b++)this._projectLatlngs(r[b],l,d)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,w,b,z,$,J;for(d=0,w=0,b=this._rings.length;d<b;d++)for(J=this._rings[d],p=0,z=J.length;p<z-1;p++)$=C(J[p],J[p+1],r,p,!0),$&&(l[w]=l[w]||[],l[w].push($[0]),($[1]!==J[p+1]||p===z-2)&&(l[w].push($[1]),w++))}},_simplifyPoints:function(){for(var r=this._parts,l=this.options.smoothFactor,d=0,p=r.length;d<p;d++)r[d]=Qt(r[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,l){var d,p,w,b,z,$,J=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(d=0,b=this._parts.length;d<b;d++)for($=this._parts[d],p=0,z=$.length,w=z-1;p<z;w=p++)if(!(!l&&p===0)&&oa(r,$[w],$[p])<=J)return!0;return!1}});function Jh(r,l){return new Jn(r,l)}Jn._flat=mt;var Ei=Jn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return sa(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var l=Jn.prototype._convertLatLngs.call(this,r),d=l.length;return d>=2&&l[0]instanceof Te&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(r){Jn.prototype._setLatLngs.call(this,r),ct(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ct(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,l=this.options.weight,d=new X(l,l);if(r=new O(r.min.subtract(d),r.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,w=this._rings.length,b;p<w;p++)b=eo(this._rings[p],r,!0),b.length&&this._parts.push(b)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var l=!1,d,p,w,b,z,$,J,oe;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(b=0,J=this._parts.length;b<J;b++)for(d=this._parts[b],z=0,oe=d.length,$=oe-1;z<oe;$=z++)p=d[z],w=d[$],p.y>r.y!=w.y>r.y&&r.x<(w.x-p.x)*(r.y-p.y)/(w.y-p.y)+p.x&&(l=!l);return l||Jn.prototype._containsPoint.call(this,r,!0)}});function ed(r,l){return new Ei(r,l)}var ri=vi.extend({initialize:function(r,l){ne(this,l),this._layers={},r&&this.addData(r)},addData:function(r){var l=we(r)?r:r.features,d,p,w;if(l){for(d=0,p=l.length;d<p;d++)w=l[d],(w.geometries||w.geometry||w.features||w.coordinates)&&this.addData(w);return this}var b=this.options;if(b.filter&&!b.filter(r))return this;var z=oo(r,b);return z?(z.feature=Ka(r),z.defaultOptions=z.options,this.resetStyle(z),b.onEachFeature&&b.onEachFeature(r,z),this.addLayer(z)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=a({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(l){this._setLayerStyle(l,r)},this)},_setLayerStyle:function(r,l){r.setStyle&&(typeof l=="function"&&(l=l(r.feature)),r.setStyle(l))}});function oo(r,l){var d=r.type==="Feature"?r.geometry:r,p=d?d.coordinates:null,w=[],b=l&&l.pointToLayer,z=l&&l.coordsToLatLng||$a,$,J,oe,Ee;if(!p&&!d)return null;switch(d.type){case"Point":return $=z(p),qa(b,r,$,l);case"MultiPoint":for(oe=0,Ee=p.length;oe<Ee;oe++)$=z(p[oe]),w.push(qa(b,r,$,l));return new vi(w);case"LineString":case"MultiLineString":return J=ua(p,d.type==="LineString"?0:1,z),new Jn(J,l);case"Polygon":case"MultiPolygon":return J=ua(p,d.type==="Polygon"?1:2,z),new Ei(J,l);case"GeometryCollection":for(oe=0,Ee=d.geometries.length;oe<Ee;oe++){var Ve=oo({geometry:d.geometries[oe],type:"Feature",properties:r.properties},l);Ve&&w.push(Ve)}return new vi(w);case"FeatureCollection":for(oe=0,Ee=d.features.length;oe<Ee;oe++){var Xe=oo(d.features[oe],l);Xe&&w.push(Xe)}return new vi(w);default:throw new Error("Invalid GeoJSON object.")}}function qa(r,l,d,p){return r?r(l,d):new wi(d,p&&p.markersInheritOptions&&p)}function $a(r){return new Te(r[1],r[0],r[2])}function ua(r,l,d){for(var p=[],w=0,b=r.length,z;w<b;w++)z=l?ua(r[w],l-1,d):(d||$a)(r[w]),p.push(z);return p}function Ga(r,l){return r=ce(r),r.alt!==void 0?[R(r.lng,l),R(r.lat,l),R(r.alt,l)]:[R(r.lng,l),R(r.lat,l)]}function Za(r,l,d,p){for(var w=[],b=0,z=r.length;b<z;b++)w.push(l?Za(r[b],ct(r[b])?0:l-1,d,p):Ga(r[b],p));return!l&&d&&w.length>0&&w.push(w[0].slice()),w}function ao(r,l){return r.feature?a({},r.feature,{geometry:l}):Ka(l)}function Ka(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var ql={toGeoJSON:function(r){return ao(this,{type:"Point",coordinates:Ga(this.getLatLng(),r)})}};wi.include(ql),Ha.include(ql),Wa.include(ql),Jn.include({toGeoJSON:function(r){var l=!ct(this._latlngs),d=Za(this._latlngs,l?1:0,!1,r);return ao(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),Ei.include({toGeoJSON:function(r){var l=!ct(this._latlngs),d=l&&!ct(this._latlngs[0]),p=Za(this._latlngs,d?2:l?1:0,!0,r);return l||(p=[p]),ao(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),Wi.include({toMultiPoint:function(r){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(r).geometry.coordinates)}),ao(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(r){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(r);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(w){if(w.toGeoJSON){var b=w.toGeoJSON(r);if(d)p.push(b.geometry);else{var z=Ka(b);z.type==="FeatureCollection"?p.push.apply(p,z.features):p.push(z)}}}),d?ao(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function Xu(r,l){return new ri(r,l)}var Mr=Xu,qi=Lr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,l,d){this._url=r,this._bounds=ye(l),ne(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ie(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ut(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&pr(this._image),this},bringToBack:function(){return this._map&&Tn(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=ye(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",l=this._image=r?this._url:Ke("img");if(Ie(l,"leaflet-image-layer"),this._zoomAnimated&&Ie(l,"leaflet-zoom-animated"),this.options.className&&Ie(l,this.options.className),l.onselectstart=I,l.onmousemove=I,l.onload=m(this.fire,this,"load"),l.onerror=m(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(r){var l=this._map.getZoomScale(r.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;Gn(this._image,d,l)},_reset:function(){var r=this._image,l=new O(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();Lt(r,l.min),r.style.width=d.x+"px",r.style.height=d.y+"px"},_updateOpacity:function(){cn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),Ju=function(r,l,d){return new qi(r,l,d)},$l=qi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",l=this._image=r?this._url:Ke("video");if(Ie(l,"leaflet-image-layer"),this._zoomAnimated&&Ie(l,"leaflet-zoom-animated"),this.options.className&&Ie(l,this.options.className),l.onselectstart=I,l.onmousemove=I,l.onloadeddata=m(this.fire,this,"load"),r){for(var d=l.getElementsByTagName("source"),p=[],w=0;w<d.length;w++)p.push(d[w].src);this._url=d.length>0?p:[l.src];return}we(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var b=0;b<this._url.length;b++){var z=Ke("source");z.src=this._url[b],l.appendChild(z)}}});function ec(r,l,d){return new $l(r,l,d)}var Gl=qi.extend({_initImage:function(){var r=this._image=this._url;Ie(r,"leaflet-image-layer"),this._zoomAnimated&&Ie(r,"leaflet-zoom-animated"),this.options.className&&Ie(r,this.options.className),r.onselectstart=I,r.onmousemove=I}});function Zl(r,l,d){return new Gl(r,l,d)}var ii=Lr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,l){r&&(r instanceof Te||we(r))?(this._latlng=ce(r),ne(this,l)):(ne(this,r),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&cn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&cn(this._container,1),this.bringToFront(),this.options.interactive&&(Ie(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(cn(this._container,0),this._removeTimeout=setTimeout(m(ut,void 0,this._container),200)):ut(this._container),this.options.interactive&&(gt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=ce(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&pr(this._container),this},bringToBack:function(){return this._map&&Tn(this._container),this},_prepareOpen:function(r){var l=this._source;if(!l._map)return!1;if(l instanceof vi){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!r)if(l.getCenter)r=l.getCenter();else if(l.getLatLng)r=l.getLatLng();else if(l.getBounds)r=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")r.innerHTML=l;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),l=re(this.options.offset),d=this._getAnchor();this._zoomAnimated?Lt(this._container,r.add(d)):l=l.add(r).add(d);var p=this._containerBottom=-l.y,w=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=w+"px"}},_getAnchor:function(){return[0,0]}});et.include({_initOverlay:function(r,l,d,p){var w=l;return w instanceof r||(w=new r(p).setContent(l)),d&&w.setLatLng(d),w}}),Lr.include({_initOverlay:function(r,l,d,p){var w=d;return w instanceof r?(ne(w,p),w._source=this):(w=l&&!p?l:new r(p,this),w.setContent(d)),w}});var Qa=ii.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,ii.prototype.openOn.call(this,r)},onAdd:function(r){ii.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Hi||this._source.on("preclick",lt))},onRemove:function(r){ii.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Hi||this._source.off("preclick",lt))},getEvents:function(){var r=ii.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",l=this._container=Ke("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Ke("div",r+"-content-wrapper",l);if(this._contentNode=Ke("div",r+"-content",d),ws(l),Ys(this._contentNode),ze(l,"contextmenu",lt),this._tipContainer=Ke("div",r+"-tip-container",l),this._tip=Ke("div",r+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Ke("a",r+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',ze(p,"click",function(w){bt(w),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,l=r.style;l.width="",l.whiteSpace="nowrap";var d=r.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=r.offsetHeight,w=this.options.maxHeight,b="leaflet-popup-scrolled";w&&p>w?(l.height=w+"px",Ie(r,b)):gt(r,b),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var l=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),d=this._getAnchor();Lt(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,l=parseInt(Vi(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,w=new X(this._containerLeft,-d-this._containerBottom);w._add(kr(this._container));var b=r.layerPointToContainerPoint(w),z=re(this.options.autoPanPadding),$=re(this.options.autoPanPaddingTopLeft||z),J=re(this.options.autoPanPaddingBottomRight||z),oe=r.getSize(),Ee=0,Ve=0;b.x+p+J.x>oe.x&&(Ee=b.x+p-oe.x+J.x),b.x-Ee-$.x<0&&(Ee=b.x-$.x),b.y+d+J.y>oe.y&&(Ve=b.y+d-oe.y+J.y),b.y-Ve-$.y<0&&(Ve=b.y-$.y),(Ee||Ve)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([Ee,Ve]))}},_getAnchor:function(){return re(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),lo=function(r,l){return new Qa(r,l)};et.mergeOptions({closePopupOnClick:!0}),et.include({openPopup:function(r,l,d){return this._initOverlay(Qa,r,l,d).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Lr.include({bindPopup:function(r,l){return this._popup=this._initOverlay(Qa,this._popup,r,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof vi||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){Nn(r);var l=r.layer||r.target;if(this._popup._source===l&&!(l instanceof Hi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=l,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var uo=ii.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){ii.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){ii.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=ii.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",l=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ke("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+E(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var l,d,p=this._map,w=this._container,b=p.latLngToContainerPoint(p.getCenter()),z=p.layerPointToContainerPoint(r),$=this.options.direction,J=w.offsetWidth,oe=w.offsetHeight,Ee=re(this.options.offset),Ve=this._getAnchor();$==="top"?(l=J/2,d=oe):$==="bottom"?(l=J/2,d=0):$==="center"?(l=J/2,d=oe/2):$==="right"?(l=0,d=oe/2):$==="left"?(l=J,d=oe/2):z.x<b.x?($="right",l=0,d=oe/2):($="left",l=J+(Ee.x+Ve.x)*2,d=oe/2),r=r.subtract(re(l,d,!0)).add(Ee).add(Ve),gt(w,"leaflet-tooltip-right"),gt(w,"leaflet-tooltip-left"),gt(w,"leaflet-tooltip-top"),gt(w,"leaflet-tooltip-bottom"),Ie(w,"leaflet-tooltip-"+$),Lt(w,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&cn(this._container,r)},_animateZoom:function(r){var l=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(l)},_getAnchor:function(){return re(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ca=function(r,l){return new uo(r,l)};et.include({openTooltip:function(r,l,d){return this._initOverlay(uo,r,l,d).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Lr.include({bindTooltip:function(r,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(uo,this._tooltip,r,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var l=r?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof vi||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var l=typeof r.getElement=="function"&&r.getElement();l&&(ze(l,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),ze(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var l=typeof r.getElement=="function"&&r.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var l=r.latlng,d,p;this._tooltip.options.sticky&&r.originalEvent&&(d=this._map.mouseEventToContainerPoint(r.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var Ya=Ss.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var l=r&&r.tagName==="DIV"?r:document.createElement("div"),d=this.options;if(d.html instanceof Element?(En(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=re(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function tc(r){return new Ya(r)}Ss.Default=so;var $i=Lr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ve.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){ne(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),ut(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(pr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Tn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=x(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof X?r:new X(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var l=this.getPane().children,d=-r(-1/0,1/0),p=0,w=l.length,b;p<w;p++)b=l[p].style.zIndex,l[p]!==this._container&&b&&(d=r(d,+b));isFinite(d)&&(this.options.zIndex=d+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ve.ielt9){cn(this._container,this.options.opacity);var r=+new Date,l=!1,d=!1;for(var p in this._tiles){var w=this._tiles[p];if(!(!w.current||!w.loaded)){var b=Math.min(1,(r-w.loaded)/200);cn(w.el,b),b<1?l=!0:(w.active?d=!0:this._onOpaqueTile(w),w.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(U(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:I,_initContainer:function(){this._container||(this._container=Ke("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,l=this.options.maxZoom;if(r!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===r?(this._levels[d].el.style.zIndex=l-Math.abs(r-d),this._onUpdateLevel(d)):(ut(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[r],w=this._map;return p||(p=this._levels[r]={},p.el=Ke("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=w.project(w.unproject(w.getPixelOrigin()),r).round(),p.zoom=r,this._setZoomTransform(p,w.getCenter(),w.getZoom()),I(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:I,_onRemoveLevel:I,_onCreateLevel:I,_pruneTiles:function(){if(this._map){var r,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)l=this._tiles[r],l.retain=l.current;for(r in this._tiles)if(l=this._tiles[r],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var l in this._tiles)this._tiles[l].coords.z===r&&this._removeTile(l)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)ut(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,l,d,p){var w=Math.floor(r/2),b=Math.floor(l/2),z=d-1,$=new X(+w,+b);$.z=+z;var J=this._tileCoordsToKey($),oe=this._tiles[J];return oe&&oe.active?(oe.retain=!0,!0):(oe&&oe.loaded&&(oe.retain=!0),z>p?this._retainParent(w,b,z,p):!1)},_retainChildren:function(r,l,d,p){for(var w=2*r;w<2*r+2;w++)for(var b=2*l;b<2*l+2;b++){var z=new X(w,b);z.z=d+1;var $=this._tileCoordsToKey(z),J=this._tiles[$];if(J&&J.active){J.retain=!0;continue}else J&&J.loaded&&(J.retain=!0);d+1<p&&this._retainChildren(w,b,d+1,p)}},_resetView:function(r){var l=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var l=this.options;return l.minNativeZoom!==void 0&&r<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<r?l.maxNativeZoom:r},_setView:function(r,l,d,p){var w=Math.round(l);this.options.maxZoom!==void 0&&w>this.options.maxZoom||this.options.minZoom!==void 0&&w<this.options.minZoom?w=void 0:w=this._clampZoom(w);var b=this.options.updateWhenZooming&&w!==this._tileZoom;(!p||b)&&(this._tileZoom=w,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),w!==void 0&&this._update(r),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(r,l)},_setZoomTransforms:function(r,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],r,l)},_setZoomTransform:function(r,l,d){var p=this._map.getZoomScale(d,r.zoom),w=r.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();ve.any3d?Gn(r.el,w,p):Lt(r.el,w)},_resetGrid:function(){var r=this._map,l=r.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,w=this._map.getPixelWorldBounds(this._tileZoom);w&&(this._globalTileRange=this._pxBoundsToTileRange(w)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(r.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(r.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),w=l.project(r,this._tileZoom).floor(),b=l.getSize().divideBy(p*2);return new O(w.subtract(b),w.add(b))},_update:function(r){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(r===void 0&&(r=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(r),w=this._pxBoundsToTileRange(p),b=w.getCenter(),z=[],$=this.options.keepBuffer,J=new O(w.getBottomLeft().subtract([$,-$]),w.getTopRight().add([$,-$]));if(!(isFinite(w.min.x)&&isFinite(w.min.y)&&isFinite(w.max.x)&&isFinite(w.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var oe in this._tiles){var Ee=this._tiles[oe].coords;(Ee.z!==this._tileZoom||!J.contains(new X(Ee.x,Ee.y)))&&(this._tiles[oe].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(r,d);return}for(var Ve=w.min.y;Ve<=w.max.y;Ve++)for(var Xe=w.min.x;Xe<=w.max.x;Xe++){var sn=new X(Xe,Ve);if(sn.z=this._tileZoom,!!this._isValidTile(sn)){var Yt=this._tiles[this._tileCoordsToKey(sn)];Yt?Yt.current=!0:z.push(sn)}}if(z.sort(function(Dn,po){return Dn.distanceTo(b)-po.distanceTo(b)}),z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var er=document.createDocumentFragment();for(Xe=0;Xe<z.length;Xe++)this._addTile(z[Xe],er);this._level.el.appendChild(er)}}}},_isValidTile:function(r){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(r.x<d.min.x||r.x>d.max.x)||!l.wrapLat&&(r.y<d.min.y||r.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(r);return ye(this.options.bounds).overlaps(p)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var l=this._map,d=this.getTileSize(),p=r.scaleBy(d),w=p.add(d),b=l.unproject(p,r.z),z=l.unproject(w,r.z);return[b,z]},_tileCoordsToBounds:function(r){var l=this._tileCoordsToNwSe(r),d=new fe(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var l=r.split(":"),d=new X(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(r){var l=this._tiles[r];l&&(ut(l.el),delete this._tiles[r],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){Ie(r,"leaflet-tile");var l=this.getTileSize();r.style.width=l.x+"px",r.style.height=l.y+"px",r.onselectstart=I,r.onmousemove=I,ve.ielt9&&this.options.opacity<1&&cn(r,this.options.opacity)},_addTile:function(r,l){var d=this._getTilePos(r),p=this._tileCoordsToKey(r),w=this.createTile(this._wrapCoords(r),m(this._tileReady,this,r));this._initTile(w),this.createTile.length<2&&V(m(this._tileReady,this,r,null,w)),Lt(w,d),this._tiles[p]={el:w,coords:r,current:!0},l.appendChild(w),this.fire("tileloadstart",{tile:w,coords:r})},_tileReady:function(r,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:r});var p=this._tileCoordsToKey(r);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(cn(d.el,0),U(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(Ie(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ve.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(m(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var l=new X(this._wrapX?P(r.x,this._wrapX):r.x,this._wrapY?P(r.y,this._wrapY):r.y);return l.z=r.z,l},_pxBoundsToTileRange:function(r){var l=this.getTileSize();return new O(r.min.unscaleBy(l).floor(),r.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function co(r){return new $i(r)}var Gi=$i.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,l){this._url=r,l=ne(this,l),l.detectRetina&&ve.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,l){return this._url===r&&l===void 0&&(l=!0),this._url=r,l||this.redraw(),this},createTile:function(r,l){var d=document.createElement("img");return ze(d,"load",m(this._tileOnLoad,this,l,d)),ze(d,"error",m(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(r),d},getTileUrl:function(r){var l={r:ve.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-r.y;this.options.tms&&(l.y=d),l["-y"]=d}return me(this._url,a(l,this.options))},_tileOnLoad:function(r,l){ve.ielt9?setTimeout(m(r,this,null,l),0):r(null,l)},_tileOnError:function(r,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),r(d,l)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(r=l-r),r+p},_getSubdomain:function(r){var l=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var r,l;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(l=this._tiles[r].el,l.onload=I,l.onerror=I,!l.complete)){l.src=De;var d=this._tiles[r].coords;ut(l),delete this._tiles[r],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(r){var l=this._tiles[r];if(l)return l.el.setAttribute("src",De),$i.prototype._removeTile.call(this,r)},_tileReady:function(r,l,d){if(!(!this._map||d&&d.getAttribute("src")===De))return $i.prototype._tileReady.call(this,r,l,d)}});function Kl(r,l){return new Gi(r,l)}var ha=Gi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,l){this._url=r;var d=a({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=ne(this,l);var w=l.detectRetina&&ve.retina?2:1,b=this.getTileSize();d.width=b.x*w,d.height=b.y*w,this.wmsParams=d},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Gi.prototype.onAdd.call(this,r)},getTileUrl:function(r){var l=this._tileCoordsToNwSe(r),d=this._crs,p=Y(d.project(l[0]),d.project(l[1])),w=p.min,b=p.max,z=(this._wmsVersion>=1.3&&this._crs===io?[w.y,w.x,b.y,b.x]:[w.x,w.y,b.x,b.y]).join(","),$=Gi.prototype.getTileUrl.call(this,r);return $+te(this.wmsParams,$,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+z},setParams:function(r,l){return a(this.wmsParams,r),l||this.redraw(),this}});function nc(r,l){return new ha(r,l)}Gi.WMS=ha,Kl.wms=nc;var si=Lr.extend({options:{padding:.1},initialize:function(r){ne(this,r),E(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ie(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),w=this._map.project(this._center,l),b=p.multiplyBy(-d).add(w).subtract(this._map._getNewPixelOrigin(r,l));ve.any3d?Gn(this._container,b,d):Lt(this._container,b)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-r)).round();this._bounds=new O(d,d.add(l.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ql=si.extend({options:{tolerance:0},getEvents:function(){var r=si.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){si.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");ze(r,"mousemove",this._onMouseMove,this),ze(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ze(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){U(this._redrawRequest),delete this._ctx,ut(this._container),_t(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var l in this._layers)r=this._layers[l],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){si.prototype._update.call(this);var r=this._bounds,l=this._container,d=r.getSize(),p=ve.retina?2:1;Lt(l,r.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",ve.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){si.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[E(r)]=r;var l=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var l=r._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete r._order,delete this._layers[E(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var l=r.options.dashArray.split(/[, ]+/),d=[],p,w;for(w=0;w<l.length;w++){if(p=Number(l[w]),isNaN(p))return;d.push(p)}r.options._dashArray=d}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var l=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new O,this._redrawBounds.extend(r._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(r._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var l=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)r=p.layer,(!l||r._pxBounds&&r._pxBounds.intersects(l))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,l){if(this._drawing){var d,p,w,b,z=r._parts,$=z.length,J=this._ctx;if($){for(J.beginPath(),d=0;d<$;d++){for(p=0,w=z[d].length;p<w;p++)b=z[d][p],J[p?"lineTo":"moveTo"](b.x,b.y);l&&J.closePath()}this._fillStroke(J,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var l=r._point,d=this._ctx,p=Math.max(Math.round(r._radius),1),w=(Math.max(Math.round(r._radiusY),1)||p)/p;w!==1&&(d.save(),d.scale(1,w)),d.beginPath(),d.arc(l.x,l.y/w,p,0,Math.PI*2,!1),w!==1&&d.restore(),this._fillStroke(d,r)}},_fillStroke:function(r,l){var d=l.options;d.fill&&(r.globalAlpha=d.fillOpacity,r.fillStyle=d.fillColor||d.color,r.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(r.setLineDash&&r.setLineDash(l.options&&l.options._dashArray||[]),r.globalAlpha=d.opacity,r.lineWidth=d.weight,r.strokeStyle=d.color,r.lineCap=d.lineCap,r.lineJoin=d.lineJoin,r.stroke())},_onClick:function(r){for(var l=this._map.mouseEventToLayerPoint(r),d,p,w=this._drawFirst;w;w=w.next)d=w.layer,d.options.interactive&&d._containsPoint(l)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,l)}},_handleMouseOut:function(r){var l=this._hoveredLayer;l&&(gt(this._container,"leaflet-interactive"),this._fireEvent([l],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,l){if(!this._mouseHoverThrottled){for(var d,p,w=this._drawFirst;w;w=w.next)d=w.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(r),p&&(Ie(this._container,"leaflet-interactive"),this._fireEvent([p],r,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(m(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,l,d){this._map._fireDOMEvent(l,d||l.type,r)},_bringToFront:function(r){var l=r._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(r)}},_bringToBack:function(r){var l=r._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(r)}}});function Yl(r){return ve.canvas?new Ql(r):null}var ho=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),rc={_initContainer:function(){this._container=Ke("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(si.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var l=r._container=ho("shape");Ie(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",r._path=ho("path"),l.appendChild(r._path),this._updateStyle(r),this._layers[E(r)]=r},_addPath:function(r){var l=r._container;this._container.appendChild(l),r.options.interactive&&r.addInteractiveTarget(l)},_removePath:function(r){var l=r._container;ut(l),r.removeInteractiveTarget(l),delete this._layers[E(r)]},_updateStyle:function(r){var l=r._stroke,d=r._fill,p=r.options,w=r._container;w.stroked=!!p.stroke,w.filled=!!p.fill,p.stroke?(l||(l=r._stroke=ho("stroke")),w.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=we(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(w.removeChild(l),r._stroke=null),p.fill?(d||(d=r._fill=ho("fill")),w.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(w.removeChild(d),r._fill=null)},_updateCircle:function(r){var l=r._point.round(),d=Math.round(r._radius),p=Math.round(r._radiusY||d);this._setPath(r,r._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(r,l){r._path.v=l},_bringToFront:function(r){pr(r._container)},_bringToBack:function(r){Tn(r._container)}},Dr=ve.vml?ho:us,Ps=si.extend({_initContainer:function(){this._container=Dr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Dr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ut(this._container),_t(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){si.prototype._update.call(this);var r=this._bounds,l=r.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),Lt(d,r.min),d.setAttribute("viewBox",[r.min.x,r.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(r){var l=r._path=Dr("path");r.options.className&&Ie(l,r.options.className),r.options.interactive&&Ie(l,"leaflet-interactive"),this._updateStyle(r),this._layers[E(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){ut(r._path),r.removeInteractiveTarget(r._path),delete this._layers[E(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var l=r._path,d=r.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(r,l){this._setPath(r,Ur(r._parts,l))},_updateCircle:function(r){var l=r._point,d=Math.max(Math.round(r._radius),1),p=Math.max(Math.round(r._radiusY),1)||d,w="a"+d+","+p+" 0 1,0 ",b=r._empty()?"M0 0":"M"+(l.x-d)+","+l.y+w+d*2+",0 "+w+-d*2+",0 ";this._setPath(r,b)},_setPath:function(r,l){r._path.setAttribute("d",l)},_bringToFront:function(r){pr(r._path)},_bringToBack:function(r){Tn(r._path)}});ve.vml&&Ps.include(rc);function Xa(r){return ve.svg||ve.vml?new Ps(r):null}et.include({getRenderer:function(r){var l=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var l=this._paneRenderers[r];return l===void 0&&(l=this._createRenderer({pane:r}),this._paneRenderers[r]=l),l},_createRenderer:function(r){return this.options.preferCanvas&&Yl(r)||Xa(r)}});var ic=Ei.extend({initialize:function(r,l){Ei.prototype.initialize.call(this,this._boundsToLatLngs(r),l)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=ye(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function td(r,l){return new ic(r,l)}Ps.create=Dr,Ps.pointsToPath=Ur,ri.geometryToLayer=oo,ri.coordsToLatLng=$a,ri.coordsToLatLngs=ua,ri.latLngToCoords=Ga,ri.latLngsToCoords=Za,ri.getFeature=ao,ri.asFeature=Ka,et.mergeOptions({boxZoom:!0});var fo=xn.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){ze(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){_t(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ut(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Je(),_s(),this._startPoint=this._map.mouseEventToContainerPoint(r),ze(document,{contextmenu:Nn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=Ke("div","leaflet-zoom-box",this._container),Ie(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var l=new O(this._point,this._startPoint),d=l.getSize();Lt(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(ut(this._box),gt(this._container,"leaflet-crosshair")),Rn(),ys(),_t(document,{contextmenu:Nn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(m(this._resetState,this),0);var l=new fe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});et.addInitHook("addHandler","boxZoom",fo),et.mergeOptions({doubleClickZoom:!0});var sc=xn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,w=r.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(w):l.setZoomAround(r.containerPoint,w)}});et.addInitHook("addHandler","doubleClickZoom",sc),et.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Xl=xn.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Mn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}Ie(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){gt(this._map._container,"leaflet-grab"),gt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=ye(this._map.options.maxBounds);this._offsetLimit=Y(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,l){return r-(r-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;r.x<l.min.x&&(r.x=this._viscousLimit(r.x,l.min.x)),r.y<l.min.y&&(r.y=this._viscousLimit(r.y,l.min.y)),r.x>l.max.x&&(r.x=this._viscousLimit(r.x,l.max.x)),r.y>l.max.y&&(r.y=this._viscousLimit(r.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,l=Math.round(r/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,w=(p-l+d)%r+l-d,b=(p+l+d)%r-l-d,z=Math.abs(w+d)<Math.abs(b+d)?w:b;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=z},_onDragEnd:function(r){var l=this._map,d=l.options,p=!d.inertia||r.noInertia||this._times.length<2;if(l.fire("dragend",r),p)l.fire("moveend");else{this._prunePositions(+new Date);var w=this._lastPos.subtract(this._positions[0]),b=(this._lastTime-this._times[0])/1e3,z=d.easeLinearity,$=w.multiplyBy(z/b),J=$.distanceTo([0,0]),oe=Math.min(d.inertiaMaxSpeed,J),Ee=$.multiplyBy(oe/J),Ve=oe/(d.inertiaDeceleration*z),Xe=Ee.multiplyBy(-Ve/2).round();!Xe.x&&!Xe.y?l.fire("moveend"):(Xe=l._limitOffset(Xe,l.options.maxBounds),V(function(){l.panBy(Xe,{duration:Ve,easeLinearity:z,noMoveStart:!0,animate:!0})}))}}});et.addInitHook("addHandler","dragging",Xl),et.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Jl=xn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),ze(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),_t(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,l=document.documentElement,d=r.scrollTop||l.scrollTop,p=r.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var l=this._panKeys={},d=this.keyCodes,p,w;for(p=0,w=d.left.length;p<w;p++)l[d.left[p]]=[-1*r,0];for(p=0,w=d.right.length;p<w;p++)l[d.right[p]]=[r,0];for(p=0,w=d.down.length;p<w;p++)l[d.down[p]]=[0,r];for(p=0,w=d.up.length;p<w;p++)l[d.up[p]]=[0,-1*r]},_setZoomDelta:function(r){var l=this._zoomKeys={},d=this.keyCodes,p,w;for(p=0,w=d.zoomIn.length;p<w;p++)l[d.zoomIn[p]]=r;for(p=0,w=d.zoomOut.length;p<w;p++)l[d.zoomOut[p]]=-r},_addHooks:function(){ze(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){_t(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var l=r.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],r.shiftKey&&(p=re(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(re(p),d.options.maxBounds)),d.options.worldCopyJump){var w=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(w)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;Nn(r)}}});et.addInitHook("addHandler","keyboard",Jl),et.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xt=xn.extend({addHooks:function(){ze(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){_t(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var l=na(r),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(m(this._performZoom,this),p),Nn(r)},_performZoom:function(){var r=this._map,l=r.getZoom(),d=this._map.options.zoomSnap||0;r._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),w=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,b=d?Math.ceil(w/d)*d:w,z=r._limitZoom(l+(this._delta>0?b:-b))-l;this._delta=0,this._startTime=null,z&&(r.options.scrollWheelZoom==="center"?r.setZoom(l+z):r.setZoomAround(this._lastMousePos,l+z))}});et.addInitHook("addHandler","scrollWheelZoom",xt);var eu=600;et.mergeOptions({tapHold:ve.touchNative&&ve.safari&&ve.mobile,tapTolerance:15});var da=xn.extend({addHooks:function(){ze(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){_t(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var l=r.touches[0];this._startPos=this._newPos=new X(l.clientX,l.clientY),this._holdTimeout=setTimeout(m(function(){this._cancel(),this._isTapValid()&&(ze(document,"touchend",bt),ze(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),eu),ze(document,"touchend touchcancel contextmenu",this._cancel,this),ze(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){_t(document,"touchend",bt),_t(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),_t(document,"touchend touchcancel contextmenu",this._cancel,this),_t(document,"touchmove",this._onMove,this)},_onMove:function(r){var l=r.touches[0];this._newPos=new X(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,l){var d=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});et.addInitHook("addHandler","tapHold",da),et.mergeOptions({touchZoom:ve.touch,bounceAtZoomLimits:!0});var mo=xn.extend({addHooks:function(){Ie(this._map._container,"leaflet-touch-zoom"),ze(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){gt(this._map._container,"leaflet-touch-zoom"),_t(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var l=this._map;if(!(!r.touches||r.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(r.touches[0]),p=l.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),ze(document,"touchmove",this._onTouchMove,this),ze(document,"touchend touchcancel",this._onTouchEnd,this),bt(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(r.touches[0]),p=l.mouseEventToContainerPoint(r.touches[1]),w=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(w,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&w<1||this._zoom>l.getMaxZoom()&&w>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,w===1)return}else{var b=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(w===1&&b.x===0&&b.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(b),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),U(this._animRequest);var z=m(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(z,this,!0),bt(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,U(this._animRequest),_t(document,"touchmove",this._onTouchMove,this),_t(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});et.addInitHook("addHandler","touchZoom",mo),et.BoxZoom=fo,et.DoubleClickZoom=sc,et.Drag=Xl,et.Keyboard=Jl,et.ScrollWheelZoom=xt,et.TapHold=da,et.TouchZoom=mo,t.Bounds=O,t.Browser=ve,t.CRS=Ze,t.Canvas=Ql,t.Circle=Ha,t.CircleMarker=Wa,t.Class=Ge,t.Control=hn,t.DivIcon=Ya,t.DivOverlay=ii,t.DomEvent=Jr,t.DomUtil=vs,t.Draggable=Mn,t.Evented=ge,t.FeatureGroup=vi,t.GeoJSON=ri,t.GridLayer=$i,t.Handler=xn,t.Icon=Ss,t.ImageOverlay=qi,t.LatLng=Te,t.LatLngBounds=fe,t.Layer=Lr,t.LayerGroup=Wi,t.LineUtil=Xn,t.Map=et,t.Marker=wi,t.Mixin=Js,t.Path=Hi,t.Point=X,t.PolyUtil=no,t.Polygon=Ei,t.Polyline=Jn,t.Popup=Qa,t.PosAnimation=Ts,t.Projection=ni,t.Rectangle=ic,t.Renderer=si,t.SVG=Ps,t.SVGOverlay=Gl,t.TileLayer=Gi,t.Tooltip=uo,t.Transformation=jr,t.Util=N,t.VideoOverlay=$l,t.bind=m,t.bounds=Y,t.canvas=Yl,t.circle=la,t.circleMarker=Yu,t.control=Yn,t.divIcon=tc,t.extend=a,t.featureGroup=Ku,t.geoJSON=Xu,t.geoJson=Mr,t.gridLayer=co,t.icon=Qu,t.imageOverlay=Ju,t.latLng=ce,t.latLngBounds=ye,t.layerGroup=aa,t.map=Qn,t.marker=Xh,t.point=re,t.polygon=ed,t.polyline=Jh,t.popup=lo,t.rectangle=td,t.setOptions=ne,t.stamp=E,t.svg=Xa,t.svgOverlay=Zl,t.tileLayer=Kl,t.tooltip=ca,t.transformation=ir,t.version=s,t.videoOverlay=ec;var oc=window.L;t.noConflict=function(){return window.L=oc,this},window.L=t}))})(yu,yu.exports)),yu.exports}var $w=qw();const zs=tm($w);function Gw({reports:i,onReportClick:e,onMapClick:t,selectedLocation:s,userLocation:a,zoom:c=16}){const m=tt.useRef(null),v=tt.useRef(null),E=tt.useRef([]),x=P=>{let I="#3b82f6",R="";return P.mode==="suggestion"?(I="#4f46e5",R="",zs.divIcon({html:`<div style="background-color: ${I}; border-radius: 50%; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.3); font-size: 16px;">${R}</div>`,className:"custom-marker",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-16]})):(P.status==="nouveau"?(I="#ef4444",R=""):P.status==="en_cours"?(I="#f59e0b",R=""):P.status==="resolu"&&(I="#10b981",R=""),P.type==="vandalisme"&&(R=""),zs.divIcon({html:`<div style="background-color: ${I}; border-radius: 50%; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.3); font-size: 16px;">${R}</div>`,className:"custom-marker",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-16]}))};return tt.useEffect(()=>{if(!m.current||v.current)return;const P=zs.map(m.current).setView([a.lat,a.lng],c??19);return zs.tileLayer("https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',maxZoom:20}).addTo(P),v.current=P,setTimeout(()=>P.invalidateSize(),0),()=>{P.remove(),v.current=null}},[]),tt.useEffect(()=>{if(!v.current)return;const P=v.current,I=R=>{t==null||t(R.latlng.lat,R.latlng.lng)};return P.on("click",I),()=>{P.off("click",I)}},[t]),tt.useEffect(()=>{if(!v.current||!a)return;v.current.setView([a.lat,a.lng],15,{animate:!0});const P=v.current._userMarker;P&&v.current.removeLayer(P);const I=zs.marker([a.lat,a.lng],{icon:zs.divIcon({html:'<div style="background:#2563eb;width:14px;height:14px;border-radius:999px;border:3px solid white;box-shadow:0 2px 10px rgba(0,0,0,.25)"></div>',className:"",iconSize:[14,14],iconAnchor:[7,7]})}).addTo(v.current);v.current._userMarker=I},[a]),tt.useEffect(()=>{v.current&&(E.current.forEach(P=>P.remove()),E.current=[],i.forEach(P=>{const I=zs.marker([P.location.lat,P.location.lng],{icon:x(P)}).addTo(v.current),R=P.mode==="probleme"?" Problme":P.mode==="mobilier"?" Mobilier OK":" Suggestion",q=`
        <div style="min-width: 200px;">
          <img src="${P.photo}" style="width: 100%; height: 128px; object-fit: cover; border-radius: 4px; margin-bottom: 8px;" />
          <h3 style="font-weight: 600;">${P.description}</h3>
          <div style="display: flex; gap: 8px; font-size: 12px; margin-top: 8px;">
            <span style="padding: 4px 8px; border-radius: 4px; background: #eee;">${P.status}</span>
            <span style="padding: 4px 8px; border-radius: 4px; background: #eee;">${R}</span>
          </div>
        </div>
      `;I.bindPopup(q),e&&I.on("click",()=>e(P)),E.current.push(I)}))},[i,e]),tt.useEffect(()=>{if(!v.current)return;const P=v.current._locationMarker;if(P&&v.current.removeLayer(P),s){const I=zs.marker([s.lat,s.lng],{icon:zs.divIcon({html:'<div style="background-color: #8b5cf6; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border: 4px solid white; box-shadow: 0 2px 12px rgba(139,92,246,0.5); font-size: 20px;"></div>',className:"custom-marker pulse-marker",iconSize:[40,40],iconAnchor:[20,20]})}).addTo(v.current);v.current._locationMarker=I}},[s]),tt.useEffect(()=>{v.current&&v.current.setView([a.lat,a.lng],c,{animate:!0})},[a,c]),A.jsx("div",{ref:m,style:{height:"100%",width:"100%"},className:"z-0"})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Kw=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Dg=i=>{const e=Kw(i);return e.charAt(0).toUpperCase()+e.slice(1)},wy=(...i)=>i.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=tt.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:c,iconNode:m,...v},E)=>tt.createElement("svg",{ref:E,...Qw,width:e,height:e,stroke:i,strokeWidth:s?Number(t)*24/Number(e):t,className:wy("lucide",a),...v},[...m.map(([x,P])=>tt.createElement(x,P)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=(i,e)=>{const t=tt.forwardRef(({className:s,...a},c)=>tt.createElement(Yw,{ref:c,iconNode:e,className:wy(`lucide-${Zw(Dg(i))}`,`lucide-${i}`,s),...a}));return t.displayName=Dg(i),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Jw=rr("arrow-right",Xw);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],tE=rr("award",eE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ey=rr("calendar",nE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],iE=rr("camera",rE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],oE=rr("check",sE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ty=rr("circle-alert",aE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],xy=rr("circle-check-big",lE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],cE=rr("funnel",uE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],rm=rr("map-pin",hE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],ff=rr("thumbs-up",dE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],mE=rr("trending-up",fE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],gE=rr("triangle-alert",pE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],im=rr("user",_E);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],vE=rr("wrench",yE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],sm=rr("x",wE),EE=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(`
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="700" viewBox="0 0 1200 700">
  <defs>
    <linearGradient id="g" x1="0" x2="1" y1="0" y2="1">
      <stop offset="0" stop-color="#EEF2FF"/>
      <stop offset="1" stop-color="#E0E7FF"/>
    </linearGradient>
  </defs>
  <rect width="1200" height="700" fill="url(#g)"/>
  <g fill="#4F46E5" opacity="0.12">
    <circle cx="180" cy="140" r="110"/>
    <circle cx="1040" cy="170" r="130"/>
    <circle cx="980" cy="560" r="150"/>
    <circle cx="220" cy="540" r="150"/>
  </g>
  <g font-family="Poppins, Arial, sans-serif" text-anchor="middle">
    <text x="600" y="330" font-size="44" fill="#111827" font-weight="700">Suggestion</text>
    <text x="600" y="390" font-size="22" fill="#374151">Ajoute une photo si tu veux (facultatif)</text>
  </g>
</svg>
`)}`;function TE({onSubmit:i,onCancel:e,initialLocation:t,onLocationSelect:s}){const[a,c]=tt.useState("probleme"),[m,v]=tt.useState("usure"),[E,x]=tt.useState("autre"),[P,I]=tt.useState(""),[R,q]=tt.useState(""),[Q,ne]=tt.useState(null),te=async xe=>{var Oe;const De=(Oe=xe.target.files)==null?void 0:Oe[0];if(De)try{const F=await ke(De,1024,1024,.65);q(F),me()}catch(F){console.error("Erreur traitement photo:",F),alert("Impossible de traiter la photo.")}};async function ke(xe,De=1024,Oe=1024,F=.65){const k=document.createElement("img"),D=URL.createObjectURL(xe);await new Promise((at,Ce)=>{k.onload=()=>at(),k.onerror=()=>Ce(new Error("Image load failed")),k.src=D});let{width:B,height:V}=k;const U=Math.min(De/B,Oe/V,1);B=Math.round(B*U),V=Math.round(V*U);const N=document.createElement("canvas");N.width=B,N.height=V;const Ge=N.getContext("2d");if(!Ge)throw new Error("Canvas context not available");return Ge.drawImage(k,0,0,B,V),URL.revokeObjectURL(D),N.toDataURL("image/jpeg",F)}const me=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(xe=>{const De={lat:xe.coords.latitude,lng:xe.coords.longitude};ne(De)},xe=>{console.error("Erreur de golocalisation:",xe),ne({lat:50.6292,lng:3.0573})},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0}):ne({lat:50.6292,lng:3.0573})},we=xe=>{if(xe.preventDefault(),!Q||!P){alert("Veuillez remplir tous les champs obligatoires");return}if(a!=="suggestion"&&!R){alert("Veuillez ajouter une photo");return}i({mode:a,type:a==="probleme"?m:void 0,category:E,description:P,photo:R||EE,location:Q})};return A.jsx("div",{className:"px-4 pb-4",children:A.jsxs("form",{onSubmit:we,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium mb-2",children:"Type de signalement"}),A.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[A.jsxs("button",{type:"button",onClick:()=>c("probleme"),className:`py-3 px-3 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2 ${a==="probleme"?"bg-red-500 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[A.jsx(gE,{size:18}),"Problme"]}),A.jsxs("button",{type:"button",onClick:()=>c("mobilier"),className:`py-3 px-3 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2 ${a==="mobilier"?"bg-green-500 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[A.jsx(xy,{size:18}),"Mobilier OK"]}),A.jsxs("button",{type:"button",onClick:()=>c("suggestion"),className:`py-3 px-3 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2 ${a==="suggestion"?"bg-indigo-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[A.jsx("span",{className:"text-base leading-none",children:""}),"Suggestion"]})]}),A.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[A.jsx("span",{className:"font-medium",children:"Suggestion"})," = proposer un nouveau mobilier, un amnagement, une ide pour simplifier la mobilit"]})]}),a==="probleme"&&A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium mb-2",children:"Type de problme"}),A.jsx("div",{className:"grid grid-cols-2 gap-2",children:["usure","vandalisme"].map(xe=>A.jsx("button",{type:"button",onClick:()=>v(xe),className:`py-2 px-3 rounded-lg text-sm font-medium transition-colors ${m===xe?"bg-orange-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:xe.charAt(0).toUpperCase()+xe.slice(1)},xe))})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium mb-2",children:"Catgorie"}),A.jsxs("select",{value:E,onChange:xe=>x(xe.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[A.jsx("option",{value:"mobilier",children:"Mobilier urbain"}),A.jsx("option",{value:"signalisation",children:"Signalisation"}),A.jsx("option",{value:"mobilite",children:"Mobilit"}),A.jsx("option",{value:"autre",children:"Autre"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),A.jsx("textarea",{value:P,onChange:xe=>I(xe.target.value),placeholder:a==="probleme"?"Dcrivez le problme constat...":a==="mobilier"?"Dcrivez le mobilier (ex: Banc en bois, Panneau d'information...)":"Dcrivez votre ide (ex: ajouter un banc, crer une rampe, amliorer un passage piton...)",rows:3,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium mb-2",children:"Photo"}),a==="suggestion"&&A.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Optionnelle (tu peux illustrer lendroit ou lide)."}),R?A.jsxs("div",{className:"relative",children:[A.jsx("img",{src:R,alt:"Preview",className:"w-full h-48 object-cover rounded-lg"}),Q&&A.jsxs("div",{className:"absolute bottom-2 left-2 bg-green-500 text-white px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1 shadow-lg",children:[A.jsx(rm,{size:14}),"Position capture"]}),A.jsx("button",{type:"button",onClick:()=>{q(""),ne(null)},className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600",children:A.jsx(sm,{size:16})})]}):A.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[A.jsx(iE,{size:32,className:"text-gray-400 mb-2"}),A.jsx("span",{className:"text-sm text-gray-500",children:"Cliquez pour prendre une photo"}),A.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:te,hidden:!0})]})]}),A.jsxs("div",{className:"flex gap-3 pt-2",children:[A.jsx("button",{type:"button",onClick:e,className:"flex-1 py-3 px-4 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300",children:"Rinitialiser"}),A.jsxs("button",{type:"submit",className:"flex-1 py-3 px-4 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 flex items-center justify-center gap-2",children:[A.jsx(oE,{size:20}),"Envoyer"]})]})]})})}function Ni(i){const e=Object.prototype.toString.call(i);return i instanceof Date||typeof i=="object"&&e==="[object Date]"?new i.constructor(+i):typeof i=="number"||e==="[object Number]"||typeof i=="string"||e==="[object String]"?new Date(i):new Date(NaN)}function Aa(i,e){return i instanceof Date?new i.constructor(e):new Date(e)}const Iy=6048e5,xE=864e5;let IE={};function Rh(){return IE}function Au(i,e){var v,E,x,P;const t=Rh(),s=(e==null?void 0:e.weekStartsOn)??((E=(v=e==null?void 0:e.locale)==null?void 0:v.options)==null?void 0:E.weekStartsOn)??t.weekStartsOn??((P=(x=t.locale)==null?void 0:x.options)==null?void 0:P.weekStartsOn)??0,a=Ni(i),c=a.getDay(),m=(c<s?7:0)+c-s;return a.setDate(a.getDate()-m),a.setHours(0,0,0,0),a}function ch(i){return Au(i,{weekStartsOn:1})}function Sy(i){const e=Ni(i),t=e.getFullYear(),s=Aa(i,0);s.setFullYear(t+1,0,4),s.setHours(0,0,0,0);const a=ch(s),c=Aa(i,0);c.setFullYear(t,0,4),c.setHours(0,0,0,0);const m=ch(c);return e.getTime()>=a.getTime()?t+1:e.getTime()>=m.getTime()?t:t-1}function Og(i){const e=Ni(i);return e.setHours(0,0,0,0),e}function Vg(i){const e=Ni(i),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+i-+t}function SE(i,e){const t=Og(i),s=Og(e),a=+t-Vg(t),c=+s-Vg(s);return Math.round((a-c)/xE)}function PE(i){const e=Sy(i),t=Aa(i,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),ch(t)}function bE(i){return i instanceof Date||typeof i=="object"&&Object.prototype.toString.call(i)==="[object Date]"}function CE(i){if(!bE(i)&&typeof i!="number")return!1;const e=Ni(i);return!isNaN(Number(e))}function AE(i){const e=Ni(i),t=Aa(i,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const kE={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},RE=(i,e,t)=>{let s;const a=kE[i];return typeof a=="string"?s=a:e===1?s=a.one:s=a.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+s:s+" ago":s};function wl(i){return(e={})=>{const t=e.width?String(e.width):i.defaultWidth;return i.formats[t]||i.formats[i.defaultWidth]}}const NE={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},LE={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ME={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},DE={date:wl({formats:NE,defaultWidth:"full"}),time:wl({formats:LE,defaultWidth:"full"}),dateTime:wl({formats:ME,defaultWidth:"full"})},OE={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},VE=(i,e,t,s)=>OE[i];function ts(i){return(e,t)=>{const s=t!=null&&t.context?String(t.context):"standalone";let a;if(s==="formatting"&&i.formattingValues){const m=i.defaultFormattingWidth||i.defaultWidth,v=t!=null&&t.width?String(t.width):m;a=i.formattingValues[v]||i.formattingValues[m]}else{const m=i.defaultWidth,v=t!=null&&t.width?String(t.width):i.defaultWidth;a=i.values[v]||i.values[m]}const c=i.argumentCallback?i.argumentCallback(e):e;return a[c]}}const zE={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},FE={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},jE={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},BE={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},UE={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},WE={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},HE=(i,e)=>{const t=Number(i),s=t%100;if(s>20||s<10)switch(s%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},qE={ordinalNumber:HE,era:ts({values:zE,defaultWidth:"wide"}),quarter:ts({values:FE,defaultWidth:"wide",argumentCallback:i=>i-1}),month:ts({values:jE,defaultWidth:"wide"}),day:ts({values:BE,defaultWidth:"wide"}),dayPeriod:ts({values:UE,defaultWidth:"wide",formattingValues:WE,defaultFormattingWidth:"wide"})};function ns(i){return(e,t={})=>{const s=t.width,a=s&&i.matchPatterns[s]||i.matchPatterns[i.defaultMatchWidth],c=e.match(a);if(!c)return null;const m=c[0],v=s&&i.parsePatterns[s]||i.parsePatterns[i.defaultParseWidth],E=Array.isArray(v)?GE(v,I=>I.test(m)):$E(v,I=>I.test(m));let x;x=i.valueCallback?i.valueCallback(E):E,x=t.valueCallback?t.valueCallback(x):x;const P=e.slice(m.length);return{value:x,rest:P}}}function $E(i,e){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&e(i[t]))return t}function GE(i,e){for(let t=0;t<i.length;t++)if(e(i[t]))return t}function Py(i){return(e,t={})=>{const s=e.match(i.matchPattern);if(!s)return null;const a=s[0],c=e.match(i.parsePattern);if(!c)return null;let m=i.valueCallback?i.valueCallback(c[0]):c[0];m=t.valueCallback?t.valueCallback(m):m;const v=e.slice(a.length);return{value:m,rest:v}}}const ZE=/^(\d+)(th|st|nd|rd)?/i,KE=/\d+/i,QE={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},YE={any:[/^b/i,/^(a|c)/i]},XE={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},JE={any:[/1/i,/2/i,/3/i,/4/i]},eT={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},tT={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},nT={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rT={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},iT={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},sT={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},oT={ordinalNumber:Py({matchPattern:ZE,parsePattern:KE,valueCallback:i=>parseInt(i,10)}),era:ns({matchPatterns:QE,defaultMatchWidth:"wide",parsePatterns:YE,defaultParseWidth:"any"}),quarter:ns({matchPatterns:XE,defaultMatchWidth:"wide",parsePatterns:JE,defaultParseWidth:"any",valueCallback:i=>i+1}),month:ns({matchPatterns:eT,defaultMatchWidth:"wide",parsePatterns:tT,defaultParseWidth:"any"}),day:ns({matchPatterns:nT,defaultMatchWidth:"wide",parsePatterns:rT,defaultParseWidth:"any"}),dayPeriod:ns({matchPatterns:iT,defaultMatchWidth:"any",parsePatterns:sT,defaultParseWidth:"any"})},aT={code:"en-US",formatDistance:RE,formatLong:DE,formatRelative:VE,localize:qE,match:oT,options:{weekStartsOn:0,firstWeekContainsDate:1}};function lT(i){const e=Ni(i);return SE(e,AE(e))+1}function uT(i){const e=Ni(i),t=+ch(e)-+PE(e);return Math.round(t/Iy)+1}function by(i,e){var P,I,R,q;const t=Ni(i),s=t.getFullYear(),a=Rh(),c=(e==null?void 0:e.firstWeekContainsDate)??((I=(P=e==null?void 0:e.locale)==null?void 0:P.options)==null?void 0:I.firstWeekContainsDate)??a.firstWeekContainsDate??((q=(R=a.locale)==null?void 0:R.options)==null?void 0:q.firstWeekContainsDate)??1,m=Aa(i,0);m.setFullYear(s+1,0,c),m.setHours(0,0,0,0);const v=Au(m,e),E=Aa(i,0);E.setFullYear(s,0,c),E.setHours(0,0,0,0);const x=Au(E,e);return t.getTime()>=v.getTime()?s+1:t.getTime()>=x.getTime()?s:s-1}function cT(i,e){var v,E,x,P;const t=Rh(),s=(e==null?void 0:e.firstWeekContainsDate)??((E=(v=e==null?void 0:e.locale)==null?void 0:v.options)==null?void 0:E.firstWeekContainsDate)??t.firstWeekContainsDate??((P=(x=t.locale)==null?void 0:x.options)==null?void 0:P.firstWeekContainsDate)??1,a=by(i,e),c=Aa(i,0);return c.setFullYear(a,0,s),c.setHours(0,0,0,0),Au(c,e)}function hT(i,e){const t=Ni(i),s=+Au(t,e)-+cT(t,e);return Math.round(s/Iy)+1}function Et(i,e){const t=i<0?"-":"",s=Math.abs(i).toString().padStart(e,"0");return t+s}const ko={y(i,e){const t=i.getFullYear(),s=t>0?t:1-t;return Et(e==="yy"?s%100:s,e.length)},M(i,e){const t=i.getMonth();return e==="M"?String(t+1):Et(t+1,2)},d(i,e){return Et(i.getDate(),e.length)},a(i,e){const t=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(i,e){return Et(i.getHours()%12||12,e.length)},H(i,e){return Et(i.getHours(),e.length)},m(i,e){return Et(i.getMinutes(),e.length)},s(i,e){return Et(i.getSeconds(),e.length)},S(i,e){const t=e.length,s=i.getMilliseconds(),a=Math.trunc(s*Math.pow(10,t-3));return Et(a,e.length)}},ml={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},zg={G:function(i,e,t){const s=i.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(s,{width:"abbreviated"});case"GGGGG":return t.era(s,{width:"narrow"});case"GGGG":default:return t.era(s,{width:"wide"})}},y:function(i,e,t){if(e==="yo"){const s=i.getFullYear(),a=s>0?s:1-s;return t.ordinalNumber(a,{unit:"year"})}return ko.y(i,e)},Y:function(i,e,t,s){const a=by(i,s),c=a>0?a:1-a;if(e==="YY"){const m=c%100;return Et(m,2)}return e==="Yo"?t.ordinalNumber(c,{unit:"year"}):Et(c,e.length)},R:function(i,e){const t=Sy(i);return Et(t,e.length)},u:function(i,e){const t=i.getFullYear();return Et(t,e.length)},Q:function(i,e,t){const s=Math.ceil((i.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return Et(s,2);case"Qo":return t.ordinalNumber(s,{unit:"quarter"});case"QQQ":return t.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(s,{width:"wide",context:"formatting"})}},q:function(i,e,t){const s=Math.ceil((i.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return Et(s,2);case"qo":return t.ordinalNumber(s,{unit:"quarter"});case"qqq":return t.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(s,{width:"wide",context:"standalone"})}},M:function(i,e,t){const s=i.getMonth();switch(e){case"M":case"MM":return ko.M(i,e);case"Mo":return t.ordinalNumber(s+1,{unit:"month"});case"MMM":return t.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(s,{width:"wide",context:"formatting"})}},L:function(i,e,t){const s=i.getMonth();switch(e){case"L":return String(s+1);case"LL":return Et(s+1,2);case"Lo":return t.ordinalNumber(s+1,{unit:"month"});case"LLL":return t.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(s,{width:"wide",context:"standalone"})}},w:function(i,e,t,s){const a=hT(i,s);return e==="wo"?t.ordinalNumber(a,{unit:"week"}):Et(a,e.length)},I:function(i,e,t){const s=uT(i);return e==="Io"?t.ordinalNumber(s,{unit:"week"}):Et(s,e.length)},d:function(i,e,t){return e==="do"?t.ordinalNumber(i.getDate(),{unit:"date"}):ko.d(i,e)},D:function(i,e,t){const s=lT(i);return e==="Do"?t.ordinalNumber(s,{unit:"dayOfYear"}):Et(s,e.length)},E:function(i,e,t){const s=i.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(s,{width:"short",context:"formatting"});case"EEEE":default:return t.day(s,{width:"wide",context:"formatting"})}},e:function(i,e,t,s){const a=i.getDay(),c=(a-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(c);case"ee":return Et(c,2);case"eo":return t.ordinalNumber(c,{unit:"day"});case"eee":return t.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(a,{width:"short",context:"formatting"});case"eeee":default:return t.day(a,{width:"wide",context:"formatting"})}},c:function(i,e,t,s){const a=i.getDay(),c=(a-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(c);case"cc":return Et(c,e.length);case"co":return t.ordinalNumber(c,{unit:"day"});case"ccc":return t.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(a,{width:"narrow",context:"standalone"});case"cccccc":return t.day(a,{width:"short",context:"standalone"});case"cccc":default:return t.day(a,{width:"wide",context:"standalone"})}},i:function(i,e,t){const s=i.getDay(),a=s===0?7:s;switch(e){case"i":return String(a);case"ii":return Et(a,e.length);case"io":return t.ordinalNumber(a,{unit:"day"});case"iii":return t.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(s,{width:"short",context:"formatting"});case"iiii":default:return t.day(s,{width:"wide",context:"formatting"})}},a:function(i,e,t){const a=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(i,e,t){const s=i.getHours();let a;switch(s===12?a=ml.noon:s===0?a=ml.midnight:a=s/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(i,e,t){const s=i.getHours();let a;switch(s>=17?a=ml.evening:s>=12?a=ml.afternoon:s>=4?a=ml.morning:a=ml.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(i,e,t){if(e==="ho"){let s=i.getHours()%12;return s===0&&(s=12),t.ordinalNumber(s,{unit:"hour"})}return ko.h(i,e)},H:function(i,e,t){return e==="Ho"?t.ordinalNumber(i.getHours(),{unit:"hour"}):ko.H(i,e)},K:function(i,e,t){const s=i.getHours()%12;return e==="Ko"?t.ordinalNumber(s,{unit:"hour"}):Et(s,e.length)},k:function(i,e,t){let s=i.getHours();return s===0&&(s=24),e==="ko"?t.ordinalNumber(s,{unit:"hour"}):Et(s,e.length)},m:function(i,e,t){return e==="mo"?t.ordinalNumber(i.getMinutes(),{unit:"minute"}):ko.m(i,e)},s:function(i,e,t){return e==="so"?t.ordinalNumber(i.getSeconds(),{unit:"second"}):ko.s(i,e)},S:function(i,e){return ko.S(i,e)},X:function(i,e,t){const s=i.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return jg(s);case"XXXX":case"XX":return Ia(s);case"XXXXX":case"XXX":default:return Ia(s,":")}},x:function(i,e,t){const s=i.getTimezoneOffset();switch(e){case"x":return jg(s);case"xxxx":case"xx":return Ia(s);case"xxxxx":case"xxx":default:return Ia(s,":")}},O:function(i,e,t){const s=i.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Fg(s,":");case"OOOO":default:return"GMT"+Ia(s,":")}},z:function(i,e,t){const s=i.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Fg(s,":");case"zzzz":default:return"GMT"+Ia(s,":")}},t:function(i,e,t){const s=Math.trunc(i.getTime()/1e3);return Et(s,e.length)},T:function(i,e,t){const s=i.getTime();return Et(s,e.length)}};function Fg(i,e=""){const t=i>0?"-":"+",s=Math.abs(i),a=Math.trunc(s/60),c=s%60;return c===0?t+String(a):t+String(a)+e+Et(c,2)}function jg(i,e){return i%60===0?(i>0?"-":"+")+Et(Math.abs(i)/60,2):Ia(i,e)}function Ia(i,e=""){const t=i>0?"-":"+",s=Math.abs(i),a=Et(Math.trunc(s/60),2),c=Et(s%60,2);return t+a+e+c}const Bg=(i,e)=>{switch(i){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Cy=(i,e)=>{switch(i){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},dT=(i,e)=>{const t=i.match(/(P+)(p+)?/)||[],s=t[1],a=t[2];if(!a)return Bg(i,e);let c;switch(s){case"P":c=e.dateTime({width:"short"});break;case"PP":c=e.dateTime({width:"medium"});break;case"PPP":c=e.dateTime({width:"long"});break;case"PPPP":default:c=e.dateTime({width:"full"});break}return c.replace("{{date}}",Bg(s,e)).replace("{{time}}",Cy(a,e))},fT={p:Cy,P:dT},mT=/^D+$/,pT=/^Y+$/,gT=["D","DD","YY","YYYY"];function _T(i){return mT.test(i)}function yT(i){return pT.test(i)}function vT(i,e,t){const s=wT(i,e,t);if(console.warn(s),gT.includes(i))throw new RangeError(s)}function wT(i,e,t){const s=i[0]==="Y"?"years":"days of the month";return`Use \`${i.toLowerCase()}\` instead of \`${i}\` (in \`${e}\`) for formatting ${s} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ET=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,TT=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xT=/^'([^]*?)'?$/,IT=/''/g,ST=/[a-zA-Z]/;function bf(i,e,t){var P,I,R,q,Q,ne,te,ke;const s=Rh(),a=(t==null?void 0:t.locale)??s.locale??aT,c=(t==null?void 0:t.firstWeekContainsDate)??((I=(P=t==null?void 0:t.locale)==null?void 0:P.options)==null?void 0:I.firstWeekContainsDate)??s.firstWeekContainsDate??((q=(R=s.locale)==null?void 0:R.options)==null?void 0:q.firstWeekContainsDate)??1,m=(t==null?void 0:t.weekStartsOn)??((ne=(Q=t==null?void 0:t.locale)==null?void 0:Q.options)==null?void 0:ne.weekStartsOn)??s.weekStartsOn??((ke=(te=s.locale)==null?void 0:te.options)==null?void 0:ke.weekStartsOn)??0,v=Ni(i);if(!CE(v))throw new RangeError("Invalid time value");let E=e.match(TT).map(me=>{const we=me[0];if(we==="p"||we==="P"){const xe=fT[we];return xe(me,a.formatLong)}return me}).join("").match(ET).map(me=>{if(me==="''")return{isToken:!1,value:"'"};const we=me[0];if(we==="'")return{isToken:!1,value:PT(me)};if(zg[we])return{isToken:!0,value:me};if(we.match(ST))throw new RangeError("Format string contains an unescaped latin alphabet character `"+we+"`");return{isToken:!1,value:me}});a.localize.preprocessor&&(E=a.localize.preprocessor(v,E));const x={firstWeekContainsDate:c,weekStartsOn:m,locale:a};return E.map(me=>{if(!me.isToken)return me.value;const we=me.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&yT(we)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&_T(we))&&vT(we,e,String(i));const xe=zg[we[0]];return xe(v,we,a.localize,x)}).join("")}function PT(i){const e=i.match(xT);return e?e[1].replace(IT,"'"):i}const bT={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},CT=(i,e,t)=>{let s;const a=bT[i];return typeof a=="string"?s=a:e===1?s=a.one:s=a.other.replace("{{count}}",String(e)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"dans "+s:"il y a "+s:s},AT={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},kT={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},RT={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},NT={date:wl({formats:AT,defaultWidth:"full"}),time:wl({formats:kT,defaultWidth:"full"}),dateTime:wl({formats:RT,defaultWidth:"full"})},LT={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},MT=(i,e,t,s)=>LT[i],DT={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},OT={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},VT={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},zT={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},FT={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},jT=(i,e)=>{const t=Number(i),s=e==null?void 0:e.unit;if(t===0)return"0";const a=["year","week","hour","minute","second"];let c;return t===1?c=s&&a.includes(s)?"re":"er":c="me",t+c},BT=["MMM","MMMM"],UT={preprocessor:(i,e)=>i.getDate()===1||!e.some(s=>s.isToken&&BT.includes(s.value))?e:e.map(s=>s.isToken&&s.value==="do"?{isToken:!0,value:"d"}:s),ordinalNumber:jT,era:ts({values:DT,defaultWidth:"wide"}),quarter:ts({values:OT,defaultWidth:"wide",argumentCallback:i=>i-1}),month:ts({values:VT,defaultWidth:"wide"}),day:ts({values:zT,defaultWidth:"wide"}),dayPeriod:ts({values:FT,defaultWidth:"wide"})},WT=/^(\d+)(ime|re|me|er|e)?/i,HT=/\d+/i,qT={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},$T={any:[/^av/i,/^ap/i]},GT={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},ZT={any:[/1/i,/2/i,/3/i,/4/i]},KT={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},QT={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},YT={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},XT={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},JT={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},e1={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},t1={ordinalNumber:Py({matchPattern:WT,parsePattern:HT,valueCallback:i=>parseInt(i)}),era:ns({matchPatterns:qT,defaultMatchWidth:"wide",parsePatterns:$T,defaultParseWidth:"any"}),quarter:ns({matchPatterns:GT,defaultMatchWidth:"wide",parsePatterns:ZT,defaultParseWidth:"any",valueCallback:i=>i+1}),month:ns({matchPatterns:KT,defaultMatchWidth:"wide",parsePatterns:QT,defaultParseWidth:"any"}),day:ns({matchPatterns:YT,defaultMatchWidth:"wide",parsePatterns:XT,defaultParseWidth:"any"}),dayPeriod:ns({matchPatterns:JT,defaultMatchWidth:"any",parsePatterns:e1,defaultParseWidth:"any"})},Cf={code:"fr",formatDistance:CT,formatLong:NT,formatRelative:MT,localize:UT,match:t1,options:{weekStartsOn:1,firstWeekContainsDate:4}};function n1({report:i,onClose:e,onStatusChange:t,onValidate:s,isAdmin:a=!1}){var P,I,R;const c=q=>{switch(q){case"nouveau":return A.jsx(Ty,{className:"text-white",size:20});case"en_cours":return A.jsx(vE,{className:"text-white",size:20});case"resolu":return A.jsx(xy,{className:"text-white",size:20})}},m=q=>{switch(q){case"nouveau":return"Nouveau";case"en_cours":return"En cours de traitement";case"resolu":return"Rsolu"}},v=q=>{switch(q){case"nouveau":return"bg-gradient-to-br from-red-500 to-red-600 border-white text-white shadow-xl ring-4 ring-red-400";case"en_cours":return"bg-gradient-to-br from-orange-500 to-orange-600 border-white text-white shadow-xl ring-4 ring-orange-400";case"resolu":return"bg-gradient-to-br from-green-500 to-green-600 border-white text-white shadow-xl ring-4 ring-green-400"}},E=q=>q.charAt(0).toUpperCase()+q.slice(1),x=q=>({mobilier:"Mobilier urbain",signalisation:"Signalisation",mobilite:"Mobilit",autre:"Autre"})[q]||q;return A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end md:items-center md:justify-center z-50",children:A.jsxs("div",{className:"bg-white rounded-t-3xl md:rounded-2xl w-full md:max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl",children:[A.jsxs("div",{className:"sticky top-0 bg-white border-b p-4 flex items-center justify-between",children:[A.jsx("h2",{className:"text-xl font-bold",children:"Dtails du signalement"}),A.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:A.jsx(sm,{size:24})})]}),A.jsxs("div",{className:"p-4 space-y-4",children:[A.jsxs("div",{className:"relative",children:[A.jsx("img",{src:i.photo,alt:i.description,className:"w-full h-64 object-cover rounded-lg"}),A.jsxs("div",{className:`absolute top-3 right-3 px-3 py-2 rounded-lg border-2 font-medium flex items-center gap-2 ${v(i.status)}`,children:[c(i.status),m(i.status)]})]}),A.jsx("div",{children:A.jsx("h3",{className:"font-semibold text-lg mb-2",children:i.description})}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[A.jsx(rm,{size:20,className:"text-gray-600 flex-shrink-0 mt-0.5"}),A.jsxs("div",{children:[A.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Localisation"}),A.jsx("div",{className:"text-sm text-gray-600",children:i.location.address}),A.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[i.location.lat.toFixed(6),", ",i.location.lng.toFixed(6)]})]})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[A.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[A.jsx(Ey,{size:20,className:"text-gray-600 flex-shrink-0 mt-0.5"}),A.jsxs("div",{children:[A.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Date"}),A.jsx("div",{className:"text-sm text-gray-600",children:bf(new Date(i.date),"dd MMMM yyyy",{locale:Cf})}),A.jsx("div",{className:"text-xs text-gray-500",children:bf(new Date(i.date),"HH:mm",{locale:Cf})})]})]}),A.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[A.jsx(im,{size:20,className:"text-gray-600 flex-shrink-0 mt-0.5"}),A.jsxs("div",{children:[A.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Signal par"}),A.jsx("div",{className:"text-sm text-gray-600",children:i.reportedBy})]})]})]}),A.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.mode==="probleme"&&A.jsxs("span",{className:"px-3 py-2 bg-red-50 text-red-700 rounded-lg text-sm font-medium border-2 border-red-300",children:[" Problme: ",i.type&&E(i.type)]}),i.mode==="mobilier"&&A.jsx("span",{className:"px-3 py-2 bg-green-50 text-green-700 rounded-lg text-sm font-medium border-2 border-green-300",children:" Mobilier OK"}),i.mode==="suggestion"&&A.jsx("span",{className:"px-3 py-2 bg-indigo-50 text-indigo-700 rounded-lg text-sm font-medium border-2 border-indigo-300",children:" Suggestion"}),A.jsx("span",{className:"px-3 py-2 bg-purple-50 text-purple-700 rounded-lg text-sm font-medium border-2 border-purple-300",children:x(i.category)})]}),i.mode==="mobilier"&&i.validations!==void 0&&A.jsx("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border-2 border-green-200",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center shadow-lg",children:A.jsx(ff,{className:"text-white",size:24})}),A.jsxs("div",{children:[A.jsxs("div",{className:"text-lg font-bold text-green-800",children:[i.validations," validation",i.validations>1?"s":""]}),A.jsx("div",{className:"text-sm text-green-600",children:i.validations>=10?"Ce mobilier est certifi par la communaut !":`${10-i.validations} validation${10-i.validations>1?"s":""} pour tre certifi`})]})]})})]}),!a&&s&&i.mode==="mobilier"&&A.jsxs("div",{className:"pt-4 border-t",children:[A.jsxs("button",{onClick:()=>s(i.id),disabled:(P=i.validatedBy)==null?void 0:P.includes("current-user"),className:`w-full py-4 px-4 rounded-lg font-bold transition-all flex items-center justify-center gap-3 ${(I=i.validatedBy)!=null&&I.includes("current-user")?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700 shadow-lg hover:shadow-xl"}`,children:[A.jsx(ff,{size:24}),A.jsx("span",{className:"text-lg",children:(R=i.validatedBy)!=null&&R.includes("current-user")?"Dj valid ":"Valider ce mobilier (+5 points)"})]}),A.jsx("p",{className:"text-xs text-center text-gray-500 mt-2",children:"Confirmez que ce mobilier existe bien et est en bon tat"})]}),a&&t&&A.jsxs("div",{className:"pt-4 border-t",children:[A.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Changer le statut"}),A.jsx("div",{className:"grid grid-cols-3 gap-2",children:["nouveau","en_cours","resolu"].map(q=>A.jsxs("button",{onClick:()=>t(i.id,q),className:`py-3 px-4 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${i.status===q?v(q)+" ring-2 ring-offset-2 ring-blue-500":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[c(q),A.jsx("span",{className:"text-sm",children:m(q)})]},q))})]}),a&&s&&A.jsxs("div",{className:"pt-4 border-t",children:[A.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Valider le signalement"}),A.jsxs("button",{onClick:()=>s(i.id),className:"py-3 px-4 rounded-lg font-medium transition-all flex items-center justify-center gap-2 bg-gray-100 text-gray-600 hover:bg-gray-200",children:[A.jsx(ff,{size:20}),A.jsx("span",{className:"text-sm",children:"Valider"})]})]})]})]})})}function r1({reports:i,onReportClick:e,onStatusChange:t,onValidate:s}){const[a,c]=tt.useState("tous"),[m,v]=tt.useState("tous"),[E,x]=tt.useState("tous"),P=i.filter(Q=>{const ne=a==="tous"||Q.status===a,te=m==="tous"||Q.category===m,ke=E==="tous"||Q.mode===E;return ne&&te&&ke}),I=Q=>{switch(Q){case"nouveau":return"bg-gradient-to-br from-red-500 to-red-600 text-white shadow-lg border-2 border-white ring-2 ring-red-400";case"en_cours":return"bg-gradient-to-br from-orange-500 to-orange-600 text-white shadow-lg border-2 border-white ring-2 ring-orange-400";case"resolu":return"bg-gradient-to-br from-green-500 to-green-600 text-white shadow-lg border-2 border-white ring-2 ring-green-400"}},R=Q=>{switch(Q){case"nouveau":return"Nouveau";case"en_cours":return"En cours";case"resolu":return"Rsolu"}},q={nouveau:i.filter(Q=>Q.status==="nouveau").length,en_cours:i.filter(Q=>Q.status==="en_cours").length,resolu:i.filter(Q=>Q.status==="resolu").length,total:i.length};return A.jsxs("div",{className:"bg-white rounded-t-3xl shadow-lg h-full flex flex-col",children:[A.jsxs("div",{className:"p-4 border-b",children:[A.jsx("h2",{className:"text-xl font-bold mb-4",children:"Tableau de bord - Agent"}),A.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[A.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 text-center",children:[A.jsx("div",{className:"text-lg font-bold",children:q.total}),A.jsx("div",{className:"text-xs text-gray-600",children:"Total"})]}),A.jsxs("div",{className:"bg-red-50 rounded-lg p-2 text-center",children:[A.jsx("div",{className:"text-lg font-bold text-red-700",children:q.nouveau}),A.jsx("div",{className:"text-xs text-red-600",children:"Nouveaux"})]}),A.jsxs("div",{className:"bg-orange-50 rounded-lg p-2 text-center",children:[A.jsx("div",{className:"text-lg font-bold text-orange-700",children:q.en_cours}),A.jsx("div",{className:"text-xs text-orange-600",children:"En cours"})]}),A.jsxs("div",{className:"bg-green-50 rounded-lg p-2 text-center",children:[A.jsx("div",{className:"text-lg font-bold text-green-700",children:q.resolu}),A.jsx("div",{className:"text-xs text-green-600",children:"Rsolus"})]})]}),A.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[A.jsx(cE,{size:16,className:"text-gray-500"}),A.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtres:"})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[A.jsxs("select",{value:a,onChange:Q=>c(Q.target.value),className:"p-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[A.jsx("option",{value:"tous",children:"Tous les statuts"}),A.jsx("option",{value:"nouveau",children:"Nouveaux"}),A.jsx("option",{value:"en_cours",children:"En cours"}),A.jsx("option",{value:"resolu",children:"Rsolus"})]}),A.jsxs("select",{value:m,onChange:Q=>v(Q.target.value),className:"p-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[A.jsx("option",{value:"tous",children:"Toutes catgories"}),A.jsx("option",{value:"mobilier",children:"Mobilier urbain"}),A.jsx("option",{value:"signalisation",children:"Signalisation"}),A.jsx("option",{value:"mobilite",children:"Mobilit"}),A.jsx("option",{value:"autre",children:"Autre"})]}),A.jsxs("select",{value:E,onChange:Q=>x(Q.target.value),className:"p-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 col-span-2",children:[A.jsx("option",{value:"tous",children:"Tous les types"}),A.jsx("option",{value:"probleme",children:" Problmes uniquement"}),A.jsx("option",{value:"mobilier",children:" Mobiliers uniquement"}),A.jsx("option",{value:"suggestion",children:" Suggestions uniquement"})]})]})]}),A.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:P.length===0?A.jsxs("div",{className:"text-center py-8 text-gray-500",children:[A.jsx(Ty,{size:48,className:"mx-auto mb-2 opacity-50"}),A.jsx("p",{children:"Aucun signalement trouv"})]}):P.map(Q=>A.jsxs("div",{onClick:()=>e(Q),className:"bg-white border border-gray-200 rounded-lg p-3 hover:shadow-md transition-shadow cursor-pointer",children:[A.jsxs("div",{className:"flex gap-3",children:[A.jsx("img",{src:Q.photo,alt:Q.description,className:"w-20 h-20 object-cover rounded-lg flex-shrink-0"}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("div",{className:"flex items-start justify-between gap-2 mb-1",children:A.jsx("h3",{className:"font-semibold text-sm line-clamp-2",children:Q.description})}),A.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-600 mb-2",children:[A.jsx(rm,{size:12}),A.jsx("span",{className:"truncate",children:Q.location.address})]}),A.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[A.jsx("span",{className:`px-2 py-1 rounded font-medium ${I(Q.status)}`,children:R(Q.status)}),A.jsx("span",{className:"px-2 py-1 rounded bg-gray-100 text-gray-700",children:Q.category})]}),A.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx(Ey,{size:12}),bf(new Date(Q.date),"dd MMM yyyy",{locale:Cf})]}),A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx(im,{size:12}),Q.reportedBy]})]})]})]}),A.jsx("div",{className:"mt-3 pt-3 border-t flex gap-2",children:["nouveau","en_cours","resolu"].map(ne=>A.jsx("button",{onClick:te=>{te.stopPropagation(),t(Q.id,ne)},className:`flex-1 py-1.5 px-2 rounded text-xs font-medium transition-colors ${Q.status===ne?I(ne)+" cursor-default":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,disabled:Q.status===ne,children:R(ne)},ne))})]},Q.id))})]})}function i1({isOpen:i,onClose:e,userName:t,userPhoto:s,points:a,level:c,badge:m}){if(!i)return null;const v=E=>E>=10?"from-purple-500 to-pink-500":E>=5?"from-blue-500 to-cyan-500":"from-green-500 to-emerald-500";return A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:e}),A.jsx("div",{className:"fixed top-0 right-0 w-80 h-full bg-white shadow-2xl z-50 transform transition-transform",children:A.jsxs("div",{className:"flex flex-col h-full",children:[A.jsxs("div",{className:"bg-gradient-to-br from-[#ffb8b8] to-[#ff9999] p-6 relative",children:[A.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 hover:bg-white/20 rounded-full transition-colors",children:A.jsx(sm,{size:24,className:"text-white"})}),A.jsx("div",{className:"flex justify-center mb-4",children:A.jsxs("div",{className:"relative",children:[A.jsx("img",{src:s,alt:t,className:"w-24 h-24 rounded-full border-4 border-white shadow-xl object-cover"}),A.jsx("div",{className:`absolute -bottom-2 -right-2 w-10 h-10 bg-gradient-to-br ${v(c)} rounded-full flex items-center justify-center border-3 border-white shadow-lg`,children:A.jsx("span",{className:"text-white font-bold text-sm",children:c})})]})}),A.jsx("h2",{className:"text-center text-xl font-bold text-white mb-1",children:t}),A.jsx("p",{className:"text-center text-white/80 text-sm",children:m})]}),A.jsxs("div",{className:"p-6 space-y-4",children:[A.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-xl p-4 border-2 border-yellow-200",children:A.jsx("div",{className:"flex items-center justify-between",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center shadow-lg",children:A.jsx(mE,{className:"text-white",size:24})}),A.jsxs("div",{children:[A.jsx("div",{className:"text-2xl font-bold text-gray-800",children:a}),A.jsx("div",{className:"text-sm text-gray-600",children:"Points"})]})]})})}),A.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-4 border-2 border-purple-200",children:A.jsx("div",{className:"flex items-center justify-between",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${v(c)} rounded-full flex items-center justify-center shadow-lg`,children:A.jsx(tE,{className:"text-white",size:24})}),A.jsxs("div",{children:[A.jsxs("div",{className:"text-2xl font-bold text-gray-800",children:["Niveau ",c]}),A.jsx("div",{className:"text-sm text-gray-600",children:m})]})]})})}),A.jsxs("div",{className:"mt-4",children:[A.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[A.jsx("span",{children:"Progression"}),A.jsxs("span",{children:[a%100," / 100"]})]}),A.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:A.jsx("div",{className:`h-full bg-gradient-to-r ${v(c)} transition-all duration-500 shadow-lg`,style:{width:`${a%100}%`}})}),A.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[100-a%100," points avant le prochain niveau"]})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[A.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 text-center border-2 border-blue-200",children:[A.jsx("div",{className:"text-xl font-bold text-blue-700",children:Math.floor(a/20)}),A.jsx("div",{className:"text-xs text-blue-600",children:"Signalements"})]}),A.jsxs("div",{className:"bg-green-50 rounded-lg p-3 text-center border-2 border-green-200",children:[A.jsx("div",{className:"text-xl font-bold text-green-700",children:Math.floor(a/50)}),A.jsx("div",{className:"text-xs text-green-600",children:"Rsolus"})]})]})]}),A.jsx("div",{className:"mt-auto p-6 border-t",children:A.jsx("button",{onClick:e,className:"w-full py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg font-semibold shadow-lg hover:shadow-xl transition-all",children:"Fermer"})})]})})]})}var s1=vy();const o1=tm(s1);function a1(i){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i))}const l1=i=>{switch(i){case"success":return h1;case"info":return f1;case"warning":return d1;case"error":return m1;default:return null}},u1=Array(12).fill(0),c1=({visible:i,className:e})=>pe.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":i},pe.createElement("div",{className:"sonner-spinner"},u1.map((t,s)=>pe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),h1=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),d1=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},pe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),f1=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),m1=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),p1=pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},pe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),pe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),g1=()=>{const[i,e]=pe.useState(document.hidden);return pe.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),i};let Af=1;class _1{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:s,...a}=e,c=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Af++,m=this.toasts.find(E=>E.id===c),v=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(c)&&this.dismissedToasts.delete(c),m?this.toasts=this.toasts.map(E=>E.id===c?(this.publish({...E,...e,id:c,title:s}),{...E,...e,id:c,dismissible:v,title:s}):E):this.addToast({title:s,...a,dismissible:v,id:c}),c},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(s=>s({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;t.loading!==void 0&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const a=Promise.resolve(e instanceof Function?e():e);let c=s!==void 0,m;const v=a.then(async x=>{if(m=["resolve",x],pe.isValidElement(x))c=!1,this.create({id:s,type:"default",message:x});else if(v1(x)&&!x.ok){c=!1;const I=typeof t.error=="function"?await t.error(`HTTP error! status: ${x.status}`):t.error,R=typeof t.description=="function"?await t.description(`HTTP error! status: ${x.status}`):t.description,Q=typeof I=="object"&&!pe.isValidElement(I)?I:{message:I};this.create({id:s,type:"error",description:R,...Q})}else if(x instanceof Error){c=!1;const I=typeof t.error=="function"?await t.error(x):t.error,R=typeof t.description=="function"?await t.description(x):t.description,Q=typeof I=="object"&&!pe.isValidElement(I)?I:{message:I};this.create({id:s,type:"error",description:R,...Q})}else if(t.success!==void 0){c=!1;const I=typeof t.success=="function"?await t.success(x):t.success,R=typeof t.description=="function"?await t.description(x):t.description,Q=typeof I=="object"&&!pe.isValidElement(I)?I:{message:I};this.create({id:s,type:"success",description:R,...Q})}}).catch(async x=>{if(m=["reject",x],t.error!==void 0){c=!1;const P=typeof t.error=="function"?await t.error(x):t.error,I=typeof t.description=="function"?await t.description(x):t.description,q=typeof P=="object"&&!pe.isValidElement(P)?P:{message:P};this.create({id:s,type:"error",description:I,...q})}}).finally(()=>{c&&(this.dismiss(s),s=void 0),t.finally==null||t.finally.call(t)}),E=()=>new Promise((x,P)=>v.then(()=>m[0]==="reject"?P(m[1]):x(m[1])).catch(P));return typeof s!="string"&&typeof s!="number"?{unwrap:E}:Object.assign(s,{unwrap:E})},this.custom=(e,t)=>{const s=(t==null?void 0:t.id)||Af++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Sr=new _1,y1=(i,e)=>{const t=(e==null?void 0:e.id)||Af++;return Sr.addToast({title:i,...e,id:t}),t},v1=i=>i&&typeof i=="object"&&"ok"in i&&typeof i.ok=="boolean"&&"status"in i&&typeof i.status=="number",w1=y1,E1=()=>Sr.toasts,T1=()=>Sr.getActiveToasts(),Xi=Object.assign(w1,{success:Sr.success,info:Sr.info,warning:Sr.warning,error:Sr.error,custom:Sr.custom,message:Sr.message,promise:Sr.promise,dismiss:Sr.dismiss,loading:Sr.loading},{getHistory:E1,getToasts:T1});a1("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Gc(i){return i.label!==void 0}const x1=3,I1="24px",S1="16px",Ug=4e3,P1=356,b1=14,C1=45,A1=200;function Ji(...i){return i.filter(Boolean).join(" ")}function k1(i){const[e,t]=i.split("-"),s=[];return e&&s.push(e),t&&s.push(t),s}const R1=i=>{var e,t,s,a,c,m,v,E,x;const{invert:P,toast:I,unstyled:R,interacting:q,setHeights:Q,visibleToasts:ne,heights:te,index:ke,toasts:me,expanded:we,removeToast:xe,defaultRichColors:De,closeButton:Oe,style:F,cancelButtonStyle:k,actionButtonStyle:D,className:B="",descriptionClassName:V="",duration:U,position:N,gap:Ge,expandByDefault:at,classNames:Ce,icons:ge,closeButtonAriaLabel:X="Close toast"}=i,[_e,re]=pe.useState(null),[O,Y]=pe.useState(null),[fe,ye]=pe.useState(!1),[Te,ce]=pe.useState(!1),[Ze,We]=pe.useState(!1),[rt,Rt]=pe.useState(!1),[jr,ir]=pe.useState(!1),[sr,Br]=pe.useState(0),[us,Ur]=pe.useState(0),gn=pe.useRef(I.duration||U||Ug),br=pe.useRef(null),ft=pe.useRef(null),St=ke===0,_n=ke+1<=ne,Ut=I.type,Hn=I.dismissible!==!1,Zs=I.className||"",Wr=I.descriptionClassName||"",or=pe.useMemo(()=>te.findIndex(Be=>Be.toastId===I.id)||0,[te,I.id]),pi=pe.useMemo(()=>{var Be;return(Be=I.closeButton)!=null?Be:Oe},[I.closeButton,Oe]),ar=pe.useMemo(()=>I.duration||U||Ug,[I.duration,U]),Li=pe.useRef(0),yn=pe.useRef(0),lr=pe.useRef(0),Cr=pe.useRef(null),[Ar,Hr]=N.split("-"),gi=pe.useMemo(()=>te.reduce((Be,wt,Ot)=>Ot>=or?Be:Be+wt.height,0),[te,or]),An=g1(),ur=I.invert||P,cr=Ut==="loading";yn.current=pe.useMemo(()=>or*Ge+gi,[or,gi]),pe.useEffect(()=>{gn.current=ar},[ar]),pe.useEffect(()=>{ye(!0)},[]),pe.useEffect(()=>{const Be=ft.current;if(Be){const wt=Be.getBoundingClientRect().height;return Ur(wt),Q(Ot=>[{toastId:I.id,height:wt,position:I.position},...Ot]),()=>Q(Ot=>Ot.filter(Kt=>Kt.toastId!==I.id))}},[Q,I.id]),pe.useLayoutEffect(()=>{if(!fe)return;const Be=ft.current,wt=Be.style.height;Be.style.height="auto";const Ot=Be.getBoundingClientRect().height;Be.style.height=wt,Ur(Ot),Q(Kt=>Kt.find(Pt=>Pt.toastId===I.id)?Kt.map(Pt=>Pt.toastId===I.id?{...Pt,height:Ot}:Pt):[{toastId:I.id,height:Ot,position:I.position},...Kt])},[fe,I.title,I.description,Q,I.id]);const vn=pe.useCallback(()=>{ce(!0),Br(yn.current),Q(Be=>Be.filter(wt=>wt.toastId!==I.id)),setTimeout(()=>{xe(I)},A1)},[I,xe,Q,yn]);pe.useEffect(()=>{if(I.promise&&Ut==="loading"||I.duration===1/0||I.type==="loading")return;let Be;return we||q||An?(()=>{if(lr.current<Li.current){const Kt=new Date().getTime()-Li.current;gn.current=gn.current-Kt}lr.current=new Date().getTime()})():(()=>{gn.current!==1/0&&(Li.current=new Date().getTime(),Be=setTimeout(()=>{I.onAutoClose==null||I.onAutoClose.call(I,I),vn()},gn.current))})(),()=>clearTimeout(Be)},[we,q,I,Ut,An,vn]),pe.useEffect(()=>{I.delete&&vn()},[vn,I.delete]);function hr(){var Be;if(ge!=null&&ge.loading){var wt;return pe.createElement("div",{className:Ji(Ce==null?void 0:Ce.loader,I==null||(wt=I.classNames)==null?void 0:wt.loader,"sonner-loader"),"data-visible":Ut==="loading"},ge.loading)}return pe.createElement(c1,{className:Ji(Ce==null?void 0:Ce.loader,I==null||(Be=I.classNames)==null?void 0:Be.loader),visible:Ut==="loading"})}const dr=I.icon||(ge==null?void 0:ge[Ut])||l1(Ut);var Tt,Mi;return pe.createElement("li",{tabIndex:0,ref:ft,className:Ji(B,Zs,Ce==null?void 0:Ce.toast,I==null||(e=I.classNames)==null?void 0:e.toast,Ce==null?void 0:Ce.default,Ce==null?void 0:Ce[Ut],I==null||(t=I.classNames)==null?void 0:t[Ut]),"data-sonner-toast":"","data-rich-colors":(Tt=I.richColors)!=null?Tt:De,"data-styled":!(I.jsx||I.unstyled||R),"data-mounted":fe,"data-promise":!!I.promise,"data-swiped":jr,"data-removed":Te,"data-visible":_n,"data-y-position":Ar,"data-x-position":Hr,"data-index":ke,"data-front":St,"data-swiping":Ze,"data-dismissible":Hn,"data-type":Ut,"data-invert":ur,"data-swipe-out":rt,"data-swipe-direction":O,"data-expanded":!!(we||at&&fe),style:{"--index":ke,"--toasts-before":ke,"--z-index":me.length-ke,"--offset":`${Te?sr:yn.current}px`,"--initial-height":at?"auto":`${us}px`,...F,...I.style},onDragEnd:()=>{We(!1),re(null),Cr.current=null},onPointerDown:Be=>{cr||!Hn||(br.current=new Date,Br(yn.current),Be.target.setPointerCapture(Be.pointerId),Be.target.tagName!=="BUTTON"&&(We(!0),Cr.current={x:Be.clientX,y:Be.clientY}))},onPointerUp:()=>{var Be,wt,Ot;if(rt||!Hn)return;Cr.current=null;const Kt=Number(((Be=ft.current)==null?void 0:Be.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),wn=Number(((wt=ft.current)==null?void 0:wt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Pt=new Date().getTime()-((Ot=br.current)==null?void 0:Ot.getTime()),Wt=_e==="x"?Kt:wn,qn=Math.abs(Wt)/Pt;if(Math.abs(Wt)>=C1||qn>.11){Br(yn.current),I.onDismiss==null||I.onDismiss.call(I,I),Y(_e==="x"?Kt>0?"right":"left":wn>0?"down":"up"),vn(),Rt(!0);return}else{var Ht,un;(Ht=ft.current)==null||Ht.style.setProperty("--swipe-amount-x","0px"),(un=ft.current)==null||un.style.setProperty("--swipe-amount-y","0px")}ir(!1),We(!1),re(null)},onPointerMove:Be=>{var wt,Ot,Kt;if(!Cr.current||!Hn||((wt=window.getSelection())==null?void 0:wt.toString().length)>0)return;const Pt=Be.clientY-Cr.current.y,Wt=Be.clientX-Cr.current.x;var qn;const Ht=(qn=i.swipeDirections)!=null?qn:k1(N);!_e&&(Math.abs(Wt)>1||Math.abs(Pt)>1)&&re(Math.abs(Wt)>Math.abs(Pt)?"x":"y");let un={x:0,y:0};const Vt=ve=>1/(1.5+Math.abs(ve)/20);if(_e==="y"){if(Ht.includes("top")||Ht.includes("bottom"))if(Ht.includes("top")&&Pt<0||Ht.includes("bottom")&&Pt>0)un.y=Pt;else{const ve=Pt*Vt(Pt);un.y=Math.abs(ve)<Math.abs(Pt)?ve:Pt}}else if(_e==="x"&&(Ht.includes("left")||Ht.includes("right")))if(Ht.includes("left")&&Wt<0||Ht.includes("right")&&Wt>0)un.x=Wt;else{const ve=Wt*Vt(Wt);un.x=Math.abs(ve)<Math.abs(Wt)?ve:Wt}(Math.abs(un.x)>0||Math.abs(un.y)>0)&&ir(!0),(Ot=ft.current)==null||Ot.style.setProperty("--swipe-amount-x",`${un.x}px`),(Kt=ft.current)==null||Kt.style.setProperty("--swipe-amount-y",`${un.y}px`)}},pi&&!I.jsx&&Ut!=="loading"?pe.createElement("button",{"aria-label":X,"data-disabled":cr,"data-close-button":!0,onClick:cr||!Hn?()=>{}:()=>{vn(),I.onDismiss==null||I.onDismiss.call(I,I)},className:Ji(Ce==null?void 0:Ce.closeButton,I==null||(s=I.classNames)==null?void 0:s.closeButton)},(Mi=ge==null?void 0:ge.close)!=null?Mi:p1):null,(Ut||I.icon||I.promise)&&I.icon!==null&&((ge==null?void 0:ge[Ut])!==null||I.icon)?pe.createElement("div",{"data-icon":"",className:Ji(Ce==null?void 0:Ce.icon,I==null||(a=I.classNames)==null?void 0:a.icon)},I.promise||I.type==="loading"&&!I.icon?I.icon||hr():null,I.type!=="loading"?dr:null):null,pe.createElement("div",{"data-content":"",className:Ji(Ce==null?void 0:Ce.content,I==null||(c=I.classNames)==null?void 0:c.content)},pe.createElement("div",{"data-title":"",className:Ji(Ce==null?void 0:Ce.title,I==null||(m=I.classNames)==null?void 0:m.title)},I.jsx?I.jsx:typeof I.title=="function"?I.title():I.title),I.description?pe.createElement("div",{"data-description":"",className:Ji(V,Wr,Ce==null?void 0:Ce.description,I==null||(v=I.classNames)==null?void 0:v.description)},typeof I.description=="function"?I.description():I.description):null),pe.isValidElement(I.cancel)?I.cancel:I.cancel&&Gc(I.cancel)?pe.createElement("button",{"data-button":!0,"data-cancel":!0,style:I.cancelButtonStyle||k,onClick:Be=>{Gc(I.cancel)&&Hn&&(I.cancel.onClick==null||I.cancel.onClick.call(I.cancel,Be),vn())},className:Ji(Ce==null?void 0:Ce.cancelButton,I==null||(E=I.classNames)==null?void 0:E.cancelButton)},I.cancel.label):null,pe.isValidElement(I.action)?I.action:I.action&&Gc(I.action)?pe.createElement("button",{"data-button":!0,"data-action":!0,style:I.actionButtonStyle||D,onClick:Be=>{Gc(I.action)&&(I.action.onClick==null||I.action.onClick.call(I.action,Be),!Be.defaultPrevented&&vn())},className:Ji(Ce==null?void 0:Ce.actionButton,I==null||(x=I.classNames)==null?void 0:x.actionButton)},I.action.label):null)};function Wg(){if(typeof window>"u"||typeof document>"u")return"ltr";const i=document.documentElement.getAttribute("dir");return i==="auto"||!i?window.getComputedStyle(document.documentElement).direction:i}function N1(i,e){const t={};return[i,e].forEach((s,a)=>{const c=a===1,m=c?"--mobile-offset":"--offset",v=c?S1:I1;function E(x){["top","right","bottom","left"].forEach(P=>{t[`${m}-${P}`]=typeof x=="number"?`${x}px`:x})}typeof s=="number"||typeof s=="string"?E(s):typeof s=="object"?["top","right","bottom","left"].forEach(x=>{s[x]===void 0?t[`${m}-${x}`]=v:t[`${m}-${x}`]=typeof s[x]=="number"?`${s[x]}px`:s[x]}):E(v)}),t}const L1=pe.forwardRef(function(e,t){const{invert:s,position:a="bottom-right",hotkey:c=["altKey","KeyT"],expand:m,closeButton:v,className:E,offset:x,mobileOffset:P,theme:I="light",richColors:R,duration:q,style:Q,visibleToasts:ne=x1,toastOptions:te,dir:ke=Wg(),gap:me=b1,icons:we,containerAriaLabel:xe="Notifications"}=e,[De,Oe]=pe.useState([]),F=pe.useMemo(()=>Array.from(new Set([a].concat(De.filter(O=>O.position).map(O=>O.position)))),[De,a]),[k,D]=pe.useState([]),[B,V]=pe.useState(!1),[U,N]=pe.useState(!1),[Ge,at]=pe.useState(I!=="system"?I:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Ce=pe.useRef(null),ge=c.join("+").replace(/Key/g,"").replace(/Digit/g,""),X=pe.useRef(null),_e=pe.useRef(!1),re=pe.useCallback(O=>{Oe(Y=>{var fe;return(fe=Y.find(ye=>ye.id===O.id))!=null&&fe.delete||Sr.dismiss(O.id),Y.filter(({id:ye})=>ye!==O.id)})},[]);return pe.useEffect(()=>Sr.subscribe(O=>{if(O.dismiss){requestAnimationFrame(()=>{Oe(Y=>Y.map(fe=>fe.id===O.id?{...fe,delete:!0}:fe))});return}setTimeout(()=>{o1.flushSync(()=>{Oe(Y=>{const fe=Y.findIndex(ye=>ye.id===O.id);return fe!==-1?[...Y.slice(0,fe),{...Y[fe],...O},...Y.slice(fe+1)]:[O,...Y]})})})}),[De]),pe.useEffect(()=>{if(I!=="system"){at(I);return}if(I==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?at("dark"):at("light")),typeof window>"u")return;const O=window.matchMedia("(prefers-color-scheme: dark)");try{O.addEventListener("change",({matches:Y})=>{at(Y?"dark":"light")})}catch{O.addListener(({matches:fe})=>{try{at(fe?"dark":"light")}catch(ye){console.error(ye)}})}},[I]),pe.useEffect(()=>{De.length<=1&&V(!1)},[De]),pe.useEffect(()=>{const O=Y=>{var fe;if(c.every(ce=>Y[ce]||Y.code===ce)){var Te;V(!0),(Te=Ce.current)==null||Te.focus()}Y.code==="Escape"&&(document.activeElement===Ce.current||(fe=Ce.current)!=null&&fe.contains(document.activeElement))&&V(!1)};return document.addEventListener("keydown",O),()=>document.removeEventListener("keydown",O)},[c]),pe.useEffect(()=>{if(Ce.current)return()=>{X.current&&(X.current.focus({preventScroll:!0}),X.current=null,_e.current=!1)}},[Ce.current]),pe.createElement("section",{ref:t,"aria-label":`${xe} ${ge}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},F.map((O,Y)=>{var fe;const[ye,Te]=O.split("-");return De.length?pe.createElement("ol",{key:O,dir:ke==="auto"?Wg():ke,tabIndex:-1,ref:Ce,className:E,"data-sonner-toaster":!0,"data-sonner-theme":Ge,"data-y-position":ye,"data-lifted":B&&De.length>1&&!m,"data-x-position":Te,style:{"--front-toast-height":`${((fe=k[0])==null?void 0:fe.height)||0}px`,"--width":`${P1}px`,"--gap":`${me}px`,...Q,...N1(x,P)},onBlur:ce=>{_e.current&&!ce.currentTarget.contains(ce.relatedTarget)&&(_e.current=!1,X.current&&(X.current.focus({preventScroll:!0}),X.current=null))},onFocus:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||_e.current||(_e.current=!0,X.current=ce.relatedTarget)},onMouseEnter:()=>V(!0),onMouseMove:()=>V(!0),onMouseLeave:()=>{U||V(!1)},onDragEnd:()=>V(!1),onPointerDown:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||N(!0)},onPointerUp:()=>N(!1)},De.filter(ce=>!ce.position&&Y===0||ce.position===O).map((ce,Ze)=>{var We,rt;return pe.createElement(R1,{key:ce.id,icons:we,index:Ze,toast:ce,defaultRichColors:R,duration:(We=te==null?void 0:te.duration)!=null?We:q,className:te==null?void 0:te.className,descriptionClassName:te==null?void 0:te.descriptionClassName,invert:s,visibleToasts:ne,closeButton:(rt=te==null?void 0:te.closeButton)!=null?rt:v,interacting:U,position:O,style:te==null?void 0:te.style,unstyled:te==null?void 0:te.unstyled,classNames:te==null?void 0:te.classNames,cancelButtonStyle:te==null?void 0:te.cancelButtonStyle,actionButtonStyle:te==null?void 0:te.actionButtonStyle,closeButtonAriaLabel:te==null?void 0:te.closeButtonAriaLabel,removeToast:re,toasts:De.filter(Rt=>Rt.position==ce.position),heights:k.filter(Rt=>Rt.position==ce.position),setHeights:D,expandByDefault:m,gap:me,expanded:B,swipeDirections:e.swipeDirections})})):null}))}),M1=()=>{};var Hg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=function(i){const e=[];let t=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},D1=function(i){const e=[];let t=0,s=0;for(;t<i.length;){const a=i[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[t++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[t++],m=i[t++],v=i[t++],E=((a&7)<<18|(c&63)<<12|(m&63)<<6|v&63)-65536;e[s++]=String.fromCharCode(55296+(E>>10)),e[s++]=String.fromCharCode(56320+(E&1023))}else{const c=i[t++],m=i[t++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|m&63)}}return e.join("")},ky={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const c=i[a],m=a+1<i.length,v=m?i[a+1]:0,E=a+2<i.length,x=E?i[a+2]:0,P=c>>2,I=(c&3)<<4|v>>4;let R=(v&15)<<2|x>>6,q=x&63;E||(q=64,m||(R=64)),s.push(t[P],t[I],t[R],t[q])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Ay(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):D1(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const c=t[i.charAt(a++)],v=a<i.length?t[i.charAt(a)]:0;++a;const x=a<i.length?t[i.charAt(a)]:64;++a;const I=a<i.length?t[i.charAt(a)]:64;if(++a,c==null||v==null||x==null||I==null)throw new O1;const R=c<<2|v>>4;if(s.push(R),x!==64){const q=v<<4&240|x>>2;if(s.push(q),I!==64){const Q=x<<6&192|I;s.push(Q)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class O1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const V1=function(i){const e=Ay(i);return ky.encodeByteArray(e,!0)},hh=function(i){return V1(i).replace(/\./g,"")},Ry=function(i){try{return ky.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=()=>z1().__FIREBASE_DEFAULTS__,j1=()=>{if(typeof process>"u"||typeof Hg>"u")return;const i=Hg.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},B1=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Ry(i[1]);return e&&JSON.parse(e)},Nh=()=>{try{return M1()||F1()||j1()||B1()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Ny=i=>{var e,t;return(t=(e=Nh())==null?void 0:e.emulatorHosts)==null?void 0:t[i]},U1=i=>{const e=Ny(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Ly=()=>{var i;return(i=Nh())==null?void 0:i.config},My=i=>{var e;return(e=Nh())==null?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Dy(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const m={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[hh(JSON.stringify(t)),hh(JSON.stringify(m)),""].join(".")}const xu={};function q1(){const i={prod:[],emulator:[]};for(const e of Object.keys(xu))xu[e]?i.emulator.push(e):i.prod.push(e);return i}function $1(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let qg=!1;function Oy(i,e){if(typeof window>"u"||typeof document>"u"||!Dl(window.location.host)||xu[i]===e||xu[i]||qg)return;xu[i]=e;function t(R){return`__firebase__banner__${R}`}const s="__firebase__banner",c=q1().prod.length>0;function m(){const R=document.getElementById(s);R&&R.remove()}function v(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function E(R,q){R.setAttribute("width","24"),R.setAttribute("id",q),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function x(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{qg=!0,m()},R}function P(R,q){R.setAttribute("id",q),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function I(){const R=$1(s),q=t("text"),Q=document.getElementById(q)||document.createElement("span"),ne=t("learnmore"),te=document.getElementById(ne)||document.createElement("a"),ke=t("preprendIcon"),me=document.getElementById(ke)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const we=R.element;v(we),P(te,ne);const xe=x();E(me,ke),we.append(me,Q,te,xe),document.body.appendChild(we)}c?(Q.innerText="Preview backend disconnected.",me.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(me.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Q.innerText="Preview backend running in this workspace."),Q.setAttribute("id",q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function G1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wn())}function Z1(){var e;const i=(e=Nh())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function K1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Q1(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function Y1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function X1(){const i=Wn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function J1(){return!Z1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ex(){try{return typeof indexedDB=="object"}catch{return!1}}function tx(){return new Promise((i,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var c;e(((c=a.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx="FirebaseError";class Gs extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=nx,Object.setPrototypeOf(this,Gs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fu.prototype.create)}}class Fu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,c=this.errors[e],m=c?rx(c,s):"Error",v=`${this.serviceName}: ${m} (${a}).`;return new Gs(a,v,s)}}function rx(i,e){return i.replace(ix,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const ix=/\{\$([^}]+)}/g;function sx(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ka(i,e){if(i===e)return!0;const t=Object.keys(i),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const c=i[a],m=e[a];if($g(c)&&$g(m)){if(!ka(c,m))return!1}else if(c!==m)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function $g(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(i){const e=[];for(const[t,s]of Object.entries(i))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function ox(i,e){const t=new ax(i,e);return t.subscribe.bind(t)}class ax{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");lx(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=mf),a.error===void 0&&(a.error=mf),a.complete===void 0&&(a.complete=mf);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lx(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function mf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(i){return i&&i._delegate?i._delegate:i}class Ra{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new W1;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hx(e))try{this.getOrInitializeService({instanceIdentifier:Sa})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=Sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sa){return this.instances.has(e)}getOptions(e=Sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,m]of this.instancesDeferred.entries()){const v=this.normalizeInstanceIdentifier(c);s===v&&m.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&e(c,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:cx(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Sa){return this.component?this.component.multipleInstances?e:Sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cx(i){return i===Sa?void 0:i}function hx(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ux(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(it||(it={}));const fx={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},mx=it.INFO,px={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},gx=(i,e,...t)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=px[e];if(a)console[a](`[${s}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class om{constructor(e){this.name=e,this._logLevel=mx,this._logHandler=gx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}const _x=(i,e)=>e.some(t=>i instanceof t);let Gg,Zg;function yx(){return Gg||(Gg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vx(){return Zg||(Zg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vy=new WeakMap,kf=new WeakMap,zy=new WeakMap,pf=new WeakMap,am=new WeakMap;function wx(i){const e=new Promise((t,s)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",m)},c=()=>{t(Vo(i.result)),a()},m=()=>{s(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",m)});return e.then(t=>{t instanceof IDBCursor&&Vy.set(t,i)}).catch(()=>{}),am.set(e,i),e}function Ex(i){if(kf.has(i))return;const e=new Promise((t,s)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",m),i.removeEventListener("abort",m)},c=()=>{t(),a()},m=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",m),i.addEventListener("abort",m)});kf.set(i,e)}let Rf={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return kf.get(i);if(e==="objectStoreNames")return i.objectStoreNames||zy.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Vo(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Tx(i){Rf=i(Rf)}function xx(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=i.call(gf(this),e,...t);return zy.set(s,e.sort?e.sort():[e]),Vo(s)}:vx().includes(i)?function(...e){return i.apply(gf(this),e),Vo(Vy.get(this))}:function(...e){return Vo(i.apply(gf(this),e))}}function Ix(i){return typeof i=="function"?xx(i):(i instanceof IDBTransaction&&Ex(i),_x(i,yx())?new Proxy(i,Rf):i)}function Vo(i){if(i instanceof IDBRequest)return wx(i);if(pf.has(i))return pf.get(i);const e=Ix(i);return e!==i&&(pf.set(i,e),am.set(e,i)),e}const gf=i=>am.get(i);function Sx(i,e,{blocked:t,upgrade:s,blocking:a,terminated:c}={}){const m=indexedDB.open(i,e),v=Vo(m);return s&&m.addEventListener("upgradeneeded",E=>{s(Vo(m.result),E.oldVersion,E.newVersion,Vo(m.transaction),E)}),t&&m.addEventListener("blocked",E=>t(E.oldVersion,E.newVersion,E)),v.then(E=>{c&&E.addEventListener("close",()=>c()),a&&E.addEventListener("versionchange",x=>a(x.oldVersion,x.newVersion,x))}).catch(()=>{}),v}const Px=["get","getKey","getAll","getAllKeys","count"],bx=["put","add","delete","clear"],_f=new Map;function Kg(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(_f.get(e))return _f.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=bx.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||Px.includes(t)))return;const c=async function(m,...v){const E=this.transaction(m,a?"readwrite":"readonly");let x=E.store;return s&&(x=x.index(v.shift())),(await Promise.all([x[t](...v),a&&E.done]))[0]};return _f.set(e,c),c}Tx(i=>({...i,get:(e,t,s)=>Kg(e,t)||i.get(e,t,s),has:(e,t)=>!!Kg(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Ax(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function Ax(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Nf="@firebase/app",Qg="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new om("@firebase/app"),kx="@firebase/app-compat",Rx="@firebase/analytics-compat",Nx="@firebase/analytics",Lx="@firebase/app-check-compat",Mx="@firebase/app-check",Dx="@firebase/auth",Ox="@firebase/auth-compat",Vx="@firebase/database",zx="@firebase/data-connect",Fx="@firebase/database-compat",jx="@firebase/functions",Bx="@firebase/functions-compat",Ux="@firebase/installations",Wx="@firebase/installations-compat",Hx="@firebase/messaging",qx="@firebase/messaging-compat",$x="@firebase/performance",Gx="@firebase/performance-compat",Zx="@firebase/remote-config",Kx="@firebase/remote-config-compat",Qx="@firebase/storage",Yx="@firebase/storage-compat",Xx="@firebase/firestore",Jx="@firebase/ai",eI="@firebase/firestore-compat",tI="firebase",nI="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf="[DEFAULT]",rI={[Nf]:"fire-core",[kx]:"fire-core-compat",[Nx]:"fire-analytics",[Rx]:"fire-analytics-compat",[Mx]:"fire-app-check",[Lx]:"fire-app-check-compat",[Dx]:"fire-auth",[Ox]:"fire-auth-compat",[Vx]:"fire-rtdb",[zx]:"fire-data-connect",[Fx]:"fire-rtdb-compat",[jx]:"fire-fn",[Bx]:"fire-fn-compat",[Ux]:"fire-iid",[Wx]:"fire-iid-compat",[Hx]:"fire-fcm",[qx]:"fire-fcm-compat",[$x]:"fire-perf",[Gx]:"fire-perf-compat",[Zx]:"fire-rc",[Kx]:"fire-rc-compat",[Qx]:"fire-gcs",[Yx]:"fire-gcs-compat",[Xx]:"fire-fst",[eI]:"fire-fst-compat",[Jx]:"fire-vertex","fire-js":"fire-js",[tI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=new Map,iI=new Map,Mf=new Map;function Yg(i,e){try{i.container.addComponent(e)}catch(t){Us.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Cl(i){const e=i.name;if(Mf.has(e))return Us.debug(`There were multiple attempts to register component ${e}.`),!1;Mf.set(e,i);for(const t of dh.values())Yg(t,i);for(const t of iI.values())Yg(t,i);return!0}function lm(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function bi(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zo=new Fu("app","Firebase",sI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ra("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=nI;function Fy(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const s={name:Lf,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw zo.create("bad-app-name",{appName:String(a)});if(t||(t=Ly()),!t)throw zo.create("no-options");const c=dh.get(a);if(c){if(ka(t,c.options)&&ka(s,c.config))return c;throw zo.create("duplicate-app",{appName:a})}const m=new dx(a);for(const E of Mf.values())m.addComponent(E);const v=new oI(t,s,m);return dh.set(a,v),v}function jy(i=Lf){const e=dh.get(i);if(!e&&i===Lf&&Ly())return Fy();if(!e)throw zo.create("no-app",{appName:i});return e}function Fo(i,e,t){let s=rI[i]??i;t&&(s+=`-${t}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const m=[`Unable to register library "${s}" with version "${e}":`];a&&m.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&m.push("and"),c&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Us.warn(m.join(" "));return}Cl(new Ra(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="firebase-heartbeat-database",lI=1,ku="firebase-heartbeat-store";let yf=null;function By(){return yf||(yf=Sx(aI,lI,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ku)}catch(t){console.warn(t)}}}}).catch(i=>{throw zo.create("idb-open",{originalErrorMessage:i.message})})),yf}async function uI(i){try{const t=(await By()).transaction(ku),s=await t.objectStore(ku).get(Uy(i));return await t.done,s}catch(e){if(e instanceof Gs)Us.warn(e.message);else{const t=zo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Us.warn(t.message)}}}async function Xg(i,e){try{const s=(await By()).transaction(ku,"readwrite");await s.objectStore(ku).put(e,Uy(i)),await s.done}catch(t){if(t instanceof Gs)Us.warn(t.message);else{const s=zo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Us.warn(s.message)}}}function Uy(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=1024,hI=30;class dI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new mI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Jg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(m=>m.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>hI){const m=pI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(m,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Us.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Jg(),{heartbeatsToSend:s,unsentEntries:a}=fI(this._heartbeatsCache.heartbeats),c=hh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Us.warn(t),""}}}function Jg(){return new Date().toISOString().substring(0,10)}function fI(i,e=cI){const t=[];let s=i.slice();for(const a of i){const c=t.find(m=>m.agent===a.agent);if(c){if(c.dates.push(a.date),e_(t)>e){c.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),e_(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class mI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ex()?tx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await uI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Xg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Xg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function e_(i){return hh(JSON.stringify({version:2,heartbeats:i})).length}function pI(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let s=1;s<i.length;s++)i[s].date<t&&(t=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(i){Cl(new Ra("platform-logger",e=>new Cx(e),"PRIVATE")),Cl(new Ra("heartbeat",e=>new dI(e),"PRIVATE")),Fo(Nf,Qg,i),Fo(Nf,Qg,"esm2020"),Fo("fire-js","")}gI("");function Wy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _I=Wy,Hy=new Fu("auth","Firebase",Wy());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=new om("@firebase/auth");function yI(i,...e){fh.logLevel<=it.WARN&&fh.warn(`Auth (${Ol}): ${i}`,...e)}function eh(i,...e){fh.logLevel<=it.ERROR&&fh.error(`Auth (${Ol}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(i,...e){throw um(i,...e)}function rs(i,...e){return um(i,...e)}function qy(i,e,t){const s={..._I(),[e]:t};return new Fu("auth","Firebase",s).create(e,{appName:i.name})}function jo(i){return qy(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function um(i,...e){if(typeof i!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(t,...s)}return Hy.create(i,...e)}function $e(i,e,...t){if(!i)throw um(e,...t)}function Fs(i){const e="INTERNAL ASSERTION FAILED: "+i;throw eh(e),new Error(e)}function Hs(i,e){i||Fs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.href)||""}function vI(){return t_()==="http:"||t_()==="https:"}function t_(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vI()||Q1()||"connection"in navigator)?navigator.onLine:!0}function EI(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Hs(t>e,"Short delay should be less than long delay!"),this.isMobile=G1()||Y1()}get(){return wI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(i,e){Hs(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],II=new Bu(3e4,6e4);function Lh(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Vl(i,e,t,s,a={}){return Gy(i,a,async()=>{let c={},m={};s&&(e==="GET"?m=s:c={body:JSON.stringify(s)});const v=ju({key:i.config.apiKey,...m}).slice(1),E=await i._getAdditionalHeaders();E["Content-Type"]="application/json",i.languageCode&&(E["X-Firebase-Locale"]=i.languageCode);const x={method:e,headers:E,...c};return K1()||(x.referrerPolicy="no-referrer"),i.emulatorConfig&&Dl(i.emulatorConfig.host)&&(x.credentials="include"),$y.fetch()(await Ky(i,i.config.apiHost,t,v),x)})}async function Gy(i,e,t){i._canInitEmulator=!1;const s={...TI,...e};try{const a=new SI(i),c=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const m=await c.json();if("needConfirmation"in m)throw Zc(i,"account-exists-with-different-credential",m);if(c.ok&&!("errorMessage"in m))return m;{const v=c.ok?m.errorMessage:m.error.message,[E,x]=v.split(" : ");if(E==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zc(i,"credential-already-in-use",m);if(E==="EMAIL_EXISTS")throw Zc(i,"email-already-in-use",m);if(E==="USER_DISABLED")throw Zc(i,"user-disabled",m);const P=s[E]||E.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw qy(i,P,x);Ws(i,P)}}catch(a){if(a instanceof Gs)throw a;Ws(i,"network-request-failed",{message:String(a)})}}async function Zy(i,e,t,s,a={}){const c=await Vl(i,e,t,s,a);return"mfaPendingCredential"in c&&Ws(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function Ky(i,e,t,s){const a=`${e}${t}?${s}`,c=i,m=c.config.emulator?cm(i.config,a):`${i.config.apiScheme}://${a}`;return xI.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(m).toString():m}class SI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(rs(this.auth,"network-request-failed")),II.get())})}}function Zc(i,e,t){const s={appName:i.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=rs(i,e,s);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PI(i,e){return Vl(i,"POST","/v1/accounts:delete",e)}async function mh(i,e){return Vl(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bI(i,e=!1){const t=Fr(i),s=await t.getIdToken(e),a=hm(s);$e(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const c=typeof a.firebase=="object"?a.firebase:void 0,m=c==null?void 0:c.sign_in_provider;return{claims:a,token:s,authTime:Iu(vf(a.auth_time)),issuedAtTime:Iu(vf(a.iat)),expirationTime:Iu(vf(a.exp)),signInProvider:m||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function vf(i){return Number(i)*1e3}function hm(i){const[e,t,s]=i.split(".");if(e===void 0||t===void 0||s===void 0)return eh("JWT malformed, contained fewer than 3 sections"),null;try{const a=Ry(t);return a?JSON.parse(a):(eh("Failed to decode base64 JWT payload"),null)}catch(a){return eh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function n_(i){const e=hm(i);return $e(e,"internal-error"),$e(typeof e.exp<"u","internal-error"),$e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ru(i,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Gs&&CI(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function CI({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Iu(this.lastLoginAt),this.creationTime=Iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ph(i){var I;const e=i.auth,t=await i.getIdToken(),s=await Ru(i,mh(e,{idToken:t}));$e(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];i._notifyReloadListener(a);const c=(I=a.providerUserInfo)!=null&&I.length?Qy(a.providerUserInfo):[],m=RI(i.providerData,c),v=i.isAnonymous,E=!(i.email&&a.passwordHash)&&!(m!=null&&m.length),x=v?E:!1,P={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:m,metadata:new Of(a.createdAt,a.lastLoginAt),isAnonymous:x};Object.assign(i,P)}async function kI(i){const e=Fr(i);await ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RI(i,e){return[...i.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function Qy(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NI(i,e){const t=await Gy(i,{},async()=>{const s=ju({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:c}=i.config,m=await Ky(i,a,"/v1/token",`key=${c}`),v=await i._getAdditionalHeaders();v["Content-Type"]="application/x-www-form-urlencoded";const E={method:"POST",headers:v,body:s};return i.emulatorConfig&&Dl(i.emulatorConfig.host)&&(E.credentials="include"),$y.fetch()(m,E)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function LI(i,e){return Vl(i,"POST","/v2/accounts:revokeToken",Lh(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$e(e.idToken,"internal-error"),$e(typeof e.idToken<"u","internal-error"),$e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):n_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$e(e.length!==0,"internal-error");const t=n_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:c}=await NI(e,t);this.updateTokensAndExpiration(s,a,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:c}=t,m=new El;return s&&($e(typeof s=="string","internal-error",{appName:e}),m.refreshToken=s),a&&($e(typeof a=="string","internal-error",{appName:e}),m.accessToken=a),c&&($e(typeof c=="number","internal-error",{appName:e}),m.expirationTime=c),m}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new El,this.toJSON())}_performRefresh(){return Fs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(i,e){$e(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Ci{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new AI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Of(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Ru(this,this.stsTokenManager.getToken(this.auth,e));return $e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bI(this,e)}reload(){return kI(this)}_assign(e){this!==e&&($e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ci({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){$e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await ph(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bi(this.auth.app))return Promise.reject(jo(this.auth));const e=await this.getIdToken();return await Ru(this,PI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,c=t.phoneNumber??void 0,m=t.photoURL??void 0,v=t.tenantId??void 0,E=t._redirectEventId??void 0,x=t.createdAt??void 0,P=t.lastLoginAt??void 0,{uid:I,emailVerified:R,isAnonymous:q,providerData:Q,stsTokenManager:ne}=t;$e(I&&ne,e,"internal-error");const te=El.fromJSON(this.name,ne);$e(typeof I=="string",e,"internal-error"),Ro(s,e.name),Ro(a,e.name),$e(typeof R=="boolean",e,"internal-error"),$e(typeof q=="boolean",e,"internal-error"),Ro(c,e.name),Ro(m,e.name),Ro(v,e.name),Ro(E,e.name),Ro(x,e.name),Ro(P,e.name);const ke=new Ci({uid:I,auth:e,email:a,emailVerified:R,displayName:s,isAnonymous:q,photoURL:m,phoneNumber:c,tenantId:v,stsTokenManager:te,createdAt:x,lastLoginAt:P});return Q&&Array.isArray(Q)&&(ke.providerData=Q.map(me=>({...me}))),E&&(ke._redirectEventId=E),ke}static async _fromIdTokenResponse(e,t,s=!1){const a=new El;a.updateFromServerResponse(t);const c=new Ci({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await ph(c),c}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];$e(a.localId!==void 0,"internal-error");const c=a.providerUserInfo!==void 0?Qy(a.providerUserInfo):[],m=!(a.email&&a.passwordHash)&&!(c!=null&&c.length),v=new El;v.updateFromIdToken(s);const E=new Ci({uid:a.localId,auth:e,stsTokenManager:v,isAnonymous:m}),x={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Of(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(c!=null&&c.length)};return Object.assign(E,x),E}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_=new Map;function js(i){Hs(i instanceof Function,"Expected a class definition");let e=r_.get(i);return e?(Hs(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,r_.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Yy.type="NONE";const i_=Yy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(i,e,t){return`firebase:${i}:${e}:${t}`}class Tl{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:c}=this.auth;this.fullUserKey=th(this.userKey,a.apiKey,c),this.fullPersistenceKey=th("persistence",a.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await mh(this.auth,{idToken:e}).catch(()=>{});return t?Ci._fromGetAccountInfoResponse(this.auth,t,e):null}return Ci._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Tl(js(i_),e,s);const a=(await Promise.all(t.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let c=a[0]||js(i_);const m=th(s,e.config.apiKey,e.name);let v=null;for(const x of t)try{const P=await x._get(m);if(P){let I;if(typeof P=="string"){const R=await mh(e,{idToken:P}).catch(()=>{});if(!R)break;I=await Ci._fromGetAccountInfoResponse(e,R,P)}else I=Ci._fromJSON(e,P);x!==c&&(v=I),c=x;break}}catch{}const E=a.filter(x=>x._shouldAllowMigration);return!c._shouldAllowMigration||!E.length?new Tl(c,e,s):(c=E[0],v&&await c._set(m,v.toJSON()),await Promise.all(t.map(async x=>{if(x!==c)try{await x._remove(m)}catch{}})),new Tl(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Xy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rv(e))return"Blackberry";if(iv(e))return"Webos";if(Jy(e))return"Safari";if((e.includes("chrome/")||ev(e))&&!e.includes("edge/"))return"Chrome";if(nv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Xy(i=Wn()){return/firefox\//i.test(i)}function Jy(i=Wn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ev(i=Wn()){return/crios\//i.test(i)}function tv(i=Wn()){return/iemobile/i.test(i)}function nv(i=Wn()){return/android/i.test(i)}function rv(i=Wn()){return/blackberry/i.test(i)}function iv(i=Wn()){return/webos/i.test(i)}function dm(i=Wn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function MI(i=Wn()){var e;return dm(i)&&!!((e=window.navigator)!=null&&e.standalone)}function DI(){return X1()&&document.documentMode===10}function sv(i=Wn()){return dm(i)||nv(i)||iv(i)||rv(i)||/windows phone/i.test(i)||tv(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(i,e=[]){let t;switch(i){case"Browser":t=s_(Wn());break;case"Worker":t=`${s_(Wn())}-${i}`;break;default:t=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ol}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((m,v)=>{try{const E=e(c);m(E)}catch(E){v(E)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VI(i,e={}){return Vl(i,"GET","/v2/passwordPolicy",Lh(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=6;class FI{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??zI,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new o_(this),this.idTokenSubscription=new o_(this),this.beforeStateQueue=new OI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Hy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=js(t)),this._initializationPromise=this.queue(async()=>{var s,a,c;if(!this._deleted&&(this.persistenceManager=await Tl.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await mh(this,{idToken:e}),s=await Ci._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(bi(this.app)){const m=this.app.settings.authIdToken;return m?new Promise(v=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(m).then(v,v))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const m=(c=this.redirectUser)==null?void 0:c._redirectEventId,v=s==null?void 0:s._redirectEventId,E=await this.tryRedirectSignIn(e);(!m||m===v)&&(E!=null&&E.user)&&(s=E.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(m){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(m))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return $e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ph(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bi(this.app))return Promise.reject(jo(this));const t=e?Fr(e):null;return t&&$e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bi(this.app)?Promise.reject(jo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bi(this.app)?Promise.reject(jo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(js(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VI(this),t=new FI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await LI(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&js(e)||this._popupRedirectResolver;$e(t,this,"argument-error"),this.redirectPersistenceManager=await Tl.create(this,[js(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let m=!1;const v=this._isInitialized?Promise.resolve():this._initializationPromise;if($e(v,this,"internal-error"),v.then(()=>{m||c(this.currentUser)}),typeof t=="function"){const E=e.addObserver(t,s,a);return()=>{m=!0,E()}}else{const E=e.addObserver(t);return()=>{m=!0,E()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ov(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(bi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&yI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Mh(i){return Fr(i)}class o_{constructor(e){this.auth=e,this.observer=null,this.addObserver=ox(t=>this.observer=t)}get next(){return $e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BI(i){fm=i}function UI(i){return fm.loadJS(i)}function WI(){return fm.gapiScript}function HI(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(i,e){const t=lm(i,"auth");if(t.isInitialized()){const a=t.getImmediate(),c=t.getOptions();if(ka(c,e??{}))return a;Ws(a,"already-initialized")}return t.initialize({options:e})}function $I(i,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(js);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function GI(i,e,t){const s=Mh(i);$e(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,c=av(e),{host:m,port:v}=ZI(e),E=v===null?"":`:${v}`,x={url:`${c}//${m}${E}/`},P=Object.freeze({host:m,port:v,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){$e(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),$e(ka(x,s.config.emulator)&&ka(P,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=x,s.emulatorConfig=P,s.settings.appVerificationDisabledForTesting=!0,Dl(m)?(Dy(`${c}//${m}${E}`),Oy("Auth",!0)):KI()}function av(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function ZI(i){const e=av(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const c=a[1];return{host:c,port:a_(s.substr(c.length+1))}}else{const[c,m]=s.split(":");return{host:c,port:a_(m)}}}function a_(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function KI(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Fs("not implemented")}_getIdTokenResponse(e){return Fs("not implemented")}_linkToIdToken(e,t){return Fs("not implemented")}_getReauthenticationResolver(e){return Fs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(i,e){return Zy(i,"POST","/v1/accounts:signInWithIdp",Lh(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="http://localhost";class Na extends lv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Na(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ws("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...c}=t;if(!s||!a)return null;const m=new Na(s,a);return m.idToken=c.idToken||void 0,m.accessToken=c.accessToken||void 0,m.secret=c.secret,m.nonce=c.nonce,m.pendingToken=c.pendingToken||null,m}_getIdTokenResponse(e){const t=this.buildRequest();return xl(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,xl(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xl(e,t)}buildRequest(){const e={requestUri:QI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ju(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu extends uv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends Uu{constructor(){super("facebook.com")}static credential(e){return Na._fromParams({providerId:No.PROVIDER_ID,signInMethod:No.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return No.credentialFromTaggedObject(e)}static credentialFromError(e){return No.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return No.credential(e.oauthAccessToken)}catch{return null}}}No.FACEBOOK_SIGN_IN_METHOD="facebook.com";No.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends Uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Na._fromParams({providerId:Lo.PROVIDER_ID,signInMethod:Lo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Lo.credentialFromTaggedObject(e)}static credentialFromError(e){return Lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Lo.credential(t,s)}catch{return null}}}Lo.GOOGLE_SIGN_IN_METHOD="google.com";Lo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends Uu{constructor(){super("github.com")}static credential(e){return Na._fromParams({providerId:Mo.PROVIDER_ID,signInMethod:Mo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mo.credentialFromTaggedObject(e)}static credentialFromError(e){return Mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mo.credential(e.oauthAccessToken)}catch{return null}}}Mo.GITHUB_SIGN_IN_METHOD="github.com";Mo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends Uu{constructor(){super("twitter.com")}static credential(e,t){return Na._fromParams({providerId:Do.PROVIDER_ID,signInMethod:Do.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Do.credentialFromTaggedObject(e)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Do.credential(t,s)}catch{return null}}}Do.TWITTER_SIGN_IN_METHOD="twitter.com";Do.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YI(i,e){return Zy(i,"POST","/v1/accounts:signUp",Lh(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const c=await Ci._fromIdTokenResponse(e,s,a),m=l_(s);return new Wo({user:c,providerId:m,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=l_(s);return new Wo({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function l_(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XI(i){var a;if(bi(i.app))return Promise.reject(jo(i));const e=Mh(i);if(await e._initializationPromise,(a=e.currentUser)!=null&&a.isAnonymous)return new Wo({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await YI(e,{returnSecureToken:!0}),s=await Wo._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends Gs{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,gh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new gh(e,t,s,a)}}function cv(i,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?gh._fromErrorAndOperation(i,c,e,s):c})}async function JI(i,e,t=!1){const s=await Ru(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Wo._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(i,e,t=!1){const{auth:s}=i;if(bi(s.app))return Promise.reject(jo(s));const a="reauthenticate";try{const c=await Ru(i,cv(s,a,e,i),t);$e(c.idToken,s,"internal-error");const m=hm(c.idToken);$e(m,s,"internal-error");const{sub:v}=m;return $e(i.uid===v,s,"user-mismatch"),Wo._forOperation(i,a,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Ws(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(i,e,t=!1){if(bi(i.app))return Promise.reject(jo(i));const s="signIn",a=await cv(i,s,e),c=await Wo._fromIdTokenResponse(i,s,a);return t||await i._updateCurrentUser(c.user),c}function nS(i,e,t,s){return Fr(i).onIdTokenChanged(e,t,s)}function rS(i,e,t){return Fr(i).beforeAuthStateChanged(e,t)}const _h="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_h,"1"),this.storage.removeItem(_h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=1e3,sS=10;class dv extends hv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((m,v,E)=>{this.notifyListeners(m,E)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const m=this.storage.getItem(s);!t&&this.localCache[s]===m||this.notifyListeners(s,m)},c=this.storage.getItem(s);DI()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,sS):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},iS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}dv.type="LOCAL";const oS=dv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv extends hv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}fv.type="SESSION";const mv=fv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new Dh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:c}=t.data,m=this.handlersMap[a];if(!(m!=null&&m.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const v=Array.from(m).map(async x=>x(t.origin,c)),E=await aS(v);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:E})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(i="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,m;return new Promise((v,E)=>{const x=mm("",20);a.port1.start();const P=setTimeout(()=>{E(new Error("unsupported_event"))},s);m={messageChannel:a,onMessage(I){const R=I;if(R.data.eventId===x)switch(R.data.status){case"ack":clearTimeout(P),c=setTimeout(()=>{E(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),v(R.data.response);break;default:clearTimeout(P),clearTimeout(c),E(new Error("invalid_response"));break}}},this.handlers.add(m),a.port1.addEventListener("message",m.onMessage),this.target.postMessage({eventType:e,eventId:x,data:t},[a.port2])}).finally(()=>{m&&this.removeMessageHandler(m)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(){return window}function uS(i){is().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(){return typeof is().WorkerGlobalScope<"u"&&typeof is().importScripts=="function"}async function cS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hS(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)==null?void 0:i.controller)||null}function dS(){return pv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="firebaseLocalStorageDb",fS=1,yh="firebaseLocalStorage",_v="fbase_key";class Wu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Oh(i,e){return i.transaction([yh],e?"readwrite":"readonly").objectStore(yh)}function mS(){const i=indexedDB.deleteDatabase(gv);return new Wu(i).toPromise()}function Vf(){const i=indexedDB.open(gv,fS);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(yh,{keyPath:_v})}catch(a){t(a)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(yh)?e(s):(s.close(),await mS(),e(await Vf()))})})}async function u_(i,e,t){const s=Oh(i,!0).put({[_v]:e,value:t});return new Wu(s).toPromise()}async function pS(i,e){const t=Oh(i,!1).get(e),s=await new Wu(t).toPromise();return s===void 0?null:s.value}function c_(i,e){const t=Oh(i,!0).delete(e);return new Wu(t).toPromise()}const gS=800,_S=3;class yv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>_S)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dh._getInstance(dS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await cS(),!this.activeServiceWorker)return;this.sender=new lS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vf();return await u_(e,_h,"1"),await c_(e,_h),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>u_(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>pS(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>c_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const c=Oh(a,!1).getAll();return new Wu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:c}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(c)&&(this.notifyListeners(a,c),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yv.type="LOCAL";const yS=yv;new Bu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(i,e){return e?js(e):($e(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm extends lv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wS(i){return tS(i.auth,new pm(i),i.bypassAuthState)}function ES(i){const{auth:e,user:t}=i;return $e(t,e,"internal-error"),eS(t,new pm(i),i.bypassAuthState)}async function TS(i){const{auth:e,user:t}=i;return $e(t,e,"internal-error"),JI(t,new pm(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,t,s,a,c=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:c,error:m,type:v}=e;if(m){this.reject(m);return}const E={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(v)(E))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wS;case"linkViaPopup":case"linkViaRedirect":return TS;case"reauthViaPopup":case"reauthViaRedirect":return ES;default:Ws(this.auth,"internal-error")}}resolve(e){Hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=new Bu(2e3,1e4);class vl extends vv{constructor(e,t,s,a,c){super(e,t,a,c),this.provider=s,this.authWindow=null,this.pollId=null,vl.currentPopupAction&&vl.currentPopupAction.cancel(),vl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $e(e,this.auth,"internal-error"),e}async onExecution(){Hs(this.filter.length===1,"Popup operations only handle one event");const e=mm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(rs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(rs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xS.get())};e()}}vl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="pendingRedirect",nh=new Map;class SS extends vv{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=nh.get(this.auth._key());if(!e){try{const s=await PS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}nh.set(this.auth._key(),e)}return this.bypassAuthState||nh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function PS(i,e){const t=AS(e),s=CS(i);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function bS(i,e){nh.set(i._key(),e)}function CS(i){return js(i._redirectPersistence)}function AS(i){return th(IS,i.config.apiKey,i.name)}async function kS(i,e,t=!1){if(bi(i.app))return Promise.reject(jo(i));const s=Mh(i),a=vS(s,e),m=await new SS(s,a,t).execute();return m&&!t&&(delete m.user._redirectEventId,await s._persistUserIfCurrent(m.user),await s._setRedirectUser(null,e)),m}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=600*1e3;class NS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!wv(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(rs(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RS&&this.cachedEventUids.clear(),this.cachedEventUids.has(h_(e))}saveEventToCache(e){this.cachedEventUids.add(h_(e)),this.lastProcessedEventTime=Date.now()}}function h_(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function wv({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function LS(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wv(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MS(i,e={}){return Vl(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OS=/^https?/;async function VS(i){if(i.config.emulator)return;const{authorizedDomains:e}=await MS(i);for(const t of e)try{if(zS(t))return}catch{}Ws(i,"unauthorized-domain")}function zS(i){const e=Df(),{protocol:t,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const m=new URL(i);return m.hostname===""&&s===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&m.hostname===s}if(!OS.test(t))return!1;if(DS.test(i))return s===i;const a=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=new Bu(3e4,6e4);function d_(){const i=is().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function jS(i){return new Promise((e,t)=>{var a,c,m;function s(){d_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{d_(),t(rs(i,"network-request-failed"))},timeout:FS.get()})}if((c=(a=is().gapi)==null?void 0:a.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((m=is().gapi)!=null&&m.load)s();else{const v=HI("iframefcb");return is()[v]=()=>{gapi.load?s():t(rs(i,"network-request-failed"))},UI(`${WI()}?onload=${v}`).catch(E=>t(E))}}).catch(e=>{throw rh=null,e})}let rh=null;function BS(i){return rh=rh||jS(i),rh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=new Bu(5e3,15e3),WS="__/auth/iframe",HS="emulator/auth/iframe",qS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$S=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GS(i){const e=i.config;$e(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?cm(e,HS):`https://${i.config.authDomain}/${WS}`,s={apiKey:e.apiKey,appName:i.name,v:Ol},a=$S.get(i.config.apiHost);a&&(s.eid=a);const c=i._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${ju(s).slice(1)}`}async function ZS(i){const e=await BS(i),t=is().gapi;return $e(t,i,"internal-error"),e.open({where:document.body,url:GS(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qS,dontclear:!0},s=>new Promise(async(a,c)=>{await s.restyle({setHideOnLeave:!1});const m=rs(i,"network-request-failed"),v=is().setTimeout(()=>{c(m)},US.get());function E(){is().clearTimeout(v),a(s)}s.ping(E).then(E,()=>{c(m)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QS=500,YS=600,XS="_blank",JS="http://localhost";class f_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eP(i,e,t,s=QS,a=YS){const c=Math.max((window.screen.availHeight-a)/2,0).toString(),m=Math.max((window.screen.availWidth-s)/2,0).toString();let v="";const E={...KS,width:s.toString(),height:a.toString(),top:c,left:m},x=Wn().toLowerCase();t&&(v=ev(x)?XS:t),Xy(x)&&(e=e||JS,E.scrollbars="yes");const P=Object.entries(E).reduce((R,[q,Q])=>`${R}${q}=${Q},`,"");if(MI(x)&&v!=="_self")return tP(e||"",v),new f_(null);const I=window.open(e||"",v,P);$e(I,i,"popup-blocked");try{I.focus()}catch{}return new f_(I)}function tP(i,e){const t=document.createElement("a");t.href=i,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP="__/auth/handler",rP="emulator/auth/handler",iP=encodeURIComponent("fac");async function m_(i,e,t,s,a,c){$e(i.config.authDomain,i,"auth-domain-config-required"),$e(i.config.apiKey,i,"invalid-api-key");const m={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:s,v:Ol,eventId:a};if(e instanceof uv){e.setDefaultLanguage(i.languageCode),m.providerId=e.providerId||"",sx(e.getCustomParameters())||(m.customParameters=JSON.stringify(e.getCustomParameters()));for(const[P,I]of Object.entries({}))m[P]=I}if(e instanceof Uu){const P=e.getScopes().filter(I=>I!=="");P.length>0&&(m.scopes=P.join(","))}i.tenantId&&(m.tid=i.tenantId);const v=m;for(const P of Object.keys(v))v[P]===void 0&&delete v[P];const E=await i._getAppCheckToken(),x=E?`#${iP}=${encodeURIComponent(E)}`:"";return`${sP(i)}?${ju(v).slice(1)}${x}`}function sP({config:i}){return i.emulator?cm(i,rP):`https://${i.authDomain}/${nP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="webStorageSupport";class oP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mv,this._completeRedirectFn=kS,this._overrideRedirectResult=bS}async _openPopup(e,t,s,a){var m;Hs((m=this.eventManagers[e._key()])==null?void 0:m.manager,"_initialize() not called before _openPopup()");const c=await m_(e,t,s,Df(),a);return eP(e,c,mm())}async _openRedirect(e,t,s,a){await this._originValidation(e);const c=await m_(e,t,s,Df(),a);return uS(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:c}=this.eventManagers[t];return a?Promise.resolve(a):(Hs(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await ZS(e),s=new NS(e);return t.register("authEvent",a=>($e(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wf,{type:wf},a=>{var m;const c=(m=a==null?void 0:a[0])==null?void 0:m[wf];c!==void 0&&t(!!c),Ws(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=VS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return sv()||Jy()||dm()}}const aP=oP;var p_="@firebase/auth",g_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cP(i){Cl(new Ra("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:m,authDomain:v}=s.options;$e(m&&!m.includes(":"),"invalid-api-key",{appName:s.name});const E={apiKey:m,authDomain:v,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ov(i)},x=new jI(s,a,c,E);return $I(x,t),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Cl(new Ra("auth-internal",e=>{const t=Mh(e.getProvider("auth").getImmediate());return(s=>new lP(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fo(p_,g_,uP(i)),Fo(p_,g_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=300,dP=My("authIdTokenMaxAge")||hP;let __=null;const fP=i=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>dP)return;const a=t==null?void 0:t.token;__!==a&&(__=a,await fetch(i,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function mP(i=jy()){const e=lm(i,"auth");if(e.isInitialized())return e.getImmediate();const t=qI(i,{popupRedirectResolver:aP,persistence:[yS,oS,mv]}),s=My("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const m=fP(c.toString());rS(t,m,()=>m(t.currentUser)),nS(t,v=>m(v))}}const a=Ny("auth");return a&&GI(t,`http://${a}`),t}function pP(){var i;return((i=document.getElementsByTagName("head"))==null?void 0:i[0])??document}BI({loadJS(i){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=a=>{const c=rs("internal-error");c.customData=a,t(c)},s.type="text/javascript",s.charset="UTF-8",pP().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cP("Browser");var gP="firebase",_P="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fo(gP,_P,"app");var y_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bo,Ev;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,k){function D(){}D.prototype=k.prototype,F.F=k.prototype,F.prototype=new D,F.prototype.constructor=F,F.D=function(B,V,U){for(var N=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)N[Ge-2]=arguments[Ge];return k.prototype[V].apply(B,N)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(F,k,D){D||(D=0);const B=Array(16);if(typeof k=="string")for(var V=0;V<16;++V)B[V]=k.charCodeAt(D++)|k.charCodeAt(D++)<<8|k.charCodeAt(D++)<<16|k.charCodeAt(D++)<<24;else for(V=0;V<16;++V)B[V]=k[D++]|k[D++]<<8|k[D++]<<16|k[D++]<<24;k=F.g[0],D=F.g[1],V=F.g[2];let U=F.g[3],N;N=k+(U^D&(V^U))+B[0]+3614090360&4294967295,k=D+(N<<7&4294967295|N>>>25),N=U+(V^k&(D^V))+B[1]+3905402710&4294967295,U=k+(N<<12&4294967295|N>>>20),N=V+(D^U&(k^D))+B[2]+606105819&4294967295,V=U+(N<<17&4294967295|N>>>15),N=D+(k^V&(U^k))+B[3]+3250441966&4294967295,D=V+(N<<22&4294967295|N>>>10),N=k+(U^D&(V^U))+B[4]+4118548399&4294967295,k=D+(N<<7&4294967295|N>>>25),N=U+(V^k&(D^V))+B[5]+1200080426&4294967295,U=k+(N<<12&4294967295|N>>>20),N=V+(D^U&(k^D))+B[6]+2821735955&4294967295,V=U+(N<<17&4294967295|N>>>15),N=D+(k^V&(U^k))+B[7]+4249261313&4294967295,D=V+(N<<22&4294967295|N>>>10),N=k+(U^D&(V^U))+B[8]+1770035416&4294967295,k=D+(N<<7&4294967295|N>>>25),N=U+(V^k&(D^V))+B[9]+2336552879&4294967295,U=k+(N<<12&4294967295|N>>>20),N=V+(D^U&(k^D))+B[10]+4294925233&4294967295,V=U+(N<<17&4294967295|N>>>15),N=D+(k^V&(U^k))+B[11]+2304563134&4294967295,D=V+(N<<22&4294967295|N>>>10),N=k+(U^D&(V^U))+B[12]+1804603682&4294967295,k=D+(N<<7&4294967295|N>>>25),N=U+(V^k&(D^V))+B[13]+4254626195&4294967295,U=k+(N<<12&4294967295|N>>>20),N=V+(D^U&(k^D))+B[14]+2792965006&4294967295,V=U+(N<<17&4294967295|N>>>15),N=D+(k^V&(U^k))+B[15]+1236535329&4294967295,D=V+(N<<22&4294967295|N>>>10),N=k+(V^U&(D^V))+B[1]+4129170786&4294967295,k=D+(N<<5&4294967295|N>>>27),N=U+(D^V&(k^D))+B[6]+3225465664&4294967295,U=k+(N<<9&4294967295|N>>>23),N=V+(k^D&(U^k))+B[11]+643717713&4294967295,V=U+(N<<14&4294967295|N>>>18),N=D+(U^k&(V^U))+B[0]+3921069994&4294967295,D=V+(N<<20&4294967295|N>>>12),N=k+(V^U&(D^V))+B[5]+3593408605&4294967295,k=D+(N<<5&4294967295|N>>>27),N=U+(D^V&(k^D))+B[10]+38016083&4294967295,U=k+(N<<9&4294967295|N>>>23),N=V+(k^D&(U^k))+B[15]+3634488961&4294967295,V=U+(N<<14&4294967295|N>>>18),N=D+(U^k&(V^U))+B[4]+3889429448&4294967295,D=V+(N<<20&4294967295|N>>>12),N=k+(V^U&(D^V))+B[9]+568446438&4294967295,k=D+(N<<5&4294967295|N>>>27),N=U+(D^V&(k^D))+B[14]+3275163606&4294967295,U=k+(N<<9&4294967295|N>>>23),N=V+(k^D&(U^k))+B[3]+4107603335&4294967295,V=U+(N<<14&4294967295|N>>>18),N=D+(U^k&(V^U))+B[8]+1163531501&4294967295,D=V+(N<<20&4294967295|N>>>12),N=k+(V^U&(D^V))+B[13]+2850285829&4294967295,k=D+(N<<5&4294967295|N>>>27),N=U+(D^V&(k^D))+B[2]+4243563512&4294967295,U=k+(N<<9&4294967295|N>>>23),N=V+(k^D&(U^k))+B[7]+1735328473&4294967295,V=U+(N<<14&4294967295|N>>>18),N=D+(U^k&(V^U))+B[12]+2368359562&4294967295,D=V+(N<<20&4294967295|N>>>12),N=k+(D^V^U)+B[5]+4294588738&4294967295,k=D+(N<<4&4294967295|N>>>28),N=U+(k^D^V)+B[8]+2272392833&4294967295,U=k+(N<<11&4294967295|N>>>21),N=V+(U^k^D)+B[11]+1839030562&4294967295,V=U+(N<<16&4294967295|N>>>16),N=D+(V^U^k)+B[14]+4259657740&4294967295,D=V+(N<<23&4294967295|N>>>9),N=k+(D^V^U)+B[1]+2763975236&4294967295,k=D+(N<<4&4294967295|N>>>28),N=U+(k^D^V)+B[4]+1272893353&4294967295,U=k+(N<<11&4294967295|N>>>21),N=V+(U^k^D)+B[7]+4139469664&4294967295,V=U+(N<<16&4294967295|N>>>16),N=D+(V^U^k)+B[10]+3200236656&4294967295,D=V+(N<<23&4294967295|N>>>9),N=k+(D^V^U)+B[13]+681279174&4294967295,k=D+(N<<4&4294967295|N>>>28),N=U+(k^D^V)+B[0]+3936430074&4294967295,U=k+(N<<11&4294967295|N>>>21),N=V+(U^k^D)+B[3]+3572445317&4294967295,V=U+(N<<16&4294967295|N>>>16),N=D+(V^U^k)+B[6]+76029189&4294967295,D=V+(N<<23&4294967295|N>>>9),N=k+(D^V^U)+B[9]+3654602809&4294967295,k=D+(N<<4&4294967295|N>>>28),N=U+(k^D^V)+B[12]+3873151461&4294967295,U=k+(N<<11&4294967295|N>>>21),N=V+(U^k^D)+B[15]+530742520&4294967295,V=U+(N<<16&4294967295|N>>>16),N=D+(V^U^k)+B[2]+3299628645&4294967295,D=V+(N<<23&4294967295|N>>>9),N=k+(V^(D|~U))+B[0]+4096336452&4294967295,k=D+(N<<6&4294967295|N>>>26),N=U+(D^(k|~V))+B[7]+1126891415&4294967295,U=k+(N<<10&4294967295|N>>>22),N=V+(k^(U|~D))+B[14]+2878612391&4294967295,V=U+(N<<15&4294967295|N>>>17),N=D+(U^(V|~k))+B[5]+4237533241&4294967295,D=V+(N<<21&4294967295|N>>>11),N=k+(V^(D|~U))+B[12]+1700485571&4294967295,k=D+(N<<6&4294967295|N>>>26),N=U+(D^(k|~V))+B[3]+2399980690&4294967295,U=k+(N<<10&4294967295|N>>>22),N=V+(k^(U|~D))+B[10]+4293915773&4294967295,V=U+(N<<15&4294967295|N>>>17),N=D+(U^(V|~k))+B[1]+2240044497&4294967295,D=V+(N<<21&4294967295|N>>>11),N=k+(V^(D|~U))+B[8]+1873313359&4294967295,k=D+(N<<6&4294967295|N>>>26),N=U+(D^(k|~V))+B[15]+4264355552&4294967295,U=k+(N<<10&4294967295|N>>>22),N=V+(k^(U|~D))+B[6]+2734768916&4294967295,V=U+(N<<15&4294967295|N>>>17),N=D+(U^(V|~k))+B[13]+1309151649&4294967295,D=V+(N<<21&4294967295|N>>>11),N=k+(V^(D|~U))+B[4]+4149444226&4294967295,k=D+(N<<6&4294967295|N>>>26),N=U+(D^(k|~V))+B[11]+3174756917&4294967295,U=k+(N<<10&4294967295|N>>>22),N=V+(k^(U|~D))+B[2]+718787259&4294967295,V=U+(N<<15&4294967295|N>>>17),N=D+(U^(V|~k))+B[9]+3951481745&4294967295,F.g[0]=F.g[0]+k&4294967295,F.g[1]=F.g[1]+(V+(N<<21&4294967295|N>>>11))&4294967295,F.g[2]=F.g[2]+V&4294967295,F.g[3]=F.g[3]+U&4294967295}s.prototype.v=function(F,k){k===void 0&&(k=F.length);const D=k-this.blockSize,B=this.C;let V=this.h,U=0;for(;U<k;){if(V==0)for(;U<=D;)a(this,F,U),U+=this.blockSize;if(typeof F=="string"){for(;U<k;)if(B[V++]=F.charCodeAt(U++),V==this.blockSize){a(this,B),V=0;break}}else for(;U<k;)if(B[V++]=F[U++],V==this.blockSize){a(this,B),V=0;break}}this.h=V,this.o+=k},s.prototype.A=function(){var F=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);F[0]=128;for(var k=1;k<F.length-8;++k)F[k]=0;k=this.o*8;for(var D=F.length-8;D<F.length;++D)F[D]=k&255,k/=256;for(this.v(F),F=Array(16),k=0,D=0;D<4;++D)for(let B=0;B<32;B+=8)F[k++]=this.g[D]>>>B&255;return F};function c(F,k){var D=v;return Object.prototype.hasOwnProperty.call(D,F)?D[F]:D[F]=k(F)}function m(F,k){this.h=k;const D=[];let B=!0;for(let V=F.length-1;V>=0;V--){const U=F[V]|0;B&&U==k||(D[V]=U,B=!1)}this.g=D}var v={};function E(F){return-128<=F&&F<128?c(F,function(k){return new m([k|0],k<0?-1:0)}):new m([F|0],F<0?-1:0)}function x(F){if(isNaN(F)||!isFinite(F))return I;if(F<0)return te(x(-F));const k=[];let D=1;for(let B=0;F>=D;B++)k[B]=F/D|0,D*=4294967296;return new m(k,0)}function P(F,k){if(F.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(F.charAt(0)=="-")return te(P(F.substring(1),k));if(F.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=x(Math.pow(k,8));let B=I;for(let U=0;U<F.length;U+=8){var V=Math.min(8,F.length-U);const N=parseInt(F.substring(U,U+V),k);V<8?(V=x(Math.pow(k,V)),B=B.j(V).add(x(N))):(B=B.j(D),B=B.add(x(N)))}return B}var I=E(0),R=E(1),q=E(16777216);i=m.prototype,i.m=function(){if(ne(this))return-te(this).m();let F=0,k=1;for(let D=0;D<this.g.length;D++){const B=this.i(D);F+=(B>=0?B:4294967296+B)*k,k*=4294967296}return F},i.toString=function(F){if(F=F||10,F<2||36<F)throw Error("radix out of range: "+F);if(Q(this))return"0";if(ne(this))return"-"+te(this).toString(F);const k=x(Math.pow(F,6));var D=this;let B="";for(;;){const V=xe(D,k).g;D=ke(D,V.j(k));let U=((D.g.length>0?D.g[0]:D.h)>>>0).toString(F);if(D=V,Q(D))return U+B;for(;U.length<6;)U="0"+U;B=U+B}},i.i=function(F){return F<0?0:F<this.g.length?this.g[F]:this.h};function Q(F){if(F.h!=0)return!1;for(let k=0;k<F.g.length;k++)if(F.g[k]!=0)return!1;return!0}function ne(F){return F.h==-1}i.l=function(F){return F=ke(this,F),ne(F)?-1:Q(F)?0:1};function te(F){const k=F.g.length,D=[];for(let B=0;B<k;B++)D[B]=~F.g[B];return new m(D,~F.h).add(R)}i.abs=function(){return ne(this)?te(this):this},i.add=function(F){const k=Math.max(this.g.length,F.g.length),D=[];let B=0;for(let V=0;V<=k;V++){let U=B+(this.i(V)&65535)+(F.i(V)&65535),N=(U>>>16)+(this.i(V)>>>16)+(F.i(V)>>>16);B=N>>>16,U&=65535,N&=65535,D[V]=N<<16|U}return new m(D,D[D.length-1]&-2147483648?-1:0)};function ke(F,k){return F.add(te(k))}i.j=function(F){if(Q(this)||Q(F))return I;if(ne(this))return ne(F)?te(this).j(te(F)):te(te(this).j(F));if(ne(F))return te(this.j(te(F)));if(this.l(q)<0&&F.l(q)<0)return x(this.m()*F.m());const k=this.g.length+F.g.length,D=[];for(var B=0;B<2*k;B++)D[B]=0;for(B=0;B<this.g.length;B++)for(let V=0;V<F.g.length;V++){const U=this.i(B)>>>16,N=this.i(B)&65535,Ge=F.i(V)>>>16,at=F.i(V)&65535;D[2*B+2*V]+=N*at,me(D,2*B+2*V),D[2*B+2*V+1]+=U*at,me(D,2*B+2*V+1),D[2*B+2*V+1]+=N*Ge,me(D,2*B+2*V+1),D[2*B+2*V+2]+=U*Ge,me(D,2*B+2*V+2)}for(F=0;F<k;F++)D[F]=D[2*F+1]<<16|D[2*F];for(F=k;F<2*k;F++)D[F]=0;return new m(D,0)};function me(F,k){for(;(F[k]&65535)!=F[k];)F[k+1]+=F[k]>>>16,F[k]&=65535,k++}function we(F,k){this.g=F,this.h=k}function xe(F,k){if(Q(k))throw Error("division by zero");if(Q(F))return new we(I,I);if(ne(F))return k=xe(te(F),k),new we(te(k.g),te(k.h));if(ne(k))return k=xe(F,te(k)),new we(te(k.g),k.h);if(F.g.length>30){if(ne(F)||ne(k))throw Error("slowDivide_ only works with positive integers.");for(var D=R,B=k;B.l(F)<=0;)D=De(D),B=De(B);var V=Oe(D,1),U=Oe(B,1);for(B=Oe(B,2),D=Oe(D,2);!Q(B);){var N=U.add(B);N.l(F)<=0&&(V=V.add(D),U=N),B=Oe(B,1),D=Oe(D,1)}return k=ke(F,V.j(k)),new we(V,k)}for(V=I;F.l(k)>=0;){for(D=Math.max(1,Math.floor(F.m()/k.m())),B=Math.ceil(Math.log(D)/Math.LN2),B=B<=48?1:Math.pow(2,B-48),U=x(D),N=U.j(k);ne(N)||N.l(F)>0;)D-=B,U=x(D),N=U.j(k);Q(U)&&(U=R),V=V.add(U),F=ke(F,N)}return new we(V,F)}i.B=function(F){return xe(this,F).h},i.and=function(F){const k=Math.max(this.g.length,F.g.length),D=[];for(let B=0;B<k;B++)D[B]=this.i(B)&F.i(B);return new m(D,this.h&F.h)},i.or=function(F){const k=Math.max(this.g.length,F.g.length),D=[];for(let B=0;B<k;B++)D[B]=this.i(B)|F.i(B);return new m(D,this.h|F.h)},i.xor=function(F){const k=Math.max(this.g.length,F.g.length),D=[];for(let B=0;B<k;B++)D[B]=this.i(B)^F.i(B);return new m(D,this.h^F.h)};function De(F){const k=F.g.length+1,D=[];for(let B=0;B<k;B++)D[B]=F.i(B)<<1|F.i(B-1)>>>31;return new m(D,F.h)}function Oe(F,k){const D=k>>5;k%=32;const B=F.g.length-D,V=[];for(let U=0;U<B;U++)V[U]=k>0?F.i(U+D)>>>k|F.i(U+D+1)<<32-k:F.i(U+D);return new m(V,F.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Ev=s,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.B,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=x,m.fromString=P,Bo=m}).apply(typeof y_<"u"?y_:typeof self<"u"?self:typeof window<"u"?window:{});var Kc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tv,vu,xv,ih,zf,Iv,Sv,Pv;(function(){var i,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kc=="object"&&Kc];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var s=t(this);function a(h,y){if(y)e:{var T=s;h=h.split(".");for(var C=0;C<h.length-1;C++){var H=h[C];if(!(H in T))break e;T=T[H]}h=h[h.length-1],C=T[h],y=y(C),y!=C&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var T=[],C;for(C in y)Object.prototype.hasOwnProperty.call(y,C)&&T.push([C,y[C]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},m=this||self;function v(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function E(h,y,T){return h.call.apply(h.bind,arguments)}function x(h,y,T){return x=E,x.apply(null,arguments)}function P(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var C=T.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function I(h,y){function T(){}T.prototype=y.prototype,h.Z=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(C,H,K){for(var de=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)de[Ue-2]=arguments[Ue];return y.prototype[H].apply(C,de)}}var R=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function q(h){const y=h.length;if(y>0){const T=Array(y);for(let C=0;C<y;C++)T[C]=h[C];return T}return[]}function Q(h,y){for(let C=1;C<arguments.length;C++){const H=arguments[C];var T=typeof H;if(T=T!="object"?T:H?Array.isArray(H)?"array":T:"null",T=="array"||T=="object"&&typeof H.length=="number"){T=h.length||0;const K=H.length||0;h.length=T+K;for(let de=0;de<K;de++)h[T+de]=H[de]}else h.push(H)}}class ne{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function te(h){m.setTimeout(()=>{throw h},0)}function ke(){var h=F;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class me{constructor(){this.h=this.g=null}add(y,T){const C=we.get();C.set(y,T),this.h?this.h.next=C:this.g=C,this.h=C}}var we=new ne(()=>new xe,h=>h.reset());class xe{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let De,Oe=!1,F=new me,k=()=>{const h=Promise.resolve(void 0);De=()=>{h.then(D)}};function D(){for(var h;h=ke();){try{h.h.call(h.g)}catch(T){te(T)}var y=we;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}Oe=!1}function B(){this.u=this.u,this.C=this.C}B.prototype.u=!1,B.prototype.dispose=function(){this.u||(this.u=!0,this.N())},B.prototype[Symbol.dispose]=function(){this.dispose()},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};m.addEventListener("test",T,y),m.removeEventListener("test",T,y)}catch{}return h})();function N(h){return/^[\s\xa0]*$/.test(h)}function Ge(h,y){V.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}I(Ge,V),Ge.prototype.init=function(h,y){const T=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ge.Z.h.call(this)},Ge.prototype.h=function(){Ge.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var at="closure_listenable_"+(Math.random()*1e6|0),Ce=0;function ge(h,y,T,C,H){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!C,this.ha=H,this.key=++Ce,this.da=this.fa=!1}function X(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function _e(h,y,T){for(const C in h)y.call(T,h[C],C,h)}function re(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function O(h){const y={};for(const T in h)y[T]=h[T];return y}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(h,y){let T,C;for(let H=1;H<arguments.length;H++){C=arguments[H];for(T in C)h[T]=C[T];for(let K=0;K<Y.length;K++)T=Y[K],Object.prototype.hasOwnProperty.call(C,T)&&(h[T]=C[T])}}function ye(h){this.src=h,this.g={},this.h=0}ye.prototype.add=function(h,y,T,C,H){const K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);const de=ce(h,y,C,H);return de>-1?(y=h[de],T||(y.fa=!1)):(y=new ge(y,this.src,K,!!C,H),y.fa=T,h.push(y)),y};function Te(h,y){const T=y.type;if(T in h.g){var C=h.g[T],H=Array.prototype.indexOf.call(C,y,void 0),K;(K=H>=0)&&Array.prototype.splice.call(C,H,1),K&&(X(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function ce(h,y,T,C){for(let H=0;H<h.length;++H){const K=h[H];if(!K.da&&K.listener==y&&K.capture==!!T&&K.ha==C)return H}return-1}var Ze="closure_lm_"+(Math.random()*1e6|0),We={};function rt(h,y,T,C,H){if(Array.isArray(y)){for(let K=0;K<y.length;K++)rt(h,y[K],T,C,H);return null}return T=br(T),h&&h[at]?h.J(y,T,v(C)?!!C.capture:!1,H):Rt(h,y,T,!1,C,H)}function Rt(h,y,T,C,H,K){if(!y)throw Error("Invalid event type");const de=v(H)?!!H.capture:!!H;let Ue=Ur(h);if(Ue||(h[Ze]=Ue=new ye(h)),T=Ue.add(y,T,C,de,K),T.proxy)return T;if(C=jr(),T.proxy=C,C.src=h,C.listener=T,h.addEventListener)U||(H=de),H===void 0&&(H=!1),h.addEventListener(y.toString(),C,H);else if(h.attachEvent)h.attachEvent(Br(y.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return T}function jr(){function h(T){return y.call(h.src,h.listener,T)}const y=us;return h}function ir(h,y,T,C,H){if(Array.isArray(y))for(var K=0;K<y.length;K++)ir(h,y[K],T,C,H);else C=v(C)?!!C.capture:!!C,T=br(T),h&&h[at]?(h=h.i,K=String(y).toString(),K in h.g&&(y=h.g[K],T=ce(y,T,C,H),T>-1&&(X(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete h.g[K],h.h--)))):h&&(h=Ur(h))&&(y=h.g[y.toString()],h=-1,y&&(h=ce(y,T,C,H)),(T=h>-1?y[h]:null)&&sr(T))}function sr(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[at])Te(y.i,h);else{var T=h.type,C=h.proxy;y.removeEventListener?y.removeEventListener(T,C,h.capture):y.detachEvent?y.detachEvent(Br(T),C):y.addListener&&y.removeListener&&y.removeListener(C),(T=Ur(y))?(Te(T,h),T.h==0&&(T.src=null,y[Ze]=null)):X(h)}}}function Br(h){return h in We?We[h]:We[h]="on"+h}function us(h,y){if(h.da)h=!0;else{y=new Ge(y,this);const T=h.listener,C=h.ha||h.src;h.fa&&sr(h),h=T.call(C,y)}return h}function Ur(h){return h=h[Ze],h instanceof ye?h:null}var gn="__closure_events_fn_"+(Math.random()*1e9>>>0);function br(h){return typeof h=="function"?h:(h[gn]||(h[gn]=function(y){return h.handleEvent(y)}),h[gn])}function ft(){B.call(this),this.i=new ye(this),this.M=this,this.G=null}I(ft,B),ft.prototype[at]=!0,ft.prototype.removeEventListener=function(h,y,T,C){ir(this,h,y,T,C)};function St(h,y){var T,C=h.G;if(C)for(T=[];C;C=C.G)T.push(C);if(h=h.M,C=y.type||y,typeof y=="string")y=new V(y,h);else if(y instanceof V)y.target=y.target||h;else{var H=y;y=new V(C,h),fe(y,H)}H=!0;let K,de;if(T)for(de=T.length-1;de>=0;de--)K=y.g=T[de],H=_n(K,C,!0,y)&&H;if(K=y.g=h,H=_n(K,C,!0,y)&&H,H=_n(K,C,!1,y)&&H,T)for(de=0;de<T.length;de++)K=y.g=T[de],H=_n(K,C,!1,y)&&H}ft.prototype.N=function(){if(ft.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const T=h.g[y];for(let C=0;C<T.length;C++)X(T[C]);delete h.g[y],h.h--}}this.G=null},ft.prototype.J=function(h,y,T,C){return this.i.add(String(h),y,!1,T,C)},ft.prototype.K=function(h,y,T,C){return this.i.add(String(h),y,!0,T,C)};function _n(h,y,T,C){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let K=0;K<y.length;++K){const de=y[K];if(de&&!de.da&&de.capture==T){const Ue=de.listener,ct=de.ha||de.src;de.fa&&Te(h.i,de),H=Ue.call(ct,C)!==!1&&H}}return H&&!C.defaultPrevented}function Ut(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:m.setTimeout(h,y||0)}function Hn(h){h.g=Ut(()=>{h.g=null,h.i&&(h.i=!1,Hn(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Zs extends B{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Hn(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wr(h){B.call(this),this.h=h,this.g={}}I(Wr,B);var or=[];function pi(h){_e(h.g,function(y,T){this.g.hasOwnProperty(T)&&sr(y)},h),h.g={}}Wr.prototype.N=function(){Wr.Z.N.call(this),pi(this)},Wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ar=m.JSON.stringify,Li=m.JSON.parse,yn=class{stringify(h){return m.JSON.stringify(h,void 0)}parse(h){return m.JSON.parse(h,void 0)}};function lr(){}function Cr(){}var Ar={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Hr(){V.call(this,"d")}I(Hr,V);function gi(){V.call(this,"c")}I(gi,V);var An={},ur=null;function cr(){return ur=ur||new ft}An.Ia="serverreachability";function vn(h){V.call(this,An.Ia,h)}I(vn,V);function hr(h){const y=cr();St(y,new vn(y))}An.STAT_EVENT="statevent";function dr(h,y){V.call(this,An.STAT_EVENT,h),this.stat=y}I(dr,V);function Tt(h){const y=cr();St(y,new dr(y,h))}An.Ja="timingevent";function Mi(h,y){V.call(this,An.Ja,h),this.size=y}I(Mi,V);function Be(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){h()},y)}function wt(){this.g=!0}wt.prototype.ua=function(){this.g=!1};function Ot(h,y,T,C,H,K){h.info(function(){if(h.g)if(K){var de="",Ue=K.split("&");for(let mt=0;mt<Ue.length;mt++){var ct=Ue[mt].split("=");if(ct.length>1){const zt=ct[0];ct=ct[1];const Xn=zt.split("_");de=Xn.length>=2&&Xn[1]=="type"?de+(zt+"="+ct+"&"):de+(zt+"=redacted&")}}}else de=null;else de=K;return"XMLHTTP REQ ("+C+") [attempt "+H+"]: "+y+`
`+T+`
`+de})}function Kt(h,y,T,C,H,K,de){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+H+"]: "+y+`
`+T+`
`+K+" "+de})}function wn(h,y,T,C){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Wt(h,T)+(C?" "+C:"")})}function Pt(h,y){h.info(function(){return"TIMEOUT: "+y})}wt.prototype.info=function(){};function Wt(h,y){if(!h.g)return y;if(!y)return null;try{const K=JSON.parse(y);if(K){for(h=0;h<K.length;h++)if(Array.isArray(K[h])){var T=K[h];if(!(T.length<2)){var C=T[1];if(Array.isArray(C)&&!(C.length<1)){var H=C[0];if(H!="noop"&&H!="stop"&&H!="close")for(let de=1;de<C.length;de++)C[de]=""}}}}return ar(K)}catch{return y}}var qn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ht={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},un;function Vt(){}I(Vt,lr),Vt.prototype.g=function(){return new XMLHttpRequest},un=new Vt;function ve(h){return encodeURIComponent(String(h))}function Di(h){var y=1;h=h.split(":");const T=[];for(;y>0&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function $n(h,y,T,C){this.j=h,this.i=y,this.l=T,this.S=C||1,this.V=new Wr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qo}function Qo(){this.i=null,this.g="",this.h=!1}var Yo={},cs={};function fr(h,y,T){h.M=1,h.A=gt(En(y)),h.u=T,h.R=!0,qr(h,null)}function qr(h,y){h.F=Date.now(),hs(h),h.B=En(h.A);var T=h.B,C=h.S;Array.isArray(C)||(C=[String(C)]),ys(T.i,"t",C),h.C=0,T=h.j.L,h.h=new Qo,h.g=sa(h.j,T?y:null,!h.u),h.P>0&&(h.O=new Zs(x(h.Y,h,h.g),h.P)),y=h.V,T=h.g,C=h.ba;var H="readystatechange";Array.isArray(H)||(H&&(or[0]=H.toString()),H=or);for(let K=0;K<H.length;K++){const de=rt(T,H[K],C||y.handleEvent,!1,y.h||y);if(!de)break;y.g[de.key]=de}y=h.J?O(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),hr(),Ot(h.i,h.v,h.B,h.l,h.S,h.u)}$n.prototype.ba=function(h){h=h.target;const y=this.O;y&&Xr(h)==3?y.j():this.Y(h)},$n.prototype.Y=function(h){try{if(h==this.g)e:{const Ue=Xr(this.g),ct=this.g.ya(),mt=this.g.ca();if(!(Ue<3)&&(Ue!=3||this.g&&(this.h.h||this.g.la()||na(this.g)))){this.K||Ue!=4||ct==7||(ct==8||mt<=0?hr(3):hr(2)),ds(this);var y=this.g.ca();this.X=y;var T=Xo(this);if(this.o=y==200,Kt(this.i,this.v,this.B,this.l,this.S,Ue,y),this.o){if(this.U&&!this.L){t:{if(this.g){var C,H=this.g;if((C=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(C)){var K=C;break t}}K=null}if(h=K)wn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,It(this,h);else{this.o=!1,this.m=3,Tt(12),mr(this),fs(this);break e}}if(this.R){h=!0;let zt;for(;!this.K&&this.C<T.length;)if(zt=Ba(this,T),zt==cs){Ue==4&&(this.m=4,Tt(14),h=!1),wn(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==Yo){this.m=4,Tt(15),wn(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else wn(this.i,this.l,zt,null),It(this,zt);if(ja(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||T.length!=0||this.h.h||(this.m=1,Tt(16),h=!1),this.o=this.o&&h,!h)wn(this.i,this.l,T,"[Invalid Chunked Response]"),mr(this),fs(this);else if(T.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Is(de),de.P=!0,Tt(11))}}else wn(this.i,this.l,T,null),It(this,T);Ue==4&&mr(this),this.o&&!this.K&&(Ue==4?xn(this.j,this):(this.o=!1,hs(this)))}else Es(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),mr(this),fs(this)}}}catch{}finally{}};function Xo(h){if(!ja(h))return h.g.la();const y=na(h.g);if(y==="")return"";let T="";const C=y.length,H=Xr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return mr(h),fs(h),"";h.h.i=new m.TextDecoder}for(let K=0;K<C;K++)h.h.h=!0,T+=h.h.i.decode(y[K],{stream:!(H&&K==C-1)});return y.length=0,h.h.g+=T,h.C=0,h.h.g}function ja(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ba(h,y){var T=h.C,C=y.indexOf(`
`,T);return C==-1?cs:(T=Number(y.substring(T,C)),isNaN(T)?Yo:(C+=1,C+T>y.length?cs:(y=y.slice(C,C+T),h.C=C+T,y)))}$n.prototype.cancel=function(){this.K=!0,mr(this)};function hs(h){h.T=Date.now()+h.H,Jo(h,h.H)}function Jo(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Be(x(h.aa,h),y)}function ds(h){h.D&&(m.clearTimeout(h.D),h.D=null)}$n.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Pt(this.i,this.B),this.M!=2&&(hr(),Tt(17)),mr(this),this.m=2,fs(this)):Jo(this,this.T-h)};function fs(h){h.j.I==0||h.K||xn(h.j,h)}function mr(h){ds(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,pi(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function It(h,y){try{var T=h.j;if(T.I!=0&&(T.g==h||ps(T.h,h))){if(!h.L&&ps(T.h,h)&&T.I==3){try{var C=T.Ba.g.parse(y)}catch{C=null}if(Array.isArray(C)&&C.length==3){var H=C;if(H[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)Xs(T),Qn(T);else break e;ei(T),Tt(18)}}else T.xa=H[1],0<T.xa-T.K&&H[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Be(x(T.Va,T),6e3));ms(T.h)<=1&&T.ta&&(T.ta=void 0)}else Ln(T,11)}else if((h.L||T.g==h)&&Xs(T),!N(y))for(H=T.Ba.g.parse(y),y=0;y<H.length;y++){let mt=H[y];const zt=mt[0];if(!(zt<=T.K))if(T.K=zt,mt=mt[1],T.I==2)if(mt[0]=="c"){T.M=mt[1],T.ba=mt[2];const Xn=mt[3];Xn!=null&&(T.ka=Xn,T.j.info("VER="+T.ka));const Nr=mt[4];Nr!=null&&(T.za=Nr,T.j.info("SVER="+T.za));const yr=mt[5];yr!=null&&typeof yr=="number"&&yr>0&&(C=1.5*yr,T.O=C,T.j.info("backChannelRequestTimeoutMs_="+C)),C=T;const ni=h.g;if(ni){const ro=ni.g?ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ro){var K=C.h;K.g||ro.indexOf("spdy")==-1&&ro.indexOf("quic")==-1&&ro.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&($r(K,K.h),K.h=null))}if(C.G){const io=ni.g?ni.g.getResponseHeader("X-HTTP-Session-Id"):null;io&&(C.wa=io,Ie(C.J,C.G,io))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),C=T;var de=h;if(C.na=eo(C,C.L?C.ba:null,C.W),de.L){Oi(C.h,de);var Ue=de,ct=C.O;ct&&(Ue.H=ct),Ue.D&&(ds(Ue),hs(Ue)),C.g=de}else rn(C);T.i.length>0&&Yn(T)}else mt[0]!="stop"&&mt[0]!="close"||Ln(T,7);else T.I==3&&(mt[0]=="stop"||mt[0]=="close"?mt[0]=="stop"?Ln(T,7):et(T):mt[0]!="noop"&&T.l&&T.l.qa(mt),T.A=0)}}hr(4)}catch{}}var Wl=class{constructor(h,y){this.g=h,this.map=y}};function Ks(h){this.l=h||10,m.PerformanceNavigationTiming?(h=m.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ea(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ms(h){return h.h?1:h.g?h.g.size:0}function ps(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function $r(h,y){h.g?h.g.add(y):h.h=y}function Oi(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Ks.prototype.cancel=function(){if(this.i=kn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function kn(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.G);return y}return q(h.i)}var Vi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ke(h,y){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const C=h[T].indexOf("=");let H,K=null;C>=0?(H=h[T].substring(0,C),K=h[T].substring(C+1)):H=h[T],y(H,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function ut(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof ut?(this.l=h.l,pr(this,h.j),this.o=h.o,this.g=h.g,Tn(this,h.u),this.h=h.h,Gr(this,Fi(h.i)),this.m=h.m):h&&(y=String(h).match(Vi))?(this.l=!1,pr(this,y[1]||"",!0),this.o=_i(y[2]||""),this.g=_i(y[3]||"",!0),Tn(this,y[4]),this.h=_i(y[5]||"",!0),Gr(this,y[6]||"",!0),this.m=_i(y[7]||"")):(this.l=!1,this.i=new Je(null,this.l))}ut.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Zr(y,ta,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Zr(y,ta,!0),"@"),h.push(ve(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Zr(T,T.charAt(0)=="/"?Gn:zi,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Zr(T,kr)),h.join("")},ut.prototype.resolve=function(h){const y=En(this);let T=!!h.j;T?pr(y,h.j):T=!!h.o,T?y.o=h.o:T=!!h.g,T?y.g=h.g:T=h.u!=null;var C=h.h;if(T)Tn(y,h.u);else if(T=!!h.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var H=y.h.lastIndexOf("/");H!=-1&&(C=y.h.slice(0,H+1)+C)}if(H=C,H==".."||H==".")C="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){C=H.lastIndexOf("/",0)==0,H=H.split("/");const K=[];for(let de=0;de<H.length;){const Ue=H[de++];Ue=="."?C&&de==H.length&&K.push(""):Ue==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),C&&de==H.length&&K.push("")):(K.push(Ue),C=!0)}C=K.join("/")}else C=H}return T?y.h=C:T=h.i.toString()!=="",T?Gr(y,Fi(h.i)):T=!!h.m,T&&(y.m=h.m),y};function En(h){return new ut(h)}function pr(h,y,T){h.j=T?_i(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Tn(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Gr(h,y,T){y instanceof Je?(h.i=y,ji(h.i,h.l)):(T||(y=Zr(y,Lt)),h.i=new Je(y,h.l))}function Ie(h,y,T){h.i.set(y,T)}function gt(h){return Ie(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function _i(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Zr(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,cn),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function cn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ta=/[#\/\?@]/g,zi=/[#\?:]/g,Gn=/[#\?]/g,Lt=/[#\?@]/g,kr=/#/g;function Je(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Rn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ke(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}i=Je.prototype,i.add=function(h,y){Rn(this),this.i=null,h=gr(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function gs(h,y){Rn(h),y=gr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Kr(h,y){return Rn(h),y=gr(h,y),h.g.has(y)}i.forEach=function(h,y){Rn(this),this.g.forEach(function(T,C){T.forEach(function(H){h.call(y,H,C,this)},this)},this)};function _s(h,y){Rn(h);let T=[];if(typeof y=="string")Kr(h,y)&&(T=T.concat(h.g.get(gr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)T=T.concat(h[y]);return T}i.set=function(h,y){return Rn(this),this.i=null,h=gr(this,h),Kr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=_s(this,h),h.length>0?String(h[0]):y):y};function ys(h,y,T){gs(h,y),T.length>0&&(h.i=null,h.g.set(gr(h,y),q(T)),h.h+=T.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let C=0;C<y.length;C++){var T=y[C];const H=ve(T);T=_s(this,T);for(let K=0;K<T.length;K++){let de=H;T[K]!==""&&(de+="="+ve(T[K])),h.push(de)}}return this.i=h.join("&")};function Fi(h){const y=new Je;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function gr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function ji(h,y){y&&!h.j&&(Rn(h),h.i=null,h.g.forEach(function(T,C){const H=C.toLowerCase();C!=H&&(gs(this,C),ys(this,H,T))},h)),h.j=y}function Zn(h,y){const T=new wt;if(m.Image){const C=new Image;C.onload=P($t,T,"TestLoadImage: loaded",!0,y,C),C.onerror=P($t,T,"TestLoadImage: error",!1,y,C),C.onabort=P($t,T,"TestLoadImage: abort",!1,y,C),C.ontimeout=P($t,T,"TestLoadImage: timeout",!1,y,C),m.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else y(!1)}function Rr(h,y){const T=new wt,C=new AbortController,H=setTimeout(()=>{C.abort(),$t(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:C.signal}).then(K=>{clearTimeout(H),K.ok?$t(T,"TestPingServer: ok",!0,y):$t(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),$t(T,"TestPingServer: error",!1,y)})}function $t(h,y,T,C,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),C(T)}catch{}}function vs(){this.g=new yn}function ze(h){this.i=h.Sb||null,this.h=h.ab||!1}I(ze,lr),ze.prototype.g=function(){return new Mt(this.i,this.h)};function Mt(h,y){ft.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}I(Mt,ft),i=Mt.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Kn(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||m).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,yi(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Kn(this)),this.g&&(this.readyState=3,Kn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_t(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function _t(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?yi(this):Kn(this),this.readyState==3&&_t(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,yi(this))},i.Na=function(h){this.g&&(this.response=h,yi(this))},i.ga=function(){this.g&&yi(this)};function yi(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Kn(h)}i.setRequestHeader=function(h,y){this.A.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function Kn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Mt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Qs(h){let y="";return _e(h,function(T,C){y+=C,y+=":",y+=T,y+=`\r
`}),y}function Bi(h,y,T){e:{for(C in T){var C=!1;break e}C=!0}C||(T=Qs(T),typeof h=="string"?T!=null&&ve(T):Ie(h,y,T))}function lt(h){ft.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}I(lt,ft);var Ys=/^https?$/i,ws=["POST","PUT"];i=lt.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,y,T,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():un.g(),this.g.onreadystatechange=R(x(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(K){bt(this,K);return}if(h=T||"",T=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var H in C)T.set(H,C[H]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const K of C.keys())T.set(K,C.get(K));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(T.keys()).find(K=>K.toLowerCase()=="content-type"),H=m.FormData&&h instanceof m.FormData,!(Array.prototype.indexOf.call(ws,y,void 0)>=0)||C||H||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,de]of T)this.g.setRequestHeader(K,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(K){bt(this,K)}};function bt(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Nn(h),Yr(h)}function Nn(h){h.A||(h.A=!0,St(h,"complete"),St(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,St(this,"complete"),St(this,"abort"),Yr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yr(this,!0)),lt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Qr(this):this.Xa())},i.Xa=function(){Qr(this)};function Qr(h){if(h.h&&typeof c<"u"){if(h.v&&Xr(h)==4)setTimeout(h.Ca.bind(h),0);else if(St(h,"readystatechange"),Xr(h)==4){h.h=!1;try{const K=h.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var C;if(C=K===0){let de=String(h.D).match(Vi)[1]||null;!de&&m.self&&m.self.location&&(de=m.self.location.protocol.slice(0,-1)),C=!Ys.test(de?de.toLowerCase():"")}T=C}if(T)St(h,"complete"),St(h,"success");else{h.o=6;try{var H=Xr(h)>2?h.g.statusText:""}catch{H=""}h.l=H+" ["+h.ca()+"]",Nn(h)}}finally{Yr(h)}}}}function Yr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,y||St(h,"ready");try{T.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Xr(h){return h.g?h.g.readyState:0}i.ca=function(){try{return Xr(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Li(y)}};function na(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Es(h){const y={};h=(h.g&&Xr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(N(h[C]))continue;var T=Di(h[C]);const H=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const K=y[H]||[];y[H]=K,K.push(T)}re(y,function(C){return C.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jr(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function Ts(h){this.za=0,this.i=[],this.j=new wt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Jr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Jr("baseRetryDelayMs",5e3,h),this.Za=Jr("retryDelaySeedMs",1e4,h),this.Ta=Jr("forwardChannelMaxRetries",2,h),this.va=Jr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Ks(h&&h.concurrentRequestLimit),this.Ba=new vs,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Ts.prototype,i.ka=8,i.I=1,i.connect=function(h,y,T,C){Tt(0),this.W=h,this.H=y||{},T&&C!==void 0&&(this.H.OSID=T,this.H.OAID=C),this.F=this.X,this.J=eo(this,null,this.W),Yn(this)};function et(h){if(hn(h),h.I==3){var y=h.V++,T=En(h.J);if(Ie(T,"SID",h.M),Ie(T,"RID",y),Ie(T,"TYPE","terminate"),_r(h,T),y=new $n(h,h.j,y),y.M=2,y.A=gt(En(T)),T=!1,m.navigator&&m.navigator.sendBeacon)try{T=m.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&m.Image&&(new Image().src=y.A,T=!0),T||(y.g=sa(y.j,null),y.g.ea(y.A)),y.F=Date.now(),hs(y)}Mn(h)}function Qn(h){h.g&&(Is(h),h.g.cancel(),h.g=null)}function hn(h){Qn(h),h.v&&(m.clearTimeout(h.v),h.v=null),Xs(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&m.clearTimeout(h.m),h.m=null)}function Yn(h){if(!ea(h.h)&&!h.m){h.m=!0;var y=h.Ea;De||k(),Oe||(De(),Oe=!0),F.add(y,h),h.D=0}}function ra(h,y){return ms(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Be(x(h.Ea,h,y),Js(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const H=new $n(this,this.j,h);let K=this.o;if(this.U&&(K?(K=O(K),fe(K,this.U)):K=this.U),this.u!==null||this.R||(H.J=K,K=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var C=this.i[T];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(y+=C,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=ia(this,H,y),T=En(this.J),Ie(T,"RID",h),Ie(T,"CVER",22),this.G&&Ie(T,"X-HTTP-Session-Id",this.G),_r(this,T),K&&(this.R?y="headers="+ve(Qs(K))+"&"+y:this.u&&Bi(T,this.u,K)),$r(this.h,H),this.Ra&&Ie(T,"TYPE","init"),this.S?(Ie(T,"$req",y),Ie(T,"SID","null"),H.U=!0,fr(H,T,null)):fr(H,T,y),this.I=2}}else this.I==3&&(h?xs(this,h):this.i.length==0||ea(this.h)||xs(this))};function xs(h,y){var T;y?T=y.l:T=h.V++;const C=En(h.J);Ie(C,"SID",h.M),Ie(C,"RID",T),Ie(C,"AID",h.K),_r(h,C),h.u&&h.o&&Bi(C,h.u,h.o),T=new $n(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),y&&(h.i=y.G.concat(h.i)),y=ia(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),$r(h.h,T),fr(T,C,y)}function _r(h,y){h.H&&_e(h.H,function(T,C){Ie(y,C,T)}),h.l&&_e({},function(T,C){Ie(y,C,T)})}function ia(h,y,T){T=Math.min(h.i.length,T);const C=h.l?x(h.l.Ka,h.l,h):null;e:{var H=h.i;let Ue=-1;for(;;){const ct=["count="+T];Ue==-1?T>0?(Ue=H[0].g,ct.push("ofs="+Ue)):Ue=0:ct.push("ofs="+Ue);let mt=!0;for(let zt=0;zt<T;zt++){var K=H[zt].g;const Xn=H[zt].map;if(K-=Ue,K<0)Ue=Math.max(0,H[zt].g-100),mt=!1;else try{K="req"+K+"_"||"";try{var de=Xn instanceof Map?Xn:Object.entries(Xn);for(const[Nr,yr]of de){let ni=yr;v(yr)&&(ni=ar(yr)),ct.push(K+Nr+"="+encodeURIComponent(ni))}}catch(Nr){throw ct.push(K+"type="+encodeURIComponent("_badmap")),Nr}}catch{C&&C(Xn)}}if(mt){de=ct.join("&");break e}}de=void 0}return h=h.i.splice(0,T),y.G=h,de}function rn(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;De||k(),Oe||(De(),Oe=!0),F.add(y,h),h.A=0}}function ei(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Be(x(h.Da,h),Js(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,ti(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Be(x(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),Qn(this),ti(this))};function Is(h){h.B!=null&&(m.clearTimeout(h.B),h.B=null)}function ti(h){h.g=new $n(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=En(h.na);Ie(y,"RID","rpc"),Ie(y,"SID",h.M),Ie(y,"AID",h.K),Ie(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ie(y,"TO",h.ia),Ie(y,"TYPE","xmlhttp"),_r(h,y),h.u&&h.o&&Bi(y,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=gt(En(y)),T.u=null,T.R=!0,qr(T,h)}i.Va=function(){this.C!=null&&(this.C=null,Qn(this),ei(this),Tt(19))};function Xs(h){h.C!=null&&(m.clearTimeout(h.C),h.C=null)}function xn(h,y){var T=null;if(h.g==y){Xs(h),Is(h),h.g=null;var C=2}else if(ps(h.h,y))T=y.G,Oi(h.h,y),C=1;else return;if(h.I!=0){if(y.o)if(C==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var H=h.D;C=cr(),St(C,new Mi(C,T)),Yn(h)}else rn(h);else if(H=y.m,H==3||H==0&&y.X>0||!(C==1&&ra(h,y)||C==2&&ei(h)))switch(T&&T.length>0&&(y=h.h,y.i=y.i.concat(T)),H){case 1:Ln(h,5);break;case 4:Ln(h,10);break;case 3:Ln(h,6);break;default:Ln(h,2)}}}function Js(h,y){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*y}function Ln(h,y){if(h.j.info("Error code "+y),y==2){var T=x(h.bb,h),C=h.Ua;const H=!C;C=new ut(C||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||pr(C,"https"),gt(C),H?Zn(C.toString(),T):Rr(C.toString(),T)}else Tt(2);h.I=0,h.l&&h.l.pa(y),Mn(h),hn(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function Mn(h){if(h.I=0,h.ja=[],h.l){const y=kn(h.h);(y.length!=0||h.i.length!=0)&&(Q(h.ja,y),Q(h.ja,h.i),h.h.i.length=0,q(h.i),h.i.length=0),h.l.oa()}}function eo(h,y,T){var C=T instanceof ut?En(T):new ut(T);if(C.g!="")y&&(C.g=y+"."+C.g),Tn(C,C.u);else{var H=m.location;C=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const K=new ut(null);C&&pr(K,C),y&&(K.g=y),H&&Tn(K,H),T&&(K.h=T),C=K}return T=h.G,y=h.wa,T&&y&&Ie(C,T,y),Ie(C,"VER",h.ka),_r(h,C),C}function sa(h,y,T){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new lt(new ze({ab:T})):new lt(h.ma),y.Fa(h.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function to(){}i=to.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function no(){}no.prototype.g=function(h,y){return new Qt(h,y)};function Qt(h,y){ft.call(this),this.g=new Ts(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!N(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!N(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Ui(this)}I(Qt,ft),Qt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){et(this.g)},Qt.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=ar(h),h=T);y.i.push(new Wl(y.Ya++,h)),y.I==3&&Yn(y)},Qt.prototype.N=function(){this.g.l=null,delete this.j,et(this.g),delete this.g,Qt.Z.N.call(this)};function oa(h){Hr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}I(oa,Hr);function Ua(){gi.call(this),this.status=1}I(Ua,gi);function Ui(h){this.g=h}I(Ui,to),Ui.prototype.ra=function(){St(this.g,"a")},Ui.prototype.qa=function(h){St(this.g,new oa(h))},Ui.prototype.pa=function(h){St(this.g,new Ua)},Ui.prototype.oa=function(){St(this.g,"b")},no.prototype.createWebChannel=no.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,Pv=function(){return new no},Sv=function(){return cr()},Iv=An,zf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},qn.NO_ERROR=0,qn.TIMEOUT=8,qn.HTTP_ERROR=6,ih=qn,Ht.COMPLETE="complete",xv=Ht,Cr.EventType=Ar,Ar.OPEN="a",Ar.CLOSE="b",Ar.ERROR="c",Ar.MESSAGE="d",ft.prototype.listen=ft.prototype.J,vu=Cr,lt.prototype.listenOnce=lt.prototype.K,lt.prototype.getLastError=lt.prototype.Ha,lt.prototype.getLastErrorCode=lt.prototype.ya,lt.prototype.getStatus=lt.prototype.ca,lt.prototype.getResponseJson=lt.prototype.La,lt.prototype.getResponseText=lt.prototype.la,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Fa,Tv=lt}).apply(typeof Kc<"u"?Kc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bn.UNAUTHENTICATED=new Bn(null),Bn.GOOGLE_CREDENTIALS=new Bn("google-credentials-uid"),Bn.FIRST_PARTY=new Bn("first-party-uid"),Bn.MOCK_USER=new Bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zl="12.8.0";function yP(i){zl=i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La=new om("@firebase/firestore");function pl(){return La.logLevel}function be(i,...e){if(La.logLevel<=it.DEBUG){const t=e.map(gm);La.debug(`Firestore (${zl}): ${i}`,...t)}}function qs(i,...e){if(La.logLevel<=it.ERROR){const t=e.map(gm);La.error(`Firestore (${zl}): ${i}`,...t)}}function Al(i,...e){if(La.logLevel<=it.WARN){const t=e.map(gm);La.warn(`Firestore (${zl}): ${i}`,...t)}}function gm(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(i,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,bv(i,s,t)}function bv(i,e,t){let s=`FIRESTORE (${zl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw qs(s),new Error(s)}function vt(i,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,i||bv(e,a,s)}function Ye(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends Gs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Bn.UNAUTHENTICATED)))}shutdown(){}}class wP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class EP{constructor(e){this.t=e,this.currentUser=Bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){vt(this.o===void 0,42304);let s=this.i;const a=E=>this.i!==s?(s=this.i,t(E)):Promise.resolve();let c=new ba;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ba,e.enqueueRetryable((()=>a(this.currentUser)))};const m=()=>{const E=c;e.enqueueRetryable((async()=>{await E.promise,await a(this.currentUser)}))},v=E=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.o&&(this.auth.addAuthTokenListener(this.o),m())};this.t.onInit((E=>v(E))),setTimeout((()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?v(E):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ba)}}),0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(vt(typeof s.accessToken=="string",31837,{l:s}),new Cv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return vt(e===null||typeof e=="string",2055,{h:e}),new Bn(e)}}class TP{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Bn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class xP{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new TP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class v_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){vt(this.o===void 0,3512);const s=c=>{c.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const m=c.token!==this.m;return this.m=c.token,be("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const a=c=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new v_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(vt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new v_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=SP(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<t&&(s+=e.charAt(a[c]%62))}return s}}function st(i,e){return i<e?-1:i>e?1:0}function Ff(i,e){const t=Math.min(i.length,e.length);for(let s=0;s<t;s++){const a=i.charAt(s),c=e.charAt(s);if(a!==c)return Ef(a)===Ef(c)?st(a,c):Ef(a)?1:-1}return st(i.length,e.length)}const PP=55296,bP=57343;function Ef(i){const e=i.charCodeAt(0);return e>=PP&&e<=bP}function kl(i,e,t){return i.length===e.length&&i.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="__name__";class es{constructor(e,t,s){t===void 0?t=0:t>e.length&&He(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&He(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return es.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof es?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const c=es.compareSegments(e.get(a),t.get(a));if(c!==0)return c}return st(e.length,t.length)}static compareSegments(e,t){const s=es.isNumericId(e),a=es.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?es.extractNumericId(e).compare(es.extractNumericId(t)):Ff(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Bo.fromString(e.substring(4,e.length-2))}}class At extends es{construct(e,t,s){return new At(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Pe(ie.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new At(t)}static emptyPath(){return new At([])}}const CP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bn extends es{construct(e,t,s){return new bn(e,t,s)}static isValidIdentifier(e){return CP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===w_}static keyField(){return new bn([w_])}static fromServerFormat(e){const t=[];let s="",a=0;const c=()=>{if(s.length===0)throw new Pe(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let m=!1;for(;a<e.length;){const v=e[a];if(v==="\\"){if(a+1===e.length)throw new Pe(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[a+1];if(E!=="\\"&&E!=="."&&E!=="`")throw new Pe(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=E,a+=2}else v==="`"?(m=!m,a++):v!=="."||m?(s+=v,a++):(c(),a++)}if(c(),m)throw new Pe(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bn(t)}static emptyPath(){return new bn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(At.fromString(e))}static fromName(e){return new Me(At.fromString(e).popFirst(5))}static empty(){return new Me(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&At.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return At.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new At(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(i,e,t){if(!t)throw new Pe(ie.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function AP(i,e,t,s){if(e===!0&&s===!0)throw new Pe(ie.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function E_(i){if(!Me.isDocumentKey(i))throw new Pe(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function T_(i){if(Me.isDocumentKey(i))throw new Pe(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function kv(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Vh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":He(12329,{type:typeof i})}function Il(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Pe(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Vh(i);throw new Pe(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(i,e){const t={typeString:i};return e&&(t.value=e),t}function Hu(i,e){if(!kv(i))throw new Pe(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){t=`JSON missing required field: '${s}'`;break}const m=i[s];if(a&&typeof m!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(c!==void 0&&m!==c.value){t=`Expected '${s}' field to equal '${c.value}'`;break}}if(t)throw new Pe(ie.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=-62135596800,I_=1e6;class kt{static now(){return kt.fromMillis(Date.now())}static fromDate(e){return kt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*I_);return new kt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<x_)throw new Pe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/I_}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:kt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Hu(e,kt._jsonSchema))return new kt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-x_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}kt._jsonSchemaVersion="firestore/timestamp/1.0",kt._jsonSchema={type:tn("string",kt._jsonSchemaVersion),seconds:tn("number"),nanoseconds:tn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{static fromTimestamp(e){return new Qe(e)}static min(){return new Qe(new kt(0,0))}static max(){return new Qe(new kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu=-1;function kP(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=Qe.fromTimestamp(s===1e9?new kt(t+1,0):new kt(t,s));return new Ho(a,Me.empty(),e)}function RP(i){return new Ho(i.readTime,i.key,Nu)}class Ho{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ho(Qe.min(),Me.empty(),Nu)}static max(){return new Ho(Qe.max(),Me.empty(),Nu)}}function NP(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=Me.comparator(i.documentKey,e.documentKey),t!==0?t:st(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fl(i){if(i.code!==ie.FAILED_PRECONDITION||i.message!==LP)throw i;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&He(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,s)=>{t(e)}))}static reject(e){return new se(((t,s)=>{s(e)}))}static waitFor(e){return new se(((t,s)=>{let a=0,c=0,m=!1;e.forEach((v=>{++a,v.next((()=>{++c,m&&c===a&&t()}),(E=>s(E)))})),m=!0,c===a&&t()}))}static or(e){let t=se.resolve(!1);for(const s of e)t=t.next((a=>a?se.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,c)=>{s.push(t.call(this,a,c))})),this.waitFor(s)}static mapArray(e,t){return new se(((s,a)=>{const c=e.length,m=new Array(c);let v=0;for(let E=0;E<c;E++){const x=E;t(e[x]).next((P=>{m[x]=P,++v,v===c&&s(m)}),(P=>a(P)))}}))}static doWhile(e,t){return new se(((s,a)=>{const c=()=>{e()===!0?t().next((()=>{c()}),a):s()};c()}))}}function DP(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function jl(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}zh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym=-1;function Fh(i){return i==null}function vh(i){return i===0&&1/i==-1/0}function OP(i){return typeof i=="number"&&Number.isInteger(i)&&!vh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="";function VP(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=S_(e)),e=zP(i.get(t),e);return S_(e)}function zP(i,e){let t=e;const s=i.length;for(let a=0;a<s;a++){const c=i.charAt(a);switch(c){case"\0":t+="";break;case Rv:t+="";break;default:t+=c}}return t}function S_(i){return i+Rv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Da(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Nv(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,t){this.comparator=e,this.root=t||Pn.EMPTY}insert(e,t){return new Bt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pn.BLACK,null,null))}remove(e){return new Bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qc(this.root,e,this.comparator,!0)}}class Qc{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pn{constructor(e,t,s,a,c){this.key=e,this.value=t,this.color=s??Pn.RED,this.left=a??Pn.EMPTY,this.right=c??Pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,c){return new Pn(e??this.key,t??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,s),null):c===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Pn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw He(43730,{key:this.key,value:this.value});if(this.right.isRed())throw He(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw He(27949);return e+(this.isRed()?0:1)}}Pn.EMPTY=null,Pn.RED=!0,Pn.BLACK=!1;Pn.EMPTY=new class{constructor(){this.size=0}get key(){throw He(57766)}get value(){throw He(16141)}get color(){throw He(16727)}get left(){throw He(29726)}get right(){throw He(36894)}copy(e,t,s,a,c){return this}insert(e,t,s){return new Pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.comparator=e,this.data=new Bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new b_(this.data.getIterator())}getIteratorFrom(e){return new b_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ln(this.comparator);return t.data=e,t}}class b_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.fields=e,e.sort(bn.comparator)}static empty(){return new Ai([])}unionWith(e){let t=new ln(bn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Ai(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kl(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Lv("Invalid base64 string: "+c):c}})(e);return new Cn(t)}static fromUint8Array(e){const t=(function(a){let c="";for(let m=0;m<a.length;++m)c+=String.fromCharCode(a[m]);return c})(e);return new Cn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cn.EMPTY_BYTE_STRING=new Cn("");const FP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qo(i){if(vt(!!i,39018),typeof i=="string"){let e=0;const t=FP.exec(i);if(vt(!!t,46558,{timestamp:i}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Zt(i.seconds),nanos:Zt(i.nanos)}}function Zt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function $o(i){return typeof i=="string"?Cn.fromBase64String(i):Cn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="server_timestamp",Dv="__type__",Ov="__previous_value__",Vv="__local_write_time__";function vm(i){var t,s;return((s=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[Dv])==null?void 0:s.stringValue)===Mv}function jh(i){const e=i.mapValue.fields[Ov];return vm(e)?jh(e):e}function Lu(i){const e=qo(i.mapValue.fields[Vv].timestampValue);return new kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,t,s,a,c,m,v,E,x,P,I){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=m,this.autoDetectLongPolling=v,this.longPollingOptions=E,this.useFetchStreams=x,this.isUsingEmulator=P,this.apiKey=I}}const wh="(default)";class Mu{constructor(e,t){this.projectId=e,this.database=t||wh}static empty(){return new Mu("","")}get isDefaultDatabase(){return this.database===wh}isEqual(e){return e instanceof Mu&&e.projectId===this.projectId&&e.database===this.database}}function BP(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Pe(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mu(i.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="__type__",UP="__max__",Yc={mapValue:{}},Fv="__vector__",Eh="value";function Go(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?vm(i)?4:HP(i)?9007199254740991:WP(i)?10:11:He(28295,{value:i})}function ls(i,e){if(i===e)return!0;const t=Go(i);if(t!==Go(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Lu(i).isEqual(Lu(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const m=qo(a.timestampValue),v=qo(c.timestampValue);return m.seconds===v.seconds&&m.nanos===v.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(a,c){return $o(a.bytesValue).isEqual($o(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(a,c){return Zt(a.geoPointValue.latitude)===Zt(c.geoPointValue.latitude)&&Zt(a.geoPointValue.longitude)===Zt(c.geoPointValue.longitude)})(i,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return Zt(a.integerValue)===Zt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const m=Zt(a.doubleValue),v=Zt(c.doubleValue);return m===v?vh(m)===vh(v):isNaN(m)&&isNaN(v)}return!1})(i,e);case 9:return kl(i.arrayValue.values||[],e.arrayValue.values||[],ls);case 10:case 11:return(function(a,c){const m=a.mapValue.fields||{},v=c.mapValue.fields||{};if(P_(m)!==P_(v))return!1;for(const E in m)if(m.hasOwnProperty(E)&&(v[E]===void 0||!ls(m[E],v[E])))return!1;return!0})(i,e);default:return He(52216,{left:i})}}function Du(i,e){return(i.values||[]).find((t=>ls(t,e)))!==void 0}function Rl(i,e){if(i===e)return 0;const t=Go(i),s=Go(e);if(t!==s)return st(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return st(i.booleanValue,e.booleanValue);case 2:return(function(c,m){const v=Zt(c.integerValue||c.doubleValue),E=Zt(m.integerValue||m.doubleValue);return v<E?-1:v>E?1:v===E?0:isNaN(v)?isNaN(E)?0:-1:1})(i,e);case 3:return C_(i.timestampValue,e.timestampValue);case 4:return C_(Lu(i),Lu(e));case 5:return Ff(i.stringValue,e.stringValue);case 6:return(function(c,m){const v=$o(c),E=$o(m);return v.compareTo(E)})(i.bytesValue,e.bytesValue);case 7:return(function(c,m){const v=c.split("/"),E=m.split("/");for(let x=0;x<v.length&&x<E.length;x++){const P=st(v[x],E[x]);if(P!==0)return P}return st(v.length,E.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,m){const v=st(Zt(c.latitude),Zt(m.latitude));return v!==0?v:st(Zt(c.longitude),Zt(m.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return A_(i.arrayValue,e.arrayValue);case 10:return(function(c,m){var R,q,Q,ne;const v=c.fields||{},E=m.fields||{},x=(R=v[Eh])==null?void 0:R.arrayValue,P=(q=E[Eh])==null?void 0:q.arrayValue,I=st(((Q=x==null?void 0:x.values)==null?void 0:Q.length)||0,((ne=P==null?void 0:P.values)==null?void 0:ne.length)||0);return I!==0?I:A_(x,P)})(i.mapValue,e.mapValue);case 11:return(function(c,m){if(c===Yc.mapValue&&m===Yc.mapValue)return 0;if(c===Yc.mapValue)return 1;if(m===Yc.mapValue)return-1;const v=c.fields||{},E=Object.keys(v),x=m.fields||{},P=Object.keys(x);E.sort(),P.sort();for(let I=0;I<E.length&&I<P.length;++I){const R=Ff(E[I],P[I]);if(R!==0)return R;const q=Rl(v[E[I]],x[P[I]]);if(q!==0)return q}return st(E.length,P.length)})(i.mapValue,e.mapValue);default:throw He(23264,{he:t})}}function C_(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return st(i,e);const t=qo(i),s=qo(e),a=st(t.seconds,s.seconds);return a!==0?a:st(t.nanos,s.nanos)}function A_(i,e){const t=i.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const c=Rl(t[a],s[a]);if(c)return c}return st(t.length,s.length)}function Nl(i){return jf(i)}function jf(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const s=qo(t);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return $o(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return Me.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let s="[",a=!0;for(const c of t.values||[])a?a=!1:s+=",",s+=jf(c);return s+"]"})(i.arrayValue):"mapValue"in i?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",c=!0;for(const m of s)c?c=!1:a+=",",a+=`${m}:${jf(t.fields[m])}`;return a+"}"})(i.mapValue):He(61005,{value:i})}function sh(i){switch(Go(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jh(i);return e?16+sh(e):16;case 5:return 2*i.stringValue.length;case 6:return $o(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,c)=>a+sh(c)),0)})(i.arrayValue);case 10:case 11:return(function(s){let a=0;return Da(s.fields,((c,m)=>{a+=c.length+sh(m)})),a})(i.mapValue);default:throw He(13486,{value:i})}}function k_(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Bf(i){return!!i&&"integerValue"in i}function wm(i){return!!i&&"arrayValue"in i}function R_(i){return!!i&&"nullValue"in i}function N_(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function oh(i){return!!i&&"mapValue"in i}function WP(i){var t,s;return((s=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[zv])==null?void 0:s.stringValue)===Fv}function Su(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Da(i.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Su(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Su(i.arrayValue.values[t]);return e}return{...i}}function HP(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===UP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.value=e}static empty(){return new fi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!oh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Su(t)}setAll(e){let t=bn.emptyPath(),s={},a=[];e.forEach(((m,v)=>{if(!t.isImmediateParentOf(v)){const E=this.getFieldsMap(t);this.applyChanges(E,s,a),s={},a=[],t=v.popLast()}m?s[v.lastSegment()]=Su(m):a.push(v.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,s,a)}delete(e){const t=this.field(e.popLast());oh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ls(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];oh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Da(t,((a,c)=>e[a]=c));for(const a of s)delete e[a]}clone(){return new fi(Su(this.value))}}function jv(i){const e=[];return Da(i.fields,((t,s)=>{const a=new bn([t]);if(oh(s)){const c=jv(s.mapValue).fields;if(c.length===0)e.push(a);else for(const m of c)e.push(a.child(m))}else e.push(a)})),new Ai(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,t,s,a,c,m,v){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=c,this.data=m,this.documentState=v}static newInvalidDocument(e){return new Un(e,0,Qe.min(),Qe.min(),Qe.min(),fi.empty(),0)}static newFoundDocument(e,t,s,a){return new Un(e,1,t,Qe.min(),s,a,0)}static newNoDocument(e,t){return new Un(e,2,t,Qe.min(),Qe.min(),fi.empty(),0)}static newUnknownDocument(e,t){return new Un(e,3,t,Qe.min(),Qe.min(),fi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,t){this.position=e,this.inclusive=t}}function L_(i,e,t){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],m=i.position[a];if(c.field.isKeyField()?s=Me.comparator(Me.fromName(m.referenceValue),t.key):s=Rl(m,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function M_(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!ls(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,t="asc"){this.field=e,this.dir=t}}function qP(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{}class en extends Bv{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new GP(e,t,s):t==="array-contains"?new QP(e,s):t==="in"?new YP(e,s):t==="not-in"?new XP(e,s):t==="array-contains-any"?new JP(e,s):new en(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new ZP(e,s):new KP(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Rl(t,this.value)):t!==null&&Go(this.value)===Go(t)&&this.matchesComparison(Rl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return He(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ri extends Bv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ri(e,t)}matches(e){return Uv(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Uv(i){return i.op==="and"}function Wv(i){return $P(i)&&Uv(i)}function $P(i){for(const e of i.filters)if(e instanceof Ri)return!1;return!0}function Uf(i){if(i instanceof en)return i.field.canonicalString()+i.op.toString()+Nl(i.value);if(Wv(i))return i.filters.map((e=>Uf(e))).join(",");{const e=i.filters.map((t=>Uf(t))).join(",");return`${i.op}(${e})`}}function Hv(i,e){return i instanceof en?(function(s,a){return a instanceof en&&s.op===a.op&&s.field.isEqual(a.field)&&ls(s.value,a.value)})(i,e):i instanceof Ri?(function(s,a){return a instanceof Ri&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((c,m,v)=>c&&Hv(m,a.filters[v])),!0):!1})(i,e):void He(19439)}function qv(i){return i instanceof en?(function(t){return`${t.field.canonicalString()} ${t.op} ${Nl(t.value)}`})(i):i instanceof Ri?(function(t){return t.op.toString()+" {"+t.getFilters().map(qv).join(" ,")+"}"})(i):"Filter"}class GP extends en{constructor(e,t,s){super(e,t,s),this.key=Me.fromName(s.referenceValue)}matches(e){const t=Me.comparator(e.key,this.key);return this.matchesComparison(t)}}class ZP extends en{constructor(e,t){super(e,"in",t),this.keys=$v("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class KP extends en{constructor(e,t){super(e,"not-in",t),this.keys=$v("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function $v(i,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Me.fromName(s.referenceValue)))}class QP extends en{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wm(t)&&Du(t.arrayValue,this.value)}}class YP extends en{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Du(this.value.arrayValue,t)}}class XP extends en{constructor(e,t){super(e,"not-in",t)}matches(e){if(Du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Du(this.value.arrayValue,t)}}class JP extends en{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Du(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,t=null,s=[],a=[],c=null,m=null,v=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=m,this.endAt=v,this.Te=null}}function D_(i,e=null,t=[],s=[],a=null,c=null,m=null){return new eb(i,e,t,s,a,c,m)}function Em(i){const e=Ye(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Uf(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Fh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Nl(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Nl(s))).join(",")),e.Te=t}return e.Te}function Tm(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!qP(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!Hv(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!M_(i.startAt,e.startAt)&&M_(i.endAt,e.endAt)}function Wf(i){return Me.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,t=null,s=[],a=[],c=null,m="F",v=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=m,this.startAt=v,this.endAt=E,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function tb(i,e,t,s,a,c,m,v){return new Bl(i,e,t,s,a,c,m,v)}function xm(i){return new Bl(i)}function O_(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function nb(i){return Me.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function Gv(i){return i.collectionGroup!==null}function Pu(i){const e=Ye(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(m){let v=new ln(bn.comparator);return m.filters.forEach((E=>{E.getFlattenedFilters().forEach((x=>{x.isInequality()&&(v=v.add(x.field))}))})),v})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Ou(c,s))})),t.has(bn.keyField().canonicalString())||e.Ie.push(new Ou(bn.keyField(),s))}return e.Ie}function ss(i){const e=Ye(i);return e.Ee||(e.Ee=rb(e,Pu(i))),e.Ee}function rb(i,e){if(i.limitType==="F")return D_(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new Ou(a.field,c)}));const t=i.endAt?new Th(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Th(i.startAt.position,i.startAt.inclusive):null;return D_(i.path,i.collectionGroup,e,i.filters,i.limit,t,s)}}function Hf(i,e){const t=i.filters.concat([e]);return new Bl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function ib(i,e){const t=i.explicitOrderBy.concat([e]);return new Bl(i.path,i.collectionGroup,t,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}function qf(i,e,t){return new Bl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Bh(i,e){return Tm(ss(i),ss(e))&&i.limitType===e.limitType}function Zv(i){return`${Em(ss(i))}|lt:${i.limitType}`}function gl(i){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>qv(a))).join(", ")}]`),Fh(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(m){return`${m.field.canonicalString()} (${m.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>Nl(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>Nl(a))).join(",")),`Target(${s})`})(ss(i))}; limitType=${i.limitType})`}function Uh(i,e){return e.isFoundDocument()&&(function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Me.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(i,e)&&(function(s,a){for(const c of Pu(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0})(i,e)&&(function(s,a){return!(s.startAt&&!(function(m,v,E){const x=L_(m,v,E);return m.inclusive?x<=0:x<0})(s.startAt,Pu(s),a)||s.endAt&&!(function(m,v,E){const x=L_(m,v,E);return m.inclusive?x>=0:x>0})(s.endAt,Pu(s),a))})(i,e)}function sb(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Kv(i){return(e,t)=>{let s=!1;for(const a of Pu(i)){const c=ob(a,e,t);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function ob(i,e,t){const s=i.field.isKeyField()?Me.comparator(e.key,t.key):(function(c,m,v){const E=m.data.field(c),x=v.data.field(c);return E!==null&&x!==null?Rl(E,x):He(42886)})(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return He(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Da(this.inner,((t,s)=>{for(const[a,c]of s)e(a,c)}))}isEmpty(){return Nv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=new Bt(Me.comparator);function $s(){return ab}const Qv=new Bt(Me.comparator);function wu(...i){let e=Qv;for(const t of i)e=e.insert(t.key,t);return e}function Yv(i){let e=Qv;return i.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Pa(){return bu()}function Xv(){return bu()}function bu(){return new Oa((i=>i.toString()),((i,e)=>i.isEqual(e)))}const lb=new Bt(Me.comparator),ub=new ln(Me.comparator);function ot(...i){let e=ub;for(const t of i)e=e.add(t);return e}const cb=new ln(st);function hb(){return cb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vh(e)?"-0":e}}function Jv(i){return{integerValue:""+i}}function db(i,e){return OP(e)?Jv(e):Im(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(){this._=void 0}}function fb(i,e,t){return i instanceof xh?(function(a,c){const m={fields:{[Dv]:{stringValue:Mv},[Vv]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&vm(c)&&(c=jh(c)),c&&(m.fields[Ov]=c),{mapValue:m}})(t,e):i instanceof Vu?t0(i,e):i instanceof zu?n0(i,e):(function(a,c){const m=e0(a,c),v=V_(m)+V_(a.Ae);return Bf(m)&&Bf(a.Ae)?Jv(v):Im(a.serializer,v)})(i,e)}function mb(i,e,t){return i instanceof Vu?t0(i,e):i instanceof zu?n0(i,e):t}function e0(i,e){return i instanceof Ih?(function(s){return Bf(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class xh extends Wh{}class Vu extends Wh{constructor(e){super(),this.elements=e}}function t0(i,e){const t=r0(e);for(const s of i.elements)t.some((a=>ls(a,s)))||t.push(s);return{arrayValue:{values:t}}}class zu extends Wh{constructor(e){super(),this.elements=e}}function n0(i,e){let t=r0(e);for(const s of i.elements)t=t.filter((a=>!ls(a,s)));return{arrayValue:{values:t}}}class Ih extends Wh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function V_(i){return Zt(i.integerValue||i.doubleValue)}function r0(i){return wm(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function pb(i,e){return i.field.isEqual(e.field)&&(function(s,a){return s instanceof Vu&&a instanceof Vu||s instanceof zu&&a instanceof zu?kl(s.elements,a.elements,ls):s instanceof Ih&&a instanceof Ih?ls(s.Ae,a.Ae):s instanceof xh&&a instanceof xh})(i.transform,e.transform)}class gb{constructor(e,t){this.version=e,this.transformResults=t}}class Bs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bs}static exists(e){return new Bs(void 0,e)}static updateTime(e){return new Bs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ah(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Hh{}function i0(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new o0(i.key,Bs.none()):new qu(i.key,i.data,Bs.none());{const t=i.data,s=fi.empty();let a=new ln(bn.comparator);for(let c of e.fields)if(!a.has(c)){let m=t.field(c);m===null&&c.length>1&&(c=c.popLast(),m=t.field(c)),m===null?s.delete(c):s.set(c,m),a=a.add(c)}return new Va(i.key,s,new Ai(a.toArray()),Bs.none())}}function _b(i,e,t){i instanceof qu?(function(a,c,m){const v=a.value.clone(),E=F_(a.fieldTransforms,c,m.transformResults);v.setAll(E),c.convertToFoundDocument(m.version,v).setHasCommittedMutations()})(i,e,t):i instanceof Va?(function(a,c,m){if(!ah(a.precondition,c))return void c.convertToUnknownDocument(m.version);const v=F_(a.fieldTransforms,c,m.transformResults),E=c.data;E.setAll(s0(a)),E.setAll(v),c.convertToFoundDocument(m.version,E).setHasCommittedMutations()})(i,e,t):(function(a,c,m){c.convertToNoDocument(m.version).setHasCommittedMutations()})(0,e,t)}function Cu(i,e,t,s){return i instanceof qu?(function(c,m,v,E){if(!ah(c.precondition,m))return v;const x=c.value.clone(),P=j_(c.fieldTransforms,E,m);return x.setAll(P),m.convertToFoundDocument(m.version,x).setHasLocalMutations(),null})(i,e,t,s):i instanceof Va?(function(c,m,v,E){if(!ah(c.precondition,m))return v;const x=j_(c.fieldTransforms,E,m),P=m.data;return P.setAll(s0(c)),P.setAll(x),m.convertToFoundDocument(m.version,P).setHasLocalMutations(),v===null?null:v.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((I=>I.field)))})(i,e,t,s):(function(c,m,v){return ah(c.precondition,m)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):v})(i,e,t)}function yb(i,e){let t=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=e0(s.transform,a||null);c!=null&&(t===null&&(t=fi.empty()),t.set(s.field,c))}return t||null}function z_(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&kl(s,a,((c,m)=>pb(c,m)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class qu extends Hh{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Va extends Hh{constructor(e,t,s,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function s0(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}})),e}function F_(i,e,t){const s=new Map;vt(i.length===t.length,32656,{Ve:t.length,de:i.length});for(let a=0;a<t.length;a++){const c=i[a],m=c.transform,v=e.data.field(c.field);s.set(c.field,mb(m,v,t[a]))}return s}function j_(i,e,t){const s=new Map;for(const a of i){const c=a.transform,m=t.data.field(a.field);s.set(a.field,fb(c,m,e))}return s}class o0 extends Hh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vb extends Hh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&_b(c,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Cu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Cu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Xv();return this.mutations.forEach((a=>{const c=e.get(a.key),m=c.overlayedDocument;let v=this.applyToLocalView(m,c.mutatedFields);v=t.has(a.key)?null:v;const E=i0(m,v);E!==null&&s.set(a.key,E),m.isValidDocument()||m.convertToNoDocument(Qe.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ot())}isEqual(e){return this.batchId===e.batchId&&kl(this.mutations,e.mutations,((t,s)=>z_(t,s)))&&kl(this.baseMutations,e.baseMutations,((t,s)=>z_(t,s)))}}class Sm{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){vt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return lb})();const c=e.mutations;for(let m=0;m<c.length;m++)a=a.insert(c[m].key,s[m].version);return new Sm(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt,ht;function xb(i){switch(i){case ie.OK:return He(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return He(15467,{code:i})}}function a0(i){if(i===void 0)return qs("GRPC error has no .code"),ie.UNKNOWN;switch(i){case Jt.OK:return ie.OK;case Jt.CANCELLED:return ie.CANCELLED;case Jt.UNKNOWN:return ie.UNKNOWN;case Jt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Jt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Jt.INTERNAL:return ie.INTERNAL;case Jt.UNAVAILABLE:return ie.UNAVAILABLE;case Jt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Jt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Jt.NOT_FOUND:return ie.NOT_FOUND;case Jt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Jt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Jt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Jt.ABORTED:return ie.ABORTED;case Jt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Jt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Jt.DATA_LOSS:return ie.DATA_LOSS;default:return He(39323,{code:i})}}(ht=Jt||(Jt={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=new Bo([4294967295,4294967295],0);function B_(i){const e=Ib().encode(i),t=new Ev;return t.update(e),new Uint8Array(t.digest())}function U_(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Bo([t,s],0),new Bo([a,c],0)]}class Pm{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Eu(`Invalid padding: ${t}`);if(s<0)throw new Eu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Eu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Eu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Bo.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(Bo.fromNumber(s)));return a.compare(Sb)===1&&(a=new Bo([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=B_(e),[s,a]=U_(t);for(let c=0;c<this.hashCount;c++){const m=this.ye(s,a,c);if(!this.we(m))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),m=new Pm(c,a,t);return s.forEach((v=>m.insert(v))),m}insert(e){if(this.ge===0)return;const t=B_(e),[s,a]=U_(t);for(let c=0;c<this.hashCount;c++){const m=this.ye(s,a,c);this.be(m)}}be(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Eu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,t,s,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,$u.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new qh(Qe.min(),a,new Bt(st),$s(),ot())}}class $u{constructor(e,t,s,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new $u(s,t,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,t,s,a){this.Se=e,this.removedTargetIds=t,this.key=s,this.De=a}}class l0{constructor(e,t){this.targetId=e,this.Ce=t}}class u0{constructor(e,t,s=Cn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class W_{constructor(){this.ve=0,this.Fe=H_(),this.Me=Cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ot(),t=ot(),s=ot();return this.Fe.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:He(38017,{changeType:c})}})),new $u(this.Me,this.xe,e,t,s)}Ke(){this.Oe=!1,this.Fe=H_()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,vt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Pb{constructor(e){this.Ge=e,this.ze=new Map,this.je=$s(),this.He=Xc(),this.Je=Xc(),this.Ze=new Bt(st)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:He(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const c=a.target;if(Wf(c))if(s===0){const m=new Me(c.path);this.et(t,m,Un.newNoDocument(m,Qe.min()))}else vt(s===1,20013,{expectedCount:s});else{const m=this._t(t);if(m!==s){const v=this.ut(e),E=v?this.ct(v,e,m):1;if(E!==0){this.it(t);const x=E===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,x)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=t;let m,v;try{m=$o(s).toUint8Array()}catch(E){if(E instanceof Lv)return Al("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw E}try{v=new Pm(m,a,c)}catch(E){return Al(E instanceof Eu?"BloomFilter error: ":"Applying bloom filter failed: ",E),null}return v.ge===0?null:v}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((c=>{const m=this.Ge.ht(),v=`projects/${m.projectId}/databases/${m.database}/documents/${c.path.canonicalString()}`;e.mightContain(v)||(this.et(t,c,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((c,m)=>{const v=this.ot(m);if(v){if(c.current&&Wf(v.target)){const E=new Me(v.target.path);this.It(E).has(m)||this.Et(m,E)||this.et(m,E,Un.newNoDocument(E,e))}c.Be&&(t.set(m,c.ke()),c.Ke())}}));let s=ot();this.Je.forEach(((c,m)=>{let v=!0;m.forEachWhile((E=>{const x=this.ot(E);return!x||x.purpose==="TargetPurposeLimboResolution"||(v=!1,!1)})),v&&(s=s.add(c))})),this.je.forEach(((c,m)=>m.setReadTime(e)));const a=new qh(e,t,this.Ze,this.je,s);return this.je=$s(),this.He=Xc(),this.Je=Xc(),this.Ze=new Bt(st),a}Ye(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,s),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new W_,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new ln(st),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new ln(st),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||be("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new W_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Xc(){return new Bt(Me.comparator)}function H_(){return new Bt(Me.comparator)}const bb={asc:"ASCENDING",desc:"DESCENDING"},Cb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ab={and:"AND",or:"OR"};class kb{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $f(i,e){return i.useProto3Json||Fh(e)?e:{value:e}}function Sh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function c0(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function Rb(i,e){return Sh(i,e.toTimestamp())}function os(i){return vt(!!i,49232),Qe.fromTimestamp((function(t){const s=qo(t);return new kt(s.seconds,s.nanos)})(i))}function bm(i,e){return Gf(i,e).canonicalString()}function Gf(i,e){const t=(function(a){return new At(["projects",a.projectId,"databases",a.database])})(i).child("documents");return e===void 0?t:t.child(e)}function h0(i){const e=At.fromString(i);return vt(g0(e),10190,{key:e.toString()}),e}function Zf(i,e){return bm(i.databaseId,e.path)}function Tf(i,e){const t=h0(e);if(t.get(1)!==i.databaseId.projectId)throw new Pe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Pe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Me(f0(t))}function d0(i,e){return bm(i.databaseId,e)}function Nb(i){const e=h0(i);return e.length===4?At.emptyPath():f0(e)}function Kf(i){return new At(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function f0(i){return vt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function q_(i,e,t){return{name:Zf(i,e),fields:t.value.mapValue.fields}}function Lb(i,e){let t;if("targetChange"in e){e.targetChange;const s=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:He(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(x,P){return x.useProto3Json?(vt(P===void 0||typeof P=="string",58123),Cn.fromBase64String(P||"")):(vt(P===void 0||P instanceof Buffer||P instanceof Uint8Array,16193),Cn.fromUint8Array(P||new Uint8Array))})(i,e.targetChange.resumeToken),m=e.targetChange.cause,v=m&&(function(x){const P=x.code===void 0?ie.UNKNOWN:a0(x.code);return new Pe(P,x.message||"")})(m);t=new u0(s,a,c,v||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Tf(i,s.document.name),c=os(s.document.updateTime),m=s.document.createTime?os(s.document.createTime):Qe.min(),v=new fi({mapValue:{fields:s.document.fields}}),E=Un.newFoundDocument(a,c,m,v),x=s.targetIds||[],P=s.removedTargetIds||[];t=new lh(x,P,E.key,E)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Tf(i,s.document),c=s.readTime?os(s.readTime):Qe.min(),m=Un.newNoDocument(a,c),v=s.removedTargetIds||[];t=new lh([],v,m.key,m)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Tf(i,s.document),c=s.removedTargetIds||[];t=new lh([],c,a,null)}else{if(!("filter"in e))return He(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,m=new Tb(a,c),v=s.targetId;t=new l0(v,m)}}return t}function Mb(i,e){let t;if(e instanceof qu)t={update:q_(i,e.key,e.value)};else if(e instanceof o0)t={delete:Zf(i,e.key)};else if(e instanceof Va)t={update:q_(i,e.key,e.data),updateMask:Wb(e.fieldMask)};else{if(!(e instanceof vb))return He(16599,{dt:e.type});t={verify:Zf(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(c,m){const v=m.transform;if(v instanceof xh)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof Vu)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof zu)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof Ih)return{fieldPath:m.field.canonicalString(),increment:v.Ae};throw He(20930,{transform:m.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:Rb(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:He(27497)})(i,e.precondition)),t}function Db(i,e){return i&&i.length>0?(vt(e!==void 0,14353),i.map((t=>(function(a,c){let m=a.updateTime?os(a.updateTime):os(c);return m.isEqual(Qe.min())&&(m=os(c)),new gb(m,a.transformResults||[])})(t,e)))):[]}function Ob(i,e){return{documents:[d0(i,e.path)]}}function Vb(i,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=d0(i,a);const c=(function(x){if(x.length!==0)return p0(Ri.create(x,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const m=(function(x){if(x.length!==0)return x.map((P=>(function(R){return{field:_l(R.field),direction:jb(R.dir)}})(P)))})(e.orderBy);m&&(t.structuredQuery.orderBy=m);const v=$f(i,e.limit);return v!==null&&(t.structuredQuery.limit=v),e.startAt&&(t.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:t,parent:a}}function zb(i){let e=Nb(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){vt(s===1,65062);const P=t.from[0];P.allDescendants?a=P.collectionId:e=e.child(P.collectionId)}let c=[];t.where&&(c=(function(I){const R=m0(I);return R instanceof Ri&&Wv(R)?R.getFilters():[R]})(t.where));let m=[];t.orderBy&&(m=(function(I){return I.map((R=>(function(Q){return new Ou(yl(Q.field),(function(te){switch(te){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Q.direction))})(R)))})(t.orderBy));let v=null;t.limit&&(v=(function(I){let R;return R=typeof I=="object"?I.value:I,Fh(R)?null:R})(t.limit));let E=null;t.startAt&&(E=(function(I){const R=!!I.before,q=I.values||[];return new Th(q,R)})(t.startAt));let x=null;return t.endAt&&(x=(function(I){const R=!I.before,q=I.values||[];return new Th(q,R)})(t.endAt)),tb(e,a,m,c,v,"F",E,x)}function Fb(i,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function m0(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=yl(t.unaryFilter.field);return en.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=yl(t.unaryFilter.field);return en.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=yl(t.unaryFilter.field);return en.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=yl(t.unaryFilter.field);return en.create(m,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return He(61313);default:return He(60726)}})(i):i.fieldFilter!==void 0?(function(t){return en.create(yl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return He(58110);default:return He(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return Ri.create(t.compositeFilter.filters.map((s=>m0(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return He(1026)}})(t.compositeFilter.op))})(i):He(30097,{filter:i})}function jb(i){return bb[i]}function Bb(i){return Cb[i]}function Ub(i){return Ab[i]}function _l(i){return{fieldPath:i.canonicalString()}}function yl(i){return bn.fromServerFormat(i.fieldPath)}function p0(i){return i instanceof en?(function(t){if(t.op==="=="){if(N_(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NAN"}};if(R_(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(N_(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NOT_NAN"}};if(R_(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_l(t.field),op:Bb(t.op),value:t.value}}})(i):i instanceof Ri?(function(t){const s=t.getFilters().map((a=>p0(a)));return s.length===1?s[0]:{compositeFilter:{op:Ub(t.op),filters:s}}})(i):He(54877,{filter:i})}function Wb(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function g0(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function _0(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,t,s,a,c=Qe.min(),m=Qe.min(),v=Cn.EMPTY_BYTE_STRING,E=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=v,this.expectedCount=E}withSequenceNumber(e){return new Oo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e){this.yt=e}}function qb(i){const e=zb({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?qf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(){this.Sn=new Gb}addToCollectionParentIndex(e,t){return this.Sn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Ho.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Ho.min())}updateCollectionGroup(e,t,s){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class Gb{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new ln(At.comparator),c=!a.has(s);return this.index[t]=a.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new ln(At.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},y0=41943040;class Pr{static withCacheSize(e){return new Pr(e,Pr.DEFAULT_COLLECTION_PERCENTILE,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr.DEFAULT_COLLECTION_PERCENTILE=10,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pr.DEFAULT=new Pr(y0,Pr.DEFAULT_COLLECTION_PERCENTILE,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pr.DISABLED=new Pr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ll(0)}static ar(){return new Ll(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="LruGarbageCollector",Zb=1048576;function Z_([i,e],[t,s]){const a=st(i,t);return a===0?st(e,s):a}class Kb{constructor(e){this.Pr=e,this.buffer=new ln(Z_),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Z_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Qb{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){be(G_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){jl(t)?be(G_,"Ignoring IndexedDB error during garbage collection: ",t):await Fl(t)}await this.Ar(3e5)}))}}class Yb{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(zh.ce);const s=new Kb(t);return this.Vr.forEachTarget(e,(a=>s.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>s.Er(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve($_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$_):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let s,a,c,m,v,E,x;const P=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),a=this.params.maximumSequenceNumbersToCollect):a=I,m=Date.now(),this.nthSequenceNumber(e,a)))).next((I=>(s=I,v=Date.now(),this.removeTargets(e,s,t)))).next((I=>(c=I,E=Date.now(),this.removeOrphanedDocuments(e,s)))).next((I=>(x=Date.now(),pl()<=it.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${m-P}ms
	Determined least recently used ${a} in `+(v-m)+`ms
	Removed ${c} targets in `+(E-v)+`ms
	Removed ${I} documents in `+(x-E)+`ms
Total Duration: ${x-P}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:I}))))}}function Xb(i,e){return new Yb(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(){this.changes=new Oa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?se.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&Cu(s.mutation,a,Ai.empty(),kt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,ot()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=ot()){const a=Pa();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((c=>{let m=wu();return c.forEach(((v,E)=>{m=m.insert(v,E.overlayedDocument)})),m}))))}getOverlayedDocuments(e,t){const s=Pa();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,ot())))}populateOverlays(e,t,s){const a=[];return s.forEach((c=>{t.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((m,v)=>{t.set(m,v)}))}))}computeViews(e,t,s,a){let c=$s();const m=bu(),v=(function(){return bu()})();return t.forEach(((E,x)=>{const P=s.get(x.key);a.has(x.key)&&(P===void 0||P.mutation instanceof Va)?c=c.insert(x.key,x):P!==void 0?(m.set(x.key,P.mutation.getFieldMask()),Cu(P.mutation,x,P.mutation.getFieldMask(),kt.now())):m.set(x.key,Ai.empty())})),this.recalculateAndSaveOverlays(e,c).next((E=>(E.forEach(((x,P)=>m.set(x,P))),t.forEach(((x,P)=>v.set(x,new eC(P,m.get(x)??null)))),v)))}recalculateAndSaveOverlays(e,t){const s=bu();let a=new Bt(((m,v)=>m-v)),c=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((m=>{for(const v of m)v.keys().forEach((E=>{const x=t.get(E);if(x===null)return;let P=s.get(E)||Ai.empty();P=v.applyToLocalView(x,P),s.set(E,P);const I=(a.get(v.batchId)||ot()).add(E);a=a.insert(v.batchId,I)}))})).next((()=>{const m=[],v=a.getReverseIterator();for(;v.hasNext();){const E=v.getNext(),x=E.key,P=E.value,I=Xv();P.forEach((R=>{if(!c.has(R)){const q=i0(t.get(R),s.get(R));q!==null&&I.set(R,q),c=c.add(R)}})),m.push(this.documentOverlayCache.saveOverlays(e,x,I))}return se.waitFor(m)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return nb(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Gv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((c=>{const m=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-c.size):se.resolve(Pa());let v=Nu,E=c;return m.next((x=>se.forEach(x,((P,I)=>(v<I.largestBatchId&&(v=I.largestBatchId),c.get(P)?se.resolve():this.remoteDocumentCache.getEntry(e,P).next((R=>{E=E.insert(P,R)}))))).next((()=>this.populateOverlays(e,x,c))).next((()=>this.computeViews(e,E,x,ot()))).next((P=>({batchId:v,changes:Yv(P)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Me(t)).next((s=>{let a=wu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const c=t.collectionGroup;let m=wu();return this.indexManager.getCollectionParents(e,c).next((v=>se.forEach(v,(E=>{const x=(function(I,R){return new Bl(R,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(t,E.child(c));return this.getDocumentsMatchingCollectionQuery(e,x,s,a).next((P=>{P.forEach(((I,R)=>{m=m.insert(I,R)}))}))})).next((()=>m))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((m=>(c=m,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,a)))).next((m=>{c.forEach(((E,x)=>{const P=x.getKey();m.get(P)===null&&(m=m.insert(P,Un.newInvalidDocument(P)))}));let v=wu();return m.forEach(((E,x)=>{const P=c.get(E);P!==void 0&&Cu(P.mutation,x,Ai.empty(),kt.now()),Uh(t,x)&&(v=v.insert(E,x))})),v}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return se.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:os(a.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:qb(a.bundledQuery),readTime:os(a.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(){this.overlays=new Bt(Me.comparator),this.Lr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Pa();return se.forEach(t,(a=>this.getOverlay(e,a).next((c=>{c!==null&&s.set(a,c)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,c)=>{this.bt(e,t,c)})),se.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.Lr.get(s);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(s)),se.resolve()}getOverlaysForCollection(e,t,s){const a=Pa(),c=t.length+1,m=new Me(t.child("")),v=this.overlays.getIteratorFrom(m);for(;v.hasNext();){const E=v.getNext().value,x=E.getKey();if(!t.isPrefixOf(x.path))break;x.path.length===c&&E.largestBatchId>s&&a.set(E.getKey(),E)}return se.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let c=new Bt(((x,P)=>x-P));const m=this.overlays.getIterator();for(;m.hasNext();){const x=m.getNext().value;if(x.getKey().getCollectionGroup()===t&&x.largestBatchId>s){let P=c.get(x.largestBatchId);P===null&&(P=Pa(),c=c.insert(x.largestBatchId,P)),P.set(x.getKey(),x)}}const v=Pa(),E=c.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach(((x,P)=>v.set(x,P))),!(v.size()>=a)););return se.resolve(v)}bt(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const m=this.Lr.get(a.largestBatchId).delete(s.key);this.Lr.set(a.largestBatchId,m)}this.overlays=this.overlays.insert(s.key,new Eb(t,s));let c=this.Lr.get(t);c===void 0&&(c=ot(),this.Lr.set(t,c)),this.Lr.set(t,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.sessionToken=Cn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(){this.kr=new ln(pn.Kr),this.qr=new ln(pn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const s=new pn(e,t);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new pn(e,t))}Qr(e,t){e.forEach((s=>this.removeReference(s,t)))}Gr(e){const t=new Me(new At([])),s=new pn(t,e),a=new pn(t,e+1),c=[];return this.qr.forEachInRange([s,a],(m=>{this.Wr(m),c.push(m.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Me(new At([])),s=new pn(t,e),a=new pn(t,e+1);let c=ot();return this.qr.forEachInRange([s,a],(m=>{c=c.add(m.key)})),c}containsKey(e){const t=new pn(e,0),s=this.kr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class pn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Me.comparator(e.key,t.key)||st(e.Hr,t.Hr)}static Ur(e,t){return st(e.Hr,t.Hr)||Me.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new ln(pn.Kr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const m=new wb(c,t,s,a);this.mutationQueue.push(m);for(const v of a)this.Jr=this.Jr.add(new pn(v.key,c)),this.indexManager.addToCollectionParentIndex(e,v.key.path.popLast());return se.resolve(m)}lookupMutationBatch(e,t){return se.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.Xr(s),c=a<0?0:a;return se.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?ym:this.Yn-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new pn(t,0),a=new pn(t,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([s,a],(m=>{const v=this.Zr(m.Hr);c.push(v)})),se.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ln(st);return t.forEach((a=>{const c=new pn(a,0),m=new pn(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,m],(v=>{s=s.add(v.Hr)}))})),se.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let c=s;Me.isDocumentKey(c)||(c=c.child(""));const m=new pn(new Me(c),0);let v=new ln(st);return this.Jr.forEachWhile((E=>{const x=E.key.path;return!!s.isPrefixOf(x)&&(x.length===a&&(v=v.add(E.Hr)),!0)}),m),se.resolve(this.Yr(v))}Yr(e){const t=[];return e.forEach((s=>{const a=this.Zr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){vt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return se.forEach(t.mutations,(a=>{const c=new pn(a.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,t){const s=new pn(t,0),a=this.Jr.firstAfterOrEqual(s);return se.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.ti=e,this.docs=(function(){return new Bt(Me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),c=a?a.size:0,m=this.ti(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:m}),this.size+=m-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return se.resolve(s?s.document.mutableCopy():Un.newInvalidDocument(t))}getEntries(e,t){let s=$s();return t.forEach((a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Un.newInvalidDocument(a))})),se.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let c=$s();const m=t.path,v=new Me(m.child("__id-9223372036854775808__")),E=this.docs.getIteratorFrom(v);for(;E.hasNext();){const{key:x,value:{document:P}}=E.getNext();if(!m.isPrefixOf(x.path))break;x.path.length>m.length+1||NP(RP(P),s)<=0||(a.has(P.key)||Uh(t,P))&&(c=c.insert(P.key,P.mutableCopy()))}return se.resolve(c)}getAllFromCollectionGroup(e,t,s,a){He(9500)}ni(e,t){return se.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new aC(this)}getSize(e){return se.resolve(this.size)}}class aC extends Jb{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(s)})),se.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.persistence=e,this.ri=new Oa((t=>Em(t)),Tm),this.lastRemoteSnapshotVersion=Qe.min(),this.highestTargetId=0,this.ii=0,this.si=new Cm,this.targetCount=0,this.oi=Ll._r()}forEachTarget(e,t){return this.ri.forEach(((s,a)=>t(a))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ii&&(this.ii=t),se.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Ll(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.lr(t),se.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,s){let a=0;const c=[];return this.ri.forEach(((m,v)=>{v.sequenceNumber<=t&&s.get(v.targetId)===null&&(this.ri.delete(m),c.push(this.removeMatchingKeysForTargetId(e,v.targetId)),a++)})),se.waitFor(c).next((()=>a))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const s=this.ri.get(t)||null;return se.resolve(s)}addMatchingKeys(e,t,s){return this.si.$r(t,s),se.resolve()}removeMatchingKeys(e,t,s){this.si.Qr(t,s);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach((m=>{c.push(a.markPotentiallyOrphaned(e,m))})),se.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const s=this.si.jr(t);return se.resolve(s)}containsKey(e,t){return se.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,t){this._i={},this.overlays={},this.ai=new zh(0),this.ui=!1,this.ui=!0,this.ci=new iC,this.referenceDelegate=e(this),this.li=new lC(this),this.indexManager=new $b,this.remoteDocumentCache=(function(a){return new oC(a)})((s=>this.referenceDelegate.hi(s))),this.serializer=new Hb(t),this.Pi=new nC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this._i[e.toKey()];return s||(s=new sC(t,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,s){be("MemoryPersistence","Starting transaction:",e);const a=new uC(this.ai.next());return this.referenceDelegate.Ti(),s(a).next((c=>this.referenceDelegate.Ii(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ei(e,t){return se.or(Object.values(this._i).map((s=>()=>s.containsKey(e,t))))}}class uC extends MP{constructor(e){super(),this.currentSequenceNumber=e}}class Am{constructor(e){this.persistence=e,this.Ri=new Cm,this.Ai=null}static Vi(e){return new Am(e)}get di(){if(this.Ai)return this.Ai;throw He(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.di.delete(s.toString()),se.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.di.add(s.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((c=>this.di.add(c.toString())))})).next((()=>s.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.di,(s=>{const a=Me.fromPath(s);return this.mi(e,a).next((c=>{c||t.removeEntry(a,Qe.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Ph{constructor(e,t){this.persistence=e,this.fi=new Oa((s=>VP(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=Xb(this,t)}static Vi(e,t){return new Ph(e,t)}Ti(){}Ii(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}mr(e,t){return se.forEach(this.fi,((s,a)=>this.wr(e,s,a).next((c=>c?se.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ni(e,(m=>this.wr(e,m,t).next((v=>{v||(s++,c.removeEntry(m,Qe.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),se.resolve()}removeReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),se.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=sh(e.data.value)),t}wr(e,t,s){return se.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return se.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Ts=s,this.Is=a}static Es(e,t){let s=ot(),a=ot();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new km(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return J1()?8:DP(Wn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const c={result:null};return this.gs(e,t).next((m=>{c.result=m})).next((()=>{if(!c.result)return this.ps(e,t,a,s).next((m=>{c.result=m}))})).next((()=>{if(c.result)return;const m=new cC;return this.ys(e,t,m).next((v=>{if(c.result=v,this.As)return this.ws(e,t,m,v.size)}))})).next((()=>c.result))}ws(e,t,s,a){return s.documentReadCount<this.Vs?(pl()<=it.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",gl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(pl()<=it.DEBUG&&be("QueryEngine","Query:",gl(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.ds*a?(pl()<=it.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",gl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ss(t))):se.resolve())}gs(e,t){if(O_(t))return se.resolve(null);let s=ss(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=qf(t,null,"F"),s=ss(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const m=ot(...c);return this.fs.getDocuments(e,m).next((v=>this.indexManager.getMinOffset(e,s).next((E=>{const x=this.bs(t,v);return this.Ss(t,x,m,E.readTime)?this.gs(e,qf(t,null,"F")):this.Ds(e,x,t,E)}))))})))))}ps(e,t,s,a){return O_(t)||a.isEqual(Qe.min())?se.resolve(null):this.fs.getDocuments(e,s).next((c=>{const m=this.bs(t,c);return this.Ss(t,m,s,a)?se.resolve(null):(pl()<=it.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),gl(t)),this.Ds(e,m,t,kP(a,Nu)).next((v=>v)))}))}bs(e,t){let s=new ln(Kv(e));return t.forEach(((a,c)=>{Uh(e,c)&&(s=s.add(c))})),s}Ss(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ys(e,t,s){return pl()<=it.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",gl(t)),this.fs.getDocumentsMatchingQuery(e,t,Ho.min(),s)}Ds(e,t,s,a){return this.fs.getDocumentsMatchingQuery(e,s,a).next((c=>(t.forEach((m=>{c=c.insert(m.key,m)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="LocalStore",dC=3e8;class fC{constructor(e,t,s,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new Bt(st),this.Fs=new Oa((c=>Em(c)),Tm),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tC(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function mC(i,e,t,s){return new fC(i,e,t,s)}async function w0(i,e){const t=Ye(i);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((c=>(a=c,t.Os(e),t.mutationQueue.getAllMutationBatches(s)))).next((c=>{const m=[],v=[];let E=ot();for(const x of a){m.push(x.batchId);for(const P of x.mutations)E=E.add(P.key)}for(const x of c){v.push(x.batchId);for(const P of x.mutations)E=E.add(P.key)}return t.localDocuments.getDocuments(s,E).next((x=>({Ns:x,removedBatchIds:m,addedBatchIds:v})))}))}))}function pC(i,e){const t=Ye(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),c=t.xs.newChangeBuffer({trackRemovals:!0});return(function(v,E,x,P){const I=x.batch,R=I.keys();let q=se.resolve();return R.forEach((Q=>{q=q.next((()=>P.getEntry(E,Q))).next((ne=>{const te=x.docVersions.get(Q);vt(te!==null,48541),ne.version.compareTo(te)<0&&(I.applyToRemoteDocument(ne,x),ne.isValidDocument()&&(ne.setReadTime(x.commitVersion),P.addEntry(ne)))}))})),q.next((()=>v.mutationQueue.removeMutationBatch(E,I)))})(t,s,e,c).next((()=>c.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(v){let E=ot();for(let x=0;x<v.mutationResults.length;++x)v.mutationResults[x].transformResults.length>0&&(E=E.add(v.batch.mutations[x].key));return E})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function E0(i){const e=Ye(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function gC(i,e){const t=Ye(i),s=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const m=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const v=[];e.targetChanges.forEach(((P,I)=>{const R=a.get(I);if(!R)return;v.push(t.li.removeMatchingKeys(c,P.removedDocuments,I).next((()=>t.li.addMatchingKeys(c,P.addedDocuments,I))));let q=R.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(I)!==null?q=q.withResumeToken(Cn.EMPTY_BYTE_STRING,Qe.min()).withLastLimboFreeSnapshotVersion(Qe.min()):P.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(P.resumeToken,s)),a=a.insert(I,q),(function(ne,te,ke){return ne.resumeToken.approximateByteSize()===0||te.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=dC?!0:ke.addedDocuments.size+ke.modifiedDocuments.size+ke.removedDocuments.size>0})(R,q,P)&&v.push(t.li.updateTargetData(c,q))}));let E=$s(),x=ot();if(e.documentUpdates.forEach((P=>{e.resolvedLimboDocuments.has(P)&&v.push(t.persistence.referenceDelegate.updateLimboDocument(c,P))})),v.push(_C(c,m,e.documentUpdates).next((P=>{E=P.Bs,x=P.Ls}))),!s.isEqual(Qe.min())){const P=t.li.getLastRemoteSnapshotVersion(c).next((I=>t.li.setTargetsMetadata(c,c.currentSequenceNumber,s)));v.push(P)}return se.waitFor(v).next((()=>m.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,E,x))).next((()=>E))})).then((c=>(t.vs=a,c)))}function _C(i,e,t){let s=ot(),a=ot();return t.forEach((c=>s=s.add(c))),e.getEntries(i,s).next((c=>{let m=$s();return t.forEach(((v,E)=>{const x=c.get(v);E.isFoundDocument()!==x.isFoundDocument()&&(a=a.add(v)),E.isNoDocument()&&E.version.isEqual(Qe.min())?(e.removeEntry(v,E.readTime),m=m.insert(v,E)):!x.isValidDocument()||E.version.compareTo(x.version)>0||E.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(E),m=m.insert(v,E)):be(Rm,"Ignoring outdated watch update for ",v,". Current version:",x.version," Watch version:",E.version)})),{Bs:m,Ls:a}}))}function yC(i,e){const t=Ye(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=ym),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function vC(i,e){const t=Ye(i);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.li.getTargetData(s,e).next((c=>c?(a=c,se.resolve(a)):t.li.allocateTargetId(s).next((m=>(a=new Oo(e,m,"TargetPurposeListen",s.currentSequenceNumber),t.li.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.vs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(s.targetId,s),t.Fs.set(e,s.targetId)),s}))}async function Qf(i,e,t){const s=Ye(i),a=s.vs.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,(m=>s.persistence.referenceDelegate.removeTarget(m,a)))}catch(m){if(!jl(m))throw m;be(Rm,`Failed to update sequence numbers for target ${e}: ${m}`)}s.vs=s.vs.remove(e),s.Fs.delete(a.target)}function K_(i,e,t){const s=Ye(i);let a=Qe.min(),c=ot();return s.persistence.runTransaction("Execute query","readwrite",(m=>(function(E,x,P){const I=Ye(E),R=I.Fs.get(P);return R!==void 0?se.resolve(I.vs.get(R)):I.li.getTargetData(x,P)})(s,m,ss(e)).next((v=>{if(v)return a=v.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(m,v.targetId).next((E=>{c=E}))})).next((()=>s.Cs.getDocumentsMatchingQuery(m,e,t?a:Qe.min(),t?c:ot()))).next((v=>(wC(s,sb(e),v),{documents:v,ks:c})))))}function wC(i,e,t){let s=i.Ms.get(e)||Qe.min();t.forEach(((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),i.Ms.set(e,s)}class Q_{constructor(){this.activeTargetIds=hb()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class EC{constructor(){this.vo=new Q_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,s){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Q_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="ConnectivityMonitor";class X_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){be(Y_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){be(Y_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jc=null;function Yf(){return Jc===null?Jc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jc++,"0x"+Jc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf="RestConnection",xC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class IC{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${s}/databases/${a}`,this.$o=this.databaseId.database===wh?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Wo(e,t,s,a,c){const m=Yf(),v=this.Qo(e,t.toUriEncodedString());be(xf,`Sending RPC '${e}' ${m}:`,v,s);const E={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(E,a,c);const{host:x}=new URL(v),P=Dl(x);return this.zo(e,v,E,s,P).then((I=>(be(xf,`Received RPC '${e}' ${m}: `,I),I)),(I=>{throw Al(xf,`RPC '${e}' ${m} failed with error: `,I,"url: ",v,"request:",s),I}))}jo(e,t,s,a,c,m){return this.Wo(e,t,s,a,c)}Go(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,c)=>e[c]=a)),s&&s.headers.forEach(((a,c)=>e[c]=a))}Qo(e,t){const s=xC[e];let a=`${this.qo}/v1/${t}:${s}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="WebChannelConnection",_u=(i,e,t)=>{i.listen(e,(s=>{try{t(s)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Sl extends IC{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Sl.c_){const e=Sv();_u(e,Iv.STAT_EVENT,(t=>{t.stat===zf.PROXY?be(jn,"STAT_EVENT: detected buffering proxy"):t.stat===zf.NOPROXY&&be(jn,"STAT_EVENT: detected no buffering proxy")})),Sl.c_=!0}}zo(e,t,s,a,c){const m=Yf();return new Promise(((v,E)=>{const x=new Tv;x.setWithCredentials(!0),x.listenOnce(xv.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case ih.NO_ERROR:const I=x.getResponseJson();be(jn,`XHR for RPC '${e}' ${m} received:`,JSON.stringify(I)),v(I);break;case ih.TIMEOUT:be(jn,`RPC '${e}' ${m} timed out`),E(new Pe(ie.DEADLINE_EXCEEDED,"Request time out"));break;case ih.HTTP_ERROR:const R=x.getStatus();if(be(jn,`RPC '${e}' ${m} failed with status:`,R,"response text:",x.getResponseText()),R>0){let q=x.getResponseJson();Array.isArray(q)&&(q=q[0]);const Q=q==null?void 0:q.error;if(Q&&Q.status&&Q.message){const ne=(function(ke){const me=ke.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(me)>=0?me:ie.UNKNOWN})(Q.status);E(new Pe(ne,Q.message))}else E(new Pe(ie.UNKNOWN,"Server responded with status "+x.getStatus()))}else E(new Pe(ie.UNAVAILABLE,"Connection failed."));break;default:He(9055,{l_:e,streamId:m,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{be(jn,`RPC '${e}' ${m} completed.`)}}));const P=JSON.stringify(a);be(jn,`RPC '${e}' ${m} sending request:`,a),x.send(t,"POST",P,s,15)}))}T_(e,t,s){const a=Yf(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=this.createWebChannelTransport(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(v.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(v.useFetchStreams=!0),this.Go(v.initMessageHeaders,t,s),v.encodeInitMessageHeaders=!0;const x=c.join("");be(jn,`Creating RPC '${e}' stream ${a}: ${x}`,v);const P=m.createWebChannel(x,v);this.I_(P);let I=!1,R=!1;const q=new SC({Ho:Q=>{R?be(jn,`Not sending because RPC '${e}' stream ${a} is closed:`,Q):(I||(be(jn,`Opening RPC '${e}' stream ${a} transport.`),P.open(),I=!0),be(jn,`RPC '${e}' stream ${a} sending:`,Q),P.send(Q))},Jo:()=>P.close()});return _u(P,vu.EventType.OPEN,(()=>{R||(be(jn,`RPC '${e}' stream ${a} transport opened.`),q.i_())})),_u(P,vu.EventType.CLOSE,(()=>{R||(R=!0,be(jn,`RPC '${e}' stream ${a} transport closed`),q.o_(),this.E_(P))})),_u(P,vu.EventType.ERROR,(Q=>{R||(R=!0,Al(jn,`RPC '${e}' stream ${a} transport errored. Name:`,Q.name,"Message:",Q.message),q.o_(new Pe(ie.UNAVAILABLE,"The operation could not be completed")))})),_u(P,vu.EventType.MESSAGE,(Q=>{var ne;if(!R){const te=Q.data[0];vt(!!te,16349);const ke=te,me=(ke==null?void 0:ke.error)||((ne=ke[0])==null?void 0:ne.error);if(me){be(jn,`RPC '${e}' stream ${a} received error:`,me);const we=me.status;let xe=(function(F){const k=Jt[F];if(k!==void 0)return a0(k)})(we),De=me.message;xe===void 0&&(xe=ie.INTERNAL,De="Unknown error status: "+we+" with message "+me.message),R=!0,q.o_(new Pe(xe,De)),P.close()}else be(jn,`RPC '${e}' stream ${a} received:`,te),q.__(te)}})),Sl.u_(),setTimeout((()=>{q.s_()}),0),q}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,s){super.Go(e,t,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Pv()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(i){return new Sl(i)}function If(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(i){return new kb(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sl.c_=!1;class T0{constructor(e,t,s=1e3,a=1.5,c=6e4){this.Ci=e,this.timerId=t,this.R_=s,this.A_=a,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&be("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="PersistentStream";class x0{constructor(e,t,s,a,c,m,v,E){this.Ci=e,this.b_=s,this.S_=a,this.connection=c,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=v,this.listener=E,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new T0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(qs(t.toString()),qs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new Pe(ie.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return be(J_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(be(J_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bC extends x0{constructor(e,t,s,a,c,m){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,m),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Lb(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Qe.min();const m=c.targetChange;return m.targetIds&&m.targetIds.length?Qe.min():m.readTime?os(m.readTime):Qe.min()})(e);return this.listener.J_(t,s)}Z_(e){const t={};t.database=Kf(this.serializer),t.addTarget=(function(c,m){let v;const E=m.target;if(v=Wf(E)?{documents:Ob(c,E)}:{query:Vb(c,E).ft},v.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){v.resumeToken=c0(c,m.resumeToken);const x=$f(c,m.expectedCount);x!==null&&(v.expectedCount=x)}else if(m.snapshotVersion.compareTo(Qe.min())>0){v.readTime=Sh(c,m.snapshotVersion.toTimestamp());const x=$f(c,m.expectedCount);x!==null&&(v.expectedCount=x)}return v})(this.serializer,e);const s=Fb(this.serializer,e);s&&(t.labels=s),this.K_(t)}X_(e){const t={};t.database=Kf(this.serializer),t.removeTarget=e,this.K_(t)}}class CC extends x0{constructor(e,t,s,a,c,m){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,m),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return vt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,vt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){vt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Db(e.writeResults,e.commitTime),s=os(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Kf(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>Mb(this.serializer,s)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{}class kC extends AC{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Pe(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Wo(e,Gf(t,s),a,c,m))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Pe(ie.UNKNOWN,c.toString())}))}jo(e,t,s,a,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,v])=>this.connection.jo(e,Gf(t,s),a,m,v,c))).catch((m=>{throw m.name==="FirebaseError"?(m.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Pe(ie.UNKNOWN,m.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function RC(i,e,t,s){return new kC(i,e,t,s)}class NC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(qs(t),this.aa=!1):be("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma="RemoteStore";class LC{constructor(e,t,s,a,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((m=>{s.enqueueAndForget((async()=>{za(this)&&(be(Ma,"Restarting streams for network reachability change."),await(async function(E){const x=Ye(E);x.Ea.add(4),await Gu(x),x.Va.set("Unknown"),x.Ea.delete(4),await Gh(x)})(this))}))})),this.Va=new NC(s,a)}}async function Gh(i){if(za(i))for(const e of i.Ra)await e(!0)}async function Gu(i){for(const e of i.Ra)await e(!1)}function I0(i,e){const t=Ye(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Dm(t)?Mm(t):Ul(t).O_()&&Lm(t,e))}function Nm(i,e){const t=Ye(i),s=Ul(t);t.Ia.delete(e),s.O_()&&S0(t,e),t.Ia.size===0&&(s.O_()?s.L_():za(t)&&t.Va.set("Unknown"))}function Lm(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qe.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ul(i).Z_(e)}function S0(i,e){i.da.$e(e),Ul(i).X_(e)}function Mm(i){i.da=new Pb({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Ul(i).start(),i.Va.ua()}function Dm(i){return za(i)&&!Ul(i).x_()&&i.Ia.size>0}function za(i){return Ye(i).Ea.size===0}function P0(i){i.da=void 0}async function MC(i){i.Va.set("Online")}async function DC(i){i.Ia.forEach(((e,t)=>{Lm(i,e)}))}async function OC(i,e){P0(i),Dm(i)?(i.Va.ha(e),Mm(i)):i.Va.set("Unknown")}async function VC(i,e,t){if(i.Va.set("Online"),e instanceof u0&&e.state===2&&e.cause)try{await(async function(a,c){const m=c.cause;for(const v of c.targetIds)a.Ia.has(v)&&(await a.remoteSyncer.rejectListen(v,m),a.Ia.delete(v),a.da.removeTarget(v))})(i,e)}catch(s){be(Ma,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await bh(i,s)}else if(e instanceof lh?i.da.Xe(e):e instanceof l0?i.da.st(e):i.da.tt(e),!t.isEqual(Qe.min()))try{const s=await E0(i.localStore);t.compareTo(s)>=0&&await(function(c,m){const v=c.da.Tt(m);return v.targetChanges.forEach(((E,x)=>{if(E.resumeToken.approximateByteSize()>0){const P=c.Ia.get(x);P&&c.Ia.set(x,P.withResumeToken(E.resumeToken,m))}})),v.targetMismatches.forEach(((E,x)=>{const P=c.Ia.get(E);if(!P)return;c.Ia.set(E,P.withResumeToken(Cn.EMPTY_BYTE_STRING,P.snapshotVersion)),S0(c,E);const I=new Oo(P.target,E,x,P.sequenceNumber);Lm(c,I)})),c.remoteSyncer.applyRemoteEvent(v)})(i,t)}catch(s){be(Ma,"Failed to raise snapshot:",s),await bh(i,s)}}async function bh(i,e,t){if(!jl(e))throw e;i.Ea.add(1),await Gu(i),i.Va.set("Offline"),t||(t=()=>E0(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{be(Ma,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await Gh(i)}))}function b0(i,e){return e().catch((t=>bh(i,t,e)))}async function Zh(i){const e=Ye(i),t=Zo(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ym;for(;zC(e);)try{const a=await yC(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,FC(e,a)}catch(a){await bh(e,a)}C0(e)&&A0(e)}function zC(i){return za(i)&&i.Ta.length<10}function FC(i,e){i.Ta.push(e);const t=Zo(i);t.O_()&&t.Y_&&t.ea(e.mutations)}function C0(i){return za(i)&&!Zo(i).x_()&&i.Ta.length>0}function A0(i){Zo(i).start()}async function jC(i){Zo(i).ra()}async function BC(i){const e=Zo(i);for(const t of i.Ta)e.ea(t.mutations)}async function UC(i,e,t){const s=i.Ta.shift(),a=Sm.from(s,e,t);await b0(i,(()=>i.remoteSyncer.applySuccessfulWrite(a))),await Zh(i)}async function WC(i,e){e&&Zo(i).Y_&&await(async function(s,a){if((function(m){return xb(m)&&m!==ie.ABORTED})(a.code)){const c=s.Ta.shift();Zo(s).B_(),await b0(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a))),await Zh(s)}})(i,e),C0(i)&&A0(i)}async function ey(i,e){const t=Ye(i);t.asyncQueue.verifyOperationInProgress(),be(Ma,"RemoteStore received new credentials");const s=za(t);t.Ea.add(3),await Gu(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Gh(t)}async function HC(i,e){const t=Ye(i);e?(t.Ea.delete(2),await Gh(t)):e||(t.Ea.add(2),await Gu(t),t.Va.set("Unknown"))}function Ul(i){return i.ma||(i.ma=(function(t,s,a){const c=Ye(t);return c.sa(),new bC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(i.datastore,i.asyncQueue,{Zo:MC.bind(null,i),Yo:DC.bind(null,i),t_:OC.bind(null,i),J_:VC.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),Dm(i)?Mm(i):i.Va.set("Unknown")):(await i.ma.stop(),P0(i))}))),i.ma}function Zo(i){return i.fa||(i.fa=(function(t,s,a){const c=Ye(t);return c.sa(),new CC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:jC.bind(null,i),t_:WC.bind(null,i),ta:BC.bind(null,i),na:UC.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await Zh(i)):(await i.fa.stop(),i.Ta.length>0&&(be(Ma,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,t,s,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new ba,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((m=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,c){const m=Date.now()+s,v=new Om(e,t,m,a,c);return v.start(s),v}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Pe(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vm(i,e){if(qs("AsyncQueue",`${e}: ${i}`),jl(i))return new Pe(ie.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{static emptySet(e){return new Pl(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Me.comparator(t.key,s.key):(t,s)=>Me.comparator(t.key,s.key),this.keyedMap=wu(),this.sortedSet=new Bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Pl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Pl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(){this.ga=new Bt(Me.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):He(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Ml{constructor(e,t,s,a,c,m,v,E,x){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=m,this.syncStateChanged=v,this.excludesMetadataChanges=E,this.hasCachedResults=x}static fromInitialDocuments(e,t,s,a,c){const m=[];return t.forEach((v=>{m.push({type:0,doc:v})})),new Ml(e,t,Pl.emptySet(t),m,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class $C{constructor(){this.queries=ny(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=Ye(t),c=a.queries;a.queries=ny(),c.forEach(((m,v)=>{for(const E of v.ba)E.onError(s)}))})(this,new Pe(ie.ABORTED,"Firestore shutting down"))}}function ny(){return new Oa((i=>Zv(i)),Bh)}async function GC(i,e){const t=Ye(i);let s=3;const a=e.query;let c=t.queries.get(a);c?!c.Sa()&&e.Da()&&(s=2):(c=new qC,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await t.onListen(a,!0);break;case 1:c.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(m){const v=Vm(m,`Initialization of query '${gl(e.query)}' failed`);return void e.onError(v)}t.queries.set(a,c),c.ba.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&zm(t)}async function ZC(i,e){const t=Ye(i),s=e.query;let a=3;const c=t.queries.get(s);if(c){const m=c.ba.indexOf(e);m>=0&&(c.ba.splice(m,1),c.ba.length===0?a=e.Da()?0:1:!c.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function KC(i,e){const t=Ye(i);let s=!1;for(const a of e){const c=a.query,m=t.queries.get(c);if(m){for(const v of m.ba)v.Fa(a)&&(s=!0);m.wa=a}}s&&zm(t)}function QC(i,e,t){const s=Ye(i),a=s.queries.get(e);if(a)for(const c of a.ba)c.onError(t);s.queries.delete(e)}function zm(i){i.Ca.forEach((e=>{e.next()}))}var Xf,ry;(ry=Xf||(Xf={})).Ma="default",ry.Cache="cache";class YC{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Ml(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e){this.key=e}}class R0{constructor(e){this.key=e}}class XC{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ot(),this.mutatedKeys=ot(),this.eu=Kv(e),this.tu=new Pl(this.eu)}get nu(){return this.Za}ru(e,t){const s=t?t.iu:new ty,a=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,m=a,v=!1;const E=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,x=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((P,I)=>{const R=a.get(P),q=Uh(this.query,I)?I:null,Q=!!R&&this.mutatedKeys.has(R.key),ne=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let te=!1;R&&q?R.data.isEqual(q.data)?Q!==ne&&(s.track({type:3,doc:q}),te=!0):this.su(R,q)||(s.track({type:2,doc:q}),te=!0,(E&&this.eu(q,E)>0||x&&this.eu(q,x)<0)&&(v=!0)):!R&&q?(s.track({type:0,doc:q}),te=!0):R&&!q&&(s.track({type:1,doc:R}),te=!0,(E||x)&&(v=!0)),te&&(q?(m=m.add(q),c=ne?c.add(P):c.delete(P)):(m=m.delete(P),c=c.delete(P)))})),this.query.limit!==null)for(;m.size>this.query.limit;){const P=this.query.limitType==="F"?m.last():m.first();m=m.delete(P.key),c=c.delete(P.key),s.track({type:1,doc:P})}return{tu:m,iu:s,Ss:v,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const m=e.iu.ya();m.sort(((P,I)=>(function(q,Q){const ne=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He(20277,{Vt:te})}};return ne(q)-ne(Q)})(P.type,I.type)||this.eu(P.doc,I.doc))),this.ou(s),a=a??!1;const v=t&&!a?this._u():[],E=this.Ya.size===0&&this.current&&!a?1:0,x=E!==this.Xa;return this.Xa=E,m.length!==0||x?{snapshot:new Ml(this.query,e.tu,c,m,e.mutatedKeys,E===0,x,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:v}:{au:v}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ty,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ot(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const t=[];return e.forEach((s=>{this.Ya.has(s)||t.push(new R0(s))})),this.Ya.forEach((s=>{e.has(s)||t.push(new k0(s))})),t}cu(e){this.Za=e.ks,this.Ya=ot();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ml.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Fm="SyncEngine";class JC{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class eA{constructor(e){this.key=e,this.hu=!1}}class tA{constructor(e,t,s,a,c,m){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=m,this.Pu={},this.Tu=new Oa((v=>Zv(v)),Bh),this.Iu=new Map,this.Eu=new Set,this.Ru=new Bt(Me.comparator),this.Au=new Map,this.Vu=new Cm,this.du={},this.mu=new Map,this.fu=Ll.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function nA(i,e,t=!0){const s=V0(i);let a;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.lu()):a=await N0(s,e,t,!0),a}async function rA(i,e){const t=V0(i);await N0(t,e,!0,!1)}async function N0(i,e,t,s){const a=await vC(i.localStore,ss(e)),c=a.targetId,m=i.sharedClientState.addLocalQueryTarget(c,t);let v;return s&&(v=await iA(i,e,c,m==="current",a.resumeToken)),i.isPrimaryClient&&t&&I0(i.remoteStore,a),v}async function iA(i,e,t,s,a){i.pu=(I,R,q)=>(async function(ne,te,ke,me){let we=te.view.ru(ke);we.Ss&&(we=await K_(ne.localStore,te.query,!1).then((({documents:F})=>te.view.ru(F,we))));const xe=me&&me.targetChanges.get(te.targetId),De=me&&me.targetMismatches.get(te.targetId)!=null,Oe=te.view.applyChanges(we,ne.isPrimaryClient,xe,De);return sy(ne,te.targetId,Oe.au),Oe.snapshot})(i,I,R,q);const c=await K_(i.localStore,e,!0),m=new XC(e,c.ks),v=m.ru(c.documents),E=$u.createSynthesizedTargetChangeForCurrentChange(t,s&&i.onlineState!=="Offline",a),x=m.applyChanges(v,i.isPrimaryClient,E);sy(i,t,x.au);const P=new JC(e,t,m);return i.Tu.set(e,P),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),x.snapshot}async function sA(i,e,t){const s=Ye(i),a=s.Tu.get(e),c=s.Iu.get(a.targetId);if(c.length>1)return s.Iu.set(a.targetId,c.filter((m=>!Bh(m,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Qf(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&Nm(s.remoteStore,a.targetId),Jf(s,a.targetId)})).catch(Fl)):(Jf(s,a.targetId),await Qf(s.localStore,a.targetId,!0))}async function oA(i,e){const t=Ye(i),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Nm(t.remoteStore,s.targetId))}async function aA(i,e,t){const s=mA(i);try{const a=await(function(m,v){const E=Ye(m),x=kt.now(),P=v.reduce(((q,Q)=>q.add(Q.key)),ot());let I,R;return E.persistence.runTransaction("Locally write mutations","readwrite",(q=>{let Q=$s(),ne=ot();return E.xs.getEntries(q,P).next((te=>{Q=te,Q.forEach(((ke,me)=>{me.isValidDocument()||(ne=ne.add(ke))}))})).next((()=>E.localDocuments.getOverlayedDocuments(q,Q))).next((te=>{I=te;const ke=[];for(const me of v){const we=yb(me,I.get(me.key).overlayedDocument);we!=null&&ke.push(new Va(me.key,we,jv(we.value.mapValue),Bs.exists(!0)))}return E.mutationQueue.addMutationBatch(q,x,ke,v)})).next((te=>{R=te;const ke=te.applyToLocalDocumentSet(I,ne);return E.documentOverlayCache.saveOverlays(q,te.batchId,ke)}))})).then((()=>({batchId:R.batchId,changes:Yv(I)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(m,v,E){let x=m.du[m.currentUser.toKey()];x||(x=new Bt(st)),x=x.insert(v,E),m.du[m.currentUser.toKey()]=x})(s,a.batchId,t),await Zu(s,a.changes),await Zh(s.remoteStore)}catch(a){const c=Vm(a,"Failed to persist write");t.reject(c)}}async function L0(i,e){const t=Ye(i);try{const s=await gC(t.localStore,e);e.targetChanges.forEach(((a,c)=>{const m=t.Au.get(c);m&&(vt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?m.hu=!0:a.modifiedDocuments.size>0?vt(m.hu,14607):a.removedDocuments.size>0&&(vt(m.hu,42227),m.hu=!1))})),await Zu(t,s,e)}catch(s){await Fl(s)}}function iy(i,e,t){const s=Ye(i);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((c,m)=>{const v=m.view.va(e);v.snapshot&&a.push(v.snapshot)})),(function(m,v){const E=Ye(m);E.onlineState=v;let x=!1;E.queries.forEach(((P,I)=>{for(const R of I.ba)R.va(v)&&(x=!0)})),x&&zm(E)})(s.eventManager,e),a.length&&s.Pu.J_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function lA(i,e,t){const s=Ye(i);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),c=a&&a.key;if(c){let m=new Bt(Me.comparator);m=m.insert(c,Un.newNoDocument(c,Qe.min()));const v=ot().add(c),E=new qh(Qe.min(),new Map,new Bt(st),m,v);await L0(s,E),s.Ru=s.Ru.remove(c),s.Au.delete(e),jm(s)}else await Qf(s.localStore,e,!1).then((()=>Jf(s,e,t))).catch(Fl)}async function uA(i,e){const t=Ye(i),s=e.batch.batchId;try{const a=await pC(t.localStore,e);D0(t,s,null),M0(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Zu(t,a)}catch(a){await Fl(a)}}async function cA(i,e,t){const s=Ye(i);try{const a=await(function(m,v){const E=Ye(m);return E.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let P;return E.mutationQueue.lookupMutationBatch(x,v).next((I=>(vt(I!==null,37113),P=I.keys(),E.mutationQueue.removeMutationBatch(x,I)))).next((()=>E.mutationQueue.performConsistencyCheck(x))).next((()=>E.documentOverlayCache.removeOverlaysForBatchId(x,P,v))).next((()=>E.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,P))).next((()=>E.localDocuments.getDocuments(x,P)))}))})(s.localStore,e);D0(s,e,t),M0(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Zu(s,a)}catch(a){await Fl(a)}}function M0(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function D0(i,e,t){const s=Ye(i);let a=s.du[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),s.du[s.currentUser.toKey()]=a}}function Jf(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),t&&i.Pu.yu(s,t);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((s=>{i.Vu.containsKey(s)||O0(i,s)}))}function O0(i,e){i.Eu.delete(e.path.canonicalString());const t=i.Ru.get(e);t!==null&&(Nm(i.remoteStore,t),i.Ru=i.Ru.remove(e),i.Au.delete(t),jm(i))}function sy(i,e,t){for(const s of t)s instanceof k0?(i.Vu.addReference(s.key,e),hA(i,s)):s instanceof R0?(be(Fm,"Document no longer in limbo: "+s.key),i.Vu.removeReference(s.key,e),i.Vu.containsKey(s.key)||O0(i,s.key)):He(19791,{wu:s})}function hA(i,e){const t=e.key,s=t.path.canonicalString();i.Ru.get(t)||i.Eu.has(s)||(be(Fm,"New document in limbo: "+t),i.Eu.add(s),jm(i))}function jm(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new Me(At.fromString(e)),s=i.fu.next();i.Au.set(s,new eA(t)),i.Ru=i.Ru.insert(t,s),I0(i.remoteStore,new Oo(ss(xm(t.path)),s,"TargetPurposeLimboResolution",zh.ce))}}async function Zu(i,e,t){const s=Ye(i),a=[],c=[],m=[];s.Tu.isEmpty()||(s.Tu.forEach(((v,E)=>{m.push(s.pu(E,e,t).then((x=>{var P;if((x||t)&&s.isPrimaryClient){const I=x?!x.fromCache:(P=t==null?void 0:t.targetChanges.get(E.targetId))==null?void 0:P.current;s.sharedClientState.updateQueryState(E.targetId,I?"current":"not-current")}if(x){a.push(x);const I=km.Es(E.targetId,x);c.push(I)}})))})),await Promise.all(m),s.Pu.J_(a),await(async function(E,x){const P=Ye(E);try{await P.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>se.forEach(x,(R=>se.forEach(R.Ts,(q=>P.persistence.referenceDelegate.addReference(I,R.targetId,q))).next((()=>se.forEach(R.Is,(q=>P.persistence.referenceDelegate.removeReference(I,R.targetId,q)))))))))}catch(I){if(!jl(I))throw I;be(Rm,"Failed to update sequence numbers: "+I)}for(const I of x){const R=I.targetId;if(!I.fromCache){const q=P.vs.get(R),Q=q.snapshotVersion,ne=q.withLastLimboFreeSnapshotVersion(Q);P.vs=P.vs.insert(R,ne)}}})(s.localStore,c))}async function dA(i,e){const t=Ye(i);if(!t.currentUser.isEqual(e)){be(Fm,"User change. New user:",e.toKey());const s=await w0(t.localStore,e);t.currentUser=e,(function(c,m){c.mu.forEach((v=>{v.forEach((E=>{E.reject(new Pe(ie.CANCELLED,m))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Zu(t,s.Ns)}}function fA(i,e){const t=Ye(i),s=t.Au.get(e);if(s&&s.hu)return ot().add(s.key);{let a=ot();const c=t.Iu.get(e);if(!c)return a;for(const m of c){const v=t.Tu.get(m);a=a.unionWith(v.view.nu)}return a}}function V0(i){const e=Ye(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=L0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lA.bind(null,e),e.Pu.J_=KC.bind(null,e.eventManager),e.Pu.yu=QC.bind(null,e.eventManager),e}function mA(i){const e=Ye(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cA.bind(null,e),e}class Ch{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$h(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return mC(this.persistence,new hC,e.initialUser,this.serializer)}Cu(e){return new v0(Am.Vi,this.serializer)}Du(e){return new EC}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ch.provider={build:()=>new Ch};class pA extends Ch{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){vt(this.persistence.referenceDelegate instanceof Ph,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Qb(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Pr.withCacheSize(this.cacheSizeBytes):Pr.DEFAULT;return new v0((s=>Ph.Vi(s,t)),this.serializer)}}class em{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>iy(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=dA.bind(null,this.syncEngine),await HC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new $C})()}createDatastore(e){const t=$h(e.databaseInfo.databaseId),s=PC(e.databaseInfo);return RC(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,c,m,v){return new LC(s,a,c,m,v)})(this.localStore,this.datastore,e.asyncQueue,(t=>iy(this.syncEngine,t,0)),(function(){return X_.v()?new X_:new TC})())}createSyncEngine(e,t){return(function(a,c,m,v,E,x,P){const I=new tA(a,c,m,v,E,x);return P&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const c=Ye(a);be(Ma,"RemoteStore shutting down."),c.Ea.add(5),await Gu(c),c.Aa.shutdown(),c.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}em.provider={build:()=>new em};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):qs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko="FirestoreClient";class _A{constructor(e,t,s,a,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this._databaseInfo=a,this.user=Bn.UNAUTHENTICATED,this.clientId=_m.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async m=>{be(Ko,"Received user=",m.uid),await this.authCredentialListener(m),this.user=m})),this.appCheckCredentials.start(s,(m=>(be(Ko,"Received new app check token=",m),this.appCheckCredentialListener(m,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ba;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Vm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Sf(i,e){i.asyncQueue.verifyOperationInProgress(),be(Ko,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener((async a=>{s.isEqual(a)||(await w0(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function oy(i,e){i.asyncQueue.verifyOperationInProgress();const t=await yA(i);be(Ko,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((s=>ey(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,a)=>ey(e.remoteStore,a))),i._onlineComponents=e}async function yA(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){be(Ko,"Using user provided OfflineComponentProvider");try{await Sf(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ie.FAILED_PRECONDITION||a.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Al("Error using user provided cache. Falling back to memory cache: "+t),await Sf(i,new Ch)}}else be(Ko,"Using default OfflineComponentProvider"),await Sf(i,new pA(void 0));return i._offlineComponents}async function z0(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(be(Ko,"Using user provided OnlineComponentProvider"),await oy(i,i._uninitializedComponentsProvider._online)):(be(Ko,"Using default OnlineComponentProvider"),await oy(i,new em))),i._onlineComponents}function vA(i){return z0(i).then((e=>e.syncEngine))}async function ay(i){const e=await z0(i),t=e.eventManager;return t.onListen=nA.bind(null,e.syncEngine),t.onUnlisten=sA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=rA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=oA.bind(null,e.syncEngine),t}function wA(i,e,t,s){const a=new gA(s),c=new YC(e,a,t);return i.asyncQueue.enqueueAndForget((async()=>GC(await ay(i),c))),()=>{a.Nu(),i.asyncQueue.enqueueAndForget((async()=>ZC(await ay(i),c)))}}function EA(i,e){const t=new ba;return i.asyncQueue.enqueueAndForget((async()=>aA(await vA(i),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="ComponentProvider",ly=new Map;function xA(i,e,t,s,a){return new jP(i,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,F0(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="firestore.googleapis.com",uy=!0;class cy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Pe(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=j0,this.ssl=uy}else this.host=e.host,this.ssl=e.ssl??uy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=y0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Zb)throw new Pe(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=F0(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kh{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Pe(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Pe(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new vP;switch(s.type){case"firstParty":return new xP(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Pe(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=ly.get(t);s&&(be(TA,"Removing Datastore"),ly.delete(t),s.terminate())})(this),Promise.resolve()}}function IA(i,e,t,s={}){var x;i=Il(i,Kh);const a=Dl(e),c=i._getSettings(),m={...c,emulatorOptions:i._getEmulatorOptions()},v=`${e}:${t}`;a&&(Dy(`https://${v}`),Oy("Firestore",!0)),c.host!==j0&&c.host!==v&&Al("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const E={...c,host:v,ssl:a,emulatorOptions:s};if(!ka(E,m)&&(i._setSettings(E),s.mockUserToken)){let P,I;if(typeof s.mockUserToken=="string")P=s.mockUserToken,I=Bn.MOCK_USER;else{P=H1(s.mockUserToken,(x=i._app)==null?void 0:x.options.projectId);const R=s.mockUserToken.sub||s.mockUserToken.user_id;if(!R)throw new Pe(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new Bn(R)}i._authCredentials=new wP(new Cv(P,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Fa(this.firestore,e,this._query)}}class nn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nn(this.firestore,e,this._key)}toJSON(){return{type:nn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Hu(t,nn._jsonSchema))return new nn(e,s||null,new Me(At.fromString(t.referencePath)))}}nn._jsonSchemaVersion="firestore/documentReference/1.0",nn._jsonSchema={type:tn("string",nn._jsonSchemaVersion),referencePath:tn("string")};class Uo extends Fa{constructor(e,t,s){super(e,t,xm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new Me(e))}withConverter(e){return new Uo(this.firestore,e,this._path)}}function SA(i,e,...t){if(i=Fr(i),Av("collection","path",e),i instanceof Kh){const s=At.fromString(e,...t);return T_(s),new Uo(i,null,s)}{if(!(i instanceof nn||i instanceof Uo))throw new Pe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(At.fromString(e,...t));return T_(s),new Uo(i.firestore,null,s)}}function PA(i,e,...t){if(i=Fr(i),arguments.length===1&&(e=_m.newId()),Av("doc","path",e),i instanceof Kh){const s=At.fromString(e,...t);return E_(s),new nn(i,null,new Me(s))}{if(!(i instanceof nn||i instanceof Uo))throw new Pe(ie.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(At.fromString(e,...t));return E_(s),new nn(i.firestore,i instanceof Uo?i.converter:null,new Me(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy="AsyncQueue";class dy{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new T0(this,"async_queue_retry"),this._c=()=>{const s=If();s&&be(hy,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=If();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=If();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ba;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!jl(e))throw e;be(hy,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,qs("INTERNAL UNHANDLED ERROR: ",fy(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Om.createAndSchedule(this,e,t,s,(c=>this.hc(c)));return this.tc.push(a),a}uc(){this.nc&&He(47125,{Pc:fy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function fy(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Ah extends Kh{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new dy,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dy(e),this._firestoreClient=void 0,await e}}}function bA(i,e){const t=typeof i=="object"?i:jy(),s=typeof i=="string"?i:wh,a=lm(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=U1("firestore");c&&IA(a,...c)}return a}function B0(i){if(i._terminated)throw new Pe(ie.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||CA(i),i._firestoreClient}function CA(i){var s,a,c,m;const e=i._freezeSettings(),t=xA(i._databaseId,((s=i._app)==null?void 0:s.options.appId)||"",i._persistenceKey,(a=i._app)==null?void 0:a.options.apiKey,e);i._componentsProvider||(c=e.localCache)!=null&&c._offlineComponentProvider&&((m=e.localCache)!=null&&m._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new _A(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(E){const x=E==null?void 0:E._online.build();return{_offline:E==null?void 0:E._offline.build(x),_online:x}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mi(Cn.fromBase64String(e))}catch(t){throw new Pe(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new mi(Cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:mi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Hu(e,mi._jsonSchema))return mi.fromBase64String(e.bytes)}}mi._jsonSchemaVersion="firestore/bytes/1.0",mi._jsonSchema={type:tn("string",mi._jsonSchemaVersion),bytes:tn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Pe(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:as._jsonSchemaVersion}}static fromJSON(e){if(Hu(e,as._jsonSchema))return new as(e.latitude,e.longitude)}}as._jsonSchemaVersion="firestore/geoPoint/1.0",as._jsonSchema={type:tn("string",as._jsonSchemaVersion),latitude:tn("number"),longitude:tn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ki._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Hu(e,ki._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ki(e.vectorValues);throw new Pe(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ki._jsonSchemaVersion="firestore/vectorValue/1.0",ki._jsonSchema={type:tn("string",ki._jsonSchemaVersion),vectorValues:tn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA=/^__.*__$/;class kA{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Va(e,this.data,this.fieldMask,t,this.fieldTransforms):new qu(e,this.data,t,this.fieldTransforms)}}function H0(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw He(40011,{dataSource:i})}}class Bm{constructor(e,t,s,a,c,m){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=m||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Bm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return kh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(H0(this.dataSource)&&AA.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class RA{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||$h(e)}createContext(e,t,s,a=!1){return new Bm({dataSource:e,methodName:t,targetDoc:s,path:bn.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function q0(i){const e=i._freezeSettings(),t=$h(i._databaseId);return new RA(i._databaseId,!!e.ignoreUndefinedProperties,t)}function NA(i,e,t,s,a,c={}){const m=i.createContext(c.merge||c.mergeFields?2:0,e,t,a);Z0("Data must be an object, but it was:",m,s);const v=$0(s,m);let E,x;if(c.merge)E=new Ai(m.fieldMask),x=m.fieldTransforms;else if(c.mergeFields){const P=[];for(const I of c.mergeFields){const R=Qh(e,I,t);if(!m.contains(R))throw new Pe(ie.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);OA(P,R)||P.push(R)}E=new Ai(P),x=m.fieldTransforms.filter((I=>E.covers(I.field)))}else E=null,x=m.fieldTransforms;return new kA(new fi(v),E,x)}function LA(i,e,t,s=!1){return Um(t,i.createContext(s?4:3,e))}function Um(i,e){if(G0(i=Fr(i)))return Z0("Unsupported field value:",e,i),$0(i,e);if(i instanceof W0)return(function(s,a){if(!H0(a.dataSource))throw a.createError(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,a){const c=[];let m=0;for(const v of s){let E=Um(v,a.childContextForArray(m));E==null&&(E={nullValue:"NULL_VALUE"}),c.push(E),m++}return{arrayValue:{values:c}}})(i,e)}return(function(s,a){if((s=Fr(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return db(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=kt.fromDate(s);return{timestampValue:Sh(a.serializer,c)}}if(s instanceof kt){const c=new kt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Sh(a.serializer,c)}}if(s instanceof as)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof mi)return{bytesValue:c0(a.serializer,s._byteString)};if(s instanceof nn){const c=a.databaseId,m=s.firestore._databaseId;if(!m.isEqual(c))throw a.createError(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:bm(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof ki)return(function(m,v){const E=m instanceof ki?m.toArray():m;return{mapValue:{fields:{[zv]:{stringValue:Fv},[Eh]:{arrayValue:{values:E.map((P=>{if(typeof P!="number")throw v.createError("VectorValues must only contain numeric values.");return Im(v.serializer,P)}))}}}}}})(s,a);if(_0(s))return s._toProto(a.serializer);throw a.createError(`Unsupported field value: ${Vh(s)}`)})(i,e)}function $0(i,e){const t={};return Nv(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Da(i,((s,a)=>{const c=Um(a,e.childContextForField(s));c!=null&&(t[s]=c)})),{mapValue:{fields:t}}}function G0(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof kt||i instanceof as||i instanceof mi||i instanceof nn||i instanceof W0||i instanceof ki||_0(i))}function Z0(i,e,t){if(!G0(t)||!kv(t)){const s=Vh(t);throw s==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+s)}}function Qh(i,e,t){if((e=Fr(e))instanceof U0)return e._internalPath;if(typeof e=="string")return DA(i,e);throw kh("Field path arguments must be of type string or ",i,!1,void 0,t)}const MA=new RegExp("[~\\*/\\[\\]]");function DA(i,e,t){if(e.search(MA)>=0)throw kh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new U0(...e.split("."))._internalPath}catch{throw kh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function kh(i,e,t,s,a){const c=s&&!s.isEmpty(),m=a!==void 0;let v=`Function ${e}() called with invalid data`;t&&(v+=" (via `toFirestore()`)"),v+=". ";let E="";return(c||m)&&(E+=" (found",c&&(E+=` in field ${s}`),m&&(E+=` in document ${a}`),E+=")"),new Pe(ie.INVALID_ARGUMENT,v+i+E)}function OA(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{convertValue(e,t="none"){switch(Go(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($o(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw He(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Da(e,((a,c)=>{s[a]=this.convertValue(c,t)})),s}convertVectorValue(e){var s,a,c;const t=(c=(a=(s=e.fields)==null?void 0:s[Eh].arrayValue)==null?void 0:a.values)==null?void 0:c.map((m=>Zt(m.doubleValue)));return new ki(t)}convertGeoPoint(e){return new as(Zt(e.latitude),Zt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=jh(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Lu(e));default:return null}}convertTimestamp(e){const t=qo(e);return new kt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=At.fromString(e);vt(g0(s),9688,{name:e});const a=new Mu(s.get(1),s.get(3)),c=new Me(s.popFirst(5));return a.isEqual(t)||qs(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0 extends VA{constructor(e){super(),this.firestore=e}convertBytes(e){return new mi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,t)}}const my="@firebase/firestore",py="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(i){return(function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const c of s)if(c in a&&typeof a[c]=="function")return!0;return!1})(i,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e,t,s,a,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Qh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class zA extends Q0{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Pe(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wm{}class Y0 extends Wm{}function jA(i,e,...t){let s=[];e instanceof Wm&&s.push(e),s=s.concat(t),(function(c){const m=c.filter((E=>E instanceof qm)).length,v=c.filter((E=>E instanceof Hm)).length;if(m>1||m>0&&v>0)throw new Pe(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)i=a._apply(i);return i}class Hm extends Y0{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Hm(e,t,s)}_apply(e){const t=this._parse(e);return X0(e._query,t),new Fa(e.firestore,e.converter,Hf(e._query,t))}_parse(e){const t=q0(e.firestore);return(function(c,m,v,E,x,P,I){let R;if(x.isKeyField()){if(P==="array-contains"||P==="array-contains-any")throw new Pe(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${P}' queries on documentId().`);if(P==="in"||P==="not-in"){yy(I,P);const Q=[];for(const ne of I)Q.push(_y(E,c,ne));R={arrayValue:{values:Q}}}else R=_y(E,c,I)}else P!=="in"&&P!=="not-in"&&P!=="array-contains-any"||yy(I,P),R=LA(v,m,I,P==="in"||P==="not-in");return en.create(x,P,R)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class qm extends Wm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qm(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Ri.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,c){let m=a;const v=c.getFlattenedFilters();for(const E of v)X0(m,E),m=Hf(m,E)})(e._query,t),new Fa(e.firestore,e.converter,Hf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $m extends Y0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $m(e,t)}_apply(e){const t=(function(a,c,m){if(a.startAt!==null)throw new Pe(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Pe(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ou(c,m)})(e._query,this._field,this._direction);return new Fa(e.firestore,e.converter,ib(e._query,t))}}function BA(i,e="asc"){const t=e,s=Qh("orderBy",i);return $m._create(s,t)}function _y(i,e,t){if(typeof(t=Fr(t))=="string"){if(t==="")throw new Pe(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gv(e)&&t.indexOf("/")!==-1)throw new Pe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(At.fromString(t));if(!Me.isDocumentKey(s))throw new Pe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return k_(i,new Me(s))}if(t instanceof nn)return k_(i,t._key);throw new Pe(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vh(t)}.`)}function yy(i,e){if(!Array.isArray(i)||i.length===0)throw new Pe(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function X0(i,e){const t=(function(a,c){for(const m of a)for(const v of m.getFlattenedFilters())if(c.indexOf(v.op)>=0)return v.op;return null})(i.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Pe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Pe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function UA(i,e,t){let s;return s=i?i.toFirestore(e):e,s}class Tu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ca extends Q0{constructor(e,t,s,a,c,m){super(e,t,s,a,m),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Qh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Pe(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ca._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ca._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ca._jsonSchema={type:tn("string",Ca._jsonSchemaVersion),bundleSource:tn("string","DocumentSnapshot"),bundleName:tn("string"),bundle:tn("string")};class uh extends Ca{data(e={}){return super.data(e)}}class bl{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Tu(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new uh(this._firestore,this._userDataWriter,s.key,s,new Tu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let m=0;return a._snapshot.docChanges.map((v=>{const E=new uh(a._firestore,a._userDataWriter,v.doc.key,v.doc,new Tu(a._snapshot.mutatedKeys.has(v.doc.key),a._snapshot.fromCache),a.query.converter);return v.doc,{type:"added",doc:E,oldIndex:-1,newIndex:m++}}))}{let m=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((v=>c||v.type!==3)).map((v=>{const E=new uh(a._firestore,a._userDataWriter,v.doc.key,v.doc,new Tu(a._snapshot.mutatedKeys.has(v.doc.key),a._snapshot.fromCache),a.query.converter);let x=-1,P=-1;return v.type!==0&&(x=m.indexOf(v.doc.key),m=m.delete(v.doc.key)),v.type!==1&&(m=m.add(v.doc),P=m.indexOf(v.doc.key)),{type:WA(v.type),doc:E,oldIndex:x,newIndex:P}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Pe(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=bl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_m.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function WA(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return He(61501,{type:i})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bl._jsonSchemaVersion="firestore/querySnapshot/1.0",bl._jsonSchema={type:tn("string",bl._jsonSchemaVersion),bundleSource:tn("string","QuerySnapshot"),bundleName:tn("string"),bundle:tn("string")};function HA(i,e,t){i=Il(i,nn);const s=Il(i.firestore,Ah),a=UA(i.converter,e),c=q0(s);return $A(s,[NA(c,"setDoc",i._key,a,i.converter!==null,t).toMutation(i._key,Bs.none())])}function qA(i,...e){var x,P,I;i=Fr(i);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||gy(e[s])||(t=e[s++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(gy(e[s])){const R=e[s];e[s]=(x=R.next)==null?void 0:x.bind(R),e[s+1]=(P=R.error)==null?void 0:P.bind(R),e[s+2]=(I=R.complete)==null?void 0:I.bind(R)}let c,m,v;if(i instanceof nn)m=Il(i.firestore,Ah),v=xm(i._key.path),c={next:R=>{e[s]&&e[s](GA(m,i,R))},error:e[s+1],complete:e[s+2]};else{const R=Il(i,Fa);m=Il(R.firestore,Ah),v=R._query;const q=new K0(m);c={next:Q=>{e[s]&&e[s](new bl(m,q,R,Q))},error:e[s+1],complete:e[s+2]},FA(i._query)}const E=B0(m);return wA(E,v,a,c)}function $A(i,e){const t=B0(i);return EA(t,e)}function GA(i,e,t){const s=t.docs.get(e._key),a=new K0(i);return new Ca(i,a,e._key,s,new Tu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){yP(Ol),Cl(new Ra("firestore",((s,{instanceIdentifier:a,options:c})=>{const m=s.getProvider("app").getImmediate(),v=new Ah(new EP(s.getProvider("auth-internal")),new IP(m,s.getProvider("app-check-internal")),BP(m,a),m);return c={useFetchStreams:t,...c},v._setSettings(c),v}),"PUBLIC").setMultipleInstances(!0)),Fo(my,py,e),Fo(my,py,"esm2020")})();const ZA={apiKey:"AIzaSyB1YwI0pF8O8y05mfDUuBwxlPuHEFdmQ5g",authDomain:"ameliorons-ff5dc.firebaseapp.com",projectId:"ameliorons-ff5dc",storageBucket:"ameliorons-ff5dc.firebasestorage.app",messagingSenderId:"466230393587",appId:"1:466230393587:web:cf016d45bf7c734fd71586"},J0=Fy(ZA),ew=bA(J0),Pf=mP(J0);function KA(i){const e=jA(SA(ew,"reports"),BA("date","desc"));return qA(e,t=>{const s=t.docs.map(a=>{var m;const c=a.data();return{id:a.id,...c,date:(m=c.date)!=null&&m.toDate?c.date.toDate().toISOString():c.date}});i(s)})}async function QA(i){const e={id:i.id,mode:i.mode,category:i.category,description:i.description,photo:i.photo??"",location:{lat:i.location.lat,lng:i.location.lng,...i.location.address?{address:i.location.address}:{}},date:kt.fromDate(new Date(i.date)),status:i.status,reportedBy:i.reportedBy,validations:i.validations??0,validatedBy:i.validatedBy??[]};i.type&&(e.type=i.type),await HA(PA(ew,"reports",i.id),e)}function YA(){const[i,e]=tt.useState([]),[t,s]=tt.useState("citizen"),[a,c]=tt.useState(!1),[m,v]=tt.useState(!1),[E,x]=tt.useState(null),[P,I]=tt.useState(null),[R,q]=tt.useState(!1),[Q,ne]=tt.useState(!1),[te,ke]=tt.useState(347),[me,we]=tt.useState(null),[xe,De]=tt.useState(null),[Oe,F]=tt.useState(!0);tt.useEffect(()=>{Pf.currentUser||XI(Pf).catch(console.error)},[]),tt.useEffect(()=>{const ge=KA(e);return()=>ge()},[]);const k=()=>{if(F(!0),De(null),!navigator.geolocation){De("La golocalisation nest pas supporte par ce navigateur."),F(!1);return}navigator.geolocation.getCurrentPosition(ge=>{we({lat:ge.coords.latitude,lng:ge.coords.longitude}),De(null),F(!1)},ge=>{let X="Impossible de rcuprer votre localisation.";ge.code===ge.PERMISSION_DENIED?X="Vous avez refus laccs  la localisation.":ge.code===ge.POSITION_UNAVAILABLE?X="Position indisponible (GPS/Wi-Fi).":ge.code===ge.TIMEOUT&&(X="La localisation a expir (timeout)."),De(X),F(!1)},{enableHighAccuracy:!0,timeout:12e3,maximumAge:0})};tt.useEffect(()=>{k()},[]);const D={name:"Sophie Martin",photo:"https://images.unsplash.com/photo-1532272478764-53cd1fe53f72?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxwcm9mZXNzaW9uYWwlMjBmcmVuY2glMjBwZXJzb24lMjBwb3J0cmFpdHxlbnwxfHx8fDE3NzAxMDYzNjR8MA&ixlib=rb-4.1.0&q=80&w=1080",points:te,level:Math.floor(te/50),badge:" Contributeur expert"},B=tt.useCallback((ge,X)=>{m&&(x({lat:ge,lng:X}),v(!1),Xi.success("Localisation slectionne sur la carte"))},[m]),V=async ge=>{var X;try{const _e=((X=Pf.currentUser)==null?void 0:X.uid)??"anonymous",re={id:crypto.randomUUID(),mode:ge.mode,type:ge.type,category:ge.category,description:ge.description,photo:ge.photo??"",location:{lat:Number(ge.location.lat),lng:Number(ge.location.lng)},date:new Date().toISOString(),status:"nouveau",reportedBy:_e,validations:0,validatedBy:[]};await QA(re),c(!1),x(null);const O=ge.mode==="probleme"?20:10;ke(Y=>Y+O),ge.mode==="probleme"?Xi.success(`Problme signal avec succs ! +${O} points`):Xi.success(`Signalement envoy ! +${O} points`)}catch(_e){console.error("Erreur createReport:",_e),Xi.error("Impossible d'enregistrer le signalement (voir console).")}},U=ge=>{var re;const X=i.find(O=>O.id===ge);if(!X||X.mode!=="mobilier")return;if((re=X.validatedBy)!=null&&re.includes("current-user")){Xi.error("Vous avez dj valid ce mobilier");return}e(O=>O.map(Y=>Y.id===ge?{...Y,validations:(Y.validations||0)+1,validatedBy:[...Y.validatedBy||[],"current-user"]}:Y));const _e=5;ke(O=>O+_e),Xi.success(`Mobilier valid ! +${_e} points`),(P==null?void 0:P.id)===ge&&I({...P,validations:(P.validations||0)+1,validatedBy:[...P.validatedBy||[],"current-user"]})},N=(ge,X)=>{e(re=>re.map(O=>O.id===ge?{...O,status:X}:O)),(P==null?void 0:P.id)===ge&&I({...P,status:X});const _e={nouveau:"Nouveau",en_cours:"En cours",resolu:"Rsolu"};Xi.success(`Statut chang en "${_e[X]}"`)},Ge=ge=>{I(ge)},at=()=>{v(!0),Xi.info("Cliquez sur la carte pour slectionner une localisation")},Ce=()=>{const ge=t==="citizen"?"agent":"citizen";s(ge),c(!1),v(!1),x(null),ge==="agent"?(q(!0),Xi.info("Mode Agent municipal activ")):(q(!1),Xi.info("Mode Citoyen activ"))};return A.jsxs("div",{className:"h-screen w-screen flex flex-col bg-gray-50 overflow-hidden",children:[A.jsx(L1,{position:"top-center",richColors:!0}),A.jsxs("div",{className:"bg-[#ffb8b8] py-4 px-4 flex-shrink-0 z-30 relative flex items-center justify-between",children:[A.jsx("div",{className:"w-10"}),A.jsxs("h1",{className:"text-center text-3xl font-bold tracking-tight",style:{fontFamily:"'Poppins', sans-serif"},children:[A.jsx("span",{className:"text-white",children:"a"}),A.jsx("span",{className:"text-red-600",children:"MEL"}),A.jsx("span",{className:"text-white",children:"iorons"})]}),A.jsxs("button",{onClick:()=>ne(!0),className:"relative group",children:[A.jsx("img",{src:D.photo,alt:D.name,className:"w-10 h-10 rounded-full border-2 border-white shadow-lg object-cover transition-transform group-hover:scale-110"}),A.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-full flex items-center justify-center border-2 border-white shadow-md",children:A.jsx("span",{className:"text-white font-bold text-xs",children:D.level})})]})]}),A.jsx("div",{className:"bg-white shadow-sm z-20 flex-shrink-0 px-4 py-3",children:A.jsxs("div",{className:"flex items-center justify-between gap-3",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(im,{size:20,className:t==="agent"?"text-blue-600":"text-gray-600"}),A.jsx("span",{className:"font-semibold text-sm",children:t==="agent"?"Mode Agent":"Mode Citoyen"})]}),A.jsxs("button",{onClick:Ce,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all shadow-md ${t==="agent"?"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700":"bg-gradient-to-r from-blue-500 to-cyan-600 text-white hover:from-blue-600 hover:to-cyan-700"}`,children:[A.jsx(Jw,{size:18}),A.jsx("span",{className:"text-sm",children:t==="agent"?"Passer en Citoyen":"Passer en Agent"})]})]})}),A.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden relative",children:[A.jsxs("div",{className:"h-[60vh] relative",children:[Oe?A.jsx("div",{className:"h-full flex items-center justify-center bg-white",children:A.jsx("div",{className:"text-sm text-gray-600",children:"Rcupration de votre localisation"})}):xe||!me?A.jsxs("div",{className:"h-full flex items-center justify-center bg-white px-6 text-center",children:[A.jsxs("div",{children:[A.jsx("div",{className:"text-base font-semibold text-gray-900 mb-2",children:"Localisation requise"}),A.jsx("div",{className:"text-sm text-gray-600 mb-4",children:xe??"Localisation non disponible."}),A.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700",children:"Ressayer"}),A.jsx("div",{className:"text-xs text-gray-500 mt-3",children:"Astuce : sur iPhone, vrifie Safari  Rglages  Localisation."})]}),A.jsx("div",{className:"absolute bottom-2 left-2 z-30 bg-white/90 text-xs px-2 py-1 rounded",children:Oe?"geo: loading":xe?`geo: error (${xe})`:`geo: ok (${me==null?void 0:me.lat.toFixed(5)}, ${me==null?void 0:me.lng.toFixed(5)})`})]}):A.jsx(Gw,{reports:i,onReportClick:Ge,onMapClick:B,selectedLocation:E,userLocation:me,zoom:19}),!R&&!Oe&&!xe&&me&&A.jsxs("div",{className:"absolute top-4 left-4 bg-white rounded-lg shadow-lg p-3 z-10",children:[A.jsx("div",{className:"text-xs font-semibold mb-2 text-gray-700",children:"Lgende"}),A.jsxs("div",{className:"space-y-1.5",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-red-500 to-red-600 shadow-lg border-2 border-white ring-2 ring-red-300"}),A.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Nouveau"})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-orange-500 to-orange-600 shadow-lg border-2 border-white ring-2 ring-orange-300"}),A.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"En cours"})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-green-500 to-green-600 shadow-lg border-2 border-white ring-2 ring-green-300"}),A.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Rsolu"})]})]})]}),m&&!Oe&&!xe&&me&&A.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-20 pointer-events-none",children:A.jsxs("div",{className:"bg-purple-600 text-white px-6 py-3 rounded-full shadow-lg animate-pulse flex items-center gap-2",children:[A.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-ping"}),A.jsx("span",{className:"font-medium",children:"Cliquez sur la carte"})]})})]}),t==="citizen"&&A.jsxs("div",{className:"bg-white min-h-[40vh] pb-6",children:[A.jsxs("div",{className:"px-4 pt-6 pb-4",children:[A.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Crer un signalement"}),A.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Aidez-nous  amliorer la mtropole lilloise"})]}),A.jsx(TE,{onSubmit:V,onCancel:()=>{x(null),v(!1)},initialLocation:E,onLocationSelect:at})]}),R&&t==="agent"&&A.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[70vh] z-20",children:A.jsx(r1,{reports:i,onReportClick:Ge,onStatusChange:N,onValidate:U})}),P&&A.jsx(n1,{report:P,onClose:()=>I(null),onStatusChange:t==="agent"?N:void 0,onValidate:P.mode==="mobilier"&&t==="citizen"?U:void 0,isAdmin:t==="agent"}),A.jsx(i1,{isOpen:Q,onClose:()=>ne(!1),userName:D.name,userPhoto:D.photo,points:D.points,level:D.level,badge:D.badge})]})]})}Ww.createRoot(document.getElementById("root")).render(A.jsx(YA,{}));
