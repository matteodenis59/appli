(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();function rm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var uf={exports:{}},mu={},cf={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg;function Vw(){if(Pg)return tt;Pg=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),m=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),I=Symbol.iterator;function M(z){return z===null||typeof z!="object"?null:(z=I&&z[I]||z["@@iterator"],typeof z=="function"?z:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,te={};function ee(z,J,fe){this.props=z,this.context=J,this.refs=te,this.updater=fe||$}ee.prototype.isReactComponent={},ee.prototype.setState=function(z,J){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,J,"setState")},ee.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function Ae(){}Ae.prototype=ee.prototype;function pe(z,J,fe){this.props=z,this.context=J,this.refs=te,this.updater=fe||$}var ve=pe.prototype=new Ae;ve.constructor=pe,Q(ve,ee.prototype),ve.isPureReactComponent=!0;var ge=Array.isArray,Me=Object.prototype.hasOwnProperty,je={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function A(z,J,fe){var _e,Ee={},ce=null,Ge=null;if(J!=null)for(_e in J.ref!==void 0&&(Ge=J.ref),J.key!==void 0&&(ce=""+J.key),J)Me.call(J,_e)&&!F.hasOwnProperty(_e)&&(Ee[_e]=J[_e]);var Ue=arguments.length-2;if(Ue===1)Ee.children=fe;else if(1<Ue){for(var nt=Array(Ue),Rt=0;Rt<Ue;Rt++)nt[Rt]=arguments[Rt+2];Ee.children=nt}if(z&&z.defaultProps)for(_e in Ue=z.defaultProps,Ue)Ee[_e]===void 0&&(Ee[_e]=Ue[_e]);return{$$typeof:i,type:z,key:ce,ref:Ge,props:Ee,_owner:je.current}}function O(z,J){return{$$typeof:i,type:z.type,key:J,ref:z.ref,props:z.props,_owner:z._owner}}function U(z){return typeof z=="object"&&z!==null&&z.$$typeof===i}function D(z){var J={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(fe){return J[fe]})}var j=/\/+/g;function k(z,J){return typeof z=="object"&&z!==null&&z.key!=null?D(""+z.key):J.toString(36)}function $e(z,J,fe,_e,Ee){var ce=typeof z;(ce==="undefined"||ce==="boolean")&&(z=null);var Ge=!1;if(z===null)Ge=!0;else switch(ce){case"string":case"number":Ge=!0;break;case"object":switch(z.$$typeof){case i:case e:Ge=!0}}if(Ge)return Ge=z,Ee=Ee(Ge),z=_e===""?"."+k(Ge,0):_e,ge(Ee)?(fe="",z!=null&&(fe=z.replace(j,"$&/")+"/"),$e(Ee,J,fe,"",function(Rt){return Rt})):Ee!=null&&(U(Ee)&&(Ee=O(Ee,fe+(!Ee.key||Ge&&Ge.key===Ee.key?"":(""+Ee.key).replace(j,"$&/")+"/")+z)),J.push(Ee)),1;if(Ge=0,_e=_e===""?".":_e+":",ge(z))for(var Ue=0;Ue<z.length;Ue++){ce=z[Ue];var nt=_e+k(ce,Ue);Ge+=$e(ce,J,fe,nt,Ee)}else if(nt=M(z),typeof nt=="function")for(z=nt.call(z),Ue=0;!(ce=z.next()).done;)ce=ce.value,nt=_e+k(ce,Ue++),Ge+=$e(ce,J,fe,nt,Ee);else if(ce==="object")throw J=String(z),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return Ge}function at(z,J,fe){if(z==null)return z;var _e=[],Ee=0;return $e(z,_e,"","",function(ce){return J.call(fe,ce,Ee++)}),_e}function be(z){if(z._status===-1){var J=z._result;J=J(),J.then(function(fe){(z._status===0||z._status===-1)&&(z._status=1,z._result=fe)},function(fe){(z._status===0||z._status===-1)&&(z._status=2,z._result=fe)}),z._status===-1&&(z._status=0,z._result=J)}if(z._status===1)return z._result.default;throw z._result}var Ye={current:null},ne={transition:null},Ie={ReactCurrentDispatcher:Ye,ReactCurrentBatchConfig:ne,ReactCurrentOwner:je};function re(){throw Error("act(...) is not supported in production builds of React.")}return tt.Children={map:at,forEach:function(z,J,fe){at(z,function(){J.apply(this,arguments)},fe)},count:function(z){var J=0;return at(z,function(){J++}),J},toArray:function(z){return at(z,function(J){return J})||[]},only:function(z){if(!U(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},tt.Component=ee,tt.Fragment=t,tt.Profiler=a,tt.PureComponent=pe,tt.StrictMode=s,tt.Suspense=E,tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ie,tt.act=re,tt.cloneElement=function(z,J,fe){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var _e=Q({},z.props),Ee=z.key,ce=z.ref,Ge=z._owner;if(J!=null){if(J.ref!==void 0&&(ce=J.ref,Ge=je.current),J.key!==void 0&&(Ee=""+J.key),z.type&&z.type.defaultProps)var Ue=z.type.defaultProps;for(nt in J)Me.call(J,nt)&&!F.hasOwnProperty(nt)&&(_e[nt]=J[nt]===void 0&&Ue!==void 0?Ue[nt]:J[nt])}var nt=arguments.length-2;if(nt===1)_e.children=fe;else if(1<nt){Ue=Array(nt);for(var Rt=0;Rt<nt;Rt++)Ue[Rt]=arguments[Rt+2];_e.children=Ue}return{$$typeof:i,type:z.type,key:Ee,ref:ce,props:_e,_owner:Ge}},tt.createContext=function(z){return z={$$typeof:m,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:c,_context:z},z.Consumer=z},tt.createElement=A,tt.createFactory=function(z){var J=A.bind(null,z);return J.type=z,J},tt.createRef=function(){return{current:null}},tt.forwardRef=function(z){return{$$typeof:v,render:z}},tt.isValidElement=U,tt.lazy=function(z){return{$$typeof:b,_payload:{_status:-1,_result:z},_init:be}},tt.memo=function(z,J){return{$$typeof:x,type:z,compare:J===void 0?null:J}},tt.startTransition=function(z){var J=ne.transition;ne.transition={};try{z()}finally{ne.transition=J}},tt.unstable_act=re,tt.useCallback=function(z,J){return Ye.current.useCallback(z,J)},tt.useContext=function(z){return Ye.current.useContext(z)},tt.useDebugValue=function(){},tt.useDeferredValue=function(z){return Ye.current.useDeferredValue(z)},tt.useEffect=function(z,J){return Ye.current.useEffect(z,J)},tt.useId=function(){return Ye.current.useId()},tt.useImperativeHandle=function(z,J,fe){return Ye.current.useImperativeHandle(z,J,fe)},tt.useInsertionEffect=function(z,J){return Ye.current.useInsertionEffect(z,J)},tt.useLayoutEffect=function(z,J){return Ye.current.useLayoutEffect(z,J)},tt.useMemo=function(z,J){return Ye.current.useMemo(z,J)},tt.useReducer=function(z,J,fe){return Ye.current.useReducer(z,J,fe)},tt.useRef=function(z){return Ye.current.useRef(z)},tt.useState=function(z){return Ye.current.useState(z)},tt.useSyncExternalStore=function(z,J,fe){return Ye.current.useSyncExternalStore(z,J,fe)},tt.useTransition=function(){return Ye.current.useTransition()},tt.version="18.3.1",tt}var bg;function im(){return bg||(bg=1,cf.exports=Vw()),cf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cg;function zw(){if(Cg)return mu;Cg=1;var i=im(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function m(v,E,x){var b,I={},M=null,$=null;x!==void 0&&(M=""+x),E.key!==void 0&&(M=""+E.key),E.ref!==void 0&&($=E.ref);for(b in E)s.call(E,b)&&!c.hasOwnProperty(b)&&(I[b]=E[b]);if(v&&v.defaultProps)for(b in E=v.defaultProps,E)I[b]===void 0&&(I[b]=E[b]);return{$$typeof:e,type:v,key:M,ref:$,props:I,_owner:a.current}}return mu.Fragment=t,mu.jsx=m,mu.jsxs=m,mu}var Ag;function Fw(){return Ag||(Ag=1,uf.exports=zw()),uf.exports}var N=Fw(),qc={},hf={exports:{}},Ir={},df={exports:{}},ff={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kg;function jw(){return kg||(kg=1,(function(i){function e(ne,Ie){var re=ne.length;ne.push(Ie);e:for(;0<re;){var z=re-1>>>1,J=ne[z];if(0<a(J,Ie))ne[z]=Ie,ne[re]=J,re=z;else break e}}function t(ne){return ne.length===0?null:ne[0]}function s(ne){if(ne.length===0)return null;var Ie=ne[0],re=ne.pop();if(re!==Ie){ne[0]=re;e:for(var z=0,J=ne.length,fe=J>>>1;z<fe;){var _e=2*(z+1)-1,Ee=ne[_e],ce=_e+1,Ge=ne[ce];if(0>a(Ee,re))ce<J&&0>a(Ge,Ee)?(ne[z]=Ge,ne[ce]=re,z=ce):(ne[z]=Ee,ne[_e]=re,z=_e);else if(ce<J&&0>a(Ge,re))ne[z]=Ge,ne[ce]=re,z=ce;else break e}}return Ie}function a(ne,Ie){var re=ne.sortIndex-Ie.sortIndex;return re!==0?re:ne.id-Ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var m=Date,v=m.now();i.unstable_now=function(){return m.now()-v}}var E=[],x=[],b=1,I=null,M=3,$=!1,Q=!1,te=!1,ee=typeof setTimeout=="function"?setTimeout:null,Ae=typeof clearTimeout=="function"?clearTimeout:null,pe=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ve(ne){for(var Ie=t(x);Ie!==null;){if(Ie.callback===null)s(x);else if(Ie.startTime<=ne)s(x),Ie.sortIndex=Ie.expirationTime,e(E,Ie);else break;Ie=t(x)}}function ge(ne){if(te=!1,ve(ne),!Q)if(t(E)!==null)Q=!0,be(Me);else{var Ie=t(x);Ie!==null&&Ye(ge,Ie.startTime-ne)}}function Me(ne,Ie){Q=!1,te&&(te=!1,Ae(A),A=-1),$=!0;var re=M;try{for(ve(Ie),I=t(E);I!==null&&(!(I.expirationTime>Ie)||ne&&!D());){var z=I.callback;if(typeof z=="function"){I.callback=null,M=I.priorityLevel;var J=z(I.expirationTime<=Ie);Ie=i.unstable_now(),typeof J=="function"?I.callback=J:I===t(E)&&s(E),ve(Ie)}else s(E);I=t(E)}if(I!==null)var fe=!0;else{var _e=t(x);_e!==null&&Ye(ge,_e.startTime-Ie),fe=!1}return fe}finally{I=null,M=re,$=!1}}var je=!1,F=null,A=-1,O=5,U=-1;function D(){return!(i.unstable_now()-U<O)}function j(){if(F!==null){var ne=i.unstable_now();U=ne;var Ie=!0;try{Ie=F(!0,ne)}finally{Ie?k():(je=!1,F=null)}}else je=!1}var k;if(typeof pe=="function")k=function(){pe(j)};else if(typeof MessageChannel<"u"){var $e=new MessageChannel,at=$e.port2;$e.port1.onmessage=j,k=function(){at.postMessage(null)}}else k=function(){ee(j,0)};function be(ne){F=ne,je||(je=!0,k())}function Ye(ne,Ie){A=ee(function(){ne(i.unstable_now())},Ie)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ne){ne.callback=null},i.unstable_continueExecution=function(){Q||$||(Q=!0,be(Me))},i.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<ne?Math.floor(1e3/ne):5},i.unstable_getCurrentPriorityLevel=function(){return M},i.unstable_getFirstCallbackNode=function(){return t(E)},i.unstable_next=function(ne){switch(M){case 1:case 2:case 3:var Ie=3;break;default:Ie=M}var re=M;M=Ie;try{return ne()}finally{M=re}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(ne,Ie){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var re=M;M=ne;try{return Ie()}finally{M=re}},i.unstable_scheduleCallback=function(ne,Ie,re){var z=i.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?z+re:z):re=z,ne){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=re+J,ne={id:b++,callback:Ie,priorityLevel:ne,startTime:re,expirationTime:J,sortIndex:-1},re>z?(ne.sortIndex=re,e(x,ne),t(E)===null&&ne===t(x)&&(te?(Ae(A),A=-1):te=!0,Ye(ge,re-z))):(ne.sortIndex=J,e(E,ne),Q||$||(Q=!0,be(Me))),ne},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(ne){var Ie=M;return function(){var re=M;M=Ie;try{return ne.apply(this,arguments)}finally{M=re}}}})(ff)),ff}var Rg;function Bw(){return Rg||(Rg=1,df.exports=jw()),df.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ng;function Uw(){if(Ng)return Ir;Ng=1;var i=im(),e=Bw();function t(n){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+n,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(n,o){m(n,o),m(n+"Capture",o)}function m(n,o){for(a[n]=o,n=0;n<o.length;n++)s.add(o[n])}var v=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),E=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,b={},I={};function M(n){return E.call(I,n)?!0:E.call(b,n)?!1:x.test(n)?I[n]=!0:(b[n]=!0,!1)}function $(n,o,u,f){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Q(n,o,u,f){if(o===null||typeof o>"u"||$(n,o,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function te(n,o,u,f,g,_,S){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=n,this.type=o,this.sanitizeURL=_,this.removeEmptyString=S}var ee={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ee[n]=new te(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var o=n[0];ee[o]=new te(o,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){ee[n]=new te(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ee[n]=new te(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ee[n]=new te(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){ee[n]=new te(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){ee[n]=new te(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){ee[n]=new te(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){ee[n]=new te(n,5,!1,n.toLowerCase(),null,!1,!1)});var Ae=/[\-:]([a-z])/g;function pe(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var o=n.replace(Ae,pe);ee[o]=new te(o,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var o=n.replace(Ae,pe);ee[o]=new te(o,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var o=n.replace(Ae,pe);ee[o]=new te(o,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){ee[n]=new te(n,1,!1,n.toLowerCase(),null,!1,!1)}),ee.xlinkHref=new te("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){ee[n]=new te(n,1,!1,n.toLowerCase(),null,!0,!0)});function ve(n,o,u,f){var g=ee.hasOwnProperty(o)?ee[o]:null;(g!==null?g.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(Q(o,u,g,f)&&(u=null),f||g===null?M(o)&&(u===null?n.removeAttribute(o):n.setAttribute(o,""+u)):g.mustUseProperty?n[g.propertyName]=u===null?g.type===3?!1:"":u:(o=g.attributeName,f=g.attributeNamespace,u===null?n.removeAttribute(o):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?n.setAttributeNS(f,o,u):n.setAttribute(o,u))))}var ge=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Me=Symbol.for("react.element"),je=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),D=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),$e=Symbol.for("react.suspense_list"),at=Symbol.for("react.memo"),be=Symbol.for("react.lazy"),Ye=Symbol.for("react.offscreen"),ne=Symbol.iterator;function Ie(n){return n===null||typeof n!="object"?null:(n=ne&&n[ne]||n["@@iterator"],typeof n=="function"?n:null)}var re=Object.assign,z;function J(n){if(z===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);z=o&&o[1]||""}return`
`+z+n}var fe=!1;function _e(n,o){if(!n||fe)return"";fe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(X){var f=X}Reflect.construct(n,[],o)}else{try{o.call()}catch(X){f=X}n.call(o.prototype)}else{try{throw Error()}catch(X){f=X}n()}}catch(X){if(X&&f&&typeof X.stack=="string"){for(var g=X.stack.split(`
`),_=f.stack.split(`
`),S=g.length-1,R=_.length-1;1<=S&&0<=R&&g[S]!==_[R];)R--;for(;1<=S&&0<=R;S--,R--)if(g[S]!==_[R]){if(S!==1||R!==1)do if(S--,R--,0>R||g[S]!==_[R]){var B=`
`+g[S].replace(" at new "," at ");return n.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",n.displayName)),B}while(1<=S&&0<=R);break}}}finally{fe=!1,Error.prepareStackTrace=u}return(n=n?n.displayName||n.name:"")?J(n):""}function Ee(n){switch(n.tag){case 5:return J(n.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return n=_e(n.type,!1),n;case 11:return n=_e(n.type.render,!1),n;case 1:return n=_e(n.type,!0),n;default:return""}}function ce(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case F:return"Fragment";case je:return"Portal";case O:return"Profiler";case A:return"StrictMode";case k:return"Suspense";case $e:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case D:return(n.displayName||"Context")+".Consumer";case U:return(n._context.displayName||"Context")+".Provider";case j:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case at:return o=n.displayName||null,o!==null?o:ce(n.type)||"Memo";case be:o=n._payload,n=n._init;try{return ce(n(o))}catch{}}return null}function Ge(n){var o=n.type;switch(n.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=o.render,n=n.displayName||n.name||"",o.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(o);case 8:return o===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ue(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function nt(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Rt(n){var o=nt(n)?"checked":"value",u=Object.getOwnPropertyDescriptor(n.constructor.prototype,o),f=""+n[o];if(!n.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,_=u.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return g.call(this)},set:function(S){f=""+S,_.call(this,S)}}),Object.defineProperty(n,o,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function jr(n){n._valueTracker||(n._valueTracker=Rt(n))}function ir(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return n&&(f=nt(n)?n.checked?"true":"false":n.value),n=f,n!==u?(o.setValue(n),!0):!1}function sr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Br(n,o){var u=o.checked;return re({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??n._wrapperState.initialChecked})}function ls(n,o){var u=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;u=Ue(o.value!=null?o.value:u),n._wrapperState={initialChecked:f,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Ur(n,o){o=o.checked,o!=null&&ve(n,"checked",o,!1)}function _n(n,o){Ur(n,o);var u=Ue(o.value),f=o.type;if(u!=null)f==="number"?(u===0&&n.value===""||n.value!=u)&&(n.value=""+u):n.value!==""+u&&(n.value=""+u);else if(f==="submit"||f==="reset"){n.removeAttribute("value");return}o.hasOwnProperty("value")?ft(n,o.type,u):o.hasOwnProperty("defaultValue")&&ft(n,o.type,Ue(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(n.defaultChecked=!!o.defaultChecked)}function br(n,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+n._wrapperState.initialValue,u||o===n.value||(n.value=o),n.defaultValue=o}u=n.name,u!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,u!==""&&(n.name=u)}function ft(n,o,u){(o!=="number"||sr(n.ownerDocument)!==n)&&(u==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+u&&(n.defaultValue=""+u))}var St=Array.isArray;function yn(n,o,u,f){if(n=n.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<n.length;u++)g=o.hasOwnProperty("$"+n[u].value),n[u].selected!==g&&(n[u].selected=g),g&&f&&(n[u].defaultSelected=!0)}else{for(u=""+Ue(u),o=null,g=0;g<n.length;g++){if(n[g].value===u){n[g].selected=!0,f&&(n[g].defaultSelected=!0);return}o!==null||n[g].disabled||(o=n[g])}o!==null&&(o.selected=!0)}}function Ut(n,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return re({},o,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function qn(n,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(St(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}n._wrapperState={initialValue:Ue(u)}}function $s(n,o){var u=Ue(o.value),f=Ue(o.defaultValue);u!=null&&(u=""+u,u!==n.value&&(n.value=u),o.defaultValue==null&&n.defaultValue!==u&&(n.defaultValue=u)),f!=null&&(n.defaultValue=""+f)}function Wr(n){var o=n.textContent;o===n._wrapperState.initialValue&&o!==""&&o!==null&&(n.value=o)}function or(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pi(n,o){return n==null||n==="http://www.w3.org/1999/xhtml"?or(o):n==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ar,Li=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,f,g){MSApp.execUnsafeLocalFunction(function(){return n(o,u,f,g)})}:n})(function(n,o){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=o;else{for(ar=ar||document.createElement("div"),ar.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=ar.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;o.firstChild;)n.appendChild(o.firstChild)}});function vn(n,o){if(o){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=o;return}}n.textContent=o}var lr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cr=["Webkit","ms","Moz","O"];Object.keys(lr).forEach(function(n){Cr.forEach(function(o){o=o+n.charAt(0).toUpperCase()+n.substring(1),lr[o]=lr[n]})});function Ar(n,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||lr.hasOwnProperty(n)&&lr[n]?(""+o).trim():o+"px"}function Hr(n,o){n=n.style;for(var u in o)if(o.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=Ar(u,o[u],f);u==="float"&&(u="cssFloat"),f?n.setProperty(u,g):n[u]=g}}var gi=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kn(n,o){if(o){if(gi[n]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function ur(n,o){if(n.indexOf("-")===-1)return typeof o.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cr=null;function wn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var hr=null,dr=null,Tt=null;function Mi(n){if(n=Cs(n)){if(typeof hr!="function")throw Error(t(280));var o=n.stateNode;o&&(o=Ya(o),hr(n.stateNode,n.type,o))}}function Fe(n){dr?Tt?Tt.push(n):Tt=[n]:dr=n}function wt(){if(dr){var n=dr,o=Tt;if(Tt=dr=null,Mi(n),o)for(n=0;n<o.length;n++)Mi(o[n])}}function Ot(n,o){return n(o)}function Kt(){}var En=!1;function Pt(n,o,u){if(En)return n(o,u);En=!0;try{return Ot(n,o,u)}finally{En=!1,(dr!==null||Tt!==null)&&(Kt(),wt())}}function Wt(n,o){var u=n.stateNode;if(u===null)return null;var f=Ya(u);if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(n=n.type,f=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!f;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var $n=!1;if(v)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){$n=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch{$n=!1}function cn(n,o,u,f,g,_,S,R,B){var X=Array.prototype.slice.call(arguments,3);try{o.apply(u,X)}catch(le){this.onError(le)}}var Vt=!1,ye=null,Di=!1,Gn=null,Zo={onError:function(n){Vt=!0,ye=n}};function Ko(n,o,u,f,g,_,S,R,B){Vt=!1,ye=null,cn.apply(Zo,arguments)}function us(n,o,u,f,g,_,S,R,B){if(Ko.apply(this,arguments),Vt){if(Vt){var X=ye;Vt=!1,ye=null}else throw Error(t(198));Di||(Di=!0,Gn=X)}}function fr(n){var o=n,u=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,(o.flags&4098)!==0&&(u=o.return),n=o.return;while(n)}return o.tag===3?u:null}function qr(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function Qo(n){if(fr(n)!==n)throw Error(t(188))}function za(n){var o=n.alternate;if(!o){if(o=fr(n),o===null)throw Error(t(188));return o!==n?null:n}for(var u=n,f=o;;){var g=u.return;if(g===null)break;var _=g.alternate;if(_===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===u)return Qo(g),n;if(_===f)return Qo(g),o;_=_.sibling}throw Error(t(188))}if(u.return!==f.return)u=g,f=_;else{for(var S=!1,R=g.child;R;){if(R===u){S=!0,u=g,f=_;break}if(R===f){S=!0,f=g,u=_;break}R=R.sibling}if(!S){for(R=_.child;R;){if(R===u){S=!0,u=_,f=g;break}if(R===f){S=!0,f=_,u=g;break}R=R.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?n:o}function Fa(n){return n=za(n),n!==null?cs(n):null}function cs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var o=cs(n);if(o!==null)return o;n=n.sibling}return null}var Yo=e.unstable_scheduleCallback,hs=e.unstable_cancelCallback,ds=e.unstable_shouldYield,mr=e.unstable_requestPaint,It=e.unstable_now,Bl=e.unstable_getCurrentPriorityLevel,Gs=e.unstable_ImmediatePriority,Xo=e.unstable_UserBlockingPriority,fs=e.unstable_NormalPriority,ms=e.unstable_LowPriority,$r=e.unstable_IdlePriority,Oi=null,Rn=null;function Vi(n){if(Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(Oi,n,void 0,(n.current.flags&128)===128)}catch{}}var Ze=Math.clz32?Math.clz32:pr,ut=Math.log,Tn=Math.LN2;function pr(n){return n>>>=0,n===0?32:31-(ut(n)/Tn|0)|0}var xn=64,Gr=4194304;function Te(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function gt(n,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,g=n.suspendedLanes,_=n.pingedLanes,S=u&268435455;if(S!==0){var R=S&~g;R!==0?f=Te(R):(_&=S,_!==0&&(f=Te(_)))}else S=u&~g,S!==0?f=Te(S):_!==0&&(f=Te(_));if(f===0)return 0;if(o!==0&&o!==f&&(o&g)===0&&(g=f&-f,_=o&-o,g>=_||g===16&&(_&4194240)!==0))return o;if((f&4)!==0&&(f|=u&16),o=n.entangledLanes,o!==0)for(n=n.entanglements,o&=f;0<o;)u=31-Ze(o),g=1<<u,f|=n[u],o&=~g;return f}function _i(n,o){switch(n){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zr(n,o){for(var u=n.suspendedLanes,f=n.pingedLanes,g=n.expirationTimes,_=n.pendingLanes;0<_;){var S=31-Ze(_),R=1<<S,B=g[S];B===-1?((R&u)===0||(R&f)!==0)&&(g[S]=_i(R,o)):B<=o&&(n.expiredLanes|=R),_&=~R}}function hn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Jo(){var n=xn;return xn<<=1,(xn&4194240)===0&&(xn=64),n}function zi(n){for(var o=[],u=0;31>u;u++)o.push(n);return o}function Zn(n,o,u){n.pendingLanes|=o,o!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,o=31-Ze(o),n[o]=u}function Lt(n,o){var u=n.pendingLanes&~o;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=o,n.mutableReadLanes&=o,n.entangledLanes&=o,o=n.entanglements;var f=n.eventTimes;for(n=n.expirationTimes;0<u;){var g=31-Ze(u),_=1<<g;o[g]=0,f[g]=-1,n[g]=-1,u&=~_}}function kr(n,o){var u=n.entangledLanes|=o;for(n=n.entanglements;u;){var f=31-Ze(u),g=1<<f;g&o|n[f]&o&&(n[f]|=o),u&=~g}}var Je=0;function Nn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ps,Kr,gs,_s,Fi,gr=!1,ji=[],Kn=null,Rr=null,$t=null,ys=new Map,Oe=new Map,Mt=[],_t="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yi(n,o){switch(n){case"focusin":case"focusout":Kn=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":$t=null;break;case"pointerover":case"pointerout":ys.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oe.delete(o.pointerId)}}function Qn(n,o,u,f,g,_){return n===null||n.nativeEvent!==_?(n={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:_,targetContainers:[g]},o!==null&&(o=Cs(o),o!==null&&Kr(o)),n):(n.eventSystemFlags|=f,o=n.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),n)}function Zs(n,o,u,f,g){switch(o){case"focusin":return Kn=Qn(Kn,n,o,u,f,g),!0;case"dragenter":return Rr=Qn(Rr,n,o,u,f,g),!0;case"mouseover":return $t=Qn($t,n,o,u,f,g),!0;case"pointerover":var _=g.pointerId;return ys.set(_,Qn(ys.get(_)||null,n,o,u,f,g)),!0;case"gotpointercapture":return _=g.pointerId,Oe.set(_,Qn(Oe.get(_)||null,n,o,u,f,g)),!0}return!1}function Bi(n){var o=bs(n.target);if(o!==null){var u=fr(o);if(u!==null){if(o=u.tag,o===13){if(o=qr(u),o!==null){n.blockedOn=o,Fi(n.priority,function(){gs(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function lt(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var u=Es(n.domEventName,n.eventSystemFlags,o[0],n.nativeEvent);if(u===null){u=n.nativeEvent;var f=new u.constructor(u.type,u);cr=f,u.target.dispatchEvent(f),cr=null}else return o=Cs(u),o!==null&&Kr(o),n.blockedOn=u,!1;o.shift()}return!0}function Ks(n,o,u){lt(n)&&u.delete(o)}function vs(){gr=!1,Kn!==null&&lt(Kn)&&(Kn=null),Rr!==null&&lt(Rr)&&(Rr=null),$t!==null&&lt($t)&&($t=null),ys.forEach(Ks),Oe.forEach(Ks)}function bt(n,o){n.blockedOn===o&&(n.blockedOn=null,gr||(gr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,vs)))}function Ln(n){function o(g){return bt(g,n)}if(0<ji.length){bt(ji[0],n);for(var u=1;u<ji.length;u++){var f=ji[u];f.blockedOn===n&&(f.blockedOn=null)}}for(Kn!==null&&bt(Kn,n),Rr!==null&&bt(Rr,n),$t!==null&&bt($t,n),ys.forEach(o),Oe.forEach(o),u=0;u<Mt.length;u++)f=Mt[u],f.blockedOn===n&&(f.blockedOn=null);for(;0<Mt.length&&(u=Mt[0],u.blockedOn===null);)Bi(u),u.blockedOn===null&&Mt.shift()}var Qr=ge.ReactCurrentBatchConfig,Yr=!0;function Xr(n,o,u,f){var g=Je,_=Qr.transition;Qr.transition=null;try{Je=1,ws(n,o,u,f)}finally{Je=g,Qr.transition=_}}function ea(n,o,u,f){var g=Je,_=Qr.transition;Qr.transition=null;try{Je=4,ws(n,o,u,f)}finally{Je=g,Qr.transition=_}}function ws(n,o,u,f){if(Yr){var g=Es(n,o,u,f);if(g===null)r(n,o,f,Jr,u),yi(n,f);else if(Zs(g,n,o,u,f))f.stopPropagation();else if(yi(n,f),o&4&&-1<_t.indexOf(n)){for(;g!==null;){var _=Cs(g);if(_!==null&&ps(_),_=Es(n,o,u,f),_===null&&r(n,o,f,Jr,u),_===g)break;g=_}g!==null&&f.stopPropagation()}else r(n,o,f,null,u)}}var Jr=null;function Es(n,o,u,f){if(Jr=null,n=wn(f),n=bs(n),n!==null)if(o=fr(n),o===null)n=null;else if(u=o.tag,u===13){if(n=qr(o),n!==null)return n;n=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null);return Jr=n,null}function et(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bl()){case Gs:return 1;case Xo:return 4;case fs:case ms:return 16;case $r:return 536870912;default:return 16}default:return 16}}var Yn=null,dn=null,Xn=null;function ta(){if(Xn)return Xn;var n,o=dn,u=o.length,f,g="value"in Yn?Yn.value:Yn.textContent,_=g.length;for(n=0;n<u&&o[n]===g[n];n++);var S=u-n;for(f=1;f<=S&&o[u-f]===g[_-f];f++);return Xn=g.slice(n,1<f?1-f:void 0)}function Ts(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function _r(){return!0}function na(){return!1}function rn(n){function o(u,f,g,_,S){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var R in n)n.hasOwnProperty(R)&&(u=n[R],this[R]=u?u(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?_r:na,this.isPropagationStopped=na,this}return re(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=_r)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=_r)},persist:function(){},isPersistent:_r}),o}var ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xs=rn(ei),ti=re({},ei,{view:0,detail:0}),Qs=rn(ti),In,Ys,Mn,Dn=re({},ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Be,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Mn&&(Mn&&n.type==="mousemove"?(In=n.screenX-Mn.screenX,Ys=n.screenY-Mn.screenY):Ys=In=0,Mn=n),In)},movementY:function(n){return"movementY"in n?n.movementY:Ys}}),Xs=rn(Dn),ra=re({},Dn,{dataTransfer:0}),Js=rn(ra),eo=re({},ti,{relatedTarget:0}),Qt=rn(eo),ia=re({},ei,{animationName:0,elapsedTime:0,pseudoElement:0}),ja=rn(ia),Ui=re({},ei,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),h=rn(Ui),y=re({},ei,{data:0}),T=rn(y),C={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},K={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function de(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=K[n])?!!o[n]:!1}function Be(){return de}var ct=re({},ti,{key:function(n){if(n.key){var o=C[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=Ts(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?H[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Be,charCode:function(n){return n.type==="keypress"?Ts(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ts(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),mt=rn(ct),zt=re({},Dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jn=rn(zt),Nr=re({},ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Be}),yr=rn(Nr),ni=re({},ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),to=rn(ni),no=re({},Dn,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Xh=rn(no),Lr=[9,13,27,32],Wi=v&&"CompositionEvent"in window,sa=null;v&&"documentMode"in document&&(sa=document.documentMode);var vi=v&&"TextEvent"in window&&!sa,Zu=v&&(!Wi||sa&&8<sa&&11>=sa),Is=" ",Ku=!1;function ro(n,o){switch(n){case"keyup":return Lr.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ul(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var wi=!1;function Jh(n,o){switch(n){case"compositionend":return Ul(o);case"keypress":return o.which!==32?null:(Ku=!0,Is);case"textInput":return n=o.data,n===Is&&Ku?null:n;default:return null}}function Hi(n,o){if(wi)return n==="compositionend"||!Wi&&ro(n,o)?(n=ta(),Xn=dn=Yn=null,wi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Zu&&o.locale!=="ko"?null:o.data;default:return null}}var Ba={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qu(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!Ba[n.type]:o==="textarea"}function Ua(n,o,u,f){Fe(f),o=d(o,"onChange"),0<o.length&&(u=new xs("onChange","change",null,u,f),n.push({event:u,listeners:o}))}var oa=null,er=null;function ed(n){Yl(n,0)}function Ei(n){var o=As(n);if(ir(o))return n}function td(n,o){if(n==="change")return o}var ri=!1;if(v){var io;if(v){var Wa="oninput"in document;if(!Wa){var Ha=document.createElement("div");Ha.setAttribute("oninput","return;"),Wa=typeof Ha.oninput=="function"}io=Wa}else io=!1;ri=io&&(!document.documentMode||9<document.documentMode)}function aa(){oa&&(oa.detachEvent("onpropertychange",qa),er=oa=null)}function qa(n){if(n.propertyName==="value"&&Ei(er)){var o=[];Ua(o,er,n,wn(n)),Pt(ed,o)}}function $a(n,o,u){n==="focusin"?(aa(),oa=o,er=u,oa.attachEvent("onpropertychange",qa)):n==="focusout"&&aa()}function so(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ei(er)}function Ga(n,o){if(n==="click")return Ei(o)}function Wl(n,o){if(n==="input"||n==="change")return Ei(o)}function Yu(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var Mr=typeof Object.is=="function"?Object.is:Yu;function qi(n,o){if(Mr(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var u=Object.keys(n),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!E.call(o,g)||!Mr(n[g],o[g]))return!1}return!0}function Xu(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Hl(n,o){var u=Xu(n);n=0;for(var f;u;){if(u.nodeType===3){if(f=n+u.textContent.length,n<=o&&f>=o)return{node:u,offset:o-n};n=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Xu(u)}}function Ju(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?Ju(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function ql(){for(var n=window,o=sr();o instanceof n.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)n=o.contentWindow;else break;o=sr(n.document)}return o}function $l(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}function ii(n){var o=ql(),u=n.focusedElem,f=n.selectionRange;if(o!==u&&u&&u.ownerDocument&&Ju(u.ownerDocument.documentElement,u)){if(f!==null&&$l(u)){if(o=f.start,n=f.end,n===void 0&&(n=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(n,u.value.length);else if(n=(o=u.ownerDocument||document)&&o.defaultView||window,n.getSelection){n=n.getSelection();var g=u.textContent.length,_=Math.min(f.start,g);f=f.end===void 0?_:Math.min(f.end,g),!n.extend&&_>f&&(g=f,f=_,_=g),g=Hl(u,_);var S=Hl(u,f);g&&S&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==S.node||n.focusOffset!==S.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),n.removeAllRanges(),_>f?(n.addRange(o),n.extend(S.node,S.offset)):(o.setEnd(S.node,S.offset),n.addRange(o)))}}for(o=[],n=u;n=n.parentNode;)n.nodeType===1&&o.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)n=o[u],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Za=v&&"documentMode"in document&&11>=document.documentMode,oo=null,ao=null,la=null,Ka=!1;function ec(n,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Ka||oo==null||oo!==sr(f)||(f=oo,"selectionStart"in f&&$l(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),la&&qi(la,f)||(la=f,f=d(ao,"onSelect"),0<f.length&&(o=new xs("onSelect","select",null,o,u),n.push({event:o,listeners:f}),o.target=oo)))}function $i(n,o){var u={};return u[n.toLowerCase()]=o.toLowerCase(),u["Webkit"+n]="webkit"+o,u["Moz"+n]="moz"+o,u}var lo={animationend:$i("Animation","AnimationEnd"),animationiteration:$i("Animation","AnimationIteration"),animationstart:$i("Animation","AnimationStart"),transitionend:$i("Transition","TransitionEnd")},Gi={},Gl={};v&&(Gl=document.createElement("div").style,"AnimationEvent"in window||(delete lo.animationend.animation,delete lo.animationiteration.animation,delete lo.animationstart.animation),"TransitionEvent"in window||delete lo.transitionend.transition);function ua(n){if(Gi[n])return Gi[n];if(!lo[n])return n;var o=lo[n],u;for(u in o)if(o.hasOwnProperty(u)&&u in Gl)return Gi[n]=o[u];return n}var tc=ua("animationend"),si=ua("animationiteration"),Zl=ua("animationstart"),Kl=ua("transitionend"),uo=new Map,nc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(n,o){uo.set(n,o),c(o,[n])}for(var Ss=0;Ss<nc.length;Ss++){var Qa=nc[Ss],rc=Qa.toLowerCase(),nd=Qa[0].toUpperCase()+Qa.slice(1);Dr(rc,"on"+nd)}Dr(tc,"onAnimationEnd"),Dr(si,"onAnimationIteration"),Dr(Zl,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Kl,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var co="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ic=new Set("cancel close invalid load scroll toggle".split(" ").concat(co));function Ql(n,o,u){var f=n.type||"unknown-event";n.currentTarget=u,us(f,o,void 0,n),n.currentTarget=null}function Yl(n,o){o=(o&4)!==0;for(var u=0;u<n.length;u++){var f=n[u],g=f.event;f=f.listeners;e:{var _=void 0;if(o)for(var S=f.length-1;0<=S;S--){var R=f[S],B=R.instance,X=R.currentTarget;if(R=R.listener,B!==_&&g.isPropagationStopped())break e;Ql(g,R,X),_=B}else for(S=0;S<f.length;S++){if(R=f[S],B=R.instance,X=R.currentTarget,R=R.listener,B!==_&&g.isPropagationStopped())break e;Ql(g,R,X),_=B}}}if(Di)throw n=Gn,Di=!1,Gn=null,n}function xt(n,o){var u=o[po];u===void 0&&(u=o[po]=new Set);var f=n+"__bubble";u.has(f)||(sc(o,n,2,!1),u.add(f))}function Xl(n,o,u){var f=0;o&&(f|=4),sc(u,n,f,o)}var ca="_reactListening"+Math.random().toString(36).slice(2);function ho(n){if(!n[ca]){n[ca]=!0,s.forEach(function(u){u!=="selectionchange"&&(ic.has(u)||Xl(u,!1,n),Xl(u,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[ca]||(o[ca]=!0,Xl("selectionchange",!1,o))}}function sc(n,o,u,f){switch(et(o)){case 1:var g=Xr;break;case 4:g=ea;break;default:g=ws}u=g.bind(null,o,u,n),g=void 0,!$n||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?n.addEventListener(o,u,{capture:!0,passive:g}):n.addEventListener(o,u,!0):g!==void 0?n.addEventListener(o,u,{passive:g}):n.addEventListener(o,u,!1)}function r(n,o,u,f,g){var _=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var R=f.stateNode.containerInfo;if(R===g||R.nodeType===8&&R.parentNode===g)break;if(S===4)for(S=f.return;S!==null;){var B=S.tag;if((B===3||B===4)&&(B=S.stateNode.containerInfo,B===g||B.nodeType===8&&B.parentNode===g))return;S=S.return}for(;R!==null;){if(S=bs(R),S===null)return;if(B=S.tag,B===5||B===6){f=_=S;continue e}R=R.parentNode}}f=f.return}Pt(function(){var X=_,le=wn(u),ue=[];e:{var ae=uo.get(n);if(ae!==void 0){var xe=xs,ke=n;switch(n){case"keypress":if(Ts(u)===0)break e;case"keydown":case"keyup":xe=mt;break;case"focusin":ke="focus",xe=Qt;break;case"focusout":ke="blur",xe=Qt;break;case"beforeblur":case"afterblur":xe=Qt;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=Xs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=Js;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=yr;break;case tc:case si:case Zl:xe=ja;break;case Kl:xe=to;break;case"scroll":xe=Qs;break;case"wheel":xe=Xh;break;case"copy":case"cut":case"paste":xe=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=Jn}var Re=(o&4)!==0,Gt=!Re&&n==="scroll",G=Re?ae!==null?ae+"Capture":null:ae;Re=[];for(var W=X,Z;W!==null;){Z=W;var he=Z.stateNode;if(Z.tag===5&&he!==null&&(Z=he,G!==null&&(he=Wt(W,G),he!=null&&Re.push(l(W,he,Z)))),Gt)break;W=W.return}0<Re.length&&(ae=new xe(ae,ke,null,u,le),ue.push({event:ae,listeners:Re}))}}if((o&7)===0){e:{if(ae=n==="mouseover"||n==="pointerover",xe=n==="mouseout"||n==="pointerout",ae&&u!==cr&&(ke=u.relatedTarget||u.fromElement)&&(bs(ke)||ke[yt]))break e;if((xe||ae)&&(ae=le.window===le?le:(ae=le.ownerDocument)?ae.defaultView||ae.parentWindow:window,xe?(ke=u.relatedTarget||u.toElement,xe=X,ke=ke?bs(ke):null,ke!==null&&(Gt=fr(ke),ke!==Gt||ke.tag!==5&&ke.tag!==6)&&(ke=null)):(xe=null,ke=X),xe!==ke)){if(Re=Xs,he="onMouseLeave",G="onMouseEnter",W="mouse",(n==="pointerout"||n==="pointerover")&&(Re=Jn,he="onPointerLeave",G="onPointerEnter",W="pointer"),Gt=xe==null?ae:As(xe),Z=ke==null?ae:As(ke),ae=new Re(he,W+"leave",xe,u,le),ae.target=Gt,ae.relatedTarget=Z,he=null,bs(le)===X&&(Re=new Re(G,W+"enter",ke,u,le),Re.target=Z,Re.relatedTarget=Gt,he=Re),Gt=he,xe&&ke)t:{for(Re=xe,G=ke,W=0,Z=Re;Z;Z=p(Z))W++;for(Z=0,he=G;he;he=p(he))Z++;for(;0<W-Z;)Re=p(Re),W--;for(;0<Z-W;)G=p(G),Z--;for(;W--;){if(Re===G||G!==null&&Re===G.alternate)break t;Re=p(Re),G=p(G)}Re=null}else Re=null;xe!==null&&w(ue,ae,xe,Re,!1),ke!==null&&Gt!==null&&w(ue,Gt,ke,Re,!0)}}e:{if(ae=X?As(X):window,xe=ae.nodeName&&ae.nodeName.toLowerCase(),xe==="select"||xe==="input"&&ae.type==="file")var Ne=td;else if(Qu(ae))if(ri)Ne=Wl;else{Ne=so;var Ve=$a}else(xe=ae.nodeName)&&xe.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(Ne=Ga);if(Ne&&(Ne=Ne(n,X))){Ua(ue,Ne,u,le);break e}Ve&&Ve(n,ae,X),n==="focusout"&&(Ve=ae._wrapperState)&&Ve.controlled&&ae.type==="number"&&ft(ae,"number",ae.value)}switch(Ve=X?As(X):window,n){case"focusin":(Qu(Ve)||Ve.contentEditable==="true")&&(oo=Ve,ao=X,la=null);break;case"focusout":la=ao=oo=null;break;case"mousedown":Ka=!0;break;case"contextmenu":case"mouseup":case"dragend":Ka=!1,ec(ue,u,le);break;case"selectionchange":if(Za)break;case"keydown":case"keyup":ec(ue,u,le)}var ze;if(Wi)e:{switch(n){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else wi?ro(n,u)&&(He="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(He="onCompositionStart");He&&(Zu&&u.locale!=="ko"&&(wi||He!=="onCompositionStart"?He==="onCompositionEnd"&&wi&&(ze=ta()):(Yn=le,dn="value"in Yn?Yn.value:Yn.textContent,wi=!0)),Ve=d(X,He),0<Ve.length&&(He=new T(He,n,null,u,le),ue.push({event:He,listeners:Ve}),ze?He.data=ze:(ze=Ul(u),ze!==null&&(He.data=ze)))),(ze=vi?Jh(n,u):Hi(n,u))&&(X=d(X,"onBeforeInput"),0<X.length&&(le=new T("onBeforeInput","beforeinput",null,u,le),ue.push({event:le,listeners:X}),le.data=ze))}Yl(ue,o)})}function l(n,o,u){return{instance:n,listener:o,currentTarget:u}}function d(n,o){for(var u=o+"Capture",f=[];n!==null;){var g=n,_=g.stateNode;g.tag===5&&_!==null&&(g=_,_=Wt(n,u),_!=null&&f.unshift(l(n,_,g)),_=Wt(n,o),_!=null&&f.push(l(n,_,g))),n=n.return}return f}function p(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function w(n,o,u,f,g){for(var _=o._reactName,S=[];u!==null&&u!==f;){var R=u,B=R.alternate,X=R.stateNode;if(B!==null&&B===f)break;R.tag===5&&X!==null&&(R=X,g?(B=Wt(u,_),B!=null&&S.unshift(l(u,B,R))):g||(B=Wt(u,_),B!=null&&S.push(l(u,B,R)))),u=u.return}S.length!==0&&n.push({event:o,listeners:S})}var P=/\r\n?/g,V=/\u0000|\uFFFD/g;function q(n){return(typeof n=="string"?n:""+n).replace(P,`
`).replace(V,"")}function Y(n,o,u){if(o=q(o),q(n)!==o&&u)throw Error(t(425))}function oe(){}var we=null,De=null;function Xe(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var sn=typeof setTimeout=="function"?setTimeout:void 0,Yt=typeof clearTimeout=="function"?clearTimeout:void 0,tr=typeof Promise=="function"?Promise:void 0,On=typeof queueMicrotask=="function"?queueMicrotask:typeof tr<"u"?function(n){return tr.resolve(null).then(n).catch(fo)}:sn;function fo(n){setTimeout(function(){throw n})}function Jl(n,o){var u=o,f=0;do{var g=u.nextSibling;if(n.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){n.removeChild(g),Ln(o);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);Ln(o)}function Zi(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return n}function oc(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return n;o--}else u==="/$"&&o++}n=n.previousSibling}return null}var Ps=Math.random().toString(36).slice(2),oi="__reactFiber$"+Ps,mo="__reactProps$"+Ps,yt="__reactContainer$"+Ps,po="__reactEvents$"+Ps,rd="__reactListeners$"+Ps,id="__reactHandles$"+Ps;function bs(n){var o=n[oi];if(o)return o;for(var u=n.parentNode;u;){if(o=u[yt]||u[oi]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(n=oc(n);n!==null;){if(u=n[oi])return u;n=oc(n)}return o}n=u,u=n.parentNode}return null}function Cs(n){return n=n[oi]||n[yt],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function As(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Ya(n){return n[mo]||null}var sd=[],Xa=-1;function go(n){return{current:n}}function Nt(n){0>Xa||(n.current=sd[Xa],sd[Xa]=null,Xa--)}function Ct(n,o){Xa++,sd[Xa]=n.current,n.current=o}var _o={},Vn=go(_o),vr=go(!1),ha=_o;function Ja(n,o){var u=n.type.contextTypes;if(!u)return _o;var f=n.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var g={},_;for(_ in u)g[_]=o[_];return f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=o,n.__reactInternalMemoizedMaskedChildContext=g),g}function wr(n){return n=n.childContextTypes,n!=null}function ac(){Nt(vr),Nt(Vn)}function Zm(n,o,u){if(Vn.current!==_o)throw Error(t(168));Ct(Vn,o),Ct(vr,u)}function Km(n,o,u){var f=n.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in o))throw Error(t(108,Ge(n)||"Unknown",g));return re({},u,f)}function lc(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||_o,ha=Vn.current,Ct(Vn,n),Ct(vr,vr.current),!0}function Qm(n,o,u){var f=n.stateNode;if(!f)throw Error(t(169));u?(n=Km(n,o,ha),f.__reactInternalMemoizedMergedChildContext=n,Nt(vr),Nt(Vn),Ct(Vn,n)):Nt(vr),Ct(vr,u)}var ks=null,uc=!1,od=!1;function Ym(n){ks===null?ks=[n]:ks.push(n)}function nw(n){uc=!0,Ym(n)}function yo(){if(!od&&ks!==null){od=!0;var n=0,o=Je;try{var u=ks;for(Je=1;n<u.length;n++){var f=u[n];do f=f(!0);while(f!==null)}ks=null,uc=!1}catch(g){throw ks!==null&&(ks=ks.slice(n+1)),Yo(Gs,yo),g}finally{Je=o,od=!1}}return null}var el=[],tl=0,cc=null,hc=0,ai=[],li=0,da=null,Rs=1,Ns="";function fa(n,o){el[tl++]=hc,el[tl++]=cc,cc=n,hc=o}function Xm(n,o,u){ai[li++]=Rs,ai[li++]=Ns,ai[li++]=da,da=n;var f=Rs;n=Ns;var g=32-Ze(f)-1;f&=~(1<<g),u+=1;var _=32-Ze(o)+g;if(30<_){var S=g-g%5;_=(f&(1<<S)-1).toString(32),f>>=S,g-=S,Rs=1<<32-Ze(o)+g|u<<g|f,Ns=_+n}else Rs=1<<_|u<<g|f,Ns=n}function ad(n){n.return!==null&&(fa(n,1),Xm(n,1,0))}function ld(n){for(;n===cc;)cc=el[--tl],el[tl]=null,hc=el[--tl],el[tl]=null;for(;n===da;)da=ai[--li],ai[li]=null,Ns=ai[--li],ai[li]=null,Rs=ai[--li],ai[li]=null}var Or=null,Vr=null,Dt=!1,Ti=null;function Jm(n,o){var u=di(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=n,o=n.deletions,o===null?(n.deletions=[u],n.flags|=16):o.push(u)}function ep(n,o){switch(n.tag){case 5:var u=n.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(n.stateNode=o,Or=n,Vr=Zi(o.firstChild),!0):!1;case 6:return o=n.pendingProps===""||o.nodeType!==3?null:o,o!==null?(n.stateNode=o,Or=n,Vr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=da!==null?{id:Rs,overflow:Ns}:null,n.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=di(18,null,null,0),u.stateNode=o,u.return=n,n.child=u,Or=n,Vr=null,!0):!1;default:return!1}}function ud(n){return(n.mode&1)!==0&&(n.flags&128)===0}function cd(n){if(Dt){var o=Vr;if(o){var u=o;if(!ep(n,o)){if(ud(n))throw Error(t(418));o=Zi(u.nextSibling);var f=Or;o&&ep(n,o)?Jm(f,u):(n.flags=n.flags&-4097|2,Dt=!1,Or=n)}}else{if(ud(n))throw Error(t(418));n.flags=n.flags&-4097|2,Dt=!1,Or=n}}}function tp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Or=n}function dc(n){if(n!==Or)return!1;if(!Dt)return tp(n),Dt=!0,!1;var o;if((o=n.tag!==3)&&!(o=n.tag!==5)&&(o=n.type,o=o!=="head"&&o!=="body"&&!Xe(n.type,n.memoizedProps)),o&&(o=Vr)){if(ud(n))throw np(),Error(t(418));for(;o;)Jm(n,o),o=Zi(o.nextSibling)}if(tp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,o=0;n;){if(n.nodeType===8){var u=n.data;if(u==="/$"){if(o===0){Vr=Zi(n.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}n=n.nextSibling}Vr=null}}else Vr=Or?Zi(n.stateNode.nextSibling):null;return!0}function np(){for(var n=Vr;n;)n=Zi(n.nextSibling)}function nl(){Vr=Or=null,Dt=!1}function hd(n){Ti===null?Ti=[n]:Ti.push(n)}var rw=ge.ReactCurrentBatchConfig;function eu(n,o,u){if(n=u.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,n));var g=f,_=""+n;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===_?o.ref:(o=function(S){var R=g.refs;S===null?delete R[_]:R[_]=S},o._stringRef=_,o)}if(typeof n!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,n))}return n}function fc(n,o){throw n=Object.prototype.toString.call(o),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n))}function rp(n){var o=n._init;return o(n._payload)}function ip(n){function o(G,W){if(n){var Z=G.deletions;Z===null?(G.deletions=[W],G.flags|=16):Z.push(W)}}function u(G,W){if(!n)return null;for(;W!==null;)o(G,W),W=W.sibling;return null}function f(G,W){for(G=new Map;W!==null;)W.key!==null?G.set(W.key,W):G.set(W.index,W),W=W.sibling;return G}function g(G,W){return G=Po(G,W),G.index=0,G.sibling=null,G}function _(G,W,Z){return G.index=Z,n?(Z=G.alternate,Z!==null?(Z=Z.index,Z<W?(G.flags|=2,W):Z):(G.flags|=2,W)):(G.flags|=1048576,W)}function S(G){return n&&G.alternate===null&&(G.flags|=2),G}function R(G,W,Z,he){return W===null||W.tag!==6?(W=nf(Z,G.mode,he),W.return=G,W):(W=g(W,Z),W.return=G,W)}function B(G,W,Z,he){var Ne=Z.type;return Ne===F?le(G,W,Z.props.children,he,Z.key):W!==null&&(W.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===be&&rp(Ne)===W.type)?(he=g(W,Z.props),he.ref=eu(G,W,Z),he.return=G,he):(he=Vc(Z.type,Z.key,Z.props,null,G.mode,he),he.ref=eu(G,W,Z),he.return=G,he)}function X(G,W,Z,he){return W===null||W.tag!==4||W.stateNode.containerInfo!==Z.containerInfo||W.stateNode.implementation!==Z.implementation?(W=rf(Z,G.mode,he),W.return=G,W):(W=g(W,Z.children||[]),W.return=G,W)}function le(G,W,Z,he,Ne){return W===null||W.tag!==7?(W=Ea(Z,G.mode,he,Ne),W.return=G,W):(W=g(W,Z),W.return=G,W)}function ue(G,W,Z){if(typeof W=="string"&&W!==""||typeof W=="number")return W=nf(""+W,G.mode,Z),W.return=G,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Me:return Z=Vc(W.type,W.key,W.props,null,G.mode,Z),Z.ref=eu(G,null,W),Z.return=G,Z;case je:return W=rf(W,G.mode,Z),W.return=G,W;case be:var he=W._init;return ue(G,he(W._payload),Z)}if(St(W)||Ie(W))return W=Ea(W,G.mode,Z,null),W.return=G,W;fc(G,W)}return null}function ae(G,W,Z,he){var Ne=W!==null?W.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Ne!==null?null:R(G,W,""+Z,he);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Me:return Z.key===Ne?B(G,W,Z,he):null;case je:return Z.key===Ne?X(G,W,Z,he):null;case be:return Ne=Z._init,ae(G,W,Ne(Z._payload),he)}if(St(Z)||Ie(Z))return Ne!==null?null:le(G,W,Z,he,null);fc(G,Z)}return null}function xe(G,W,Z,he,Ne){if(typeof he=="string"&&he!==""||typeof he=="number")return G=G.get(Z)||null,R(W,G,""+he,Ne);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case Me:return G=G.get(he.key===null?Z:he.key)||null,B(W,G,he,Ne);case je:return G=G.get(he.key===null?Z:he.key)||null,X(W,G,he,Ne);case be:var Ve=he._init;return xe(G,W,Z,Ve(he._payload),Ne)}if(St(he)||Ie(he))return G=G.get(Z)||null,le(W,G,he,Ne,null);fc(W,he)}return null}function ke(G,W,Z,he){for(var Ne=null,Ve=null,ze=W,He=W=0,pn=null;ze!==null&&He<Z.length;He++){ze.index>He?(pn=ze,ze=null):pn=ze.sibling;var pt=ae(G,ze,Z[He],he);if(pt===null){ze===null&&(ze=pn);break}n&&ze&&pt.alternate===null&&o(G,ze),W=_(pt,W,He),Ve===null?Ne=pt:Ve.sibling=pt,Ve=pt,ze=pn}if(He===Z.length)return u(G,ze),Dt&&fa(G,He),Ne;if(ze===null){for(;He<Z.length;He++)ze=ue(G,Z[He],he),ze!==null&&(W=_(ze,W,He),Ve===null?Ne=ze:Ve.sibling=ze,Ve=ze);return Dt&&fa(G,He),Ne}for(ze=f(G,ze);He<Z.length;He++)pn=xe(ze,G,He,Z[He],he),pn!==null&&(n&&pn.alternate!==null&&ze.delete(pn.key===null?He:pn.key),W=_(pn,W,He),Ve===null?Ne=pn:Ve.sibling=pn,Ve=pn);return n&&ze.forEach(function(bo){return o(G,bo)}),Dt&&fa(G,He),Ne}function Re(G,W,Z,he){var Ne=Ie(Z);if(typeof Ne!="function")throw Error(t(150));if(Z=Ne.call(Z),Z==null)throw Error(t(151));for(var Ve=Ne=null,ze=W,He=W=0,pn=null,pt=Z.next();ze!==null&&!pt.done;He++,pt=Z.next()){ze.index>He?(pn=ze,ze=null):pn=ze.sibling;var bo=ae(G,ze,pt.value,he);if(bo===null){ze===null&&(ze=pn);break}n&&ze&&bo.alternate===null&&o(G,ze),W=_(bo,W,He),Ve===null?Ne=bo:Ve.sibling=bo,Ve=bo,ze=pn}if(pt.done)return u(G,ze),Dt&&fa(G,He),Ne;if(ze===null){for(;!pt.done;He++,pt=Z.next())pt=ue(G,pt.value,he),pt!==null&&(W=_(pt,W,He),Ve===null?Ne=pt:Ve.sibling=pt,Ve=pt);return Dt&&fa(G,He),Ne}for(ze=f(G,ze);!pt.done;He++,pt=Z.next())pt=xe(ze,G,He,pt.value,he),pt!==null&&(n&&pt.alternate!==null&&ze.delete(pt.key===null?He:pt.key),W=_(pt,W,He),Ve===null?Ne=pt:Ve.sibling=pt,Ve=pt);return n&&ze.forEach(function(Ow){return o(G,Ow)}),Dt&&fa(G,He),Ne}function Gt(G,W,Z,he){if(typeof Z=="object"&&Z!==null&&Z.type===F&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Me:e:{for(var Ne=Z.key,Ve=W;Ve!==null;){if(Ve.key===Ne){if(Ne=Z.type,Ne===F){if(Ve.tag===7){u(G,Ve.sibling),W=g(Ve,Z.props.children),W.return=G,G=W;break e}}else if(Ve.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===be&&rp(Ne)===Ve.type){u(G,Ve.sibling),W=g(Ve,Z.props),W.ref=eu(G,Ve,Z),W.return=G,G=W;break e}u(G,Ve);break}else o(G,Ve);Ve=Ve.sibling}Z.type===F?(W=Ea(Z.props.children,G.mode,he,Z.key),W.return=G,G=W):(he=Vc(Z.type,Z.key,Z.props,null,G.mode,he),he.ref=eu(G,W,Z),he.return=G,G=he)}return S(G);case je:e:{for(Ve=Z.key;W!==null;){if(W.key===Ve)if(W.tag===4&&W.stateNode.containerInfo===Z.containerInfo&&W.stateNode.implementation===Z.implementation){u(G,W.sibling),W=g(W,Z.children||[]),W.return=G,G=W;break e}else{u(G,W);break}else o(G,W);W=W.sibling}W=rf(Z,G.mode,he),W.return=G,G=W}return S(G);case be:return Ve=Z._init,Gt(G,W,Ve(Z._payload),he)}if(St(Z))return ke(G,W,Z,he);if(Ie(Z))return Re(G,W,Z,he);fc(G,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"?(Z=""+Z,W!==null&&W.tag===6?(u(G,W.sibling),W=g(W,Z),W.return=G,G=W):(u(G,W),W=nf(Z,G.mode,he),W.return=G,G=W),S(G)):u(G,W)}return Gt}var rl=ip(!0),sp=ip(!1),mc=go(null),pc=null,il=null,dd=null;function fd(){dd=il=pc=null}function md(n){var o=mc.current;Nt(mc),n._currentValue=o}function pd(n,o,u){for(;n!==null;){var f=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),n===u)break;n=n.return}}function sl(n,o){pc=n,dd=il=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&o)!==0&&(Er=!0),n.firstContext=null)}function ui(n){var o=n._currentValue;if(dd!==n)if(n={context:n,memoizedValue:o,next:null},il===null){if(pc===null)throw Error(t(308));il=n,pc.dependencies={lanes:0,firstContext:n}}else il=il.next=n;return o}var ma=null;function gd(n){ma===null?ma=[n]:ma.push(n)}function op(n,o,u,f){var g=o.interleaved;return g===null?(u.next=u,gd(o)):(u.next=g.next,g.next=u),o.interleaved=u,Ls(n,f)}function Ls(n,o){n.lanes|=o;var u=n.alternate;for(u!==null&&(u.lanes|=o),u=n,n=n.return;n!==null;)n.childLanes|=o,u=n.alternate,u!==null&&(u.childLanes|=o),u=n,n=n.return;return u.tag===3?u.stateNode:null}var vo=!1;function _d(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ap(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ms(n,o){return{eventTime:n,lane:o,tag:0,payload:null,callback:null,next:null}}function wo(n,o,u){var f=n.updateQueue;if(f===null)return null;if(f=f.shared,(dt&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,Ls(n,u)}return g=f.interleaved,g===null?(o.next=o,gd(f)):(o.next=g.next,g.next=o),f.interleaved=o,Ls(n,u)}function gc(n,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var f=o.lanes;f&=n.pendingLanes,u|=f,o.lanes=u,kr(n,u)}}function lp(n,o){var u=n.updateQueue,f=n.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};_===null?g=_=S:_=_.next=S,u=u.next}while(u!==null);_===null?g=_=o:_=_.next=o}else g=_=o;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:f.shared,effects:f.effects},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=o:n.next=o,u.lastBaseUpdate=o}function _c(n,o,u,f){var g=n.updateQueue;vo=!1;var _=g.firstBaseUpdate,S=g.lastBaseUpdate,R=g.shared.pending;if(R!==null){g.shared.pending=null;var B=R,X=B.next;B.next=null,S===null?_=X:S.next=X,S=B;var le=n.alternate;le!==null&&(le=le.updateQueue,R=le.lastBaseUpdate,R!==S&&(R===null?le.firstBaseUpdate=X:R.next=X,le.lastBaseUpdate=B))}if(_!==null){var ue=g.baseState;S=0,le=X=B=null,R=_;do{var ae=R.lane,xe=R.eventTime;if((f&ae)===ae){le!==null&&(le=le.next={eventTime:xe,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var ke=n,Re=R;switch(ae=o,xe=u,Re.tag){case 1:if(ke=Re.payload,typeof ke=="function"){ue=ke.call(xe,ue,ae);break e}ue=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Re.payload,ae=typeof ke=="function"?ke.call(xe,ue,ae):ke,ae==null)break e;ue=re({},ue,ae);break e;case 2:vo=!0}}R.callback!==null&&R.lane!==0&&(n.flags|=64,ae=g.effects,ae===null?g.effects=[R]:ae.push(R))}else xe={eventTime:xe,lane:ae,tag:R.tag,payload:R.payload,callback:R.callback,next:null},le===null?(X=le=xe,B=ue):le=le.next=xe,S|=ae;if(R=R.next,R===null){if(R=g.shared.pending,R===null)break;ae=R,R=ae.next,ae.next=null,g.lastBaseUpdate=ae,g.shared.pending=null}}while(!0);if(le===null&&(B=ue),g.baseState=B,g.firstBaseUpdate=X,g.lastBaseUpdate=le,o=g.shared.interleaved,o!==null){g=o;do S|=g.lane,g=g.next;while(g!==o)}else _===null&&(g.shared.lanes=0);_a|=S,n.lanes=S,n.memoizedState=ue}}function up(n,o,u){if(n=o.effects,o.effects=null,n!==null)for(o=0;o<n.length;o++){var f=n[o],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var tu={},Ki=go(tu),nu=go(tu),ru=go(tu);function pa(n){if(n===tu)throw Error(t(174));return n}function yd(n,o){switch(Ct(ru,o),Ct(nu,n),Ct(Ki,tu),n=o.nodeType,n){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:pi(null,"");break;default:n=n===8?o.parentNode:o,o=n.namespaceURI||null,n=n.tagName,o=pi(o,n)}Nt(Ki),Ct(Ki,o)}function ol(){Nt(Ki),Nt(nu),Nt(ru)}function cp(n){pa(ru.current);var o=pa(Ki.current),u=pi(o,n.type);o!==u&&(Ct(nu,n),Ct(Ki,u))}function vd(n){nu.current===n&&(Nt(Ki),Nt(nu))}var Ft=go(0);function yc(n){for(var o=n;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var wd=[];function Ed(){for(var n=0;n<wd.length;n++)wd[n]._workInProgressVersionPrimary=null;wd.length=0}var vc=ge.ReactCurrentDispatcher,Td=ge.ReactCurrentBatchConfig,ga=0,jt=null,on=null,fn=null,wc=!1,iu=!1,su=0,iw=0;function zn(){throw Error(t(321))}function xd(n,o){if(o===null)return!1;for(var u=0;u<o.length&&u<n.length;u++)if(!Mr(n[u],o[u]))return!1;return!0}function Id(n,o,u,f,g,_){if(ga=_,jt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,vc.current=n===null||n.memoizedState===null?lw:uw,n=u(f,g),iu){_=0;do{if(iu=!1,su=0,25<=_)throw Error(t(301));_+=1,fn=on=null,o.updateQueue=null,vc.current=cw,n=u(f,g)}while(iu)}if(vc.current=xc,o=on!==null&&on.next!==null,ga=0,fn=on=jt=null,wc=!1,o)throw Error(t(300));return n}function Sd(){var n=su!==0;return su=0,n}function Qi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?jt.memoizedState=fn=n:fn=fn.next=n,fn}function ci(){if(on===null){var n=jt.alternate;n=n!==null?n.memoizedState:null}else n=on.next;var o=fn===null?jt.memoizedState:fn.next;if(o!==null)fn=o,on=n;else{if(n===null)throw Error(t(310));on=n,n={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},fn===null?jt.memoizedState=fn=n:fn=fn.next=n}return fn}function ou(n,o){return typeof o=="function"?o(n):o}function Pd(n){var o=ci(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var f=on,g=f.baseQueue,_=u.pending;if(_!==null){if(g!==null){var S=g.next;g.next=_.next,_.next=S}f.baseQueue=g=_,u.pending=null}if(g!==null){_=g.next,f=f.baseState;var R=S=null,B=null,X=_;do{var le=X.lane;if((ga&le)===le)B!==null&&(B=B.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),f=X.hasEagerState?X.eagerState:n(f,X.action);else{var ue={lane:le,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};B===null?(R=B=ue,S=f):B=B.next=ue,jt.lanes|=le,_a|=le}X=X.next}while(X!==null&&X!==_);B===null?S=f:B.next=R,Mr(f,o.memoizedState)||(Er=!0),o.memoizedState=f,o.baseState=S,o.baseQueue=B,u.lastRenderedState=f}if(n=u.interleaved,n!==null){g=n;do _=g.lane,jt.lanes|=_,_a|=_,g=g.next;while(g!==n)}else g===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function bd(n){var o=ci(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var f=u.dispatch,g=u.pending,_=o.memoizedState;if(g!==null){u.pending=null;var S=g=g.next;do _=n(_,S.action),S=S.next;while(S!==g);Mr(_,o.memoizedState)||(Er=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),u.lastRenderedState=_}return[_,f]}function hp(){}function dp(n,o){var u=jt,f=ci(),g=o(),_=!Mr(f.memoizedState,g);if(_&&(f.memoizedState=g,Er=!0),f=f.queue,Cd(pp.bind(null,u,f,n),[n]),f.getSnapshot!==o||_||fn!==null&&fn.memoizedState.tag&1){if(u.flags|=2048,au(9,mp.bind(null,u,f,g,o),void 0,null),mn===null)throw Error(t(349));(ga&30)!==0||fp(u,o,g)}return g}function fp(n,o,u){n.flags|=16384,n={getSnapshot:o,value:u},o=jt.updateQueue,o===null?(o={lastEffect:null,stores:null},jt.updateQueue=o,o.stores=[n]):(u=o.stores,u===null?o.stores=[n]:u.push(n))}function mp(n,o,u,f){o.value=u,o.getSnapshot=f,gp(o)&&_p(n)}function pp(n,o,u){return u(function(){gp(o)&&_p(n)})}function gp(n){var o=n.getSnapshot;n=n.value;try{var u=o();return!Mr(n,u)}catch{return!0}}function _p(n){var o=Ls(n,1);o!==null&&Pi(o,n,1,-1)}function yp(n){var o=Qi();return typeof n=="function"&&(n=n()),o.memoizedState=o.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ou,lastRenderedState:n},o.queue=n,n=n.dispatch=aw.bind(null,jt,n),[o.memoizedState,n]}function au(n,o,u,f){return n={tag:n,create:o,destroy:u,deps:f,next:null},o=jt.updateQueue,o===null?(o={lastEffect:null,stores:null},jt.updateQueue=o,o.lastEffect=n.next=n):(u=o.lastEffect,u===null?o.lastEffect=n.next=n:(f=u.next,u.next=n,n.next=f,o.lastEffect=n)),n}function vp(){return ci().memoizedState}function Ec(n,o,u,f){var g=Qi();jt.flags|=n,g.memoizedState=au(1|o,u,void 0,f===void 0?null:f)}function Tc(n,o,u,f){var g=ci();f=f===void 0?null:f;var _=void 0;if(on!==null){var S=on.memoizedState;if(_=S.destroy,f!==null&&xd(f,S.deps)){g.memoizedState=au(o,u,_,f);return}}jt.flags|=n,g.memoizedState=au(1|o,u,_,f)}function wp(n,o){return Ec(8390656,8,n,o)}function Cd(n,o){return Tc(2048,8,n,o)}function Ep(n,o){return Tc(4,2,n,o)}function Tp(n,o){return Tc(4,4,n,o)}function xp(n,o){if(typeof o=="function")return n=n(),o(n),function(){o(null)};if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function Ip(n,o,u){return u=u!=null?u.concat([n]):null,Tc(4,4,xp.bind(null,o,n),u)}function Ad(){}function Sp(n,o){var u=ci();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&xd(o,f[1])?f[0]:(u.memoizedState=[n,o],n)}function Pp(n,o){var u=ci();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&xd(o,f[1])?f[0]:(n=n(),u.memoizedState=[n,o],n)}function bp(n,o,u){return(ga&21)===0?(n.baseState&&(n.baseState=!1,Er=!0),n.memoizedState=u):(Mr(u,o)||(u=Jo(),jt.lanes|=u,_a|=u,n.baseState=!0),o)}function sw(n,o){var u=Je;Je=u!==0&&4>u?u:4,n(!0);var f=Td.transition;Td.transition={};try{n(!1),o()}finally{Je=u,Td.transition=f}}function Cp(){return ci().memoizedState}function ow(n,o,u){var f=Io(n);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},Ap(n))kp(o,u);else if(u=op(n,o,u,f),u!==null){var g=rr();Pi(u,n,f,g),Rp(u,o,f)}}function aw(n,o,u){var f=Io(n),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(Ap(n))kp(o,g);else{var _=n.alternate;if(n.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var S=o.lastRenderedState,R=_(S,u);if(g.hasEagerState=!0,g.eagerState=R,Mr(R,S)){var B=o.interleaved;B===null?(g.next=g,gd(o)):(g.next=B.next,B.next=g),o.interleaved=g;return}}catch{}finally{}u=op(n,o,g,f),u!==null&&(g=rr(),Pi(u,n,f,g),Rp(u,o,f))}}function Ap(n){var o=n.alternate;return n===jt||o!==null&&o===jt}function kp(n,o){iu=wc=!0;var u=n.pending;u===null?o.next=o:(o.next=u.next,u.next=o),n.pending=o}function Rp(n,o,u){if((u&4194240)!==0){var f=o.lanes;f&=n.pendingLanes,u|=f,o.lanes=u,kr(n,u)}}var xc={readContext:ui,useCallback:zn,useContext:zn,useEffect:zn,useImperativeHandle:zn,useInsertionEffect:zn,useLayoutEffect:zn,useMemo:zn,useReducer:zn,useRef:zn,useState:zn,useDebugValue:zn,useDeferredValue:zn,useTransition:zn,useMutableSource:zn,useSyncExternalStore:zn,useId:zn,unstable_isNewReconciler:!1},lw={readContext:ui,useCallback:function(n,o){return Qi().memoizedState=[n,o===void 0?null:o],n},useContext:ui,useEffect:wp,useImperativeHandle:function(n,o,u){return u=u!=null?u.concat([n]):null,Ec(4194308,4,xp.bind(null,o,n),u)},useLayoutEffect:function(n,o){return Ec(4194308,4,n,o)},useInsertionEffect:function(n,o){return Ec(4,2,n,o)},useMemo:function(n,o){var u=Qi();return o=o===void 0?null:o,n=n(),u.memoizedState=[n,o],n},useReducer:function(n,o,u){var f=Qi();return o=u!==void 0?u(o):o,f.memoizedState=f.baseState=o,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:o},f.queue=n,n=n.dispatch=ow.bind(null,jt,n),[f.memoizedState,n]},useRef:function(n){var o=Qi();return n={current:n},o.memoizedState=n},useState:yp,useDebugValue:Ad,useDeferredValue:function(n){return Qi().memoizedState=n},useTransition:function(){var n=yp(!1),o=n[0];return n=sw.bind(null,n[1]),Qi().memoizedState=n,[o,n]},useMutableSource:function(){},useSyncExternalStore:function(n,o,u){var f=jt,g=Qi();if(Dt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),mn===null)throw Error(t(349));(ga&30)!==0||fp(f,o,u)}g.memoizedState=u;var _={value:u,getSnapshot:o};return g.queue=_,wp(pp.bind(null,f,_,n),[n]),f.flags|=2048,au(9,mp.bind(null,f,_,u,o),void 0,null),u},useId:function(){var n=Qi(),o=mn.identifierPrefix;if(Dt){var u=Ns,f=Rs;u=(f&~(1<<32-Ze(f)-1)).toString(32)+u,o=":"+o+"R"+u,u=su++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=iw++,o=":"+o+"r"+u.toString(32)+":";return n.memoizedState=o},unstable_isNewReconciler:!1},uw={readContext:ui,useCallback:Sp,useContext:ui,useEffect:Cd,useImperativeHandle:Ip,useInsertionEffect:Ep,useLayoutEffect:Tp,useMemo:Pp,useReducer:Pd,useRef:vp,useState:function(){return Pd(ou)},useDebugValue:Ad,useDeferredValue:function(n){var o=ci();return bp(o,on.memoizedState,n)},useTransition:function(){var n=Pd(ou)[0],o=ci().memoizedState;return[n,o]},useMutableSource:hp,useSyncExternalStore:dp,useId:Cp,unstable_isNewReconciler:!1},cw={readContext:ui,useCallback:Sp,useContext:ui,useEffect:Cd,useImperativeHandle:Ip,useInsertionEffect:Ep,useLayoutEffect:Tp,useMemo:Pp,useReducer:bd,useRef:vp,useState:function(){return bd(ou)},useDebugValue:Ad,useDeferredValue:function(n){var o=ci();return on===null?o.memoizedState=n:bp(o,on.memoizedState,n)},useTransition:function(){var n=bd(ou)[0],o=ci().memoizedState;return[n,o]},useMutableSource:hp,useSyncExternalStore:dp,useId:Cp,unstable_isNewReconciler:!1};function xi(n,o){if(n&&n.defaultProps){o=re({},o),n=n.defaultProps;for(var u in n)o[u]===void 0&&(o[u]=n[u]);return o}return o}function kd(n,o,u,f){o=n.memoizedState,u=u(f,o),u=u==null?o:re({},o,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var Ic={isMounted:function(n){return(n=n._reactInternals)?fr(n)===n:!1},enqueueSetState:function(n,o,u){n=n._reactInternals;var f=rr(),g=Io(n),_=Ms(f,g);_.payload=o,u!=null&&(_.callback=u),o=wo(n,_,g),o!==null&&(Pi(o,n,g,f),gc(o,n,g))},enqueueReplaceState:function(n,o,u){n=n._reactInternals;var f=rr(),g=Io(n),_=Ms(f,g);_.tag=1,_.payload=o,u!=null&&(_.callback=u),o=wo(n,_,g),o!==null&&(Pi(o,n,g,f),gc(o,n,g))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var u=rr(),f=Io(n),g=Ms(u,f);g.tag=2,o!=null&&(g.callback=o),o=wo(n,g,f),o!==null&&(Pi(o,n,f,u),gc(o,n,f))}};function Np(n,o,u,f,g,_,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(f,_,S):o.prototype&&o.prototype.isPureReactComponent?!qi(u,f)||!qi(g,_):!0}function Lp(n,o,u){var f=!1,g=_o,_=o.contextType;return typeof _=="object"&&_!==null?_=ui(_):(g=wr(o)?ha:Vn.current,f=o.contextTypes,_=(f=f!=null)?Ja(n,g):_o),o=new o(u,_),n.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Ic,n.stateNode=o,o._reactInternals=n,f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=_),o}function Mp(n,o,u,f){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==n&&Ic.enqueueReplaceState(o,o.state,null)}function Rd(n,o,u,f){var g=n.stateNode;g.props=u,g.state=n.memoizedState,g.refs={},_d(n);var _=o.contextType;typeof _=="object"&&_!==null?g.context=ui(_):(_=wr(o)?ha:Vn.current,g.context=Ja(n,_)),g.state=n.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(kd(n,o,_,u),g.state=n.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&Ic.enqueueReplaceState(g,g.state,null),_c(n,u,g,f),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function al(n,o){try{var u="",f=o;do u+=Ee(f),f=f.return;while(f);var g=u}catch(_){g=`
Error generating stack: `+_.message+`
`+_.stack}return{value:n,source:o,stack:g,digest:null}}function Nd(n,o,u){return{value:n,source:null,stack:u??null,digest:o??null}}function Ld(n,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var hw=typeof WeakMap=="function"?WeakMap:Map;function Dp(n,o,u){u=Ms(-1,u),u.tag=3,u.payload={element:null};var f=o.value;return u.callback=function(){Rc||(Rc=!0,Zd=f),Ld(n,o)},u}function Op(n,o,u){u=Ms(-1,u),u.tag=3;var f=n.type.getDerivedStateFromError;if(typeof f=="function"){var g=o.value;u.payload=function(){return f(g)},u.callback=function(){Ld(n,o)}}var _=n.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(u.callback=function(){Ld(n,o),typeof f!="function"&&(To===null?To=new Set([this]):To.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})}),u}function Vp(n,o,u){var f=n.pingCache;if(f===null){f=n.pingCache=new hw;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(u)||(g.add(u),n=Sw.bind(null,n,o,u),o.then(n,n))}function zp(n){do{var o;if((o=n.tag===13)&&(o=n.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return n;n=n.return}while(n!==null);return null}function Fp(n,o,u,f,g){return(n.mode&1)===0?(n===o?n.flags|=65536:(n.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Ms(-1,1),o.tag=2,wo(u,o,1))),u.lanes|=1),n):(n.flags|=65536,n.lanes=g,n)}var dw=ge.ReactCurrentOwner,Er=!1;function nr(n,o,u,f){o.child=n===null?sp(o,null,u,f):rl(o,n.child,u,f)}function jp(n,o,u,f,g){u=u.render;var _=o.ref;return sl(o,g),f=Id(n,o,u,f,_,g),u=Sd(),n!==null&&!Er?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~g,Ds(n,o,g)):(Dt&&u&&ad(o),o.flags|=1,nr(n,o,f,g),o.child)}function Bp(n,o,u,f,g){if(n===null){var _=u.type;return typeof _=="function"&&!tf(_)&&_.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=_,Up(n,o,_,f,g)):(n=Vc(u.type,null,f,o,o.mode,g),n.ref=o.ref,n.return=o,o.child=n)}if(_=n.child,(n.lanes&g)===0){var S=_.memoizedProps;if(u=u.compare,u=u!==null?u:qi,u(S,f)&&n.ref===o.ref)return Ds(n,o,g)}return o.flags|=1,n=Po(_,f),n.ref=o.ref,n.return=o,o.child=n}function Up(n,o,u,f,g){if(n!==null){var _=n.memoizedProps;if(qi(_,f)&&n.ref===o.ref)if(Er=!1,o.pendingProps=f=_,(n.lanes&g)!==0)(n.flags&131072)!==0&&(Er=!0);else return o.lanes=n.lanes,Ds(n,o,g)}return Md(n,o,u,f,g)}function Wp(n,o,u){var f=o.pendingProps,g=f.children,_=n!==null?n.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ct(ul,zr),zr|=u;else{if((u&1073741824)===0)return n=_!==null?_.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:n,cachePool:null,transitions:null},o.updateQueue=null,Ct(ul,zr),zr|=n,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=_!==null?_.baseLanes:u,Ct(ul,zr),zr|=f}else _!==null?(f=_.baseLanes|u,o.memoizedState=null):f=u,Ct(ul,zr),zr|=f;return nr(n,o,g,u),o.child}function Hp(n,o){var u=o.ref;(n===null&&u!==null||n!==null&&n.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Md(n,o,u,f,g){var _=wr(u)?ha:Vn.current;return _=Ja(o,_),sl(o,g),u=Id(n,o,u,f,_,g),f=Sd(),n!==null&&!Er?(o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~g,Ds(n,o,g)):(Dt&&f&&ad(o),o.flags|=1,nr(n,o,u,g),o.child)}function qp(n,o,u,f,g){if(wr(u)){var _=!0;lc(o)}else _=!1;if(sl(o,g),o.stateNode===null)Pc(n,o),Lp(o,u,f),Rd(o,u,f,g),f=!0;else if(n===null){var S=o.stateNode,R=o.memoizedProps;S.props=R;var B=S.context,X=u.contextType;typeof X=="object"&&X!==null?X=ui(X):(X=wr(u)?ha:Vn.current,X=Ja(o,X));var le=u.getDerivedStateFromProps,ue=typeof le=="function"||typeof S.getSnapshotBeforeUpdate=="function";ue||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(R!==f||B!==X)&&Mp(o,S,f,X),vo=!1;var ae=o.memoizedState;S.state=ae,_c(o,f,S,g),B=o.memoizedState,R!==f||ae!==B||vr.current||vo?(typeof le=="function"&&(kd(o,u,le,f),B=o.memoizedState),(R=vo||Np(o,u,R,f,ae,B,X))?(ue||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=B),S.props=f,S.state=B,S.context=X,f=R):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{S=o.stateNode,ap(n,o),R=o.memoizedProps,X=o.type===o.elementType?R:xi(o.type,R),S.props=X,ue=o.pendingProps,ae=S.context,B=u.contextType,typeof B=="object"&&B!==null?B=ui(B):(B=wr(u)?ha:Vn.current,B=Ja(o,B));var xe=u.getDerivedStateFromProps;(le=typeof xe=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(R!==ue||ae!==B)&&Mp(o,S,f,B),vo=!1,ae=o.memoizedState,S.state=ae,_c(o,f,S,g);var ke=o.memoizedState;R!==ue||ae!==ke||vr.current||vo?(typeof xe=="function"&&(kd(o,u,xe,f),ke=o.memoizedState),(X=vo||Np(o,u,X,f,ae,ke,B)||!1)?(le||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,ke,B),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,ke,B)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||R===n.memoizedProps&&ae===n.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&ae===n.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ke),S.props=f,S.state=ke,S.context=B,f=X):(typeof S.componentDidUpdate!="function"||R===n.memoizedProps&&ae===n.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&ae===n.memoizedState||(o.flags|=1024),f=!1)}return Dd(n,o,u,f,_,g)}function Dd(n,o,u,f,g,_){Hp(n,o);var S=(o.flags&128)!==0;if(!f&&!S)return g&&Qm(o,u,!1),Ds(n,o,_);f=o.stateNode,dw.current=o;var R=S&&typeof u.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,n!==null&&S?(o.child=rl(o,n.child,null,_),o.child=rl(o,null,R,_)):nr(n,o,R,_),o.memoizedState=f.state,g&&Qm(o,u,!0),o.child}function $p(n){var o=n.stateNode;o.pendingContext?Zm(n,o.pendingContext,o.pendingContext!==o.context):o.context&&Zm(n,o.context,!1),yd(n,o.containerInfo)}function Gp(n,o,u,f,g){return nl(),hd(g),o.flags|=256,nr(n,o,u,f),o.child}var Od={dehydrated:null,treeContext:null,retryLane:0};function Vd(n){return{baseLanes:n,cachePool:null,transitions:null}}function Zp(n,o,u){var f=o.pendingProps,g=Ft.current,_=!1,S=(o.flags&128)!==0,R;if((R=S)||(R=n!==null&&n.memoizedState===null?!1:(g&2)!==0),R?(_=!0,o.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),Ct(Ft,g&1),n===null)return cd(o),n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((o.mode&1)===0?o.lanes=1:n.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(S=f.children,n=f.fallback,_?(f=o.mode,_=o.child,S={mode:"hidden",children:S},(f&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=S):_=zc(S,f,0,null),n=Ea(n,f,u,null),_.return=o,n.return=o,_.sibling=n,o.child=_,o.child.memoizedState=Vd(u),o.memoizedState=Od,n):zd(o,S));if(g=n.memoizedState,g!==null&&(R=g.dehydrated,R!==null))return fw(n,o,S,f,R,g,u);if(_){_=f.fallback,S=o.mode,g=n.child,R=g.sibling;var B={mode:"hidden",children:f.children};return(S&1)===0&&o.child!==g?(f=o.child,f.childLanes=0,f.pendingProps=B,o.deletions=null):(f=Po(g,B),f.subtreeFlags=g.subtreeFlags&14680064),R!==null?_=Po(R,_):(_=Ea(_,S,u,null),_.flags|=2),_.return=o,f.return=o,f.sibling=_,o.child=f,f=_,_=o.child,S=n.child.memoizedState,S=S===null?Vd(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},_.memoizedState=S,_.childLanes=n.childLanes&~u,o.memoizedState=Od,f}return _=n.child,n=_.sibling,f=Po(_,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=u),f.return=o,f.sibling=null,n!==null&&(u=o.deletions,u===null?(o.deletions=[n],o.flags|=16):u.push(n)),o.child=f,o.memoizedState=null,f}function zd(n,o){return o=zc({mode:"visible",children:o},n.mode,0,null),o.return=n,n.child=o}function Sc(n,o,u,f){return f!==null&&hd(f),rl(o,n.child,null,u),n=zd(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function fw(n,o,u,f,g,_,S){if(u)return o.flags&256?(o.flags&=-257,f=Nd(Error(t(422))),Sc(n,o,S,f)):o.memoizedState!==null?(o.child=n.child,o.flags|=128,null):(_=f.fallback,g=o.mode,f=zc({mode:"visible",children:f.children},g,0,null),_=Ea(_,g,S,null),_.flags|=2,f.return=o,_.return=o,f.sibling=_,o.child=f,(o.mode&1)!==0&&rl(o,n.child,null,S),o.child.memoizedState=Vd(S),o.memoizedState=Od,_);if((o.mode&1)===0)return Sc(n,o,S,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var R=f.dgst;return f=R,_=Error(t(419)),f=Nd(_,f,void 0),Sc(n,o,S,f)}if(R=(S&n.childLanes)!==0,Er||R){if(f=mn,f!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|S))!==0?0:g,g!==0&&g!==_.retryLane&&(_.retryLane=g,Ls(n,g),Pi(f,n,g,-1))}return ef(),f=Nd(Error(t(421))),Sc(n,o,S,f)}return g.data==="$?"?(o.flags|=128,o.child=n.child,o=Pw.bind(null,n),g._reactRetry=o,null):(n=_.treeContext,Vr=Zi(g.nextSibling),Or=o,Dt=!0,Ti=null,n!==null&&(ai[li++]=Rs,ai[li++]=Ns,ai[li++]=da,Rs=n.id,Ns=n.overflow,da=o),o=zd(o,f.children),o.flags|=4096,o)}function Kp(n,o,u){n.lanes|=o;var f=n.alternate;f!==null&&(f.lanes|=o),pd(n.return,o,u)}function Fd(n,o,u,f,g){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=u,_.tailMode=g)}function Qp(n,o,u){var f=o.pendingProps,g=f.revealOrder,_=f.tail;if(nr(n,o,f.children,u),f=Ft.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Kp(n,u,o);else if(n.tag===19)Kp(n,u,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}f&=1}if(Ct(Ft,f),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(u=o.child,g=null;u!==null;)n=u.alternate,n!==null&&yc(n)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),Fd(o,!1,g,u,_);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(n=g.alternate,n!==null&&yc(n)===null){o.child=g;break}n=g.sibling,g.sibling=u,u=g,g=n}Fd(o,!0,u,null,_);break;case"together":Fd(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Pc(n,o){(o.mode&1)===0&&n!==null&&(n.alternate=null,o.alternate=null,o.flags|=2)}function Ds(n,o,u){if(n!==null&&(o.dependencies=n.dependencies),_a|=o.lanes,(u&o.childLanes)===0)return null;if(n!==null&&o.child!==n.child)throw Error(t(153));if(o.child!==null){for(n=o.child,u=Po(n,n.pendingProps),o.child=u,u.return=o;n.sibling!==null;)n=n.sibling,u=u.sibling=Po(n,n.pendingProps),u.return=o;u.sibling=null}return o.child}function mw(n,o,u){switch(o.tag){case 3:$p(o),nl();break;case 5:cp(o);break;case 1:wr(o.type)&&lc(o);break;case 4:yd(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,g=o.memoizedProps.value;Ct(mc,f._currentValue),f._currentValue=g;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(Ct(Ft,Ft.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?Zp(n,o,u):(Ct(Ft,Ft.current&1),n=Ds(n,o,u),n!==null?n.sibling:null);Ct(Ft,Ft.current&1);break;case 19:if(f=(u&o.childLanes)!==0,(n.flags&128)!==0){if(f)return Qp(n,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Ct(Ft,Ft.current),f)break;return null;case 22:case 23:return o.lanes=0,Wp(n,o,u)}return Ds(n,o,u)}var Yp,jd,Xp,Jp;Yp=function(n,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)n.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},jd=function(){},Xp=function(n,o,u,f){var g=n.memoizedProps;if(g!==f){n=o.stateNode,pa(Ki.current);var _=null;switch(u){case"input":g=Br(n,g),f=Br(n,f),_=[];break;case"select":g=re({},g,{value:void 0}),f=re({},f,{value:void 0}),_=[];break;case"textarea":g=Ut(n,g),f=Ut(n,f),_=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(n.onclick=oe)}kn(u,f);var S;u=null;for(X in g)if(!f.hasOwnProperty(X)&&g.hasOwnProperty(X)&&g[X]!=null)if(X==="style"){var R=g[X];for(S in R)R.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(a.hasOwnProperty(X)?_||(_=[]):(_=_||[]).push(X,null));for(X in f){var B=f[X];if(R=g!=null?g[X]:void 0,f.hasOwnProperty(X)&&B!==R&&(B!=null||R!=null))if(X==="style")if(R){for(S in R)!R.hasOwnProperty(S)||B&&B.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in B)B.hasOwnProperty(S)&&R[S]!==B[S]&&(u||(u={}),u[S]=B[S])}else u||(_||(_=[]),_.push(X,u)),u=B;else X==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,R=R?R.__html:void 0,B!=null&&R!==B&&(_=_||[]).push(X,B)):X==="children"?typeof B!="string"&&typeof B!="number"||(_=_||[]).push(X,""+B):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(a.hasOwnProperty(X)?(B!=null&&X==="onScroll"&&xt("scroll",n),_||R===B||(_=[])):(_=_||[]).push(X,B))}u&&(_=_||[]).push("style",u);var X=_;(o.updateQueue=X)&&(o.flags|=4)}},Jp=function(n,o,u,f){u!==f&&(o.flags|=4)};function lu(n,o){if(!Dt)switch(n.tailMode){case"hidden":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:f.sibling=null}}function Fn(n){var o=n.alternate!==null&&n.alternate.child===n.child,u=0,f=0;if(o)for(var g=n.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=f,n.childLanes=u,o}function pw(n,o,u){var f=o.pendingProps;switch(ld(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fn(o),null;case 1:return wr(o.type)&&ac(),Fn(o),null;case 3:return f=o.stateNode,ol(),Nt(vr),Nt(Vn),Ed(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(n===null||n.child===null)&&(dc(o)?o.flags|=4:n===null||n.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Ti!==null&&(Yd(Ti),Ti=null))),jd(n,o),Fn(o),null;case 5:vd(o);var g=pa(ru.current);if(u=o.type,n!==null&&o.stateNode!=null)Xp(n,o,u,f,g),n.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(t(166));return Fn(o),null}if(n=pa(Ki.current),dc(o)){f=o.stateNode,u=o.type;var _=o.memoizedProps;switch(f[oi]=o,f[mo]=_,n=(o.mode&1)!==0,u){case"dialog":xt("cancel",f),xt("close",f);break;case"iframe":case"object":case"embed":xt("load",f);break;case"video":case"audio":for(g=0;g<co.length;g++)xt(co[g],f);break;case"source":xt("error",f);break;case"img":case"image":case"link":xt("error",f),xt("load",f);break;case"details":xt("toggle",f);break;case"input":ls(f,_),xt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!_.multiple},xt("invalid",f);break;case"textarea":qn(f,_),xt("invalid",f)}kn(u,_),g=null;for(var S in _)if(_.hasOwnProperty(S)){var R=_[S];S==="children"?typeof R=="string"?f.textContent!==R&&(_.suppressHydrationWarning!==!0&&Y(f.textContent,R,n),g=["children",R]):typeof R=="number"&&f.textContent!==""+R&&(_.suppressHydrationWarning!==!0&&Y(f.textContent,R,n),g=["children",""+R]):a.hasOwnProperty(S)&&R!=null&&S==="onScroll"&&xt("scroll",f)}switch(u){case"input":jr(f),br(f,_,!0);break;case"textarea":jr(f),Wr(f);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(f.onclick=oe)}f=g,o.updateQueue=f,f!==null&&(o.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=or(u)),n==="http://www.w3.org/1999/xhtml"?u==="script"?(n=S.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof f.is=="string"?n=S.createElement(u,{is:f.is}):(n=S.createElement(u),u==="select"&&(S=n,f.multiple?S.multiple=!0:f.size&&(S.size=f.size))):n=S.createElementNS(n,u),n[oi]=o,n[mo]=f,Yp(n,o,!1,!1),o.stateNode=n;e:{switch(S=ur(u,f),u){case"dialog":xt("cancel",n),xt("close",n),g=f;break;case"iframe":case"object":case"embed":xt("load",n),g=f;break;case"video":case"audio":for(g=0;g<co.length;g++)xt(co[g],n);g=f;break;case"source":xt("error",n),g=f;break;case"img":case"image":case"link":xt("error",n),xt("load",n),g=f;break;case"details":xt("toggle",n),g=f;break;case"input":ls(n,f),g=Br(n,f),xt("invalid",n);break;case"option":g=f;break;case"select":n._wrapperState={wasMultiple:!!f.multiple},g=re({},f,{value:void 0}),xt("invalid",n);break;case"textarea":qn(n,f),g=Ut(n,f),xt("invalid",n);break;default:g=f}kn(u,g),R=g;for(_ in R)if(R.hasOwnProperty(_)){var B=R[_];_==="style"?Hr(n,B):_==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,B!=null&&Li(n,B)):_==="children"?typeof B=="string"?(u!=="textarea"||B!=="")&&vn(n,B):typeof B=="number"&&vn(n,""+B):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(a.hasOwnProperty(_)?B!=null&&_==="onScroll"&&xt("scroll",n):B!=null&&ve(n,_,B,S))}switch(u){case"input":jr(n),br(n,f,!1);break;case"textarea":jr(n),Wr(n);break;case"option":f.value!=null&&n.setAttribute("value",""+Ue(f.value));break;case"select":n.multiple=!!f.multiple,_=f.value,_!=null?yn(n,!!f.multiple,_,!1):f.defaultValue!=null&&yn(n,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=oe)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Fn(o),null;case 6:if(n&&o.stateNode!=null)Jp(n,o,n.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(t(166));if(u=pa(ru.current),pa(Ki.current),dc(o)){if(f=o.stateNode,u=o.memoizedProps,f[oi]=o,(_=f.nodeValue!==u)&&(n=Or,n!==null))switch(n.tag){case 3:Y(f.nodeValue,u,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Y(f.nodeValue,u,(n.mode&1)!==0)}_&&(o.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[oi]=o,o.stateNode=f}return Fn(o),null;case 13:if(Nt(Ft),f=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Dt&&Vr!==null&&(o.mode&1)!==0&&(o.flags&128)===0)np(),nl(),o.flags|=98560,_=!1;else if(_=dc(o),f!==null&&f.dehydrated!==null){if(n===null){if(!_)throw Error(t(318));if(_=o.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[oi]=o}else nl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Fn(o),_=!1}else Ti!==null&&(Yd(Ti),Ti=null),_=!0;if(!_)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(f=f!==null,f!==(n!==null&&n.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(n===null||(Ft.current&1)!==0?an===0&&(an=3):ef())),o.updateQueue!==null&&(o.flags|=4),Fn(o),null);case 4:return ol(),jd(n,o),n===null&&ho(o.stateNode.containerInfo),Fn(o),null;case 10:return md(o.type._context),Fn(o),null;case 17:return wr(o.type)&&ac(),Fn(o),null;case 19:if(Nt(Ft),_=o.memoizedState,_===null)return Fn(o),null;if(f=(o.flags&128)!==0,S=_.rendering,S===null)if(f)lu(_,!1);else{if(an!==0||n!==null&&(n.flags&128)!==0)for(n=o.child;n!==null;){if(S=yc(n),S!==null){for(o.flags|=128,lu(_,!1),f=S.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=u,u=o.child;u!==null;)_=u,n=f,_.flags&=14680066,S=_.alternate,S===null?(_.childLanes=0,_.lanes=n,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=S.childLanes,_.lanes=S.lanes,_.child=S.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=S.memoizedProps,_.memoizedState=S.memoizedState,_.updateQueue=S.updateQueue,_.type=S.type,n=S.dependencies,_.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),u=u.sibling;return Ct(Ft,Ft.current&1|2),o.child}n=n.sibling}_.tail!==null&&It()>cl&&(o.flags|=128,f=!0,lu(_,!1),o.lanes=4194304)}else{if(!f)if(n=yc(S),n!==null){if(o.flags|=128,f=!0,u=n.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),lu(_,!0),_.tail===null&&_.tailMode==="hidden"&&!S.alternate&&!Dt)return Fn(o),null}else 2*It()-_.renderingStartTime>cl&&u!==1073741824&&(o.flags|=128,f=!0,lu(_,!1),o.lanes=4194304);_.isBackwards?(S.sibling=o.child,o.child=S):(u=_.last,u!==null?u.sibling=S:o.child=S,_.last=S)}return _.tail!==null?(o=_.tail,_.rendering=o,_.tail=o.sibling,_.renderingStartTime=It(),o.sibling=null,u=Ft.current,Ct(Ft,f?u&1|2:u&1),o):(Fn(o),null);case 22:case 23:return Jd(),f=o.memoizedState!==null,n!==null&&n.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(zr&1073741824)!==0&&(Fn(o),o.subtreeFlags&6&&(o.flags|=8192)):Fn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function gw(n,o){switch(ld(o),o.tag){case 1:return wr(o.type)&&ac(),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return ol(),Nt(vr),Nt(Vn),Ed(),n=o.flags,(n&65536)!==0&&(n&128)===0?(o.flags=n&-65537|128,o):null;case 5:return vd(o),null;case 13:if(Nt(Ft),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(t(340));nl()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return Nt(Ft),null;case 4:return ol(),null;case 10:return md(o.type._context),null;case 22:case 23:return Jd(),null;case 24:return null;default:return null}}var bc=!1,jn=!1,_w=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function ll(n,o){var u=n.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){qt(n,o,f)}else u.current=null}function Bd(n,o,u){try{u()}catch(f){qt(n,o,f)}}var eg=!1;function yw(n,o){if(we=Yr,n=ql(),$l(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var S=0,R=-1,B=-1,X=0,le=0,ue=n,ae=null;t:for(;;){for(var xe;ue!==u||g!==0&&ue.nodeType!==3||(R=S+g),ue!==_||f!==0&&ue.nodeType!==3||(B=S+f),ue.nodeType===3&&(S+=ue.nodeValue.length),(xe=ue.firstChild)!==null;)ae=ue,ue=xe;for(;;){if(ue===n)break t;if(ae===u&&++X===g&&(R=S),ae===_&&++le===f&&(B=S),(xe=ue.nextSibling)!==null)break;ue=ae,ae=ue.parentNode}ue=xe}u=R===-1||B===-1?null:{start:R,end:B}}else u=null}u=u||{start:0,end:0}}else u=null;for(De={focusedElem:n,selectionRange:u},Yr=!1,Ce=o;Ce!==null;)if(o=Ce,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,Ce=n;else for(;Ce!==null;){o=Ce;try{var ke=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ke!==null){var Re=ke.memoizedProps,Gt=ke.memoizedState,G=o.stateNode,W=G.getSnapshotBeforeUpdate(o.elementType===o.type?Re:xi(o.type,Re),Gt);G.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var Z=o.stateNode.containerInfo;Z.nodeType===1?Z.textContent="":Z.nodeType===9&&Z.documentElement&&Z.removeChild(Z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(he){qt(o,o.return,he)}if(n=o.sibling,n!==null){n.return=o.return,Ce=n;break}Ce=o.return}return ke=eg,eg=!1,ke}function uu(n,o,u){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&n)===n){var _=g.destroy;g.destroy=void 0,_!==void 0&&Bd(o,u,_)}g=g.next}while(g!==f)}}function Cc(n,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&n)===n){var f=u.create;u.destroy=f()}u=u.next}while(u!==o)}}function Ud(n){var o=n.ref;if(o!==null){var u=n.stateNode;switch(n.tag){case 5:n=u;break;default:n=u}typeof o=="function"?o(n):o.current=n}}function tg(n){var o=n.alternate;o!==null&&(n.alternate=null,tg(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&(delete o[oi],delete o[mo],delete o[po],delete o[rd],delete o[id])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function ng(n){return n.tag===5||n.tag===3||n.tag===4}function rg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ng(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Wd(n,o,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(n,o):u.insertBefore(n,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(n,u)):(o=u,o.appendChild(n)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=oe));else if(f!==4&&(n=n.child,n!==null))for(Wd(n,o,u),n=n.sibling;n!==null;)Wd(n,o,u),n=n.sibling}function Hd(n,o,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,o?u.insertBefore(n,o):u.appendChild(n);else if(f!==4&&(n=n.child,n!==null))for(Hd(n,o,u),n=n.sibling;n!==null;)Hd(n,o,u),n=n.sibling}var Sn=null,Ii=!1;function Eo(n,o,u){for(u=u.child;u!==null;)ig(n,o,u),u=u.sibling}function ig(n,o,u){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(Oi,u)}catch{}switch(u.tag){case 5:jn||ll(u,o);case 6:var f=Sn,g=Ii;Sn=null,Eo(n,o,u),Sn=f,Ii=g,Sn!==null&&(Ii?(n=Sn,u=u.stateNode,n.nodeType===8?n.parentNode.removeChild(u):n.removeChild(u)):Sn.removeChild(u.stateNode));break;case 18:Sn!==null&&(Ii?(n=Sn,u=u.stateNode,n.nodeType===8?Jl(n.parentNode,u):n.nodeType===1&&Jl(n,u),Ln(n)):Jl(Sn,u.stateNode));break;case 4:f=Sn,g=Ii,Sn=u.stateNode.containerInfo,Ii=!0,Eo(n,o,u),Sn=f,Ii=g;break;case 0:case 11:case 14:case 15:if(!jn&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var _=g,S=_.destroy;_=_.tag,S!==void 0&&((_&2)!==0||(_&4)!==0)&&Bd(u,o,S),g=g.next}while(g!==f)}Eo(n,o,u);break;case 1:if(!jn&&(ll(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(R){qt(u,o,R)}Eo(n,o,u);break;case 21:Eo(n,o,u);break;case 22:u.mode&1?(jn=(f=jn)||u.memoizedState!==null,Eo(n,o,u),jn=f):Eo(n,o,u);break;default:Eo(n,o,u)}}function sg(n){var o=n.updateQueue;if(o!==null){n.updateQueue=null;var u=n.stateNode;u===null&&(u=n.stateNode=new _w),o.forEach(function(f){var g=bw.bind(null,n,f);u.has(f)||(u.add(f),f.then(g,g))})}}function Si(n,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var _=n,S=o,R=S;e:for(;R!==null;){switch(R.tag){case 5:Sn=R.stateNode,Ii=!1;break e;case 3:Sn=R.stateNode.containerInfo,Ii=!0;break e;case 4:Sn=R.stateNode.containerInfo,Ii=!0;break e}R=R.return}if(Sn===null)throw Error(t(160));ig(_,S,g),Sn=null,Ii=!1;var B=g.alternate;B!==null&&(B.return=null),g.return=null}catch(X){qt(g,o,X)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)og(o,n),o=o.sibling}function og(n,o){var u=n.alternate,f=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Si(o,n),Yi(n),f&4){try{uu(3,n,n.return),Cc(3,n)}catch(Re){qt(n,n.return,Re)}try{uu(5,n,n.return)}catch(Re){qt(n,n.return,Re)}}break;case 1:Si(o,n),Yi(n),f&512&&u!==null&&ll(u,u.return);break;case 5:if(Si(o,n),Yi(n),f&512&&u!==null&&ll(u,u.return),n.flags&32){var g=n.stateNode;try{vn(g,"")}catch(Re){qt(n,n.return,Re)}}if(f&4&&(g=n.stateNode,g!=null)){var _=n.memoizedProps,S=u!==null?u.memoizedProps:_,R=n.type,B=n.updateQueue;if(n.updateQueue=null,B!==null)try{R==="input"&&_.type==="radio"&&_.name!=null&&Ur(g,_),ur(R,S);var X=ur(R,_);for(S=0;S<B.length;S+=2){var le=B[S],ue=B[S+1];le==="style"?Hr(g,ue):le==="dangerouslySetInnerHTML"?Li(g,ue):le==="children"?vn(g,ue):ve(g,le,ue,X)}switch(R){case"input":_n(g,_);break;case"textarea":$s(g,_);break;case"select":var ae=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!_.multiple;var xe=_.value;xe!=null?yn(g,!!_.multiple,xe,!1):ae!==!!_.multiple&&(_.defaultValue!=null?yn(g,!!_.multiple,_.defaultValue,!0):yn(g,!!_.multiple,_.multiple?[]:"",!1))}g[mo]=_}catch(Re){qt(n,n.return,Re)}}break;case 6:if(Si(o,n),Yi(n),f&4){if(n.stateNode===null)throw Error(t(162));g=n.stateNode,_=n.memoizedProps;try{g.nodeValue=_}catch(Re){qt(n,n.return,Re)}}break;case 3:if(Si(o,n),Yi(n),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Ln(o.containerInfo)}catch(Re){qt(n,n.return,Re)}break;case 4:Si(o,n),Yi(n);break;case 13:Si(o,n),Yi(n),g=n.child,g.flags&8192&&(_=g.memoizedState!==null,g.stateNode.isHidden=_,!_||g.alternate!==null&&g.alternate.memoizedState!==null||(Gd=It())),f&4&&sg(n);break;case 22:if(le=u!==null&&u.memoizedState!==null,n.mode&1?(jn=(X=jn)||le,Si(o,n),jn=X):Si(o,n),Yi(n),f&8192){if(X=n.memoizedState!==null,(n.stateNode.isHidden=X)&&!le&&(n.mode&1)!==0)for(Ce=n,le=n.child;le!==null;){for(ue=Ce=le;Ce!==null;){switch(ae=Ce,xe=ae.child,ae.tag){case 0:case 11:case 14:case 15:uu(4,ae,ae.return);break;case 1:ll(ae,ae.return);var ke=ae.stateNode;if(typeof ke.componentWillUnmount=="function"){f=ae,u=ae.return;try{o=f,ke.props=o.memoizedProps,ke.state=o.memoizedState,ke.componentWillUnmount()}catch(Re){qt(f,u,Re)}}break;case 5:ll(ae,ae.return);break;case 22:if(ae.memoizedState!==null){ug(ue);continue}}xe!==null?(xe.return=ae,Ce=xe):ug(ue)}le=le.sibling}e:for(le=null,ue=n;;){if(ue.tag===5){if(le===null){le=ue;try{g=ue.stateNode,X?(_=g.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(R=ue.stateNode,B=ue.memoizedProps.style,S=B!=null&&B.hasOwnProperty("display")?B.display:null,R.style.display=Ar("display",S))}catch(Re){qt(n,n.return,Re)}}}else if(ue.tag===6){if(le===null)try{ue.stateNode.nodeValue=X?"":ue.memoizedProps}catch(Re){qt(n,n.return,Re)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===n)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===n)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===n)break e;le===ue&&(le=null),ue=ue.return}le===ue&&(le=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:Si(o,n),Yi(n),f&4&&sg(n);break;case 21:break;default:Si(o,n),Yi(n)}}function Yi(n){var o=n.flags;if(o&2){try{e:{for(var u=n.return;u!==null;){if(ng(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(vn(g,""),f.flags&=-33);var _=rg(n);Hd(n,_,g);break;case 3:case 4:var S=f.stateNode.containerInfo,R=rg(n);Wd(n,R,S);break;default:throw Error(t(161))}}catch(B){qt(n,n.return,B)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function vw(n,o,u){Ce=n,ag(n)}function ag(n,o,u){for(var f=(n.mode&1)!==0;Ce!==null;){var g=Ce,_=g.child;if(g.tag===22&&f){var S=g.memoizedState!==null||bc;if(!S){var R=g.alternate,B=R!==null&&R.memoizedState!==null||jn;R=bc;var X=jn;if(bc=S,(jn=B)&&!X)for(Ce=g;Ce!==null;)S=Ce,B=S.child,S.tag===22&&S.memoizedState!==null?cg(g):B!==null?(B.return=S,Ce=B):cg(g);for(;_!==null;)Ce=_,ag(_),_=_.sibling;Ce=g,bc=R,jn=X}lg(n)}else(g.subtreeFlags&8772)!==0&&_!==null?(_.return=g,Ce=_):lg(n)}}function lg(n){for(;Ce!==null;){var o=Ce;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:jn||Cc(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!jn)if(u===null)f.componentDidMount();else{var g=o.elementType===o.type?u.memoizedProps:xi(o.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var _=o.updateQueue;_!==null&&up(o,_,f);break;case 3:var S=o.updateQueue;if(S!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}up(o,S,u)}break;case 5:var R=o.stateNode;if(u===null&&o.flags&4){u=R;var B=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":B.autoFocus&&u.focus();break;case"img":B.src&&(u.src=B.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var X=o.alternate;if(X!==null){var le=X.memoizedState;if(le!==null){var ue=le.dehydrated;ue!==null&&Ln(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}jn||o.flags&512&&Ud(o)}catch(ae){qt(o,o.return,ae)}}if(o===n){Ce=null;break}if(u=o.sibling,u!==null){u.return=o.return,Ce=u;break}Ce=o.return}}function ug(n){for(;Ce!==null;){var o=Ce;if(o===n){Ce=null;break}var u=o.sibling;if(u!==null){u.return=o.return,Ce=u;break}Ce=o.return}}function cg(n){for(;Ce!==null;){var o=Ce;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Cc(4,o)}catch(B){qt(o,u,B)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var g=o.return;try{f.componentDidMount()}catch(B){qt(o,g,B)}}var _=o.return;try{Ud(o)}catch(B){qt(o,_,B)}break;case 5:var S=o.return;try{Ud(o)}catch(B){qt(o,S,B)}}}catch(B){qt(o,o.return,B)}if(o===n){Ce=null;break}var R=o.sibling;if(R!==null){R.return=o.return,Ce=R;break}Ce=o.return}}var ww=Math.ceil,Ac=ge.ReactCurrentDispatcher,qd=ge.ReactCurrentOwner,hi=ge.ReactCurrentBatchConfig,dt=0,mn=null,Xt=null,Pn=0,zr=0,ul=go(0),an=0,cu=null,_a=0,kc=0,$d=0,hu=null,Tr=null,Gd=0,cl=1/0,Os=null,Rc=!1,Zd=null,To=null,Nc=!1,xo=null,Lc=0,du=0,Kd=null,Mc=-1,Dc=0;function rr(){return(dt&6)!==0?It():Mc!==-1?Mc:Mc=It()}function Io(n){return(n.mode&1)===0?1:(dt&2)!==0&&Pn!==0?Pn&-Pn:rw.transition!==null?(Dc===0&&(Dc=Jo()),Dc):(n=Je,n!==0||(n=window.event,n=n===void 0?16:et(n.type)),n)}function Pi(n,o,u,f){if(50<du)throw du=0,Kd=null,Error(t(185));Zn(n,u,f),((dt&2)===0||n!==mn)&&(n===mn&&((dt&2)===0&&(kc|=u),an===4&&So(n,Pn)),xr(n,f),u===1&&dt===0&&(o.mode&1)===0&&(cl=It()+500,uc&&yo()))}function xr(n,o){var u=n.callbackNode;Zr(n,o);var f=gt(n,n===mn?Pn:0);if(f===0)u!==null&&hs(u),n.callbackNode=null,n.callbackPriority=0;else if(o=f&-f,n.callbackPriority!==o){if(u!=null&&hs(u),o===1)n.tag===0?nw(dg.bind(null,n)):Ym(dg.bind(null,n)),On(function(){(dt&6)===0&&yo()}),u=null;else{switch(Nn(f)){case 1:u=Gs;break;case 4:u=Xo;break;case 16:u=fs;break;case 536870912:u=$r;break;default:u=fs}u=wg(u,hg.bind(null,n))}n.callbackPriority=o,n.callbackNode=u}}function hg(n,o){if(Mc=-1,Dc=0,(dt&6)!==0)throw Error(t(327));var u=n.callbackNode;if(hl()&&n.callbackNode!==u)return null;var f=gt(n,n===mn?Pn:0);if(f===0)return null;if((f&30)!==0||(f&n.expiredLanes)!==0||o)o=Oc(n,f);else{o=f;var g=dt;dt|=2;var _=mg();(mn!==n||Pn!==o)&&(Os=null,cl=It()+500,va(n,o));do try{xw();break}catch(R){fg(n,R)}while(!0);fd(),Ac.current=_,dt=g,Xt!==null?o=0:(mn=null,Pn=0,o=an)}if(o!==0){if(o===2&&(g=hn(n),g!==0&&(f=g,o=Qd(n,g))),o===1)throw u=cu,va(n,0),So(n,f),xr(n,It()),u;if(o===6)So(n,f);else{if(g=n.current.alternate,(f&30)===0&&!Ew(g)&&(o=Oc(n,f),o===2&&(_=hn(n),_!==0&&(f=_,o=Qd(n,_))),o===1))throw u=cu,va(n,0),So(n,f),xr(n,It()),u;switch(n.finishedWork=g,n.finishedLanes=f,o){case 0:case 1:throw Error(t(345));case 2:wa(n,Tr,Os);break;case 3:if(So(n,f),(f&130023424)===f&&(o=Gd+500-It(),10<o)){if(gt(n,0)!==0)break;if(g=n.suspendedLanes,(g&f)!==f){rr(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=sn(wa.bind(null,n,Tr,Os),o);break}wa(n,Tr,Os);break;case 4:if(So(n,f),(f&4194240)===f)break;for(o=n.eventTimes,g=-1;0<f;){var S=31-Ze(f);_=1<<S,S=o[S],S>g&&(g=S),f&=~_}if(f=g,f=It()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*ww(f/1960))-f,10<f){n.timeoutHandle=sn(wa.bind(null,n,Tr,Os),f);break}wa(n,Tr,Os);break;case 5:wa(n,Tr,Os);break;default:throw Error(t(329))}}}return xr(n,It()),n.callbackNode===u?hg.bind(null,n):null}function Qd(n,o){var u=hu;return n.current.memoizedState.isDehydrated&&(va(n,o).flags|=256),n=Oc(n,o),n!==2&&(o=Tr,Tr=u,o!==null&&Yd(o)),n}function Yd(n){Tr===null?Tr=n:Tr.push.apply(Tr,n)}function Ew(n){for(var o=n;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],_=g.getSnapshot;g=g.value;try{if(!Mr(_(),g))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function So(n,o){for(o&=~$d,o&=~kc,n.suspendedLanes|=o,n.pingedLanes&=~o,n=n.expirationTimes;0<o;){var u=31-Ze(o),f=1<<u;n[u]=-1,o&=~f}}function dg(n){if((dt&6)!==0)throw Error(t(327));hl();var o=gt(n,0);if((o&1)===0)return xr(n,It()),null;var u=Oc(n,o);if(n.tag!==0&&u===2){var f=hn(n);f!==0&&(o=f,u=Qd(n,f))}if(u===1)throw u=cu,va(n,0),So(n,o),xr(n,It()),u;if(u===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=o,wa(n,Tr,Os),xr(n,It()),null}function Xd(n,o){var u=dt;dt|=1;try{return n(o)}finally{dt=u,dt===0&&(cl=It()+500,uc&&yo())}}function ya(n){xo!==null&&xo.tag===0&&(dt&6)===0&&hl();var o=dt;dt|=1;var u=hi.transition,f=Je;try{if(hi.transition=null,Je=1,n)return n()}finally{Je=f,hi.transition=u,dt=o,(dt&6)===0&&yo()}}function Jd(){zr=ul.current,Nt(ul)}function va(n,o){n.finishedWork=null,n.finishedLanes=0;var u=n.timeoutHandle;if(u!==-1&&(n.timeoutHandle=-1,Yt(u)),Xt!==null)for(u=Xt.return;u!==null;){var f=u;switch(ld(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&ac();break;case 3:ol(),Nt(vr),Nt(Vn),Ed();break;case 5:vd(f);break;case 4:ol();break;case 13:Nt(Ft);break;case 19:Nt(Ft);break;case 10:md(f.type._context);break;case 22:case 23:Jd()}u=u.return}if(mn=n,Xt=n=Po(n.current,null),Pn=zr=o,an=0,cu=null,$d=kc=_a=0,Tr=hu=null,ma!==null){for(o=0;o<ma.length;o++)if(u=ma[o],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,_=u.pending;if(_!==null){var S=_.next;_.next=g,f.next=S}u.pending=f}ma=null}return n}function fg(n,o){do{var u=Xt;try{if(fd(),vc.current=xc,wc){for(var f=jt.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}wc=!1}if(ga=0,fn=on=jt=null,iu=!1,su=0,qd.current=null,u===null||u.return===null){an=1,cu=o,Xt=null;break}e:{var _=n,S=u.return,R=u,B=o;if(o=Pn,R.flags|=32768,B!==null&&typeof B=="object"&&typeof B.then=="function"){var X=B,le=R,ue=le.tag;if((le.mode&1)===0&&(ue===0||ue===11||ue===15)){var ae=le.alternate;ae?(le.updateQueue=ae.updateQueue,le.memoizedState=ae.memoizedState,le.lanes=ae.lanes):(le.updateQueue=null,le.memoizedState=null)}var xe=zp(S);if(xe!==null){xe.flags&=-257,Fp(xe,S,R,_,o),xe.mode&1&&Vp(_,X,o),o=xe,B=X;var ke=o.updateQueue;if(ke===null){var Re=new Set;Re.add(B),o.updateQueue=Re}else ke.add(B);break e}else{if((o&1)===0){Vp(_,X,o),ef();break e}B=Error(t(426))}}else if(Dt&&R.mode&1){var Gt=zp(S);if(Gt!==null){(Gt.flags&65536)===0&&(Gt.flags|=256),Fp(Gt,S,R,_,o),hd(al(B,R));break e}}_=B=al(B,R),an!==4&&(an=2),hu===null?hu=[_]:hu.push(_),_=S;do{switch(_.tag){case 3:_.flags|=65536,o&=-o,_.lanes|=o;var G=Dp(_,B,o);lp(_,G);break e;case 1:R=B;var W=_.type,Z=_.stateNode;if((_.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(To===null||!To.has(Z)))){_.flags|=65536,o&=-o,_.lanes|=o;var he=Op(_,R,o);lp(_,he);break e}}_=_.return}while(_!==null)}gg(u)}catch(Ne){o=Ne,Xt===u&&u!==null&&(Xt=u=u.return);continue}break}while(!0)}function mg(){var n=Ac.current;return Ac.current=xc,n===null?xc:n}function ef(){(an===0||an===3||an===2)&&(an=4),mn===null||(_a&268435455)===0&&(kc&268435455)===0||So(mn,Pn)}function Oc(n,o){var u=dt;dt|=2;var f=mg();(mn!==n||Pn!==o)&&(Os=null,va(n,o));do try{Tw();break}catch(g){fg(n,g)}while(!0);if(fd(),dt=u,Ac.current=f,Xt!==null)throw Error(t(261));return mn=null,Pn=0,an}function Tw(){for(;Xt!==null;)pg(Xt)}function xw(){for(;Xt!==null&&!ds();)pg(Xt)}function pg(n){var o=vg(n.alternate,n,zr);n.memoizedProps=n.pendingProps,o===null?gg(n):Xt=o,qd.current=null}function gg(n){var o=n;do{var u=o.alternate;if(n=o.return,(o.flags&32768)===0){if(u=pw(u,o,zr),u!==null){Xt=u;return}}else{if(u=gw(u,o),u!==null){u.flags&=32767,Xt=u;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{an=6,Xt=null;return}}if(o=o.sibling,o!==null){Xt=o;return}Xt=o=n}while(o!==null);an===0&&(an=5)}function wa(n,o,u){var f=Je,g=hi.transition;try{hi.transition=null,Je=1,Iw(n,o,u,f)}finally{hi.transition=g,Je=f}return null}function Iw(n,o,u,f){do hl();while(xo!==null);if((dt&6)!==0)throw Error(t(327));u=n.finishedWork;var g=n.finishedLanes;if(u===null)return null;if(n.finishedWork=null,n.finishedLanes=0,u===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var _=u.lanes|u.childLanes;if(Lt(n,_),n===mn&&(Xt=mn=null,Pn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Nc||(Nc=!0,wg(fs,function(){return hl(),null})),_=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||_){_=hi.transition,hi.transition=null;var S=Je;Je=1;var R=dt;dt|=4,qd.current=null,yw(n,u),og(u,n),ii(De),Yr=!!we,De=we=null,n.current=u,vw(u),mr(),dt=R,Je=S,hi.transition=_}else n.current=u;if(Nc&&(Nc=!1,xo=n,Lc=g),_=n.pendingLanes,_===0&&(To=null),Vi(u.stateNode),xr(n,It()),o!==null)for(f=n.onRecoverableError,u=0;u<o.length;u++)g=o[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(Rc)throw Rc=!1,n=Zd,Zd=null,n;return(Lc&1)!==0&&n.tag!==0&&hl(),_=n.pendingLanes,(_&1)!==0?n===Kd?du++:(du=0,Kd=n):du=0,yo(),null}function hl(){if(xo!==null){var n=Nn(Lc),o=hi.transition,u=Je;try{if(hi.transition=null,Je=16>n?16:n,xo===null)var f=!1;else{if(n=xo,xo=null,Lc=0,(dt&6)!==0)throw Error(t(331));var g=dt;for(dt|=4,Ce=n.current;Ce!==null;){var _=Ce,S=_.child;if((Ce.flags&16)!==0){var R=_.deletions;if(R!==null){for(var B=0;B<R.length;B++){var X=R[B];for(Ce=X;Ce!==null;){var le=Ce;switch(le.tag){case 0:case 11:case 15:uu(8,le,_)}var ue=le.child;if(ue!==null)ue.return=le,Ce=ue;else for(;Ce!==null;){le=Ce;var ae=le.sibling,xe=le.return;if(tg(le),le===X){Ce=null;break}if(ae!==null){ae.return=xe,Ce=ae;break}Ce=xe}}}var ke=_.alternate;if(ke!==null){var Re=ke.child;if(Re!==null){ke.child=null;do{var Gt=Re.sibling;Re.sibling=null,Re=Gt}while(Re!==null)}}Ce=_}}if((_.subtreeFlags&2064)!==0&&S!==null)S.return=_,Ce=S;else e:for(;Ce!==null;){if(_=Ce,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:uu(9,_,_.return)}var G=_.sibling;if(G!==null){G.return=_.return,Ce=G;break e}Ce=_.return}}var W=n.current;for(Ce=W;Ce!==null;){S=Ce;var Z=S.child;if((S.subtreeFlags&2064)!==0&&Z!==null)Z.return=S,Ce=Z;else e:for(S=W;Ce!==null;){if(R=Ce,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:Cc(9,R)}}catch(Ne){qt(R,R.return,Ne)}if(R===S){Ce=null;break e}var he=R.sibling;if(he!==null){he.return=R.return,Ce=he;break e}Ce=R.return}}if(dt=g,yo(),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(Oi,n)}catch{}f=!0}return f}finally{Je=u,hi.transition=o}}return!1}function _g(n,o,u){o=al(u,o),o=Dp(n,o,1),n=wo(n,o,1),o=rr(),n!==null&&(Zn(n,1,o),xr(n,o))}function qt(n,o,u){if(n.tag===3)_g(n,n,u);else for(;o!==null;){if(o.tag===3){_g(o,n,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(To===null||!To.has(f))){n=al(u,n),n=Op(o,n,1),o=wo(o,n,1),n=rr(),o!==null&&(Zn(o,1,n),xr(o,n));break}}o=o.return}}function Sw(n,o,u){var f=n.pingCache;f!==null&&f.delete(o),o=rr(),n.pingedLanes|=n.suspendedLanes&u,mn===n&&(Pn&u)===u&&(an===4||an===3&&(Pn&130023424)===Pn&&500>It()-Gd?va(n,0):$d|=u),xr(n,o)}function yg(n,o){o===0&&((n.mode&1)===0?o=1:(o=Gr,Gr<<=1,(Gr&130023424)===0&&(Gr=4194304)));var u=rr();n=Ls(n,o),n!==null&&(Zn(n,o,u),xr(n,u))}function Pw(n){var o=n.memoizedState,u=0;o!==null&&(u=o.retryLane),yg(n,u)}function bw(n,o){var u=0;switch(n.tag){case 13:var f=n.stateNode,g=n.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=n.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(o),yg(n,u)}var vg;vg=function(n,o,u){if(n!==null)if(n.memoizedProps!==o.pendingProps||vr.current)Er=!0;else{if((n.lanes&u)===0&&(o.flags&128)===0)return Er=!1,mw(n,o,u);Er=(n.flags&131072)!==0}else Er=!1,Dt&&(o.flags&1048576)!==0&&Xm(o,hc,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;Pc(n,o),n=o.pendingProps;var g=Ja(o,Vn.current);sl(o,u),g=Id(null,o,f,n,g,u);var _=Sd();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,wr(f)?(_=!0,lc(o)):_=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,_d(o),g.updater=Ic,o.stateNode=g,g._reactInternals=o,Rd(o,f,n,u),o=Dd(null,o,f,!0,_,u)):(o.tag=0,Dt&&_&&ad(o),nr(null,o,g,u),o=o.child),o;case 16:f=o.elementType;e:{switch(Pc(n,o),n=o.pendingProps,g=f._init,f=g(f._payload),o.type=f,g=o.tag=Aw(f),n=xi(f,n),g){case 0:o=Md(null,o,f,n,u);break e;case 1:o=qp(null,o,f,n,u);break e;case 11:o=jp(null,o,f,n,u);break e;case 14:o=Bp(null,o,f,xi(f.type,n),u);break e}throw Error(t(306,f,""))}return o;case 0:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:xi(f,g),Md(n,o,f,g,u);case 1:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:xi(f,g),qp(n,o,f,g,u);case 3:e:{if($p(o),n===null)throw Error(t(387));f=o.pendingProps,_=o.memoizedState,g=_.element,ap(n,o),_c(o,f,null,u);var S=o.memoizedState;if(f=S.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){g=al(Error(t(423)),o),o=Gp(n,o,f,u,g);break e}else if(f!==g){g=al(Error(t(424)),o),o=Gp(n,o,f,u,g);break e}else for(Vr=Zi(o.stateNode.containerInfo.firstChild),Or=o,Dt=!0,Ti=null,u=sp(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(nl(),f===g){o=Ds(n,o,u);break e}nr(n,o,f,u)}o=o.child}return o;case 5:return cp(o),n===null&&cd(o),f=o.type,g=o.pendingProps,_=n!==null?n.memoizedProps:null,S=g.children,Xe(f,g)?S=null:_!==null&&Xe(f,_)&&(o.flags|=32),Hp(n,o),nr(n,o,S,u),o.child;case 6:return n===null&&cd(o),null;case 13:return Zp(n,o,u);case 4:return yd(o,o.stateNode.containerInfo),f=o.pendingProps,n===null?o.child=rl(o,null,f,u):nr(n,o,f,u),o.child;case 11:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:xi(f,g),jp(n,o,f,g,u);case 7:return nr(n,o,o.pendingProps,u),o.child;case 8:return nr(n,o,o.pendingProps.children,u),o.child;case 12:return nr(n,o,o.pendingProps.children,u),o.child;case 10:e:{if(f=o.type._context,g=o.pendingProps,_=o.memoizedProps,S=g.value,Ct(mc,f._currentValue),f._currentValue=S,_!==null)if(Mr(_.value,S)){if(_.children===g.children&&!vr.current){o=Ds(n,o,u);break e}}else for(_=o.child,_!==null&&(_.return=o);_!==null;){var R=_.dependencies;if(R!==null){S=_.child;for(var B=R.firstContext;B!==null;){if(B.context===f){if(_.tag===1){B=Ms(-1,u&-u),B.tag=2;var X=_.updateQueue;if(X!==null){X=X.shared;var le=X.pending;le===null?B.next=B:(B.next=le.next,le.next=B),X.pending=B}}_.lanes|=u,B=_.alternate,B!==null&&(B.lanes|=u),pd(_.return,u,o),R.lanes|=u;break}B=B.next}}else if(_.tag===10)S=_.type===o.type?null:_.child;else if(_.tag===18){if(S=_.return,S===null)throw Error(t(341));S.lanes|=u,R=S.alternate,R!==null&&(R.lanes|=u),pd(S,u,o),S=_.sibling}else S=_.child;if(S!==null)S.return=_;else for(S=_;S!==null;){if(S===o){S=null;break}if(_=S.sibling,_!==null){_.return=S.return,S=_;break}S=S.return}_=S}nr(n,o,g.children,u),o=o.child}return o;case 9:return g=o.type,f=o.pendingProps.children,sl(o,u),g=ui(g),f=f(g),o.flags|=1,nr(n,o,f,u),o.child;case 14:return f=o.type,g=xi(f,o.pendingProps),g=xi(f.type,g),Bp(n,o,f,g,u);case 15:return Up(n,o,o.type,o.pendingProps,u);case 17:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:xi(f,g),Pc(n,o),o.tag=1,wr(f)?(n=!0,lc(o)):n=!1,sl(o,u),Lp(o,f,g),Rd(o,f,g,u),Dd(null,o,f,!0,n,u);case 19:return Qp(n,o,u);case 22:return Wp(n,o,u)}throw Error(t(156,o.tag))};function wg(n,o){return Yo(n,o)}function Cw(n,o,u,f){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(n,o,u,f){return new Cw(n,o,u,f)}function tf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Aw(n){if(typeof n=="function")return tf(n)?1:0;if(n!=null){if(n=n.$$typeof,n===j)return 11;if(n===at)return 14}return 2}function Po(n,o){var u=n.alternate;return u===null?(u=di(n.tag,o,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=o,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&14680064,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,o=n.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u}function Vc(n,o,u,f,g,_){var S=2;if(f=n,typeof n=="function")tf(n)&&(S=1);else if(typeof n=="string")S=5;else e:switch(n){case F:return Ea(u.children,g,_,o);case A:S=8,g|=8;break;case O:return n=di(12,u,o,g|2),n.elementType=O,n.lanes=_,n;case k:return n=di(13,u,o,g),n.elementType=k,n.lanes=_,n;case $e:return n=di(19,u,o,g),n.elementType=$e,n.lanes=_,n;case Ye:return zc(u,g,_,o);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case U:S=10;break e;case D:S=9;break e;case j:S=11;break e;case at:S=14;break e;case be:S=16,f=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return o=di(S,u,o,g),o.elementType=n,o.type=f,o.lanes=_,o}function Ea(n,o,u,f){return n=di(7,n,f,o),n.lanes=u,n}function zc(n,o,u,f){return n=di(22,n,f,o),n.elementType=Ye,n.lanes=u,n.stateNode={isHidden:!1},n}function nf(n,o,u){return n=di(6,n,null,o),n.lanes=u,n}function rf(n,o,u){return o=di(4,n.children!==null?n.children:[],n.key,o),o.lanes=u,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}function kw(n,o,u,f,g){this.tag=o,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zi(0),this.expirationTimes=zi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zi(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function sf(n,o,u,f,g,_,S,R,B){return n=new kw(n,o,u,R,B),o===1?(o=1,_===!0&&(o|=8)):o=0,_=di(3,null,null,o),n.current=_,_.stateNode=n,_.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},_d(_),n}function Rw(n,o,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:je,key:f==null?null:""+f,children:n,containerInfo:o,implementation:u}}function Eg(n){if(!n)return _o;n=n._reactInternals;e:{if(fr(n)!==n||n.tag!==1)throw Error(t(170));var o=n;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(wr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(n.tag===1){var u=n.type;if(wr(u))return Km(n,u,o)}return o}function Tg(n,o,u,f,g,_,S,R,B){return n=sf(u,f,!0,n,g,_,S,R,B),n.context=Eg(null),u=n.current,f=rr(),g=Io(u),_=Ms(f,g),_.callback=o??null,wo(u,_,g),n.current.lanes=g,Zn(n,g,f),xr(n,f),n}function Fc(n,o,u,f){var g=o.current,_=rr(),S=Io(g);return u=Eg(u),o.context===null?o.context=u:o.pendingContext=u,o=Ms(_,S),o.payload={element:n},f=f===void 0?null:f,f!==null&&(o.callback=f),n=wo(g,o,S),n!==null&&(Pi(n,g,S,_),gc(n,g,S)),S}function jc(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function xg(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<o?u:o}}function of(n,o){xg(n,o),(n=n.alternate)&&xg(n,o)}function Nw(){return null}var Ig=typeof reportError=="function"?reportError:function(n){console.error(n)};function af(n){this._internalRoot=n}Bc.prototype.render=af.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(t(409));Fc(n,o,null,null)},Bc.prototype.unmount=af.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;ya(function(){Fc(null,n,null,null)}),o[yt]=null}};function Bc(n){this._internalRoot=n}Bc.prototype.unstable_scheduleHydration=function(n){if(n){var o=_s();n={blockedOn:null,target:n,priority:o};for(var u=0;u<Mt.length&&o!==0&&o<Mt[u].priority;u++);Mt.splice(u,0,n),u===0&&Bi(n)}};function lf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Uc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Sg(){}function Lw(n,o,u,f,g){if(g){if(typeof f=="function"){var _=f;f=function(){var X=jc(S);_.call(X)}}var S=Tg(o,f,n,0,null,!1,!1,"",Sg);return n._reactRootContainer=S,n[yt]=S.current,ho(n.nodeType===8?n.parentNode:n),ya(),S}for(;g=n.lastChild;)n.removeChild(g);if(typeof f=="function"){var R=f;f=function(){var X=jc(B);R.call(X)}}var B=sf(n,0,!1,null,null,!1,!1,"",Sg);return n._reactRootContainer=B,n[yt]=B.current,ho(n.nodeType===8?n.parentNode:n),ya(function(){Fc(o,B,u,f)}),B}function Wc(n,o,u,f,g){var _=u._reactRootContainer;if(_){var S=_;if(typeof g=="function"){var R=g;g=function(){var B=jc(S);R.call(B)}}Fc(o,S,n,g)}else S=Lw(u,o,n,g,f);return jc(S)}ps=function(n){switch(n.tag){case 3:var o=n.stateNode;if(o.current.memoizedState.isDehydrated){var u=Te(o.pendingLanes);u!==0&&(kr(o,u|1),xr(o,It()),(dt&6)===0&&(cl=It()+500,yo()))}break;case 13:ya(function(){var f=Ls(n,1);if(f!==null){var g=rr();Pi(f,n,1,g)}}),of(n,1)}},Kr=function(n){if(n.tag===13){var o=Ls(n,134217728);if(o!==null){var u=rr();Pi(o,n,134217728,u)}of(n,134217728)}},gs=function(n){if(n.tag===13){var o=Io(n),u=Ls(n,o);if(u!==null){var f=rr();Pi(u,n,o,f)}of(n,o)}},_s=function(){return Je},Fi=function(n,o){var u=Je;try{return Je=n,o()}finally{Je=u}},hr=function(n,o,u){switch(o){case"input":if(_n(n,u),o=u.name,u.type==="radio"&&o!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==n&&f.form===n.form){var g=Ya(f);if(!g)throw Error(t(90));ir(f),_n(f,g)}}}break;case"textarea":$s(n,u);break;case"select":o=u.value,o!=null&&yn(n,!!u.multiple,o,!1)}},Ot=Xd,Kt=ya;var Mw={usingClientEntryPoint:!1,Events:[Cs,As,Ya,Fe,wt,Xd]},fu={findFiberByHostInstance:bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dw={bundleType:fu.bundleType,version:fu.version,rendererPackageName:fu.rendererPackageName,rendererConfig:fu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ge.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Fa(n),n===null?null:n.stateNode},findFiberByHostInstance:fu.findFiberByHostInstance||Nw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{Oi=Hc.inject(Dw),Rn=Hc}catch{}}return Ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mw,Ir.createPortal=function(n,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lf(o))throw Error(t(200));return Rw(n,o,null,u)},Ir.createRoot=function(n,o){if(!lf(n))throw Error(t(299));var u=!1,f="",g=Ig;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=sf(n,1,!1,null,null,u,!1,f,g),n[yt]=o.current,ho(n.nodeType===8?n.parentNode:n),new af(o)},Ir.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Fa(o),n=n===null?null:n.stateNode,n},Ir.flushSync=function(n){return ya(n)},Ir.hydrate=function(n,o,u){if(!Uc(o))throw Error(t(200));return Wc(null,n,o,!0,u)},Ir.hydrateRoot=function(n,o,u){if(!lf(n))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,g=!1,_="",S=Ig;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),o=Tg(o,null,n,1,u??null,g,!1,_,S),n[yt]=o.current,ho(n),f)for(n=0;n<f.length;n++)u=f[n],g=u._getVersion,g=g(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,g]:o.mutableSourceEagerHydrationData.push(u,g);return new Bc(o)},Ir.render=function(n,o,u){if(!Uc(o))throw Error(t(200));return Wc(null,n,o,!1,u)},Ir.unmountComponentAtNode=function(n){if(!Uc(n))throw Error(t(40));return n._reactRootContainer?(ya(function(){Wc(null,null,n,!1,function(){n._reactRootContainer=null,n[yt]=null})}),!0):!1},Ir.unstable_batchedUpdates=Xd,Ir.unstable_renderSubtreeIntoContainer=function(n,o,u,f){if(!Uc(u))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Wc(n,o,u,!1,f)},Ir.version="18.3.1-next-f1338f8080-20240426",Ir}var Lg;function Ey(){if(Lg)return hf.exports;Lg=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),hf.exports=Uw(),hf.exports}var Mg;function Ww(){if(Mg)return qc;Mg=1;var i=Ey();return qc.createRoot=i.createRoot,qc.hydrateRoot=i.hydrateRoot,qc}var Hw=Ww(),rt=im();const me=rm(rt);var _u={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var qw=_u.exports,Dg;function $w(){return Dg||(Dg=1,(function(i,e){(function(t,s){s(e)})(qw,(function(t){var s="1.9.4";function a(r){var l,d,p,w;for(d=1,p=arguments.length;d<p;d++){w=arguments[d];for(l in w)r[l]=w[l]}return r}var c=Object.create||(function(){function r(){}return function(l){return r.prototype=l,new r}})();function m(r,l){var d=Array.prototype.slice;if(r.bind)return r.bind.apply(r,d.call(arguments,1));var p=d.call(arguments,2);return function(){return r.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var v=0;function E(r){return"_leaflet_id"in r||(r._leaflet_id=++v),r._leaflet_id}function x(r,l,d){var p,w,P,V;return V=function(){p=!1,w&&(P.apply(d,w),w=!1)},P=function(){p?w=arguments:(r.apply(d,arguments),setTimeout(V,l),p=!0)},P}function b(r,l,d){var p=l[1],w=l[0],P=p-w;return r===p&&d?r:((r-w)%P+P)%P+w}function I(){return!1}function M(r,l){if(l===!1)return r;var d=Math.pow(10,l===void 0?6:l);return Math.round(r*d)/d}function $(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function Q(r){return $(r).split(/\s+/)}function te(r,l){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?c(r.options):{});for(var d in l)r.options[d]=l[d];return r.options}function ee(r,l,d){var p=[];for(var w in r)p.push(encodeURIComponent(d?w.toUpperCase():w)+"="+encodeURIComponent(r[w]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var Ae=/\{ *([\w_ -]+) *\}/g;function pe(r,l){return r.replace(Ae,function(d,p){var w=l[p];if(w===void 0)throw new Error("No value provided for variable "+d);return typeof w=="function"&&(w=w(l)),w})}var ve=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function ge(r,l){for(var d=0;d<r.length;d++)if(r[d]===l)return d;return-1}var Me="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function je(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var F=0;function A(r){var l=+new Date,d=Math.max(0,16-(l-F));return F=l+d,window.setTimeout(r,d)}var O=window.requestAnimationFrame||je("RequestAnimationFrame")||A,U=window.cancelAnimationFrame||je("CancelAnimationFrame")||je("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function D(r,l,d){if(d&&O===A)r.call(l);else return O.call(window,m(r,l))}function j(r){r&&U.call(window,r)}var k={__proto__:null,extend:a,create:c,bind:m,get lastId(){return v},stamp:E,throttle:x,wrapNum:b,falseFn:I,formatNum:M,trim:$,splitWords:Q,setOptions:te,getParamString:ee,template:pe,isArray:ve,indexOf:ge,emptyImageUrl:Me,requestFn:O,cancelFn:U,requestAnimFrame:D,cancelAnimFrame:j};function $e(){}$e.extend=function(r){var l=function(){te(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=c(d);p.constructor=l,l.prototype=p;for(var w in this)Object.prototype.hasOwnProperty.call(this,w)&&w!=="prototype"&&w!=="__super__"&&(l[w]=this[w]);return r.statics&&a(l,r.statics),r.includes&&(at(r.includes),a.apply(null,[p].concat(r.includes))),a(p,r),delete p.statics,delete p.includes,p.options&&(p.options=d.options?c(d.options):{},a(p.options,r.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var P=0,V=p._initHooks.length;P<V;P++)p._initHooks[P].call(this)}},l},$e.include=function(r){var l=this.prototype.options;return a(this.prototype,r),r.options&&(this.prototype.options=l,this.mergeOptions(r.options)),this},$e.mergeOptions=function(r){return a(this.prototype.options,r),this},$e.addInitHook=function(r){var l=Array.prototype.slice.call(arguments,1),d=typeof r=="function"?r:function(){this[r].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function at(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=ve(r)?r:[r];for(var l=0;l<r.length;l++)r[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var be={on:function(r,l,d){if(typeof r=="object")for(var p in r)this._on(p,r[p],l);else{r=Q(r);for(var w=0,P=r.length;w<P;w++)this._on(r[w],l,d)}return this},off:function(r,l,d){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var p in r)this._off(p,r[p],l);else{r=Q(r);for(var w=arguments.length===1,P=0,V=r.length;P<V;P++)w?this._off(r[P]):this._off(r[P],l,d)}return this},_on:function(r,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(r,l,d)===!1){d===this&&(d=void 0);var w={fn:l,ctx:d};p&&(w.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(w)}},_off:function(r,l,d){var p,w,P;if(this._events&&(p=this._events[r],!!p)){if(arguments.length===1){if(this._firingCount)for(w=0,P=p.length;w<P;w++)p[w].fn=I;delete this._events[r];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var V=this._listens(r,l,d);if(V!==!1){var q=p[V];this._firingCount&&(q.fn=I,this._events[r]=p=p.slice()),p.splice(V,1)}}},fire:function(r,l,d){if(!this.listens(r,d))return this;var p=a({},l,{type:r,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var w=this._events[r];if(w){this._firingCount=this._firingCount+1||1;for(var P=0,V=w.length;P<V;P++){var q=w[P],Y=q.fn;q.once&&this.off(r,Y,q.ctx),Y.call(q.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(r,l,d,p){typeof r!="string"&&console.warn('"string" type argument expected');var w=l;typeof l!="function"&&(p=!!l,w=void 0,d=void 0);var P=this._events&&this._events[r];if(P&&P.length&&this._listens(r,w,d)!==!1)return!0;if(p){for(var V in this._eventParents)if(this._eventParents[V].listens(r,l,d,p))return!0}return!1},_listens:function(r,l,d){if(!this._events)return!1;var p=this._events[r]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var w=0,P=p.length;w<P;w++)if(p[w].fn===l&&p[w].ctx===d)return w;return!1},once:function(r,l,d){if(typeof r=="object")for(var p in r)this._on(p,r[p],l,!0);else{r=Q(r);for(var w=0,P=r.length;w<P;w++)this._on(r[w],l,d,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[E(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[E(r)],this},_propagateEvent:function(r){for(var l in this._eventParents)this._eventParents[l].fire(r.type,a({layer:r.target,propagatedFrom:r.target},r),!0)}};be.addEventListener=be.on,be.removeEventListener=be.clearAllEventListeners=be.off,be.addOneTimeEventListener=be.once,be.fireEvent=be.fire,be.hasEventListeners=be.listens;var Ye=$e.extend(be);function ne(r,l,d){this.x=d?Math.round(r):r,this.y=d?Math.round(l):l}var Ie=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};ne.prototype={clone:function(){return new ne(this.x,this.y)},add:function(r){return this.clone()._add(re(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(re(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new ne(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new ne(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ie(this.x),this.y=Ie(this.y),this},distanceTo:function(r){r=re(r);var l=r.x-this.x,d=r.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(r){return r=re(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=re(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+M(this.x)+", "+M(this.y)+")"}};function re(r,l,d){return r instanceof ne?r:ve(r)?new ne(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new ne(r.x,r.y):new ne(r,l,d)}function z(r,l){if(r)for(var d=l?[r,l]:r,p=0,w=d.length;p<w;p++)this.extend(d[p])}z.prototype={extend:function(r){var l,d;if(!r)return this;if(r instanceof ne||typeof r[0]=="number"||"x"in r)l=d=re(r);else if(r=J(r),l=r.min,d=r.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(r){return re((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return re(this.min.x,this.max.y)},getTopRight:function(){return re(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var l,d;return typeof r[0]=="number"||r instanceof ne?r=re(r):r=J(r),r instanceof z?(l=r.min,d=r.max):l=d=r,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(r){r=J(r);var l=this.min,d=this.max,p=r.min,w=r.max,P=w.x>=l.x&&p.x<=d.x,V=w.y>=l.y&&p.y<=d.y;return P&&V},overlaps:function(r){r=J(r);var l=this.min,d=this.max,p=r.min,w=r.max,P=w.x>l.x&&p.x<d.x,V=w.y>l.y&&p.y<d.y;return P&&V},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*r,w=Math.abs(l.y-d.y)*r;return J(re(l.x-p,l.y-w),re(d.x+p,d.y+w))},equals:function(r){return r?(r=J(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function J(r,l){return!r||r instanceof z?r:new z(r,l)}function fe(r,l){if(r)for(var d=l?[r,l]:r,p=0,w=d.length;p<w;p++)this.extend(d[p])}fe.prototype={extend:function(r){var l=this._southWest,d=this._northEast,p,w;if(r instanceof Ee)p=r,w=r;else if(r instanceof fe){if(p=r._southWest,w=r._northEast,!p||!w)return this}else return r?this.extend(ce(r)||_e(r)):this;return!l&&!d?(this._southWest=new Ee(p.lat,p.lng),this._northEast=new Ee(w.lat,w.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(w.lat,d.lat),d.lng=Math.max(w.lng,d.lng)),this},pad:function(r){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*r,w=Math.abs(l.lng-d.lng)*r;return new fe(new Ee(l.lat-p,l.lng-w),new Ee(d.lat+p,d.lng+w))},getCenter:function(){return new Ee((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ee(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ee(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof Ee||"lat"in r?r=ce(r):r=_e(r);var l=this._southWest,d=this._northEast,p,w;return r instanceof fe?(p=r.getSouthWest(),w=r.getNorthEast()):p=w=r,p.lat>=l.lat&&w.lat<=d.lat&&p.lng>=l.lng&&w.lng<=d.lng},intersects:function(r){r=_e(r);var l=this._southWest,d=this._northEast,p=r.getSouthWest(),w=r.getNorthEast(),P=w.lat>=l.lat&&p.lat<=d.lat,V=w.lng>=l.lng&&p.lng<=d.lng;return P&&V},overlaps:function(r){r=_e(r);var l=this._southWest,d=this._northEast,p=r.getSouthWest(),w=r.getNorthEast(),P=w.lat>l.lat&&p.lat<d.lat,V=w.lng>l.lng&&p.lng<d.lng;return P&&V},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,l){return r?(r=_e(r),this._southWest.equals(r.getSouthWest(),l)&&this._northEast.equals(r.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function _e(r,l){return r instanceof fe?r:new fe(r,l)}function Ee(r,l,d){if(isNaN(r)||isNaN(l))throw new Error("Invalid LatLng object: ("+r+", "+l+")");this.lat=+r,this.lng=+l,d!==void 0&&(this.alt=+d)}Ee.prototype={equals:function(r,l){if(!r)return!1;r=ce(r);var d=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return d<=(l===void 0?1e-9:l)},toString:function(r){return"LatLng("+M(this.lat,r)+", "+M(this.lng,r)+")"},distanceTo:function(r){return Ue.distance(this,ce(r))},wrap:function(){return Ue.wrapLatLng(this)},toBounds:function(r){var l=180*r/40075017,d=l/Math.cos(Math.PI/180*this.lat);return _e([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Ee(this.lat,this.lng,this.alt)}};function ce(r,l,d){return r instanceof Ee?r:ve(r)&&typeof r[0]!="object"?r.length===3?new Ee(r[0],r[1],r[2]):r.length===2?new Ee(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new Ee(r.lat,"lng"in r?r.lng:r.lon,r.alt):l===void 0?null:new Ee(r,l,d)}var Ge={latLngToPoint:function(r,l){var d=this.projection.project(r),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(r,l){var d=this.scale(l),p=this.transformation.untransform(r,d);return this.projection.unproject(p)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(r),p=this.transformation.transform(l.min,d),w=this.transformation.transform(l.max,d);return new z(p,w)},infinite:!1,wrapLatLng:function(r){var l=this.wrapLng?b(r.lng,this.wrapLng,!0):r.lng,d=this.wrapLat?b(r.lat,this.wrapLat,!0):r.lat,p=r.alt;return new Ee(d,l,p)},wrapLatLngBounds:function(r){var l=r.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,w=l.lng-d.lng;if(p===0&&w===0)return r;var P=r.getSouthWest(),V=r.getNorthEast(),q=new Ee(P.lat-p,P.lng-w),Y=new Ee(V.lat-p,V.lng-w);return new fe(q,Y)}},Ue=a({},Ge,{wrapLng:[-180,180],R:6371e3,distance:function(r,l){var d=Math.PI/180,p=r.lat*d,w=l.lat*d,P=Math.sin((l.lat-r.lat)*d/2),V=Math.sin((l.lng-r.lng)*d/2),q=P*P+Math.cos(p)*Math.cos(w)*V*V,Y=2*Math.atan2(Math.sqrt(q),Math.sqrt(1-q));return this.R*Y}}),nt=6378137,Rt={R:nt,MAX_LATITUDE:85.0511287798,project:function(r){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,r.lat),-d),w=Math.sin(p*l);return new ne(this.R*r.lng*l,this.R*Math.log((1+w)/(1-w))/2)},unproject:function(r){var l=180/Math.PI;return new Ee((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*l,r.x*l/this.R)},bounds:(function(){var r=nt*Math.PI;return new z([-r,-r],[r,r])})()};function jr(r,l,d,p){if(ve(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=l,this._c=d,this._d=p}jr.prototype={transform:function(r,l){return this._transform(r.clone(),l)},_transform:function(r,l){return l=l||1,r.x=l*(this._a*r.x+this._b),r.y=l*(this._c*r.y+this._d),r},untransform:function(r,l){return l=l||1,new ne((r.x/l-this._b)/this._a,(r.y/l-this._d)/this._c)}};function ir(r,l,d,p){return new jr(r,l,d,p)}var sr=a({},Ue,{code:"EPSG:3857",projection:Rt,transformation:(function(){var r=.5/(Math.PI*Rt.R);return ir(r,.5,-r,.5)})()}),Br=a({},sr,{code:"EPSG:900913"});function ls(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Ur(r,l){var d="",p,w,P,V,q,Y;for(p=0,P=r.length;p<P;p++){for(q=r[p],w=0,V=q.length;w<V;w++)Y=q[w],d+=(w?"L":"M")+Y.x+" "+Y.y;d+=l?ye.svg?"z":"x":""}return d||"M0 0"}var _n=document.documentElement.style,br="ActiveXObject"in window,ft=br&&!document.addEventListener,St="msLaunchUri"in navigator&&!("documentMode"in document),yn=Vt("webkit"),Ut=Vt("android"),qn=Vt("android 2")||Vt("android 3"),$s=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Wr=Ut&&Vt("Google")&&$s<537&&!("AudioNode"in window),or=!!window.opera,pi=!St&&Vt("chrome"),ar=Vt("gecko")&&!yn&&!or&&!br,Li=!pi&&Vt("safari"),vn=Vt("phantom"),lr="OTransition"in _n,Cr=navigator.platform.indexOf("Win")===0,Ar=br&&"transition"in _n,Hr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!qn,gi="MozPerspective"in _n,kn=!window.L_DISABLE_3D&&(Ar||Hr||gi)&&!lr&&!vn,ur=typeof orientation<"u"||Vt("mobile"),cr=ur&&yn,wn=ur&&Hr,hr=!window.PointerEvent&&window.MSPointerEvent,dr=!!(window.PointerEvent||hr),Tt="ontouchstart"in window||!!window.TouchEvent,Mi=!window.L_NO_TOUCH&&(Tt||dr),Fe=ur&&or,wt=ur&&ar,Ot=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Kt=(function(){var r=!1;try{var l=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",I,l),window.removeEventListener("testPassiveEventSupport",I,l)}catch{}return r})(),En=(function(){return!!document.createElement("canvas").getContext})(),Pt=!!(document.createElementNS&&ls("svg").createSVGRect),Wt=!!Pt&&(function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),$n=!Pt&&(function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var l=r.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}})(),Ht=navigator.platform.indexOf("Mac")===0,cn=navigator.platform.indexOf("Linux")===0;function Vt(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var ye={ie:br,ielt9:ft,edge:St,webkit:yn,android:Ut,android23:qn,androidStock:Wr,opera:or,chrome:pi,gecko:ar,safari:Li,phantom:vn,opera12:lr,win:Cr,ie3d:Ar,webkit3d:Hr,gecko3d:gi,any3d:kn,mobile:ur,mobileWebkit:cr,mobileWebkit3d:wn,msPointer:hr,pointer:dr,touch:Mi,touchNative:Tt,mobileOpera:Fe,mobileGecko:wt,retina:Ot,passiveEvents:Kt,canvas:En,svg:Pt,vml:$n,inlineSvg:Wt,mac:Ht,linux:cn},Di=ye.msPointer?"MSPointerDown":"pointerdown",Gn=ye.msPointer?"MSPointerMove":"pointermove",Zo=ye.msPointer?"MSPointerUp":"pointerup",Ko=ye.msPointer?"MSPointerCancel":"pointercancel",us={touchstart:Di,touchmove:Gn,touchend:Zo,touchcancel:Ko},fr={touchstart:It,touchmove:mr,touchend:mr,touchcancel:mr},qr={},Qo=!1;function za(r,l,d){return l==="touchstart"&&ds(),fr[l]?(d=fr[l].bind(this,d),r.addEventListener(us[l],d,!1),d):(console.warn("wrong event specified:",l),I)}function Fa(r,l,d){if(!us[l]){console.warn("wrong event specified:",l);return}r.removeEventListener(us[l],d,!1)}function cs(r){qr[r.pointerId]=r}function Yo(r){qr[r.pointerId]&&(qr[r.pointerId]=r)}function hs(r){delete qr[r.pointerId]}function ds(){Qo||(document.addEventListener(Di,cs,!0),document.addEventListener(Gn,Yo,!0),document.addEventListener(Zo,hs,!0),document.addEventListener(Ko,hs,!0),Qo=!0)}function mr(r,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in qr)l.touches.push(qr[d]);l.changedTouches=[l],r(l)}}function It(r,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&bt(l),mr(r,l)}function Bl(r){var l={},d,p;for(p in r)d=r[p],l[p]=d&&d.bind?d.bind(r):d;return r=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Gs=200;function Xo(r,l){r.addEventListener("dblclick",l);var d=0,p;function w(P){if(P.detail!==1){p=P.detail;return}if(!(P.pointerType==="mouse"||P.sourceCapabilities&&!P.sourceCapabilities.firesTouchEvents)){var V=Qr(P);if(!(V.some(function(Y){return Y instanceof HTMLLabelElement&&Y.attributes.for})&&!V.some(function(Y){return Y instanceof HTMLInputElement||Y instanceof HTMLSelectElement}))){var q=Date.now();q-d<=Gs?(p++,p===2&&l(Bl(P))):p=1,d=q}}}return r.addEventListener("click",w),{dblclick:l,simDblclick:w}}function fs(r,l){r.removeEventListener("dblclick",l.dblclick),r.removeEventListener("click",l.simDblclick)}var ms=zi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),$r=zi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Oi=$r==="webkitTransition"||$r==="OTransition"?$r+"End":"transitionend";function Rn(r){return typeof r=="string"?document.getElementById(r):r}function Vi(r,l){var d=r.style[l]||r.currentStyle&&r.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(r,null);d=p?p[l]:null}return d==="auto"?null:d}function Ze(r,l,d){var p=document.createElement(r);return p.className=l||"",d&&d.appendChild(p),p}function ut(r){var l=r.parentNode;l&&l.removeChild(r)}function Tn(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function pr(r){var l=r.parentNode;l&&l.lastChild!==r&&l.appendChild(r)}function xn(r){var l=r.parentNode;l&&l.firstChild!==r&&l.insertBefore(r,l.firstChild)}function Gr(r,l){if(r.classList!==void 0)return r.classList.contains(l);var d=Zr(r);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function Te(r,l){if(r.classList!==void 0)for(var d=Q(l),p=0,w=d.length;p<w;p++)r.classList.add(d[p]);else if(!Gr(r,l)){var P=Zr(r);_i(r,(P?P+" ":"")+l)}}function gt(r,l){r.classList!==void 0?r.classList.remove(l):_i(r,$((" "+Zr(r)+" ").replace(" "+l+" "," ")))}function _i(r,l){r.className.baseVal===void 0?r.className=l:r.className.baseVal=l}function Zr(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function hn(r,l){"opacity"in r.style?r.style.opacity=l:"filter"in r.style&&Jo(r,l)}function Jo(r,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=r.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):r.style.filter+=" progid:"+p+"(opacity="+l+")"}function zi(r){for(var l=document.documentElement.style,d=0;d<r.length;d++)if(r[d]in l)return r[d];return!1}function Zn(r,l,d){var p=l||new ne(0,0);r.style[ms]=(ye.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function Lt(r,l){r._leaflet_pos=l,ye.any3d?Zn(r,l):(r.style.left=l.x+"px",r.style.top=l.y+"px")}function kr(r){return r._leaflet_pos||new ne(0,0)}var Je,Nn,ps;if("onselectstart"in document)Je=function(){Oe(window,"selectstart",bt)},Nn=function(){_t(window,"selectstart",bt)};else{var Kr=zi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Je=function(){if(Kr){var r=document.documentElement.style;ps=r[Kr],r[Kr]="none"}},Nn=function(){Kr&&(document.documentElement.style[Kr]=ps,ps=void 0)}}function gs(){Oe(window,"dragstart",bt)}function _s(){_t(window,"dragstart",bt)}var Fi,gr;function ji(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(Kn(),Fi=r,gr=r.style.outlineStyle,r.style.outlineStyle="none",Oe(window,"keydown",Kn))}function Kn(){Fi&&(Fi.style.outlineStyle=gr,Fi=void 0,gr=void 0,_t(window,"keydown",Kn))}function Rr(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function $t(r){var l=r.getBoundingClientRect();return{x:l.width/r.offsetWidth||1,y:l.height/r.offsetHeight||1,boundingClientRect:l}}var ys={__proto__:null,TRANSFORM:ms,TRANSITION:$r,TRANSITION_END:Oi,get:Rn,getStyle:Vi,create:Ze,remove:ut,empty:Tn,toFront:pr,toBack:xn,hasClass:Gr,addClass:Te,removeClass:gt,setClass:_i,getClass:Zr,setOpacity:hn,testProp:zi,setTransform:Zn,setPosition:Lt,getPosition:kr,get disableTextSelection(){return Je},get enableTextSelection(){return Nn},disableImageDrag:gs,enableImageDrag:_s,preventOutline:ji,restoreOutline:Kn,getSizedParentNode:Rr,getScale:$t};function Oe(r,l,d,p){if(l&&typeof l=="object")for(var w in l)Zs(r,w,l[w],d);else{l=Q(l);for(var P=0,V=l.length;P<V;P++)Zs(r,l[P],d,p)}return this}var Mt="_leaflet_events";function _t(r,l,d,p){if(arguments.length===1)yi(r),delete r[Mt];else if(l&&typeof l=="object")for(var w in l)Bi(r,w,l[w],d);else if(l=Q(l),arguments.length===2)yi(r,function(q){return ge(l,q)!==-1});else for(var P=0,V=l.length;P<V;P++)Bi(r,l[P],d,p);return this}function yi(r,l){for(var d in r[Mt]){var p=d.split(/\d/)[0];(!l||l(p))&&Bi(r,p,null,null,d)}}var Qn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Zs(r,l,d,p){var w=l+E(d)+(p?"_"+E(p):"");if(r[Mt]&&r[Mt][w])return this;var P=function(q){return d.call(p||r,q||window.event)},V=P;!ye.touchNative&&ye.pointer&&l.indexOf("touch")===0?P=za(r,l,P):ye.touch&&l==="dblclick"?P=Xo(r,P):"addEventListener"in r?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?r.addEventListener(Qn[l]||l,P,ye.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(P=function(q){q=q||window.event,ws(r,q)&&V(q)},r.addEventListener(Qn[l],P,!1)):r.addEventListener(l,V,!1):r.attachEvent("on"+l,P),r[Mt]=r[Mt]||{},r[Mt][w]=P}function Bi(r,l,d,p,w){w=w||l+E(d)+(p?"_"+E(p):"");var P=r[Mt]&&r[Mt][w];if(!P)return this;!ye.touchNative&&ye.pointer&&l.indexOf("touch")===0?Fa(r,l,P):ye.touch&&l==="dblclick"?fs(r,P):"removeEventListener"in r?r.removeEventListener(Qn[l]||l,P,!1):r.detachEvent("on"+l,P),r[Mt][w]=null}function lt(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function Ks(r){return Zs(r,"wheel",lt),this}function vs(r){return Oe(r,"mousedown touchstart dblclick contextmenu",lt),r._leaflet_disable_click=!0,this}function bt(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function Ln(r){return bt(r),lt(r),this}function Qr(r){if(r.composedPath)return r.composedPath();for(var l=[],d=r.target;d;)l.push(d),d=d.parentNode;return l}function Yr(r,l){if(!l)return new ne(r.clientX,r.clientY);var d=$t(l),p=d.boundingClientRect;return new ne((r.clientX-p.left)/d.x-l.clientLeft,(r.clientY-p.top)/d.y-l.clientTop)}var Xr=ye.linux&&ye.chrome?window.devicePixelRatio:ye.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ea(r){return ye.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Xr:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function ws(r,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==r;)d=d.parentNode}catch{return!1}return d!==r}var Jr={__proto__:null,on:Oe,off:_t,stopPropagation:lt,disableScrollPropagation:Ks,disableClickPropagation:vs,preventDefault:bt,stop:Ln,getPropagationPath:Qr,getMousePosition:Yr,getWheelDelta:ea,isExternalTarget:ws,addListener:Oe,removeListener:_t},Es=Ye.extend({run:function(r,l,d,p){this.stop(),this._el=r,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=kr(r),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(r){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),r):(this._runFrame(1),this._complete())},_runFrame:function(r,l){var d=this._startPos.add(this._offset.multiplyBy(r));l&&d._round(),Lt(this._el,d),this.fire("step")},_complete:function(){j(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),et=Ye.extend({options:{crs:sr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,l){l=te(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=m(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ce(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=$r&&ye.any3d&&!ye.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Oe(this._proxy,Oi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),r=this._limitCenter(ce(r),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=a({animate:d.animate},d.zoom),d.pan=a({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,l,d.zoom):this._tryAnimatedPan(r,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(r,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(r,l){return this._loaded?this.setView(this.getCenter(),r,{zoom:l}):(this._zoom=r,this)},zoomIn:function(r,l){return r=r||(ye.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,l)},zoomOut:function(r,l){return r=r||(ye.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,l)},setZoomAround:function(r,l,d){var p=this.getZoomScale(l),w=this.getSize().divideBy(2),P=r instanceof ne?r:this.latLngToContainerPoint(r),V=P.subtract(w).multiplyBy(1-1/p),q=this.containerPointToLatLng(w.add(V));return this.setView(q,l,{zoom:d})},_getBoundsCenterZoom:function(r,l){l=l||{},r=r.getBounds?r.getBounds():_e(r);var d=re(l.paddingTopLeft||l.padding||[0,0]),p=re(l.paddingBottomRight||l.padding||[0,0]),w=this.getBoundsZoom(r,!1,d.add(p));if(w=typeof l.maxZoom=="number"?Math.min(l.maxZoom,w):w,w===1/0)return{center:r.getCenter(),zoom:w};var P=p.subtract(d).divideBy(2),V=this.project(r.getSouthWest(),w),q=this.project(r.getNorthEast(),w),Y=this.unproject(V.add(q).divideBy(2).add(P),w);return{center:Y,zoom:w}},fitBounds:function(r,l){if(r=_e(r),!r.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(r,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,l){return this.setView(r,this._zoom,{pan:l})},panBy:function(r,l){if(r=re(r).round(),l=l||{},!r.x&&!r.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Es,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){Te(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,l,d){if(d=d||{},d.animate===!1||!ye.any3d)return this.setView(r,l,d);this._stop();var p=this.project(this.getCenter()),w=this.project(r),P=this.getSize(),V=this._zoom;r=ce(r),l=l===void 0?V:l;var q=Math.max(P.x,P.y),Y=q*this.getZoomScale(V,l),oe=w.distanceTo(p)||1,we=1.42,De=we*we;function Xe(yt){var po=yt?-1:1,rd=yt?Y:q,id=Y*Y-q*q+po*De*De*oe*oe,bs=2*rd*De*oe,Cs=id/bs,As=Math.sqrt(Cs*Cs+1)-Cs,Ya=As<1e-9?-18:Math.log(As);return Ya}function sn(yt){return(Math.exp(yt)-Math.exp(-yt))/2}function Yt(yt){return(Math.exp(yt)+Math.exp(-yt))/2}function tr(yt){return sn(yt)/Yt(yt)}var On=Xe(0);function fo(yt){return q*(Yt(On)/Yt(On+we*yt))}function Jl(yt){return q*(Yt(On)*tr(On+we*yt)-sn(On))/De}function Zi(yt){return 1-Math.pow(1-yt,1.5)}var oc=Date.now(),Ps=(Xe(1)-On)/we,oi=d.duration?1e3*d.duration:1e3*Ps*.8;function mo(){var yt=(Date.now()-oc)/oi,po=Zi(yt)*Ps;yt<=1?(this._flyToFrame=D(mo,this),this._move(this.unproject(p.add(w.subtract(p).multiplyBy(Jl(po)/oe)),V),this.getScaleZoom(q/fo(po),V),{flyTo:!0})):this._move(r,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),mo.call(this),this},flyToBounds:function(r,l){var d=this._getBoundsCenterZoom(r,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(r){return r=_e(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var l=this.options.minZoom;return this.options.minZoom=r,this._loaded&&l!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var l=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&l!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,_e(r));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(r,l){l=l||{};var d=re(l.paddingTopLeft||l.padding||[0,0]),p=re(l.paddingBottomRight||l.padding||[0,0]),w=this.project(this.getCenter()),P=this.project(r),V=this.getPixelBounds(),q=J([V.min.add(d),V.max.subtract(p)]),Y=q.getSize();if(!q.contains(P)){this._enforcingBounds=!0;var oe=P.subtract(q.getCenter()),we=q.extend(P).getSize().subtract(Y);w.x+=oe.x<0?-we.x:we.x,w.y+=oe.y<0?-we.y:we.y,this.panTo(this.unproject(w),l),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=a({animate:!1,pan:!0},r===!0?{animate:!0}:r);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),w=d.divideBy(2).round(),P=p.subtract(w);return!P.x&&!P.y?this:(r.animate&&r.pan?this.panBy(P):(r.pan&&this._rawPanBy(P),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(m(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=a({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=m(this._handleGeolocationResponse,this),d=m(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,r):navigator.geolocation.getCurrentPosition(l,d,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var l=r.code,d=r.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var l=r.coords.latitude,d=r.coords.longitude,p=new Ee(l,d),w=p.toBounds(r.coords.accuracy*2),P=this._locateOptions;if(P.setView){var V=this.getBoundsZoom(w);this.setView(p,P.maxZoom?Math.min(V,P.maxZoom):V)}var q={latlng:p,bounds:w,timestamp:r.timestamp};for(var Y in r.coords)typeof r.coords[Y]=="number"&&(q[Y]=r.coords[Y]);this.fire("locationfound",q)}},addHandler:function(r,l){if(!l)return this;var d=this[r]=new l(this);return this._handlers.push(d),this.options[r]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ut(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(j(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)ut(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,l){var d="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),p=Ze("div",d,l||this._mapPane);return r&&(this._panes[r]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),l=this.unproject(r.getBottomLeft()),d=this.unproject(r.getTopRight());return new fe(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,l,d){r=_e(r),d=re(d||[0,0]);var p=this.getZoom()||0,w=this.getMinZoom(),P=this.getMaxZoom(),V=r.getNorthWest(),q=r.getSouthEast(),Y=this.getSize().subtract(d),oe=J(this.project(q,p),this.project(V,p)).getSize(),we=ye.any3d?this.options.zoomSnap:1,De=Y.x/oe.x,Xe=Y.y/oe.y,sn=l?Math.max(De,Xe):Math.min(De,Xe);return p=this.getScaleZoom(sn,p),we&&(p=Math.round(p/(we/100))*(we/100),p=l?Math.ceil(p/we)*we:Math.floor(p/we)*we),Math.max(w,Math.min(P,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ne(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,l){var d=this._getTopLeftPoint(r,l);return new z(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(r)/d.scale(l)},getScaleZoom:function(r,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(r*d.scale(l));return isNaN(p)?1/0:p},project:function(r,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ce(r),l)},unproject:function(r,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(re(r),l)},layerPointToLatLng:function(r){var l=re(r).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(r){var l=this.project(ce(r))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(ce(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(_e(r))},distance:function(r,l){return this.options.crs.distance(ce(r),ce(l))},containerPointToLayerPoint:function(r){return re(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return re(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var l=this.containerPointToLayerPoint(re(r));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(r)))},mouseEventToContainerPoint:function(r){return Yr(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var l=this._container=Rn(r);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Oe(l,"scroll",this._onScroll,this),this._containerId=E(l)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&ye.any3d,Te(r,"leaflet-container"+(ye.touch?" leaflet-touch":"")+(ye.retina?" leaflet-retina":"")+(ye.ielt9?" leaflet-oldie":"")+(ye.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Vi(r,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Lt(this._mapPane,new ne(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Te(r.markerPane,"leaflet-zoom-hide"),Te(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,l,d){Lt(this._mapPane,new ne(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var w=this._zoom!==l;this._moveStart(w,d)._move(r,l)._moveEnd(w),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(r,l){return r&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(r,l,d,p){l===void 0&&(l=this._zoom);var w=this._zoom!==l;return this._zoom=l,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),p?d&&d.pinch&&this.fire("zoom",d):((w||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return j(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){Lt(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[E(this._container)]=this;var l=r?_t:Oe;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ye.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){j(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,l){for(var d=[],p,w=l==="mouseout"||l==="mouseover",P=r.target||r.srcElement,V=!1;P;){if(p=this._targets[E(P)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){V=!0;break}if(p&&p.listens(l,!0)&&(w&&!ws(P,r)||(d.push(p),w))||P===this._container)break;P=P.parentNode}return!d.length&&!V&&!w&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var l=r.target||r.srcElement;if(!(!this._loaded||l._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(l))){var d=r.type;d==="mousedown"&&ji(l),this._fireDOMEvent(r,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,l,d){if(r.type==="click"){var p=a({},r);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var w=this._findEventTargets(r,l);if(d){for(var P=[],V=0;V<d.length;V++)d[V].listens(l,!0)&&P.push(d[V]);w=P.concat(w)}if(w.length){l==="contextmenu"&&bt(r);var q=w[0],Y={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var oe=q.getLatLng&&(!q._radius||q._radius<=10);Y.containerPoint=oe?this.latLngToContainerPoint(q.getLatLng()):this.mouseEventToContainerPoint(r),Y.layerPoint=this.containerPointToLayerPoint(Y.containerPoint),Y.latlng=oe?q.getLatLng():this.layerPointToLatLng(Y.layerPoint)}for(V=0;V<w.length;V++)if(w[V].fire(l,Y,!0),Y.originalEvent._stopped||w[V].options.bubblingMouseEvents===!1&&ge(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,l=this._handlers.length;r<l;r++)this._handlers[r].disable()},whenReady:function(r,l){return this._loaded?r.call(l||this,{target:this}):this.on("load",r,l),this},_getMapPanePos:function(){return kr(this._mapPane)||new ne(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,l){var d=r&&l!==void 0?this._getNewPixelOrigin(r,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,l){var d=this.getSize()._divideBy(2);return this.project(r,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(r,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(r,l,d){var p=this._getNewPixelOrigin(d,l);return J([this.project(r.getSouthWest(),l)._subtract(p),this.project(r.getNorthWest(),l)._subtract(p),this.project(r.getSouthEast(),l)._subtract(p),this.project(r.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,l,d){if(!d)return r;var p=this.project(r,l),w=this.getSize().divideBy(2),P=new z(p.subtract(w),p.add(w)),V=this._getBoundsOffset(P,d,l);return Math.abs(V.x)<=1&&Math.abs(V.y)<=1?r:this.unproject(p.add(V),l)},_limitOffset:function(r,l){if(!l)return r;var d=this.getPixelBounds(),p=new z(d.min.add(r),d.max.add(r));return r.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(r,l,d){var p=J(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),w=p.min.subtract(r.min),P=p.max.subtract(r.max),V=this._rebound(w.x,-P.x),q=this._rebound(w.y,-P.y);return new ne(V,q)},_rebound:function(r,l){return r+l>0?Math.round(r-l)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(l))},_limitZoom:function(r){var l=this.getMinZoom(),d=this.getMaxZoom(),p=ye.any3d?this.options.zoomSnap:1;return p&&(r=Math.round(r/p)*p),Math.max(l,Math.min(d,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){gt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,l){var d=this._getCenterOffset(r)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var r=this._proxy=Ze("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(l){var d=ms,p=this._proxy.style[d];Zn(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ut(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),l=this.getZoom();Zn(this._proxy,this.project(r,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),w=this._getCenterOffset(r)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(w)?!1:(D(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(r,l,!0)},this),!0)},_animateZoom:function(r,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=l,Te(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(m(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&gt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Yn(r,l){return new et(r,l)}var dn=$e.extend({options:{position:"topright"},initialize:function(r){te(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var l=this._map;return l&&l.removeControl(this),this.options.position=r,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var l=this._container=this.onAdd(r),d=this.getPosition(),p=r._controlCorners[d];return Te(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ut(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),Xn=function(r){return new dn(r)};et.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},l="leaflet-",d=this._controlContainer=Ze("div",l+"control-container",this._container);function p(w,P){var V=l+w+" "+l+P;r[w+P]=Ze("div",V,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)ut(this._controlCorners[r]);ut(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ta=dn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(r,l,d){te(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in r)this._addLayer(r[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return dn.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,l){return this._addLayer(r,l),this._map?this._update():this},addOverlay:function(r,l){return this._addLayer(r,l,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var l=this._getLayer(E(r));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){Te(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(Te(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):gt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return gt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",l=this._container=Ze("div",r),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),vs(l),Ks(l);var p=this._section=Ze("section",r+"-list");d&&(this._map.on("click",this.collapse,this),Oe(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var w=this._layersLink=Ze("a",r+"-toggle",l);w.href="#",w.title="Layers",w.setAttribute("role","button"),Oe(w,{keydown:function(P){P.keyCode===13&&this._expandSafely()},click:function(P){bt(P),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Ze("div",r+"-base",p),this._separator=Ze("div",r+"-separator",p),this._overlaysList=Ze("div",r+"-overlays",p),l.appendChild(p)},_getLayer:function(r){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&E(this._layers[l].layer)===r)return this._layers[l]},_addLayer:function(r,l,d){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(m(function(p,w){return this.options.sortFunction(p.layer,w.layer,p.name,w.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Tn(this._baseLayersList),Tn(this._overlaysList),this._layerControlInputs=[];var r,l,d,p,w=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,r=r||!p.overlay,w+=p.overlay?0:1;return this.options.hideSingleBase&&(r=r&&w>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=l&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var l=this._getLayer(E(r.target)),d=l.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(r,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(r){var l=document.createElement("label"),d=this._map.hasLayer(r.layer),p;r.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+E(this),d),this._layerControlInputs.push(p),p.layerId=E(r.layer),Oe(p,"click",this._onInputClick,this);var w=document.createElement("span");w.innerHTML=" "+r.name;var P=document.createElement("span");l.appendChild(P),P.appendChild(p),P.appendChild(w);var V=r.overlay?this._overlaysList:this._baseLayersList;return V.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,l,d,p=[],w=[];this._handlingClick=!0;for(var P=r.length-1;P>=0;P--)l=r[P],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||w.push(d);for(P=0;P<w.length;P++)this._map.hasLayer(w[P])&&this._map.removeLayer(w[P]);for(P=0;P<p.length;P++)this._map.hasLayer(p[P])||this._map.addLayer(p[P]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,l,d,p=this._map.getZoom(),w=r.length-1;w>=0;w--)l=r[w],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,Oe(r,"click",bt),this.expand();var l=this;setTimeout(function(){_t(r,"click",bt),l._preventClick=!1})}}),Ts=function(r,l,d){return new ta(r,l,d)},_r=dn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var l="leaflet-control-zoom",d=Ze("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,l,d,p,w){var P=Ze("a",d,p);return P.innerHTML=r,P.href="#",P.title=l,P.setAttribute("role","button"),P.setAttribute("aria-label",l),vs(P),Oe(P,"click",Ln),Oe(P,"click",w,this),Oe(P,"click",this._refocusOnMap,this),P},_updateDisabled:function(){var r=this._map,l="leaflet-disabled";gt(this._zoomInButton,l),gt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(Te(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(Te(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});et.mergeOptions({zoomControl:!0}),et.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new _r,this.addControl(this.zoomControl))});var na=function(r){return new _r(r)},rn=dn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var l="leaflet-control-scale",d=Ze("div",l),p=this.options;return this._addScales(p,l+"-line",d),r.on(p.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),d},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,l,d){r.metric&&(this._mScale=Ze("div",l,d)),r.imperial&&(this._iScale=Ze("div",l,d))},_update:function(){var r=this._map,l=r.getSize().y/2,d=r.distance(r.containerPointToLatLng([0,l]),r.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var l=this._getRoundNum(r),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/r)},_updateImperial:function(r){var l=r*3.2808399,d,p,w;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(w=this._getRoundNum(l),this._updateScale(this._iScale,w+" ft",w/l))},_updateScale:function(r,l,d){r.style.width=Math.round(this.options.maxWidth*d)+"px",r.innerHTML=l},_getRoundNum:function(r){var l=Math.pow(10,(Math.floor(r)+"").length-1),d=r/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),ei=function(r){return new rn(r)},xs='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ti=dn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ye.inlineSvg?xs+" ":"")+"Leaflet</a>"},initialize:function(r){te(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=Ze("div","leaflet-control-attribution"),vs(this._container);for(var l in r._layers)r._layers[l].getAttribution&&this.addAttribution(r._layers[l].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var l in this._attributions)this._attributions[l]&&r.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),r.length&&d.push(r.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});et.mergeOptions({attributionControl:!0}),et.addInitHook(function(){this.options.attributionControl&&new ti().addTo(this)});var Qs=function(r){return new ti(r)};dn.Layers=ta,dn.Zoom=_r,dn.Scale=rn,dn.Attribution=ti,Xn.layers=Ts,Xn.zoom=na,Xn.scale=ei,Xn.attribution=Qs;var In=$e.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});In.addTo=function(r,l){return r.addHandler(l,this),this};var Ys={Events:be},Mn=ye.touch?"touchstart mousedown":"mousedown",Dn=Ye.extend({options:{clickTolerance:3},initialize:function(r,l,d,p){te(this,p),this._element=r,this._dragStartTarget=l||r,this._preventOutline=d},enable:function(){this._enabled||(Oe(this._dragStartTarget,Mn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Dn._dragging===this&&this.finishDrag(!0),_t(this._dragStartTarget,Mn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!Gr(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Dn._dragging===this&&this.finishDrag();return}if(!(Dn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Dn._dragging=this,this._preventOutline&&ji(this._element),gs(),Je(),!this._moving)){this.fire("down");var l=r.touches?r.touches[0]:r,d=Rr(this._element);this._startPoint=new ne(l.clientX,l.clientY),this._startPos=kr(this._element),this._parentScale=$t(d);var p=r.type==="mousedown";Oe(document,p?"mousemove":"touchmove",this._onMove,this),Oe(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var l=r.touches&&r.touches.length===1?r.touches[0]:r,d=new ne(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,bt(r),this._moved||(this.fire("dragstart"),this._moved=!0,Te(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Te(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),Lt(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){gt(document.body,"leaflet-dragging"),this._lastTarget&&(gt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),_t(document,"mousemove touchmove",this._onMove,this),_t(document,"mouseup touchend touchcancel",this._onUp,this),_s(),Nn();var l=this._moved&&this._moving;this._moving=!1,Dn._dragging=!1,l&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function Xs(r,l,d){var p,w=[1,4,2,8],P,V,q,Y,oe,we,De,Xe;for(P=0,we=r.length;P<we;P++)r[P]._code=K(r[P],l);for(q=0;q<4;q++){for(De=w[q],p=[],P=0,we=r.length,V=we-1;P<we;V=P++)Y=r[P],oe=r[V],Y._code&De?oe._code&De||(Xe=H(oe,Y,De,l,d),Xe._code=K(Xe,l),p.push(Xe)):(oe._code&De&&(Xe=H(oe,Y,De,l,d),Xe._code=K(Xe,l),p.push(Xe)),p.push(Y));r=p}return r}function ra(r,l){var d,p,w,P,V,q,Y,oe,we;if(!r||r.length===0)throw new Error("latlngs not passed");ct(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var De=ce([0,0]),Xe=_e(r),sn=Xe.getNorthWest().distanceTo(Xe.getSouthWest())*Xe.getNorthEast().distanceTo(Xe.getNorthWest());sn<1700&&(De=Js(r));var Yt=r.length,tr=[];for(d=0;d<Yt;d++){var On=ce(r[d]);tr.push(l.project(ce([On.lat-De.lat,On.lng-De.lng])))}for(q=Y=oe=0,d=0,p=Yt-1;d<Yt;p=d++)w=tr[d],P=tr[p],V=w.y*P.x-P.y*w.x,Y+=(w.x+P.x)*V,oe+=(w.y+P.y)*V,q+=V*3;q===0?we=tr[0]:we=[Y/q,oe/q];var fo=l.unproject(re(we));return ce([fo.lat+De.lat,fo.lng+De.lng])}function Js(r){for(var l=0,d=0,p=0,w=0;w<r.length;w++){var P=ce(r[w]);l+=P.lat,d+=P.lng,p++}return ce([l/p,d/p])}var eo={__proto__:null,clipPolygon:Xs,polygonCenter:ra,centroid:Js};function Qt(r,l){if(!l||!r.length)return r.slice();var d=l*l;return r=y(r,d),r=Ui(r,d),r}function ia(r,l,d){return Math.sqrt(Be(r,l,d,!0))}function ja(r,l,d){return Be(r,l,d)}function Ui(r,l){var d=r.length,p=typeof Uint8Array<"u"?Uint8Array:Array,w=new p(d);w[0]=w[d-1]=1,h(r,w,l,0,d-1);var P,V=[];for(P=0;P<d;P++)w[P]&&V.push(r[P]);return V}function h(r,l,d,p,w){var P=0,V,q,Y;for(q=p+1;q<=w-1;q++)Y=Be(r[q],r[p],r[w],!0),Y>P&&(V=q,P=Y);P>d&&(l[V]=1,h(r,l,d,p,V),h(r,l,d,V,w))}function y(r,l){for(var d=[r[0]],p=1,w=0,P=r.length;p<P;p++)de(r[p],r[w])>l&&(d.push(r[p]),w=p);return w<P-1&&d.push(r[P-1]),d}var T;function C(r,l,d,p,w){var P=p?T:K(r,d),V=K(l,d),q,Y,oe;for(T=V;;){if(!(P|V))return[r,l];if(P&V)return!1;q=P||V,Y=H(r,l,q,d,w),oe=K(Y,d),q===P?(r=Y,P=oe):(l=Y,V=oe)}}function H(r,l,d,p,w){var P=l.x-r.x,V=l.y-r.y,q=p.min,Y=p.max,oe,we;return d&8?(oe=r.x+P*(Y.y-r.y)/V,we=Y.y):d&4?(oe=r.x+P*(q.y-r.y)/V,we=q.y):d&2?(oe=Y.x,we=r.y+V*(Y.x-r.x)/P):d&1&&(oe=q.x,we=r.y+V*(q.x-r.x)/P),new ne(oe,we,w)}function K(r,l){var d=0;return r.x<l.min.x?d|=1:r.x>l.max.x&&(d|=2),r.y<l.min.y?d|=4:r.y>l.max.y&&(d|=8),d}function de(r,l){var d=l.x-r.x,p=l.y-r.y;return d*d+p*p}function Be(r,l,d,p){var w=l.x,P=l.y,V=d.x-w,q=d.y-P,Y=V*V+q*q,oe;return Y>0&&(oe=((r.x-w)*V+(r.y-P)*q)/Y,oe>1?(w=d.x,P=d.y):oe>0&&(w+=V*oe,P+=q*oe)),V=r.x-w,q=r.y-P,p?V*V+q*q:new ne(w,P)}function ct(r){return!ve(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function mt(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ct(r)}function zt(r,l){var d,p,w,P,V,q,Y,oe;if(!r||r.length===0)throw new Error("latlngs not passed");ct(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var we=ce([0,0]),De=_e(r),Xe=De.getNorthWest().distanceTo(De.getSouthWest())*De.getNorthEast().distanceTo(De.getNorthWest());Xe<1700&&(we=Js(r));var sn=r.length,Yt=[];for(d=0;d<sn;d++){var tr=ce(r[d]);Yt.push(l.project(ce([tr.lat-we.lat,tr.lng-we.lng])))}for(d=0,p=0;d<sn-1;d++)p+=Yt[d].distanceTo(Yt[d+1])/2;if(p===0)oe=Yt[0];else for(d=0,P=0;d<sn-1;d++)if(V=Yt[d],q=Yt[d+1],w=V.distanceTo(q),P+=w,P>p){Y=(P-p)/w,oe=[q.x-Y*(q.x-V.x),q.y-Y*(q.y-V.y)];break}var On=l.unproject(re(oe));return ce([On.lat+we.lat,On.lng+we.lng])}var Jn={__proto__:null,simplify:Qt,pointToSegmentDistance:ia,closestPointOnSegment:ja,clipSegment:C,_getEdgeIntersection:H,_getBitCode:K,_sqClosestPointOnSegment:Be,isFlat:ct,_flat:mt,polylineCenter:zt},Nr={project:function(r){return new ne(r.lng,r.lat)},unproject:function(r){return new Ee(r.y,r.x)},bounds:new z([-180,-90],[180,90])},yr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new z([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var l=Math.PI/180,d=this.R,p=r.lat*l,w=this.R_MINOR/d,P=Math.sqrt(1-w*w),V=P*Math.sin(p),q=Math.tan(Math.PI/4-p/2)/Math.pow((1-V)/(1+V),P/2);return p=-d*Math.log(Math.max(q,1e-10)),new ne(r.lng*l*d,p)},unproject:function(r){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,w=Math.sqrt(1-p*p),P=Math.exp(-r.y/d),V=Math.PI/2-2*Math.atan(P),q=0,Y=.1,oe;q<15&&Math.abs(Y)>1e-7;q++)oe=w*Math.sin(V),oe=Math.pow((1-oe)/(1+oe),w/2),Y=Math.PI/2-2*Math.atan(P*oe)-V,V+=Y;return new Ee(V*l,r.x*l/d)}},ni={__proto__:null,LonLat:Nr,Mercator:yr,SphericalMercator:Rt},to=a({},Ue,{code:"EPSG:3395",projection:yr,transformation:(function(){var r=.5/(Math.PI*yr.R);return ir(r,.5,-r,.5)})()}),no=a({},Ue,{code:"EPSG:4326",projection:Nr,transformation:ir(1/180,1,-1/180,.5)}),Xh=a({},Ge,{projection:Nr,transformation:ir(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,l){var d=l.lng-r.lng,p=l.lat-r.lat;return Math.sqrt(d*d+p*p)},infinite:!0});Ge.Earth=Ue,Ge.EPSG3395=to,Ge.EPSG3857=sr,Ge.EPSG900913=Br,Ge.EPSG4326=no,Ge.Simple=Xh;var Lr=Ye.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[E(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[E(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var l=r.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});et.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var l=E(r);return this._layers[l]?this:(this._layers[l]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var l=E(r);return this._layers[l]?(this._loaded&&r.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return E(r)in this._layers},eachLayer:function(r,l){for(var d in this._layers)r.call(l,this._layers[d]);return this},_addLayers:function(r){r=r?ve(r)?r:[r]:[];for(var l=0,d=r.length;l<d;l++)this.addLayer(r[l])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[E(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var l=E(r);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var w=this._zoomBoundLayers[p].options;r=w.minZoom===void 0?r:Math.min(r,w.minZoom),l=w.maxZoom===void 0?l:Math.max(l,w.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=r===1/0?void 0:r,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Wi=Lr.extend({initialize:function(r,l){te(this,l),this._layers={};var d,p;if(r)for(d=0,p=r.length;d<p;d++)this.addLayer(r[d])},addLayer:function(r){var l=this.getLayerId(r);return this._layers[l]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var l=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(r){var l=typeof r=="number"?r:this.getLayerId(r);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[r]&&p[r].apply(p,l);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,l){for(var d in this._layers)r.call(l,this._layers[d]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return E(r)}}),sa=function(r,l){return new Wi(r,l)},vi=Wi.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),Wi.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),Wi.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new fe;for(var l in this._layers){var d=this._layers[l];r.extend(d.getBounds?d.getBounds():d.getLatLng())}return r}}),Zu=function(r,l){return new vi(r,l)},Is=$e.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){te(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,l){var d=this._getIconUrl(r);if(!d){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(r,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var w=re(p),P=re(l==="shadow"&&d.shadowAnchor||d.iconAnchor||w&&w.divideBy(2,!0));r.className="leaflet-marker-"+l+" "+(d.className||""),P&&(r.style.marginLeft=-P.x+"px",r.style.marginTop=-P.y+"px"),w&&(r.style.width=w.x+"px",r.style.height=w.y+"px")},_createImg:function(r,l){return l=l||document.createElement("img"),l.src=r,l},_getIconUrl:function(r){return ye.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function Ku(r){return new Is(r)}var ro=Is.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof ro.imagePath!="string"&&(ro.imagePath=this._detectIconPath()),(this.options.imagePath||ro.imagePath)+Is.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var l=function(d,p,w){var P=p.exec(d);return P&&P[w]};return r=l(r,/^url\((['"])?(.+)\1\)$/,2),r&&l(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=Ze("div","leaflet-default-icon-path",document.body),l=Vi(r,"background-image")||Vi(r,"backgroundImage");if(document.body.removeChild(r),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),Ul=In.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Dn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Te(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&gt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,w=this._marker.options.autoPanPadding,P=kr(l._icon),V=d.getPixelBounds(),q=d.getPixelOrigin(),Y=J(V.min._subtract(q).add(w),V.max._subtract(q).subtract(w));if(!Y.contains(P)){var oe=re((Math.max(Y.max.x,P.x)-Y.max.x)/(V.max.x-Y.max.x)-(Math.min(Y.min.x,P.x)-Y.min.x)/(V.min.x-Y.min.x),(Math.max(Y.max.y,P.y)-Y.max.y)/(V.max.y-Y.max.y)-(Math.min(Y.min.y,P.y)-Y.min.y)/(V.min.y-Y.min.y)).multiplyBy(p);d.panBy(oe,{animate:!1}),this._draggable._newPos._add(oe),this._draggable._startPos._add(oe),Lt(l._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=D(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(j(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,r)))},_onDrag:function(r){var l=this._marker,d=l._shadow,p=kr(l._icon),w=l._map.layerPointToLatLng(p);d&&Lt(d,p),l._latlng=w,r.latlng=w,r.oldLatLng=this._oldLatLng,l.fire("move",r).fire("drag",r)},_onDragEnd:function(r){j(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),wi=Lr.extend({options:{icon:new ro,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,l){te(this,l),this._latlng=ce(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var l=this._latlng;return this._latlng=ce(r),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=r.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,r.title&&(d.title=r.title),d.tagName==="IMG"&&(d.alt=r.alt||"")),Te(d,l),r.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Oe(d,"focus",this._panOnFocus,this);var w=r.icon.createShadow(this._shadow),P=!1;w!==this._shadow&&(this._removeShadow(),P=!0),w&&(Te(w,l),w.alt=""),this._shadow=w,r.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),w&&P&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_t(this._icon,"focus",this._panOnFocus,this),ut(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ut(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&Lt(this._icon,r),this._shadow&&Lt(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var l=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(Te(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ul)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ul(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&hn(this._icon,r),this._shadow&&hn(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var l=this.options.icon.options,d=l.iconSize?re(l.iconSize):re(0,0),p=l.iconAnchor?re(l.iconAnchor):re(0,0);r.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Jh(r,l){return new wi(r,l)}var Hi=Lr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return te(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ba=Hi.extend({options:{fill:!0,radius:10},initialize:function(r,l){te(this,l),this._latlng=ce(r),this._radius=this.options.radius},setLatLng:function(r){var l=this._latlng;return this._latlng=ce(r),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var l=r&&r.radius||this._radius;return Hi.prototype.setStyle.call(this,r),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,l=this._radiusY||r,d=this._clickTolerance(),p=[r+d,l+d];this._pxBounds=new z(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Qu(r,l){return new Ba(r,l)}var Ua=Ba.extend({initialize:function(r,l,d){if(typeof l=="number"&&(l=a({},d,{radius:l})),te(this,l),this._latlng=ce(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new fe(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:Hi.prototype.setStyle,_project:function(){var r=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===Ue.distance){var w=Math.PI/180,P=this._mRadius/Ue.R/w,V=d.project([l+P,r]),q=d.project([l-P,r]),Y=V.add(q).divideBy(2),oe=d.unproject(Y).lat,we=Math.acos((Math.cos(P*w)-Math.sin(l*w)*Math.sin(oe*w))/(Math.cos(l*w)*Math.cos(oe*w)))/w;(isNaN(we)||we===0)&&(we=P/Math.cos(Math.PI/180*l)),this._point=Y.subtract(d.getPixelOrigin()),this._radius=isNaN(we)?0:Y.x-d.project([oe,r-we]).x,this._radiusY=Y.y-V.y}else{var De=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(De).x}this._updateBounds()}});function oa(r,l,d){return new Ua(r,l,d)}var er=Hi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,l){te(this,l),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var l=1/0,d=null,p=Be,w,P,V=0,q=this._parts.length;V<q;V++)for(var Y=this._parts[V],oe=1,we=Y.length;oe<we;oe++){w=Y[oe-1],P=Y[oe];var De=p(r,w,P,!0);De<l&&(l=De,d=p(r,w,P))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,l){return l=l||this._defaultShape(),r=ce(r),l.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new fe,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return ct(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var l=[],d=ct(r),p=0,w=r.length;p<w;p++)d?(l[p]=ce(r[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(r[p]);return l},_project:function(){var r=new z;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),l=new ne(r,r);this._rawPxBounds&&(this._pxBounds=new z([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(r,l,d){var p=r[0]instanceof Ee,w=r.length,P,V;if(p){for(V=[],P=0;P<w;P++)V[P]=this._map.latLngToLayerPoint(r[P]),d.extend(V[P]);l.push(V)}else for(P=0;P<w;P++)this._projectLatlngs(r[P],l,d)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,w,P,V,q,Y;for(d=0,w=0,P=this._rings.length;d<P;d++)for(Y=this._rings[d],p=0,V=Y.length;p<V-1;p++)q=C(Y[p],Y[p+1],r,p,!0),q&&(l[w]=l[w]||[],l[w].push(q[0]),(q[1]!==Y[p+1]||p===V-2)&&(l[w].push(q[1]),w++))}},_simplifyPoints:function(){for(var r=this._parts,l=this.options.smoothFactor,d=0,p=r.length;d<p;d++)r[d]=Qt(r[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,l){var d,p,w,P,V,q,Y=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(d=0,P=this._parts.length;d<P;d++)for(q=this._parts[d],p=0,V=q.length,w=V-1;p<V;w=p++)if(!(!l&&p===0)&&ia(r,q[w],q[p])<=Y)return!0;return!1}});function ed(r,l){return new er(r,l)}er._flat=mt;var Ei=er.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ra(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var l=er.prototype._convertLatLngs.call(this,r),d=l.length;return d>=2&&l[0]instanceof Ee&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(r){er.prototype._setLatLngs.call(this,r),ct(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ct(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,l=this.options.weight,d=new ne(l,l);if(r=new z(r.min.subtract(d),r.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,w=this._rings.length,P;p<w;p++)P=Xs(this._rings[p],r,!0),P.length&&this._parts.push(P)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var l=!1,d,p,w,P,V,q,Y,oe;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(P=0,Y=this._parts.length;P<Y;P++)for(d=this._parts[P],V=0,oe=d.length,q=oe-1;V<oe;q=V++)p=d[V],w=d[q],p.y>r.y!=w.y>r.y&&r.x<(w.x-p.x)*(r.y-p.y)/(w.y-p.y)+p.x&&(l=!l);return l||er.prototype._containsPoint.call(this,r,!0)}});function td(r,l){return new Ei(r,l)}var ri=vi.extend({initialize:function(r,l){te(this,l),this._layers={},r&&this.addData(r)},addData:function(r){var l=ve(r)?r:r.features,d,p,w;if(l){for(d=0,p=l.length;d<p;d++)w=l[d],(w.geometries||w.geometry||w.features||w.coordinates)&&this.addData(w);return this}var P=this.options;if(P.filter&&!P.filter(r))return this;var V=io(r,P);return V?(V.feature=Ga(r),V.defaultOptions=V.options,this.resetStyle(V),P.onEachFeature&&P.onEachFeature(r,V),this.addLayer(V)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=a({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(l){this._setLayerStyle(l,r)},this)},_setLayerStyle:function(r,l){r.setStyle&&(typeof l=="function"&&(l=l(r.feature)),r.setStyle(l))}});function io(r,l){var d=r.type==="Feature"?r.geometry:r,p=d?d.coordinates:null,w=[],P=l&&l.pointToLayer,V=l&&l.coordsToLatLng||Ha,q,Y,oe,we;if(!p&&!d)return null;switch(d.type){case"Point":return q=V(p),Wa(P,r,q,l);case"MultiPoint":for(oe=0,we=p.length;oe<we;oe++)q=V(p[oe]),w.push(Wa(P,r,q,l));return new vi(w);case"LineString":case"MultiLineString":return Y=aa(p,d.type==="LineString"?0:1,V),new er(Y,l);case"Polygon":case"MultiPolygon":return Y=aa(p,d.type==="Polygon"?1:2,V),new Ei(Y,l);case"GeometryCollection":for(oe=0,we=d.geometries.length;oe<we;oe++){var De=io({geometry:d.geometries[oe],type:"Feature",properties:r.properties},l);De&&w.push(De)}return new vi(w);case"FeatureCollection":for(oe=0,we=d.features.length;oe<we;oe++){var Xe=io(d.features[oe],l);Xe&&w.push(Xe)}return new vi(w);default:throw new Error("Invalid GeoJSON object.")}}function Wa(r,l,d,p){return r?r(l,d):new wi(d,p&&p.markersInheritOptions&&p)}function Ha(r){return new Ee(r[1],r[0],r[2])}function aa(r,l,d){for(var p=[],w=0,P=r.length,V;w<P;w++)V=l?aa(r[w],l-1,d):(d||Ha)(r[w]),p.push(V);return p}function qa(r,l){return r=ce(r),r.alt!==void 0?[M(r.lng,l),M(r.lat,l),M(r.alt,l)]:[M(r.lng,l),M(r.lat,l)]}function $a(r,l,d,p){for(var w=[],P=0,V=r.length;P<V;P++)w.push(l?$a(r[P],ct(r[P])?0:l-1,d,p):qa(r[P],p));return!l&&d&&w.length>0&&w.push(w[0].slice()),w}function so(r,l){return r.feature?a({},r.feature,{geometry:l}):Ga(l)}function Ga(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var Wl={toGeoJSON:function(r){return so(this,{type:"Point",coordinates:qa(this.getLatLng(),r)})}};wi.include(Wl),Ua.include(Wl),Ba.include(Wl),er.include({toGeoJSON:function(r){var l=!ct(this._latlngs),d=$a(this._latlngs,l?1:0,!1,r);return so(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),Ei.include({toGeoJSON:function(r){var l=!ct(this._latlngs),d=l&&!ct(this._latlngs[0]),p=$a(this._latlngs,d?2:l?1:0,!0,r);return l||(p=[p]),so(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),Wi.include({toMultiPoint:function(r){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(r).geometry.coordinates)}),so(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(r){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(r);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(w){if(w.toGeoJSON){var P=w.toGeoJSON(r);if(d)p.push(P.geometry);else{var V=Ga(P);V.type==="FeatureCollection"?p.push.apply(p,V.features):p.push(V)}}}),d?so(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function Yu(r,l){return new ri(r,l)}var Mr=Yu,qi=Lr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,l,d){this._url=r,this._bounds=_e(l),te(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Te(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ut(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&pr(this._image),this},bringToBack:function(){return this._map&&xn(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=_e(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",l=this._image=r?this._url:Ze("img");if(Te(l,"leaflet-image-layer"),this._zoomAnimated&&Te(l,"leaflet-zoom-animated"),this.options.className&&Te(l,this.options.className),l.onselectstart=I,l.onmousemove=I,l.onload=m(this.fire,this,"load"),l.onerror=m(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(r){var l=this._map.getZoomScale(r.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;Zn(this._image,d,l)},_reset:function(){var r=this._image,l=new z(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();Lt(r,l.min),r.style.width=d.x+"px",r.style.height=d.y+"px"},_updateOpacity:function(){hn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),Xu=function(r,l,d){return new qi(r,l,d)},Hl=qi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",l=this._image=r?this._url:Ze("video");if(Te(l,"leaflet-image-layer"),this._zoomAnimated&&Te(l,"leaflet-zoom-animated"),this.options.className&&Te(l,this.options.className),l.onselectstart=I,l.onmousemove=I,l.onloadeddata=m(this.fire,this,"load"),r){for(var d=l.getElementsByTagName("source"),p=[],w=0;w<d.length;w++)p.push(d[w].src);this._url=d.length>0?p:[l.src];return}ve(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var P=0;P<this._url.length;P++){var V=Ze("source");V.src=this._url[P],l.appendChild(V)}}});function Ju(r,l,d){return new Hl(r,l,d)}var ql=qi.extend({_initImage:function(){var r=this._image=this._url;Te(r,"leaflet-image-layer"),this._zoomAnimated&&Te(r,"leaflet-zoom-animated"),this.options.className&&Te(r,this.options.className),r.onselectstart=I,r.onmousemove=I}});function $l(r,l,d){return new ql(r,l,d)}var ii=Lr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,l){r&&(r instanceof Ee||ve(r))?(this._latlng=ce(r),te(this,l)):(te(this,r),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&hn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&hn(this._container,1),this.bringToFront(),this.options.interactive&&(Te(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(hn(this._container,0),this._removeTimeout=setTimeout(m(ut,void 0,this._container),200)):ut(this._container),this.options.interactive&&(gt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=ce(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&pr(this._container),this},bringToBack:function(){return this._map&&xn(this._container),this},_prepareOpen:function(r){var l=this._source;if(!l._map)return!1;if(l instanceof vi){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!r)if(l.getCenter)r=l.getCenter();else if(l.getLatLng)r=l.getLatLng();else if(l.getBounds)r=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")r.innerHTML=l;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),l=re(this.options.offset),d=this._getAnchor();this._zoomAnimated?Lt(this._container,r.add(d)):l=l.add(r).add(d);var p=this._containerBottom=-l.y,w=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=w+"px"}},_getAnchor:function(){return[0,0]}});et.include({_initOverlay:function(r,l,d,p){var w=l;return w instanceof r||(w=new r(p).setContent(l)),d&&w.setLatLng(d),w}}),Lr.include({_initOverlay:function(r,l,d,p){var w=d;return w instanceof r?(te(w,p),w._source=this):(w=l&&!p?l:new r(p,this),w.setContent(d)),w}});var Za=ii.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,ii.prototype.openOn.call(this,r)},onAdd:function(r){ii.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Hi||this._source.on("preclick",lt))},onRemove:function(r){ii.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Hi||this._source.off("preclick",lt))},getEvents:function(){var r=ii.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",l=this._container=Ze("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Ze("div",r+"-content-wrapper",l);if(this._contentNode=Ze("div",r+"-content",d),vs(l),Ks(this._contentNode),Oe(l,"contextmenu",lt),this._tipContainer=Ze("div",r+"-tip-container",l),this._tip=Ze("div",r+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Ze("a",r+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Oe(p,"click",function(w){bt(w),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,l=r.style;l.width="",l.whiteSpace="nowrap";var d=r.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=r.offsetHeight,w=this.options.maxHeight,P="leaflet-popup-scrolled";w&&p>w?(l.height=w+"px",Te(r,P)):gt(r,P),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var l=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),d=this._getAnchor();Lt(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,l=parseInt(Vi(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,w=new ne(this._containerLeft,-d-this._containerBottom);w._add(kr(this._container));var P=r.layerPointToContainerPoint(w),V=re(this.options.autoPanPadding),q=re(this.options.autoPanPaddingTopLeft||V),Y=re(this.options.autoPanPaddingBottomRight||V),oe=r.getSize(),we=0,De=0;P.x+p+Y.x>oe.x&&(we=P.x+p-oe.x+Y.x),P.x-we-q.x<0&&(we=P.x-q.x),P.y+d+Y.y>oe.y&&(De=P.y+d-oe.y+Y.y),P.y-De-q.y<0&&(De=P.y-q.y),(we||De)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([we,De]))}},_getAnchor:function(){return re(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),oo=function(r,l){return new Za(r,l)};et.mergeOptions({closePopupOnClick:!0}),et.include({openPopup:function(r,l,d){return this._initOverlay(Za,r,l,d).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Lr.include({bindPopup:function(r,l){return this._popup=this._initOverlay(Za,this._popup,r,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof vi||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){Ln(r);var l=r.layer||r.target;if(this._popup._source===l&&!(l instanceof Hi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=l,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var ao=ii.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){ii.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){ii.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=ii.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",l=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ze("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+E(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var l,d,p=this._map,w=this._container,P=p.latLngToContainerPoint(p.getCenter()),V=p.layerPointToContainerPoint(r),q=this.options.direction,Y=w.offsetWidth,oe=w.offsetHeight,we=re(this.options.offset),De=this._getAnchor();q==="top"?(l=Y/2,d=oe):q==="bottom"?(l=Y/2,d=0):q==="center"?(l=Y/2,d=oe/2):q==="right"?(l=0,d=oe/2):q==="left"?(l=Y,d=oe/2):V.x<P.x?(q="right",l=0,d=oe/2):(q="left",l=Y+(we.x+De.x)*2,d=oe/2),r=r.subtract(re(l,d,!0)).add(we).add(De),gt(w,"leaflet-tooltip-right"),gt(w,"leaflet-tooltip-left"),gt(w,"leaflet-tooltip-top"),gt(w,"leaflet-tooltip-bottom"),Te(w,"leaflet-tooltip-"+q),Lt(w,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&hn(this._container,r)},_animateZoom:function(r){var l=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(l)},_getAnchor:function(){return re(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),la=function(r,l){return new ao(r,l)};et.include({openTooltip:function(r,l,d){return this._initOverlay(ao,r,l,d).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Lr.include({bindTooltip:function(r,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ao,this._tooltip,r,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var l=r?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof vi||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var l=typeof r.getElement=="function"&&r.getElement();l&&(Oe(l,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),Oe(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var l=typeof r.getElement=="function"&&r.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var l=r.latlng,d,p;this._tooltip.options.sticky&&r.originalEvent&&(d=this._map.mouseEventToContainerPoint(r.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var Ka=Is.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var l=r&&r.tagName==="DIV"?r:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Tn(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=re(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function ec(r){return new Ka(r)}Is.Default=ro;var $i=Lr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ye.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){te(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),ut(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(pr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(xn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=x(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof ne?r:new ne(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var l=this.getPane().children,d=-r(-1/0,1/0),p=0,w=l.length,P;p<w;p++)P=l[p].style.zIndex,l[p]!==this._container&&P&&(d=r(d,+P));isFinite(d)&&(this.options.zIndex=d+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ye.ielt9){hn(this._container,this.options.opacity);var r=+new Date,l=!1,d=!1;for(var p in this._tiles){var w=this._tiles[p];if(!(!w.current||!w.loaded)){var P=Math.min(1,(r-w.loaded)/200);hn(w.el,P),P<1?l=!0:(w.active?d=!0:this._onOpaqueTile(w),w.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(j(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:I,_initContainer:function(){this._container||(this._container=Ze("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,l=this.options.maxZoom;if(r!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===r?(this._levels[d].el.style.zIndex=l-Math.abs(r-d),this._onUpdateLevel(d)):(ut(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[r],w=this._map;return p||(p=this._levels[r]={},p.el=Ze("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=w.project(w.unproject(w.getPixelOrigin()),r).round(),p.zoom=r,this._setZoomTransform(p,w.getCenter(),w.getZoom()),I(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:I,_onRemoveLevel:I,_onCreateLevel:I,_pruneTiles:function(){if(this._map){var r,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)l=this._tiles[r],l.retain=l.current;for(r in this._tiles)if(l=this._tiles[r],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var l in this._tiles)this._tiles[l].coords.z===r&&this._removeTile(l)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)ut(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,l,d,p){var w=Math.floor(r/2),P=Math.floor(l/2),V=d-1,q=new ne(+w,+P);q.z=+V;var Y=this._tileCoordsToKey(q),oe=this._tiles[Y];return oe&&oe.active?(oe.retain=!0,!0):(oe&&oe.loaded&&(oe.retain=!0),V>p?this._retainParent(w,P,V,p):!1)},_retainChildren:function(r,l,d,p){for(var w=2*r;w<2*r+2;w++)for(var P=2*l;P<2*l+2;P++){var V=new ne(w,P);V.z=d+1;var q=this._tileCoordsToKey(V),Y=this._tiles[q];if(Y&&Y.active){Y.retain=!0;continue}else Y&&Y.loaded&&(Y.retain=!0);d+1<p&&this._retainChildren(w,P,d+1,p)}},_resetView:function(r){var l=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var l=this.options;return l.minNativeZoom!==void 0&&r<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<r?l.maxNativeZoom:r},_setView:function(r,l,d,p){var w=Math.round(l);this.options.maxZoom!==void 0&&w>this.options.maxZoom||this.options.minZoom!==void 0&&w<this.options.minZoom?w=void 0:w=this._clampZoom(w);var P=this.options.updateWhenZooming&&w!==this._tileZoom;(!p||P)&&(this._tileZoom=w,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),w!==void 0&&this._update(r),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(r,l)},_setZoomTransforms:function(r,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],r,l)},_setZoomTransform:function(r,l,d){var p=this._map.getZoomScale(d,r.zoom),w=r.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();ye.any3d?Zn(r.el,w,p):Lt(r.el,w)},_resetGrid:function(){var r=this._map,l=r.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,w=this._map.getPixelWorldBounds(this._tileZoom);w&&(this._globalTileRange=this._pxBoundsToTileRange(w)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(r.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(r.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),w=l.project(r,this._tileZoom).floor(),P=l.getSize().divideBy(p*2);return new z(w.subtract(P),w.add(P))},_update:function(r){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(r===void 0&&(r=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(r),w=this._pxBoundsToTileRange(p),P=w.getCenter(),V=[],q=this.options.keepBuffer,Y=new z(w.getBottomLeft().subtract([q,-q]),w.getTopRight().add([q,-q]));if(!(isFinite(w.min.x)&&isFinite(w.min.y)&&isFinite(w.max.x)&&isFinite(w.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var oe in this._tiles){var we=this._tiles[oe].coords;(we.z!==this._tileZoom||!Y.contains(new ne(we.x,we.y)))&&(this._tiles[oe].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(r,d);return}for(var De=w.min.y;De<=w.max.y;De++)for(var Xe=w.min.x;Xe<=w.max.x;Xe++){var sn=new ne(Xe,De);if(sn.z=this._tileZoom,!!this._isValidTile(sn)){var Yt=this._tiles[this._tileCoordsToKey(sn)];Yt?Yt.current=!0:V.push(sn)}}if(V.sort(function(On,fo){return On.distanceTo(P)-fo.distanceTo(P)}),V.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var tr=document.createDocumentFragment();for(Xe=0;Xe<V.length;Xe++)this._addTile(V[Xe],tr);this._level.el.appendChild(tr)}}}},_isValidTile:function(r){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(r.x<d.min.x||r.x>d.max.x)||!l.wrapLat&&(r.y<d.min.y||r.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(r);return _e(this.options.bounds).overlaps(p)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var l=this._map,d=this.getTileSize(),p=r.scaleBy(d),w=p.add(d),P=l.unproject(p,r.z),V=l.unproject(w,r.z);return[P,V]},_tileCoordsToBounds:function(r){var l=this._tileCoordsToNwSe(r),d=new fe(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var l=r.split(":"),d=new ne(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(r){var l=this._tiles[r];l&&(ut(l.el),delete this._tiles[r],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){Te(r,"leaflet-tile");var l=this.getTileSize();r.style.width=l.x+"px",r.style.height=l.y+"px",r.onselectstart=I,r.onmousemove=I,ye.ielt9&&this.options.opacity<1&&hn(r,this.options.opacity)},_addTile:function(r,l){var d=this._getTilePos(r),p=this._tileCoordsToKey(r),w=this.createTile(this._wrapCoords(r),m(this._tileReady,this,r));this._initTile(w),this.createTile.length<2&&D(m(this._tileReady,this,r,null,w)),Lt(w,d),this._tiles[p]={el:w,coords:r,current:!0},l.appendChild(w),this.fire("tileloadstart",{tile:w,coords:r})},_tileReady:function(r,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:r});var p=this._tileCoordsToKey(r);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(hn(d.el,0),j(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(Te(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ye.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(m(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var l=new ne(this._wrapX?b(r.x,this._wrapX):r.x,this._wrapY?b(r.y,this._wrapY):r.y);return l.z=r.z,l},_pxBoundsToTileRange:function(r){var l=this.getTileSize();return new z(r.min.unscaleBy(l).floor(),r.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function lo(r){return new $i(r)}var Gi=$i.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,l){this._url=r,l=te(this,l),l.detectRetina&&ye.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,l){return this._url===r&&l===void 0&&(l=!0),this._url=r,l||this.redraw(),this},createTile:function(r,l){var d=document.createElement("img");return Oe(d,"load",m(this._tileOnLoad,this,l,d)),Oe(d,"error",m(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(r),d},getTileUrl:function(r){var l={r:ye.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-r.y;this.options.tms&&(l.y=d),l["-y"]=d}return pe(this._url,a(l,this.options))},_tileOnLoad:function(r,l){ye.ielt9?setTimeout(m(r,this,null,l),0):r(null,l)},_tileOnError:function(r,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),r(d,l)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(r=l-r),r+p},_getSubdomain:function(r){var l=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var r,l;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(l=this._tiles[r].el,l.onload=I,l.onerror=I,!l.complete)){l.src=Me;var d=this._tiles[r].coords;ut(l),delete this._tiles[r],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(r){var l=this._tiles[r];if(l)return l.el.setAttribute("src",Me),$i.prototype._removeTile.call(this,r)},_tileReady:function(r,l,d){if(!(!this._map||d&&d.getAttribute("src")===Me))return $i.prototype._tileReady.call(this,r,l,d)}});function Gl(r,l){return new Gi(r,l)}var ua=Gi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,l){this._url=r;var d=a({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=te(this,l);var w=l.detectRetina&&ye.retina?2:1,P=this.getTileSize();d.width=P.x*w,d.height=P.y*w,this.wmsParams=d},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Gi.prototype.onAdd.call(this,r)},getTileUrl:function(r){var l=this._tileCoordsToNwSe(r),d=this._crs,p=J(d.project(l[0]),d.project(l[1])),w=p.min,P=p.max,V=(this._wmsVersion>=1.3&&this._crs===no?[w.y,w.x,P.y,P.x]:[w.x,w.y,P.x,P.y]).join(","),q=Gi.prototype.getTileUrl.call(this,r);return q+ee(this.wmsParams,q,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+V},setParams:function(r,l){return a(this.wmsParams,r),l||this.redraw(),this}});function tc(r,l){return new ua(r,l)}Gi.WMS=ua,Gl.wms=tc;var si=Lr.extend({options:{padding:.1},initialize:function(r){te(this,r),E(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Te(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),w=this._map.project(this._center,l),P=p.multiplyBy(-d).add(w).subtract(this._map._getNewPixelOrigin(r,l));ye.any3d?Zn(this._container,P,d):Lt(this._container,P)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-r)).round();this._bounds=new z(d,d.add(l.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Zl=si.extend({options:{tolerance:0},getEvents:function(){var r=si.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){si.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");Oe(r,"mousemove",this._onMouseMove,this),Oe(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Oe(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){j(this._redrawRequest),delete this._ctx,ut(this._container),_t(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var l in this._layers)r=this._layers[l],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){si.prototype._update.call(this);var r=this._bounds,l=this._container,d=r.getSize(),p=ye.retina?2:1;Lt(l,r.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",ye.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){si.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[E(r)]=r;var l=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var l=r._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete r._order,delete this._layers[E(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var l=r.options.dashArray.split(/[, ]+/),d=[],p,w;for(w=0;w<l.length;w++){if(p=Number(l[w]),isNaN(p))return;d.push(p)}r.options._dashArray=d}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var l=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new z,this._redrawBounds.extend(r._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(r._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var l=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)r=p.layer,(!l||r._pxBounds&&r._pxBounds.intersects(l))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,l){if(this._drawing){var d,p,w,P,V=r._parts,q=V.length,Y=this._ctx;if(q){for(Y.beginPath(),d=0;d<q;d++){for(p=0,w=V[d].length;p<w;p++)P=V[d][p],Y[p?"lineTo":"moveTo"](P.x,P.y);l&&Y.closePath()}this._fillStroke(Y,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var l=r._point,d=this._ctx,p=Math.max(Math.round(r._radius),1),w=(Math.max(Math.round(r._radiusY),1)||p)/p;w!==1&&(d.save(),d.scale(1,w)),d.beginPath(),d.arc(l.x,l.y/w,p,0,Math.PI*2,!1),w!==1&&d.restore(),this._fillStroke(d,r)}},_fillStroke:function(r,l){var d=l.options;d.fill&&(r.globalAlpha=d.fillOpacity,r.fillStyle=d.fillColor||d.color,r.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(r.setLineDash&&r.setLineDash(l.options&&l.options._dashArray||[]),r.globalAlpha=d.opacity,r.lineWidth=d.weight,r.strokeStyle=d.color,r.lineCap=d.lineCap,r.lineJoin=d.lineJoin,r.stroke())},_onClick:function(r){for(var l=this._map.mouseEventToLayerPoint(r),d,p,w=this._drawFirst;w;w=w.next)d=w.layer,d.options.interactive&&d._containsPoint(l)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,l)}},_handleMouseOut:function(r){var l=this._hoveredLayer;l&&(gt(this._container,"leaflet-interactive"),this._fireEvent([l],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,l){if(!this._mouseHoverThrottled){for(var d,p,w=this._drawFirst;w;w=w.next)d=w.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(r),p&&(Te(this._container,"leaflet-interactive"),this._fireEvent([p],r,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(m(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,l,d){this._map._fireDOMEvent(l,d||l.type,r)},_bringToFront:function(r){var l=r._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(r)}},_bringToBack:function(r){var l=r._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(r)}}});function Kl(r){return ye.canvas?new Zl(r):null}var uo=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),nc={_initContainer:function(){this._container=Ze("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(si.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var l=r._container=uo("shape");Te(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",r._path=uo("path"),l.appendChild(r._path),this._updateStyle(r),this._layers[E(r)]=r},_addPath:function(r){var l=r._container;this._container.appendChild(l),r.options.interactive&&r.addInteractiveTarget(l)},_removePath:function(r){var l=r._container;ut(l),r.removeInteractiveTarget(l),delete this._layers[E(r)]},_updateStyle:function(r){var l=r._stroke,d=r._fill,p=r.options,w=r._container;w.stroked=!!p.stroke,w.filled=!!p.fill,p.stroke?(l||(l=r._stroke=uo("stroke")),w.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=ve(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(w.removeChild(l),r._stroke=null),p.fill?(d||(d=r._fill=uo("fill")),w.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(w.removeChild(d),r._fill=null)},_updateCircle:function(r){var l=r._point.round(),d=Math.round(r._radius),p=Math.round(r._radiusY||d);this._setPath(r,r._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(r,l){r._path.v=l},_bringToFront:function(r){pr(r._container)},_bringToBack:function(r){xn(r._container)}},Dr=ye.vml?uo:ls,Ss=si.extend({_initContainer:function(){this._container=Dr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Dr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ut(this._container),_t(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){si.prototype._update.call(this);var r=this._bounds,l=r.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),Lt(d,r.min),d.setAttribute("viewBox",[r.min.x,r.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(r){var l=r._path=Dr("path");r.options.className&&Te(l,r.options.className),r.options.interactive&&Te(l,"leaflet-interactive"),this._updateStyle(r),this._layers[E(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){ut(r._path),r.removeInteractiveTarget(r._path),delete this._layers[E(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var l=r._path,d=r.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(r,l){this._setPath(r,Ur(r._parts,l))},_updateCircle:function(r){var l=r._point,d=Math.max(Math.round(r._radius),1),p=Math.max(Math.round(r._radiusY),1)||d,w="a"+d+","+p+" 0 1,0 ",P=r._empty()?"M0 0":"M"+(l.x-d)+","+l.y+w+d*2+",0 "+w+-d*2+",0 ";this._setPath(r,P)},_setPath:function(r,l){r._path.setAttribute("d",l)},_bringToFront:function(r){pr(r._path)},_bringToBack:function(r){xn(r._path)}});ye.vml&&Ss.include(nc);function Qa(r){return ye.svg||ye.vml?new Ss(r):null}et.include({getRenderer:function(r){var l=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var l=this._paneRenderers[r];return l===void 0&&(l=this._createRenderer({pane:r}),this._paneRenderers[r]=l),l},_createRenderer:function(r){return this.options.preferCanvas&&Kl(r)||Qa(r)}});var rc=Ei.extend({initialize:function(r,l){Ei.prototype.initialize.call(this,this._boundsToLatLngs(r),l)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=_e(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function nd(r,l){return new rc(r,l)}Ss.create=Dr,Ss.pointsToPath=Ur,ri.geometryToLayer=io,ri.coordsToLatLng=Ha,ri.coordsToLatLngs=aa,ri.latLngToCoords=qa,ri.latLngsToCoords=$a,ri.getFeature=so,ri.asFeature=Ga,et.mergeOptions({boxZoom:!0});var co=In.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){Oe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){_t(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ut(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Je(),gs(),this._startPoint=this._map.mouseEventToContainerPoint(r),Oe(document,{contextmenu:Ln,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=Ze("div","leaflet-zoom-box",this._container),Te(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var l=new z(this._point,this._startPoint),d=l.getSize();Lt(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(ut(this._box),gt(this._container,"leaflet-crosshair")),Nn(),_s(),_t(document,{contextmenu:Ln,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(m(this._resetState,this),0);var l=new fe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});et.addInitHook("addHandler","boxZoom",co),et.mergeOptions({doubleClickZoom:!0});var ic=In.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,w=r.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(w):l.setZoomAround(r.containerPoint,w)}});et.addInitHook("addHandler","doubleClickZoom",ic),et.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ql=In.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Dn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}Te(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){gt(this._map._container,"leaflet-grab"),gt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=_e(this._map.options.maxBounds);this._offsetLimit=J(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,l){return r-(r-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;r.x<l.min.x&&(r.x=this._viscousLimit(r.x,l.min.x)),r.y<l.min.y&&(r.y=this._viscousLimit(r.y,l.min.y)),r.x>l.max.x&&(r.x=this._viscousLimit(r.x,l.max.x)),r.y>l.max.y&&(r.y=this._viscousLimit(r.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,l=Math.round(r/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,w=(p-l+d)%r+l-d,P=(p+l+d)%r-l-d,V=Math.abs(w+d)<Math.abs(P+d)?w:P;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=V},_onDragEnd:function(r){var l=this._map,d=l.options,p=!d.inertia||r.noInertia||this._times.length<2;if(l.fire("dragend",r),p)l.fire("moveend");else{this._prunePositions(+new Date);var w=this._lastPos.subtract(this._positions[0]),P=(this._lastTime-this._times[0])/1e3,V=d.easeLinearity,q=w.multiplyBy(V/P),Y=q.distanceTo([0,0]),oe=Math.min(d.inertiaMaxSpeed,Y),we=q.multiplyBy(oe/Y),De=oe/(d.inertiaDeceleration*V),Xe=we.multiplyBy(-De/2).round();!Xe.x&&!Xe.y?l.fire("moveend"):(Xe=l._limitOffset(Xe,l.options.maxBounds),D(function(){l.panBy(Xe,{duration:De,easeLinearity:V,noMoveStart:!0,animate:!0})}))}}});et.addInitHook("addHandler","dragging",Ql),et.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Yl=In.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),Oe(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),_t(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,l=document.documentElement,d=r.scrollTop||l.scrollTop,p=r.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var l=this._panKeys={},d=this.keyCodes,p,w;for(p=0,w=d.left.length;p<w;p++)l[d.left[p]]=[-1*r,0];for(p=0,w=d.right.length;p<w;p++)l[d.right[p]]=[r,0];for(p=0,w=d.down.length;p<w;p++)l[d.down[p]]=[0,r];for(p=0,w=d.up.length;p<w;p++)l[d.up[p]]=[0,-1*r]},_setZoomDelta:function(r){var l=this._zoomKeys={},d=this.keyCodes,p,w;for(p=0,w=d.zoomIn.length;p<w;p++)l[d.zoomIn[p]]=r;for(p=0,w=d.zoomOut.length;p<w;p++)l[d.zoomOut[p]]=-r},_addHooks:function(){Oe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){_t(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var l=r.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],r.shiftKey&&(p=re(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(re(p),d.options.maxBounds)),d.options.worldCopyJump){var w=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(w)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;Ln(r)}}});et.addInitHook("addHandler","keyboard",Yl),et.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xt=In.extend({addHooks:function(){Oe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){_t(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var l=ea(r),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(m(this._performZoom,this),p),Ln(r)},_performZoom:function(){var r=this._map,l=r.getZoom(),d=this._map.options.zoomSnap||0;r._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),w=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,P=d?Math.ceil(w/d)*d:w,V=r._limitZoom(l+(this._delta>0?P:-P))-l;this._delta=0,this._startTime=null,V&&(r.options.scrollWheelZoom==="center"?r.setZoom(l+V):r.setZoomAround(this._lastMousePos,l+V))}});et.addInitHook("addHandler","scrollWheelZoom",xt);var Xl=600;et.mergeOptions({tapHold:ye.touchNative&&ye.safari&&ye.mobile,tapTolerance:15});var ca=In.extend({addHooks:function(){Oe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){_t(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var l=r.touches[0];this._startPos=this._newPos=new ne(l.clientX,l.clientY),this._holdTimeout=setTimeout(m(function(){this._cancel(),this._isTapValid()&&(Oe(document,"touchend",bt),Oe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),Xl),Oe(document,"touchend touchcancel contextmenu",this._cancel,this),Oe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){_t(document,"touchend",bt),_t(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),_t(document,"touchend touchcancel contextmenu",this._cancel,this),_t(document,"touchmove",this._onMove,this)},_onMove:function(r){var l=r.touches[0];this._newPos=new ne(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,l){var d=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});et.addInitHook("addHandler","tapHold",ca),et.mergeOptions({touchZoom:ye.touch,bounceAtZoomLimits:!0});var ho=In.extend({addHooks:function(){Te(this._map._container,"leaflet-touch-zoom"),Oe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){gt(this._map._container,"leaflet-touch-zoom"),_t(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var l=this._map;if(!(!r.touches||r.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(r.touches[0]),p=l.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Oe(document,"touchmove",this._onTouchMove,this),Oe(document,"touchend touchcancel",this._onTouchEnd,this),bt(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(r.touches[0]),p=l.mouseEventToContainerPoint(r.touches[1]),w=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(w,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&w<1||this._zoom>l.getMaxZoom()&&w>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,w===1)return}else{var P=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(w===1&&P.x===0&&P.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(P),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),j(this._animRequest);var V=m(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(V,this,!0),bt(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,j(this._animRequest),_t(document,"touchmove",this._onTouchMove,this),_t(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});et.addInitHook("addHandler","touchZoom",ho),et.BoxZoom=co,et.DoubleClickZoom=ic,et.Drag=Ql,et.Keyboard=Yl,et.ScrollWheelZoom=xt,et.TapHold=ca,et.TouchZoom=ho,t.Bounds=z,t.Browser=ye,t.CRS=Ge,t.Canvas=Zl,t.Circle=Ua,t.CircleMarker=Ba,t.Class=$e,t.Control=dn,t.DivIcon=Ka,t.DivOverlay=ii,t.DomEvent=Jr,t.DomUtil=ys,t.Draggable=Dn,t.Evented=Ye,t.FeatureGroup=vi,t.GeoJSON=ri,t.GridLayer=$i,t.Handler=In,t.Icon=Is,t.ImageOverlay=qi,t.LatLng=Ee,t.LatLngBounds=fe,t.Layer=Lr,t.LayerGroup=Wi,t.LineUtil=Jn,t.Map=et,t.Marker=wi,t.Mixin=Ys,t.Path=Hi,t.Point=ne,t.PolyUtil=eo,t.Polygon=Ei,t.Polyline=er,t.Popup=Za,t.PosAnimation=Es,t.Projection=ni,t.Rectangle=rc,t.Renderer=si,t.SVG=Ss,t.SVGOverlay=ql,t.TileLayer=Gi,t.Tooltip=ao,t.Transformation=jr,t.Util=k,t.VideoOverlay=Hl,t.bind=m,t.bounds=J,t.canvas=Kl,t.circle=oa,t.circleMarker=Qu,t.control=Xn,t.divIcon=ec,t.extend=a,t.featureGroup=Zu,t.geoJSON=Yu,t.geoJson=Mr,t.gridLayer=lo,t.icon=Ku,t.imageOverlay=Xu,t.latLng=ce,t.latLngBounds=_e,t.layerGroup=sa,t.map=Yn,t.marker=Jh,t.point=re,t.polygon=td,t.polyline=ed,t.popup=oo,t.rectangle=nd,t.setOptions=te,t.stamp=E,t.svg=Qa,t.svgOverlay=$l,t.tileLayer=Gl,t.tooltip=la,t.transformation=ir,t.version=s,t.videoOverlay=Ju;var sc=window.L;t.noConflict=function(){return window.L=sc,this},window.L=t}))})(_u,_u.exports)),_u.exports}var Gw=$w();const $c=rm(Gw);function Zw({reports:i,onReportClick:e,onMapClick:t,selectedLocation:s,userLocation:a,zoom:c=16}){const m=rt.useRef(null),v=rt.useRef(null),E=rt.useRef([]),x=b=>{let I="#3b82f6",M="";return b.mode==="suggestion"?(I="#4f46e5",M=""):b.status==="nouveau"?(I="#ef4444",M=""):b.status==="en_cours"?(I="#f59e0b",M=""):b.status==="resolu"&&(I="#10b981",M=""),$c.divIcon({html:`<div style="background-color: ${I}; border-radius: 50%; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.3); font-size: 16px;">${M}</div>`,className:"custom-marker",iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-16]})};return rt.useEffect(()=>{if(!m.current||v.current)return;const b=$c.map(m.current).setView([a.lat,a.lng],c??19);return $c.tileLayer("https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',maxZoom:20}).addTo(b),v.current=b,setTimeout(()=>b.invalidateSize(),0),()=>{b.remove(),v.current=null}},[]),rt.useEffect(()=>{if(!v.current)return;const b=v.current,I=M=>{t==null||t(M.latlng.lat,M.latlng.lng)};return b.on("click",I),()=>{b.off("click",I)}},[t]),rt.useEffect(()=>{v.current&&(E.current.forEach(b=>b.remove()),E.current=[],i.forEach(b=>{const I=$c.marker([b.location.lat,b.location.lng],{icon:x(b)}).addTo(v.current);e&&I.on("click",()=>e(b)),E.current.push(I)}))},[i,e]),N.jsx("div",{ref:m,style:{height:"100%",width:"100%"},className:"z-0"})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Qw=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Og=i=>{const e=Qw(i);return e.charAt(0).toUpperCase()+e.slice(1)},Ty=(...i)=>i.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=rt.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:c,iconNode:m,...v},E)=>rt.createElement("svg",{ref:E,...Yw,width:e,height:e,stroke:i,strokeWidth:s?Number(t)*24/Number(e):t,className:Ty("lucide",a),...v},[...m.map(([x,b])=>rt.createElement(x,b)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=(i,e)=>{const t=rt.forwardRef(({className:s,...a},c)=>rt.createElement(Xw,{ref:c,iconNode:e,className:Ty(`lucide-${Kw(Og(i))}`,`lucide-${i}`,s),...a}));return t.displayName=Og(i),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],xy=un("calendar",Jw);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],tE=un("camera",eE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],rE=un("check",nE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Iy=un("circle-alert",iE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Cf=un("circle-check-big",sE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],aE=un("funnel",oE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],uE=un("layers",lE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],hE=un("log-out",cE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],sm=un("map-pin",dE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],mE=un("map",fE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],gE=un("plus",pE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],yE=un("shield-check",_E);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],wE=un("star",vE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],mf=un("thumbs-up",EE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Vg=un("triangle-alert",TE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],IE=un("trophy",xE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],om=un("user",SE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],bE=un("wrench",PE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Rh=un("x",CE),AE=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(`
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="700" viewBox="0 0 1200 700">
  <defs>
    <linearGradient id="g" x1="0" x2="1" y1="0" y2="1">
      <stop offset="0" stop-color="#EEF2FF"/>
      <stop offset="1" stop-color="#E0E7FF"/>
    </linearGradient>
  </defs>
  <rect width="1200" height="700" fill="url(#g)"/>
  <g fill="#4F46E5" opacity="0.12">
    <circle cx="180" cy="140" r="110"/>
    <circle cx="1040" cy="170" r="130"/>
    <circle cx="980" cy="560" r="150"/>
    <circle cx="220" cy="540" r="150"/>
  </g>
  <g font-family="Poppins, Arial, sans-serif" text-anchor="middle">
    <text x="600" y="330" font-size="44" fill="#111827" font-weight="700">Suggestion</text>
    <text x="600" y="390" font-size="22" fill="#374151">Ajoute une photo si tu veux (facultatif)</text>
  </g>
</svg>
`)}`;function kE({onSubmit:i,onCancel:e,initialLocation:t,onLocationSelect:s}){const[a,c]=rt.useState("probleme"),[m,v]=rt.useState("usure"),[E,x]=rt.useState("autre"),[b,I]=rt.useState(""),[M,$]=rt.useState(""),[Q,te]=rt.useState(null),ee=async ge=>{var je;const Me=(je=ge.target.files)==null?void 0:je[0];if(Me)try{const F=await Ae(Me,1024,1024,.65);$(F),pe()}catch(F){console.error("Erreur traitement photo:",F),alert("Impossible de traiter la photo.")}};async function Ae(ge,Me=1024,je=1024,F=.65){const A=document.createElement("img"),O=URL.createObjectURL(ge);await new Promise((at,be)=>{A.onload=()=>at(),A.onerror=()=>be(new Error("Image load failed")),A.src=O});let{width:U,height:D}=A;const j=Math.min(Me/U,je/D,1);U=Math.round(U*j),D=Math.round(D*j);const k=document.createElement("canvas");k.width=U,k.height=D;const $e=k.getContext("2d");if(!$e)throw new Error("Canvas context not available");return $e.drawImage(A,0,0,U,D),URL.revokeObjectURL(O),k.toDataURL("image/jpeg",F)}const pe=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(ge=>{const Me={lat:ge.coords.latitude,lng:ge.coords.longitude};te(Me)},ge=>{console.error("Erreur de golocalisation:",ge),te({lat:50.6292,lng:3.0573})},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0}):te({lat:50.6292,lng:3.0573})},ve=ge=>{if(ge.preventDefault(),!Q||!b){alert("Veuillez remplir tous les champs obligatoires");return}if(a!=="suggestion"&&!M){alert("Veuillez ajouter une photo");return}i({mode:a,type:a==="probleme"?m:void 0,category:E,description:b,photo:M||AE,location:Q})};return N.jsx("div",{className:"px-4 pb-4",children:N.jsxs("form",{onSubmit:ve,className:"space-y-4",children:[N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium mb-2",children:"Type de signalement"}),N.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[N.jsxs("button",{type:"button",onClick:()=>c("probleme"),className:`py-3 px-3 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2 ${a==="probleme"?"bg-red-500 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[N.jsx(Vg,{size:18}),"Problme"]}),N.jsxs("button",{type:"button",onClick:()=>c("mobilier"),className:`py-3 px-3 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2 ${a==="mobilier"?"bg-green-500 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[N.jsx(Cf,{size:18}),"Mobilier OK"]}),N.jsxs("button",{type:"button",onClick:()=>c("suggestion"),className:`py-3 px-3 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2 ${a==="suggestion"?"bg-indigo-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[N.jsx("span",{className:"text-base leading-none",children:""}),"Suggestion"]})]}),N.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[N.jsx("span",{className:"font-medium",children:"Suggestion"})," = proposer un nouveau mobilier, un amnagement, une ide pour simplifier la mobilit"]})]}),a==="probleme"&&N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium mb-2",children:"Type de problme"}),N.jsx("div",{className:"grid grid-cols-2 gap-2",children:["usure","vandalisme"].map(ge=>N.jsx("button",{type:"button",onClick:()=>v(ge),className:`py-2 px-3 rounded-lg text-sm font-medium transition-colors ${m===ge?"bg-orange-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:ge.charAt(0).toUpperCase()+ge.slice(1)},ge))})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium mb-2",children:"Catgorie"}),N.jsxs("select",{value:E,onChange:ge=>x(ge.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[N.jsx("option",{value:"mobilier",children:"Mobilier urbain"}),N.jsx("option",{value:"signalisation",children:"Signalisation"}),N.jsx("option",{value:"mobilite",children:"Mobilit"}),N.jsx("option",{value:"autre",children:"Autre"})]})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),N.jsx("textarea",{value:b,onChange:ge=>I(ge.target.value),placeholder:a==="probleme"?"Dcrivez le problme constat...":a==="mobilier"?"Dcrivez le mobilier (ex: Banc en bois, Panneau d'information...)":"Dcrivez votre ide (ex: ajouter un banc, crer une rampe, amliorer un passage piton...)",rows:3,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium mb-2",children:"Photo"}),a==="suggestion"&&N.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Optionnelle (tu peux illustrer lendroit ou lide)."}),M?N.jsxs("div",{className:"relative",children:[N.jsx("img",{src:M,alt:"Preview",className:"w-full h-48 object-cover rounded-lg"}),Q&&N.jsxs("div",{className:"absolute bottom-2 left-2 bg-green-500 text-white px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1 shadow-lg",children:[N.jsx(sm,{size:14}),"Position capture"]}),N.jsx("button",{type:"button",onClick:()=>{$(""),te(null)},className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600",children:N.jsx(Rh,{size:16})})]}):N.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[N.jsx(tE,{size:32,className:"text-gray-400 mb-2"}),N.jsx("span",{className:"text-sm text-gray-500",children:"Cliquez pour prendre une photo"}),N.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:ee,hidden:!0})]})]}),N.jsxs("div",{className:"flex gap-3 pt-2",children:[N.jsx("button",{type:"button",onClick:e,className:"flex-1 py-3 px-4 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300",children:"Rinitialiser"}),N.jsxs("button",{type:"submit",className:"flex-1 py-3 px-4 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 flex items-center justify-center gap-2",children:[N.jsx(rE,{size:20}),"Envoyer"]})]}),N.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{id:"probleme",label:"Problme",icon:N.jsx(Vg,{size:18}),color:"bg-red-500"},{id:"mobilier",label:"Mobilier",icon:N.jsx(Cf,{size:18}),color:"bg-emerald-500"},{id:"suggestion",label:"Ide",icon:"",color:"bg-indigo-600"}].map(ge=>N.jsxs("button",{type:"button",onClick:()=>c(ge.id),className:`flex flex-col items-center justify-center p-4 rounded-2xl transition-all border-2 ${a===ge.id?`${ge.color} text-white border-transparent shadow-lg scale-105`:"bg-slate-50 text-slate-600 border-slate-100 hover:bg-slate-100"}`,children:[N.jsx("span",{className:"mb-1",children:ge.icon}),N.jsx("span",{className:"text-[11px] font-bold uppercase tracking-tighter",children:ge.label})]},ge.id))})]})})}function Ni(i){const e=Object.prototype.toString.call(i);return i instanceof Date||typeof i=="object"&&e==="[object Date]"?new i.constructor(+i):typeof i=="number"||e==="[object Number]"||typeof i=="string"||e==="[object String]"?new Date(i):new Date(NaN)}function ba(i,e){return i instanceof Date?new i.constructor(e):new Date(e)}const Sy=6048e5,RE=864e5;let NE={};function Nh(){return NE}function Cu(i,e){var v,E,x,b;const t=Nh(),s=(e==null?void 0:e.weekStartsOn)??((E=(v=e==null?void 0:e.locale)==null?void 0:v.options)==null?void 0:E.weekStartsOn)??t.weekStartsOn??((b=(x=t.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)??0,a=Ni(i),c=a.getDay(),m=(c<s?7:0)+c-s;return a.setDate(a.getDate()-m),a.setHours(0,0,0,0),a}function ch(i){return Cu(i,{weekStartsOn:1})}function Py(i){const e=Ni(i),t=e.getFullYear(),s=ba(i,0);s.setFullYear(t+1,0,4),s.setHours(0,0,0,0);const a=ch(s),c=ba(i,0);c.setFullYear(t,0,4),c.setHours(0,0,0,0);const m=ch(c);return e.getTime()>=a.getTime()?t+1:e.getTime()>=m.getTime()?t:t-1}function zg(i){const e=Ni(i);return e.setHours(0,0,0,0),e}function Fg(i){const e=Ni(i),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+i-+t}function LE(i,e){const t=zg(i),s=zg(e),a=+t-Fg(t),c=+s-Fg(s);return Math.round((a-c)/RE)}function ME(i){const e=Py(i),t=ba(i,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),ch(t)}function DE(i){return i instanceof Date||typeof i=="object"&&Object.prototype.toString.call(i)==="[object Date]"}function OE(i){if(!DE(i)&&typeof i!="number")return!1;const e=Ni(i);return!isNaN(Number(e))}function VE(i){const e=Ni(i),t=ba(i,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const zE={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},FE=(i,e,t)=>{let s;const a=zE[i];return typeof a=="string"?s=a:e===1?s=a.one:s=a.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+s:s+" ago":s};function yl(i){return(e={})=>{const t=e.width?String(e.width):i.defaultWidth;return i.formats[t]||i.formats[i.defaultWidth]}}const jE={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},BE={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},UE={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},WE={date:yl({formats:jE,defaultWidth:"full"}),time:yl({formats:BE,defaultWidth:"full"}),dateTime:yl({formats:UE,defaultWidth:"full"})},HE={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},qE=(i,e,t,s)=>HE[i];function es(i){return(e,t)=>{const s=t!=null&&t.context?String(t.context):"standalone";let a;if(s==="formatting"&&i.formattingValues){const m=i.defaultFormattingWidth||i.defaultWidth,v=t!=null&&t.width?String(t.width):m;a=i.formattingValues[v]||i.formattingValues[m]}else{const m=i.defaultWidth,v=t!=null&&t.width?String(t.width):i.defaultWidth;a=i.values[v]||i.values[m]}const c=i.argumentCallback?i.argumentCallback(e):e;return a[c]}}const $E={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},GE={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ZE={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},KE={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},QE={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},YE={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},XE=(i,e)=>{const t=Number(i),s=t%100;if(s>20||s<10)switch(s%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},JE={ordinalNumber:XE,era:es({values:$E,defaultWidth:"wide"}),quarter:es({values:GE,defaultWidth:"wide",argumentCallback:i=>i-1}),month:es({values:ZE,defaultWidth:"wide"}),day:es({values:KE,defaultWidth:"wide"}),dayPeriod:es({values:QE,defaultWidth:"wide",formattingValues:YE,defaultFormattingWidth:"wide"})};function ts(i){return(e,t={})=>{const s=t.width,a=s&&i.matchPatterns[s]||i.matchPatterns[i.defaultMatchWidth],c=e.match(a);if(!c)return null;const m=c[0],v=s&&i.parsePatterns[s]||i.parsePatterns[i.defaultParseWidth],E=Array.isArray(v)?tT(v,I=>I.test(m)):eT(v,I=>I.test(m));let x;x=i.valueCallback?i.valueCallback(E):E,x=t.valueCallback?t.valueCallback(x):x;const b=e.slice(m.length);return{value:x,rest:b}}}function eT(i,e){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&e(i[t]))return t}function tT(i,e){for(let t=0;t<i.length;t++)if(e(i[t]))return t}function by(i){return(e,t={})=>{const s=e.match(i.matchPattern);if(!s)return null;const a=s[0],c=e.match(i.parsePattern);if(!c)return null;let m=i.valueCallback?i.valueCallback(c[0]):c[0];m=t.valueCallback?t.valueCallback(m):m;const v=e.slice(a.length);return{value:m,rest:v}}}const nT=/^(\d+)(th|st|nd|rd)?/i,rT=/\d+/i,iT={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},sT={any:[/^b/i,/^(a|c)/i]},oT={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},aT={any:[/1/i,/2/i,/3/i,/4/i]},lT={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},uT={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},cT={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},hT={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},dT={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fT={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},mT={ordinalNumber:by({matchPattern:nT,parsePattern:rT,valueCallback:i=>parseInt(i,10)}),era:ts({matchPatterns:iT,defaultMatchWidth:"wide",parsePatterns:sT,defaultParseWidth:"any"}),quarter:ts({matchPatterns:oT,defaultMatchWidth:"wide",parsePatterns:aT,defaultParseWidth:"any",valueCallback:i=>i+1}),month:ts({matchPatterns:lT,defaultMatchWidth:"wide",parsePatterns:uT,defaultParseWidth:"any"}),day:ts({matchPatterns:cT,defaultMatchWidth:"wide",parsePatterns:hT,defaultParseWidth:"any"}),dayPeriod:ts({matchPatterns:dT,defaultMatchWidth:"any",parsePatterns:fT,defaultParseWidth:"any"})},pT={code:"en-US",formatDistance:FE,formatLong:WE,formatRelative:qE,localize:JE,match:mT,options:{weekStartsOn:0,firstWeekContainsDate:1}};function gT(i){const e=Ni(i);return LE(e,VE(e))+1}function _T(i){const e=Ni(i),t=+ch(e)-+ME(e);return Math.round(t/Sy)+1}function Cy(i,e){var b,I,M,$;const t=Ni(i),s=t.getFullYear(),a=Nh(),c=(e==null?void 0:e.firstWeekContainsDate)??((I=(b=e==null?void 0:e.locale)==null?void 0:b.options)==null?void 0:I.firstWeekContainsDate)??a.firstWeekContainsDate??(($=(M=a.locale)==null?void 0:M.options)==null?void 0:$.firstWeekContainsDate)??1,m=ba(i,0);m.setFullYear(s+1,0,c),m.setHours(0,0,0,0);const v=Cu(m,e),E=ba(i,0);E.setFullYear(s,0,c),E.setHours(0,0,0,0);const x=Cu(E,e);return t.getTime()>=v.getTime()?s+1:t.getTime()>=x.getTime()?s:s-1}function yT(i,e){var v,E,x,b;const t=Nh(),s=(e==null?void 0:e.firstWeekContainsDate)??((E=(v=e==null?void 0:e.locale)==null?void 0:v.options)==null?void 0:E.firstWeekContainsDate)??t.firstWeekContainsDate??((b=(x=t.locale)==null?void 0:x.options)==null?void 0:b.firstWeekContainsDate)??1,a=Cy(i,e),c=ba(i,0);return c.setFullYear(a,0,s),c.setHours(0,0,0,0),Cu(c,e)}function vT(i,e){const t=Ni(i),s=+Cu(t,e)-+yT(t,e);return Math.round(s/Sy)+1}function Et(i,e){const t=i<0?"-":"",s=Math.abs(i).toString().padStart(e,"0");return t+s}const Co={y(i,e){const t=i.getFullYear(),s=t>0?t:1-t;return Et(e==="yy"?s%100:s,e.length)},M(i,e){const t=i.getMonth();return e==="M"?String(t+1):Et(t+1,2)},d(i,e){return Et(i.getDate(),e.length)},a(i,e){const t=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(i,e){return Et(i.getHours()%12||12,e.length)},H(i,e){return Et(i.getHours(),e.length)},m(i,e){return Et(i.getMinutes(),e.length)},s(i,e){return Et(i.getSeconds(),e.length)},S(i,e){const t=e.length,s=i.getMilliseconds(),a=Math.trunc(s*Math.pow(10,t-3));return Et(a,e.length)}},dl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},jg={G:function(i,e,t){const s=i.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(s,{width:"abbreviated"});case"GGGGG":return t.era(s,{width:"narrow"});case"GGGG":default:return t.era(s,{width:"wide"})}},y:function(i,e,t){if(e==="yo"){const s=i.getFullYear(),a=s>0?s:1-s;return t.ordinalNumber(a,{unit:"year"})}return Co.y(i,e)},Y:function(i,e,t,s){const a=Cy(i,s),c=a>0?a:1-a;if(e==="YY"){const m=c%100;return Et(m,2)}return e==="Yo"?t.ordinalNumber(c,{unit:"year"}):Et(c,e.length)},R:function(i,e){const t=Py(i);return Et(t,e.length)},u:function(i,e){const t=i.getFullYear();return Et(t,e.length)},Q:function(i,e,t){const s=Math.ceil((i.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return Et(s,2);case"Qo":return t.ordinalNumber(s,{unit:"quarter"});case"QQQ":return t.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(s,{width:"wide",context:"formatting"})}},q:function(i,e,t){const s=Math.ceil((i.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return Et(s,2);case"qo":return t.ordinalNumber(s,{unit:"quarter"});case"qqq":return t.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(s,{width:"wide",context:"standalone"})}},M:function(i,e,t){const s=i.getMonth();switch(e){case"M":case"MM":return Co.M(i,e);case"Mo":return t.ordinalNumber(s+1,{unit:"month"});case"MMM":return t.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(s,{width:"wide",context:"formatting"})}},L:function(i,e,t){const s=i.getMonth();switch(e){case"L":return String(s+1);case"LL":return Et(s+1,2);case"Lo":return t.ordinalNumber(s+1,{unit:"month"});case"LLL":return t.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(s,{width:"wide",context:"standalone"})}},w:function(i,e,t,s){const a=vT(i,s);return e==="wo"?t.ordinalNumber(a,{unit:"week"}):Et(a,e.length)},I:function(i,e,t){const s=_T(i);return e==="Io"?t.ordinalNumber(s,{unit:"week"}):Et(s,e.length)},d:function(i,e,t){return e==="do"?t.ordinalNumber(i.getDate(),{unit:"date"}):Co.d(i,e)},D:function(i,e,t){const s=gT(i);return e==="Do"?t.ordinalNumber(s,{unit:"dayOfYear"}):Et(s,e.length)},E:function(i,e,t){const s=i.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(s,{width:"short",context:"formatting"});case"EEEE":default:return t.day(s,{width:"wide",context:"formatting"})}},e:function(i,e,t,s){const a=i.getDay(),c=(a-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(c);case"ee":return Et(c,2);case"eo":return t.ordinalNumber(c,{unit:"day"});case"eee":return t.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(a,{width:"short",context:"formatting"});case"eeee":default:return t.day(a,{width:"wide",context:"formatting"})}},c:function(i,e,t,s){const a=i.getDay(),c=(a-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(c);case"cc":return Et(c,e.length);case"co":return t.ordinalNumber(c,{unit:"day"});case"ccc":return t.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(a,{width:"narrow",context:"standalone"});case"cccccc":return t.day(a,{width:"short",context:"standalone"});case"cccc":default:return t.day(a,{width:"wide",context:"standalone"})}},i:function(i,e,t){const s=i.getDay(),a=s===0?7:s;switch(e){case"i":return String(a);case"ii":return Et(a,e.length);case"io":return t.ordinalNumber(a,{unit:"day"});case"iii":return t.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(s,{width:"short",context:"formatting"});case"iiii":default:return t.day(s,{width:"wide",context:"formatting"})}},a:function(i,e,t){const a=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(i,e,t){const s=i.getHours();let a;switch(s===12?a=dl.noon:s===0?a=dl.midnight:a=s/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(i,e,t){const s=i.getHours();let a;switch(s>=17?a=dl.evening:s>=12?a=dl.afternoon:s>=4?a=dl.morning:a=dl.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(i,e,t){if(e==="ho"){let s=i.getHours()%12;return s===0&&(s=12),t.ordinalNumber(s,{unit:"hour"})}return Co.h(i,e)},H:function(i,e,t){return e==="Ho"?t.ordinalNumber(i.getHours(),{unit:"hour"}):Co.H(i,e)},K:function(i,e,t){const s=i.getHours()%12;return e==="Ko"?t.ordinalNumber(s,{unit:"hour"}):Et(s,e.length)},k:function(i,e,t){let s=i.getHours();return s===0&&(s=24),e==="ko"?t.ordinalNumber(s,{unit:"hour"}):Et(s,e.length)},m:function(i,e,t){return e==="mo"?t.ordinalNumber(i.getMinutes(),{unit:"minute"}):Co.m(i,e)},s:function(i,e,t){return e==="so"?t.ordinalNumber(i.getSeconds(),{unit:"second"}):Co.s(i,e)},S:function(i,e){return Co.S(i,e)},X:function(i,e,t){const s=i.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return Ug(s);case"XXXX":case"XX":return Ta(s);case"XXXXX":case"XXX":default:return Ta(s,":")}},x:function(i,e,t){const s=i.getTimezoneOffset();switch(e){case"x":return Ug(s);case"xxxx":case"xx":return Ta(s);case"xxxxx":case"xxx":default:return Ta(s,":")}},O:function(i,e,t){const s=i.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Bg(s,":");case"OOOO":default:return"GMT"+Ta(s,":")}},z:function(i,e,t){const s=i.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Bg(s,":");case"zzzz":default:return"GMT"+Ta(s,":")}},t:function(i,e,t){const s=Math.trunc(i.getTime()/1e3);return Et(s,e.length)},T:function(i,e,t){const s=i.getTime();return Et(s,e.length)}};function Bg(i,e=""){const t=i>0?"-":"+",s=Math.abs(i),a=Math.trunc(s/60),c=s%60;return c===0?t+String(a):t+String(a)+e+Et(c,2)}function Ug(i,e){return i%60===0?(i>0?"-":"+")+Et(Math.abs(i)/60,2):Ta(i,e)}function Ta(i,e=""){const t=i>0?"-":"+",s=Math.abs(i),a=Et(Math.trunc(s/60),2),c=Et(s%60,2);return t+a+e+c}const Wg=(i,e)=>{switch(i){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Ay=(i,e)=>{switch(i){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},wT=(i,e)=>{const t=i.match(/(P+)(p+)?/)||[],s=t[1],a=t[2];if(!a)return Wg(i,e);let c;switch(s){case"P":c=e.dateTime({width:"short"});break;case"PP":c=e.dateTime({width:"medium"});break;case"PPP":c=e.dateTime({width:"long"});break;case"PPPP":default:c=e.dateTime({width:"full"});break}return c.replace("{{date}}",Wg(s,e)).replace("{{time}}",Ay(a,e))},ET={p:Ay,P:wT},TT=/^D+$/,xT=/^Y+$/,IT=["D","DD","YY","YYYY"];function ST(i){return TT.test(i)}function PT(i){return xT.test(i)}function bT(i,e,t){const s=CT(i,e,t);if(console.warn(s),IT.includes(i))throw new RangeError(s)}function CT(i,e,t){const s=i[0]==="Y"?"years":"days of the month";return`Use \`${i.toLowerCase()}\` instead of \`${i}\` (in \`${e}\`) for formatting ${s} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const AT=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kT=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,RT=/^'([^]*?)'?$/,NT=/''/g,LT=/[a-zA-Z]/;function Af(i,e,t){var b,I,M,$,Q,te,ee,Ae;const s=Nh(),a=(t==null?void 0:t.locale)??s.locale??pT,c=(t==null?void 0:t.firstWeekContainsDate)??((I=(b=t==null?void 0:t.locale)==null?void 0:b.options)==null?void 0:I.firstWeekContainsDate)??s.firstWeekContainsDate??(($=(M=s.locale)==null?void 0:M.options)==null?void 0:$.firstWeekContainsDate)??1,m=(t==null?void 0:t.weekStartsOn)??((te=(Q=t==null?void 0:t.locale)==null?void 0:Q.options)==null?void 0:te.weekStartsOn)??s.weekStartsOn??((Ae=(ee=s.locale)==null?void 0:ee.options)==null?void 0:Ae.weekStartsOn)??0,v=Ni(i);if(!OE(v))throw new RangeError("Invalid time value");let E=e.match(kT).map(pe=>{const ve=pe[0];if(ve==="p"||ve==="P"){const ge=ET[ve];return ge(pe,a.formatLong)}return pe}).join("").match(AT).map(pe=>{if(pe==="''")return{isToken:!1,value:"'"};const ve=pe[0];if(ve==="'")return{isToken:!1,value:MT(pe)};if(jg[ve])return{isToken:!0,value:pe};if(ve.match(LT))throw new RangeError("Format string contains an unescaped latin alphabet character `"+ve+"`");return{isToken:!1,value:pe}});a.localize.preprocessor&&(E=a.localize.preprocessor(v,E));const x={firstWeekContainsDate:c,weekStartsOn:m,locale:a};return E.map(pe=>{if(!pe.isToken)return pe.value;const ve=pe.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&PT(ve)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&ST(ve))&&bT(ve,e,String(i));const ge=jg[ve[0]];return ge(v,ve,a.localize,x)}).join("")}function MT(i){const e=i.match(RT);return e?e[1].replace(NT,"'"):i}const DT={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},OT=(i,e,t)=>{let s;const a=DT[i];return typeof a=="string"?s=a:e===1?s=a.one:s=a.other.replace("{{count}}",String(e)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"dans "+s:"il y a "+s:s},VT={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},zT={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},FT={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},jT={date:yl({formats:VT,defaultWidth:"full"}),time:yl({formats:zT,defaultWidth:"full"}),dateTime:yl({formats:FT,defaultWidth:"full"})},BT={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},UT=(i,e,t,s)=>BT[i],WT={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},HT={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},qT={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},$T={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},GT={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},ZT=(i,e)=>{const t=Number(i),s=e==null?void 0:e.unit;if(t===0)return"0";const a=["year","week","hour","minute","second"];let c;return t===1?c=s&&a.includes(s)?"re":"er":c="me",t+c},KT=["MMM","MMMM"],QT={preprocessor:(i,e)=>i.getDate()===1||!e.some(s=>s.isToken&&KT.includes(s.value))?e:e.map(s=>s.isToken&&s.value==="do"?{isToken:!0,value:"d"}:s),ordinalNumber:ZT,era:es({values:WT,defaultWidth:"wide"}),quarter:es({values:HT,defaultWidth:"wide",argumentCallback:i=>i-1}),month:es({values:qT,defaultWidth:"wide"}),day:es({values:$T,defaultWidth:"wide"}),dayPeriod:es({values:GT,defaultWidth:"wide"})},YT=/^(\d+)(ime|re|me|er|e)?/i,XT=/\d+/i,JT={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},e1={any:[/^av/i,/^ap/i]},t1={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},n1={any:[/1/i,/2/i,/3/i,/4/i]},r1={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},i1={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},s1={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},o1={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},a1={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},l1={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},u1={ordinalNumber:by({matchPattern:YT,parsePattern:XT,valueCallback:i=>parseInt(i)}),era:ts({matchPatterns:JT,defaultMatchWidth:"wide",parsePatterns:e1,defaultParseWidth:"any"}),quarter:ts({matchPatterns:t1,defaultMatchWidth:"wide",parsePatterns:n1,defaultParseWidth:"any",valueCallback:i=>i+1}),month:ts({matchPatterns:r1,defaultMatchWidth:"wide",parsePatterns:i1,defaultParseWidth:"any"}),day:ts({matchPatterns:s1,defaultMatchWidth:"wide",parsePatterns:o1,defaultParseWidth:"any"}),dayPeriod:ts({matchPatterns:a1,defaultMatchWidth:"any",parsePatterns:l1,defaultParseWidth:"any"})},kf={code:"fr",formatDistance:OT,formatLong:jT,formatRelative:UT,localize:QT,match:u1,options:{weekStartsOn:1,firstWeekContainsDate:4}};function c1({report:i,onClose:e,onStatusChange:t,onValidate:s,isAdmin:a=!1}){var b,I,M;const c=$=>{switch($){case"nouveau":return N.jsx(Iy,{className:"text-white",size:20});case"en_cours":return N.jsx(bE,{className:"text-white",size:20});case"resolu":return N.jsx(Cf,{className:"text-white",size:20})}},m=$=>{switch($){case"nouveau":return"Nouveau";case"en_cours":return"En cours de traitement";case"resolu":return"Rsolu"}},v=$=>{switch($){case"nouveau":return"bg-gradient-to-br from-red-500 to-red-600 border-white text-white shadow-xl ring-4 ring-red-400";case"en_cours":return"bg-gradient-to-br from-orange-500 to-orange-600 border-white text-white shadow-xl ring-4 ring-orange-400";case"resolu":return"bg-gradient-to-br from-green-500 to-green-600 border-white text-white shadow-xl ring-4 ring-green-400"}},E=$=>$.charAt(0).toUpperCase()+$.slice(1),x=$=>({mobilier:"Mobilier urbain",signalisation:"Signalisation",mobilite:"Mobilit",autre:"Autre"})[$]||$;return N.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end md:items-center md:justify-center z-50",children:N.jsxs("div",{className:"bg-white rounded-t-3xl md:rounded-2xl w-full md:max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl",children:[N.jsxs("div",{className:"sticky top-0 bg-white border-b p-4 flex items-center justify-between",children:[N.jsx("h2",{className:"text-xl font-bold",children:"Dtails du signalement"}),N.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:N.jsx(Rh,{size:24})})]}),N.jsxs("div",{className:"p-4 space-y-4",children:[N.jsxs("div",{className:"relative",children:[N.jsx("img",{src:i.photo,alt:i.description,className:"w-full h-64 object-cover rounded-lg"}),N.jsxs("div",{className:`absolute top-3 right-3 px-3 py-2 rounded-lg border-2 font-medium flex items-center gap-2 ${v(i.status)}`,children:[c(i.status),m(i.status)]})]}),N.jsx("div",{children:N.jsx("h3",{className:"font-semibold text-lg mb-2",children:i.description})}),N.jsxs("div",{className:"space-y-3",children:[N.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[N.jsx(sm,{size:20,className:"text-gray-600 flex-shrink-0 mt-0.5"}),N.jsxs("div",{children:[N.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Localisation"}),N.jsx("div",{className:"text-sm text-gray-600",children:i.location.address}),N.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[i.location.lat.toFixed(6),", ",i.location.lng.toFixed(6)]})]})]}),N.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[N.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[N.jsx(xy,{size:20,className:"text-gray-600 flex-shrink-0 mt-0.5"}),N.jsxs("div",{children:[N.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Date"}),N.jsx("div",{className:"text-sm text-gray-600",children:Af(new Date(i.date),"dd MMMM yyyy",{locale:kf})}),N.jsx("div",{className:"text-xs text-gray-500",children:Af(new Date(i.date),"HH:mm",{locale:kf})})]})]}),N.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[N.jsx(om,{size:20,className:"text-gray-600 flex-shrink-0 mt-0.5"}),N.jsxs("div",{children:[N.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Signal par"}),N.jsx("div",{className:"text-sm text-gray-600",children:i.reportedBy})]})]})]}),N.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.mode==="probleme"&&N.jsxs("span",{className:"px-3 py-2 bg-red-50 text-red-700 rounded-lg text-sm font-medium border-2 border-red-300",children:[" Problme: ",i.type&&E(i.type)]}),i.mode==="mobilier"&&N.jsx("span",{className:"px-3 py-2 bg-green-50 text-green-700 rounded-lg text-sm font-medium border-2 border-green-300",children:" Mobilier OK"}),i.mode==="suggestion"&&N.jsx("span",{className:"px-3 py-2 bg-indigo-50 text-indigo-700 rounded-lg text-sm font-medium border-2 border-indigo-300",children:" Suggestion"}),N.jsx("span",{className:"px-3 py-2 bg-purple-50 text-purple-700 rounded-lg text-sm font-medium border-2 border-purple-300",children:x(i.category)})]}),i.mode==="mobilier"&&i.validations!==void 0&&N.jsx("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border-2 border-green-200",children:N.jsxs("div",{className:"flex items-center gap-3",children:[N.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center shadow-lg",children:N.jsx(mf,{className:"text-white",size:24})}),N.jsxs("div",{children:[N.jsxs("div",{className:"text-lg font-bold text-green-800",children:[i.validations," validation",i.validations>1?"s":""]}),N.jsx("div",{className:"text-sm text-green-600",children:i.validations>=10?"Ce mobilier est certifi par la communaut !":`${10-i.validations} validation${10-i.validations>1?"s":""} pour tre certifi`})]})]})})]}),!a&&s&&i.mode==="mobilier"&&N.jsxs("div",{className:"pt-4 border-t",children:[N.jsxs("button",{onClick:()=>s(i.id),disabled:(b=i.validatedBy)==null?void 0:b.includes("current-user"),className:`w-full py-4 px-4 rounded-lg font-bold transition-all flex items-center justify-center gap-3 ${(I=i.validatedBy)!=null&&I.includes("current-user")?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700 shadow-lg hover:shadow-xl"}`,children:[N.jsx(mf,{size:24}),N.jsx("span",{className:"text-lg",children:(M=i.validatedBy)!=null&&M.includes("current-user")?"Dj valid ":"Valider ce mobilier (+5 points)"})]}),N.jsx("p",{className:"text-xs text-center text-gray-500 mt-2",children:"Confirmez que ce mobilier existe bien et est en bon tat"})]}),a&&t&&N.jsxs("div",{className:"pt-4 border-t",children:[N.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Changer le statut"}),N.jsx("div",{className:"grid grid-cols-3 gap-2",children:["nouveau","en_cours","resolu"].map($=>N.jsxs("button",{onClick:()=>t(i.id,$),className:`py-3 px-4 rounded-lg font-medium transition-all flex items-center justify-center gap-2 ${i.status===$?v($)+" ring-2 ring-offset-2 ring-blue-500":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[c($),N.jsx("span",{className:"text-sm",children:m($)})]},$))})]}),a&&s&&N.jsxs("div",{className:"pt-4 border-t",children:[N.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Valider le signalement"}),N.jsxs("button",{onClick:()=>s(i.id),className:"py-3 px-4 rounded-lg font-medium transition-all flex items-center justify-center gap-2 bg-gray-100 text-gray-600 hover:bg-gray-200",children:[N.jsx(mf,{size:20}),N.jsx("span",{className:"text-sm",children:"Valider"})]})]})]})]})})}function h1({reports:i,onReportClick:e,onStatusChange:t,onValidate:s}){const[a,c]=rt.useState("tous"),[m,v]=rt.useState("tous"),[E,x]=rt.useState("tous"),b=i.filter(Q=>{const te=a==="tous"||Q.status===a,ee=m==="tous"||Q.category===m,Ae=E==="tous"||Q.mode===E;return te&&ee&&Ae}),I=Q=>{switch(Q){case"nouveau":return"bg-gradient-to-br from-red-500 to-red-600 text-white shadow-lg border-2 border-white ring-2 ring-red-400";case"en_cours":return"bg-gradient-to-br from-orange-500 to-orange-600 text-white shadow-lg border-2 border-white ring-2 ring-orange-400";case"resolu":return"bg-gradient-to-br from-green-500 to-green-600 text-white shadow-lg border-2 border-white ring-2 ring-green-400"}},M=Q=>{switch(Q){case"nouveau":return"Nouveau";case"en_cours":return"En cours";case"resolu":return"Rsolu"}},$={nouveau:i.filter(Q=>Q.status==="nouveau").length,en_cours:i.filter(Q=>Q.status==="en_cours").length,resolu:i.filter(Q=>Q.status==="resolu").length,total:i.length};return N.jsxs("div",{className:"bg-white rounded-t-3xl shadow-lg h-full flex flex-col",children:[N.jsxs("div",{className:"p-4 border-b",children:[N.jsx("h2",{className:"text-xl font-bold mb-4",children:"Tableau de bord - Agent"}),N.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[N.jsxs("div",{className:"bg-gray-50 rounded-lg p-2 text-center",children:[N.jsx("div",{className:"text-lg font-bold",children:$.total}),N.jsx("div",{className:"text-xs text-gray-600",children:"Total"})]}),N.jsxs("div",{className:"bg-red-50 rounded-lg p-2 text-center",children:[N.jsx("div",{className:"text-lg font-bold text-red-700",children:$.nouveau}),N.jsx("div",{className:"text-xs text-red-600",children:"Nouveaux"})]}),N.jsxs("div",{className:"bg-orange-50 rounded-lg p-2 text-center",children:[N.jsx("div",{className:"text-lg font-bold text-orange-700",children:$.en_cours}),N.jsx("div",{className:"text-xs text-orange-600",children:"En cours"})]}),N.jsxs("div",{className:"bg-green-50 rounded-lg p-2 text-center",children:[N.jsx("div",{className:"text-lg font-bold text-green-700",children:$.resolu}),N.jsx("div",{className:"text-xs text-green-600",children:"Rsolus"})]})]}),N.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[N.jsx(aE,{size:16,className:"text-gray-500"}),N.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filtres:"})]}),N.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[N.jsxs("select",{value:a,onChange:Q=>c(Q.target.value),className:"p-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[N.jsx("option",{value:"tous",children:"Tous les statuts"}),N.jsx("option",{value:"nouveau",children:"Nouveaux"}),N.jsx("option",{value:"en_cours",children:"En cours"}),N.jsx("option",{value:"resolu",children:"Rsolus"})]}),N.jsxs("select",{value:m,onChange:Q=>v(Q.target.value),className:"p-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[N.jsx("option",{value:"tous",children:"Toutes catgories"}),N.jsx("option",{value:"mobilier",children:"Mobilier urbain"}),N.jsx("option",{value:"signalisation",children:"Signalisation"}),N.jsx("option",{value:"mobilite",children:"Mobilit"}),N.jsx("option",{value:"autre",children:"Autre"})]}),N.jsxs("select",{value:E,onChange:Q=>x(Q.target.value),className:"p-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 col-span-2",children:[N.jsx("option",{value:"tous",children:"Tous les types"}),N.jsx("option",{value:"probleme",children:" Problmes uniquement"}),N.jsx("option",{value:"mobilier",children:" Mobiliers uniquement"}),N.jsx("option",{value:"suggestion",children:" Suggestions uniquement"})]})]})]}),N.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:b.length===0?N.jsxs("div",{className:"text-center py-8 text-gray-500",children:[N.jsx(Iy,{size:48,className:"mx-auto mb-2 opacity-50"}),N.jsx("p",{children:"Aucun signalement trouv"})]}):b.map(Q=>N.jsxs("div",{onClick:()=>e(Q),className:"bg-white border border-gray-200 rounded-lg p-3 hover:shadow-md transition-shadow cursor-pointer",children:[N.jsxs("div",{className:"flex gap-3",children:[N.jsx("img",{src:Q.photo,alt:Q.description,className:"w-20 h-20 object-cover rounded-lg flex-shrink-0"}),N.jsxs("div",{className:"flex-1 min-w-0",children:[N.jsx("div",{className:"flex items-start justify-between gap-2 mb-1",children:N.jsx("h3",{className:"font-semibold text-sm line-clamp-2",children:Q.description})}),N.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-600 mb-2",children:[N.jsx(sm,{size:12}),N.jsx("span",{className:"truncate",children:Q.location.address})]}),N.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[N.jsx("span",{className:`px-2 py-1 rounded font-medium ${I(Q.status)}`,children:M(Q.status)}),N.jsx("span",{className:"px-2 py-1 rounded bg-gray-100 text-gray-700",children:Q.category})]}),N.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[N.jsxs("div",{className:"flex items-center gap-1",children:[N.jsx(xy,{size:12}),Af(new Date(Q.date),"dd MMM yyyy",{locale:kf})]}),N.jsxs("div",{className:"flex items-center gap-1",children:[N.jsx(om,{size:12}),Q.reportedBy]})]})]})]}),N.jsx("div",{className:"mt-3 pt-3 border-t flex gap-2",children:["nouveau","en_cours","resolu"].map(te=>N.jsx("button",{onClick:ee=>{ee.stopPropagation(),t(Q.id,te)},className:`flex-1 py-1.5 px-2 rounded text-xs font-medium transition-colors ${Q.status===te?I(te)+" cursor-default":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,disabled:Q.status===te,children:M(te)},te))})]},Q.id))})]})}function d1({isOpen:i,onClose:e,userName:t,userPhoto:s,points:a,level:c,badge:m}){return N.jsxs(N.Fragment,{children:[N.jsx("div",{className:`fixed inset-0 bg-slate-900/20 backdrop-blur-[2px] z-[60] transition-opacity duration-300 ${i?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e}),N.jsxs("div",{className:`fixed top-0 right-0 h-full w-[85%] max-w-sm bg-white shadow-2xl z-[70] transform transition-transform duration-300 ease-in-out border-l border-slate-100 ${i?"translate-x-0":"translate-x-full"}`,children:[N.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 p-8 text-white relative",children:[N.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 hover:bg-white/10 rounded-full transition-colors",children:N.jsx(Rh,{size:24})}),N.jsxs("div",{className:"flex flex-col items-center",children:[N.jsxs("div",{className:"relative mb-4",children:[N.jsx("img",{src:s,alt:t,className:"w-24 h-24 rounded-full border-4 border-white/20 object-cover shadow-xl"}),N.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-500 w-8 h-8 rounded-full flex items-center justify-center border-4 border-slate-800",children:N.jsx("span",{className:"text-xs font-bold text-white",children:c})})]}),N.jsx("h2",{className:"text-xl font-bold",children:t}),N.jsx("p",{className:"text-blue-300 text-sm font-medium uppercase tracking-widest mt-1",children:m})]})]}),N.jsxs("div",{className:"p-6 space-y-6",children:[N.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[N.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100",children:[N.jsxs("div",{className:"flex items-center gap-2 text-amber-600 mb-1",children:[N.jsx(IE,{size:16}),N.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Points"})]}),N.jsx("p",{className:"text-2xl font-black text-slate-800",children:a})]}),N.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100",children:[N.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[N.jsx(yE,{size:16}),N.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Rang"})]}),N.jsxs("p",{className:"text-2xl font-black text-slate-800",children:["#",c+2]})]})]}),N.jsxs("div",{className:"space-y-2",children:[N.jsxs("button",{className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 rounded-xl transition-colors group",children:[N.jsxs("div",{className:"flex items-center gap-3 text-slate-700",children:[N.jsx(wE,{className:"text-slate-400 group-hover:text-amber-500 transition-colors",size:20}),N.jsx("span",{className:"font-semibold",children:"Mes succs"})]}),N.jsx("span",{className:"bg-red-100 text-red-600 text-[10px] font-bold px-2 py-1 rounded-full italic",children:"Bientt"})]}),N.jsxs("button",{className:"w-full flex items-center gap-3 p-4 text-red-500 hover:bg-red-50 rounded-xl transition-colors mt-8 font-bold",children:[N.jsx(hE,{size:20}),"Dconnexion"]})]})]})]})]})}var f1=Ey();const m1=rm(f1);function p1(i){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i))}const g1=i=>{switch(i){case"success":return v1;case"info":return E1;case"warning":return w1;case"error":return T1;default:return null}},_1=Array(12).fill(0),y1=({visible:i,className:e})=>me.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":i},me.createElement("div",{className:"sonner-spinner"},_1.map((t,s)=>me.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),v1=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),w1=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),E1=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),T1=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),x1=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},me.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),me.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),I1=()=>{const[i,e]=me.useState(document.hidden);return me.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),i};let Rf=1;class S1{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:s,...a}=e,c=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Rf++,m=this.toasts.find(E=>E.id===c),v=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(c)&&this.dismissedToasts.delete(c),m?this.toasts=this.toasts.map(E=>E.id===c?(this.publish({...E,...e,id:c,title:s}),{...E,...e,id:c,dismissible:v,title:s}):E):this.addToast({title:s,...a,dismissible:v,id:c}),c},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(s=>s({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;t.loading!==void 0&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const a=Promise.resolve(e instanceof Function?e():e);let c=s!==void 0,m;const v=a.then(async x=>{if(m=["resolve",x],me.isValidElement(x))c=!1,this.create({id:s,type:"default",message:x});else if(b1(x)&&!x.ok){c=!1;const I=typeof t.error=="function"?await t.error(`HTTP error! status: ${x.status}`):t.error,M=typeof t.description=="function"?await t.description(`HTTP error! status: ${x.status}`):t.description,Q=typeof I=="object"&&!me.isValidElement(I)?I:{message:I};this.create({id:s,type:"error",description:M,...Q})}else if(x instanceof Error){c=!1;const I=typeof t.error=="function"?await t.error(x):t.error,M=typeof t.description=="function"?await t.description(x):t.description,Q=typeof I=="object"&&!me.isValidElement(I)?I:{message:I};this.create({id:s,type:"error",description:M,...Q})}else if(t.success!==void 0){c=!1;const I=typeof t.success=="function"?await t.success(x):t.success,M=typeof t.description=="function"?await t.description(x):t.description,Q=typeof I=="object"&&!me.isValidElement(I)?I:{message:I};this.create({id:s,type:"success",description:M,...Q})}}).catch(async x=>{if(m=["reject",x],t.error!==void 0){c=!1;const b=typeof t.error=="function"?await t.error(x):t.error,I=typeof t.description=="function"?await t.description(x):t.description,$=typeof b=="object"&&!me.isValidElement(b)?b:{message:b};this.create({id:s,type:"error",description:I,...$})}}).finally(()=>{c&&(this.dismiss(s),s=void 0),t.finally==null||t.finally.call(t)}),E=()=>new Promise((x,b)=>v.then(()=>m[0]==="reject"?b(m[1]):x(m[1])).catch(b));return typeof s!="string"&&typeof s!="number"?{unwrap:E}:Object.assign(s,{unwrap:E})},this.custom=(e,t)=>{const s=(t==null?void 0:t.id)||Rf++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Sr=new S1,P1=(i,e)=>{const t=(e==null?void 0:e.id)||Rf++;return Sr.addToast({title:i,...e,id:t}),t},b1=i=>i&&typeof i=="object"&&"ok"in i&&typeof i.ok=="boolean"&&"status"in i&&typeof i.status=="number",C1=P1,A1=()=>Sr.toasts,k1=()=>Sr.getActiveToasts(),pu=Object.assign(C1,{success:Sr.success,info:Sr.info,warning:Sr.warning,error:Sr.error,custom:Sr.custom,message:Sr.message,promise:Sr.promise,dismiss:Sr.dismiss,loading:Sr.loading},{getHistory:A1,getToasts:k1});p1("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Gc(i){return i.label!==void 0}const R1=3,N1="24px",L1="16px",Hg=4e3,M1=356,D1=14,O1=45,V1=200;function Xi(...i){return i.filter(Boolean).join(" ")}function z1(i){const[e,t]=i.split("-"),s=[];return e&&s.push(e),t&&s.push(t),s}const F1=i=>{var e,t,s,a,c,m,v,E,x;const{invert:b,toast:I,unstyled:M,interacting:$,setHeights:Q,visibleToasts:te,heights:ee,index:Ae,toasts:pe,expanded:ve,removeToast:ge,defaultRichColors:Me,closeButton:je,style:F,cancelButtonStyle:A,actionButtonStyle:O,className:U="",descriptionClassName:D="",duration:j,position:k,gap:$e,expandByDefault:at,classNames:be,icons:Ye,closeButtonAriaLabel:ne="Close toast"}=i,[Ie,re]=me.useState(null),[z,J]=me.useState(null),[fe,_e]=me.useState(!1),[Ee,ce]=me.useState(!1),[Ge,Ue]=me.useState(!1),[nt,Rt]=me.useState(!1),[jr,ir]=me.useState(!1),[sr,Br]=me.useState(0),[ls,Ur]=me.useState(0),_n=me.useRef(I.duration||j||Hg),br=me.useRef(null),ft=me.useRef(null),St=Ae===0,yn=Ae+1<=te,Ut=I.type,qn=I.dismissible!==!1,$s=I.className||"",Wr=I.descriptionClassName||"",or=me.useMemo(()=>ee.findIndex(Fe=>Fe.toastId===I.id)||0,[ee,I.id]),pi=me.useMemo(()=>{var Fe;return(Fe=I.closeButton)!=null?Fe:je},[I.closeButton,je]),ar=me.useMemo(()=>I.duration||j||Hg,[I.duration,j]),Li=me.useRef(0),vn=me.useRef(0),lr=me.useRef(0),Cr=me.useRef(null),[Ar,Hr]=k.split("-"),gi=me.useMemo(()=>ee.reduce((Fe,wt,Ot)=>Ot>=or?Fe:Fe+wt.height,0),[ee,or]),kn=I1(),ur=I.invert||b,cr=Ut==="loading";vn.current=me.useMemo(()=>or*$e+gi,[or,gi]),me.useEffect(()=>{_n.current=ar},[ar]),me.useEffect(()=>{_e(!0)},[]),me.useEffect(()=>{const Fe=ft.current;if(Fe){const wt=Fe.getBoundingClientRect().height;return Ur(wt),Q(Ot=>[{toastId:I.id,height:wt,position:I.position},...Ot]),()=>Q(Ot=>Ot.filter(Kt=>Kt.toastId!==I.id))}},[Q,I.id]),me.useLayoutEffect(()=>{if(!fe)return;const Fe=ft.current,wt=Fe.style.height;Fe.style.height="auto";const Ot=Fe.getBoundingClientRect().height;Fe.style.height=wt,Ur(Ot),Q(Kt=>Kt.find(Pt=>Pt.toastId===I.id)?Kt.map(Pt=>Pt.toastId===I.id?{...Pt,height:Ot}:Pt):[{toastId:I.id,height:Ot,position:I.position},...Kt])},[fe,I.title,I.description,Q,I.id]);const wn=me.useCallback(()=>{ce(!0),Br(vn.current),Q(Fe=>Fe.filter(wt=>wt.toastId!==I.id)),setTimeout(()=>{ge(I)},V1)},[I,ge,Q,vn]);me.useEffect(()=>{if(I.promise&&Ut==="loading"||I.duration===1/0||I.type==="loading")return;let Fe;return ve||$||kn?(()=>{if(lr.current<Li.current){const Kt=new Date().getTime()-Li.current;_n.current=_n.current-Kt}lr.current=new Date().getTime()})():(()=>{_n.current!==1/0&&(Li.current=new Date().getTime(),Fe=setTimeout(()=>{I.onAutoClose==null||I.onAutoClose.call(I,I),wn()},_n.current))})(),()=>clearTimeout(Fe)},[ve,$,I,Ut,kn,wn]),me.useEffect(()=>{I.delete&&wn()},[wn,I.delete]);function hr(){var Fe;if(Ye!=null&&Ye.loading){var wt;return me.createElement("div",{className:Xi(be==null?void 0:be.loader,I==null||(wt=I.classNames)==null?void 0:wt.loader,"sonner-loader"),"data-visible":Ut==="loading"},Ye.loading)}return me.createElement(y1,{className:Xi(be==null?void 0:be.loader,I==null||(Fe=I.classNames)==null?void 0:Fe.loader),visible:Ut==="loading"})}const dr=I.icon||(Ye==null?void 0:Ye[Ut])||g1(Ut);var Tt,Mi;return me.createElement("li",{tabIndex:0,ref:ft,className:Xi(U,$s,be==null?void 0:be.toast,I==null||(e=I.classNames)==null?void 0:e.toast,be==null?void 0:be.default,be==null?void 0:be[Ut],I==null||(t=I.classNames)==null?void 0:t[Ut]),"data-sonner-toast":"","data-rich-colors":(Tt=I.richColors)!=null?Tt:Me,"data-styled":!(I.jsx||I.unstyled||M),"data-mounted":fe,"data-promise":!!I.promise,"data-swiped":jr,"data-removed":Ee,"data-visible":yn,"data-y-position":Ar,"data-x-position":Hr,"data-index":Ae,"data-front":St,"data-swiping":Ge,"data-dismissible":qn,"data-type":Ut,"data-invert":ur,"data-swipe-out":nt,"data-swipe-direction":z,"data-expanded":!!(ve||at&&fe),style:{"--index":Ae,"--toasts-before":Ae,"--z-index":pe.length-Ae,"--offset":`${Ee?sr:vn.current}px`,"--initial-height":at?"auto":`${ls}px`,...F,...I.style},onDragEnd:()=>{Ue(!1),re(null),Cr.current=null},onPointerDown:Fe=>{cr||!qn||(br.current=new Date,Br(vn.current),Fe.target.setPointerCapture(Fe.pointerId),Fe.target.tagName!=="BUTTON"&&(Ue(!0),Cr.current={x:Fe.clientX,y:Fe.clientY}))},onPointerUp:()=>{var Fe,wt,Ot;if(nt||!qn)return;Cr.current=null;const Kt=Number(((Fe=ft.current)==null?void 0:Fe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),En=Number(((wt=ft.current)==null?void 0:wt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Pt=new Date().getTime()-((Ot=br.current)==null?void 0:Ot.getTime()),Wt=Ie==="x"?Kt:En,$n=Math.abs(Wt)/Pt;if(Math.abs(Wt)>=O1||$n>.11){Br(vn.current),I.onDismiss==null||I.onDismiss.call(I,I),J(Ie==="x"?Kt>0?"right":"left":En>0?"down":"up"),wn(),Rt(!0);return}else{var Ht,cn;(Ht=ft.current)==null||Ht.style.setProperty("--swipe-amount-x","0px"),(cn=ft.current)==null||cn.style.setProperty("--swipe-amount-y","0px")}ir(!1),Ue(!1),re(null)},onPointerMove:Fe=>{var wt,Ot,Kt;if(!Cr.current||!qn||((wt=window.getSelection())==null?void 0:wt.toString().length)>0)return;const Pt=Fe.clientY-Cr.current.y,Wt=Fe.clientX-Cr.current.x;var $n;const Ht=($n=i.swipeDirections)!=null?$n:z1(k);!Ie&&(Math.abs(Wt)>1||Math.abs(Pt)>1)&&re(Math.abs(Wt)>Math.abs(Pt)?"x":"y");let cn={x:0,y:0};const Vt=ye=>1/(1.5+Math.abs(ye)/20);if(Ie==="y"){if(Ht.includes("top")||Ht.includes("bottom"))if(Ht.includes("top")&&Pt<0||Ht.includes("bottom")&&Pt>0)cn.y=Pt;else{const ye=Pt*Vt(Pt);cn.y=Math.abs(ye)<Math.abs(Pt)?ye:Pt}}else if(Ie==="x"&&(Ht.includes("left")||Ht.includes("right")))if(Ht.includes("left")&&Wt<0||Ht.includes("right")&&Wt>0)cn.x=Wt;else{const ye=Wt*Vt(Wt);cn.x=Math.abs(ye)<Math.abs(Wt)?ye:Wt}(Math.abs(cn.x)>0||Math.abs(cn.y)>0)&&ir(!0),(Ot=ft.current)==null||Ot.style.setProperty("--swipe-amount-x",`${cn.x}px`),(Kt=ft.current)==null||Kt.style.setProperty("--swipe-amount-y",`${cn.y}px`)}},pi&&!I.jsx&&Ut!=="loading"?me.createElement("button",{"aria-label":ne,"data-disabled":cr,"data-close-button":!0,onClick:cr||!qn?()=>{}:()=>{wn(),I.onDismiss==null||I.onDismiss.call(I,I)},className:Xi(be==null?void 0:be.closeButton,I==null||(s=I.classNames)==null?void 0:s.closeButton)},(Mi=Ye==null?void 0:Ye.close)!=null?Mi:x1):null,(Ut||I.icon||I.promise)&&I.icon!==null&&((Ye==null?void 0:Ye[Ut])!==null||I.icon)?me.createElement("div",{"data-icon":"",className:Xi(be==null?void 0:be.icon,I==null||(a=I.classNames)==null?void 0:a.icon)},I.promise||I.type==="loading"&&!I.icon?I.icon||hr():null,I.type!=="loading"?dr:null):null,me.createElement("div",{"data-content":"",className:Xi(be==null?void 0:be.content,I==null||(c=I.classNames)==null?void 0:c.content)},me.createElement("div",{"data-title":"",className:Xi(be==null?void 0:be.title,I==null||(m=I.classNames)==null?void 0:m.title)},I.jsx?I.jsx:typeof I.title=="function"?I.title():I.title),I.description?me.createElement("div",{"data-description":"",className:Xi(D,Wr,be==null?void 0:be.description,I==null||(v=I.classNames)==null?void 0:v.description)},typeof I.description=="function"?I.description():I.description):null),me.isValidElement(I.cancel)?I.cancel:I.cancel&&Gc(I.cancel)?me.createElement("button",{"data-button":!0,"data-cancel":!0,style:I.cancelButtonStyle||A,onClick:Fe=>{Gc(I.cancel)&&qn&&(I.cancel.onClick==null||I.cancel.onClick.call(I.cancel,Fe),wn())},className:Xi(be==null?void 0:be.cancelButton,I==null||(E=I.classNames)==null?void 0:E.cancelButton)},I.cancel.label):null,me.isValidElement(I.action)?I.action:I.action&&Gc(I.action)?me.createElement("button",{"data-button":!0,"data-action":!0,style:I.actionButtonStyle||O,onClick:Fe=>{Gc(I.action)&&(I.action.onClick==null||I.action.onClick.call(I.action,Fe),!Fe.defaultPrevented&&wn())},className:Xi(be==null?void 0:be.actionButton,I==null||(x=I.classNames)==null?void 0:x.actionButton)},I.action.label):null)};function qg(){if(typeof window>"u"||typeof document>"u")return"ltr";const i=document.documentElement.getAttribute("dir");return i==="auto"||!i?window.getComputedStyle(document.documentElement).direction:i}function j1(i,e){const t={};return[i,e].forEach((s,a)=>{const c=a===1,m=c?"--mobile-offset":"--offset",v=c?L1:N1;function E(x){["top","right","bottom","left"].forEach(b=>{t[`${m}-${b}`]=typeof x=="number"?`${x}px`:x})}typeof s=="number"||typeof s=="string"?E(s):typeof s=="object"?["top","right","bottom","left"].forEach(x=>{s[x]===void 0?t[`${m}-${x}`]=v:t[`${m}-${x}`]=typeof s[x]=="number"?`${s[x]}px`:s[x]}):E(v)}),t}const B1=me.forwardRef(function(e,t){const{invert:s,position:a="bottom-right",hotkey:c=["altKey","KeyT"],expand:m,closeButton:v,className:E,offset:x,mobileOffset:b,theme:I="light",richColors:M,duration:$,style:Q,visibleToasts:te=R1,toastOptions:ee,dir:Ae=qg(),gap:pe=D1,icons:ve,containerAriaLabel:ge="Notifications"}=e,[Me,je]=me.useState([]),F=me.useMemo(()=>Array.from(new Set([a].concat(Me.filter(z=>z.position).map(z=>z.position)))),[Me,a]),[A,O]=me.useState([]),[U,D]=me.useState(!1),[j,k]=me.useState(!1),[$e,at]=me.useState(I!=="system"?I:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),be=me.useRef(null),Ye=c.join("+").replace(/Key/g,"").replace(/Digit/g,""),ne=me.useRef(null),Ie=me.useRef(!1),re=me.useCallback(z=>{je(J=>{var fe;return(fe=J.find(_e=>_e.id===z.id))!=null&&fe.delete||Sr.dismiss(z.id),J.filter(({id:_e})=>_e!==z.id)})},[]);return me.useEffect(()=>Sr.subscribe(z=>{if(z.dismiss){requestAnimationFrame(()=>{je(J=>J.map(fe=>fe.id===z.id?{...fe,delete:!0}:fe))});return}setTimeout(()=>{m1.flushSync(()=>{je(J=>{const fe=J.findIndex(_e=>_e.id===z.id);return fe!==-1?[...J.slice(0,fe),{...J[fe],...z},...J.slice(fe+1)]:[z,...J]})})})}),[Me]),me.useEffect(()=>{if(I!=="system"){at(I);return}if(I==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?at("dark"):at("light")),typeof window>"u")return;const z=window.matchMedia("(prefers-color-scheme: dark)");try{z.addEventListener("change",({matches:J})=>{at(J?"dark":"light")})}catch{z.addListener(({matches:fe})=>{try{at(fe?"dark":"light")}catch(_e){console.error(_e)}})}},[I]),me.useEffect(()=>{Me.length<=1&&D(!1)},[Me]),me.useEffect(()=>{const z=J=>{var fe;if(c.every(ce=>J[ce]||J.code===ce)){var Ee;D(!0),(Ee=be.current)==null||Ee.focus()}J.code==="Escape"&&(document.activeElement===be.current||(fe=be.current)!=null&&fe.contains(document.activeElement))&&D(!1)};return document.addEventListener("keydown",z),()=>document.removeEventListener("keydown",z)},[c]),me.useEffect(()=>{if(be.current)return()=>{ne.current&&(ne.current.focus({preventScroll:!0}),ne.current=null,Ie.current=!1)}},[be.current]),me.createElement("section",{ref:t,"aria-label":`${ge} ${Ye}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},F.map((z,J)=>{var fe;const[_e,Ee]=z.split("-");return Me.length?me.createElement("ol",{key:z,dir:Ae==="auto"?qg():Ae,tabIndex:-1,ref:be,className:E,"data-sonner-toaster":!0,"data-sonner-theme":$e,"data-y-position":_e,"data-lifted":U&&Me.length>1&&!m,"data-x-position":Ee,style:{"--front-toast-height":`${((fe=A[0])==null?void 0:fe.height)||0}px`,"--width":`${M1}px`,"--gap":`${pe}px`,...Q,...j1(x,b)},onBlur:ce=>{Ie.current&&!ce.currentTarget.contains(ce.relatedTarget)&&(Ie.current=!1,ne.current&&(ne.current.focus({preventScroll:!0}),ne.current=null))},onFocus:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||Ie.current||(Ie.current=!0,ne.current=ce.relatedTarget)},onMouseEnter:()=>D(!0),onMouseMove:()=>D(!0),onMouseLeave:()=>{j||D(!1)},onDragEnd:()=>D(!1),onPointerDown:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||k(!0)},onPointerUp:()=>k(!1)},Me.filter(ce=>!ce.position&&J===0||ce.position===z).map((ce,Ge)=>{var Ue,nt;return me.createElement(F1,{key:ce.id,icons:ve,index:Ge,toast:ce,defaultRichColors:M,duration:(Ue=ee==null?void 0:ee.duration)!=null?Ue:$,className:ee==null?void 0:ee.className,descriptionClassName:ee==null?void 0:ee.descriptionClassName,invert:s,visibleToasts:te,closeButton:(nt=ee==null?void 0:ee.closeButton)!=null?nt:v,interacting:j,position:z,style:ee==null?void 0:ee.style,unstyled:ee==null?void 0:ee.unstyled,classNames:ee==null?void 0:ee.classNames,cancelButtonStyle:ee==null?void 0:ee.cancelButtonStyle,actionButtonStyle:ee==null?void 0:ee.actionButtonStyle,closeButtonAriaLabel:ee==null?void 0:ee.closeButtonAriaLabel,removeToast:re,toasts:Me.filter(Rt=>Rt.position==ce.position),heights:A.filter(Rt=>Rt.position==ce.position),setHeights:O,expandByDefault:m,gap:pe,expanded:U,swipeDirections:e.swipeDirections})})):null}))}),U1=()=>{};var $g={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky=function(i){const e=[];let t=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},W1=function(i){const e=[];let t=0,s=0;for(;t<i.length;){const a=i[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[t++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[t++],m=i[t++],v=i[t++],E=((a&7)<<18|(c&63)<<12|(m&63)<<6|v&63)-65536;e[s++]=String.fromCharCode(55296+(E>>10)),e[s++]=String.fromCharCode(56320+(E&1023))}else{const c=i[t++],m=i[t++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|m&63)}}return e.join("")},Ry={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const c=i[a],m=a+1<i.length,v=m?i[a+1]:0,E=a+2<i.length,x=E?i[a+2]:0,b=c>>2,I=(c&3)<<4|v>>4;let M=(v&15)<<2|x>>6,$=x&63;E||($=64,m||(M=64)),s.push(t[b],t[I],t[M],t[$])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(ky(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):W1(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const c=t[i.charAt(a++)],v=a<i.length?t[i.charAt(a)]:0;++a;const x=a<i.length?t[i.charAt(a)]:64;++a;const I=a<i.length?t[i.charAt(a)]:64;if(++a,c==null||v==null||x==null||I==null)throw new H1;const M=c<<2|v>>4;if(s.push(M),x!==64){const $=v<<4&240|x>>2;if(s.push($),I!==64){const Q=x<<6&192|I;s.push(Q)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class H1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const q1=function(i){const e=ky(i);return Ry.encodeByteArray(e,!0)},hh=function(i){return q1(i).replace(/\./g,"")},Ny=function(i){try{return Ry.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=()=>$1().__FIREBASE_DEFAULTS__,Z1=()=>{if(typeof process>"u"||typeof $g>"u")return;const i=$g.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},K1=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Ny(i[1]);return e&&JSON.parse(e)},Lh=()=>{try{return U1()||G1()||Z1()||K1()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Ly=i=>{var e,t;return(t=(e=Lh())==null?void 0:e.emulatorHosts)==null?void 0:t[i]},Q1=i=>{const e=Ly(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},My=()=>{var i;return(i=Lh())==null?void 0:i.config},Dy=i=>{var e;return(e=Lh())==null?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Oy(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const m={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[hh(JSON.stringify(t)),hh(JSON.stringify(m)),""].join(".")}const Tu={};function J1(){const i={prod:[],emulator:[]};for(const e of Object.keys(Tu))Tu[e]?i.emulator.push(e):i.prod.push(e);return i}function ex(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let Gg=!1;function Vy(i,e){if(typeof window>"u"||typeof document>"u"||!Ll(window.location.host)||Tu[i]===e||Tu[i]||Gg)return;Tu[i]=e;function t(M){return`__firebase__banner__${M}`}const s="__firebase__banner",c=J1().prod.length>0;function m(){const M=document.getElementById(s);M&&M.remove()}function v(M){M.style.display="flex",M.style.background="#7faaf0",M.style.position="fixed",M.style.bottom="5px",M.style.left="5px",M.style.padding=".5em",M.style.borderRadius="5px",M.style.alignItems="center"}function E(M,$){M.setAttribute("width","24"),M.setAttribute("id",$),M.setAttribute("height","24"),M.setAttribute("viewBox","0 0 24 24"),M.setAttribute("fill","none"),M.style.marginLeft="-6px"}function x(){const M=document.createElement("span");return M.style.cursor="pointer",M.style.marginLeft="16px",M.style.fontSize="24px",M.innerHTML=" &times;",M.onclick=()=>{Gg=!0,m()},M}function b(M,$){M.setAttribute("id",$),M.innerText="Learn more",M.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",M.setAttribute("target","__blank"),M.style.paddingLeft="5px",M.style.textDecoration="underline"}function I(){const M=ex(s),$=t("text"),Q=document.getElementById($)||document.createElement("span"),te=t("learnmore"),ee=document.getElementById(te)||document.createElement("a"),Ae=t("preprendIcon"),pe=document.getElementById(Ae)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(M.created){const ve=M.element;v(ve),b(ee,te);const ge=x();E(pe,Ae),ve.append(pe,Q,ee,ge),document.body.appendChild(ve)}c?(Q.innerText="Preview backend disconnected.",pe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(pe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Q.innerText="Preview backend running in this workspace."),Q.setAttribute("id",$)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hn())}function nx(){var e;const i=(e=Lh())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ix(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function sx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ox(){const i=Hn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function ax(){return!nx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lx(){try{return typeof indexedDB=="object"}catch{return!1}}function ux(){return new Promise((i,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var c;e(((c=a.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="FirebaseError";class qs extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=cx,Object.setPrototypeOf(this,qs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zu.prototype.create)}}class zu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,c=this.errors[e],m=c?hx(c,s):"Error",v=`${this.serviceName}: ${m} (${a}).`;return new qs(a,v,s)}}function hx(i,e){return i.replace(dx,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const dx=/\{\$([^}]+)}/g;function fx(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ca(i,e){if(i===e)return!0;const t=Object.keys(i),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const c=i[a],m=e[a];if(Zg(c)&&Zg(m)){if(!Ca(c,m))return!1}else if(c!==m)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function Zg(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(i){const e=[];for(const[t,s]of Object.entries(i))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function mx(i,e){const t=new px(i,e);return t.subscribe.bind(t)}class px{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");gx(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=pf),a.error===void 0&&(a.error=pf),a.complete===void 0&&(a.complete=pf);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gx(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function pf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(i){return i&&i._delegate?i._delegate:i}class Aa{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new Y1;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vx(e))try{this.getOrInitializeService({instanceIdentifier:xa})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=xa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xa){return this.instances.has(e)}getOptions(e=xa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,m]of this.instancesDeferred.entries()){const v=this.normalizeInstanceIdentifier(c);s===v&&m.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&e(c,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:yx(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=xa){return this.component?this.component.multipleInstances?e:xa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yx(i){return i===xa?void 0:i}function vx(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _x(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(it||(it={}));const Ex={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},Tx=it.INFO,xx={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},Ix=(i,e,...t)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=xx[e];if(a)console[a](`[${s}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class am{constructor(e){this.name=e,this._logLevel=Tx,this._logHandler=Ix,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ex[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}const Sx=(i,e)=>e.some(t=>i instanceof t);let Kg,Qg;function Px(){return Kg||(Kg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bx(){return Qg||(Qg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zy=new WeakMap,Nf=new WeakMap,Fy=new WeakMap,gf=new WeakMap,lm=new WeakMap;function Cx(i){const e=new Promise((t,s)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",m)},c=()=>{t(Do(i.result)),a()},m=()=>{s(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",m)});return e.then(t=>{t instanceof IDBCursor&&zy.set(t,i)}).catch(()=>{}),lm.set(e,i),e}function Ax(i){if(Nf.has(i))return;const e=new Promise((t,s)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",m),i.removeEventListener("abort",m)},c=()=>{t(),a()},m=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",m),i.addEventListener("abort",m)});Nf.set(i,e)}let Lf={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Nf.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Fy.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Do(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function kx(i){Lf=i(Lf)}function Rx(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=i.call(_f(this),e,...t);return Fy.set(s,e.sort?e.sort():[e]),Do(s)}:bx().includes(i)?function(...e){return i.apply(_f(this),e),Do(zy.get(this))}:function(...e){return Do(i.apply(_f(this),e))}}function Nx(i){return typeof i=="function"?Rx(i):(i instanceof IDBTransaction&&Ax(i),Sx(i,Px())?new Proxy(i,Lf):i)}function Do(i){if(i instanceof IDBRequest)return Cx(i);if(gf.has(i))return gf.get(i);const e=Nx(i);return e!==i&&(gf.set(i,e),lm.set(e,i)),e}const _f=i=>lm.get(i);function Lx(i,e,{blocked:t,upgrade:s,blocking:a,terminated:c}={}){const m=indexedDB.open(i,e),v=Do(m);return s&&m.addEventListener("upgradeneeded",E=>{s(Do(m.result),E.oldVersion,E.newVersion,Do(m.transaction),E)}),t&&m.addEventListener("blocked",E=>t(E.oldVersion,E.newVersion,E)),v.then(E=>{c&&E.addEventListener("close",()=>c()),a&&E.addEventListener("versionchange",x=>a(x.oldVersion,x.newVersion,x))}).catch(()=>{}),v}const Mx=["get","getKey","getAll","getAllKeys","count"],Dx=["put","add","delete","clear"],yf=new Map;function Yg(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(yf.get(e))return yf.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=Dx.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||Mx.includes(t)))return;const c=async function(m,...v){const E=this.transaction(m,a?"readwrite":"readonly");let x=E.store;return s&&(x=x.index(v.shift())),(await Promise.all([x[t](...v),a&&E.done]))[0]};return yf.set(e,c),c}kx(i=>({...i,get:(e,t,s)=>Yg(e,t)||i.get(e,t,s),has:(e,t)=>!!Yg(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Vx(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function Vx(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mf="@firebase/app",Xg="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new am("@firebase/app"),zx="@firebase/app-compat",Fx="@firebase/analytics-compat",jx="@firebase/analytics",Bx="@firebase/app-check-compat",Ux="@firebase/app-check",Wx="@firebase/auth",Hx="@firebase/auth-compat",qx="@firebase/database",$x="@firebase/data-connect",Gx="@firebase/database-compat",Zx="@firebase/functions",Kx="@firebase/functions-compat",Qx="@firebase/installations",Yx="@firebase/installations-compat",Xx="@firebase/messaging",Jx="@firebase/messaging-compat",eI="@firebase/performance",tI="@firebase/performance-compat",nI="@firebase/remote-config",rI="@firebase/remote-config-compat",iI="@firebase/storage",sI="@firebase/storage-compat",oI="@firebase/firestore",aI="@firebase/ai",lI="@firebase/firestore-compat",uI="firebase",cI="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df="[DEFAULT]",hI={[Mf]:"fire-core",[zx]:"fire-core-compat",[jx]:"fire-analytics",[Fx]:"fire-analytics-compat",[Ux]:"fire-app-check",[Bx]:"fire-app-check-compat",[Wx]:"fire-auth",[Hx]:"fire-auth-compat",[qx]:"fire-rtdb",[$x]:"fire-data-connect",[Gx]:"fire-rtdb-compat",[Zx]:"fire-fn",[Kx]:"fire-fn-compat",[Qx]:"fire-iid",[Yx]:"fire-iid-compat",[Xx]:"fire-fcm",[Jx]:"fire-fcm-compat",[eI]:"fire-perf",[tI]:"fire-perf-compat",[nI]:"fire-rc",[rI]:"fire-rc-compat",[iI]:"fire-gcs",[sI]:"fire-gcs-compat",[oI]:"fire-fst",[lI]:"fire-fst-compat",[aI]:"fire-vertex","fire-js":"fire-js",[uI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=new Map,dI=new Map,Of=new Map;function Jg(i,e){try{i.container.addComponent(e)}catch(t){js.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Pl(i){const e=i.name;if(Of.has(e))return js.debug(`There were multiple attempts to register component ${e}.`),!1;Of.set(e,i);for(const t of dh.values())Jg(t,i);for(const t of dI.values())Jg(t,i);return!0}function um(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function bi(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oo=new zu("app","Firebase",fI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Aa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=cI;function jy(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const s={name:Df,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw Oo.create("bad-app-name",{appName:String(a)});if(t||(t=My()),!t)throw Oo.create("no-options");const c=dh.get(a);if(c){if(Ca(t,c.options)&&Ca(s,c.config))return c;throw Oo.create("duplicate-app",{appName:a})}const m=new wx(a);for(const E of Of.values())m.addComponent(E);const v=new mI(t,s,m);return dh.set(a,v),v}function By(i=Df){const e=dh.get(i);if(!e&&i===Df&&My())return jy();if(!e)throw Oo.create("no-app",{appName:i});return e}function Vo(i,e,t){let s=hI[i]??i;t&&(s+=`-${t}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const m=[`Unable to register library "${s}" with version "${e}":`];a&&m.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&m.push("and"),c&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),js.warn(m.join(" "));return}Pl(new Aa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI="firebase-heartbeat-database",gI=1,Au="firebase-heartbeat-store";let vf=null;function Uy(){return vf||(vf=Lx(pI,gI,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Au)}catch(t){console.warn(t)}}}}).catch(i=>{throw Oo.create("idb-open",{originalErrorMessage:i.message})})),vf}async function _I(i){try{const t=(await Uy()).transaction(Au),s=await t.objectStore(Au).get(Wy(i));return await t.done,s}catch(e){if(e instanceof qs)js.warn(e.message);else{const t=Oo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});js.warn(t.message)}}}async function e_(i,e){try{const s=(await Uy()).transaction(Au,"readwrite");await s.objectStore(Au).put(e,Wy(i)),await s.done}catch(t){if(t instanceof qs)js.warn(t.message);else{const s=Oo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});js.warn(s.message)}}}function Wy(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=1024,vI=30;class wI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new TI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=t_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(m=>m.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>vI){const m=xI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(m,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){js.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=t_(),{heartbeatsToSend:s,unsentEntries:a}=EI(this._heartbeatsCache.heartbeats),c=hh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return js.warn(t),""}}}function t_(){return new Date().toISOString().substring(0,10)}function EI(i,e=yI){const t=[];let s=i.slice();for(const a of i){const c=t.find(m=>m.agent===a.agent);if(c){if(c.dates.push(a.date),n_(t)>e){c.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),n_(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class TI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lx()?ux().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await _I(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return e_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return e_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function n_(i){return hh(JSON.stringify({version:2,heartbeats:i})).length}function xI(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let s=1;s<i.length;s++)i[s].date<t&&(t=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(i){Pl(new Aa("platform-logger",e=>new Ox(e),"PRIVATE")),Pl(new Aa("heartbeat",e=>new wI(e),"PRIVATE")),Vo(Mf,Xg,i),Vo(Mf,Xg,"esm2020"),Vo("fire-js","")}II("");function Hy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SI=Hy,qy=new zu("auth","Firebase",Hy());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=new am("@firebase/auth");function PI(i,...e){fh.logLevel<=it.WARN&&fh.warn(`Auth (${Ml}): ${i}`,...e)}function eh(i,...e){fh.logLevel<=it.ERROR&&fh.error(`Auth (${Ml}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(i,...e){throw cm(i,...e)}function ns(i,...e){return cm(i,...e)}function $y(i,e,t){const s={...SI(),[e]:t};return new zu("auth","Firebase",s).create(e,{appName:i.name})}function zo(i){return $y(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cm(i,...e){if(typeof i!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(t,...s)}return qy.create(i,...e)}function qe(i,e,...t){if(!i)throw cm(e,...t)}function Vs(i){const e="INTERNAL ASSERTION FAILED: "+i;throw eh(e),new Error(e)}function Us(i,e){i||Vs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.href)||""}function bI(){return r_()==="http:"||r_()==="https:"}function r_(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bI()||ix()||"connection"in navigator)?navigator.onLine:!0}function AI(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,t){this.shortDelay=e,this.longDelay=t,Us(t>e,"Short delay should be less than long delay!"),this.isMobile=tx()||sx()}get(){return CI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(i,e){Us(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],NI=new ju(3e4,6e4);function Mh(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Dl(i,e,t,s,a={}){return Zy(i,a,async()=>{let c={},m={};s&&(e==="GET"?m=s:c={body:JSON.stringify(s)});const v=Fu({key:i.config.apiKey,...m}).slice(1),E=await i._getAdditionalHeaders();E["Content-Type"]="application/json",i.languageCode&&(E["X-Firebase-Locale"]=i.languageCode);const x={method:e,headers:E,...c};return rx()||(x.referrerPolicy="no-referrer"),i.emulatorConfig&&Ll(i.emulatorConfig.host)&&(x.credentials="include"),Gy.fetch()(await Qy(i,i.config.apiHost,t,v),x)})}async function Zy(i,e,t){i._canInitEmulator=!1;const s={...kI,...e};try{const a=new LI(i),c=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const m=await c.json();if("needConfirmation"in m)throw Zc(i,"account-exists-with-different-credential",m);if(c.ok&&!("errorMessage"in m))return m;{const v=c.ok?m.errorMessage:m.error.message,[E,x]=v.split(" : ");if(E==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zc(i,"credential-already-in-use",m);if(E==="EMAIL_EXISTS")throw Zc(i,"email-already-in-use",m);if(E==="USER_DISABLED")throw Zc(i,"user-disabled",m);const b=s[E]||E.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw $y(i,b,x);Bs(i,b)}}catch(a){if(a instanceof qs)throw a;Bs(i,"network-request-failed",{message:String(a)})}}async function Ky(i,e,t,s,a={}){const c=await Dl(i,e,t,s,a);return"mfaPendingCredential"in c&&Bs(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function Qy(i,e,t,s){const a=`${e}${t}?${s}`,c=i,m=c.config.emulator?hm(i.config,a):`${i.config.apiScheme}://${a}`;return RI.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(m).toString():m}class LI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(ns(this.auth,"network-request-failed")),NI.get())})}}function Zc(i,e,t){const s={appName:i.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=ns(i,e,s);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MI(i,e){return Dl(i,"POST","/v1/accounts:delete",e)}async function mh(i,e){return Dl(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DI(i,e=!1){const t=Fr(i),s=await t.getIdToken(e),a=dm(s);qe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const c=typeof a.firebase=="object"?a.firebase:void 0,m=c==null?void 0:c.sign_in_provider;return{claims:a,token:s,authTime:xu(wf(a.auth_time)),issuedAtTime:xu(wf(a.iat)),expirationTime:xu(wf(a.exp)),signInProvider:m||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function wf(i){return Number(i)*1e3}function dm(i){const[e,t,s]=i.split(".");if(e===void 0||t===void 0||s===void 0)return eh("JWT malformed, contained fewer than 3 sections"),null;try{const a=Ny(t);return a?JSON.parse(a):(eh("Failed to decode base64 JWT payload"),null)}catch(a){return eh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function i_(i){const e=dm(i);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ku(i,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof qs&&OI(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function OI({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=xu(this.lastLoginAt),this.creationTime=xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ph(i){var I;const e=i.auth,t=await i.getIdToken(),s=await ku(i,mh(e,{idToken:t}));qe(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];i._notifyReloadListener(a);const c=(I=a.providerUserInfo)!=null&&I.length?Yy(a.providerUserInfo):[],m=FI(i.providerData,c),v=i.isAnonymous,E=!(i.email&&a.passwordHash)&&!(m!=null&&m.length),x=v?E:!1,b={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:m,metadata:new zf(a.createdAt,a.lastLoginAt),isAnonymous:x};Object.assign(i,b)}async function zI(i){const e=Fr(i);await ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function FI(i,e){return[...i.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function Yy(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jI(i,e){const t=await Zy(i,{},async()=>{const s=Fu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:c}=i.config,m=await Qy(i,a,"/v1/token",`key=${c}`),v=await i._getAdditionalHeaders();v["Content-Type"]="application/x-www-form-urlencoded";const E={method:"POST",headers:v,body:s};return i.emulatorConfig&&Ll(i.emulatorConfig.host)&&(E.credentials="include"),Gy.fetch()(m,E)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function BI(i,e){return Dl(i,"POST","/v2/accounts:revokeToken",Mh(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):i_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const t=i_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:c}=await jI(e,t);this.updateTokensAndExpiration(s,a,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:c}=t,m=new vl;return s&&(qe(typeof s=="string","internal-error",{appName:e}),m.refreshToken=s),a&&(qe(typeof a=="string","internal-error",{appName:e}),m.accessToken=a),c&&(qe(typeof c=="number","internal-error",{appName:e}),m.expirationTime=c),m}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vl,this.toJSON())}_performRefresh(){return Vs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ao(i,e){qe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Ci{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new VI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new zf(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await ku(this,this.stsTokenManager.getToken(this.auth,e));return qe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return DI(this,e)}reload(){return zI(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ci({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await ph(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bi(this.auth.app))return Promise.reject(zo(this.auth));const e=await this.getIdToken();return await ku(this,MI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,c=t.phoneNumber??void 0,m=t.photoURL??void 0,v=t.tenantId??void 0,E=t._redirectEventId??void 0,x=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:I,emailVerified:M,isAnonymous:$,providerData:Q,stsTokenManager:te}=t;qe(I&&te,e,"internal-error");const ee=vl.fromJSON(this.name,te);qe(typeof I=="string",e,"internal-error"),Ao(s,e.name),Ao(a,e.name),qe(typeof M=="boolean",e,"internal-error"),qe(typeof $=="boolean",e,"internal-error"),Ao(c,e.name),Ao(m,e.name),Ao(v,e.name),Ao(E,e.name),Ao(x,e.name),Ao(b,e.name);const Ae=new Ci({uid:I,auth:e,email:a,emailVerified:M,displayName:s,isAnonymous:$,photoURL:m,phoneNumber:c,tenantId:v,stsTokenManager:ee,createdAt:x,lastLoginAt:b});return Q&&Array.isArray(Q)&&(Ae.providerData=Q.map(pe=>({...pe}))),E&&(Ae._redirectEventId=E),Ae}static async _fromIdTokenResponse(e,t,s=!1){const a=new vl;a.updateFromServerResponse(t);const c=new Ci({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await ph(c),c}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];qe(a.localId!==void 0,"internal-error");const c=a.providerUserInfo!==void 0?Yy(a.providerUserInfo):[],m=!(a.email&&a.passwordHash)&&!(c!=null&&c.length),v=new vl;v.updateFromIdToken(s);const E=new Ci({uid:a.localId,auth:e,stsTokenManager:v,isAnonymous:m}),x={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new zf(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(c!=null&&c.length)};return Object.assign(E,x),E}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_=new Map;function zs(i){Us(i instanceof Function,"Expected a class definition");let e=s_.get(i);return e?(Us(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,s_.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Xy.type="NONE";const o_=Xy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(i,e,t){return`firebase:${i}:${e}:${t}`}class wl{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:c}=this.auth;this.fullUserKey=th(this.userKey,a.apiKey,c),this.fullPersistenceKey=th("persistence",a.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await mh(this.auth,{idToken:e}).catch(()=>{});return t?Ci._fromGetAccountInfoResponse(this.auth,t,e):null}return Ci._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new wl(zs(o_),e,s);const a=(await Promise.all(t.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let c=a[0]||zs(o_);const m=th(s,e.config.apiKey,e.name);let v=null;for(const x of t)try{const b=await x._get(m);if(b){let I;if(typeof b=="string"){const M=await mh(e,{idToken:b}).catch(()=>{});if(!M)break;I=await Ci._fromGetAccountInfoResponse(e,M,b)}else I=Ci._fromJSON(e,b);x!==c&&(v=I),c=x;break}}catch{}const E=a.filter(x=>x._shouldAllowMigration);return!c._shouldAllowMigration||!E.length?new wl(c,e,s):(c=E[0],v&&await c._set(m,v.toJSON()),await Promise.all(t.map(async x=>{if(x!==c)try{await x._remove(m)}catch{}})),new wl(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Jy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iv(e))return"Blackberry";if(sv(e))return"Webos";if(ev(e))return"Safari";if((e.includes("chrome/")||tv(e))&&!e.includes("edge/"))return"Chrome";if(rv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Jy(i=Hn()){return/firefox\//i.test(i)}function ev(i=Hn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tv(i=Hn()){return/crios\//i.test(i)}function nv(i=Hn()){return/iemobile/i.test(i)}function rv(i=Hn()){return/android/i.test(i)}function iv(i=Hn()){return/blackberry/i.test(i)}function sv(i=Hn()){return/webos/i.test(i)}function fm(i=Hn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function UI(i=Hn()){var e;return fm(i)&&!!((e=window.navigator)!=null&&e.standalone)}function WI(){return ox()&&document.documentMode===10}function ov(i=Hn()){return fm(i)||rv(i)||sv(i)||iv(i)||/windows phone/i.test(i)||nv(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(i,e=[]){let t;switch(i){case"Browser":t=a_(Hn());break;case"Worker":t=`${a_(Hn())}-${i}`;break;default:t=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ml}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((m,v)=>{try{const E=e(c);m(E)}catch(E){v(E)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qI(i,e={}){return Dl(i,"GET","/v2/passwordPolicy",Mh(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=6;class GI{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??$I,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new l_(this),this.idTokenSubscription=new l_(this),this.beforeStateQueue=new HI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=zs(t)),this._initializationPromise=this.queue(async()=>{var s,a,c;if(!this._deleted&&(this.persistenceManager=await wl.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await mh(this,{idToken:e}),s=await Ci._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(bi(this.app)){const m=this.app.settings.authIdToken;return m?new Promise(v=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(m).then(v,v))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const m=(c=this.redirectUser)==null?void 0:c._redirectEventId,v=s==null?void 0:s._redirectEventId,E=await this.tryRedirectSignIn(e);(!m||m===v)&&(E!=null&&E.user)&&(s=E.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(m){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(m))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ph(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=AI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bi(this.app))return Promise.reject(zo(this));const t=e?Fr(e):null;return t&&qe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bi(this.app)?Promise.reject(zo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bi(this.app)?Promise.reject(zo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qI(this),t=new GI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await BI(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&zs(e)||this._popupRedirectResolver;qe(t,this,"argument-error"),this.redirectPersistenceManager=await wl.create(this,[zs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let m=!1;const v=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(v,this,"internal-error"),v.then(()=>{m||c(this.currentUser)}),typeof t=="function"){const E=e.addObserver(t,s,a);return()=>{m=!0,E()}}else{const E=e.addObserver(t);return()=>{m=!0,E()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=av(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(bi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&PI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Dh(i){return Fr(i)}class l_{constructor(e){this.auth=e,this.observer=null,this.addObserver=mx(t=>this.observer=t)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KI(i){mm=i}function QI(i){return mm.loadJS(i)}function YI(){return mm.gapiScript}function XI(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(i,e){const t=um(i,"auth");if(t.isInitialized()){const a=t.getImmediate(),c=t.getOptions();if(Ca(c,e??{}))return a;Bs(a,"already-initialized")}return t.initialize({options:e})}function eS(i,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(zs);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function tS(i,e,t){const s=Dh(i);qe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,c=lv(e),{host:m,port:v}=nS(e),E=v===null?"":`:${v}`,x={url:`${c}//${m}${E}/`},b=Object.freeze({host:m,port:v,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){qe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),qe(Ca(x,s.config.emulator)&&Ca(b,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=x,s.emulatorConfig=b,s.settings.appVerificationDisabledForTesting=!0,Ll(m)?(Oy(`${c}//${m}${E}`),Vy("Auth",!0)):rS()}function lv(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function nS(i){const e=lv(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const c=a[1];return{host:c,port:u_(s.substr(c.length+1))}}else{const[c,m]=s.split(":");return{host:c,port:u_(m)}}}function u_(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function rS(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vs("not implemented")}_getIdTokenResponse(e){return Vs("not implemented")}_linkToIdToken(e,t){return Vs("not implemented")}_getReauthenticationResolver(e){return Vs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(i,e){return Ky(i,"POST","/v1/accounts:signInWithIdp",Mh(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="http://localhost";class ka extends uv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ka(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Bs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...c}=t;if(!s||!a)return null;const m=new ka(s,a);return m.idToken=c.idToken||void 0,m.accessToken=c.accessToken||void 0,m.secret=c.secret,m.nonce=c.nonce,m.pendingToken=c.pendingToken||null,m}_getIdTokenResponse(e){const t=this.buildRequest();return El(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,El(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,El(e,t)}buildRequest(){const e={requestUri:iS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends cv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko extends Bu{constructor(){super("facebook.com")}static credential(e){return ka._fromParams({providerId:ko.PROVIDER_ID,signInMethod:ko.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ko.credentialFromTaggedObject(e)}static credentialFromError(e){return ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ko.credential(e.oauthAccessToken)}catch{return null}}}ko.FACEBOOK_SIGN_IN_METHOD="facebook.com";ko.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro extends Bu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ka._fromParams({providerId:Ro.PROVIDER_ID,signInMethod:Ro.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ro.credentialFromTaggedObject(e)}static credentialFromError(e){return Ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Ro.credential(t,s)}catch{return null}}}Ro.GOOGLE_SIGN_IN_METHOD="google.com";Ro.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends Bu{constructor(){super("github.com")}static credential(e){return ka._fromParams({providerId:No.PROVIDER_ID,signInMethod:No.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return No.credentialFromTaggedObject(e)}static credentialFromError(e){return No.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return No.credential(e.oauthAccessToken)}catch{return null}}}No.GITHUB_SIGN_IN_METHOD="github.com";No.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends Bu{constructor(){super("twitter.com")}static credential(e,t){return ka._fromParams({providerId:Lo.PROVIDER_ID,signInMethod:Lo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Lo.credentialFromTaggedObject(e)}static credentialFromError(e){return Lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Lo.credential(t,s)}catch{return null}}}Lo.TWITTER_SIGN_IN_METHOD="twitter.com";Lo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sS(i,e){return Ky(i,"POST","/v1/accounts:signUp",Mh(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const c=await Ci._fromIdTokenResponse(e,s,a),m=c_(s);return new Bo({user:c,providerId:m,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=c_(s);return new Bo({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function c_(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oS(i){var a;if(bi(i.app))return Promise.reject(zo(i));const e=Dh(i);if(await e._initializationPromise,(a=e.currentUser)!=null&&a.isAnonymous)return new Bo({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await sS(e,{returnSecureToken:!0}),s=await Bo._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends qs{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,gh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new gh(e,t,s,a)}}function hv(i,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?gh._fromErrorAndOperation(i,c,e,s):c})}async function aS(i,e,t=!1){const s=await ku(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Bo._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lS(i,e,t=!1){const{auth:s}=i;if(bi(s.app))return Promise.reject(zo(s));const a="reauthenticate";try{const c=await ku(i,hv(s,a,e,i),t);qe(c.idToken,s,"internal-error");const m=dm(c.idToken);qe(m,s,"internal-error");const{sub:v}=m;return qe(i.uid===v,s,"user-mismatch"),Bo._forOperation(i,a,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Bs(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uS(i,e,t=!1){if(bi(i.app))return Promise.reject(zo(i));const s="signIn",a=await hv(i,s,e),c=await Bo._fromIdTokenResponse(i,s,a);return t||await i._updateCurrentUser(c.user),c}function cS(i,e,t,s){return Fr(i).onIdTokenChanged(e,t,s)}function hS(i,e,t){return Fr(i).beforeAuthStateChanged(e,t)}const _h="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_h,"1"),this.storage.removeItem(_h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=1e3,fS=10;class fv extends dv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ov(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((m,v,E)=>{this.notifyListeners(m,E)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const m=this.storage.getItem(s);!t&&this.localCache[s]===m||this.notifyListeners(s,m)},c=this.storage.getItem(s);WI()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,fS):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},dS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}fv.type="LOCAL";const mS=fv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv extends dv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mv.type="SESSION";const pv=mv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new Oh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:c}=t.data,m=this.handlersMap[a];if(!(m!=null&&m.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const v=Array.from(m).map(async x=>x(t.origin,c)),E=await pS(v);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:E})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(i="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,m;return new Promise((v,E)=>{const x=pm("",20);a.port1.start();const b=setTimeout(()=>{E(new Error("unsupported_event"))},s);m={messageChannel:a,onMessage(I){const M=I;if(M.data.eventId===x)switch(M.data.status){case"ack":clearTimeout(b),c=setTimeout(()=>{E(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),v(M.data.response);break;default:clearTimeout(b),clearTimeout(c),E(new Error("invalid_response"));break}}},this.handlers.add(m),a.port1.addEventListener("message",m.onMessage),this.target.postMessage({eventType:e,eventId:x,data:t},[a.port2])}).finally(()=>{m&&this.removeMessageHandler(m)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(){return window}function _S(i){rs().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(){return typeof rs().WorkerGlobalScope<"u"&&typeof rs().importScripts=="function"}async function yS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vS(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)==null?void 0:i.controller)||null}function wS(){return gv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="firebaseLocalStorageDb",ES=1,yh="firebaseLocalStorage",yv="fbase_key";class Uu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Vh(i,e){return i.transaction([yh],e?"readwrite":"readonly").objectStore(yh)}function TS(){const i=indexedDB.deleteDatabase(_v);return new Uu(i).toPromise()}function Ff(){const i=indexedDB.open(_v,ES);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(yh,{keyPath:yv})}catch(a){t(a)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(yh)?e(s):(s.close(),await TS(),e(await Ff()))})})}async function h_(i,e,t){const s=Vh(i,!0).put({[yv]:e,value:t});return new Uu(s).toPromise()}async function xS(i,e){const t=Vh(i,!1).get(e),s=await new Uu(t).toPromise();return s===void 0?null:s.value}function d_(i,e){const t=Vh(i,!0).delete(e);return new Uu(t).toPromise()}const IS=800,SS=3;class vv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ff(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>SS)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oh._getInstance(wS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await yS(),!this.activeServiceWorker)return;this.sender=new gS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ff();return await h_(e,_h,"1"),await d_(e,_h),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>h_(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>xS(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>d_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const c=Vh(a,!1).getAll();return new Uu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:c}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(c)&&(this.notifyListeners(a,c),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vv.type="LOCAL";const PS=vv;new ju(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(i,e){return e?zs(e):(qe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm extends uv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return El(e,this._buildIdpRequest())}_linkToIdToken(e,t){return El(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return El(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function CS(i){return uS(i.auth,new gm(i),i.bypassAuthState)}function AS(i){const{auth:e,user:t}=i;return qe(t,e,"internal-error"),lS(t,new gm(i),i.bypassAuthState)}async function kS(i){const{auth:e,user:t}=i;return qe(t,e,"internal-error"),aS(t,new gm(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,t,s,a,c=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:c,error:m,type:v}=e;if(m){this.reject(m);return}const E={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(v)(E))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return CS;case"linkViaPopup":case"linkViaRedirect":return kS;case"reauthViaPopup":case"reauthViaRedirect":return AS;default:Bs(this.auth,"internal-error")}}resolve(e){Us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=new ju(2e3,1e4);class _l extends wv{constructor(e,t,s,a,c){super(e,t,a,c),this.provider=s,this.authWindow=null,this.pollId=null,_l.currentPopupAction&&_l.currentPopupAction.cancel(),_l.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){Us(this.filter.length===1,"Popup operations only handle one event");const e=pm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ns(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ns(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_l.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ns(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RS.get())};e()}}_l.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="pendingRedirect",nh=new Map;class LS extends wv{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=nh.get(this.auth._key());if(!e){try{const s=await MS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}nh.set(this.auth._key(),e)}return this.bypassAuthState||nh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MS(i,e){const t=VS(e),s=OS(i);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function DS(i,e){nh.set(i._key(),e)}function OS(i){return zs(i._redirectPersistence)}function VS(i){return th(NS,i.config.apiKey,i.name)}async function zS(i,e,t=!1){if(bi(i.app))return Promise.reject(zo(i));const s=Dh(i),a=bS(s,e),m=await new LS(s,a,t).execute();return m&&!t&&(delete m.user._redirectEventId,await s._persistUserIfCurrent(m.user),await s._setRedirectUser(null,e)),m}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=600*1e3;class jS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Ev(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(ns(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FS&&this.cachedEventUids.clear(),this.cachedEventUids.has(f_(e))}saveEventToCache(e){this.cachedEventUids.add(f_(e)),this.lastProcessedEventTime=Date.now()}}function f_(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Ev({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function BS(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ev(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function US(i,e={}){return Dl(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HS=/^https?/;async function qS(i){if(i.config.emulator)return;const{authorizedDomains:e}=await US(i);for(const t of e)try{if($S(t))return}catch{}Bs(i,"unauthorized-domain")}function $S(i){const e=Vf(),{protocol:t,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const m=new URL(i);return m.hostname===""&&s===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&m.hostname===s}if(!HS.test(t))return!1;if(WS.test(i))return s===i;const a=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=new ju(3e4,6e4);function m_(){const i=rs().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function ZS(i){return new Promise((e,t)=>{var a,c,m;function s(){m_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{m_(),t(ns(i,"network-request-failed"))},timeout:GS.get()})}if((c=(a=rs().gapi)==null?void 0:a.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((m=rs().gapi)!=null&&m.load)s();else{const v=XI("iframefcb");return rs()[v]=()=>{gapi.load?s():t(ns(i,"network-request-failed"))},QI(`${YI()}?onload=${v}`).catch(E=>t(E))}}).catch(e=>{throw rh=null,e})}let rh=null;function KS(i){return rh=rh||ZS(i),rh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=new ju(5e3,15e3),YS="__/auth/iframe",XS="emulator/auth/iframe",JS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tP(i){const e=i.config;qe(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?hm(e,XS):`https://${i.config.authDomain}/${YS}`,s={apiKey:e.apiKey,appName:i.name,v:Ml},a=eP.get(i.config.apiHost);a&&(s.eid=a);const c=i._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${Fu(s).slice(1)}`}async function nP(i){const e=await KS(i),t=rs().gapi;return qe(t,i,"internal-error"),e.open({where:document.body,url:tP(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JS,dontclear:!0},s=>new Promise(async(a,c)=>{await s.restyle({setHideOnLeave:!1});const m=ns(i,"network-request-failed"),v=rs().setTimeout(()=>{c(m)},QS.get());function E(){rs().clearTimeout(v),a(s)}s.ping(E).then(E,()=>{c(m)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iP=500,sP=600,oP="_blank",aP="http://localhost";class p_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lP(i,e,t,s=iP,a=sP){const c=Math.max((window.screen.availHeight-a)/2,0).toString(),m=Math.max((window.screen.availWidth-s)/2,0).toString();let v="";const E={...rP,width:s.toString(),height:a.toString(),top:c,left:m},x=Hn().toLowerCase();t&&(v=tv(x)?oP:t),Jy(x)&&(e=e||aP,E.scrollbars="yes");const b=Object.entries(E).reduce((M,[$,Q])=>`${M}${$}=${Q},`,"");if(UI(x)&&v!=="_self")return uP(e||"",v),new p_(null);const I=window.open(e||"",v,b);qe(I,i,"popup-blocked");try{I.focus()}catch{}return new p_(I)}function uP(i,e){const t=document.createElement("a");t.href=i,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP="__/auth/handler",hP="emulator/auth/handler",dP=encodeURIComponent("fac");async function g_(i,e,t,s,a,c){qe(i.config.authDomain,i,"auth-domain-config-required"),qe(i.config.apiKey,i,"invalid-api-key");const m={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:s,v:Ml,eventId:a};if(e instanceof cv){e.setDefaultLanguage(i.languageCode),m.providerId=e.providerId||"",fx(e.getCustomParameters())||(m.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,I]of Object.entries({}))m[b]=I}if(e instanceof Bu){const b=e.getScopes().filter(I=>I!=="");b.length>0&&(m.scopes=b.join(","))}i.tenantId&&(m.tid=i.tenantId);const v=m;for(const b of Object.keys(v))v[b]===void 0&&delete v[b];const E=await i._getAppCheckToken(),x=E?`#${dP}=${encodeURIComponent(E)}`:"";return`${fP(i)}?${Fu(v).slice(1)}${x}`}function fP({config:i}){return i.emulator?hm(i,hP):`https://${i.authDomain}/${cP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef="webStorageSupport";class mP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pv,this._completeRedirectFn=zS,this._overrideRedirectResult=DS}async _openPopup(e,t,s,a){var m;Us((m=this.eventManagers[e._key()])==null?void 0:m.manager,"_initialize() not called before _openPopup()");const c=await g_(e,t,s,Vf(),a);return lP(e,c,pm())}async _openRedirect(e,t,s,a){await this._originValidation(e);const c=await g_(e,t,s,Vf(),a);return _S(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:c}=this.eventManagers[t];return a?Promise.resolve(a):(Us(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await nP(e),s=new jS(e);return t.register("authEvent",a=>(qe(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ef,{type:Ef},a=>{var m;const c=(m=a==null?void 0:a[0])==null?void 0:m[Ef];c!==void 0&&t(!!c),Bs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=qS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ov()||ev()||fm()}}const pP=mP;var __="@firebase/auth",y_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yP(i){Pl(new Aa("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:m,authDomain:v}=s.options;qe(m&&!m.includes(":"),"invalid-api-key",{appName:s.name});const E={apiKey:m,authDomain:v,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:av(i)},x=new ZI(s,a,c,E);return eS(x,t),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Pl(new Aa("auth-internal",e=>{const t=Dh(e.getProvider("auth").getImmediate());return(s=>new gP(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vo(__,y_,_P(i)),Vo(__,y_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=300,wP=Dy("authIdTokenMaxAge")||vP;let v_=null;const EP=i=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>wP)return;const a=t==null?void 0:t.token;v_!==a&&(v_=a,await fetch(i,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function TP(i=By()){const e=um(i,"auth");if(e.isInitialized())return e.getImmediate();const t=JI(i,{popupRedirectResolver:pP,persistence:[PS,mS,pv]}),s=Dy("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const m=EP(c.toString());hS(t,m,()=>m(t.currentUser)),cS(t,v=>m(v))}}const a=Ly("auth");return a&&tS(t,`http://${a}`),t}function xP(){var i;return((i=document.getElementsByTagName("head"))==null?void 0:i[0])??document}KI({loadJS(i){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=a=>{const c=ns("internal-error");c.customData=a,t(c)},s.type="text/javascript",s.charset="UTF-8",xP().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yP("Browser");var IP="firebase",SP="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vo(IP,SP,"app");var w_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fo,Tv;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,A){function O(){}O.prototype=A.prototype,F.F=A.prototype,F.prototype=new O,F.prototype.constructor=F,F.D=function(U,D,j){for(var k=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)k[$e-2]=arguments[$e];return A.prototype[D].apply(U,k)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(F,A,O){O||(O=0);const U=Array(16);if(typeof A=="string")for(var D=0;D<16;++D)U[D]=A.charCodeAt(O++)|A.charCodeAt(O++)<<8|A.charCodeAt(O++)<<16|A.charCodeAt(O++)<<24;else for(D=0;D<16;++D)U[D]=A[O++]|A[O++]<<8|A[O++]<<16|A[O++]<<24;A=F.g[0],O=F.g[1],D=F.g[2];let j=F.g[3],k;k=A+(j^O&(D^j))+U[0]+3614090360&4294967295,A=O+(k<<7&4294967295|k>>>25),k=j+(D^A&(O^D))+U[1]+3905402710&4294967295,j=A+(k<<12&4294967295|k>>>20),k=D+(O^j&(A^O))+U[2]+606105819&4294967295,D=j+(k<<17&4294967295|k>>>15),k=O+(A^D&(j^A))+U[3]+3250441966&4294967295,O=D+(k<<22&4294967295|k>>>10),k=A+(j^O&(D^j))+U[4]+4118548399&4294967295,A=O+(k<<7&4294967295|k>>>25),k=j+(D^A&(O^D))+U[5]+1200080426&4294967295,j=A+(k<<12&4294967295|k>>>20),k=D+(O^j&(A^O))+U[6]+2821735955&4294967295,D=j+(k<<17&4294967295|k>>>15),k=O+(A^D&(j^A))+U[7]+4249261313&4294967295,O=D+(k<<22&4294967295|k>>>10),k=A+(j^O&(D^j))+U[8]+1770035416&4294967295,A=O+(k<<7&4294967295|k>>>25),k=j+(D^A&(O^D))+U[9]+2336552879&4294967295,j=A+(k<<12&4294967295|k>>>20),k=D+(O^j&(A^O))+U[10]+4294925233&4294967295,D=j+(k<<17&4294967295|k>>>15),k=O+(A^D&(j^A))+U[11]+2304563134&4294967295,O=D+(k<<22&4294967295|k>>>10),k=A+(j^O&(D^j))+U[12]+1804603682&4294967295,A=O+(k<<7&4294967295|k>>>25),k=j+(D^A&(O^D))+U[13]+4254626195&4294967295,j=A+(k<<12&4294967295|k>>>20),k=D+(O^j&(A^O))+U[14]+2792965006&4294967295,D=j+(k<<17&4294967295|k>>>15),k=O+(A^D&(j^A))+U[15]+1236535329&4294967295,O=D+(k<<22&4294967295|k>>>10),k=A+(D^j&(O^D))+U[1]+4129170786&4294967295,A=O+(k<<5&4294967295|k>>>27),k=j+(O^D&(A^O))+U[6]+3225465664&4294967295,j=A+(k<<9&4294967295|k>>>23),k=D+(A^O&(j^A))+U[11]+643717713&4294967295,D=j+(k<<14&4294967295|k>>>18),k=O+(j^A&(D^j))+U[0]+3921069994&4294967295,O=D+(k<<20&4294967295|k>>>12),k=A+(D^j&(O^D))+U[5]+3593408605&4294967295,A=O+(k<<5&4294967295|k>>>27),k=j+(O^D&(A^O))+U[10]+38016083&4294967295,j=A+(k<<9&4294967295|k>>>23),k=D+(A^O&(j^A))+U[15]+3634488961&4294967295,D=j+(k<<14&4294967295|k>>>18),k=O+(j^A&(D^j))+U[4]+3889429448&4294967295,O=D+(k<<20&4294967295|k>>>12),k=A+(D^j&(O^D))+U[9]+568446438&4294967295,A=O+(k<<5&4294967295|k>>>27),k=j+(O^D&(A^O))+U[14]+3275163606&4294967295,j=A+(k<<9&4294967295|k>>>23),k=D+(A^O&(j^A))+U[3]+4107603335&4294967295,D=j+(k<<14&4294967295|k>>>18),k=O+(j^A&(D^j))+U[8]+1163531501&4294967295,O=D+(k<<20&4294967295|k>>>12),k=A+(D^j&(O^D))+U[13]+2850285829&4294967295,A=O+(k<<5&4294967295|k>>>27),k=j+(O^D&(A^O))+U[2]+4243563512&4294967295,j=A+(k<<9&4294967295|k>>>23),k=D+(A^O&(j^A))+U[7]+1735328473&4294967295,D=j+(k<<14&4294967295|k>>>18),k=O+(j^A&(D^j))+U[12]+2368359562&4294967295,O=D+(k<<20&4294967295|k>>>12),k=A+(O^D^j)+U[5]+4294588738&4294967295,A=O+(k<<4&4294967295|k>>>28),k=j+(A^O^D)+U[8]+2272392833&4294967295,j=A+(k<<11&4294967295|k>>>21),k=D+(j^A^O)+U[11]+1839030562&4294967295,D=j+(k<<16&4294967295|k>>>16),k=O+(D^j^A)+U[14]+4259657740&4294967295,O=D+(k<<23&4294967295|k>>>9),k=A+(O^D^j)+U[1]+2763975236&4294967295,A=O+(k<<4&4294967295|k>>>28),k=j+(A^O^D)+U[4]+1272893353&4294967295,j=A+(k<<11&4294967295|k>>>21),k=D+(j^A^O)+U[7]+4139469664&4294967295,D=j+(k<<16&4294967295|k>>>16),k=O+(D^j^A)+U[10]+3200236656&4294967295,O=D+(k<<23&4294967295|k>>>9),k=A+(O^D^j)+U[13]+681279174&4294967295,A=O+(k<<4&4294967295|k>>>28),k=j+(A^O^D)+U[0]+3936430074&4294967295,j=A+(k<<11&4294967295|k>>>21),k=D+(j^A^O)+U[3]+3572445317&4294967295,D=j+(k<<16&4294967295|k>>>16),k=O+(D^j^A)+U[6]+76029189&4294967295,O=D+(k<<23&4294967295|k>>>9),k=A+(O^D^j)+U[9]+3654602809&4294967295,A=O+(k<<4&4294967295|k>>>28),k=j+(A^O^D)+U[12]+3873151461&4294967295,j=A+(k<<11&4294967295|k>>>21),k=D+(j^A^O)+U[15]+530742520&4294967295,D=j+(k<<16&4294967295|k>>>16),k=O+(D^j^A)+U[2]+3299628645&4294967295,O=D+(k<<23&4294967295|k>>>9),k=A+(D^(O|~j))+U[0]+4096336452&4294967295,A=O+(k<<6&4294967295|k>>>26),k=j+(O^(A|~D))+U[7]+1126891415&4294967295,j=A+(k<<10&4294967295|k>>>22),k=D+(A^(j|~O))+U[14]+2878612391&4294967295,D=j+(k<<15&4294967295|k>>>17),k=O+(j^(D|~A))+U[5]+4237533241&4294967295,O=D+(k<<21&4294967295|k>>>11),k=A+(D^(O|~j))+U[12]+1700485571&4294967295,A=O+(k<<6&4294967295|k>>>26),k=j+(O^(A|~D))+U[3]+2399980690&4294967295,j=A+(k<<10&4294967295|k>>>22),k=D+(A^(j|~O))+U[10]+4293915773&4294967295,D=j+(k<<15&4294967295|k>>>17),k=O+(j^(D|~A))+U[1]+2240044497&4294967295,O=D+(k<<21&4294967295|k>>>11),k=A+(D^(O|~j))+U[8]+1873313359&4294967295,A=O+(k<<6&4294967295|k>>>26),k=j+(O^(A|~D))+U[15]+4264355552&4294967295,j=A+(k<<10&4294967295|k>>>22),k=D+(A^(j|~O))+U[6]+2734768916&4294967295,D=j+(k<<15&4294967295|k>>>17),k=O+(j^(D|~A))+U[13]+1309151649&4294967295,O=D+(k<<21&4294967295|k>>>11),k=A+(D^(O|~j))+U[4]+4149444226&4294967295,A=O+(k<<6&4294967295|k>>>26),k=j+(O^(A|~D))+U[11]+3174756917&4294967295,j=A+(k<<10&4294967295|k>>>22),k=D+(A^(j|~O))+U[2]+718787259&4294967295,D=j+(k<<15&4294967295|k>>>17),k=O+(j^(D|~A))+U[9]+3951481745&4294967295,F.g[0]=F.g[0]+A&4294967295,F.g[1]=F.g[1]+(D+(k<<21&4294967295|k>>>11))&4294967295,F.g[2]=F.g[2]+D&4294967295,F.g[3]=F.g[3]+j&4294967295}s.prototype.v=function(F,A){A===void 0&&(A=F.length);const O=A-this.blockSize,U=this.C;let D=this.h,j=0;for(;j<A;){if(D==0)for(;j<=O;)a(this,F,j),j+=this.blockSize;if(typeof F=="string"){for(;j<A;)if(U[D++]=F.charCodeAt(j++),D==this.blockSize){a(this,U),D=0;break}}else for(;j<A;)if(U[D++]=F[j++],D==this.blockSize){a(this,U),D=0;break}}this.h=D,this.o+=A},s.prototype.A=function(){var F=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);F[0]=128;for(var A=1;A<F.length-8;++A)F[A]=0;A=this.o*8;for(var O=F.length-8;O<F.length;++O)F[O]=A&255,A/=256;for(this.v(F),F=Array(16),A=0,O=0;O<4;++O)for(let U=0;U<32;U+=8)F[A++]=this.g[O]>>>U&255;return F};function c(F,A){var O=v;return Object.prototype.hasOwnProperty.call(O,F)?O[F]:O[F]=A(F)}function m(F,A){this.h=A;const O=[];let U=!0;for(let D=F.length-1;D>=0;D--){const j=F[D]|0;U&&j==A||(O[D]=j,U=!1)}this.g=O}var v={};function E(F){return-128<=F&&F<128?c(F,function(A){return new m([A|0],A<0?-1:0)}):new m([F|0],F<0?-1:0)}function x(F){if(isNaN(F)||!isFinite(F))return I;if(F<0)return ee(x(-F));const A=[];let O=1;for(let U=0;F>=O;U++)A[U]=F/O|0,O*=4294967296;return new m(A,0)}function b(F,A){if(F.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(F.charAt(0)=="-")return ee(b(F.substring(1),A));if(F.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=x(Math.pow(A,8));let U=I;for(let j=0;j<F.length;j+=8){var D=Math.min(8,F.length-j);const k=parseInt(F.substring(j,j+D),A);D<8?(D=x(Math.pow(A,D)),U=U.j(D).add(x(k))):(U=U.j(O),U=U.add(x(k)))}return U}var I=E(0),M=E(1),$=E(16777216);i=m.prototype,i.m=function(){if(te(this))return-ee(this).m();let F=0,A=1;for(let O=0;O<this.g.length;O++){const U=this.i(O);F+=(U>=0?U:4294967296+U)*A,A*=4294967296}return F},i.toString=function(F){if(F=F||10,F<2||36<F)throw Error("radix out of range: "+F);if(Q(this))return"0";if(te(this))return"-"+ee(this).toString(F);const A=x(Math.pow(F,6));var O=this;let U="";for(;;){const D=ge(O,A).g;O=Ae(O,D.j(A));let j=((O.g.length>0?O.g[0]:O.h)>>>0).toString(F);if(O=D,Q(O))return j+U;for(;j.length<6;)j="0"+j;U=j+U}},i.i=function(F){return F<0?0:F<this.g.length?this.g[F]:this.h};function Q(F){if(F.h!=0)return!1;for(let A=0;A<F.g.length;A++)if(F.g[A]!=0)return!1;return!0}function te(F){return F.h==-1}i.l=function(F){return F=Ae(this,F),te(F)?-1:Q(F)?0:1};function ee(F){const A=F.g.length,O=[];for(let U=0;U<A;U++)O[U]=~F.g[U];return new m(O,~F.h).add(M)}i.abs=function(){return te(this)?ee(this):this},i.add=function(F){const A=Math.max(this.g.length,F.g.length),O=[];let U=0;for(let D=0;D<=A;D++){let j=U+(this.i(D)&65535)+(F.i(D)&65535),k=(j>>>16)+(this.i(D)>>>16)+(F.i(D)>>>16);U=k>>>16,j&=65535,k&=65535,O[D]=k<<16|j}return new m(O,O[O.length-1]&-2147483648?-1:0)};function Ae(F,A){return F.add(ee(A))}i.j=function(F){if(Q(this)||Q(F))return I;if(te(this))return te(F)?ee(this).j(ee(F)):ee(ee(this).j(F));if(te(F))return ee(this.j(ee(F)));if(this.l($)<0&&F.l($)<0)return x(this.m()*F.m());const A=this.g.length+F.g.length,O=[];for(var U=0;U<2*A;U++)O[U]=0;for(U=0;U<this.g.length;U++)for(let D=0;D<F.g.length;D++){const j=this.i(U)>>>16,k=this.i(U)&65535,$e=F.i(D)>>>16,at=F.i(D)&65535;O[2*U+2*D]+=k*at,pe(O,2*U+2*D),O[2*U+2*D+1]+=j*at,pe(O,2*U+2*D+1),O[2*U+2*D+1]+=k*$e,pe(O,2*U+2*D+1),O[2*U+2*D+2]+=j*$e,pe(O,2*U+2*D+2)}for(F=0;F<A;F++)O[F]=O[2*F+1]<<16|O[2*F];for(F=A;F<2*A;F++)O[F]=0;return new m(O,0)};function pe(F,A){for(;(F[A]&65535)!=F[A];)F[A+1]+=F[A]>>>16,F[A]&=65535,A++}function ve(F,A){this.g=F,this.h=A}function ge(F,A){if(Q(A))throw Error("division by zero");if(Q(F))return new ve(I,I);if(te(F))return A=ge(ee(F),A),new ve(ee(A.g),ee(A.h));if(te(A))return A=ge(F,ee(A)),new ve(ee(A.g),A.h);if(F.g.length>30){if(te(F)||te(A))throw Error("slowDivide_ only works with positive integers.");for(var O=M,U=A;U.l(F)<=0;)O=Me(O),U=Me(U);var D=je(O,1),j=je(U,1);for(U=je(U,2),O=je(O,2);!Q(U);){var k=j.add(U);k.l(F)<=0&&(D=D.add(O),j=k),U=je(U,1),O=je(O,1)}return A=Ae(F,D.j(A)),new ve(D,A)}for(D=I;F.l(A)>=0;){for(O=Math.max(1,Math.floor(F.m()/A.m())),U=Math.ceil(Math.log(O)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),j=x(O),k=j.j(A);te(k)||k.l(F)>0;)O-=U,j=x(O),k=j.j(A);Q(j)&&(j=M),D=D.add(j),F=Ae(F,k)}return new ve(D,F)}i.B=function(F){return ge(this,F).h},i.and=function(F){const A=Math.max(this.g.length,F.g.length),O=[];for(let U=0;U<A;U++)O[U]=this.i(U)&F.i(U);return new m(O,this.h&F.h)},i.or=function(F){const A=Math.max(this.g.length,F.g.length),O=[];for(let U=0;U<A;U++)O[U]=this.i(U)|F.i(U);return new m(O,this.h|F.h)},i.xor=function(F){const A=Math.max(this.g.length,F.g.length),O=[];for(let U=0;U<A;U++)O[U]=this.i(U)^F.i(U);return new m(O,this.h^F.h)};function Me(F){const A=F.g.length+1,O=[];for(let U=0;U<A;U++)O[U]=F.i(U)<<1|F.i(U-1)>>>31;return new m(O,F.h)}function je(F,A){const O=A>>5;A%=32;const U=F.g.length-O,D=[];for(let j=0;j<U;j++)D[j]=A>0?F.i(j+O)>>>A|F.i(j+O+1)<<32-A:F.i(j+O);return new m(D,F.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Tv=s,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.B,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=x,m.fromString=b,Fo=m}).apply(typeof w_<"u"?w_:typeof self<"u"?self:typeof window<"u"?window:{});var Kc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xv,yu,Iv,ih,jf,Sv,Pv,bv;(function(){var i,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kc=="object"&&Kc];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var s=t(this);function a(h,y){if(y)e:{var T=s;h=h.split(".");for(var C=0;C<h.length-1;C++){var H=h[C];if(!(H in T))break e;T=T[H]}h=h[h.length-1],C=T[h],y=y(C),y!=C&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var T=[],C;for(C in y)Object.prototype.hasOwnProperty.call(y,C)&&T.push([C,y[C]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},m=this||self;function v(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function E(h,y,T){return h.call.apply(h.bind,arguments)}function x(h,y,T){return x=E,x.apply(null,arguments)}function b(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var C=T.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function I(h,y){function T(){}T.prototype=y.prototype,h.Z=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(C,H,K){for(var de=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)de[Be-2]=arguments[Be];return y.prototype[H].apply(C,de)}}var M=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function $(h){const y=h.length;if(y>0){const T=Array(y);for(let C=0;C<y;C++)T[C]=h[C];return T}return[]}function Q(h,y){for(let C=1;C<arguments.length;C++){const H=arguments[C];var T=typeof H;if(T=T!="object"?T:H?Array.isArray(H)?"array":T:"null",T=="array"||T=="object"&&typeof H.length=="number"){T=h.length||0;const K=H.length||0;h.length=T+K;for(let de=0;de<K;de++)h[T+de]=H[de]}else h.push(H)}}class te{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function ee(h){m.setTimeout(()=>{throw h},0)}function Ae(){var h=F;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class pe{constructor(){this.h=this.g=null}add(y,T){const C=ve.get();C.set(y,T),this.h?this.h.next=C:this.g=C,this.h=C}}var ve=new te(()=>new ge,h=>h.reset());class ge{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Me,je=!1,F=new pe,A=()=>{const h=Promise.resolve(void 0);Me=()=>{h.then(O)}};function O(){for(var h;h=Ae();){try{h.h.call(h.g)}catch(T){ee(T)}var y=ve;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}je=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};m.addEventListener("test",T,y),m.removeEventListener("test",T,y)}catch{}return h})();function k(h){return/^[\s\xa0]*$/.test(h)}function $e(h,y){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}I($e,D),$e.prototype.init=function(h,y){const T=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&$e.Z.h.call(this)},$e.prototype.h=function(){$e.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var at="closure_listenable_"+(Math.random()*1e6|0),be=0;function Ye(h,y,T,C,H){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!C,this.ha=H,this.key=++be,this.da=this.fa=!1}function ne(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ie(h,y,T){for(const C in h)y.call(T,h[C],C,h)}function re(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function z(h){const y={};for(const T in h)y[T]=h[T];return y}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(h,y){let T,C;for(let H=1;H<arguments.length;H++){C=arguments[H];for(T in C)h[T]=C[T];for(let K=0;K<J.length;K++)T=J[K],Object.prototype.hasOwnProperty.call(C,T)&&(h[T]=C[T])}}function _e(h){this.src=h,this.g={},this.h=0}_e.prototype.add=function(h,y,T,C,H){const K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);const de=ce(h,y,C,H);return de>-1?(y=h[de],T||(y.fa=!1)):(y=new Ye(y,this.src,K,!!C,H),y.fa=T,h.push(y)),y};function Ee(h,y){const T=y.type;if(T in h.g){var C=h.g[T],H=Array.prototype.indexOf.call(C,y,void 0),K;(K=H>=0)&&Array.prototype.splice.call(C,H,1),K&&(ne(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function ce(h,y,T,C){for(let H=0;H<h.length;++H){const K=h[H];if(!K.da&&K.listener==y&&K.capture==!!T&&K.ha==C)return H}return-1}var Ge="closure_lm_"+(Math.random()*1e6|0),Ue={};function nt(h,y,T,C,H){if(Array.isArray(y)){for(let K=0;K<y.length;K++)nt(h,y[K],T,C,H);return null}return T=br(T),h&&h[at]?h.J(y,T,v(C)?!!C.capture:!1,H):Rt(h,y,T,!1,C,H)}function Rt(h,y,T,C,H,K){if(!y)throw Error("Invalid event type");const de=v(H)?!!H.capture:!!H;let Be=Ur(h);if(Be||(h[Ge]=Be=new _e(h)),T=Be.add(y,T,C,de,K),T.proxy)return T;if(C=jr(),T.proxy=C,C.src=h,C.listener=T,h.addEventListener)j||(H=de),H===void 0&&(H=!1),h.addEventListener(y.toString(),C,H);else if(h.attachEvent)h.attachEvent(Br(y.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return T}function jr(){function h(T){return y.call(h.src,h.listener,T)}const y=ls;return h}function ir(h,y,T,C,H){if(Array.isArray(y))for(var K=0;K<y.length;K++)ir(h,y[K],T,C,H);else C=v(C)?!!C.capture:!!C,T=br(T),h&&h[at]?(h=h.i,K=String(y).toString(),K in h.g&&(y=h.g[K],T=ce(y,T,C,H),T>-1&&(ne(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete h.g[K],h.h--)))):h&&(h=Ur(h))&&(y=h.g[y.toString()],h=-1,y&&(h=ce(y,T,C,H)),(T=h>-1?y[h]:null)&&sr(T))}function sr(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[at])Ee(y.i,h);else{var T=h.type,C=h.proxy;y.removeEventListener?y.removeEventListener(T,C,h.capture):y.detachEvent?y.detachEvent(Br(T),C):y.addListener&&y.removeListener&&y.removeListener(C),(T=Ur(y))?(Ee(T,h),T.h==0&&(T.src=null,y[Ge]=null)):ne(h)}}}function Br(h){return h in Ue?Ue[h]:Ue[h]="on"+h}function ls(h,y){if(h.da)h=!0;else{y=new $e(y,this);const T=h.listener,C=h.ha||h.src;h.fa&&sr(h),h=T.call(C,y)}return h}function Ur(h){return h=h[Ge],h instanceof _e?h:null}var _n="__closure_events_fn_"+(Math.random()*1e9>>>0);function br(h){return typeof h=="function"?h:(h[_n]||(h[_n]=function(y){return h.handleEvent(y)}),h[_n])}function ft(){U.call(this),this.i=new _e(this),this.M=this,this.G=null}I(ft,U),ft.prototype[at]=!0,ft.prototype.removeEventListener=function(h,y,T,C){ir(this,h,y,T,C)};function St(h,y){var T,C=h.G;if(C)for(T=[];C;C=C.G)T.push(C);if(h=h.M,C=y.type||y,typeof y=="string")y=new D(y,h);else if(y instanceof D)y.target=y.target||h;else{var H=y;y=new D(C,h),fe(y,H)}H=!0;let K,de;if(T)for(de=T.length-1;de>=0;de--)K=y.g=T[de],H=yn(K,C,!0,y)&&H;if(K=y.g=h,H=yn(K,C,!0,y)&&H,H=yn(K,C,!1,y)&&H,T)for(de=0;de<T.length;de++)K=y.g=T[de],H=yn(K,C,!1,y)&&H}ft.prototype.N=function(){if(ft.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const T=h.g[y];for(let C=0;C<T.length;C++)ne(T[C]);delete h.g[y],h.h--}}this.G=null},ft.prototype.J=function(h,y,T,C){return this.i.add(String(h),y,!1,T,C)},ft.prototype.K=function(h,y,T,C){return this.i.add(String(h),y,!0,T,C)};function yn(h,y,T,C){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let K=0;K<y.length;++K){const de=y[K];if(de&&!de.da&&de.capture==T){const Be=de.listener,ct=de.ha||de.src;de.fa&&Ee(h.i,de),H=Be.call(ct,C)!==!1&&H}}return H&&!C.defaultPrevented}function Ut(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:m.setTimeout(h,y||0)}function qn(h){h.g=Ut(()=>{h.g=null,h.i&&(h.i=!1,qn(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class $s extends U{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:qn(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wr(h){U.call(this),this.h=h,this.g={}}I(Wr,U);var or=[];function pi(h){Ie(h.g,function(y,T){this.g.hasOwnProperty(T)&&sr(y)},h),h.g={}}Wr.prototype.N=function(){Wr.Z.N.call(this),pi(this)},Wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ar=m.JSON.stringify,Li=m.JSON.parse,vn=class{stringify(h){return m.JSON.stringify(h,void 0)}parse(h){return m.JSON.parse(h,void 0)}};function lr(){}function Cr(){}var Ar={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Hr(){D.call(this,"d")}I(Hr,D);function gi(){D.call(this,"c")}I(gi,D);var kn={},ur=null;function cr(){return ur=ur||new ft}kn.Ia="serverreachability";function wn(h){D.call(this,kn.Ia,h)}I(wn,D);function hr(h){const y=cr();St(y,new wn(y))}kn.STAT_EVENT="statevent";function dr(h,y){D.call(this,kn.STAT_EVENT,h),this.stat=y}I(dr,D);function Tt(h){const y=cr();St(y,new dr(y,h))}kn.Ja="timingevent";function Mi(h,y){D.call(this,kn.Ja,h),this.size=y}I(Mi,D);function Fe(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){h()},y)}function wt(){this.g=!0}wt.prototype.ua=function(){this.g=!1};function Ot(h,y,T,C,H,K){h.info(function(){if(h.g)if(K){var de="",Be=K.split("&");for(let mt=0;mt<Be.length;mt++){var ct=Be[mt].split("=");if(ct.length>1){const zt=ct[0];ct=ct[1];const Jn=zt.split("_");de=Jn.length>=2&&Jn[1]=="type"?de+(zt+"="+ct+"&"):de+(zt+"=redacted&")}}}else de=null;else de=K;return"XMLHTTP REQ ("+C+") [attempt "+H+"]: "+y+`
`+T+`
`+de})}function Kt(h,y,T,C,H,K,de){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+H+"]: "+y+`
`+T+`
`+K+" "+de})}function En(h,y,T,C){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Wt(h,T)+(C?" "+C:"")})}function Pt(h,y){h.info(function(){return"TIMEOUT: "+y})}wt.prototype.info=function(){};function Wt(h,y){if(!h.g)return y;if(!y)return null;try{const K=JSON.parse(y);if(K){for(h=0;h<K.length;h++)if(Array.isArray(K[h])){var T=K[h];if(!(T.length<2)){var C=T[1];if(Array.isArray(C)&&!(C.length<1)){var H=C[0];if(H!="noop"&&H!="stop"&&H!="close")for(let de=1;de<C.length;de++)C[de]=""}}}}return ar(K)}catch{return y}}var $n={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ht={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},cn;function Vt(){}I(Vt,lr),Vt.prototype.g=function(){return new XMLHttpRequest},cn=new Vt;function ye(h){return encodeURIComponent(String(h))}function Di(h){var y=1;h=h.split(":");const T=[];for(;y>0&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function Gn(h,y,T,C){this.j=h,this.i=y,this.l=T,this.S=C||1,this.V=new Wr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zo}function Zo(){this.i=null,this.g="",this.h=!1}var Ko={},us={};function fr(h,y,T){h.M=1,h.A=gt(Tn(y)),h.u=T,h.R=!0,qr(h,null)}function qr(h,y){h.F=Date.now(),cs(h),h.B=Tn(h.A);var T=h.B,C=h.S;Array.isArray(C)||(C=[String(C)]),_s(T.i,"t",C),h.C=0,T=h.j.L,h.h=new Zo,h.g=ra(h.j,T?y:null,!h.u),h.P>0&&(h.O=new $s(x(h.Y,h,h.g),h.P)),y=h.V,T=h.g,C=h.ba;var H="readystatechange";Array.isArray(H)||(H&&(or[0]=H.toString()),H=or);for(let K=0;K<H.length;K++){const de=nt(T,H[K],C||y.handleEvent,!1,y.h||y);if(!de)break;y.g[de.key]=de}y=h.J?z(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),hr(),Ot(h.i,h.v,h.B,h.l,h.S,h.u)}Gn.prototype.ba=function(h){h=h.target;const y=this.O;y&&Xr(h)==3?y.j():this.Y(h)},Gn.prototype.Y=function(h){try{if(h==this.g)e:{const Be=Xr(this.g),ct=this.g.ya(),mt=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||ea(this.g)))){this.K||Be!=4||ct==7||(ct==8||mt<=0?hr(3):hr(2)),hs(this);var y=this.g.ca();this.X=y;var T=Qo(this);if(this.o=y==200,Kt(this.i,this.v,this.B,this.l,this.S,Be,y),this.o){if(this.U&&!this.L){t:{if(this.g){var C,H=this.g;if((C=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(C)){var K=C;break t}}K=null}if(h=K)En(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,It(this,h);else{this.o=!1,this.m=3,Tt(12),mr(this),ds(this);break e}}if(this.R){h=!0;let zt;for(;!this.K&&this.C<T.length;)if(zt=Fa(this,T),zt==us){Be==4&&(this.m=4,Tt(14),h=!1),En(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==Ko){this.m=4,Tt(15),En(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else En(this.i,this.l,zt,null),It(this,zt);if(za(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||T.length!=0||this.h.h||(this.m=1,Tt(16),h=!1),this.o=this.o&&h,!h)En(this.i,this.l,T,"[Invalid Chunked Response]"),mr(this),ds(this);else if(T.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),xs(de),de.P=!0,Tt(11))}}else En(this.i,this.l,T,null),It(this,T);Be==4&&mr(this),this.o&&!this.K&&(Be==4?In(this.j,this):(this.o=!1,cs(this)))}else ws(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),mr(this),ds(this)}}}catch{}finally{}};function Qo(h){if(!za(h))return h.g.la();const y=ea(h.g);if(y==="")return"";let T="";const C=y.length,H=Xr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return mr(h),ds(h),"";h.h.i=new m.TextDecoder}for(let K=0;K<C;K++)h.h.h=!0,T+=h.h.i.decode(y[K],{stream:!(H&&K==C-1)});return y.length=0,h.h.g+=T,h.C=0,h.h.g}function za(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Fa(h,y){var T=h.C,C=y.indexOf(`
`,T);return C==-1?us:(T=Number(y.substring(T,C)),isNaN(T)?Ko:(C+=1,C+T>y.length?us:(y=y.slice(C,C+T),h.C=C+T,y)))}Gn.prototype.cancel=function(){this.K=!0,mr(this)};function cs(h){h.T=Date.now()+h.H,Yo(h,h.H)}function Yo(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Fe(x(h.aa,h),y)}function hs(h){h.D&&(m.clearTimeout(h.D),h.D=null)}Gn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Pt(this.i,this.B),this.M!=2&&(hr(),Tt(17)),mr(this),this.m=2,ds(this)):Yo(this,this.T-h)};function ds(h){h.j.I==0||h.K||In(h.j,h)}function mr(h){hs(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,pi(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function It(h,y){try{var T=h.j;if(T.I!=0&&(T.g==h||ms(T.h,h))){if(!h.L&&ms(T.h,h)&&T.I==3){try{var C=T.Ba.g.parse(y)}catch{C=null}if(Array.isArray(C)&&C.length==3){var H=C;if(H[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)Qs(T),Yn(T);else break e;ei(T),Tt(18)}}else T.xa=H[1],0<T.xa-T.K&&H[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Fe(x(T.Va,T),6e3));fs(T.h)<=1&&T.ta&&(T.ta=void 0)}else Mn(T,11)}else if((h.L||T.g==h)&&Qs(T),!k(y))for(H=T.Ba.g.parse(y),y=0;y<H.length;y++){let mt=H[y];const zt=mt[0];if(!(zt<=T.K))if(T.K=zt,mt=mt[1],T.I==2)if(mt[0]=="c"){T.M=mt[1],T.ba=mt[2];const Jn=mt[3];Jn!=null&&(T.ka=Jn,T.j.info("VER="+T.ka));const Nr=mt[4];Nr!=null&&(T.za=Nr,T.j.info("SVER="+T.za));const yr=mt[5];yr!=null&&typeof yr=="number"&&yr>0&&(C=1.5*yr,T.O=C,T.j.info("backChannelRequestTimeoutMs_="+C)),C=T;const ni=h.g;if(ni){const to=ni.g?ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(to){var K=C.h;K.g||to.indexOf("spdy")==-1&&to.indexOf("quic")==-1&&to.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&($r(K,K.h),K.h=null))}if(C.G){const no=ni.g?ni.g.getResponseHeader("X-HTTP-Session-Id"):null;no&&(C.wa=no,Te(C.J,C.G,no))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),C=T;var de=h;if(C.na=Xs(C,C.L?C.ba:null,C.W),de.L){Oi(C.h,de);var Be=de,ct=C.O;ct&&(Be.H=ct),Be.D&&(hs(Be),cs(Be)),C.g=de}else rn(C);T.i.length>0&&Xn(T)}else mt[0]!="stop"&&mt[0]!="close"||Mn(T,7);else T.I==3&&(mt[0]=="stop"||mt[0]=="close"?mt[0]=="stop"?Mn(T,7):et(T):mt[0]!="noop"&&T.l&&T.l.qa(mt),T.A=0)}}hr(4)}catch{}}var Bl=class{constructor(h,y){this.g=h,this.map=y}};function Gs(h){this.l=h||10,m.PerformanceNavigationTiming?(h=m.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Xo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function fs(h){return h.h?1:h.g?h.g.size:0}function ms(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function $r(h,y){h.g?h.g.add(y):h.h=y}function Oi(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Gs.prototype.cancel=function(){if(this.i=Rn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Rn(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.G);return y}return $(h.i)}var Vi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(h,y){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const C=h[T].indexOf("=");let H,K=null;C>=0?(H=h[T].substring(0,C),K=h[T].substring(C+1)):H=h[T],y(H,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function ut(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof ut?(this.l=h.l,pr(this,h.j),this.o=h.o,this.g=h.g,xn(this,h.u),this.h=h.h,Gr(this,Fi(h.i)),this.m=h.m):h&&(y=String(h).match(Vi))?(this.l=!1,pr(this,y[1]||"",!0),this.o=_i(y[2]||""),this.g=_i(y[3]||"",!0),xn(this,y[4]),this.h=_i(y[5]||"",!0),Gr(this,y[6]||"",!0),this.m=_i(y[7]||"")):(this.l=!1,this.i=new Je(null,this.l))}ut.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Zr(y,Jo,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Zr(y,Jo,!0),"@"),h.push(ye(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Zr(T,T.charAt(0)=="/"?Zn:zi,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Zr(T,kr)),h.join("")},ut.prototype.resolve=function(h){const y=Tn(this);let T=!!h.j;T?pr(y,h.j):T=!!h.o,T?y.o=h.o:T=!!h.g,T?y.g=h.g:T=h.u!=null;var C=h.h;if(T)xn(y,h.u);else if(T=!!h.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var H=y.h.lastIndexOf("/");H!=-1&&(C=y.h.slice(0,H+1)+C)}if(H=C,H==".."||H==".")C="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){C=H.lastIndexOf("/",0)==0,H=H.split("/");const K=[];for(let de=0;de<H.length;){const Be=H[de++];Be=="."?C&&de==H.length&&K.push(""):Be==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),C&&de==H.length&&K.push("")):(K.push(Be),C=!0)}C=K.join("/")}else C=H}return T?y.h=C:T=h.i.toString()!=="",T?Gr(y,Fi(h.i)):T=!!h.m,T&&(y.m=h.m),y};function Tn(h){return new ut(h)}function pr(h,y,T){h.j=T?_i(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function xn(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Gr(h,y,T){y instanceof Je?(h.i=y,ji(h.i,h.l)):(T||(y=Zr(y,Lt)),h.i=new Je(y,h.l))}function Te(h,y,T){h.i.set(y,T)}function gt(h){return Te(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function _i(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Zr(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,hn),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function hn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Jo=/[#\/\?@]/g,zi=/[#\?:]/g,Zn=/[#\?]/g,Lt=/[#\?@]/g,kr=/#/g;function Je(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Nn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ze(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}i=Je.prototype,i.add=function(h,y){Nn(this),this.i=null,h=gr(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function ps(h,y){Nn(h),y=gr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Kr(h,y){return Nn(h),y=gr(h,y),h.g.has(y)}i.forEach=function(h,y){Nn(this),this.g.forEach(function(T,C){T.forEach(function(H){h.call(y,H,C,this)},this)},this)};function gs(h,y){Nn(h);let T=[];if(typeof y=="string")Kr(h,y)&&(T=T.concat(h.g.get(gr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)T=T.concat(h[y]);return T}i.set=function(h,y){return Nn(this),this.i=null,h=gr(this,h),Kr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=gs(this,h),h.length>0?String(h[0]):y):y};function _s(h,y,T){ps(h,y),T.length>0&&(h.i=null,h.g.set(gr(h,y),$(T)),h.h+=T.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let C=0;C<y.length;C++){var T=y[C];const H=ye(T);T=gs(this,T);for(let K=0;K<T.length;K++){let de=H;T[K]!==""&&(de+="="+ye(T[K])),h.push(de)}}return this.i=h.join("&")};function Fi(h){const y=new Je;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function gr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function ji(h,y){y&&!h.j&&(Nn(h),h.i=null,h.g.forEach(function(T,C){const H=C.toLowerCase();C!=H&&(ps(this,C),_s(this,H,T))},h)),h.j=y}function Kn(h,y){const T=new wt;if(m.Image){const C=new Image;C.onload=b($t,T,"TestLoadImage: loaded",!0,y,C),C.onerror=b($t,T,"TestLoadImage: error",!1,y,C),C.onabort=b($t,T,"TestLoadImage: abort",!1,y,C),C.ontimeout=b($t,T,"TestLoadImage: timeout",!1,y,C),m.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else y(!1)}function Rr(h,y){const T=new wt,C=new AbortController,H=setTimeout(()=>{C.abort(),$t(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:C.signal}).then(K=>{clearTimeout(H),K.ok?$t(T,"TestPingServer: ok",!0,y):$t(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),$t(T,"TestPingServer: error",!1,y)})}function $t(h,y,T,C,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),C(T)}catch{}}function ys(){this.g=new vn}function Oe(h){this.i=h.Sb||null,this.h=h.ab||!1}I(Oe,lr),Oe.prototype.g=function(){return new Mt(this.i,this.h)};function Mt(h,y){ft.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}I(Mt,ft),i=Mt.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Qn(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||m).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,yi(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Qn(this)),this.g&&(this.readyState=3,Qn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_t(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function _t(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?yi(this):Qn(this),this.readyState==3&&_t(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,yi(this))},i.Na=function(h){this.g&&(this.response=h,yi(this))},i.ga=function(){this.g&&yi(this)};function yi(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Qn(h)}i.setRequestHeader=function(h,y){this.A.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function Qn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Mt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Zs(h){let y="";return Ie(h,function(T,C){y+=C,y+=":",y+=T,y+=`\r
`}),y}function Bi(h,y,T){e:{for(C in T){var C=!1;break e}C=!0}C||(T=Zs(T),typeof h=="string"?T!=null&&ye(T):Te(h,y,T))}function lt(h){ft.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}I(lt,ft);var Ks=/^https?$/i,vs=["POST","PUT"];i=lt.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,y,T,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():cn.g(),this.g.onreadystatechange=M(x(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(K){bt(this,K);return}if(h=T||"",T=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var H in C)T.set(H,C[H]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const K of C.keys())T.set(K,C.get(K));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(T.keys()).find(K=>K.toLowerCase()=="content-type"),H=m.FormData&&h instanceof m.FormData,!(Array.prototype.indexOf.call(vs,y,void 0)>=0)||C||H||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,de]of T)this.g.setRequestHeader(K,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(K){bt(this,K)}};function bt(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Ln(h),Yr(h)}function Ln(h){h.A||(h.A=!0,St(h,"complete"),St(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,St(this,"complete"),St(this,"abort"),Yr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yr(this,!0)),lt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Qr(this):this.Xa())},i.Xa=function(){Qr(this)};function Qr(h){if(h.h&&typeof c<"u"){if(h.v&&Xr(h)==4)setTimeout(h.Ca.bind(h),0);else if(St(h,"readystatechange"),Xr(h)==4){h.h=!1;try{const K=h.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var C;if(C=K===0){let de=String(h.D).match(Vi)[1]||null;!de&&m.self&&m.self.location&&(de=m.self.location.protocol.slice(0,-1)),C=!Ks.test(de?de.toLowerCase():"")}T=C}if(T)St(h,"complete"),St(h,"success");else{h.o=6;try{var H=Xr(h)>2?h.g.statusText:""}catch{H=""}h.l=H+" ["+h.ca()+"]",Ln(h)}}finally{Yr(h)}}}}function Yr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,y||St(h,"ready");try{T.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Xr(h){return h.g?h.g.readyState:0}i.ca=function(){try{return Xr(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Li(y)}};function ea(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ws(h){const y={};h=(h.g&&Xr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(k(h[C]))continue;var T=Di(h[C]);const H=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const K=y[H]||[];y[H]=K,K.push(T)}re(y,function(C){return C.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jr(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function Es(h){this.za=0,this.i=[],this.j=new wt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Jr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Jr("baseRetryDelayMs",5e3,h),this.Za=Jr("retryDelaySeedMs",1e4,h),this.Ta=Jr("forwardChannelMaxRetries",2,h),this.va=Jr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Gs(h&&h.concurrentRequestLimit),this.Ba=new ys,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Es.prototype,i.ka=8,i.I=1,i.connect=function(h,y,T,C){Tt(0),this.W=h,this.H=y||{},T&&C!==void 0&&(this.H.OSID=T,this.H.OAID=C),this.F=this.X,this.J=Xs(this,null,this.W),Xn(this)};function et(h){if(dn(h),h.I==3){var y=h.V++,T=Tn(h.J);if(Te(T,"SID",h.M),Te(T,"RID",y),Te(T,"TYPE","terminate"),_r(h,T),y=new Gn(h,h.j,y),y.M=2,y.A=gt(Tn(T)),T=!1,m.navigator&&m.navigator.sendBeacon)try{T=m.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&m.Image&&(new Image().src=y.A,T=!0),T||(y.g=ra(y.j,null),y.g.ea(y.A)),y.F=Date.now(),cs(y)}Dn(h)}function Yn(h){h.g&&(xs(h),h.g.cancel(),h.g=null)}function dn(h){Yn(h),h.v&&(m.clearTimeout(h.v),h.v=null),Qs(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&m.clearTimeout(h.m),h.m=null)}function Xn(h){if(!Xo(h.h)&&!h.m){h.m=!0;var y=h.Ea;Me||A(),je||(Me(),je=!0),F.add(y,h),h.D=0}}function ta(h,y){return fs(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Fe(x(h.Ea,h,y),Ys(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const H=new Gn(this,this.j,h);let K=this.o;if(this.U&&(K?(K=z(K),fe(K,this.U)):K=this.U),this.u!==null||this.R||(H.J=K,K=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var C=this.i[T];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(y+=C,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=na(this,H,y),T=Tn(this.J),Te(T,"RID",h),Te(T,"CVER",22),this.G&&Te(T,"X-HTTP-Session-Id",this.G),_r(this,T),K&&(this.R?y="headers="+ye(Zs(K))+"&"+y:this.u&&Bi(T,this.u,K)),$r(this.h,H),this.Ra&&Te(T,"TYPE","init"),this.S?(Te(T,"$req",y),Te(T,"SID","null"),H.U=!0,fr(H,T,null)):fr(H,T,y),this.I=2}}else this.I==3&&(h?Ts(this,h):this.i.length==0||Xo(this.h)||Ts(this))};function Ts(h,y){var T;y?T=y.l:T=h.V++;const C=Tn(h.J);Te(C,"SID",h.M),Te(C,"RID",T),Te(C,"AID",h.K),_r(h,C),h.u&&h.o&&Bi(C,h.u,h.o),T=new Gn(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),y&&(h.i=y.G.concat(h.i)),y=na(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),$r(h.h,T),fr(T,C,y)}function _r(h,y){h.H&&Ie(h.H,function(T,C){Te(y,C,T)}),h.l&&Ie({},function(T,C){Te(y,C,T)})}function na(h,y,T){T=Math.min(h.i.length,T);const C=h.l?x(h.l.Ka,h.l,h):null;e:{var H=h.i;let Be=-1;for(;;){const ct=["count="+T];Be==-1?T>0?(Be=H[0].g,ct.push("ofs="+Be)):Be=0:ct.push("ofs="+Be);let mt=!0;for(let zt=0;zt<T;zt++){var K=H[zt].g;const Jn=H[zt].map;if(K-=Be,K<0)Be=Math.max(0,H[zt].g-100),mt=!1;else try{K="req"+K+"_"||"";try{var de=Jn instanceof Map?Jn:Object.entries(Jn);for(const[Nr,yr]of de){let ni=yr;v(yr)&&(ni=ar(yr)),ct.push(K+Nr+"="+encodeURIComponent(ni))}}catch(Nr){throw ct.push(K+"type="+encodeURIComponent("_badmap")),Nr}}catch{C&&C(Jn)}}if(mt){de=ct.join("&");break e}}de=void 0}return h=h.i.splice(0,T),y.G=h,de}function rn(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;Me||A(),je||(Me(),je=!0),F.add(y,h),h.A=0}}function ei(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Fe(x(h.Da,h),Ys(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,ti(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Fe(x(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),Yn(this),ti(this))};function xs(h){h.B!=null&&(m.clearTimeout(h.B),h.B=null)}function ti(h){h.g=new Gn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Tn(h.na);Te(y,"RID","rpc"),Te(y,"SID",h.M),Te(y,"AID",h.K),Te(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Te(y,"TO",h.ia),Te(y,"TYPE","xmlhttp"),_r(h,y),h.u&&h.o&&Bi(y,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=gt(Tn(y)),T.u=null,T.R=!0,qr(T,h)}i.Va=function(){this.C!=null&&(this.C=null,Yn(this),ei(this),Tt(19))};function Qs(h){h.C!=null&&(m.clearTimeout(h.C),h.C=null)}function In(h,y){var T=null;if(h.g==y){Qs(h),xs(h),h.g=null;var C=2}else if(ms(h.h,y))T=y.G,Oi(h.h,y),C=1;else return;if(h.I!=0){if(y.o)if(C==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var H=h.D;C=cr(),St(C,new Mi(C,T)),Xn(h)}else rn(h);else if(H=y.m,H==3||H==0&&y.X>0||!(C==1&&ta(h,y)||C==2&&ei(h)))switch(T&&T.length>0&&(y=h.h,y.i=y.i.concat(T)),H){case 1:Mn(h,5);break;case 4:Mn(h,10);break;case 3:Mn(h,6);break;default:Mn(h,2)}}}function Ys(h,y){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*y}function Mn(h,y){if(h.j.info("Error code "+y),y==2){var T=x(h.bb,h),C=h.Ua;const H=!C;C=new ut(C||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||pr(C,"https"),gt(C),H?Kn(C.toString(),T):Rr(C.toString(),T)}else Tt(2);h.I=0,h.l&&h.l.pa(y),Dn(h),dn(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function Dn(h){if(h.I=0,h.ja=[],h.l){const y=Rn(h.h);(y.length!=0||h.i.length!=0)&&(Q(h.ja,y),Q(h.ja,h.i),h.h.i.length=0,$(h.i),h.i.length=0),h.l.oa()}}function Xs(h,y,T){var C=T instanceof ut?Tn(T):new ut(T);if(C.g!="")y&&(C.g=y+"."+C.g),xn(C,C.u);else{var H=m.location;C=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const K=new ut(null);C&&pr(K,C),y&&(K.g=y),H&&xn(K,H),T&&(K.h=T),C=K}return T=h.G,y=h.wa,T&&y&&Te(C,T,y),Te(C,"VER",h.ka),_r(h,C),C}function ra(h,y,T){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new lt(new Oe({ab:T})):new lt(h.ma),y.Fa(h.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Js(){}i=Js.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function eo(){}eo.prototype.g=function(h,y){return new Qt(h,y)};function Qt(h,y){ft.call(this),this.g=new Es(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!k(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!k(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Ui(this)}I(Qt,ft),Qt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){et(this.g)},Qt.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=ar(h),h=T);y.i.push(new Bl(y.Ya++,h)),y.I==3&&Xn(y)},Qt.prototype.N=function(){this.g.l=null,delete this.j,et(this.g),delete this.g,Qt.Z.N.call(this)};function ia(h){Hr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}I(ia,Hr);function ja(){gi.call(this),this.status=1}I(ja,gi);function Ui(h){this.g=h}I(Ui,Js),Ui.prototype.ra=function(){St(this.g,"a")},Ui.prototype.qa=function(h){St(this.g,new ia(h))},Ui.prototype.pa=function(h){St(this.g,new ja)},Ui.prototype.oa=function(){St(this.g,"b")},eo.prototype.createWebChannel=eo.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,bv=function(){return new eo},Pv=function(){return cr()},Sv=kn,jf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},$n.NO_ERROR=0,$n.TIMEOUT=8,$n.HTTP_ERROR=6,ih=$n,Ht.COMPLETE="complete",Iv=Ht,Cr.EventType=Ar,Ar.OPEN="a",Ar.CLOSE="b",Ar.ERROR="c",Ar.MESSAGE="d",ft.prototype.listen=ft.prototype.J,yu=Cr,lt.prototype.listenOnce=lt.prototype.K,lt.prototype.getLastError=lt.prototype.Ha,lt.prototype.getLastErrorCode=lt.prototype.ya,lt.prototype.getStatus=lt.prototype.ca,lt.prototype.getResponseJson=lt.prototype.La,lt.prototype.getResponseText=lt.prototype.la,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Fa,xv=lt}).apply(typeof Kc<"u"?Kc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Un.UNAUTHENTICATED=new Un(null),Un.GOOGLE_CREDENTIALS=new Un("google-credentials-uid"),Un.FIRST_PARTY=new Un("first-party-uid"),Un.MOCK_USER=new Un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol="12.8.0";function PP(i){Ol=i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=new am("@firebase/firestore");function fl(){return Ra.logLevel}function Pe(i,...e){if(Ra.logLevel<=it.DEBUG){const t=e.map(_m);Ra.debug(`Firestore (${Ol}): ${i}`,...t)}}function Ws(i,...e){if(Ra.logLevel<=it.ERROR){const t=e.map(_m);Ra.error(`Firestore (${Ol}): ${i}`,...t)}}function bl(i,...e){if(Ra.logLevel<=it.WARN){const t=e.map(_m);Ra.warn(`Firestore (${Ol}): ${i}`,...t)}}function _m(i){if(typeof i=="string")return i;try{return(function(t){return JSON.stringify(t)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(i,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Cv(i,s,t)}function Cv(i,e,t){let s=`FIRESTORE (${Ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Ws(s),new Error(s)}function vt(i,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,i||Cv(e,a,s)}function Qe(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends qs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Un.UNAUTHENTICATED)))}shutdown(){}}class CP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class AP{constructor(e){this.t=e,this.currentUser=Un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){vt(this.o===void 0,42304);let s=this.i;const a=E=>this.i!==s?(s=this.i,t(E)):Promise.resolve();let c=new Sa;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Sa,e.enqueueRetryable((()=>a(this.currentUser)))};const m=()=>{const E=c;e.enqueueRetryable((async()=>{await E.promise,await a(this.currentUser)}))},v=E=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.o&&(this.auth.addAuthTokenListener(this.o),m())};this.t.onInit((E=>v(E))),setTimeout((()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?v(E):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Sa)}}),0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(vt(typeof s.accessToken=="string",31837,{l:s}),new Av(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return vt(e===null||typeof e=="string",2055,{h:e}),new Un(e)}}class kP{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Un.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class RP{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new kP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class E_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){vt(this.o===void 0,3512);const s=c=>{c.error!=null&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const m=c.token!==this.m;return this.m=c.token,Pe("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const a=c=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new E_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(vt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new E_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=LP(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<t&&(s+=e.charAt(a[c]%62))}return s}}function st(i,e){return i<e?-1:i>e?1:0}function Bf(i,e){const t=Math.min(i.length,e.length);for(let s=0;s<t;s++){const a=i.charAt(s),c=e.charAt(s);if(a!==c)return Tf(a)===Tf(c)?st(a,c):Tf(a)?1:-1}return st(i.length,e.length)}const MP=55296,DP=57343;function Tf(i){const e=i.charCodeAt(0);return e>=MP&&e<=DP}function Cl(i,e,t){return i.length===e.length&&i.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="__name__";class Ji{constructor(e,t,s){t===void 0?t=0:t>e.length&&We(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&We(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Ji.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ji?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const c=Ji.compareSegments(e.get(a),t.get(a));if(c!==0)return c}return st(e.length,t.length)}static compareSegments(e,t){const s=Ji.isNumericId(e),a=Ji.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Ji.extractNumericId(e).compare(Ji.extractNumericId(t)):Bf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fo.fromString(e.substring(4,e.length-2))}}class At extends Ji{construct(e,t,s){return new At(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Se(ie.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new At(t)}static emptyPath(){return new At([])}}const OP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Cn extends Ji{construct(e,t,s){return new Cn(e,t,s)}static isValidIdentifier(e){return OP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===T_}static keyField(){return new Cn([T_])}static fromServerFormat(e){const t=[];let s="",a=0;const c=()=>{if(s.length===0)throw new Se(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let m=!1;for(;a<e.length;){const v=e[a];if(v==="\\"){if(a+1===e.length)throw new Se(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[a+1];if(E!=="\\"&&E!=="."&&E!=="`")throw new Se(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=E,a+=2}else v==="`"?(m=!m,a++):v!=="."||m?(s+=v,a++):(c(),a++)}if(c(),m)throw new Se(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Cn(t)}static emptyPath(){return new Cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.path=e}static fromPath(e){return new Le(At.fromString(e))}static fromName(e){return new Le(At.fromString(e).popFirst(5))}static empty(){return new Le(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&At.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return At.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new At(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(i,e,t){if(!t)throw new Se(ie.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function VP(i,e,t,s){if(e===!0&&s===!0)throw new Se(ie.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function x_(i){if(!Le.isDocumentKey(i))throw new Se(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function I_(i){if(Le.isDocumentKey(i))throw new Se(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Rv(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function zh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":We(12329,{type:typeof i})}function Tl(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Se(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=zh(i);throw new Se(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(i,e){const t={typeString:i};return e&&(t.value=e),t}function Wu(i,e){if(!Rv(i))throw new Se(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){t=`JSON missing required field: '${s}'`;break}const m=i[s];if(a&&typeof m!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(c!==void 0&&m!==c.value){t=`Expected '${s}' field to equal '${c.value}'`;break}}if(t)throw new Se(ie.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=-62135596800,P_=1e6;class kt{static now(){return kt.fromMillis(Date.now())}static fromDate(e){return kt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*P_);return new kt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<S_)throw new Se(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/P_}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:kt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wu(e,kt._jsonSchema))return new kt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-S_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}kt._jsonSchemaVersion="firestore/timestamp/1.0",kt._jsonSchema={type:tn("string",kt._jsonSchemaVersion),seconds:tn("number"),nanoseconds:tn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{static fromTimestamp(e){return new Ke(e)}static min(){return new Ke(new kt(0,0))}static max(){return new Ke(new kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru=-1;function zP(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=Ke.fromTimestamp(s===1e9?new kt(t+1,0):new kt(t,s));return new Uo(a,Le.empty(),e)}function FP(i){return new Uo(i.readTime,i.key,Ru)}class Uo{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Uo(Ke.min(),Le.empty(),Ru)}static max(){return new Uo(Ke.max(),Le.empty(),Ru)}}function jP(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=Le.comparator(i.documentKey,e.documentKey),t!==0?t:st(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vl(i){if(i.code!==ie.FAILED_PRECONDITION||i.message!==BP)throw i;Pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&We(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,s)=>{t(e)}))}static reject(e){return new se(((t,s)=>{s(e)}))}static waitFor(e){return new se(((t,s)=>{let a=0,c=0,m=!1;e.forEach((v=>{++a,v.next((()=>{++c,m&&c===a&&t()}),(E=>s(E)))})),m=!0,c===a&&t()}))}static or(e){let t=se.resolve(!1);for(const s of e)t=t.next((a=>a?se.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,c)=>{s.push(t.call(this,a,c))})),this.waitFor(s)}static mapArray(e,t){return new se(((s,a)=>{const c=e.length,m=new Array(c);let v=0;for(let E=0;E<c;E++){const x=E;t(e[x]).next((b=>{m[x]=b,++v,v===c&&s(m)}),(b=>a(b)))}}))}static doWhile(e,t){return new se(((s,a)=>{const c=()=>{e()===!0?t().next((()=>{c()}),a):s()};c()}))}}function WP(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function zl(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Fh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm=-1;function jh(i){return i==null}function vh(i){return i===0&&1/i==-1/0}function HP(i){return typeof i=="number"&&Number.isInteger(i)&&!vh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="";function qP(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=b_(e)),e=$P(i.get(t),e);return b_(e)}function $P(i,e){let t=e;const s=i.length;for(let a=0;a<s;a++){const c=i.charAt(a);switch(c){case"\0":t+="";break;case Nv:t+="";break;default:t+=c}}return t}function b_(i){return i+Nv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function La(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Lv(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,t){this.comparator=e,this.root=t||bn.EMPTY}insert(e,t){return new Bt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bn.BLACK,null,null))}remove(e){return new Bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qc(this.root,e,this.comparator,!0)}}class Qc{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bn{constructor(e,t,s,a,c){this.key=e,this.value=t,this.color=s??bn.RED,this.left=a??bn.EMPTY,this.right=c??bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,c){return new bn(e??this.key,t??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,s),null):c===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return bn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw We(43730,{key:this.key,value:this.value});if(this.right.isRed())throw We(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw We(27949);return e+(this.isRed()?0:1)}}bn.EMPTY=null,bn.RED=!0,bn.BLACK=!1;bn.EMPTY=new class{constructor(){this.size=0}get key(){throw We(57766)}get value(){throw We(16141)}get color(){throw We(16727)}get left(){throw We(29726)}get right(){throw We(36894)}copy(e,t,s,a,c){return this}insert(e,t,s){return new bn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.comparator=e,this.data=new Bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new A_(this.data.getIterator())}getIteratorFrom(e){return new A_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ln(this.comparator);return t.data=e,t}}class A_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.fields=e,e.sort(Cn.comparator)}static empty(){return new Ai([])}unionWith(e){let t=new ln(Cn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Ai(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Cl(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Mv("Invalid base64 string: "+c):c}})(e);return new An(t)}static fromUint8Array(e){const t=(function(a){let c="";for(let m=0;m<a.length;++m)c+=String.fromCharCode(a[m]);return c})(e);return new An(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}An.EMPTY_BYTE_STRING=new An("");const GP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wo(i){if(vt(!!i,39018),typeof i=="string"){let e=0;const t=GP.exec(i);if(vt(!!t,46558,{timestamp:i}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Zt(i.seconds),nanos:Zt(i.nanos)}}function Zt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Ho(i){return typeof i=="string"?An.fromBase64String(i):An.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="server_timestamp",Ov="__type__",Vv="__previous_value__",zv="__local_write_time__";function wm(i){var t,s;return((s=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[Ov])==null?void 0:s.stringValue)===Dv}function Bh(i){const e=i.mapValue.fields[Vv];return wm(e)?Bh(e):e}function Nu(i){const e=Wo(i.mapValue.fields[zv].timestampValue);return new kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,t,s,a,c,m,v,E,x,b,I){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=m,this.autoDetectLongPolling=v,this.longPollingOptions=E,this.useFetchStreams=x,this.isUsingEmulator=b,this.apiKey=I}}const wh="(default)";class Lu{constructor(e,t){this.projectId=e,this.database=t||wh}static empty(){return new Lu("","")}get isDefaultDatabase(){return this.database===wh}isEqual(e){return e instanceof Lu&&e.projectId===this.projectId&&e.database===this.database}}function KP(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Se(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lu(i.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="__type__",QP="__max__",Yc={mapValue:{}},jv="__vector__",Eh="value";function qo(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?wm(i)?4:XP(i)?9007199254740991:YP(i)?10:11:We(28295,{value:i})}function as(i,e){if(i===e)return!0;const t=qo(i);if(t!==qo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Nu(i).isEqual(Nu(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const m=Wo(a.timestampValue),v=Wo(c.timestampValue);return m.seconds===v.seconds&&m.nanos===v.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(a,c){return Ho(a.bytesValue).isEqual(Ho(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(a,c){return Zt(a.geoPointValue.latitude)===Zt(c.geoPointValue.latitude)&&Zt(a.geoPointValue.longitude)===Zt(c.geoPointValue.longitude)})(i,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return Zt(a.integerValue)===Zt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const m=Zt(a.doubleValue),v=Zt(c.doubleValue);return m===v?vh(m)===vh(v):isNaN(m)&&isNaN(v)}return!1})(i,e);case 9:return Cl(i.arrayValue.values||[],e.arrayValue.values||[],as);case 10:case 11:return(function(a,c){const m=a.mapValue.fields||{},v=c.mapValue.fields||{};if(C_(m)!==C_(v))return!1;for(const E in m)if(m.hasOwnProperty(E)&&(v[E]===void 0||!as(m[E],v[E])))return!1;return!0})(i,e);default:return We(52216,{left:i})}}function Mu(i,e){return(i.values||[]).find((t=>as(t,e)))!==void 0}function Al(i,e){if(i===e)return 0;const t=qo(i),s=qo(e);if(t!==s)return st(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return st(i.booleanValue,e.booleanValue);case 2:return(function(c,m){const v=Zt(c.integerValue||c.doubleValue),E=Zt(m.integerValue||m.doubleValue);return v<E?-1:v>E?1:v===E?0:isNaN(v)?isNaN(E)?0:-1:1})(i,e);case 3:return k_(i.timestampValue,e.timestampValue);case 4:return k_(Nu(i),Nu(e));case 5:return Bf(i.stringValue,e.stringValue);case 6:return(function(c,m){const v=Ho(c),E=Ho(m);return v.compareTo(E)})(i.bytesValue,e.bytesValue);case 7:return(function(c,m){const v=c.split("/"),E=m.split("/");for(let x=0;x<v.length&&x<E.length;x++){const b=st(v[x],E[x]);if(b!==0)return b}return st(v.length,E.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,m){const v=st(Zt(c.latitude),Zt(m.latitude));return v!==0?v:st(Zt(c.longitude),Zt(m.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return R_(i.arrayValue,e.arrayValue);case 10:return(function(c,m){var M,$,Q,te;const v=c.fields||{},E=m.fields||{},x=(M=v[Eh])==null?void 0:M.arrayValue,b=($=E[Eh])==null?void 0:$.arrayValue,I=st(((Q=x==null?void 0:x.values)==null?void 0:Q.length)||0,((te=b==null?void 0:b.values)==null?void 0:te.length)||0);return I!==0?I:R_(x,b)})(i.mapValue,e.mapValue);case 11:return(function(c,m){if(c===Yc.mapValue&&m===Yc.mapValue)return 0;if(c===Yc.mapValue)return 1;if(m===Yc.mapValue)return-1;const v=c.fields||{},E=Object.keys(v),x=m.fields||{},b=Object.keys(x);E.sort(),b.sort();for(let I=0;I<E.length&&I<b.length;++I){const M=Bf(E[I],b[I]);if(M!==0)return M;const $=Al(v[E[I]],x[b[I]]);if($!==0)return $}return st(E.length,b.length)})(i.mapValue,e.mapValue);default:throw We(23264,{he:t})}}function k_(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return st(i,e);const t=Wo(i),s=Wo(e),a=st(t.seconds,s.seconds);return a!==0?a:st(t.nanos,s.nanos)}function R_(i,e){const t=i.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const c=Al(t[a],s[a]);if(c)return c}return st(t.length,s.length)}function kl(i){return Uf(i)}function Uf(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const s=Wo(t);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return Ho(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return Le.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let s="[",a=!0;for(const c of t.values||[])a?a=!1:s+=",",s+=Uf(c);return s+"]"})(i.arrayValue):"mapValue"in i?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",c=!0;for(const m of s)c?c=!1:a+=",",a+=`${m}:${Uf(t.fields[m])}`;return a+"}"})(i.mapValue):We(61005,{value:i})}function sh(i){switch(qo(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bh(i);return e?16+sh(e):16;case 5:return 2*i.stringValue.length;case 6:return Ho(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,c)=>a+sh(c)),0)})(i.arrayValue);case 10:case 11:return(function(s){let a=0;return La(s.fields,((c,m)=>{a+=c.length+sh(m)})),a})(i.mapValue);default:throw We(13486,{value:i})}}function N_(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Wf(i){return!!i&&"integerValue"in i}function Em(i){return!!i&&"arrayValue"in i}function L_(i){return!!i&&"nullValue"in i}function M_(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function oh(i){return!!i&&"mapValue"in i}function YP(i){var t,s;return((s=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[Fv])==null?void 0:s.stringValue)===jv}function Iu(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return La(i.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Iu(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Iu(i.arrayValue.values[t]);return e}return{...i}}function XP(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===QP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.value=e}static empty(){return new fi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!oh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Iu(t)}setAll(e){let t=Cn.emptyPath(),s={},a=[];e.forEach(((m,v)=>{if(!t.isImmediateParentOf(v)){const E=this.getFieldsMap(t);this.applyChanges(E,s,a),s={},a=[],t=v.popLast()}m?s[v.lastSegment()]=Iu(m):a.push(v.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,s,a)}delete(e){const t=this.field(e.popLast());oh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return as(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];oh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){La(t,((a,c)=>e[a]=c));for(const a of s)delete e[a]}clone(){return new fi(Iu(this.value))}}function Bv(i){const e=[];return La(i.fields,((t,s)=>{const a=new Cn([t]);if(oh(s)){const c=Bv(s.mapValue).fields;if(c.length===0)e.push(a);else for(const m of c)e.push(a.child(m))}else e.push(a)})),new Ai(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,t,s,a,c,m,v){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=c,this.data=m,this.documentState=v}static newInvalidDocument(e){return new Wn(e,0,Ke.min(),Ke.min(),Ke.min(),fi.empty(),0)}static newFoundDocument(e,t,s,a){return new Wn(e,1,t,Ke.min(),s,a,0)}static newNoDocument(e,t){return new Wn(e,2,t,Ke.min(),Ke.min(),fi.empty(),0)}static newUnknownDocument(e,t){return new Wn(e,3,t,Ke.min(),Ke.min(),fi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,t){this.position=e,this.inclusive=t}}function D_(i,e,t){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],m=i.position[a];if(c.field.isKeyField()?s=Le.comparator(Le.fromName(m.referenceValue),t.key):s=Al(m,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function O_(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!as(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,t="asc"){this.field=e,this.dir=t}}function JP(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{}class en extends Uv{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new tb(e,t,s):t==="array-contains"?new ib(e,s):t==="in"?new sb(e,s):t==="not-in"?new ob(e,s):t==="array-contains-any"?new ab(e,s):new en(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new nb(e,s):new rb(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Al(t,this.value)):t!==null&&qo(this.value)===qo(t)&&this.matchesComparison(Al(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return We(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ri extends Uv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ri(e,t)}matches(e){return Wv(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Wv(i){return i.op==="and"}function Hv(i){return eb(i)&&Wv(i)}function eb(i){for(const e of i.filters)if(e instanceof Ri)return!1;return!0}function Hf(i){if(i instanceof en)return i.field.canonicalString()+i.op.toString()+kl(i.value);if(Hv(i))return i.filters.map((e=>Hf(e))).join(",");{const e=i.filters.map((t=>Hf(t))).join(",");return`${i.op}(${e})`}}function qv(i,e){return i instanceof en?(function(s,a){return a instanceof en&&s.op===a.op&&s.field.isEqual(a.field)&&as(s.value,a.value)})(i,e):i instanceof Ri?(function(s,a){return a instanceof Ri&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((c,m,v)=>c&&qv(m,a.filters[v])),!0):!1})(i,e):void We(19439)}function $v(i){return i instanceof en?(function(t){return`${t.field.canonicalString()} ${t.op} ${kl(t.value)}`})(i):i instanceof Ri?(function(t){return t.op.toString()+" {"+t.getFilters().map($v).join(" ,")+"}"})(i):"Filter"}class tb extends en{constructor(e,t,s){super(e,t,s),this.key=Le.fromName(s.referenceValue)}matches(e){const t=Le.comparator(e.key,this.key);return this.matchesComparison(t)}}class nb extends en{constructor(e,t){super(e,"in",t),this.keys=Gv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class rb extends en{constructor(e,t){super(e,"not-in",t),this.keys=Gv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Gv(i,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Le.fromName(s.referenceValue)))}class ib extends en{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Em(t)&&Mu(t.arrayValue,this.value)}}class sb extends en{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Mu(this.value.arrayValue,t)}}class ob extends en{constructor(e,t){super(e,"not-in",t)}matches(e){if(Mu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Mu(this.value.arrayValue,t)}}class ab extends en{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Em(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Mu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,t=null,s=[],a=[],c=null,m=null,v=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=m,this.endAt=v,this.Te=null}}function V_(i,e=null,t=[],s=[],a=null,c=null,m=null){return new lb(i,e,t,s,a,c,m)}function Tm(i){const e=Qe(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Hf(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),jh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>kl(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>kl(s))).join(",")),e.Te=t}return e.Te}function xm(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!JP(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!qv(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!O_(i.startAt,e.startAt)&&O_(i.endAt,e.endAt)}function qf(i){return Le.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,t=null,s=[],a=[],c=null,m="F",v=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=m,this.startAt=v,this.endAt=E,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function ub(i,e,t,s,a,c,m,v){return new Fl(i,e,t,s,a,c,m,v)}function Im(i){return new Fl(i)}function z_(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function cb(i){return Le.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function Zv(i){return i.collectionGroup!==null}function Su(i){const e=Qe(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(m){let v=new ln(Cn.comparator);return m.filters.forEach((E=>{E.getFlattenedFilters().forEach((x=>{x.isInequality()&&(v=v.add(x.field))}))})),v})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Du(c,s))})),t.has(Cn.keyField().canonicalString())||e.Ie.push(new Du(Cn.keyField(),s))}return e.Ie}function is(i){const e=Qe(i);return e.Ee||(e.Ee=hb(e,Su(i))),e.Ee}function hb(i,e){if(i.limitType==="F")return V_(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new Du(a.field,c)}));const t=i.endAt?new Th(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Th(i.startAt.position,i.startAt.inclusive):null;return V_(i.path,i.collectionGroup,e,i.filters,i.limit,t,s)}}function $f(i,e){const t=i.filters.concat([e]);return new Fl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function db(i,e){const t=i.explicitOrderBy.concat([e]);return new Fl(i.path,i.collectionGroup,t,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}function Gf(i,e,t){return new Fl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Uh(i,e){return xm(is(i),is(e))&&i.limitType===e.limitType}function Kv(i){return`${Tm(is(i))}|lt:${i.limitType}`}function ml(i){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>$v(a))).join(", ")}]`),jh(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(m){return`${m.field.canonicalString()} (${m.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>kl(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>kl(a))).join(",")),`Target(${s})`})(is(i))}; limitType=${i.limitType})`}function Wh(i,e){return e.isFoundDocument()&&(function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Le.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(i,e)&&(function(s,a){for(const c of Su(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0})(i,e)&&(function(s,a){return!(s.startAt&&!(function(m,v,E){const x=D_(m,v,E);return m.inclusive?x<=0:x<0})(s.startAt,Su(s),a)||s.endAt&&!(function(m,v,E){const x=D_(m,v,E);return m.inclusive?x>=0:x>0})(s.endAt,Su(s),a))})(i,e)}function fb(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Qv(i){return(e,t)=>{let s=!1;for(const a of Su(i)){const c=mb(a,e,t);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function mb(i,e,t){const s=i.field.isKeyField()?Le.comparator(e.key,t.key):(function(c,m,v){const E=m.data.field(c),x=v.data.field(c);return E!==null&&x!==null?Al(E,x):We(42886)})(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return We(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){La(this.inner,((t,s)=>{for(const[a,c]of s)e(a,c)}))}isEmpty(){return Lv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=new Bt(Le.comparator);function Hs(){return pb}const Yv=new Bt(Le.comparator);function vu(...i){let e=Yv;for(const t of i)e=e.insert(t.key,t);return e}function Xv(i){let e=Yv;return i.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Ia(){return Pu()}function Jv(){return Pu()}function Pu(){return new Ma((i=>i.toString()),((i,e)=>i.isEqual(e)))}const gb=new Bt(Le.comparator),_b=new ln(Le.comparator);function ot(...i){let e=_b;for(const t of i)e=e.add(t);return e}const yb=new ln(st);function vb(){return yb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vh(e)?"-0":e}}function e0(i){return{integerValue:""+i}}function wb(i,e){return HP(e)?e0(e):Sm(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(){this._=void 0}}function Eb(i,e,t){return i instanceof xh?(function(a,c){const m={fields:{[Ov]:{stringValue:Dv},[zv]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&wm(c)&&(c=Bh(c)),c&&(m.fields[Vv]=c),{mapValue:m}})(t,e):i instanceof Ou?n0(i,e):i instanceof Vu?r0(i,e):(function(a,c){const m=t0(a,c),v=F_(m)+F_(a.Ae);return Wf(m)&&Wf(a.Ae)?e0(v):Sm(a.serializer,v)})(i,e)}function Tb(i,e,t){return i instanceof Ou?n0(i,e):i instanceof Vu?r0(i,e):t}function t0(i,e){return i instanceof Ih?(function(s){return Wf(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class xh extends Hh{}class Ou extends Hh{constructor(e){super(),this.elements=e}}function n0(i,e){const t=i0(e);for(const s of i.elements)t.some((a=>as(a,s)))||t.push(s);return{arrayValue:{values:t}}}class Vu extends Hh{constructor(e){super(),this.elements=e}}function r0(i,e){let t=i0(e);for(const s of i.elements)t=t.filter((a=>!as(a,s)));return{arrayValue:{values:t}}}class Ih extends Hh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function F_(i){return Zt(i.integerValue||i.doubleValue)}function i0(i){return Em(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function xb(i,e){return i.field.isEqual(e.field)&&(function(s,a){return s instanceof Ou&&a instanceof Ou||s instanceof Vu&&a instanceof Vu?Cl(s.elements,a.elements,as):s instanceof Ih&&a instanceof Ih?as(s.Ae,a.Ae):s instanceof xh&&a instanceof xh})(i.transform,e.transform)}class Ib{constructor(e,t){this.version=e,this.transformResults=t}}class Fs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fs}static exists(e){return new Fs(void 0,e)}static updateTime(e){return new Fs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ah(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class qh{}function s0(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new a0(i.key,Fs.none()):new Hu(i.key,i.data,Fs.none());{const t=i.data,s=fi.empty();let a=new ln(Cn.comparator);for(let c of e.fields)if(!a.has(c)){let m=t.field(c);m===null&&c.length>1&&(c=c.popLast(),m=t.field(c)),m===null?s.delete(c):s.set(c,m),a=a.add(c)}return new Da(i.key,s,new Ai(a.toArray()),Fs.none())}}function Sb(i,e,t){i instanceof Hu?(function(a,c,m){const v=a.value.clone(),E=B_(a.fieldTransforms,c,m.transformResults);v.setAll(E),c.convertToFoundDocument(m.version,v).setHasCommittedMutations()})(i,e,t):i instanceof Da?(function(a,c,m){if(!ah(a.precondition,c))return void c.convertToUnknownDocument(m.version);const v=B_(a.fieldTransforms,c,m.transformResults),E=c.data;E.setAll(o0(a)),E.setAll(v),c.convertToFoundDocument(m.version,E).setHasCommittedMutations()})(i,e,t):(function(a,c,m){c.convertToNoDocument(m.version).setHasCommittedMutations()})(0,e,t)}function bu(i,e,t,s){return i instanceof Hu?(function(c,m,v,E){if(!ah(c.precondition,m))return v;const x=c.value.clone(),b=U_(c.fieldTransforms,E,m);return x.setAll(b),m.convertToFoundDocument(m.version,x).setHasLocalMutations(),null})(i,e,t,s):i instanceof Da?(function(c,m,v,E){if(!ah(c.precondition,m))return v;const x=U_(c.fieldTransforms,E,m),b=m.data;return b.setAll(o0(c)),b.setAll(x),m.convertToFoundDocument(m.version,b).setHasLocalMutations(),v===null?null:v.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((I=>I.field)))})(i,e,t,s):(function(c,m,v){return ah(c.precondition,m)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):v})(i,e,t)}function Pb(i,e){let t=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=t0(s.transform,a||null);c!=null&&(t===null&&(t=fi.empty()),t.set(s.field,c))}return t||null}function j_(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Cl(s,a,((c,m)=>xb(c,m)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Hu extends qh{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Da extends qh{constructor(e,t,s,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function o0(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}})),e}function B_(i,e,t){const s=new Map;vt(i.length===t.length,32656,{Ve:t.length,de:i.length});for(let a=0;a<t.length;a++){const c=i[a],m=c.transform,v=e.data.field(c.field);s.set(c.field,Tb(m,v,t[a]))}return s}function U_(i,e,t){const s=new Map;for(const a of i){const c=a.transform,m=t.data.field(a.field);s.set(a.field,Eb(c,m,e))}return s}class a0 extends qh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bb extends qh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&Sb(c,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=bu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=bu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Jv();return this.mutations.forEach((a=>{const c=e.get(a.key),m=c.overlayedDocument;let v=this.applyToLocalView(m,c.mutatedFields);v=t.has(a.key)?null:v;const E=s0(m,v);E!==null&&s.set(a.key,E),m.isValidDocument()||m.convertToNoDocument(Ke.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ot())}isEqual(e){return this.batchId===e.batchId&&Cl(this.mutations,e.mutations,((t,s)=>j_(t,s)))&&Cl(this.baseMutations,e.baseMutations,((t,s)=>j_(t,s)))}}class Pm{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){vt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return gb})();const c=e.mutations;for(let m=0;m<c.length;m++)a=a.insert(c[m].key,s[m].version);return new Pm(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt,ht;function Rb(i){switch(i){case ie.OK:return We(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return We(15467,{code:i})}}function l0(i){if(i===void 0)return Ws("GRPC error has no .code"),ie.UNKNOWN;switch(i){case Jt.OK:return ie.OK;case Jt.CANCELLED:return ie.CANCELLED;case Jt.UNKNOWN:return ie.UNKNOWN;case Jt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Jt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Jt.INTERNAL:return ie.INTERNAL;case Jt.UNAVAILABLE:return ie.UNAVAILABLE;case Jt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Jt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Jt.NOT_FOUND:return ie.NOT_FOUND;case Jt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Jt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Jt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Jt.ABORTED:return ie.ABORTED;case Jt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Jt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Jt.DATA_LOSS:return ie.DATA_LOSS;default:return We(39323,{code:i})}}(ht=Jt||(Jt={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=new Fo([4294967295,4294967295],0);function W_(i){const e=Nb().encode(i),t=new Tv;return t.update(e),new Uint8Array(t.digest())}function H_(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Fo([t,s],0),new Fo([a,c],0)]}class bm{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new wu(`Invalid padding: ${t}`);if(s<0)throw new wu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new wu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new wu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Fo.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(Fo.fromNumber(s)));return a.compare(Lb)===1&&(a=new Fo([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=W_(e),[s,a]=H_(t);for(let c=0;c<this.hashCount;c++){const m=this.ye(s,a,c);if(!this.we(m))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),m=new bm(c,a,t);return s.forEach((v=>m.insert(v))),m}insert(e){if(this.ge===0)return;const t=W_(e),[s,a]=H_(t);for(let c=0;c<this.hashCount;c++){const m=this.ye(s,a,c);this.be(m)}}be(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class wu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,t,s,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,qu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new $h(Ke.min(),a,new Bt(st),Hs(),ot())}}class qu{constructor(e,t,s,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new qu(s,t,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,t,s,a){this.Se=e,this.removedTargetIds=t,this.key=s,this.De=a}}class u0{constructor(e,t){this.targetId=e,this.Ce=t}}class c0{constructor(e,t,s=An.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class q_{constructor(){this.ve=0,this.Fe=$_(),this.Me=An.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ot(),t=ot(),s=ot();return this.Fe.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:We(38017,{changeType:c})}})),new qu(this.Me,this.xe,e,t,s)}Ke(){this.Oe=!1,this.Fe=$_()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,vt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Mb{constructor(e){this.Ge=e,this.ze=new Map,this.je=Hs(),this.He=Xc(),this.Je=Xc(),this.Ze=new Bt(st)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:We(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const c=a.target;if(qf(c))if(s===0){const m=new Le(c.path);this.et(t,m,Wn.newNoDocument(m,Ke.min()))}else vt(s===1,20013,{expectedCount:s});else{const m=this._t(t);if(m!==s){const v=this.ut(e),E=v?this.ct(v,e,m):1;if(E!==0){this.it(t);const x=E===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,x)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=t;let m,v;try{m=Ho(s).toUint8Array()}catch(E){if(E instanceof Mv)return bl("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw E}try{v=new bm(m,a,c)}catch(E){return bl(E instanceof wu?"BloomFilter error: ":"Applying bloom filter failed: ",E),null}return v.ge===0?null:v}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((c=>{const m=this.Ge.ht(),v=`projects/${m.projectId}/databases/${m.database}/documents/${c.path.canonicalString()}`;e.mightContain(v)||(this.et(t,c,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((c,m)=>{const v=this.ot(m);if(v){if(c.current&&qf(v.target)){const E=new Le(v.target.path);this.It(E).has(m)||this.Et(m,E)||this.et(m,E,Wn.newNoDocument(E,e))}c.Be&&(t.set(m,c.ke()),c.Ke())}}));let s=ot();this.Je.forEach(((c,m)=>{let v=!0;m.forEachWhile((E=>{const x=this.ot(E);return!x||x.purpose==="TargetPurposeLimboResolution"||(v=!1,!1)})),v&&(s=s.add(c))})),this.je.forEach(((c,m)=>m.setReadTime(e)));const a=new $h(e,t,this.Ze,this.je,s);return this.je=Hs(),this.He=Xc(),this.Je=Xc(),this.Ze=new Bt(st),a}Ye(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,s),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new q_,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new ln(st),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new ln(st),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new q_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Xc(){return new Bt(Le.comparator)}function $_(){return new Bt(Le.comparator)}const Db={asc:"ASCENDING",desc:"DESCENDING"},Ob={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vb={and:"AND",or:"OR"};class zb{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zf(i,e){return i.useProto3Json||jh(e)?e:{value:e}}function Sh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function h0(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function Fb(i,e){return Sh(i,e.toTimestamp())}function ss(i){return vt(!!i,49232),Ke.fromTimestamp((function(t){const s=Wo(t);return new kt(s.seconds,s.nanos)})(i))}function Cm(i,e){return Kf(i,e).canonicalString()}function Kf(i,e){const t=(function(a){return new At(["projects",a.projectId,"databases",a.database])})(i).child("documents");return e===void 0?t:t.child(e)}function d0(i){const e=At.fromString(i);return vt(_0(e),10190,{key:e.toString()}),e}function Qf(i,e){return Cm(i.databaseId,e.path)}function xf(i,e){const t=d0(e);if(t.get(1)!==i.databaseId.projectId)throw new Se(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Se(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Le(m0(t))}function f0(i,e){return Cm(i.databaseId,e)}function jb(i){const e=d0(i);return e.length===4?At.emptyPath():m0(e)}function Yf(i){return new At(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function m0(i){return vt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function G_(i,e,t){return{name:Qf(i,e),fields:t.value.mapValue.fields}}function Bb(i,e){let t;if("targetChange"in e){e.targetChange;const s=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:We(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(x,b){return x.useProto3Json?(vt(b===void 0||typeof b=="string",58123),An.fromBase64String(b||"")):(vt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),An.fromUint8Array(b||new Uint8Array))})(i,e.targetChange.resumeToken),m=e.targetChange.cause,v=m&&(function(x){const b=x.code===void 0?ie.UNKNOWN:l0(x.code);return new Se(b,x.message||"")})(m);t=new c0(s,a,c,v||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=xf(i,s.document.name),c=ss(s.document.updateTime),m=s.document.createTime?ss(s.document.createTime):Ke.min(),v=new fi({mapValue:{fields:s.document.fields}}),E=Wn.newFoundDocument(a,c,m,v),x=s.targetIds||[],b=s.removedTargetIds||[];t=new lh(x,b,E.key,E)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=xf(i,s.document),c=s.readTime?ss(s.readTime):Ke.min(),m=Wn.newNoDocument(a,c),v=s.removedTargetIds||[];t=new lh([],v,m.key,m)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=xf(i,s.document),c=s.removedTargetIds||[];t=new lh([],c,a,null)}else{if(!("filter"in e))return We(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,m=new kb(a,c),v=s.targetId;t=new u0(v,m)}}return t}function Ub(i,e){let t;if(e instanceof Hu)t={update:G_(i,e.key,e.value)};else if(e instanceof a0)t={delete:Qf(i,e.key)};else if(e instanceof Da)t={update:G_(i,e.key,e.data),updateMask:Yb(e.fieldMask)};else{if(!(e instanceof bb))return We(16599,{dt:e.type});t={verify:Qf(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(c,m){const v=m.transform;if(v instanceof xh)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof Ou)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof Vu)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof Ih)return{fieldPath:m.field.canonicalString(),increment:v.Ae};throw We(20930,{transform:m.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:Fb(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:We(27497)})(i,e.precondition)),t}function Wb(i,e){return i&&i.length>0?(vt(e!==void 0,14353),i.map((t=>(function(a,c){let m=a.updateTime?ss(a.updateTime):ss(c);return m.isEqual(Ke.min())&&(m=ss(c)),new Ib(m,a.transformResults||[])})(t,e)))):[]}function Hb(i,e){return{documents:[f0(i,e.path)]}}function qb(i,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=f0(i,a);const c=(function(x){if(x.length!==0)return g0(Ri.create(x,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const m=(function(x){if(x.length!==0)return x.map((b=>(function(M){return{field:pl(M.field),direction:Zb(M.dir)}})(b)))})(e.orderBy);m&&(t.structuredQuery.orderBy=m);const v=Zf(i,e.limit);return v!==null&&(t.structuredQuery.limit=v),e.startAt&&(t.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:t,parent:a}}function $b(i){let e=jb(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){vt(s===1,65062);const b=t.from[0];b.allDescendants?a=b.collectionId:e=e.child(b.collectionId)}let c=[];t.where&&(c=(function(I){const M=p0(I);return M instanceof Ri&&Hv(M)?M.getFilters():[M]})(t.where));let m=[];t.orderBy&&(m=(function(I){return I.map((M=>(function(Q){return new Du(gl(Q.field),(function(ee){switch(ee){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Q.direction))})(M)))})(t.orderBy));let v=null;t.limit&&(v=(function(I){let M;return M=typeof I=="object"?I.value:I,jh(M)?null:M})(t.limit));let E=null;t.startAt&&(E=(function(I){const M=!!I.before,$=I.values||[];return new Th($,M)})(t.startAt));let x=null;return t.endAt&&(x=(function(I){const M=!I.before,$=I.values||[];return new Th($,M)})(t.endAt)),ub(e,a,m,c,v,"F",E,x)}function Gb(i,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return We(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function p0(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=gl(t.unaryFilter.field);return en.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=gl(t.unaryFilter.field);return en.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=gl(t.unaryFilter.field);return en.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=gl(t.unaryFilter.field);return en.create(m,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return We(61313);default:return We(60726)}})(i):i.fieldFilter!==void 0?(function(t){return en.create(gl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return We(58110);default:return We(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return Ri.create(t.compositeFilter.filters.map((s=>p0(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return We(1026)}})(t.compositeFilter.op))})(i):We(30097,{filter:i})}function Zb(i){return Db[i]}function Kb(i){return Ob[i]}function Qb(i){return Vb[i]}function pl(i){return{fieldPath:i.canonicalString()}}function gl(i){return Cn.fromServerFormat(i.fieldPath)}function g0(i){return i instanceof en?(function(t){if(t.op==="=="){if(M_(t.value))return{unaryFilter:{field:pl(t.field),op:"IS_NAN"}};if(L_(t.value))return{unaryFilter:{field:pl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(M_(t.value))return{unaryFilter:{field:pl(t.field),op:"IS_NOT_NAN"}};if(L_(t.value))return{unaryFilter:{field:pl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pl(t.field),op:Kb(t.op),value:t.value}}})(i):i instanceof Ri?(function(t){const s=t.getFilters().map((a=>g0(a)));return s.length===1?s[0]:{compositeFilter:{op:Qb(t.op),filters:s}}})(i):We(54877,{filter:i})}function Yb(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function _0(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function y0(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,t,s,a,c=Ke.min(),m=Ke.min(),v=An.EMPTY_BYTE_STRING,E=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=v,this.expectedCount=E}withSequenceNumber(e){return new Mo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Mo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e){this.yt=e}}function Jb(i){const e=$b({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Gf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(){this.Sn=new tC}addToCollectionParentIndex(e,t){return this.Sn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Uo.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Uo.min())}updateCollectionGroup(e,t,s){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class tC{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new ln(At.comparator),c=!a.has(s);return this.index[t]=a.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new ln(At.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},v0=41943040;class Pr{static withCacheSize(e){return new Pr(e,Pr.DEFAULT_COLLECTION_PERCENTILE,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr.DEFAULT_COLLECTION_PERCENTILE=10,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pr.DEFAULT=new Pr(v0,Pr.DEFAULT_COLLECTION_PERCENTILE,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pr.DISABLED=new Pr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Rl(0)}static ar(){return new Rl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="LruGarbageCollector",nC=1048576;function Q_([i,e],[t,s]){const a=st(i,t);return a===0?st(e,s):a}class rC{constructor(e){this.Pr=e,this.buffer=new ln(Q_),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Q_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class iC{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Pe(K_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){zl(t)?Pe(K_,"Ignoring IndexedDB error during garbage collection: ",t):await Vl(t)}await this.Ar(3e5)}))}}class sC{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(Fh.ce);const s=new rC(t);return this.Vr.forEachTarget(e,(a=>s.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>s.Er(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(Z_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Z_):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let s,a,c,m,v,E,x;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),a=this.params.maximumSequenceNumbersToCollect):a=I,m=Date.now(),this.nthSequenceNumber(e,a)))).next((I=>(s=I,v=Date.now(),this.removeTargets(e,s,t)))).next((I=>(c=I,E=Date.now(),this.removeOrphanedDocuments(e,s)))).next((I=>(x=Date.now(),fl()<=it.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${m-b}ms
	Determined least recently used ${a} in `+(v-m)+`ms
	Removed ${c} targets in `+(E-v)+`ms
	Removed ${I} documents in `+(x-E)+`ms
Total Duration: ${x-b}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:I}))))}}function oC(i,e){return new sC(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(){this.changes=new Ma((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?se.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&bu(s.mutation,a,Ai.empty(),kt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,ot()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=ot()){const a=Ia();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((c=>{let m=vu();return c.forEach(((v,E)=>{m=m.insert(v,E.overlayedDocument)})),m}))))}getOverlayedDocuments(e,t){const s=Ia();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,ot())))}populateOverlays(e,t,s){const a=[];return s.forEach((c=>{t.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((m,v)=>{t.set(m,v)}))}))}computeViews(e,t,s,a){let c=Hs();const m=Pu(),v=(function(){return Pu()})();return t.forEach(((E,x)=>{const b=s.get(x.key);a.has(x.key)&&(b===void 0||b.mutation instanceof Da)?c=c.insert(x.key,x):b!==void 0?(m.set(x.key,b.mutation.getFieldMask()),bu(b.mutation,x,b.mutation.getFieldMask(),kt.now())):m.set(x.key,Ai.empty())})),this.recalculateAndSaveOverlays(e,c).next((E=>(E.forEach(((x,b)=>m.set(x,b))),t.forEach(((x,b)=>v.set(x,new lC(b,m.get(x)??null)))),v)))}recalculateAndSaveOverlays(e,t){const s=Pu();let a=new Bt(((m,v)=>m-v)),c=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((m=>{for(const v of m)v.keys().forEach((E=>{const x=t.get(E);if(x===null)return;let b=s.get(E)||Ai.empty();b=v.applyToLocalView(x,b),s.set(E,b);const I=(a.get(v.batchId)||ot()).add(E);a=a.insert(v.batchId,I)}))})).next((()=>{const m=[],v=a.getReverseIterator();for(;v.hasNext();){const E=v.getNext(),x=E.key,b=E.value,I=Jv();b.forEach((M=>{if(!c.has(M)){const $=s0(t.get(M),s.get(M));$!==null&&I.set(M,$),c=c.add(M)}})),m.push(this.documentOverlayCache.saveOverlays(e,x,I))}return se.waitFor(m)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return cb(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Zv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((c=>{const m=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-c.size):se.resolve(Ia());let v=Ru,E=c;return m.next((x=>se.forEach(x,((b,I)=>(v<I.largestBatchId&&(v=I.largestBatchId),c.get(b)?se.resolve():this.remoteDocumentCache.getEntry(e,b).next((M=>{E=E.insert(b,M)}))))).next((()=>this.populateOverlays(e,x,c))).next((()=>this.computeViews(e,E,x,ot()))).next((b=>({batchId:v,changes:Xv(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Le(t)).next((s=>{let a=vu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const c=t.collectionGroup;let m=vu();return this.indexManager.getCollectionParents(e,c).next((v=>se.forEach(v,(E=>{const x=(function(I,M){return new Fl(M,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(t,E.child(c));return this.getDocumentsMatchingCollectionQuery(e,x,s,a).next((b=>{b.forEach(((I,M)=>{m=m.insert(I,M)}))}))})).next((()=>m))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((m=>(c=m,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,a)))).next((m=>{c.forEach(((E,x)=>{const b=x.getKey();m.get(b)===null&&(m=m.insert(b,Wn.newInvalidDocument(b)))}));let v=vu();return m.forEach(((E,x)=>{const b=c.get(E);b!==void 0&&bu(b.mutation,x,Ai.empty(),kt.now()),Wh(t,x)&&(v=v.insert(E,x))})),v}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return se.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:ss(a.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:Jb(a.bundledQuery),readTime:ss(a.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.overlays=new Bt(Le.comparator),this.Lr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ia();return se.forEach(t,(a=>this.getOverlay(e,a).next((c=>{c!==null&&s.set(a,c)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,c)=>{this.bt(e,t,c)})),se.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.Lr.get(s);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(s)),se.resolve()}getOverlaysForCollection(e,t,s){const a=Ia(),c=t.length+1,m=new Le(t.child("")),v=this.overlays.getIteratorFrom(m);for(;v.hasNext();){const E=v.getNext().value,x=E.getKey();if(!t.isPrefixOf(x.path))break;x.path.length===c&&E.largestBatchId>s&&a.set(E.getKey(),E)}return se.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let c=new Bt(((x,b)=>x-b));const m=this.overlays.getIterator();for(;m.hasNext();){const x=m.getNext().value;if(x.getKey().getCollectionGroup()===t&&x.largestBatchId>s){let b=c.get(x.largestBatchId);b===null&&(b=Ia(),c=c.insert(x.largestBatchId,b)),b.set(x.getKey(),x)}}const v=Ia(),E=c.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach(((x,b)=>v.set(x,b))),!(v.size()>=a)););return se.resolve(v)}bt(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const m=this.Lr.get(a.largestBatchId).delete(s.key);this.Lr.set(a.largestBatchId,m)}this.overlays=this.overlays.insert(s.key,new Ab(t,s));let c=this.Lr.get(t);c===void 0&&(c=ot(),this.Lr.set(t,c)),this.Lr.set(t,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(){this.sessionToken=An.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(){this.kr=new ln(gn.Kr),this.qr=new ln(gn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const s=new gn(e,t);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new gn(e,t))}Qr(e,t){e.forEach((s=>this.removeReference(s,t)))}Gr(e){const t=new Le(new At([])),s=new gn(t,e),a=new gn(t,e+1),c=[];return this.qr.forEachInRange([s,a],(m=>{this.Wr(m),c.push(m.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Le(new At([])),s=new gn(t,e),a=new gn(t,e+1);let c=ot();return this.qr.forEachInRange([s,a],(m=>{c=c.add(m.key)})),c}containsKey(e){const t=new gn(e,0),s=this.kr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class gn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Le.comparator(e.key,t.key)||st(e.Hr,t.Hr)}static Ur(e,t){return st(e.Hr,t.Hr)||Le.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new ln(gn.Kr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const m=new Cb(c,t,s,a);this.mutationQueue.push(m);for(const v of a)this.Jr=this.Jr.add(new gn(v.key,c)),this.indexManager.addToCollectionParentIndex(e,v.key.path.popLast());return se.resolve(m)}lookupMutationBatch(e,t){return se.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.Xr(s),c=a<0?0:a;return se.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?vm:this.Yn-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new gn(t,0),a=new gn(t,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([s,a],(m=>{const v=this.Zr(m.Hr);c.push(v)})),se.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ln(st);return t.forEach((a=>{const c=new gn(a,0),m=new gn(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,m],(v=>{s=s.add(v.Hr)}))})),se.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let c=s;Le.isDocumentKey(c)||(c=c.child(""));const m=new gn(new Le(c),0);let v=new ln(st);return this.Jr.forEachWhile((E=>{const x=E.key.path;return!!s.isPrefixOf(x)&&(x.length===a&&(v=v.add(E.Hr)),!0)}),m),se.resolve(this.Yr(v))}Yr(e){const t=[];return e.forEach((s=>{const a=this.Zr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){vt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return se.forEach(t.mutations,(a=>{const c=new gn(a.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,t){const s=new gn(t,0),a=this.Jr.firstAfterOrEqual(s);return se.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.ti=e,this.docs=(function(){return new Bt(Le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),c=a?a.size:0,m=this.ti(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:m}),this.size+=m-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return se.resolve(s?s.document.mutableCopy():Wn.newInvalidDocument(t))}getEntries(e,t){let s=Hs();return t.forEach((a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Wn.newInvalidDocument(a))})),se.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let c=Hs();const m=t.path,v=new Le(m.child("__id-9223372036854775808__")),E=this.docs.getIteratorFrom(v);for(;E.hasNext();){const{key:x,value:{document:b}}=E.getNext();if(!m.isPrefixOf(x.path))break;x.path.length>m.length+1||jP(FP(b),s)<=0||(a.has(b.key)||Wh(t,b))&&(c=c.insert(b.key,b.mutableCopy()))}return se.resolve(c)}getAllFromCollectionGroup(e,t,s,a){We(9500)}ni(e,t){return se.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new pC(this)}getSize(e){return se.resolve(this.size)}}class pC extends aC{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(s)})),se.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.persistence=e,this.ri=new Ma((t=>Tm(t)),xm),this.lastRemoteSnapshotVersion=Ke.min(),this.highestTargetId=0,this.ii=0,this.si=new Am,this.targetCount=0,this.oi=Rl._r()}forEachTarget(e,t){return this.ri.forEach(((s,a)=>t(a))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ii&&(this.ii=t),se.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Rl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.lr(t),se.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,s){let a=0;const c=[];return this.ri.forEach(((m,v)=>{v.sequenceNumber<=t&&s.get(v.targetId)===null&&(this.ri.delete(m),c.push(this.removeMatchingKeysForTargetId(e,v.targetId)),a++)})),se.waitFor(c).next((()=>a))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const s=this.ri.get(t)||null;return se.resolve(s)}addMatchingKeys(e,t,s){return this.si.$r(t,s),se.resolve()}removeMatchingKeys(e,t,s){this.si.Qr(t,s);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach((m=>{c.push(a.markPotentiallyOrphaned(e,m))})),se.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const s=this.si.jr(t);return se.resolve(s)}containsKey(e,t){return se.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,t){this._i={},this.overlays={},this.ai=new Fh(0),this.ui=!1,this.ui=!0,this.ci=new dC,this.referenceDelegate=e(this),this.li=new gC(this),this.indexManager=new eC,this.remoteDocumentCache=(function(a){return new mC(a)})((s=>this.referenceDelegate.hi(s))),this.serializer=new Xb(t),this.Pi=new cC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this._i[e.toKey()];return s||(s=new fC(t,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,s){Pe("MemoryPersistence","Starting transaction:",e);const a=new _C(this.ai.next());return this.referenceDelegate.Ti(),s(a).next((c=>this.referenceDelegate.Ii(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ei(e,t){return se.or(Object.values(this._i).map((s=>()=>s.containsKey(e,t))))}}class _C extends UP{constructor(e){super(),this.currentSequenceNumber=e}}class km{constructor(e){this.persistence=e,this.Ri=new Am,this.Ai=null}static Vi(e){return new km(e)}get di(){if(this.Ai)return this.Ai;throw We(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.di.delete(s.toString()),se.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.di.add(s.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((c=>this.di.add(c.toString())))})).next((()=>s.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.di,(s=>{const a=Le.fromPath(s);return this.mi(e,a).next((c=>{c||t.removeEntry(a,Ke.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Ph{constructor(e,t){this.persistence=e,this.fi=new Ma((s=>qP(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=oC(this,t)}static Vi(e,t){return new Ph(e,t)}Ti(){}Ii(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}mr(e,t){return se.forEach(this.fi,((s,a)=>this.wr(e,s,a).next((c=>c?se.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ni(e,(m=>this.wr(e,m,t).next((v=>{v||(s++,c.removeEntry(m,Ke.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),se.resolve()}removeReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),se.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=sh(e.data.value)),t}wr(e,t,s){return se.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return se.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Ts=s,this.Is=a}static Es(e,t){let s=ot(),a=ot();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Rm(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return ax()?8:WP(Hn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const c={result:null};return this.gs(e,t).next((m=>{c.result=m})).next((()=>{if(!c.result)return this.ps(e,t,a,s).next((m=>{c.result=m}))})).next((()=>{if(c.result)return;const m=new yC;return this.ys(e,t,m).next((v=>{if(c.result=v,this.As)return this.ws(e,t,m,v.size)}))})).next((()=>c.result))}ws(e,t,s,a){return s.documentReadCount<this.Vs?(fl()<=it.DEBUG&&Pe("QueryEngine","SDK will not create cache indexes for query:",ml(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(fl()<=it.DEBUG&&Pe("QueryEngine","Query:",ml(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.ds*a?(fl()<=it.DEBUG&&Pe("QueryEngine","The SDK decides to create cache indexes for query:",ml(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,is(t))):se.resolve())}gs(e,t){if(z_(t))return se.resolve(null);let s=is(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Gf(t,null,"F"),s=is(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const m=ot(...c);return this.fs.getDocuments(e,m).next((v=>this.indexManager.getMinOffset(e,s).next((E=>{const x=this.bs(t,v);return this.Ss(t,x,m,E.readTime)?this.gs(e,Gf(t,null,"F")):this.Ds(e,x,t,E)}))))})))))}ps(e,t,s,a){return z_(t)||a.isEqual(Ke.min())?se.resolve(null):this.fs.getDocuments(e,s).next((c=>{const m=this.bs(t,c);return this.Ss(t,m,s,a)?se.resolve(null):(fl()<=it.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ml(t)),this.Ds(e,m,t,zP(a,Ru)).next((v=>v)))}))}bs(e,t){let s=new ln(Qv(e));return t.forEach(((a,c)=>{Wh(e,c)&&(s=s.add(c))})),s}Ss(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ys(e,t,s){return fl()<=it.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",ml(t)),this.fs.getDocumentsMatchingQuery(e,t,Uo.min(),s)}Ds(e,t,s,a){return this.fs.getDocumentsMatchingQuery(e,s,a).next((c=>(t.forEach((m=>{c=c.insert(m.key,m)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="LocalStore",wC=3e8;class EC{constructor(e,t,s,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new Bt(st),this.Fs=new Ma((c=>Tm(c)),xm),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uC(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function TC(i,e,t,s){return new EC(i,e,t,s)}async function E0(i,e){const t=Qe(i);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((c=>(a=c,t.Os(e),t.mutationQueue.getAllMutationBatches(s)))).next((c=>{const m=[],v=[];let E=ot();for(const x of a){m.push(x.batchId);for(const b of x.mutations)E=E.add(b.key)}for(const x of c){v.push(x.batchId);for(const b of x.mutations)E=E.add(b.key)}return t.localDocuments.getDocuments(s,E).next((x=>({Ns:x,removedBatchIds:m,addedBatchIds:v})))}))}))}function xC(i,e){const t=Qe(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),c=t.xs.newChangeBuffer({trackRemovals:!0});return(function(v,E,x,b){const I=x.batch,M=I.keys();let $=se.resolve();return M.forEach((Q=>{$=$.next((()=>b.getEntry(E,Q))).next((te=>{const ee=x.docVersions.get(Q);vt(ee!==null,48541),te.version.compareTo(ee)<0&&(I.applyToRemoteDocument(te,x),te.isValidDocument()&&(te.setReadTime(x.commitVersion),b.addEntry(te)))}))})),$.next((()=>v.mutationQueue.removeMutationBatch(E,I)))})(t,s,e,c).next((()=>c.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(v){let E=ot();for(let x=0;x<v.mutationResults.length;++x)v.mutationResults[x].transformResults.length>0&&(E=E.add(v.batch.mutations[x].key));return E})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function T0(i){const e=Qe(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function IC(i,e){const t=Qe(i),s=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const m=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const v=[];e.targetChanges.forEach(((b,I)=>{const M=a.get(I);if(!M)return;v.push(t.li.removeMatchingKeys(c,b.removedDocuments,I).next((()=>t.li.addMatchingKeys(c,b.addedDocuments,I))));let $=M.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(I)!==null?$=$.withResumeToken(An.EMPTY_BYTE_STRING,Ke.min()).withLastLimboFreeSnapshotVersion(Ke.min()):b.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(b.resumeToken,s)),a=a.insert(I,$),(function(te,ee,Ae){return te.resumeToken.approximateByteSize()===0||ee.snapshotVersion.toMicroseconds()-te.snapshotVersion.toMicroseconds()>=wC?!0:Ae.addedDocuments.size+Ae.modifiedDocuments.size+Ae.removedDocuments.size>0})(M,$,b)&&v.push(t.li.updateTargetData(c,$))}));let E=Hs(),x=ot();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&v.push(t.persistence.referenceDelegate.updateLimboDocument(c,b))})),v.push(SC(c,m,e.documentUpdates).next((b=>{E=b.Bs,x=b.Ls}))),!s.isEqual(Ke.min())){const b=t.li.getLastRemoteSnapshotVersion(c).next((I=>t.li.setTargetsMetadata(c,c.currentSequenceNumber,s)));v.push(b)}return se.waitFor(v).next((()=>m.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,E,x))).next((()=>E))})).then((c=>(t.vs=a,c)))}function SC(i,e,t){let s=ot(),a=ot();return t.forEach((c=>s=s.add(c))),e.getEntries(i,s).next((c=>{let m=Hs();return t.forEach(((v,E)=>{const x=c.get(v);E.isFoundDocument()!==x.isFoundDocument()&&(a=a.add(v)),E.isNoDocument()&&E.version.isEqual(Ke.min())?(e.removeEntry(v,E.readTime),m=m.insert(v,E)):!x.isValidDocument()||E.version.compareTo(x.version)>0||E.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(E),m=m.insert(v,E)):Pe(Nm,"Ignoring outdated watch update for ",v,". Current version:",x.version," Watch version:",E.version)})),{Bs:m,Ls:a}}))}function PC(i,e){const t=Qe(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=vm),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function bC(i,e){const t=Qe(i);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.li.getTargetData(s,e).next((c=>c?(a=c,se.resolve(a)):t.li.allocateTargetId(s).next((m=>(a=new Mo(e,m,"TargetPurposeListen",s.currentSequenceNumber),t.li.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.vs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(s.targetId,s),t.Fs.set(e,s.targetId)),s}))}async function Xf(i,e,t){const s=Qe(i),a=s.vs.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,(m=>s.persistence.referenceDelegate.removeTarget(m,a)))}catch(m){if(!zl(m))throw m;Pe(Nm,`Failed to update sequence numbers for target ${e}: ${m}`)}s.vs=s.vs.remove(e),s.Fs.delete(a.target)}function Y_(i,e,t){const s=Qe(i);let a=Ke.min(),c=ot();return s.persistence.runTransaction("Execute query","readwrite",(m=>(function(E,x,b){const I=Qe(E),M=I.Fs.get(b);return M!==void 0?se.resolve(I.vs.get(M)):I.li.getTargetData(x,b)})(s,m,is(e)).next((v=>{if(v)return a=v.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(m,v.targetId).next((E=>{c=E}))})).next((()=>s.Cs.getDocumentsMatchingQuery(m,e,t?a:Ke.min(),t?c:ot()))).next((v=>(CC(s,fb(e),v),{documents:v,ks:c})))))}function CC(i,e,t){let s=i.Ms.get(e)||Ke.min();t.forEach(((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),i.Ms.set(e,s)}class X_{constructor(){this.activeTargetIds=vb()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AC{constructor(){this.vo=new X_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,s){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new X_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="ConnectivityMonitor";class ey{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Pe(J_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Pe(J_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jc=null;function Jf(){return Jc===null?Jc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jc++,"0x"+Jc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If="RestConnection",RC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class NC{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${s}/databases/${a}`,this.$o=this.databaseId.database===wh?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Wo(e,t,s,a,c){const m=Jf(),v=this.Qo(e,t.toUriEncodedString());Pe(If,`Sending RPC '${e}' ${m}:`,v,s);const E={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(E,a,c);const{host:x}=new URL(v),b=Ll(x);return this.zo(e,v,E,s,b).then((I=>(Pe(If,`Received RPC '${e}' ${m}: `,I),I)),(I=>{throw bl(If,`RPC '${e}' ${m} failed with error: `,I,"url: ",v,"request:",s),I}))}jo(e,t,s,a,c,m){return this.Wo(e,t,s,a,c)}Go(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ol})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,c)=>e[c]=a)),s&&s.headers.forEach(((a,c)=>e[c]=a))}Qo(e,t){const s=RC[e];let a=`${this.qo}/v1/${t}:${s}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn="WebChannelConnection",gu=(i,e,t)=>{i.listen(e,(s=>{try{t(s)}catch(a){setTimeout((()=>{throw a}),0)}}))};class xl extends NC{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!xl.c_){const e=Pv();gu(e,Sv.STAT_EVENT,(t=>{t.stat===jf.PROXY?Pe(Bn,"STAT_EVENT: detected buffering proxy"):t.stat===jf.NOPROXY&&Pe(Bn,"STAT_EVENT: detected no buffering proxy")})),xl.c_=!0}}zo(e,t,s,a,c){const m=Jf();return new Promise(((v,E)=>{const x=new xv;x.setWithCredentials(!0),x.listenOnce(Iv.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case ih.NO_ERROR:const I=x.getResponseJson();Pe(Bn,`XHR for RPC '${e}' ${m} received:`,JSON.stringify(I)),v(I);break;case ih.TIMEOUT:Pe(Bn,`RPC '${e}' ${m} timed out`),E(new Se(ie.DEADLINE_EXCEEDED,"Request time out"));break;case ih.HTTP_ERROR:const M=x.getStatus();if(Pe(Bn,`RPC '${e}' ${m} failed with status:`,M,"response text:",x.getResponseText()),M>0){let $=x.getResponseJson();Array.isArray($)&&($=$[0]);const Q=$==null?void 0:$.error;if(Q&&Q.status&&Q.message){const te=(function(Ae){const pe=Ae.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(pe)>=0?pe:ie.UNKNOWN})(Q.status);E(new Se(te,Q.message))}else E(new Se(ie.UNKNOWN,"Server responded with status "+x.getStatus()))}else E(new Se(ie.UNAVAILABLE,"Connection failed."));break;default:We(9055,{l_:e,streamId:m,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{Pe(Bn,`RPC '${e}' ${m} completed.`)}}));const b=JSON.stringify(a);Pe(Bn,`RPC '${e}' ${m} sending request:`,a),x.send(t,"POST",b,s,15)}))}T_(e,t,s){const a=Jf(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=this.createWebChannelTransport(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(v.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(v.useFetchStreams=!0),this.Go(v.initMessageHeaders,t,s),v.encodeInitMessageHeaders=!0;const x=c.join("");Pe(Bn,`Creating RPC '${e}' stream ${a}: ${x}`,v);const b=m.createWebChannel(x,v);this.I_(b);let I=!1,M=!1;const $=new LC({Ho:Q=>{M?Pe(Bn,`Not sending because RPC '${e}' stream ${a} is closed:`,Q):(I||(Pe(Bn,`Opening RPC '${e}' stream ${a} transport.`),b.open(),I=!0),Pe(Bn,`RPC '${e}' stream ${a} sending:`,Q),b.send(Q))},Jo:()=>b.close()});return gu(b,yu.EventType.OPEN,(()=>{M||(Pe(Bn,`RPC '${e}' stream ${a} transport opened.`),$.i_())})),gu(b,yu.EventType.CLOSE,(()=>{M||(M=!0,Pe(Bn,`RPC '${e}' stream ${a} transport closed`),$.o_(),this.E_(b))})),gu(b,yu.EventType.ERROR,(Q=>{M||(M=!0,bl(Bn,`RPC '${e}' stream ${a} transport errored. Name:`,Q.name,"Message:",Q.message),$.o_(new Se(ie.UNAVAILABLE,"The operation could not be completed")))})),gu(b,yu.EventType.MESSAGE,(Q=>{var te;if(!M){const ee=Q.data[0];vt(!!ee,16349);const Ae=ee,pe=(Ae==null?void 0:Ae.error)||((te=Ae[0])==null?void 0:te.error);if(pe){Pe(Bn,`RPC '${e}' stream ${a} received error:`,pe);const ve=pe.status;let ge=(function(F){const A=Jt[F];if(A!==void 0)return l0(A)})(ve),Me=pe.message;ge===void 0&&(ge=ie.INTERNAL,Me="Unknown error status: "+ve+" with message "+pe.message),M=!0,$.o_(new Se(ge,Me)),b.close()}else Pe(Bn,`RPC '${e}' stream ${a} received:`,ee),$.__(ee)}})),xl.u_(),setTimeout((()=>{$.s_()}),0),$}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,s){super.Go(e,t,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return bv()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(i){return new xl(i)}function Sf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(i){return new zb(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xl.c_=!1;class x0{constructor(e,t,s=1e3,a=1.5,c=6e4){this.Ci=e,this.timerId=t,this.R_=s,this.A_=a,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&Pe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="PersistentStream";class I0{constructor(e,t,s,a,c,m,v,E){this.Ci=e,this.b_=s,this.S_=a,this.connection=c,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=v,this.listener=E,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new x0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Ws(t.toString()),Ws("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new Se(ie.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Pe(ty,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Pe(ty,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class DC extends I0{constructor(e,t,s,a,c,m){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,m),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Bb(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Ke.min();const m=c.targetChange;return m.targetIds&&m.targetIds.length?Ke.min():m.readTime?ss(m.readTime):Ke.min()})(e);return this.listener.J_(t,s)}Z_(e){const t={};t.database=Yf(this.serializer),t.addTarget=(function(c,m){let v;const E=m.target;if(v=qf(E)?{documents:Hb(c,E)}:{query:qb(c,E).ft},v.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){v.resumeToken=h0(c,m.resumeToken);const x=Zf(c,m.expectedCount);x!==null&&(v.expectedCount=x)}else if(m.snapshotVersion.compareTo(Ke.min())>0){v.readTime=Sh(c,m.snapshotVersion.toTimestamp());const x=Zf(c,m.expectedCount);x!==null&&(v.expectedCount=x)}return v})(this.serializer,e);const s=Gb(this.serializer,e);s&&(t.labels=s),this.K_(t)}X_(e){const t={};t.database=Yf(this.serializer),t.removeTarget=e,this.K_(t)}}class OC extends I0{constructor(e,t,s,a,c,m){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,m),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return vt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,vt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){vt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Wb(e.writeResults,e.commitTime),s=ss(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Yf(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>Ub(this.serializer,s)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{}class zC extends VC{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Se(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Wo(e,Kf(t,s),a,c,m))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Se(ie.UNKNOWN,c.toString())}))}jo(e,t,s,a,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,v])=>this.connection.jo(e,Kf(t,s),a,m,v,c))).catch((m=>{throw m.name==="FirebaseError"?(m.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Se(ie.UNKNOWN,m.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function FC(i,e,t,s){return new zC(i,e,t,s)}class jC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ws(t),this.aa=!1):Pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="RemoteStore";class BC{constructor(e,t,s,a,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((m=>{s.enqueueAndForget((async()=>{Oa(this)&&(Pe(Na,"Restarting streams for network reachability change."),await(async function(E){const x=Qe(E);x.Ea.add(4),await $u(x),x.Va.set("Unknown"),x.Ea.delete(4),await Zh(x)})(this))}))})),this.Va=new jC(s,a)}}async function Zh(i){if(Oa(i))for(const e of i.Ra)await e(!0)}async function $u(i){for(const e of i.Ra)await e(!1)}function S0(i,e){const t=Qe(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Om(t)?Dm(t):jl(t).O_()&&Mm(t,e))}function Lm(i,e){const t=Qe(i),s=jl(t);t.Ia.delete(e),s.O_()&&P0(t,e),t.Ia.size===0&&(s.O_()?s.L_():Oa(t)&&t.Va.set("Unknown"))}function Mm(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ke.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}jl(i).Z_(e)}function P0(i,e){i.da.$e(e),jl(i).X_(e)}function Dm(i){i.da=new Mb({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),jl(i).start(),i.Va.ua()}function Om(i){return Oa(i)&&!jl(i).x_()&&i.Ia.size>0}function Oa(i){return Qe(i).Ea.size===0}function b0(i){i.da=void 0}async function UC(i){i.Va.set("Online")}async function WC(i){i.Ia.forEach(((e,t)=>{Mm(i,e)}))}async function HC(i,e){b0(i),Om(i)?(i.Va.ha(e),Dm(i)):i.Va.set("Unknown")}async function qC(i,e,t){if(i.Va.set("Online"),e instanceof c0&&e.state===2&&e.cause)try{await(async function(a,c){const m=c.cause;for(const v of c.targetIds)a.Ia.has(v)&&(await a.remoteSyncer.rejectListen(v,m),a.Ia.delete(v),a.da.removeTarget(v))})(i,e)}catch(s){Pe(Na,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await bh(i,s)}else if(e instanceof lh?i.da.Xe(e):e instanceof u0?i.da.st(e):i.da.tt(e),!t.isEqual(Ke.min()))try{const s=await T0(i.localStore);t.compareTo(s)>=0&&await(function(c,m){const v=c.da.Tt(m);return v.targetChanges.forEach(((E,x)=>{if(E.resumeToken.approximateByteSize()>0){const b=c.Ia.get(x);b&&c.Ia.set(x,b.withResumeToken(E.resumeToken,m))}})),v.targetMismatches.forEach(((E,x)=>{const b=c.Ia.get(E);if(!b)return;c.Ia.set(E,b.withResumeToken(An.EMPTY_BYTE_STRING,b.snapshotVersion)),P0(c,E);const I=new Mo(b.target,E,x,b.sequenceNumber);Mm(c,I)})),c.remoteSyncer.applyRemoteEvent(v)})(i,t)}catch(s){Pe(Na,"Failed to raise snapshot:",s),await bh(i,s)}}async function bh(i,e,t){if(!zl(e))throw e;i.Ea.add(1),await $u(i),i.Va.set("Offline"),t||(t=()=>T0(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Pe(Na,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await Zh(i)}))}function C0(i,e){return e().catch((t=>bh(i,t,e)))}async function Kh(i){const e=Qe(i),t=$o(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vm;for(;$C(e);)try{const a=await PC(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,GC(e,a)}catch(a){await bh(e,a)}A0(e)&&k0(e)}function $C(i){return Oa(i)&&i.Ta.length<10}function GC(i,e){i.Ta.push(e);const t=$o(i);t.O_()&&t.Y_&&t.ea(e.mutations)}function A0(i){return Oa(i)&&!$o(i).x_()&&i.Ta.length>0}function k0(i){$o(i).start()}async function ZC(i){$o(i).ra()}async function KC(i){const e=$o(i);for(const t of i.Ta)e.ea(t.mutations)}async function QC(i,e,t){const s=i.Ta.shift(),a=Pm.from(s,e,t);await C0(i,(()=>i.remoteSyncer.applySuccessfulWrite(a))),await Kh(i)}async function YC(i,e){e&&$o(i).Y_&&await(async function(s,a){if((function(m){return Rb(m)&&m!==ie.ABORTED})(a.code)){const c=s.Ta.shift();$o(s).B_(),await C0(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a))),await Kh(s)}})(i,e),A0(i)&&k0(i)}async function ny(i,e){const t=Qe(i);t.asyncQueue.verifyOperationInProgress(),Pe(Na,"RemoteStore received new credentials");const s=Oa(t);t.Ea.add(3),await $u(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Zh(t)}async function XC(i,e){const t=Qe(i);e?(t.Ea.delete(2),await Zh(t)):e||(t.Ea.add(2),await $u(t),t.Va.set("Unknown"))}function jl(i){return i.ma||(i.ma=(function(t,s,a){const c=Qe(t);return c.sa(),new DC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(i.datastore,i.asyncQueue,{Zo:UC.bind(null,i),Yo:WC.bind(null,i),t_:HC.bind(null,i),J_:qC.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),Om(i)?Dm(i):i.Va.set("Unknown")):(await i.ma.stop(),b0(i))}))),i.ma}function $o(i){return i.fa||(i.fa=(function(t,s,a){const c=Qe(t);return c.sa(),new OC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:ZC.bind(null,i),t_:YC.bind(null,i),ta:KC.bind(null,i),na:QC.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await Kh(i)):(await i.fa.stop(),i.Ta.length>0&&(Pe(Na,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,t,s,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new Sa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((m=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,c){const m=Date.now()+s,v=new Vm(e,t,m,a,c);return v.start(s),v}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zm(i,e){if(Ws("AsyncQueue",`${e}: ${i}`),zl(i))return new Se(ie.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{static emptySet(e){return new Il(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Le.comparator(t.key,s.key):(t,s)=>Le.comparator(t.key,s.key),this.keyedMap=vu(),this.sortedSet=new Bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Il)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Il;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(){this.ga=new Bt(Le.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):We(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Nl{constructor(e,t,s,a,c,m,v,E,x){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=m,this.syncStateChanged=v,this.excludesMetadataChanges=E,this.hasCachedResults=x}static fromInitialDocuments(e,t,s,a,c){const m=[];return t.forEach((v=>{m.push({type:0,doc:v})})),new Nl(e,t,Il.emptySet(t),m,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class eA{constructor(){this.queries=iy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=Qe(t),c=a.queries;a.queries=iy(),c.forEach(((m,v)=>{for(const E of v.ba)E.onError(s)}))})(this,new Se(ie.ABORTED,"Firestore shutting down"))}}function iy(){return new Ma((i=>Kv(i)),Uh)}async function tA(i,e){const t=Qe(i);let s=3;const a=e.query;let c=t.queries.get(a);c?!c.Sa()&&e.Da()&&(s=2):(c=new JC,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await t.onListen(a,!0);break;case 1:c.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(m){const v=zm(m,`Initialization of query '${ml(e.query)}' failed`);return void e.onError(v)}t.queries.set(a,c),c.ba.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Fm(t)}async function nA(i,e){const t=Qe(i),s=e.query;let a=3;const c=t.queries.get(s);if(c){const m=c.ba.indexOf(e);m>=0&&(c.ba.splice(m,1),c.ba.length===0?a=e.Da()?0:1:!c.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function rA(i,e){const t=Qe(i);let s=!1;for(const a of e){const c=a.query,m=t.queries.get(c);if(m){for(const v of m.ba)v.Fa(a)&&(s=!0);m.wa=a}}s&&Fm(t)}function iA(i,e,t){const s=Qe(i),a=s.queries.get(e);if(a)for(const c of a.ba)c.onError(t);s.queries.delete(e)}function Fm(i){i.Ca.forEach((e=>{e.next()}))}var em,sy;(sy=em||(em={})).Ma="default",sy.Cache="cache";class sA{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Nl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==em.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e){this.key=e}}class N0{constructor(e){this.key=e}}class oA{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ot(),this.mutatedKeys=ot(),this.eu=Qv(e),this.tu=new Il(this.eu)}get nu(){return this.Za}ru(e,t){const s=t?t.iu:new ry,a=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,m=a,v=!1;const E=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,x=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((b,I)=>{const M=a.get(b),$=Wh(this.query,I)?I:null,Q=!!M&&this.mutatedKeys.has(M.key),te=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let ee=!1;M&&$?M.data.isEqual($.data)?Q!==te&&(s.track({type:3,doc:$}),ee=!0):this.su(M,$)||(s.track({type:2,doc:$}),ee=!0,(E&&this.eu($,E)>0||x&&this.eu($,x)<0)&&(v=!0)):!M&&$?(s.track({type:0,doc:$}),ee=!0):M&&!$&&(s.track({type:1,doc:M}),ee=!0,(E||x)&&(v=!0)),ee&&($?(m=m.add($),c=te?c.add(b):c.delete(b)):(m=m.delete(b),c=c.delete(b)))})),this.query.limit!==null)for(;m.size>this.query.limit;){const b=this.query.limitType==="F"?m.last():m.first();m=m.delete(b.key),c=c.delete(b.key),s.track({type:1,doc:b})}return{tu:m,iu:s,Ss:v,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const m=e.iu.ya();m.sort(((b,I)=>(function($,Q){const te=ee=>{switch(ee){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return We(20277,{Vt:ee})}};return te($)-te(Q)})(b.type,I.type)||this.eu(b.doc,I.doc))),this.ou(s),a=a??!1;const v=t&&!a?this._u():[],E=this.Ya.size===0&&this.current&&!a?1:0,x=E!==this.Xa;return this.Xa=E,m.length!==0||x?{snapshot:new Nl(this.query,e.tu,c,m,e.mutatedKeys,E===0,x,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:v}:{au:v}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ry,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ot(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const t=[];return e.forEach((s=>{this.Ya.has(s)||t.push(new N0(s))})),this.Ya.forEach((s=>{e.has(s)||t.push(new R0(s))})),t}cu(e){this.Za=e.ks,this.Ya=ot();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const jm="SyncEngine";class aA{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class lA{constructor(e){this.key=e,this.hu=!1}}class uA{constructor(e,t,s,a,c,m){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=m,this.Pu={},this.Tu=new Ma((v=>Kv(v)),Uh),this.Iu=new Map,this.Eu=new Set,this.Ru=new Bt(Le.comparator),this.Au=new Map,this.Vu=new Am,this.du={},this.mu=new Map,this.fu=Rl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function cA(i,e,t=!0){const s=z0(i);let a;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.lu()):a=await L0(s,e,t,!0),a}async function hA(i,e){const t=z0(i);await L0(t,e,!0,!1)}async function L0(i,e,t,s){const a=await bC(i.localStore,is(e)),c=a.targetId,m=i.sharedClientState.addLocalQueryTarget(c,t);let v;return s&&(v=await dA(i,e,c,m==="current",a.resumeToken)),i.isPrimaryClient&&t&&S0(i.remoteStore,a),v}async function dA(i,e,t,s,a){i.pu=(I,M,$)=>(async function(te,ee,Ae,pe){let ve=ee.view.ru(Ae);ve.Ss&&(ve=await Y_(te.localStore,ee.query,!1).then((({documents:F})=>ee.view.ru(F,ve))));const ge=pe&&pe.targetChanges.get(ee.targetId),Me=pe&&pe.targetMismatches.get(ee.targetId)!=null,je=ee.view.applyChanges(ve,te.isPrimaryClient,ge,Me);return ay(te,ee.targetId,je.au),je.snapshot})(i,I,M,$);const c=await Y_(i.localStore,e,!0),m=new oA(e,c.ks),v=m.ru(c.documents),E=qu.createSynthesizedTargetChangeForCurrentChange(t,s&&i.onlineState!=="Offline",a),x=m.applyChanges(v,i.isPrimaryClient,E);ay(i,t,x.au);const b=new aA(e,t,m);return i.Tu.set(e,b),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),x.snapshot}async function fA(i,e,t){const s=Qe(i),a=s.Tu.get(e),c=s.Iu.get(a.targetId);if(c.length>1)return s.Iu.set(a.targetId,c.filter((m=>!Uh(m,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Xf(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&Lm(s.remoteStore,a.targetId),tm(s,a.targetId)})).catch(Vl)):(tm(s,a.targetId),await Xf(s.localStore,a.targetId,!0))}async function mA(i,e){const t=Qe(i),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Lm(t.remoteStore,s.targetId))}async function pA(i,e,t){const s=TA(i);try{const a=await(function(m,v){const E=Qe(m),x=kt.now(),b=v.reduce((($,Q)=>$.add(Q.key)),ot());let I,M;return E.persistence.runTransaction("Locally write mutations","readwrite",($=>{let Q=Hs(),te=ot();return E.xs.getEntries($,b).next((ee=>{Q=ee,Q.forEach(((Ae,pe)=>{pe.isValidDocument()||(te=te.add(Ae))}))})).next((()=>E.localDocuments.getOverlayedDocuments($,Q))).next((ee=>{I=ee;const Ae=[];for(const pe of v){const ve=Pb(pe,I.get(pe.key).overlayedDocument);ve!=null&&Ae.push(new Da(pe.key,ve,Bv(ve.value.mapValue),Fs.exists(!0)))}return E.mutationQueue.addMutationBatch($,x,Ae,v)})).next((ee=>{M=ee;const Ae=ee.applyToLocalDocumentSet(I,te);return E.documentOverlayCache.saveOverlays($,ee.batchId,Ae)}))})).then((()=>({batchId:M.batchId,changes:Xv(I)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(m,v,E){let x=m.du[m.currentUser.toKey()];x||(x=new Bt(st)),x=x.insert(v,E),m.du[m.currentUser.toKey()]=x})(s,a.batchId,t),await Gu(s,a.changes),await Kh(s.remoteStore)}catch(a){const c=zm(a,"Failed to persist write");t.reject(c)}}async function M0(i,e){const t=Qe(i);try{const s=await IC(t.localStore,e);e.targetChanges.forEach(((a,c)=>{const m=t.Au.get(c);m&&(vt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?m.hu=!0:a.modifiedDocuments.size>0?vt(m.hu,14607):a.removedDocuments.size>0&&(vt(m.hu,42227),m.hu=!1))})),await Gu(t,s,e)}catch(s){await Vl(s)}}function oy(i,e,t){const s=Qe(i);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((c,m)=>{const v=m.view.va(e);v.snapshot&&a.push(v.snapshot)})),(function(m,v){const E=Qe(m);E.onlineState=v;let x=!1;E.queries.forEach(((b,I)=>{for(const M of I.ba)M.va(v)&&(x=!0)})),x&&Fm(E)})(s.eventManager,e),a.length&&s.Pu.J_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function gA(i,e,t){const s=Qe(i);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),c=a&&a.key;if(c){let m=new Bt(Le.comparator);m=m.insert(c,Wn.newNoDocument(c,Ke.min()));const v=ot().add(c),E=new $h(Ke.min(),new Map,new Bt(st),m,v);await M0(s,E),s.Ru=s.Ru.remove(c),s.Au.delete(e),Bm(s)}else await Xf(s.localStore,e,!1).then((()=>tm(s,e,t))).catch(Vl)}async function _A(i,e){const t=Qe(i),s=e.batch.batchId;try{const a=await xC(t.localStore,e);O0(t,s,null),D0(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Gu(t,a)}catch(a){await Vl(a)}}async function yA(i,e,t){const s=Qe(i);try{const a=await(function(m,v){const E=Qe(m);return E.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let b;return E.mutationQueue.lookupMutationBatch(x,v).next((I=>(vt(I!==null,37113),b=I.keys(),E.mutationQueue.removeMutationBatch(x,I)))).next((()=>E.mutationQueue.performConsistencyCheck(x))).next((()=>E.documentOverlayCache.removeOverlaysForBatchId(x,b,v))).next((()=>E.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,b))).next((()=>E.localDocuments.getDocuments(x,b)))}))})(s.localStore,e);O0(s,e,t),D0(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Gu(s,a)}catch(a){await Vl(a)}}function D0(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function O0(i,e,t){const s=Qe(i);let a=s.du[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),s.du[s.currentUser.toKey()]=a}}function tm(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),t&&i.Pu.yu(s,t);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((s=>{i.Vu.containsKey(s)||V0(i,s)}))}function V0(i,e){i.Eu.delete(e.path.canonicalString());const t=i.Ru.get(e);t!==null&&(Lm(i.remoteStore,t),i.Ru=i.Ru.remove(e),i.Au.delete(t),Bm(i))}function ay(i,e,t){for(const s of t)s instanceof R0?(i.Vu.addReference(s.key,e),vA(i,s)):s instanceof N0?(Pe(jm,"Document no longer in limbo: "+s.key),i.Vu.removeReference(s.key,e),i.Vu.containsKey(s.key)||V0(i,s.key)):We(19791,{wu:s})}function vA(i,e){const t=e.key,s=t.path.canonicalString();i.Ru.get(t)||i.Eu.has(s)||(Pe(jm,"New document in limbo: "+t),i.Eu.add(s),Bm(i))}function Bm(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new Le(At.fromString(e)),s=i.fu.next();i.Au.set(s,new lA(t)),i.Ru=i.Ru.insert(t,s),S0(i.remoteStore,new Mo(is(Im(t.path)),s,"TargetPurposeLimboResolution",Fh.ce))}}async function Gu(i,e,t){const s=Qe(i),a=[],c=[],m=[];s.Tu.isEmpty()||(s.Tu.forEach(((v,E)=>{m.push(s.pu(E,e,t).then((x=>{var b;if((x||t)&&s.isPrimaryClient){const I=x?!x.fromCache:(b=t==null?void 0:t.targetChanges.get(E.targetId))==null?void 0:b.current;s.sharedClientState.updateQueryState(E.targetId,I?"current":"not-current")}if(x){a.push(x);const I=Rm.Es(E.targetId,x);c.push(I)}})))})),await Promise.all(m),s.Pu.J_(a),await(async function(E,x){const b=Qe(E);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>se.forEach(x,(M=>se.forEach(M.Ts,($=>b.persistence.referenceDelegate.addReference(I,M.targetId,$))).next((()=>se.forEach(M.Is,($=>b.persistence.referenceDelegate.removeReference(I,M.targetId,$)))))))))}catch(I){if(!zl(I))throw I;Pe(Nm,"Failed to update sequence numbers: "+I)}for(const I of x){const M=I.targetId;if(!I.fromCache){const $=b.vs.get(M),Q=$.snapshotVersion,te=$.withLastLimboFreeSnapshotVersion(Q);b.vs=b.vs.insert(M,te)}}})(s.localStore,c))}async function wA(i,e){const t=Qe(i);if(!t.currentUser.isEqual(e)){Pe(jm,"User change. New user:",e.toKey());const s=await E0(t.localStore,e);t.currentUser=e,(function(c,m){c.mu.forEach((v=>{v.forEach((E=>{E.reject(new Se(ie.CANCELLED,m))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Gu(t,s.Ns)}}function EA(i,e){const t=Qe(i),s=t.Au.get(e);if(s&&s.hu)return ot().add(s.key);{let a=ot();const c=t.Iu.get(e);if(!c)return a;for(const m of c){const v=t.Tu.get(m);a=a.unionWith(v.view.nu)}return a}}function z0(i){const e=Qe(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=M0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gA.bind(null,e),e.Pu.J_=rA.bind(null,e.eventManager),e.Pu.yu=iA.bind(null,e.eventManager),e}function TA(i){const e=Qe(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_A.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yA.bind(null,e),e}class Ch{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return TC(this.persistence,new vC,e.initialUser,this.serializer)}Cu(e){return new w0(km.Vi,this.serializer)}Du(e){return new AC}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ch.provider={build:()=>new Ch};class xA extends Ch{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){vt(this.persistence.referenceDelegate instanceof Ph,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new iC(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Pr.withCacheSize(this.cacheSizeBytes):Pr.DEFAULT;return new w0((s=>Ph.Vi(s,t)),this.serializer)}}class nm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>oy(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=wA.bind(null,this.syncEngine),await XC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new eA})()}createDatastore(e){const t=Gh(e.databaseInfo.databaseId),s=MC(e.databaseInfo);return FC(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,c,m,v){return new BC(s,a,c,m,v)})(this.localStore,this.datastore,e.asyncQueue,(t=>oy(this.syncEngine,t,0)),(function(){return ey.v()?new ey:new kC})())}createSyncEngine(e,t){return(function(a,c,m,v,E,x,b){const I=new uA(a,c,m,v,E,x);return b&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const c=Qe(a);Pe(Na,"RemoteStore shutting down."),c.Ea.add(5),await $u(c),c.Aa.shutdown(),c.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}nm.provider={build:()=>new nm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ws("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="FirestoreClient";class SA{constructor(e,t,s,a,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this._databaseInfo=a,this.user=Un.UNAUTHENTICATED,this.clientId=ym.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async m=>{Pe(Go,"Received user=",m.uid),await this.authCredentialListener(m),this.user=m})),this.appCheckCredentials.start(s,(m=>(Pe(Go,"Received new app check token=",m),this.appCheckCredentialListener(m,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=zm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Pf(i,e){i.asyncQueue.verifyOperationInProgress(),Pe(Go,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener((async a=>{s.isEqual(a)||(await E0(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function ly(i,e){i.asyncQueue.verifyOperationInProgress();const t=await PA(i);Pe(Go,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((s=>ny(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,a)=>ny(e.remoteStore,a))),i._onlineComponents=e}async function PA(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Pe(Go,"Using user provided OfflineComponentProvider");try{await Pf(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ie.FAILED_PRECONDITION||a.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;bl("Error using user provided cache. Falling back to memory cache: "+t),await Pf(i,new Ch)}}else Pe(Go,"Using default OfflineComponentProvider"),await Pf(i,new xA(void 0));return i._offlineComponents}async function F0(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Pe(Go,"Using user provided OnlineComponentProvider"),await ly(i,i._uninitializedComponentsProvider._online)):(Pe(Go,"Using default OnlineComponentProvider"),await ly(i,new nm))),i._onlineComponents}function bA(i){return F0(i).then((e=>e.syncEngine))}async function uy(i){const e=await F0(i),t=e.eventManager;return t.onListen=cA.bind(null,e.syncEngine),t.onUnlisten=fA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=hA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=mA.bind(null,e.syncEngine),t}function CA(i,e,t,s){const a=new IA(s),c=new sA(e,a,t);return i.asyncQueue.enqueueAndForget((async()=>tA(await uy(i),c))),()=>{a.Nu(),i.asyncQueue.enqueueAndForget((async()=>nA(await uy(i),c)))}}function AA(i,e){const t=new Sa;return i.asyncQueue.enqueueAndForget((async()=>pA(await bA(i),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="ComponentProvider",cy=new Map;function RA(i,e,t,s,a){return new ZP(i,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,j0(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="firestore.googleapis.com",hy=!0;class dy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Se(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=B0,this.ssl=hy}else this.host=e.host,this.ssl=e.ssl??hy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=v0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nC)throw new Se(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=j0(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Se(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Se(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Se(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qh{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new bP;switch(s.type){case"firstParty":return new RP(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Se(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=cy.get(t);s&&(Pe(kA,"Removing Datastore"),cy.delete(t),s.terminate())})(this),Promise.resolve()}}function NA(i,e,t,s={}){var x;i=Tl(i,Qh);const a=Ll(e),c=i._getSettings(),m={...c,emulatorOptions:i._getEmulatorOptions()},v=`${e}:${t}`;a&&(Oy(`https://${v}`),Vy("Firestore",!0)),c.host!==B0&&c.host!==v&&bl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const E={...c,host:v,ssl:a,emulatorOptions:s};if(!Ca(E,m)&&(i._setSettings(E),s.mockUserToken)){let b,I;if(typeof s.mockUserToken=="string")b=s.mockUserToken,I=Un.MOCK_USER;else{b=X1(s.mockUserToken,(x=i._app)==null?void 0:x.options.projectId);const M=s.mockUserToken.sub||s.mockUserToken.user_id;if(!M)throw new Se(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new Un(M)}i._authCredentials=new CP(new Av(b,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Va(this.firestore,e,this._query)}}class nn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nn(this.firestore,e,this._key)}toJSON(){return{type:nn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Wu(t,nn._jsonSchema))return new nn(e,s||null,new Le(At.fromString(t.referencePath)))}}nn._jsonSchemaVersion="firestore/documentReference/1.0",nn._jsonSchema={type:tn("string",nn._jsonSchemaVersion),referencePath:tn("string")};class jo extends Va{constructor(e,t,s){super(e,t,Im(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new Le(e))}withConverter(e){return new jo(this.firestore,e,this._path)}}function LA(i,e,...t){if(i=Fr(i),kv("collection","path",e),i instanceof Qh){const s=At.fromString(e,...t);return I_(s),new jo(i,null,s)}{if(!(i instanceof nn||i instanceof jo))throw new Se(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(At.fromString(e,...t));return I_(s),new jo(i.firestore,null,s)}}function MA(i,e,...t){if(i=Fr(i),arguments.length===1&&(e=ym.newId()),kv("doc","path",e),i instanceof Qh){const s=At.fromString(e,...t);return x_(s),new nn(i,null,new Le(s))}{if(!(i instanceof nn||i instanceof jo))throw new Se(ie.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(At.fromString(e,...t));return x_(s),new nn(i.firestore,i instanceof jo?i.converter:null,new Le(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy="AsyncQueue";class my{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new x0(this,"async_queue_retry"),this._c=()=>{const s=Sf();s&&Pe(fy,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Sf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Sf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Sa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!zl(e))throw e;Pe(fy,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Ws("INTERNAL UNHANDLED ERROR: ",py(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Vm.createAndSchedule(this,e,t,s,(c=>this.hc(c)));return this.tc.push(a),a}uc(){this.nc&&We(47125,{Pc:py(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function py(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Ah extends Qh{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new my,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new my(e),this._firestoreClient=void 0,await e}}}function DA(i,e){const t=typeof i=="object"?i:By(),s=typeof i=="string"?i:wh,a=um(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=Q1("firestore");c&&NA(a,...c)}return a}function U0(i){if(i._terminated)throw new Se(ie.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||OA(i),i._firestoreClient}function OA(i){var s,a,c,m;const e=i._freezeSettings(),t=RA(i._databaseId,((s=i._app)==null?void 0:s.options.appId)||"",i._persistenceKey,(a=i._app)==null?void 0:a.options.apiKey,e);i._componentsProvider||(c=e.localCache)!=null&&c._offlineComponentProvider&&((m=e.localCache)!=null&&m._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new SA(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(E){const x=E==null?void 0:E._online.build();return{_offline:E==null?void 0:E._offline.build(x),_online:x}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mi(An.fromBase64String(e))}catch(t){throw new Se(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new mi(An.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:mi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wu(e,mi._jsonSchema))return mi.fromBase64String(e.bytes)}}mi._jsonSchemaVersion="firestore/bytes/1.0",mi._jsonSchema={type:tn("string",mi._jsonSchemaVersion),bytes:tn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Se(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:os._jsonSchemaVersion}}static fromJSON(e){if(Wu(e,os._jsonSchema))return new os(e.latitude,e.longitude)}}os._jsonSchemaVersion="firestore/geoPoint/1.0",os._jsonSchema={type:tn("string",os._jsonSchemaVersion),latitude:tn("number"),longitude:tn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ki._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wu(e,ki._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ki(e.vectorValues);throw new Se(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ki._jsonSchemaVersion="firestore/vectorValue/1.0",ki._jsonSchema={type:tn("string",ki._jsonSchemaVersion),vectorValues:tn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=/^__.*__$/;class zA{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Da(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hu(e,this.data,t,this.fieldTransforms)}}function q0(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw We(40011,{dataSource:i})}}class Um{constructor(e,t,s,a,c,m){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=m||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Um({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return kh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(q0(this.dataSource)&&VA.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class FA{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Gh(e)}createContext(e,t,s,a=!1){return new Um({dataSource:e,methodName:t,targetDoc:s,path:Cn.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $0(i){const e=i._freezeSettings(),t=Gh(i._databaseId);return new FA(i._databaseId,!!e.ignoreUndefinedProperties,t)}function jA(i,e,t,s,a,c={}){const m=i.createContext(c.merge||c.mergeFields?2:0,e,t,a);K0("Data must be an object, but it was:",m,s);const v=G0(s,m);let E,x;if(c.merge)E=new Ai(m.fieldMask),x=m.fieldTransforms;else if(c.mergeFields){const b=[];for(const I of c.mergeFields){const M=Yh(e,I,t);if(!m.contains(M))throw new Se(ie.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);HA(b,M)||b.push(M)}E=new Ai(b),x=m.fieldTransforms.filter((I=>E.covers(I.field)))}else E=null,x=m.fieldTransforms;return new zA(new fi(v),E,x)}function BA(i,e,t,s=!1){return Wm(t,i.createContext(s?4:3,e))}function Wm(i,e){if(Z0(i=Fr(i)))return K0("Unsupported field value:",e,i),G0(i,e);if(i instanceof H0)return(function(s,a){if(!q0(a.dataSource))throw a.createError(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,a){const c=[];let m=0;for(const v of s){let E=Wm(v,a.childContextForArray(m));E==null&&(E={nullValue:"NULL_VALUE"}),c.push(E),m++}return{arrayValue:{values:c}}})(i,e)}return(function(s,a){if((s=Fr(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return wb(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=kt.fromDate(s);return{timestampValue:Sh(a.serializer,c)}}if(s instanceof kt){const c=new kt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Sh(a.serializer,c)}}if(s instanceof os)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof mi)return{bytesValue:h0(a.serializer,s._byteString)};if(s instanceof nn){const c=a.databaseId,m=s.firestore._databaseId;if(!m.isEqual(c))throw a.createError(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Cm(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof ki)return(function(m,v){const E=m instanceof ki?m.toArray():m;return{mapValue:{fields:{[Fv]:{stringValue:jv},[Eh]:{arrayValue:{values:E.map((b=>{if(typeof b!="number")throw v.createError("VectorValues must only contain numeric values.");return Sm(v.serializer,b)}))}}}}}})(s,a);if(y0(s))return s._toProto(a.serializer);throw a.createError(`Unsupported field value: ${zh(s)}`)})(i,e)}function G0(i,e){const t={};return Lv(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):La(i,((s,a)=>{const c=Wm(a,e.childContextForField(s));c!=null&&(t[s]=c)})),{mapValue:{fields:t}}}function Z0(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof kt||i instanceof os||i instanceof mi||i instanceof nn||i instanceof H0||i instanceof ki||y0(i))}function K0(i,e,t){if(!Z0(t)||!Rv(t)){const s=zh(t);throw s==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+s)}}function Yh(i,e,t){if((e=Fr(e))instanceof W0)return e._internalPath;if(typeof e=="string")return WA(i,e);throw kh("Field path arguments must be of type string or ",i,!1,void 0,t)}const UA=new RegExp("[~\\*/\\[\\]]");function WA(i,e,t){if(e.search(UA)>=0)throw kh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new W0(...e.split("."))._internalPath}catch{throw kh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function kh(i,e,t,s,a){const c=s&&!s.isEmpty(),m=a!==void 0;let v=`Function ${e}() called with invalid data`;t&&(v+=" (via `toFirestore()`)"),v+=". ";let E="";return(c||m)&&(E+=" (found",c&&(E+=` in field ${s}`),m&&(E+=` in document ${a}`),E+=")"),new Se(ie.INVALID_ARGUMENT,v+i+E)}function HA(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{convertValue(e,t="none"){switch(qo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ho(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw We(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return La(e,((a,c)=>{s[a]=this.convertValue(c,t)})),s}convertVectorValue(e){var s,a,c;const t=(c=(a=(s=e.fields)==null?void 0:s[Eh].arrayValue)==null?void 0:a.values)==null?void 0:c.map((m=>Zt(m.doubleValue)));return new ki(t)}convertGeoPoint(e){return new os(Zt(e.latitude),Zt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Bh(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Nu(e));default:return null}}convertTimestamp(e){const t=Wo(e);return new kt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=At.fromString(e);vt(_0(s),9688,{name:e});const a=new Lu(s.get(1),s.get(3)),c=new Le(s.popFirst(5));return a.isEqual(t)||Ws(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0 extends qA{constructor(e){super(),this.firestore=e}convertBytes(e){return new mi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,t)}}const gy="@firebase/firestore",_y="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(i){return(function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const c of s)if(c in a&&typeof a[c]=="function")return!0;return!1})(i,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e,t,s,a,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $A(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Yh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class $A extends Y0{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Se(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hm{}class X0 extends Hm{}function ZA(i,e,...t){let s=[];e instanceof Hm&&s.push(e),s=s.concat(t),(function(c){const m=c.filter((E=>E instanceof $m)).length,v=c.filter((E=>E instanceof qm)).length;if(m>1||m>0&&v>0)throw new Se(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)i=a._apply(i);return i}class qm extends X0{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new qm(e,t,s)}_apply(e){const t=this._parse(e);return J0(e._query,t),new Va(e.firestore,e.converter,$f(e._query,t))}_parse(e){const t=$0(e.firestore);return(function(c,m,v,E,x,b,I){let M;if(x.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new Se(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){wy(I,b);const Q=[];for(const te of I)Q.push(vy(E,c,te));M={arrayValue:{values:Q}}}else M=vy(E,c,I)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||wy(I,b),M=BA(v,m,I,b==="in"||b==="not-in");return en.create(x,b,M)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class $m extends Hm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new $m(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Ri.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,c){let m=a;const v=c.getFlattenedFilters();for(const E of v)J0(m,E),m=$f(m,E)})(e._query,t),new Va(e.firestore,e.converter,$f(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gm extends X0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Gm(e,t)}_apply(e){const t=(function(a,c,m){if(a.startAt!==null)throw new Se(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Se(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Du(c,m)})(e._query,this._field,this._direction);return new Va(e.firestore,e.converter,db(e._query,t))}}function KA(i,e="asc"){const t=e,s=Yh("orderBy",i);return Gm._create(s,t)}function vy(i,e,t){if(typeof(t=Fr(t))=="string"){if(t==="")throw new Se(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zv(e)&&t.indexOf("/")!==-1)throw new Se(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(At.fromString(t));if(!Le.isDocumentKey(s))throw new Se(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return N_(i,new Le(s))}if(t instanceof nn)return N_(i,t._key);throw new Se(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zh(t)}.`)}function wy(i,e){if(!Array.isArray(i)||i.length===0)throw new Se(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function J0(i,e){const t=(function(a,c){for(const m of a)for(const v of m.getFlattenedFilters())if(c.indexOf(v.op)>=0)return v.op;return null})(i.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Se(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Se(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function QA(i,e,t){let s;return s=i?i.toFirestore(e):e,s}class Eu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pa extends Y0{constructor(e,t,s,a,c,m){super(e,t,s,a,m),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Yh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Pa._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Pa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Pa._jsonSchema={type:tn("string",Pa._jsonSchemaVersion),bundleSource:tn("string","DocumentSnapshot"),bundleName:tn("string"),bundle:tn("string")};class uh extends Pa{data(e={}){return super.data(e)}}class Sl{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Eu(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new uh(this._firestore,this._userDataWriter,s.key,s,new Eu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let m=0;return a._snapshot.docChanges.map((v=>{const E=new uh(a._firestore,a._userDataWriter,v.doc.key,v.doc,new Eu(a._snapshot.mutatedKeys.has(v.doc.key),a._snapshot.fromCache),a.query.converter);return v.doc,{type:"added",doc:E,oldIndex:-1,newIndex:m++}}))}{let m=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((v=>c||v.type!==3)).map((v=>{const E=new uh(a._firestore,a._userDataWriter,v.doc.key,v.doc,new Eu(a._snapshot.mutatedKeys.has(v.doc.key),a._snapshot.fromCache),a.query.converter);let x=-1,b=-1;return v.type!==0&&(x=m.indexOf(v.doc.key),m=m.delete(v.doc.key)),v.type!==1&&(m=m.add(v.doc),b=m.indexOf(v.doc.key)),{type:YA(v.type),doc:E,oldIndex:x,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Sl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ym.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function YA(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return We(61501,{type:i})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sl._jsonSchemaVersion="firestore/querySnapshot/1.0",Sl._jsonSchema={type:tn("string",Sl._jsonSchemaVersion),bundleSource:tn("string","QuerySnapshot"),bundleName:tn("string"),bundle:tn("string")};function XA(i,e,t){i=Tl(i,nn);const s=Tl(i.firestore,Ah),a=QA(i.converter,e),c=$0(s);return ek(s,[jA(c,"setDoc",i._key,a,i.converter!==null,t).toMutation(i._key,Fs.none())])}function JA(i,...e){var x,b,I;i=Fr(i);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||yy(e[s])||(t=e[s++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(yy(e[s])){const M=e[s];e[s]=(x=M.next)==null?void 0:x.bind(M),e[s+1]=(b=M.error)==null?void 0:b.bind(M),e[s+2]=(I=M.complete)==null?void 0:I.bind(M)}let c,m,v;if(i instanceof nn)m=Tl(i.firestore,Ah),v=Im(i._key.path),c={next:M=>{e[s]&&e[s](tk(m,i,M))},error:e[s+1],complete:e[s+2]};else{const M=Tl(i,Va);m=Tl(M.firestore,Ah),v=M._query;const $=new Q0(m);c={next:Q=>{e[s]&&e[s](new Sl(m,$,M,Q))},error:e[s+1],complete:e[s+2]},GA(i._query)}const E=U0(m);return CA(E,v,a,c)}function ek(i,e){const t=U0(i);return AA(t,e)}function tk(i,e,t){const s=t.docs.get(e._key),a=new Q0(i);return new Pa(i,a,e._key,s,new Eu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){PP(Ml),Pl(new Aa("firestore",((s,{instanceIdentifier:a,options:c})=>{const m=s.getProvider("app").getImmediate(),v=new Ah(new AP(s.getProvider("auth-internal")),new NP(m,s.getProvider("app-check-internal")),KP(m,a),m);return c={useFetchStreams:t,...c},v._setSettings(c),v}),"PUBLIC").setMultipleInstances(!0)),Vo(gy,_y,e),Vo(gy,_y,"esm2020")})();const nk={apiKey:"AIzaSyB1YwI0pF8O8y05mfDUuBwxlPuHEFdmQ5g",authDomain:"ameliorons-ff5dc.firebaseapp.com",projectId:"ameliorons-ff5dc",storageBucket:"ameliorons-ff5dc.firebasestorage.app",messagingSenderId:"466230393587",appId:"1:466230393587:web:cf016d45bf7c734fd71586"},ew=jy(nk),tw=DA(ew),bf=TP(ew);function rk(i){const e=ZA(LA(tw,"reports"),KA("date","desc"));return JA(e,t=>{const s=t.docs.map(a=>{var m;const c=a.data();return{id:a.id,...c,date:(m=c.date)!=null&&m.toDate?c.date.toDate().toISOString():c.date}});i(s)})}async function ik(i){const e={id:i.id,mode:i.mode,category:i.category,description:i.description,photo:i.photo??"",location:{lat:i.location.lat,lng:i.location.lng,...i.location.address?{address:i.location.address}:{}},date:kt.fromDate(new Date(i.date)),status:i.status,reportedBy:i.reportedBy,validations:i.validations??0,validatedBy:i.validatedBy??[]};i.type&&(e.type=i.type),await XA(MA(tw,"reports",i.id),e)}function sk(){const[i,e]=rt.useState([]),[t,s]=rt.useState("citizen"),[a,c]=rt.useState(!1),[m,v]=rt.useState(!1),[E,x]=rt.useState(null),[b,I]=rt.useState(null),[M,$]=rt.useState(!1),[Q,te]=rt.useState(!1),[ee,Ae]=rt.useState(347),[pe,ve]=rt.useState(null),[ge,Me]=rt.useState(null),[je,F]=rt.useState(!0),A=()=>{if(F(!0),Me(null),!navigator.geolocation){Me("La golocalisation nest pas supporte par ce navigateur."),F(!1);return}navigator.geolocation.getCurrentPosition(j=>{ve({lat:j.coords.latitude,lng:j.coords.longitude}),Me(null),F(!1)},j=>{let k="Impossible de rcuprer votre localisation.";j.code===j.PERMISSION_DENIED?k="Vous avez refus laccs  la localisation.":j.code===j.POSITION_UNAVAILABLE?k="Position indisponible (GPS/Wi-Fi).":j.code===j.TIMEOUT&&(k="La localisation a expir (timeout)."),Me(k),F(!1)},{enableHighAccuracy:!0,timeout:12e3,maximumAge:0})};rt.useEffect(()=>{A()},[]),rt.useEffect(()=>{bf.currentUser||oS(bf).catch(console.error);const j=rk(e);return()=>j()},[]);const O=rt.useCallback((j,k)=>{m&&(x({lat:j,lng:k}),v(!1),c(!0),pu.success("Position valide"))},[m]),U=async j=>{var k;try{const $e=((k=bf.currentUser)==null?void 0:k.uid)??"anonymous",at={...j,id:crypto.randomUUID(),date:new Date().toISOString(),status:"nouveau",reportedBy:$e,validations:0,validatedBy:[]};await ik(at),c(!1),x(null),Ae(be=>be+(j.mode==="probleme"?20:10)),pu.success("Signalement envoy !")}catch{pu.error("Erreur d'envoi")}},D={name:"Sophie Martin",photo:"https://images.unsplash.com/photo-1532272478764-53cd1fe53f72?w=100&h=100&fit=crop",points:ee,level:Math.floor(ee/50),badge:" Contributeur expert"};return N.jsxs("div",{className:"h-screen w-screen relative bg-slate-900 overflow-hidden font-sans",children:[N.jsx(B1,{position:"top-center",richColors:!0}),N.jsx("div",{className:"absolute inset-0 z-0",children:je?N.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center bg-white",children:[N.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),N.jsx("p",{className:"text-slate-500 font-medium italic",children:"Rcupration de votre localisation"})]}):ge||!pe?N.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center bg-slate-50 p-6 text-center",children:[N.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl border border-slate-100 max-w-sm",children:[N.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:"Localisation requise"}),N.jsx("p",{className:"text-slate-600 mb-6 text-sm",children:ge??"Localisation non disponible."}),N.jsx("button",{onClick:A,className:"w-full bg-blue-600 text-white py-3 rounded-2xl font-bold shadow-lg hover:bg-blue-700 transition-colors",children:"Ressayer"})]}),N.jsx("div",{className:"absolute bottom-2 left-2 z-30 bg-white/90 text-[10px] px-2 py-1 rounded border border-slate-200",children:ge?`geo: error (${ge})`:`geo: ok (${pe==null?void 0:pe.lat.toFixed(5)}, ${pe==null?void 0:pe.lng.toFixed(5)})`})]}):N.jsx(Zw,{reports:i,onReportClick:I,onMapClick:O,selectedLocation:E,userLocation:pe,zoom:19})}),N.jsxs("div",{className:"absolute top-4 right-4 z-40 flex flex-col items-end gap-3 pointer-events-none",children:[N.jsx("button",{onClick:()=>te(!0),className:"bg-white/90 backdrop-blur-md p-1 rounded-full shadow-lg border border-white/40 pointer-events-auto hover:scale-105 transition-transform",children:N.jsxs("div",{className:"relative",children:[N.jsx("img",{src:D.photo,className:"w-11 h-11 rounded-full object-cover shadow-inner",alt:"Profil"}),N.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-600 text-[10px] font-bold text-white w-5 h-5 rounded-full flex items-center justify-center border-2 border-white shadow-sm",children:D.level})]})}),N.jsxs("button",{onClick:()=>{const j=t==="citizen"?"agent":"citizen";s(j),$(j==="agent"),pu.info(`Mode ${j==="agent"?"Agent":"Citoyen"} activ`)},className:`pointer-events-auto flex items-center gap-2 px-4 py-2 rounded-xl font-bold shadow-lg transition-all border ${t==="agent"?"bg-emerald-500 border-emerald-400 text-white":"bg-white/90 border-slate-200 text-slate-700 backdrop-blur-md"}`,children:[t==="agent"?N.jsx(uE,{size:18}):N.jsx(om,{size:18}),N.jsx("span",{className:"text-[10px] uppercase tracking-wider",children:t==="agent"?"Agent":"Citoyen"})]})]}),N.jsxs("div",{className:"absolute bottom-8 left-0 right-0 z-40 px-6 flex items-end justify-between pointer-events-none",children:[N.jsxs("div",{className:"bg-white/90 backdrop-blur-lg px-4 py-3 rounded-2xl shadow-xl border border-white/40 flex items-center gap-3 pointer-events-auto",children:[N.jsx("div",{className:"bg-red-500 p-1.5 rounded-lg",children:N.jsx(mE,{className:"text-white",size:18})}),N.jsxs("h1",{className:"text-lg font-bold tracking-tight text-slate-800",children:["a",N.jsx("span",{className:"text-red-600",children:"MEL"}),"iorons"]})]}),t==="citizen"&&!a&&!m&&N.jsxs("button",{onClick:()=>c(!0),className:"bg-blue-600 text-white p-5 rounded-3xl shadow-2xl hover:bg-blue-700 hover:scale-110 transition-all flex items-center gap-3 active:scale-95 pointer-events-auto",children:[N.jsx(gE,{size:28,strokeWidth:3}),N.jsx("span",{className:"font-bold pr-1 text-sm",children:"Signaler"})]})]}),a&&N.jsx("div",{className:"absolute inset-0 z-50 flex items-end justify-center bg-slate-900/20 backdrop-blur-[2px]",children:N.jsxs("div",{className:"bg-white w-full max-w-md rounded-t-[40px] shadow-2xl animate-in slide-in-from-bottom duration-300 max-h-[85vh] overflow-y-auto",children:[N.jsxs("div",{className:"sticky top-0 bg-white px-8 py-6 border-b border-slate-50 flex items-center justify-between z-10",children:[N.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Signalement"}),N.jsx("button",{onClick:()=>c(!1),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:N.jsx(Rh,{size:24,className:"text-slate-400"})})]}),N.jsx(kE,{onSubmit:U,onCancel:()=>{c(!1),x(null)},initialLocation:E,onLocationSelect:()=>{c(!1),v(!0),pu.info("O se trouve le problme ?")}})]})}),M&&t==="agent"&&N.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[65vh] z-40 bg-white rounded-t-[40px] shadow-2xl overflow-hidden border-t border-slate-100",children:N.jsx(h1,{reports:i,onReportClick:I,onStatusChange:()=>{},onValidate:()=>{}})}),b&&N.jsx(c1,{report:b,onClose:()=>I(null),isAdmin:t==="agent"}),N.jsx(d1,{isOpen:Q,onClose:()=>te(!1),userName:D.name,userPhoto:D.photo,points:D.points,level:D.level,badge:D.badge})]})}Hw.createRoot(document.getElementById("root")).render(N.jsx(sk,{}));
